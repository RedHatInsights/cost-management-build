(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{650:function(e,t,a){"use strict";var s=a(961),r=a(956),n=a(979),l=a(954),i=a(930),o=a(957),c=a(185),u=a(617),m=a(608),p=a(609),h=a.n(p),d=a(122),b=a(1),g=a.n(b),v=a(604);const E={currentRequestData:{data:{fill:"none",stroke:"#88D080",strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:"#A2DA9C"}},itemsPerRow:2,legend:{labels:{fontFamily:v.p.value,fontSize:14},minWidth:380},legendColorScale:[v.y.value,v.f.value,v.y.value,v.g.value],previousRequestData:{data:{fill:"none",stroke:v.y.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:v.y.value}},currentColorScale:[v.f.value,v.g.value,v.h.value,v.i.value,v.j.value],previousColorScale:[v.y.value,v.y.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},f=c.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"},marginTop:v.B.value}});class y extends g.a.Component{constructor(){super(...arguments),this.containerRef=g.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=(()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props;this.setState({series:[{childName:"previousUsage",data:s,legendItem:{name:Object(m.f)(s,"chart.usage_legend_label",!0,!0,1),symbol:{type:"minus"}},style:E.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:Object(m.f)(t,"chart.usage_legend_label",!0,!1),symbol:{type:"minus"}},style:E.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:Object(m.f)(a,"chart.requests_legend_label",!0,!0,1),symbol:{type:"dash"}},style:E.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:Object(m.f)(e,"chart.requests_legend_label",!0,!1),symbol:{type:"dash"}},style:E.currentRequestData}]})}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>{const{hiddenSeries:a}=this.state;return g.a.createElement(o.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})}),this.getLegend=(()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state,a=e||(t>300?E.itemsPerRow:1);return g.a.createElement(i.a,{colorScale:E.legendColorScale,data:this.getLegendData(),height:25,gutter:10,itemsPerRow:a,name:"legend",style:E.legend})}),this.getTooltipLabel=(({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(m.e)(e,Object(m.d)(t),a,"date");return"currentRequest"===e.childName||"previousRequest"===e.childName?d.a.t("chart.requests_tooltip",{value:s}):"currentUsage"===e.childName||"previousUsage"===e.childName?d.a.t("chart.usage_tooltip",{value:s}):s}),this.handleLegendClick=(e=>{this.state.hiddenSeries.delete(e.index)||this.state.hiddenSeries.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})}),this.isDataAvailable=(()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length===(e?e.length:0)}),this.isSeriesHidden=(e=>{const{hiddenSeries:t}=this.state;return t.has(e)}),this.getChartNames=(()=>{const{series:e}=this.state,t=[];return e&&e.map((e,a)=>{t.push(e.childName)}),t}),this.getEvents=(()=>{return Object(s.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick})}),this.getLegendData=(()=>{const{hiddenSeries:e,series:t}=this.state;if(t){return t.map((t,a)=>Object.assign({},t.legendItem,Object(s.b)(e.has(a))))}})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r={x:[1,31]},n=e?Object(m.c)(e):0,l=t?Object(m.c)(t):0,i=a?Object(m.c)(a):0,o=s?Object(m.c)(s):0,c=Math.max(n,l,i,o),u=c>0?Math.ceil(c+.1*c):0;return u>0&&(r.y=[0,u]),r}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=e?h()(Object(m.b)(e,!0,!0)[1]):0,n=t?h()(Object(m.b)(t,!0,!0)[1]):0,l=a?h()(Object(m.b)(a,!0,!0)[1]):0,i=s?h()(Object(m.b)(s,!0,!0)[1]):0;return r>0||n>0||l>0||i>0?Math.max(r,n,l,i):31}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,padding:s,title:i}=this.props,{series:o,width:m}=this.state,p=this.isDataAvailable(),h=g.a.createElement(l.a,{allowTooltip:!p,constrainToVisibleArea:!0,labels:p?void 0:this.getTooltipLabel,voronoiDimension:"x"}),d=this.getDomain(),b=this.getEndDate(),v=Math.floor(b/2),y=e?m>400?a:a+75:a;return g.a.createElement("div",{className:Object(c.b)(f.chartContainer),ref:this.containerRef,style:{height:y}},g.a.createElement("div",null,i),g.a.createElement(n.a,{containerComponent:h,domain:d,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:s,theme:u.a,width:m},o&&o.map((e,t)=>this.getChart(e,t)),g.a.createElement(r.a,{style:E.xAxis,tickValues:[1,v,b]}),g.a.createElement(r.a,{dependentAxis:!0,style:E.yAxis})))}}a.d(t,"a",function(){return y})},664:function(e,t,a){"use strict";var s=a(1027),r=a(1026),n=a(1029),l=a(1037),i=a(1025),o=a(185),c=a(606),u=a(1),m=a.n(u),p=a(134),h=a(604);const d=o.a.create({chartSkeleton:{height:"125px",marginBottom:h.C.value,marginTop:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"}}),b=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:u,status:p,t:h})=>m.a.createElement(n.a,{className:Object(o.b)(d.reportSummary)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},a),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(d.subtitle)},u)),m.a.createElement(s.a,null,1===p?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.legendSkeleton),size:c.SkeletonSize.xs})):e),Boolean(t)&&m.a.createElement(r.a,null,t)));var g=a(988),v=a(989);const E=o.a.create({chartSkeleton:{height:"175px",marginBottom:h.C.value,marginTop:h.C.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"470px",marginRight:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:h.B.value}}),f=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:u,t:p,tabs:h,title:d})=>m.a.createElement(n.a,{className:Object(o.b)(E.reportSummary)},m.a.createElement(v.a,{gutter:"md"},m.a.createElement(g.a,{lg:5,xl:6},m.a.createElement("div",{className:Object(o.b)(E.cost)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},d),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(E.subtitle)},u)),m.a.createElement(s.a,null,1===a?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(E.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(E.legendSkeleton),size:c.SkeletonSize.xs})):e))),m.a.createElement(g.a,{lg:7,xl:6},m.a.createElement("div",{className:Object(o.b)(E.container)},m.a.createElement("div",{className:Object(o.b)(E.tops)},1!==a&&m.a.createElement(m.a.Fragment,null,Boolean(h)&&m.a.createElement(s.a,null,h),Boolean(t)&&m.a.createElement(r.a,null,t))))))));var y=a(616),S=a(605);const O=o.a.create({reportSummaryDetails:{marginBottom:h.C.value,display:"flex",alignItems:"flex-end"},text:{paddingBottom:14,lineHeight:h.v.value,fontSize:h.u.value},value:{color:h.n.var,marginRight:h.D.value,fontSize:h.q.value},valueContainer:{display:"inline-block",marginBottom:h.C.value,width:"50%",wordWrap:"break-word"}}),k=Object(p.d)()(({costLabel:e,formatValue:t,formatOptions:a,report:s,reportType:r="cost",showUnits:n=!1,showUsageFirst:l=!1,t:i,units:c,usageFormatOptions:u,usageLabel:p})=>{let h=m.a.createElement(y.a,null),d=m.a.createElement(y.a,null);s&&s.meta&&s.meta.total&&(h=t(s.meta.total.cost?s.meta.total.cost.value:0,s.meta.total.cost?s.meta.total.cost.units:"USD",a),d=s.meta.total.usage&&s.meta.total.usage.value?t(s.meta.total.usage?s.meta.total.usage.value:0,s.meta.total.usage?s.meta.total.usage.units:"",u||a):t(s.meta.total.usage?s.meta.total.usage:0,s.meta.total.count?s.meta.total.count.units:"",u||a));const b=()=>m.a.createElement("div",{className:Object(o.b)(O.valueContainer)},m.a.createElement("div",{className:Object(o.b)(O.value)},h),m.a.createElement("div",{className:Object(o.b)(O.text)},m.a.createElement("div",null,e))),g=()=>{if(!p)return null;const e=s&&s.meta&&s.meta.total&&s.meta.total.usage?s.meta.total.usage.units:"",t=Object(S.c)(c||e),a=i(`units.${t}`);return m.a.createElement("div",{className:Object(o.b)(O.valueContainer)},m.a.createElement("div",{className:Object(o.b)(O.value)},d,Boolean(n&&(c||s&&s.meta&&s.meta.total.usage&&s.meta.total.usage.value>=0))&&m.a.createElement("span",{className:Object(o.b)(O.text)},a)),m.a.createElement("div",{className:Object(o.b)(O.text)},m.a.createElement("div",null,p)))};return"cost"===r?m.a.createElement(m.a.Fragment,null,b()):l?m.a.createElement(m.a.Fragment,null,g(),b()):m.a.createElement(m.a.Fragment,null,b(),g())});var j=a(927);const T=o.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:h.C.value}},test:{":not(foo) svg":{overflow:"visible"}}}),D=({label:e,formatOptions:t,formatValue:a,t:s,totalValue:r,units:n,value:l})=>{const i=Object(S.c)(n),c="usd"!==i?s(`units.${i}`):void 0,u=Number((r?l/r*100:0).toFixed(2)),p=s("percent_of_total",{percent:u,units:c,value:a(l,n,t)});return m.a.createElement("li",{className:Object(o.b)(T.reportSummaryItem)},m.a.createElement(j.a,{label:p,value:u,title:e,size:j.b.sm}))};D.defaultProps={formatValue:e=>e};const C=Object(p.d)()(D);var w=a(629);const z=o.a.create({skeleton:{marginTop:h.C.value}});const N=Object(p.d)()(class extends m.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,s=Object(w.a)({report:e,idKey:t,labelKey:a}),r=s.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==r?[...s.slice(0,r),...s.slice(r+1),s[r]]:s}render(){const{children:e,status:t}=this.props;if(1===t)return m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(z.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(z.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(z.skeleton)}));{const t=this.getItems();return m.a.createElement("ul",null,e({items:t}))}}});var R=a(645);const L=o.a.create({chart:{marginBottom:h.D.value}}),x=e=>m.a.createElement("div",{className:Object(o.b)(L.chart)},m.a.createElement(R.a,Object.assign({},e)));a.d(t,"a",function(){return b}),a.d(t,"b",function(){return f}),a.d(t,"c",function(){return k}),a.d(t,"d",function(){return C}),a.d(t,"e",function(){return N}),a.d(t,"f",function(){return x})},665:function(e,t,a){"use strict";var s=a(1027),r=a(1026),n=a(1029),l=a(1037),i=a(1025),o=a(185),c=a(606),u=a(1),m=a.n(u),p=a(134),h=a(604);const d=o.a.create({chartSkeleton:{height:"125px",marginBottom:h.C.value,marginTop:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"}}),b=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:u,status:p,t:h})=>m.a.createElement(n.a,{className:Object(o.b)(d.reportSummary)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},a),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(d.subtitle)},u)),m.a.createElement(s.a,null,1===p?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.legendSkeleton),size:c.SkeletonSize.xs})):e),Boolean(t)&&m.a.createElement(r.a,null,t)));var g=a(988),v=a(989);const E=o.a.create({chartSkeleton:{height:"175px",marginBottom:h.C.value,marginTop:h.C.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"470px",marginRight:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:h.B.value}}),f=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:u,t:p,tabs:h,title:d})=>m.a.createElement(n.a,{className:Object(o.b)(E.reportSummary)},m.a.createElement(v.a,{gutter:"md"},m.a.createElement(g.a,{lg:5,xl:6},m.a.createElement("div",{className:Object(o.b)(E.cost)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},d),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(E.subtitle)},u)),m.a.createElement(s.a,null,1===a?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(E.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(E.legendSkeleton),size:c.SkeletonSize.xs})):e))),m.a.createElement(g.a,{lg:7,xl:6},m.a.createElement("div",{className:Object(o.b)(E.container)},m.a.createElement("div",{className:Object(o.b)(E.tops)},1!==a&&m.a.createElement(m.a.Fragment,null,Boolean(h)&&m.a.createElement(s.a,null,h),Boolean(t)&&m.a.createElement(r.a,null,t))))))));var y=a(616),S=a(605);const O=o.a.create({reportSummaryDetails:{marginBottom:h.C.value,display:"flex",alignItems:"flex-end"},text:{paddingBottom:14,lineHeight:h.v.value,fontSize:h.u.value},value:{color:h.n.var,marginRight:h.D.value,fontSize:h.q.value},valueContainer:{display:"inline-block",marginBottom:h.C.value,width:"50%",wordWrap:"break-word"}}),k=Object(p.d)()(({costLabel:e,formatValue:t,formatOptions:a,report:s,reportType:r="cost",showUnits:n=!1,showUsageFirst:l=!1,t:i,usageFormatOptions:c,usageLabel:u})=>{let p=m.a.createElement(y.a,null),h=m.a.createElement(y.a,null);s&&s.meta&&s.meta.total&&(p=t(s.meta.total.cost?s.meta.total.cost.value:0,s.meta.total.cost?s.meta.total.cost.units:"USD",a),h=t(s.meta.total.usage?s.meta.total.usage.value:0,s.meta.total.usage?s.meta.total.usage.units:"",c||a));const d=()=>m.a.createElement("div",{className:Object(o.b)(O.valueContainer)},m.a.createElement("div",{className:Object(o.b)(O.value)},p),m.a.createElement("div",{className:Object(o.b)(O.text)},m.a.createElement("div",null,e))),b=()=>{if(!u)return null;const e=s&&s.meta&&s.meta.total&&s.meta.total.usage?s.meta.total.usage.units:"",t=Object(S.c)(e),a=i(`units.${t}`);return m.a.createElement("div",{className:Object(o.b)(O.valueContainer)},m.a.createElement("div",{className:Object(o.b)(O.value)},h,Boolean(n&&s&&s.meta&&s.meta.total.usage&&s.meta.total.usage.value>=0)&&m.a.createElement("span",{className:Object(o.b)(O.text)},a)),m.a.createElement("div",{className:Object(o.b)(O.text)},m.a.createElement("div",null,u)))};return"cost"===r?m.a.createElement(m.a.Fragment,null,d()):l?m.a.createElement(m.a.Fragment,null,b(),d()):m.a.createElement(m.a.Fragment,null,d(),b())});var j=a(927);const T=o.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:h.C.value}},test:{":not(foo) svg":{overflow:"visible"}}}),D=({label:e,formatOptions:t,formatValue:a,t:s,totalValue:r,units:n,value:l})=>{const i=Object(S.c)(n),c="usd"!==i?s(`units.${i}`):void 0,u=Number((r?l/r*100:0).toFixed(2)),p=s("percent_of_total",{percent:u,units:c,value:a(l,n,t)});return m.a.createElement("li",{className:Object(o.b)(T.reportSummaryItem)},m.a.createElement(j.a,{label:p,value:u,title:e,size:j.b.sm}))};D.defaultProps={formatValue:e=>e};const C=Object(p.d)()(D);var w=a(632);const z=o.a.create({skeleton:{marginTop:h.C.value}});const N=Object(p.d)()(class extends m.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,s=Object(w.a)({report:e,idKey:t,labelKey:a}),r=s.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==r?[...s.slice(0,r),...s.slice(r+1),s[r]]:s}render(){const{children:e,status:t}=this.props;if(1===t)return m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(z.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(z.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(z.skeleton)}));{const t=this.getItems();return m.a.createElement("ul",null,e({items:t}))}}});var R=a(645);const L=o.a.create({chart:{marginBottom:h.D.value}}),x=e=>m.a.createElement("div",{className:Object(o.b)(L.chart)},m.a.createElement(R.a,Object.assign({},e)));a.d(t,"a",function(){return b}),a.d(t,"b",function(){return f}),a.d(t,"c",function(){return k}),a.d(t,"d",function(){return C}),a.d(t,"e",function(){return N}),a.d(t,"f",function(){return x})},666:function(e,t,a){"use strict";var s=a(1027),r=a(1026),n=a(1029),l=a(1037),i=a(1025),o=a(185),c=a(606),u=a(1),m=a.n(u),p=a(134),h=a(604);const d=o.a.create({chartSkeleton:{height:"125px",marginBottom:h.C.value,marginTop:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"}}),b=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:u,status:p,t:h})=>m.a.createElement(n.a,{className:Object(o.b)(d.reportSummary)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},a),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(d.subtitle)},u)),m.a.createElement(s.a,null,1===p?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.legendSkeleton),size:c.SkeletonSize.xs})):e),Boolean(t)&&m.a.createElement(r.a,null,t)));var g=a(988),v=a(989);const E=o.a.create({chartSkeleton:{height:"175px",marginBottom:h.C.value,marginTop:h.C.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"470px",marginRight:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:h.B.value}}),f=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:u,t:p,tabs:h,title:d})=>m.a.createElement(n.a,{className:Object(o.b)(E.reportSummary)},m.a.createElement(v.a,{gutter:"md"},m.a.createElement(g.a,{lg:5,xl:6},m.a.createElement("div",{className:Object(o.b)(E.cost)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},d),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(E.subtitle)},u)),m.a.createElement(s.a,null,1===a?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(E.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(E.legendSkeleton),size:c.SkeletonSize.xs})):e))),m.a.createElement(g.a,{lg:7,xl:6},m.a.createElement("div",{className:Object(o.b)(E.container)},m.a.createElement("div",{className:Object(o.b)(E.tops)},1!==a&&m.a.createElement(m.a.Fragment,null,Boolean(h)&&m.a.createElement(s.a,null,h),Boolean(t)&&m.a.createElement(r.a,null,t))))))));var y=a(923),S=a(616),O=a(605);const k=o.a.create({reportSummaryDetails:{marginBottom:h.C.value,display:"flex",alignItems:"flex-end"},text:{paddingBottom:14,lineHeight:h.v.value,fontSize:h.u.value},value:{color:h.n.var,marginRight:h.D.value,fontSize:h.q.value},valueContainer:{display:"inline-block",marginBottom:h.C.value,width:"50%",wordWrap:"break-word"}}),j=Object(p.d)()(({costLabel:e,formatValue:t,formatOptions:a,report:s,reportType:r="cost",requestFormatOptions:n,requestLabel:l,showUnits:i=!1,showUsageFirst:c=!1,t:u,usageFormatOptions:p,usageLabel:h})=>{let d=m.a.createElement(S.a,null),b=m.a.createElement(S.a,null),g=m.a.createElement(S.a,null),v=m.a.createElement(S.a,null),E=m.a.createElement(S.a,null);const f="database"===r||"instance_type"===r||"network"===r||"storage"===r;s&&s.meta&&s.meta.total&&(d=t(s.meta.total.cost?s.meta.total.cost.value:0,s.meta.total.cost?s.meta.total.cost.units:"USD",a),b=t(s.meta.total.infrastructure_cost?s.meta.total.infrastructure_cost.value:0,s.meta.total.infrastructure_cost?s.meta.total.infrastructure_cost.units:"USD",a),g=t(s.meta.total.markup_cost?s.meta.total.markup_cost.value:0,s.meta.total.markup_cost?s.meta.total.markup_cost.units:"USD",a),f?E=t(s.meta.total.usage?s.meta.total.usage.value:0,s.meta.total.usage?s.meta.total.usage.units:"",p||a):(E=t(s.meta.total.usage?s.meta.total.usage.value:0,s.meta.total.usage?s.meta.total.usage.units:"",p||a),v=t(s.meta.total.request?s.meta.total.request.value:0,s.meta.total.request?s.meta.total.request.units:"",n?p:a)));const j=()=>m.a.createElement("div",{className:Object(o.b)(k.valueContainer)},m.a.createElement(y.a,{content:u("ocp_cloud_dashboard.total_cost_tooltip",{infrastructureCost:b,markupCost:g}),enableFlip:!0},m.a.createElement("div",{className:Object(o.b)(k.value)},d)),m.a.createElement("div",{className:Object(o.b)(k.text)},m.a.createElement("div",null,e))),T=()=>{if(!h)return null;const e=s&&s.meta&&s.meta.total&&s.meta.total.request?s.meta.total.request.units:"",t=Object(O.c)(e),a=u(`units.${t}`);return m.a.createElement("div",{className:Object(o.b)(k.valueContainer)},m.a.createElement("div",{className:Object(o.b)(k.value)},v,Boolean(i&&s&&s.meta&&s.meta.total.request&&s.meta.total.request.value>=0)&&m.a.createElement("span",{className:Object(o.b)(k.text)},a)),m.a.createElement("div",{className:Object(o.b)(k.text)},m.a.createElement("div",null,l)))},D=()=>{if(!h)return null;const e=s&&s.meta&&s.meta.total&&s.meta.total.usage?s.meta.total.usage.units:"",t=Object(O.c)(e),a=u(`units.${t}`);return m.a.createElement("div",{className:Object(o.b)(k.valueContainer)},m.a.createElement("div",{className:Object(o.b)(k.value)},E,Boolean(i&&s&&s.meta&&s.meta.total.usage&&s.meta.total.usage.value>=0)&&m.a.createElement("span",{className:Object(o.b)(k.text)},a)),m.a.createElement("div",{className:Object(o.b)(k.text)},m.a.createElement("div",null,h)))};return"cost"===r?m.a.createElement(m.a.Fragment,null,j()):f?c?m.a.createElement(m.a.Fragment,null,D(),j()):m.a.createElement(m.a.Fragment,null,j(),D()):c?m.a.createElement(m.a.Fragment,null,D(),T()):m.a.createElement(m.a.Fragment,null,T(),D())});var T=a(927);const D=o.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:h.C.value}},test:{":not(foo) svg":{overflow:"visible"}}}),C=({label:e,formatOptions:t,formatValue:a,t:s,totalValue:r,units:n,value:l})=>{const i=Object(O.c)(n),c="usd"!==i?s(`units.${i}`):void 0,u=Number((r?l/r*100:0).toFixed(2)),p=s("percent_of_total",{percent:u,units:c,value:a(l,n,t)});return m.a.createElement("li",{className:Object(o.b)(D.reportSummaryItem)},m.a.createElement(T.a,{label:p,value:u,title:e,size:T.b.sm}))};C.defaultProps={formatValue:e=>e};const w=Object(p.d)()(C);var z=a(628);const N=o.a.create({skeleton:{marginTop:h.C.value}});const R=Object(p.d)()(class extends m.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,s=Object(z.a)({report:e,idKey:t,labelKey:a}),r=s.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==r?[...s.slice(0,r),...s.slice(r+1),s[r]]:s}render(){const{children:e,status:t}=this.props;if(1===t)return m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(N.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(N.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(N.skeleton)}));{const t=this.getItems();return m.a.createElement("ul",null,e({items:t}))}}});var L=a(645);const x=o.a.create({chart:{marginBottom:h.D.value}}),_=e=>m.a.createElement("div",{className:Object(o.b)(x.chart)},m.a.createElement(L.a,Object.assign({},e)));var F=a(650);const I=e=>m.a.createElement("div",{className:Object(o.b)(x.chart)},m.a.createElement(F.a,Object.assign({},e)));a.d(t,"a",function(){return b}),a.d(t,"b",function(){return f}),a.d(t,"c",function(){return j}),a.d(t,"d",function(){return w}),a.d(t,"e",function(){return R}),a.d(t,"f",function(){return _}),a.d(t,"g",function(){return I})},667:function(e,t,a){"use strict";var s=a(1027),r=a(1026),n=a(1029),l=a(1037),i=a(1025),o=a(185),c=a(606),u=a(1),m=a.n(u),p=a(134),h=a(604);const d=o.a.create({chartSkeleton:{height:"125px",marginBottom:h.C.value,marginTop:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"}}),b=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:u,status:p,t:h})=>m.a.createElement(n.a,{className:Object(o.b)(d.reportSummary)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},a),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(d.subtitle)},u)),m.a.createElement(s.a,null,1===p?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.chartSkeleton),size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{className:Object(o.b)(d.legendSkeleton),size:c.SkeletonSize.xs})):e),Boolean(t)&&m.a.createElement(r.a,null,t)));var g=a(989),v=a(988);const E=o.a.create({chartSkeleton:{height:"175px",marginBottom:h.C.value,marginTop:h.C.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"440px",marginRight:h.C.value},legendSkeleton:{marginTop:h.C.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.u.value,color:h.o.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:h.B.value}}),f=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:u,t:p,tabs:h,title:d})=>m.a.createElement(n.a,{className:Object(o.b)(E.reportSummary)},m.a.createElement(g.a,{gutter:"md"},m.a.createElement(v.a,{lg:5,xl:6},m.a.createElement("div",{className:Object(o.b)(E.cost)},m.a.createElement(i.a,null,m.a.createElement(l.a,{size:"lg"},d),Boolean(u)&&m.a.createElement("p",{className:Object(o.b)(E.subtitle)},u)),m.a.createElement(s.a,null,1===a?m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(E.chartSkeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs,className:Object(o.b)(E.legendSkeleton)})):e))),m.a.createElement(v.a,{lg:7,xl:6},m.a.createElement("div",{className:Object(o.b)(E.container)},m.a.createElement("div",{className:Object(o.b)(E.tops)},1!==a&&m.a.createElement(m.a.Fragment,null,Boolean(h)&&m.a.createElement(s.a,null,h),Boolean(t)&&m.a.createElement(r.a,null,t))))))));var y=a(923),S=a(616),O=a(605);const k=o.a.create({reportSummaryDetails:{marginBottom:h.C.value,display:"flex",alignItems:"flex-end"},text:{paddingBottom:14,lineHeight:h.v.value,fontSize:h.u.value},value:{color:h.n.var,marginRight:h.D.value,fontSize:h.q.value},valueContainer:{display:"inline-block",marginBottom:h.C.value,width:"50%",wordWrap:"break-word"}}),j=Object(p.d)()(({costLabel:e,formatValue:t,formatOptions:a,report:s,reportType:r="cost",requestFormatOptions:n,requestLabel:l,showUnits:i=!1,showUsageFirst:c=!1,t:u,usageFormatOptions:p,usageLabel:h})=>{let d=m.a.createElement(S.a,null),b=m.a.createElement(S.a,null),g=m.a.createElement(S.a,null),v=m.a.createElement(S.a,null),E=m.a.createElement(S.a,null);s&&s.meta&&s.meta.total&&(d=t(s.meta.total.cost?s.meta.total.cost.value:0,s.meta.total.cost?s.meta.total.cost.units:"USD",a),b=t(s.meta.total.derived_cost?s.meta.total.derived_cost.value:0,s.meta.total.derived_cost?s.meta.total.derived_cost.units:"USD",a),g=t(s.meta.total.infrastructure_cost?s.meta.total.infrastructure_cost.value:0,s.meta.total.infrastructure_cost?s.meta.total.infrastructure_cost.units:"USD",a),"cost"!==r&&(E=t(s.meta.total.usage?s.meta.total.usage.value:0,s.meta.total.usage?s.meta.total.usage.units:"",p||a),v=t(s.meta.total.request?s.meta.total.request.value:0,s.meta.total.request?s.meta.total.request.units:"",n?p:a)));const f=()=>{if(!h)return null;const e=s&&s.meta&&s.meta.total&&s.meta.total.request?s.meta.total.request.units:"",t=Object(O.c)(e),a=u(`units.${t}`);return m.a.createElement("div",{className:Object(o.b)(k.valueContainer)},m.a.createElement("div",{className:Object(o.b)(k.value)},v,Boolean(i&&s&&s.meta&&s.meta.total.request&&s.meta.total.request.value>=0)&&m.a.createElement("span",{className:Object(o.b)(k.text)},a)),m.a.createElement("div",{className:Object(o.b)(k.text)},m.a.createElement("div",null,l)))},j=()=>{if(!h)return null;const e=s&&s.meta&&s.meta.total&&s.meta.total.usage?s.meta.total.usage.units:"",t=Object(O.c)(e),a=u(`units.${t}`);return m.a.createElement("div",{className:Object(o.b)(k.valueContainer)},m.a.createElement("div",{className:Object(o.b)(k.value)},E,Boolean(i&&s&&s.meta&&s.meta.total.usage&&s.meta.total.usage.value>=0)&&m.a.createElement("span",{className:Object(o.b)(k.text)},a)),m.a.createElement("div",{className:Object(o.b)(k.text)},m.a.createElement("div",null,h)))};return"cost"===r?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:Object(o.b)(k.valueContainer)},m.a.createElement(y.a,{content:u("ocp_dashboard.total_cost_tooltip",{derivedCost:b,infrastructureCost:g}),enableFlip:!0},m.a.createElement("div",{className:Object(o.b)(k.value)},d)),m.a.createElement("div",{className:Object(o.b)(k.text)},m.a.createElement("div",null,e)))):c?m.a.createElement(m.a.Fragment,null,j(),f()):m.a.createElement(m.a.Fragment,null,f(),j())});var T=a(927);const D=o.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:h.C.value}},test:{":not(foo) svg":{overflow:"visible"}}}),C=({formatOptions:e,formatValue:t,label:a,t:s,totalValue:r,units:n,value:l})=>{const i=Object(O.c)(n),c="usd"!==i?s(`units.${i}`):void 0,u=Number((r?l/r*100:0).toFixed(2)),p=s("percent_of_total",{percent:u,units:c,value:t(l,n,e)});return m.a.createElement("li",{className:Object(o.b)(D.reportSummaryItem)},m.a.createElement(T.a,{label:p,value:u,title:a,size:T.b.sm}))};C.defaultProps={formatValue:e=>e};const w=Object(p.d)()(C);var z=a(627);const N=o.a.create({skeleton:{marginTop:h.C.value}});const R=Object(p.d)()(class extends m.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,s=Object(z.a)({report:e,idKey:t,labelKey:a}),r=s.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==r?[...s.slice(0,r),...s.slice(r+1),s[r]]:s}render(){const{children:e,status:t}=this.props;if(1===t)return m.a.createElement(m.a.Fragment,null,m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(N.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(N.skeleton)}),m.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(o.b)(N.skeleton)}));{const t=this.getItems();return m.a.createElement("ul",null,e({items:t}))}}});var L=a(961),x=a(956),_=a(979),F=a(954),I=a(930),B=a(957),H=a(617),U=a(608),K=a(609),q=a.n(K),P=a(122);const V={currentCostData:{data:{fill:"none",stroke:"#A2DA9C"}},currentInfrastructureCostData:{data:{fill:"none",stroke:"#88D080",strokeDasharray:"3,3"}},itemsPerRow:2,legend:{labels:{fontFamily:h.p.value,fontSize:14},minWidth:200},legendColorScale:[h.y.value,h.f.value,h.y.value,h.g.value],previousCostData:{data:{fill:"none",stroke:h.y.value}},previousInfrastructureCostData:{data:{fill:"none",stroke:h.y.value,strokeDasharray:"3,3"}},currentColorScale:[h.f.value,h.g.value,h.h.value,h.i.value,h.j.value],previousColorScale:[h.y.value,h.y.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},W=o.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"}}});class A extends m.a.Component{constructor(){super(...arguments),this.containerRef=m.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=(()=>{const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:s}=this.props,r="chart.cost_legend_label";this.setState({series:[{childName:"previousCost",data:s,legendItem:{name:Object(U.a)(s,r,!0,!0,1),symbol:{type:"minus"}},style:V.previousCostData},{childName:"currentCost",data:t,legendItem:{name:Object(U.a)(t,r,!0,!1),symbol:{type:"minus"}},style:V.currentCostData},{childName:"previousInfrastructureCost",data:a,legendItem:{name:Object(U.a)(a,"chart.cost_infrastructure_legend_label",!0,!0,1),symbol:{type:"dash"}},style:V.previousInfrastructureCostData},{childName:"currentInfrastructureCost",data:e,legendItem:{name:Object(U.a)(e,"chart.cost_infrastructure_legend_label",!0,!1),symbol:{type:"dash"}},style:V.currentInfrastructureCostData}]})}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>{const{hiddenSeries:a}=this.state;return m.a.createElement(B.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})}),this.getLegend=(()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state,a=e||(t>400?V.itemsPerRow:1);return m.a.createElement(I.a,{colorScale:V.legendColorScale,data:this.getLegendData(),height:25,gutter:10,itemsPerRow:a,name:"legend",responsive:!1,style:V.legend})}),this.getTooltipLabel=(({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(U.e)(e,Object(U.d)(t),a,"date");return"currentCost"===e.childName||"previousCost"===e.childName?P.a.t("chart.cost_tooltip",{value:s}):"currentInfrastructureCost"===e.childName||"previousInfrastructureCost"===e.childName?P.a.t("chart.cost_infrastructure_tooltip",{value:s}):s}),this.handleLegendClick=(e=>{this.state.hiddenSeries.delete(e.index)||this.state.hiddenSeries.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})}),this.isDataAvailable=(()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length===(e?e.length:0)}),this.isSeriesHidden=(e=>{const{hiddenSeries:t}=this.state;return t.has(e)}),this.getChartNames=(()=>{const{series:e}=this.state,t=[];return e&&e.map((e,a)=>{t.push(e.childName)}),t}),this.getEvents=(()=>{return Object(L.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick})}),this.getLegendData=(()=>{const{hiddenSeries:e,series:t}=this.state;if(t){return t.map((t,a)=>Object.assign({},t.legendItem,Object(L.b)(e.has(a))))}})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:s}=this.props,r={x:[1,31]},n=e?Object(U.c)(e):0,l=t?Object(U.c)(t):0,i=a?Object(U.c)(a):0,o=s?Object(U.c)(s):0,c=Math.max(n,l,i,o),u=c>0?Math.ceil(c+.1*c):0;return u>0&&(r.y=[0,u]),r}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:s}=this.props,r=e?q()(Object(U.b)(e,!0,!0)[1]):0,n=t?q()(Object(U.b)(t,!0,!0)[1]):0,l=a?q()(Object(U.b)(a,!0,!0)[1]):0,i=s?q()(Object(U.b)(s,!0,!0)[1]):0;return r>0||n>0||l>0||i>0?Math.max(r,n,l,i):31}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,padding:s,title:r}=this.props,{series:n,width:l}=this.state,i=this.isDataAvailable(),c=m.a.createElement(F.a,{allowTooltip:!i,constrainToVisibleArea:!0,labels:i?void 0:this.getTooltipLabel,voronoiDimension:"x"}),u=this.getDomain(),p=this.getEndDate(),h=Math.floor(p/2),d=e?l>400?a:a+75:a;return m.a.createElement("div",{className:Object(o.b)(W.chartContainer),ref:this.containerRef,style:{height:d}},m.a.createElement("div",null,r),m.a.createElement(_.a,{containerComponent:c,domain:u,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:s,theme:H.a,width:l},n&&n.map((e,t)=>this.getChart(e,t)),m.a.createElement(x.a,{style:V.xAxis,tickValues:[1,h,p]}),m.a.createElement(x.a,{dependentAxis:!0,style:V.yAxis})))}}const $=o.a.create({chart:{marginBottom:h.D.value}}),Q=e=>m.a.createElement("div",{className:Object(o.b)($.chart)},m.a.createElement(A,Object.assign({},e)));var M=a(650);const G=e=>m.a.createElement("div",{className:Object(o.b)($.chart)},m.a.createElement(M.a,Object.assign({},e)));a.d(t,"a",function(){return b}),a.d(t,"b",function(){return f}),a.d(t,"c",function(){return j}),a.d(t,"d",function(){return w}),a.d(t,"e",function(){return R}),a.d(t,"f",function(){return Q}),a.d(t,"g",function(){return G})},945:function(e,t,a){"use strict";a.r(t);var s=a(938),r=a(213),n=a(1037),l=a(917),i=a(998),o=a(468),c=a(1048),u=a(185),m=a(131),p=a(624),h=a(621),d=a(643),b=a(988),g=a(989),v=a(1),E=a.n(v),f=a(134),y=a(121),S=a(150),O=a(114),k=a(139),j=a(608),T=a(665),D=a(619),C=a.n(D),w=a(609),z=a.n(w),N=a(642),R=a.n(N),L=a(630),x=a.n(L),_=a(0),F=a.n(_),I=a(64),B=a.n(I),H=a(251),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var q=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},P=function(e){function t(){var a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=Array(r),l=0;l<r;l++)n[l]=arguments[l];return a=s=K(this,e.call.apply(e,[this].concat(n))),s.handleClick=function(e){if(s.props.onClick&&s.props.onClick(e),!e.defaultPrevented&&0===e.button&&!s.props.target&&!q(e)){e.preventDefault();var t=s.context.router.history,a=s.props,r=a.replace,n=a.to;r?t.replace(n):t.push(n)}},K(s,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),a=e.innerRef,s=function(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}(e,["replace","to","innerRef"]);B()(this.context.router,"You should not use <Link> outside a <Router>"),B()(void 0!==t,'You must specify the "to" property');var r=this.context.router.history,n="string"==typeof t?Object(H.b)(t,null,null,r.location):t,l=r.createHref(n);return E.a.createElement("a",U({},s,{onClick:this.handleClick,href:l,ref:a}))},t}(E.a.Component);P.propTypes={onClick:F.a.func,target:F.a.string,replace:F.a.bool,to:F.a.oneOfType([F.a.string,F.a.object]).isRequired,innerRef:F.a.oneOfType([F.a.string,F.a.func])},P.defaultProps={replace:!1},P.contextTypes={router:F.a.shape({history:F.a.shape({push:F.a.func.isRequired,replace:F.a.func.isRequired,createHref:F.a.func.isRequired}).isRequired}).isRequired};var V=P,W=a(108),A=a(605),$=a(604);const Q={chartAltHeight:180,chartHeight:80,containerAltHeight:200,containerTrendHeight:150},M=u.a.create({tabs:{marginTop:$.z.value},tabItems:{marginTop:$.E.value}}),G=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}};const J=Object(O.a)((e,{widgetId:t})=>{const a=S.c.selectWidget(e,t),s=S.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:W.c.selectReport(e,a.reportType,s.current),currentReportFetchStatus:W.c.selectReportFetchStatus(e,a.reportType,s.current),previousReport:W.c.selectReport(e,a.reportType,s.previous),tabsReport:W.c.selectReport(e,a.reportType,s.tabs),tabsReportFetchStatus:W.c.selectReportFetchStatus(e,a.reportType,s.tabs)})}),X={fetchReports:S.a.fetchWidgetReports,updateTab:S.a.changeWidgetTab},Y=Object(f.d)()(Object(y.connect)(J,X)(class extends E.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=G(e);return`/aws?${Object(k.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=((e,t,a=!1)=>{const{currentReport:s,details:r,previousReport:n,t:l,trend:i}=this.props,o=Object(j.g)(s,i.type),c=Object(j.g)(n,i.type),u=this.getUnits();return E.a.createElement(T.f,{adjustContainerHeight:a,containerHeight:e,currentData:o,formatDatumValue:A.b,formatDatumOptions:i.formatOptions,height:t,previousData:c,showUsageLegendLabel:r.showUsageLegendLabel,title:l(i.titleKey,{units:l(`units.${u}`)})})}),this.getDetails=(()=>{const{currentReport:e,details:t,isUsageFirst:a,reportType:s}=this.props,r=this.getUnits();return E.a.createElement(T.c,{costLabel:this.getDetailsLabel(t.costKey,r),formatOptions:t.formatOptions,formatValue:A.b,report:e,reportType:s,showUnits:t.showUnits,showUsageFirst:a,usageFormatOptions:t.usageFormatOptions,usageLabel:this.getDetailsLabel(t.usageKey,r)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&E.a.createElement(V,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:G(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return E.a.createElement(T.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(Q.containerAltHeight,Q.chartAltHeight,!0))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date,a=R()(t),s=C()(t,"D"),r=C()(x()(t),"D");return e("aws_dashboard.widget_subtitle",{count:z()(t),endDate:s,month:a,startDate:r})}),this.getTab=((e,t)=>{const{tabsReport:a,tabsReportFetchStatus:s}=this.props,r=G(e);return E.a.createElement(i.a,{eventKey:t,key:`${G(e)}-tab`,title:this.getTabTitle(e)},E.a.createElement("div",{className:Object(u.b)(M.tabItems)},E.a.createElement(T.e,{idKey:r,key:`${r}-items`,report:a,status:s},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,reportType:s,tabsReport:r,topItems:n}=this.props,{activeTabKey:l}=this.state,i=G(e),o=G(a[l]),c="cost"===s||"database"===s||"network"===s;return o===i?E.a.createElement(T.d,{key:`${t.id}-item`,formatOptions:n.formatOptions,formatValue:A.b,label:t.label?t.label.toString():"",totalValue:c?r.meta.total.cost.value:r.meta.total.usage.value,units:t.units,value:t.cost}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return E.a.createElement(l.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:G(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,s=R()(a);return e(t,{endDate:C()(a,"Do"),month:s,startDate:C()(x()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,reportType:t}=this.props;let a="";return e&&e.meta&&e.meta.total&&(a="cost"===t||"database"===t||"network"===t?e.meta.total.cost?Object(A.c)(e.meta.total.cost.units):"":e.meta.total.usage?Object(A.c)(e.meta.total.usage.units):""),a}),this.getVerticalLayout=(()=>{const{availableTabs:e,currentReportFetchStatus:t}=this.props;return E.a.createElement(T.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(Q.containerTrendHeight,Q.chartHeight),Boolean(e)&&E.a.createElement("div",{className:Object(u.b)(M.tabs)},this.getTabs()))}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"aws",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:s,updateTab:r}=this.props;r(s,a[t]),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,updateTab:s,widgetId:r}=this.props;s(a,e[0]),t(r)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),Z=Object(O.a)(e=>({selectWidgets:S.c.selectWidgets(e),widgets:S.c.selectCurrentWidgets(e)}));var ee=Object(f.d)()(Object(y.connect)(Z,{})(({selectWidgets:e,t:t,widgets:a})=>E.a.createElement("div",null,E.a.createElement(g.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?E.a.createElement(b.a,{sm:12,key:t},E.a.createElement(Y,{widgetId:t})):E.a.createElement(b.a,{lg:12,xl:6,xl2:4,key:t},E.a.createElement(Y,{widgetId:t}))}))))),te=a(149),ae=a(138),se=a(664),re=a(107);const ne={chartAltHeight:180,chartHeight:80,containerAltHeight:200,containerTrendHeight:150},le=u.a.create({tabs:{marginTop:$.z.value},tabItems:{marginTop:$.E.value}}),ie=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}};const oe=Object(O.a)((e,{widgetId:t})=>{const a=te.c.selectWidget(e,t),s=te.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:re.c.selectReport(e,a.reportType,s.current),currentReportFetchStatus:re.c.selectReportFetchStatus(e,a.reportType,s.current),previousReport:re.c.selectReport(e,a.reportType,s.previous),tabsReport:re.c.selectReport(e,a.reportType,s.tabs),tabsReportFetchStatus:re.c.selectReportFetchStatus(e,a.reportType,s.tabs)})}),ce={fetchReports:te.a.fetchWidgetReports,updateTab:te.a.changeWidgetTab},ue=Object(f.d)()(Object(y.connect)(oe,ce)(class extends E.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=ie(e);return`/azure?${Object(ae.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=((e,t,a=!1)=>{const{currentReport:s,details:r,previousReport:n,t:l,trend:i}=this.props,o=Object(j.h)(s,i.type),c=Object(j.h)(n,i.type),u=this.getUnits();return E.a.createElement(se.f,{adjustContainerHeight:a,containerHeight:e,currentData:o,formatDatumValue:A.b,formatDatumOptions:i.formatOptions,height:t,previousData:c,showUsageLegendLabel:r.showUsageLegendLabel,title:l(i.titleKey,{units:l(`units.${u}`)}),units:u})}),this.getDetails=(()=>{const{currentReport:e,details:t,isUsageFirst:a,reportType:s}=this.props,r=this.getUnits();return E.a.createElement(se.c,{costLabel:this.getDetailsLabel(t.costKey,r),formatOptions:t.formatOptions,formatValue:A.b,report:e,reportType:s,showUnits:t.showUnits,showUsageFirst:a,usageFormatOptions:t.usageFormatOptions,units:r,usageLabel:this.getDetailsLabel(t.usageKey,r)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&E.a.createElement(V,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:ie(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return E.a.createElement(se.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(ne.containerAltHeight,ne.chartAltHeight,!0))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date,a=R()(t),s=C()(t,"D"),r=C()(x()(t),"D");return e("azure_dashboard.widget_subtitle",{count:z()(t),endDate:s,month:a,startDate:r})}),this.getTab=((e,t)=>{const{tabsReport:a,tabsReportFetchStatus:s}=this.props,r=ie(e);return E.a.createElement(i.a,{eventKey:t,key:`${ie(e)}-tab`,title:this.getTabTitle(e)},E.a.createElement("div",{className:Object(u.b)(le.tabItems)},E.a.createElement(se.e,{idKey:r,key:`${r}-items`,report:a,status:s},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,details:s,reportType:r,tabsReport:n,topItems:l}=this.props,{activeTabKey:i}=this.state,o=ie(e),c=ie(a[i]),u="cost"===r||"database"===r||"network"===r;return c===o?E.a.createElement(se.d,{key:`${t.id}-item`,formatOptions:l.formatOptions,formatValue:A.b,label:t.label?t.label.toString():"",totalValue:u?n.meta.total.cost.value:n.meta.total.usage.value?n.meta.total.usage.value:n.meta.total.usage,units:s.units?s.units:t.units,value:t.cost}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return E.a.createElement(l.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:ie(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,s=R()(a);return e(t,{endDate:C()(a,"Do"),month:s,startDate:C()(x()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,details:t,reportType:a}=this.props;if(t.units)return t.units;let s="";return e&&e.meta&&e.meta.total&&(s="cost"===a||"database"===a||"network"===a?e.meta.total.cost?Object(A.c)(e.meta.total.cost.units):"":e.meta.total.usage?Object(A.c)(e.meta.total.usage.units):""),s}),this.getVerticalLayout=(()=>{const{availableTabs:e,currentReportFetchStatus:t}=this.props;return E.a.createElement(se.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(ne.containerTrendHeight,ne.chartHeight),Boolean(e)&&E.a.createElement("div",{className:Object(u.b)(le.tabs)},this.getTabs()))}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"azure",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:s,updateTab:r}=this.props;r(s,a[t]),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,updateTab:s,widgetId:r}=this.props;s(a,e[0]),t(r)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),me=Object(O.a)(e=>({selectWidgets:te.c.selectWidgets(e),widgets:te.c.selectCurrentWidgets(e)}));var pe=Object(f.d)()(Object(y.connect)(me,{})(({selectWidgets:e,t:t,widgets:a})=>E.a.createElement("div",null,E.a.createElement(g.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?E.a.createElement(b.a,{sm:12,key:t},E.a.createElement(ue,{widgetId:t})):E.a.createElement(b.a,{lg:12,xl:6,xl2:4,key:t},E.a.createElement(ue,{widgetId:t}))}))))),he=a(125),de=a(135),be=a(666),ge=a(106);const ve={chartAltHeight:180,chartHeight:80,containerAltHeight:200,containerTrendHeight:150,containerUsageHeight:180},Ee=u.a.create({tabs:{marginTop:$.z.value},tabItems:{marginTop:$.E.value}}),fe=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}};const ye=Object(O.a)((e,{widgetId:t})=>{const a=he.c.selectWidget(e,t),s=he.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:ge.c.selectReport(e,a.reportType,s.current),currentReportFetchStatus:ge.c.selectReportFetchStatus(e,a.reportType,s.current),previousReport:ge.c.selectReport(e,a.reportType,s.previous),tabsReport:ge.c.selectReport(e,a.reportType,s.tabs),tabsReportFetchStatus:ge.c.selectReportFetchStatus(e,a.reportType,s.tabs)})}),Se={fetchReports:he.a.fetchWidgetReports,updateTab:he.a.changeWidgetTab},Oe=Object(f.d)()(Object(y.connect)(ye,Se)(class extends E.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=fe(e);return`/ocp-cloud?${Object(de.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=((e,t,a=!1)=>{const{currentReport:s,details:r,previousReport:n,reportType:l,t:i,trend:o}=this.props,c="cost"===l||"database"===l||"network"===l?"cost":"usage",u=Object(j.i)(s,o.type,"date",c),m=Object(j.i)(n,o.type,"date",c),p="cost"!==l?Object(j.i)(s,o.type,"date","request"):void 0,h="cost"!==l?Object(j.i)(n,o.type,"date","request"):void 0,d=this.getUnits();return E.a.createElement(E.a.Fragment,null,Boolean("cost"===l||"database"===l||"instance_type"===l||"network"===l||"storage"===l)?E.a.createElement(be.f,{adjustContainerHeight:a,containerHeight:e,currentData:u,formatDatumValue:A.b,formatDatumOptions:o.formatOptions,height:t,previousData:m,showUsageLegendLabel:r.showUsageLegendLabel,title:i(o.titleKey,{units:i(`units.${d}`)})}):E.a.createElement(be.g,{containerHeight:ve.containerUsageHeight,currentRequestData:p,currentUsageData:u,formatDatumValue:A.b,formatDatumOptions:o.formatOptions,height:t,previousRequestData:h,previousUsageData:m,title:i(o.titleKey,{units:i(`units.${d}`)})}))}),this.getDetails=(()=>{const{currentReport:e,details:t,isUsageFirst:a,reportType:s}=this.props,r=this.getUnits();return E.a.createElement(be.c,{costLabel:this.getDetailsLabel(t.costKey,r),formatOptions:t.formatOptions,formatValue:A.b,report:e,reportType:s,requestFormatOptions:t.requestFormatOptions,requestLabel:this.getDetailsLabel(t.requestKey,r),showUnits:t.showUnits,showUsageFirst:a,usageFormatOptions:t.usageFormatOptions,usageLabel:this.getDetailsLabel(t.usageKey,r)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&E.a.createElement(V,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:fe(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return E.a.createElement(be.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(ve.containerAltHeight,ve.chartAltHeight,!0))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date,a=R()(t),s=C()(t,"D"),r=C()(x()(t),"D");return e("ocp_cloud_dashboard.widget_subtitle",{count:z()(t),endDate:s,month:a,startDate:r})}),this.getTab=((e,t)=>{const{tabsReport:a,tabsReportFetchStatus:s}=this.props,r=fe(e);return E.a.createElement(i.a,{eventKey:t,key:`${fe(e)}-tab`,title:this.getTabTitle(e)},E.a.createElement("div",{className:Object(u.b)(Ee.tabItems)},E.a.createElement(be.e,{idKey:r,key:`${r}-items`,report:a,status:s},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,reportType:s,tabsReport:r,topItems:n}=this.props,{activeTabKey:l}=this.state,i=fe(e),o=fe(a[l]),c="cost"===s||"database"===s||"network"===s;return o===i?E.a.createElement(be.d,{key:`${t.id}-item`,formatOptions:n.formatOptions,formatValue:A.b,label:t.label?t.label.toString():"",totalValue:c?r.meta.total.cost.value:r.meta.total.usage.value,units:t.units,value:c?t.cost:t.usage}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return e?E.a.createElement(l.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t))):null}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:fe(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,s=R()(a);return e(t,{endDate:C()(a,"Do"),month:s,startDate:C()(x()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,reportType:t}=this.props;let a="";return e&&e.meta&&e.meta.total&&(a="cost"===t||"database"===t||"network"===t?e.meta.total.cost?Object(A.c)(e.meta.total.cost.units):"":e.meta.total.usage?Object(A.c)(e.meta.total.usage.units):""),a}),this.getVerticalLayout=(()=>{const{availableTabs:e,currentReportFetchStatus:t}=this.props;return E.a.createElement(be.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(ve.containerTrendHeight,ve.chartHeight),Boolean(e)&&E.a.createElement("div",{className:Object(u.b)(Ee.tabs)},this.getTabs()))}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"ocp-cloud",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:s,updateTab:r}=this.props;r(s,a[t]),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,updateTab:s,widgetId:r}=this.props;e&&s(a,e[0]),t(r)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),ke=Object(O.a)(e=>({selectWidgets:he.c.selectWidgets(e),widgets:he.c.selectCurrentWidgets(e)}));var je=Object(f.d)()(Object(y.connect)(ke,{})(({selectWidgets:e,t:t,widgets:a})=>E.a.createElement("div",null,E.a.createElement(g.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?E.a.createElement(b.a,{sm:12,key:t},E.a.createElement(Oe,{widgetId:t})):E.a.createElement(b.a,{lg:12,xl:6,xl2:4,key:t},E.a.createElement(Oe,{widgetId:t}))}))))),Te=a(148),De=a(136),Ce=a(667),we=a(105);const ze={chartAltHeight:180,chartHeight:80,containerAltHeight:275,containerTrendHeight:150,containerUsageHeight:180},Ne=u.a.create({tabs:{marginTop:$.z.value},tabItems:{marginTop:$.E.value}}),Re=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}};const Le=Object(O.a)((e,{widgetId:t})=>{const a=Te.c.selectWidget(e,t),s=Te.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:we.c.selectReport(e,a.reportType,s.current),currentReportFetchStatus:we.c.selectReportFetchStatus(e,a.reportType,s.current),previousReport:we.c.selectReport(e,a.reportType,s.previous),tabsReport:we.c.selectReport(e,a.reportType,s.tabs),tabsReportFetchStatus:we.c.selectReportFetchStatus(e,a.reportType,s.tabs)})}),xe={fetchReports:Te.a.fetchWidgetReports,updateTab:Te.a.changeWidgetTab},_e=Object(f.d)()(Object(y.connect)(Le,xe)(class extends E.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=Re(e);return`/ocp?${Object(De.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=((e,t,a=!1)=>{const{currentReport:s,previousReport:r,reportType:n,t:l,trend:i}=this.props,o="cost"===n?"cost":"usage",c=Object(j.j)(s,i.type,"date",o),u=Object(j.j)(r,i.type,"date",o),m="cost"!==n?Object(j.j)(s,i.type,"date","request"):void 0,p="cost"!==n?Object(j.j)(r,i.type,"date","request"):void 0,h="cost"===n?Object(j.j)(s,i.type,"date","infrastructureCost"):void 0,d="cost"===n?Object(j.j)(r,i.type,"date","infrastructureCost"):void 0,b=this.getUnits(),g=l(i.titleKey,{units:l(`units.${b}`)});return E.a.createElement(E.a.Fragment,null,Boolean("cost"===n)?E.a.createElement(Ce.f,{adjustContainerHeight:a,containerHeight:e,currentCostData:c,currentInfrastructureCostData:h,formatDatumValue:A.b,formatDatumOptions:i.formatOptions,height:t,previousCostData:u,previousInfrastructureCostData:d,title:g}):E.a.createElement(Ce.g,{containerHeight:ze.containerUsageHeight,currentRequestData:m,currentUsageData:c,formatDatumValue:A.b,formatDatumOptions:i.formatOptions,height:t,previousRequestData:p,previousUsageData:u,title:g}))}),this.getDetails=(()=>{const{currentReport:e,details:t,isUsageFirst:a,reportType:s}=this.props,r=this.getUnits();return E.a.createElement(Ce.c,{costLabel:this.getDetailsLabel(t.costKey,r),formatOptions:t.formatOptions,formatValue:A.b,report:e,reportType:s,requestFormatOptions:t.requestFormatOptions,requestLabel:this.getDetailsLabel(t.requestKey,r),showUnits:t.showUnits,showUsageFirst:a,usageFormatOptions:t.usageFormatOptions,usageLabel:this.getDetailsLabel(t.usageKey,r)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&E.a.createElement(V,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:Re(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return E.a.createElement(Ce.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(ze.containerAltHeight,ze.chartAltHeight,!0))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date,a=R()(t),s=C()(t,"D"),r=C()(x()(t),"D");return e("ocp_dashboard.widget_subtitle",{count:z()(t),endDate:s,month:a,startDate:r})}),this.getTab=((e,t)=>{const{tabsReport:a,tabsReportFetchStatus:s}=this.props,r=Re(e);return E.a.createElement(i.a,{eventKey:t,key:`${Re(e)}-tab`,title:this.getTabTitle(e)},E.a.createElement("div",{className:Object(u.b)(Ne.tabItems)},E.a.createElement(Ce.e,{idKey:r,key:`${r}-items`,report:a,status:s},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,reportType:s,tabsReport:r,topItems:n}=this.props,{activeTabKey:l}=this.state,i=Re(e);return Re(a[l])===i?E.a.createElement(Ce.d,{key:`${t.id}-item`,formatOptions:n.formatOptions,formatValue:A.b,label:t.label?t.label.toString():"",totalValue:"cost"===s?r.meta.total.cost.value:r.meta.total.usage.value,units:t.units,value:"cost"===s?t.cost:t.usage}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return E.a.createElement(l.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:Re(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,s=R()(a);return e(t,{endDate:C()(a,"Do"),month:s,startDate:C()(x()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,reportType:t}=this.props;let a="";return e&&e.meta&&e.meta.total&&(a="cost"===t?e.meta.total.cost?Object(A.c)(e.meta.total.cost.units):"":e.meta.total.usage?Object(A.c)(e.meta.total.usage.units):""),a}),this.getVerticalLayout=(()=>{const{availableTabs:e,currentReportFetchStatus:t}=this.props;return E.a.createElement(Ce.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(ze.containerTrendHeight,ze.chartHeight),Boolean(e)&&E.a.createElement("div",{className:Object(u.b)(Ne.tabs)},this.getTabs()))}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"ocp",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:s}=this.props,r=a[t];this.props.updateTab(s,r),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,widgetId:s}=this.props;this.props.updateTab(a,e[0]),t(s)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),Fe=Object(O.a)(e=>({selectWidgets:Te.c.selectWidgets(e),widgets:Te.c.selectCurrentWidgets(e)}));var Ie=Object(f.d)()(Object(y.connect)(Fe,{})(({selectWidgets:e,t:t,widgets:a})=>E.a.createElement("div",null,E.a.createElement(g.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?E.a.createElement(b.a,{sm:12,key:t},E.a.createElement(_e,{widgetId:t})):E.a.createElement(b.a,{lg:12,xl:6,xl2:4,key:t},E.a.createElement(_e,{widgetId:t}))}))))),Be=a(161),He=a(23),Ue=a(612);const Ke=u.a.create({info:{marginLeft:$.D.value,verticalAlign:"middle"},infoIcon:{fontSize:$.r.value},infoTitle:{fontWeight:"bold"},tabs:{marginTop:$.B.value}}),qe=Ue["a"]`
  &.pf-c-page__main-section {
    --pf-c-page__main-section--PaddingBottom: 0;
  }
`,Pe=e=>{switch(e){case"aws":return"aws";case"azure":return"azure";case"ocp":return"ocp";case"ocpCloud":return"ocpCloud"}};const Ve=Object(O.a)(e=>{const t=Object(m.a)(He.a),a=He.f.selectProviders(e,"aws",t),s=He.f.selectProvidersError(e,"aws",t),r=He.f.selectProvidersFetchStatus(e,"aws",t),n=Object(m.a)(He.b),l=He.f.selectProviders(e,"azure",n),i=He.f.selectProvidersError(e,"azure",n),o=He.f.selectProvidersFetchStatus(e,"azure",n),c=Object(m.a)(He.c);return{awsProviders:a,awsProvidersError:s,awsProvidersFetchStatus:r,awsProvidersQueryString:t,azureProviders:l,azureProvidersError:i,azureProvidersFetchStatus:o,azureProvidersQueryString:n,ocpProviders:He.f.selectProviders(e,"ocp",c),ocpProvidersError:He.f.selectProvidersError(e,"ocp",c),ocpProvidersFetchStatus:He.f.selectProvidersFetchStatus(e,"ocp",c),ocpProvidersQueryString:c}});var We=Object(f.d)()(Object(y.connect)(Ve,{openProvidersModal:Be.a.openModal})(class extends E.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0,showPopover:!1},this.getAvailableTabs=(()=>{const{awsProviders:e,azureProviders:t,ocpProviders:a}=this.props,s=[];return e&&e.meta&&e.meta.count&&a&&a.meta&&a.meta.count&&s.push({contentRef:E.a.createRef(),tab:"ocpCloud"}),a&&a.meta&&a.meta.count&&s.push({contentRef:E.a.createRef(),tab:"ocp"}),e&&e.meta&&e.meta.count&&s.push({contentRef:E.a.createRef(),tab:"aws"}),t&&t.meta&&t.meta.count&&s.push({contentRef:E.a.createRef(),tab:"azure"}),s}),this.getTab=((e,t,a)=>E.a.createElement(i.a,{eventKey:a,key:`${Pe(e)}-tab`,tabContentId:`tab-${a}`,tabContentRef:t,title:this.getTabTitle(e)})),this.getTabContent=(e=>e.map((e,t)=>E.a.createElement(o.a,{eventKey:t,key:`${Pe(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=((e,t)=>{const{activeTabKey:a}=this.state,s=Pe(e);return"ocpCloud"===s?a===t?E.a.createElement(je,null):null:"ocp"===s?a===t?E.a.createElement(Ie,null):null:"aws"===s?a===t?E.a.createElement(ee,null):null:"azure"===s&&a===t?E.a.createElement(pe,null):null}),this.getTabs=(e=>{const{activeTabKey:t}=this.state;return E.a.createElement(l.a,{activeKey:t,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e.tab,e.contentRef,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return"aws"===e?t("overview.aws"):"azure"===e?t("overview.azure"):"ocp"===e?t("overview.ocp"):"ocpCloud"===e?t("overview.ocp_cloud"):void 0}),this.handlePopoverClick=(()=>{this.setState({show:!this.state.showPopover})}),this.handleTabClick=((e,t)=>{this.setState({activeTabKey:t})})}render(){const{awsProviders:e,awsProvidersError:t,awsProvidersFetchStatus:a,azureProviders:l,azureProvidersError:i,azureProvidersFetchStatus:o,ocpProviders:m,ocpProvidersError:b,ocpProvidersFetchStatus:g,t:v}=this.props,f=this.getAvailableTabs(),y=t||i||b,S=1===a||1===o||1===g,O=void 0!==e&&void 0!==e.meta&&0===e.meta.count&&2===a,k=void 0!==l&&void 0!==l.meta&&0===l.meta.count&&2===o,j=void 0!==m&&void 0!==m.meta&&0===m.meta.count&&2===g,T=O&&k&&j,D=!(y||T||S);return E.a.createElement(E.a.Fragment,null,E.a.createElement("section",{className:`pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light ${D?qe:""}`},E.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},E.a.createElement(n.a,{size:r.a["2xl"]},v("overview.title"),Boolean(D)&&E.a.createElement("span",{className:Object(u.b)(Ke.infoIcon)},E.a.createElement(s.a,{"aria-label":"t('ocp_details.derived_aria_label')",enableFlip:!0,bodyContent:E.a.createElement(E.a.Fragment,null,E.a.createElement("p",{className:Object(u.b)(Ke.infoTitle)},v("overview.ocp_cloud")),E.a.createElement("p",null,v("overview.ocp_cloud_desc")),E.a.createElement("br",null),E.a.createElement("p",{className:Object(u.b)(Ke.infoTitle)},v("overview.ocp")),E.a.createElement("p",null,v("overview.ocp_desc")),E.a.createElement("br",null),E.a.createElement("p",{className:Object(u.b)(Ke.infoTitle)},v("overview.aws")),E.a.createElement("p",null,v("overview.aws_desc")),E.a.createElement("br",null),E.a.createElement("p",{className:Object(u.b)(Ke.infoTitle)},v("overview.azure")),E.a.createElement("p",null,v("overview.azure_desc")))},E.a.createElement(c.a,{className:Object(u.b)(Ke.info),onClick:this.handlePopoverClick}))))),Boolean(D)&&E.a.createElement("div",{className:Object(u.b)(Ke.tabs)},this.getTabs(f))),E.a.createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},Boolean(y)?E.a.createElement(p.a,{error:y}):Boolean(T)?E.a.createElement(d.a,null):Boolean(S)?E.a.createElement(h.a,null):this.getTabContent(f)))}}));t.default=We}}]);
//# sourceMappingURL=429cac055578f230d9c3.bundle.js.map