"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[5892],{2664:(e,t,a)=>{a.d(t,{L:()=>n});var s=a(80965),r=a(92950),o=a.n(r);const n=()=>o().createElement("span",{className:"emptyValueContainer"},o().createElement(s.V_,null))},98896:(e,t,a)=>{a.d(t,{iu:()=>l,j0:()=>c,me:()=>_,V3:()=>J,Y0:()=>se,rN:()=>m,EH:()=>p,mZ:()=>D,Nd:()=>ie,I0:()=>he});var s=a(11930),r=a(92950),o=a.n(r),n=a(74806),i=a(57279);const l=(0,n.ZP)((({children:e,detailsLink:t,title:a,subTitle:r,status:n})=>o().createElement(s.Card,{className:"reportSummary"},o().createElement(s.CardTitle,null,o().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},a),Boolean(r)&&o().createElement("p",{className:"subtitle"},r)),o().createElement(s.CardBody,null,1===n?o().createElement(o().Fragment,null,o().createElement(s.Skeleton,{width:"16%"}),o().createElement(s.Skeleton,{className:"chartSkeleton",width:i.N.md}),o().createElement(s.Skeleton,{width:"33%"}),o().createElement(s.Skeleton,{className:"legendSkeleton",width:i.N.xs})):e),Boolean(t)&&o().createElement(s.CardFooter,null,t)))),c=(0,n.ZP)((({children:e,detailsLink:t,status:a,subTitle:r,tabs:n,title:l})=>o().createElement(s.Card,{className:"reportSummary"},o().createElement(s.Grid,{hasGutter:!0},o().createElement(s.GridItem,{xl:8},o().createElement("div",{className:"cost"},o().createElement(s.CardTitle,null,o().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},l),Boolean(r)&&o().createElement("p",{className:"subtitle"},r)),o().createElement(s.CardBody,null,1===a?o().createElement(o().Fragment,null,o().createElement(s.Skeleton,{width:"16%"}),o().createElement(s.Skeleton,{className:"chartSkeleton",width:i.N.md}),o().createElement(s.Skeleton,{width:"33%"}),o().createElement(s.Skeleton,{className:"legendSkeleton",width:i.N.xs})):e))),o().createElement(s.GridItem,{xl:4},o().createElement("div",{className:"tops"},1!==a&&o().createElement(o().Fragment,null,Boolean(n)&&o().createElement(s.CardBody,null,n),Boolean(t)&&o().createElement(s.CardFooter,null,t))))))));var u=a(93952),h=a(2664),d=a(99291);const m=(0,n.ZP)((({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:r,formatOptions:n,intl:i,report:l,requestFormatOptions:c,requestLabel:m,reportType:g,showTooltip:p=!1,showUnits:C=!1,showUsageFirst:f=!1,units:D,usageFormatOptions:L,usageLabel:v})=>{let b=o().createElement(h.L,null),y=o().createElement(h.L,null),S=o().createElement(h.L,null),E=o().createElement(h.L,null),Z=o().createElement(h.L,null);const N=l&&l.meta&&l.meta.total,I=N&&l.meta.total.cost&&l.meta.total.cost.total,k=N&&l.meta.total.count,w=N&&l.meta.total.supplementary&&l.meta.total.supplementary.total&&l.meta.total.supplementary.total.value,F=N&&l.meta.total.infrastructure&&l.meta.total.infrastructure[a]&&l.meta.total.infrastructure[a].value,x=N&&l.meta.total.request,R=N&&l.meta.total.usage;N&&(b=(0,d.xG)(I?l.meta.total.cost.total.value:0,I?l.meta.total.cost.total.units:"USD",n),y=(0,d.xG)(w?l.meta.total.supplementary.total.value:0,w?l.meta.total.supplementary.total.units:"USD",n),S=(0,d.xG)(F?l.meta.total.infrastructure[a].value:0,F?l.meta.total.infrastructure[a].units:"USD",n),E=(0,d.bM)(x?l.meta.total.request.value:0,x?l.meta.total.request.units:void 0,c),Z=R&&l.meta.total.usage.value>=0?(0,d.bM)(R?l.meta.total.usage.value:0,R?l.meta.total.usage.units:void 0,L):(0,d.bM)(R?l.meta.total.usage:0,k?l.meta.total.count.units:void 0,L));const T=(e=!1)=>{let a=b;"infrastructure"===t?a=S:"supplementary"===t&&(a=y);const n=e?"Alt":"";return o().createElement("div",{className:"valueContainer"},p?o().createElement(s.Tooltip,{content:i.formatMessage(u.Z.dashboardTotalCostTooltip,{infrastructureCost:S,supplementaryCost:y}),enableFlip:!0},o().createElement("div",{className:`value${n}`},a)):o().createElement("div",{className:`value${n}`},a),o().createElement("div",{className:"text"},o().createElement("div",null,r)))},P=()=>{if(!v)return null;const e=x?l.meta.total.request.units:void 0,t=i.formatMessage(u.Z.units,{units:(0,d.ZV)(e)});return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},E),Boolean(C&&(D||x&&l.meta.total.request.value>=0))&&o().createElement("span",{className:"units"},t),o().createElement("div",{className:"text"},o().createElement("div",null,m)))},O=()=>{if(!v)return null;const e=R?l.meta.total.usage.units:void 0,t=(0,d.ZV)(D||e),a=i.formatMessage(u.Z.units,{units:t});return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},Z),Boolean(C&&(D||R&&l.meta.total.usage.value>=0))&&o().createElement("span",{className:"units"},a),o().createElement("div",{className:"text"},o().createElement("div",null,v)))};return"dailyCost"===e||"dailyTrend"===e||"cost"===e?o().createElement(o().Fragment,null,T("cost"===g)):"trend"===e?f?o().createElement(o().Fragment,null,O(),T("cost"===g)):o().createElement(o().Fragment,null,T("cost"===g),O()):"usage"===e?f?o().createElement(o().Fragment,null,O(),P()):o().createElement(o().Fragment,null,P(),O()):null}));var g=a(32004);const p=(0,n.ZP)((({intl:e=g.N,label:t,totalValue:a,units:r,value:n,formatOptions:i})=>{const l=e.formatMessage(u.Z.units,{units:(0,d.ZV)(r)}),c=a?n/a*100:0,h=(0,d.rl)(c),m=e.formatMessage(u.Z.percentTotalCost,{percent:h,units:l,value:(0,d.xG)(n,r,i)});return o().createElement("li",{className:"reportSummaryItem"},o().createElement(s.Progress,{label:m,value:Number(h),title:t,size:s.ProgressSize.sm}))}));var C=a(31447);class f extends o().Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=(0,C.R)({report:t,idKey:e}),s=a.findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}));return-1!==s?[...a.slice(0,s),...a.slice(s+1),a[s]]:a}render(){const{children:e,status:t}=this.props;if(1===t)return o().createElement(o().Fragment,null,o().createElement(s.Skeleton,{width:i.N.md}),o().createElement(s.Skeleton,{className:"skeleton",width:i.N.md}),o().createElement(s.Skeleton,{className:"skeleton",width:i.N.md}),o().createElement(s.Skeleton,{className:"skeleton",width:i.N.md}));{const t=this.getItems();return o().createElement("ul",null,e({items:t}))}}}const D=(0,n.ZP)(f);a(50265);var L=a(21094),v=a(2311),b=a(80469),y=a(84154),S=a(48629),E=a(52109),Z=a(2370),N=a(55855),I=a(93863),k=a(89116),w=a(8049),F=a(63211),x=a(21535),R=a(27765),T=a(19960),P=a(84076),O=a(18131),M=a(24656),j=a(84615),A=a(70698),U=a(72021),V=a(21768),z=a(41534);const B={currentColorScale:[V.CH.value,U.R0.value,A.t6.value,j.S7.value,z.iM.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[O.cQ.value,P.iY.value,T.OS.value,R.O6.value,M.DD.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:j.S7.value,strokeWidth:0},forecastConeDataColorScale:[j.S7.value],forecastData:{fill:"none"},forecastDataColorScale:[A.t6.value],forecastInfrastructureConeData:{fill:R.O6.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[R.O6.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[T.OS.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[x.tN.value,x.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class H extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=F.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:o,previousInfrastructureCostData:n,previousCostData:i,showForecast:l}=this.props,c=u.Z.chartCostLegendLabel,h=u.Z.chartCostInfrastructureLegendLabel,d=u.Z.chartCostInfrastructureLegendTooltip,m=u.Z.chartCostLegendTooltip,g=[{childName:"previousCost",data:i,legendItem:{name:(0,k.uL)(i,c,!0,!0,1,u.Z.chartCostLegendNoDataLabel),symbol:{fill:B.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(i,m,!1,!1,1)},style:{data:Object.assign(Object.assign({},B.previousCostData),{stroke:B.previousColorScale[0]})}},{childName:"currentCost",data:t,legendItem:{name:(0,k.uL)(t,c,!0,!1,0,u.Z.chartCostLegendNoDataLabel),symbol:{fill:B.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,m,!1,!1)},style:{data:Object.assign(Object.assign({},B.currentCostData),{stroke:B.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:n,legendItem:{name:(0,k.uL)(n,h,!0,!0,1,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:B.previousColorScale[1],type:"dash"},tooltip:(0,k.uL)(n,d,!1,!1,1)},style:{data:Object.assign(Object.assign({},B.previousInfrastructureCostData),{stroke:B.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:(0,k.uL)(e,h,!0,!1,0,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:B.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,k.uL)(e,d,!1,!1)},style:{data:Object.assign(Object.assign({},B.currentInfrastructureCostData),{stroke:B.currentInfrastructureColorScale[1]})}}];l&&(g.push({childName:"forecast",data:s,legendItem:{name:(0,k.uL)(s,u.Z.chartCostForecastLegendLabel,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:B.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(s,u.Z.chartCostForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastData),{stroke:B.forecastDataColorScale[0]})}}),g.push({childName:"forecastInfrastructure",data:o,legendItem:{name:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastLegendNoDataLabel),symbol:{fill:B.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastInfrastructureData),{stroke:B.forecastInfrastructureDataColorScale[0]})}}),g.push({childName:"forecastCone",data:a,legendItem:{name:(0,k.uL)(a,u.Z.chartCostInfrastructureForecastConeLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastConeLegendNoDataLabel),symbol:{fill:B.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(a,u.Z.chartCostInfrastructureForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastConeData),{stroke:B.forecastConeDataColorScale[0]})}}),g.push({childName:"forecastInfrastructureCone",data:r,legendItem:{name:(0,k.uL)(r,u.Z.chartCostInfrastructureForecastConeLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastConeLegendNoDataLabel),symbol:{fill:B.forecastInfrastructureConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(r,u.Z.chartCostInfrastructureForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastInfrastructureConeData),{stroke:B.forecastInfrastructureConeDataColorScale[0]})}}));const p=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:p,series:g})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let o=a;return e&&(s?r>675&&r<1175?o+=25:r>450&&r<675?o+=50:r<=450&&(o+=75):r>450&&r<725?o+=25:r<=450&&(o+=50)),o},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(L.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,v.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,y.u)({chartNames:(0,w.bC)(t),isHidden:t=>(0,w.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,o=e?(0,N.Z)((0,k.Y_)(e,!0,!0)[1]):0,n=t?(0,N.Z)((0,k.Y_)(t,!0,!0)[1]):0,i=a?(0,N.Z)((0,k.Y_)(a,!0,!0)[1]):0,l=s?(0,N.Z)((0,k.Y_)(s,!0,!0)[1]):0,c=r?(0,N.Z)((0,k.Y_)(r,!0,!0)[1]):0;return o>0||n>0||l>0||c>0?Math.max(o,n,i,l,c):31}render(){const{height:e,intl:t,padding:a={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:n,hiddenSeries:i,series:l,width:c}=this.state,h=(0,w.ge)(l,i),d=this.getEndDate(),m=Math.floor(d/2),g=1+Math.floor(m/2),p=1+m,C=d-Math.floor(m/2),f=n?o().cloneElement(n,{disable:!(0,w.TW)(l,i),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(l,i,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,r&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:c}},o().createElement(E.k,{containerComponent:f,domain:h,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(l,i),legendPosition:"bottom-left",padding:a,theme:I.Z,width:c},l&&l.map(((e,t)=>this.getChart(e,t))),o().createElement(Z.C,{style:B.xAxis,tickValues:[1,g,p,C,d]}),o().createElement(Z.C,{dependentAxis:!0,style:B.yAxis})))))}}const Y=(0,n.ZP)(H),_=e=>o().createElement("div",{className:"chart"},o().createElement(Y,Object.assign({},e)));var q=a(39727),W=a(31247),X=a(26383),G=a(82874);const Q={currentColorScale:[V.CH.value,U.R0.value,A.t6.value,j.S7.value,z.iM.value],currentInfrastructureColorScale:[O.cQ.value,P.iY.value,T.OS.value,R.O6.value,M.DD.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[G.g9.value],forecastDataColorScale:[A.t6.value],forecastInfrastructureConeDataColorScale:[G.g9.value],forecastInfrastructureDataColorScale:[T.OS.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[x.tN.value,x.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class K extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=F.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:o,previousInfrastructureCostData:n,previousCostData:i,showForecast:l}=this.props,c=u.Z.chartCostLegendLabel,h=u.Z.chartCostInfrastructureLegendLabel,d=u.Z.chartCostInfrastructureLegendTooltip,m=u.Z.chartCostLegendTooltip,g=[{childName:"previousCost",data:this.initDatumChildName(i,"previousCost"),legendItem:{name:(0,k.uL)(i,c,!0,!0,1,u.Z.chartCostLegendNoDataLabel),symbol:{fill:Q.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(i,m,!1,!1,1)},isLine:!0,style:{data:{stroke:Q.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(t,"currentCost"),legendItem:{name:(0,k.uL)(t,c,!0,!1,0,u.Z.chartCostLegendNoDataLabel),symbol:{fill:Q.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,m,!1,!1)},isBar:!0,style:{data:{fill:Q.currentColorScale[0]}}},{childName:"previousInfrastructureCost",data:this.initDatumChildName(n,"previousInfrastructureCost"),legendItem:{name:(0,k.uL)(n,h,!0,!0,1,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:Q.previousColorScale[1],type:"dash"},tooltip:(0,k.uL)(n,d,!1,!1,1)},isLine:!0,style:{data:{stroke:Q.previousColorScale[1]}}},{childName:"currentInfrastructureCost",data:this.initDatumChildName(e,"currentInfrastructureCost"),legendItem:{name:(0,k.uL)(e,h,!0,!1,0,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:Q.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,k.uL)(e,d,!1,!1,0)},isBar:!0,style:{data:{fill:Q.currentInfrastructureColorScale[1]}}}];l&&(g.push({childName:"forecast",data:this.initDatumChildName(s,"forecast"),legendItem:{name:(0,k.uL)(s,u.Z.chartCostForecastLegendLabel,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:Q.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(s,u.Z.chartCostForecastLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:Q.forecastDataColorScale[0]}}}),g.push({childName:"forecastInfrastructure",data:this.initDatumChildName(o,"forecastInfrastructure"),legendItem:{name:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastLegendNoDataLabel),symbol:{fill:Q.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:Q.forecastInfrastructureDataColorScale[0]}}}),g.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,k.uL)(a,u.Z.chartCostForecastConeLegendLabel,!1,!1,0,u.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:Q.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(a,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:Q.forecastConeDataColorScale[0]}}}),g.push({childName:"forecastInfrastructureCone",data:this.initDatumChildName(r,"forecastInfrastructureCone"),legendItem:{name:(0,k.uL)(r,u.Z.chartCostInfrastructureForecastConeLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastConeLegendNoDataLabel),symbol:{fill:Q.forecastInfrastructureConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(r,u.Z.chartCostInfrastructureForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:Q.forecastInfrastructureConeDataColorScale[0]}}}));const p=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:p,series:g})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let o=a;return e&&(s?r>675&&r<1175?o+=25:r>450&&r<675?o+=50:r<=450&&(o+=75):r>450&&r<725?o+=25:r<=450&&(o+=50)),o},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(q.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement(W.m,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,v.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,o=e?(0,N.Z)((0,k.Y_)(e,!0,!0)[1]):0,n=t?(0,N.Z)((0,k.Y_)(t,!0,!0)[1]):0,i=a?(0,N.Z)((0,k.Y_)(a,!0,!0)[1]):0,l=s?(0,N.Z)((0,k.Y_)(s,!0,!0)[1]):0,c=r?(0,N.Z)((0,k.Y_)(r,!0,!0)[1]):0;return o>0||n>0||l>0||c>0?Math.max(o,n,i,l,c):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,y.u)({chartNames:(0,w.bC)(t),isDataHidden:a=>(0,w.E0)(t,e,a),isHidden:t=>(0,w.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,padding:a={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:n,hiddenSeries:i,series:l,width:c}=this.state,h=(0,w.ge)(l,i),d=this.getEndDate(),m=Math.floor(d/2),g=1+Math.floor(m/2),p=1+m,C=d-Math.floor(m/2),f=n?o().cloneElement(n,{disable:!(0,w.TW)(l,i),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(l,i,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,r&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:c}},o().createElement(E.k,{containerComponent:f,domain:h,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(l,i),legendPosition:"bottom-left",padding:a,theme:I.Z,width:c},l&&l.length>0&&o().createElement(X.G,{offset:5.5},l.map(((e,t)=>this.getChart(e,t)))),l&&l.length>0&&o().createElement(X.G,{offset:5.5},l.map(((e,t)=>this.getForecastBarChart(e,t)))),l&&l.length>0&&o().createElement(X.G,{offset:5.5},l.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(Z.C,{style:Q.xAxis,tickValues:[1,g,p,C,d]}),o().createElement(Z.C,{dependentAxis:!0,style:Q.yAxis})))))}}const $=(0,n.ZP)(K),J=e=>o().createElement("div",{className:"chart"},o().createElement($,Object.assign({},e))),ee={currentColorScale:[V.CH.value,U.R0.value,A.t6.value,j.S7.value,z.iM.value],forecastConeDataColorScale:[G.g9.value],forecastDataColorScale:[A.t6.value],itemsPerRow:4,previousColorScale:[x.tN.value,x.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class te extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=F.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showInfrastructureLabel:o=!1,showSupplementaryLabel:n=!1,showUsageLegendLabel:i=!1}=this.props,l=i?u.Z.chartUsageLegendLabel:n?u.Z.chartCostSupplementaryLegendLabel:o?u.Z.chartCostInfrastructureLegendLabel:u.Z.chartCostLegendLabel,c=i?u.Z.chartUsageLegendTooltip:n?u.Z.chartCostSupplementaryLegendTooltip:o?u.Z.chartCostInfrastructureLegendTooltip:u.Z.chartCostLegendTooltip,h=i?u.Z.chartUsageLegendNoDataLabel:n?u.Z.chartCostSupplementaryLegendNoDataLabel:o?u.Z.chartCostInfrastructureLegendNoDataLabel:u.Z.chartCostLegendNoDataLabel,d=[{childName:"previousCost",data:this.initDatumChildName(s,"previousCost"),legendItem:{name:(0,k.uL)(s,l,!0,!0,1,h),symbol:{fill:ee.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(s,c,!1,!1,1)},isBar:!0,style:{data:{fill:ee.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:(0,k.uL)(e,l,!0,!1,0,h),symbol:{fill:ee.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(e,c,!1,!1)},isBar:!0,style:{data:{fill:ee.currentColorScale[0]}}}];r&&(d.push({childName:"forecast",data:this.initDatumChildName(t,"forecast"),legendItem:{name:(0,k.uL)(t,u.Z.chartCostForecastLegendTooltip,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:ee.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:ee.forecastDataColorScale[0]}}}),d.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,k.uL)(a,u.Z.chartCostForecastConeLegendLabel,!1,!1,0,u.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:ee.forecastConeDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(a,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:ee.forecastConeDataColorScale[0]}}}));const m=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:m,series:d})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s,showInfrastructureLabel:r,showSupplementaryLabel:o}=this.props,{width:n}=this.state;let i=a;return e&&s&&n<(o||r?850:700)&&(i+=25),i},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(q.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement(W.m,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,v.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?(0,N.Z)((0,k.Y_)(a,!0,!0)[1]):0,r=e?(0,N.Z)((0,k.Y_)(e,!0,!0)[1]):0,o=t?(0,N.Z)((0,k.Y_)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,o,s):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,y.u)({chartNames:(0,w.bC)(t),isDataHidden:a=>(0,w.E0)(t,e,a),isHidden:t=>(0,w.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,padding:a={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:n,hiddenSeries:i,series:l,width:c}=this.state,h=(0,w.ge)(l,i),d=this.getEndDate(),m=Math.floor(d/2),g=1+Math.floor(m/2),p=1+m,C=d-Math.floor(m/2),f=n?o().cloneElement(n,{disable:!(0,w.TW)(l,i),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(l,i,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,r&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:c}},o().createElement(E.k,{containerComponent:f,domain:h,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(l,i),legendPosition:"bottom-left",padding:a,theme:I.Z,width:c},l&&l.length>0&&o().createElement(X.G,{offset:11},l.map(((e,t)=>this.getChart(e,t)))),l&&l.length>0&&o().createElement(X.G,{offset:11},o().createElement(q.B,{data:[{y:null}],name:"forcast_spacer"}),l.map(((e,t)=>this.getForecastBarChart(e,t)))),l&&l.length>0&&o().createElement(X.G,{offset:11},o().createElement(q.B,{data:[{y:null}],name:"forcast_cone_spacer"}),l.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(Z.C,{style:ee.xAxis,tickValues:[1,g,p,C,d]}),o().createElement(Z.C,{dependentAxis:!0,style:ee.yAxis})))))}}const ae=(0,n.ZP)(te),se=e=>o().createElement("div",{className:"chart"},o().createElement(ae,Object.assign({},e))),re={currentColorScale:[V.ZP.value,U.ZP.value,A.ZP.value,j.ZP.value,z.ZP.value],currentMonthData:{fill:"none"},forecastConeData:{fill:j.ZP.value,strokeWidth:0},forecastConeDataColorScale:[j.ZP.value],forecastData:{fill:"none"},forecastDataColorScale:[A.ZP.value],itemsPerRow:4,previousColorScale:[x.ZP.value,x.ZP.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class oe extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=F.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showInfrastructureLabel:o=!1,showSupplementaryLabel:n=!1,showUsageLegendLabel:i=!1}=this.props,l=i?u.Z.chartUsageLegendLabel:n?u.Z.chartCostSupplementaryLegendLabel:o?u.Z.chartCostInfrastructureLegendLabel:u.Z.chartCostLegendLabel,c=i?u.Z.chartUsageLegendTooltip:n?u.Z.chartCostSupplementaryLegendTooltip:o?u.Z.chartCostInfrastructureLegendTooltip:u.Z.chartCostLegendTooltip,h=i?u.Z.chartUsageLegendNoDataLabel:n?u.Z.chartCostSupplementaryLegendNoDataLabel:o?u.Z.chartCostInfrastructureLegendNoDataLabel:u.Z.chartCostLegendNoDataLabel,d=[{childName:"previousCost",data:s,legendItem:{name:(0,k.uL)(s,l,!0,!0,1,h),symbol:{fill:re.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(s,c,!1,!1,1)},style:{data:Object.assign(Object.assign({},re.previousMonthData),{stroke:re.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,k.uL)(e,l,!0,!1,0,h),symbol:{fill:re.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(e,c,!1,!1)},style:{data:Object.assign(Object.assign({},re.currentMonthData),{stroke:re.currentColorScale[0]})}}];r&&(d.push({childName:"forecast",data:t,legendItem:{name:(0,k.uL)(t,u.Z.chartCostForecastLegendLabel,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:re.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,u.Z.chartCostForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},re.forecastData),{stroke:re.forecastDataColorScale[0]})}}),d.push({childName:"forecastCone",data:a,legendItem:{name:(0,k.uL)(a,u.Z.chartCostForecastConeLegendLabel,!1,!1,0,u.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:re.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(a,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},re.forecastConeData),{stroke:re.forecastConeDataColorScale[0]})}}));const m=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:m,series:d})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s,showInfrastructureLabel:r,showSupplementaryLabel:o}=this.props,{width:n}=this.state;let i=a;return e&&s&&n<(o||r?900:700)&&(i+=25),i},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(L.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,v.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,forecastConeData:a,previousData:s}=this.props,r=s?(0,N.Z)((0,k.Y_)(s,!0,!0)[1]):0,o=e?(0,N.Z)((0,k.Y_)(e,!0,!0)[1]):0,n=t?(0,N.Z)((0,k.Y_)(t,!0,!0)[1]):0,i=a?(0,N.Z)((0,k.Y_)(a,!0,!0)[1]):0;return o>0||r>0?Math.max(o,n,i,r):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,y.u)({chartNames:(0,w.bC)(t),isHidden:t=>(0,w.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,padding:a={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:n,hiddenSeries:i,series:l,width:c}=this.state,h=(0,w.ge)(l,i),d=this.getEndDate(),m=Math.floor(d/2),g=n?o().cloneElement(n,{disable:!(0,w.TW)(l,i),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(l,i,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:c},"data-testid":"trend-chart-wrapper"},o().createElement(E.k,{containerComponent:g,domain:h,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(l,i),legendPosition:"bottom-left",padding:a,theme:I.Z,width:c},l&&l.map(((e,t)=>this.getChart(e,t))),o().createElement(Z.C,{style:re.xAxis,tickValues:[1,m,d]}),o().createElement(Z.C,{dependentAxis:!0,style:re.yAxis})))))}}const ne=(0,n.ZP)(oe),ie=e=>o().createElement("div",{className:"chart"},o().createElement(ne,Object.assign({},e))),le={chartContainer:{marginTop:a(98499).ZP.value},currentRequestData:{data:{fill:"none",stroke:U.ZP.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:V.ZP.value}},itemsPerRow:2,legendColorScale:[x.ZP.value,V.ZP.value,x.ZP.value,U.ZP.value],previousRequestData:{data:{fill:"none",stroke:x.ZP.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:x.ZP.value}},currentColorScale:[V.ZP.value,U.ZP.value,A.ZP.value,j.ZP.value,z.ZP.value],previousColorScale:[x.ZP.value,x.ZP.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ce extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=F.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=u.Z.chartUsageLegendLabel,o=u.Z.chartUsageLegendTooltip,n=u.Z.chartRequestsLegendLabel,i=u.Z.chartRequestsLegendTooltip,l=[{childName:"previousUsage",data:s,legendItem:{name:(0,k.Fs)(s,r,!0,!0,1,u.Z.chartUsageLegendNoDataLabel),symbol:{fill:le.legendColorScale[0],type:"minus"},tooltip:(0,k.Fs)(s,o,!1,!1,1)},style:le.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:(0,k.Fs)(t,r,!0,!1,0,u.Z.chartUsageLegendNoDataLabel),symbol:{fill:le.legendColorScale[1],type:"minus"},tooltip:(0,k.Fs)(t,o,!1,!1)},style:le.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:(0,k.Fs)(a,n,!0,!0,1,u.Z.chartRequestsLegendNoDataLabel),symbol:{fill:le.legendColorScale[2],type:"dash"},tooltip:(0,k.Fs)(a,i,!1,!1,1)},style:le.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:(0,k.Fs)(e,n,!0,!1,0,u.Z.chartRequestsLegendNoDataLabel),symbol:{fill:le.legendColorScale[3],type:"dash"},tooltip:(0,k.Fs)(e,i,!1,!1)},style:le.currentRequestData}],c=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:c,series:l})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:s}=this.state;let r=a;return e&&s<480&&(r+=20),r},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(L.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,v.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state,r=e||(s>300?le.itemsPerRow:1);return o().createElement(b.Qk,{data:(0,w.oX)(a,t),height:25,gutter:20,itemsPerRow:r,name:"legend"})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=e?(0,N.Z)((0,k.Y_)(e,!0,!0)[1]):0,o=t?(0,N.Z)((0,k.Y_)(t,!0,!0)[1]):0,n=a?(0,N.Z)((0,k.Y_)(a,!0,!0)[1]):0,i=s?(0,N.Z)((0,k.Y_)(s,!0,!0)[1]):0;return r>0||o>0||n>0||i>0?Math.max(r,o,n,i):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,y.u)({chartNames:(0,w.bC)(t),isHidden:t=>(0,w.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,padding:a={bottom:75,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:n,hiddenSeries:i,series:l,width:c}=this.state,h=(0,w.ge)(l,i),d=this.getEndDate(),m=Math.floor(d/2),g=n?o().cloneElement(n,{disable:!(0,w.TW)(l,i),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(l,i,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:c},"data-testid":"usage-chart-wrapper"},o().createElement(E.k,{containerComponent:g,domain:h,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,w.oX)(l,i),legendPosition:"bottom-left",padding:a,theme:I.Z,width:c},l&&l.map(((e,t)=>this.getChart(e,t))),o().createElement(Z.C,{style:le.xAxis,tickValues:[1,m,d]}),o().createElement(Z.C,{dependentAxis:!0,style:le.yAxis})))))}}const ue=(0,n.ZP)(ce),he=e=>o().createElement("div",{className:"chart"},o().createElement(ue,Object.assign({},e)))}}]);
//# sourceMappingURL=bb397642a0b80927f1d8.bundle.js.map