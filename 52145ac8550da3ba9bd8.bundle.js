(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{119:function(e,t,a){"use strict";a.r(t),function(e){var r=a(37),s=a(335);t.default=Object(r.hot)(e)(s.a)}.call(this,a(36)(e))},203:function(e,t,a){"use strict";var r=a(557),s=a(0),n=a.n(s),o=a(125);const i=r.a.create({textInput:{width:"100%",fontSize:o.q.value,paddingTop:o.I.value,paddingRight:o.H.value,paddingBottom:o.I.value,paddingLeft:o.G.value,lineHeight:"24px",outline:0,border:`${o.h.value} solid ${o.d.value}`,":focus":{borderColor:o.e.value}},flat:{border:"none",borderBottom:[o.h.value,"solid",o.d.value].join(" "),":focus":{borderBottom:[o.g.value,"solid",o.e.value].join(" ")}},error:{borderColor:o.x.value,":focus":{borderColor:o.y.value}}});var l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&(a[r[s]]=e[r[s]])}return a};class c extends n.a.Component{constructor(){super(...arguments),this.handleChange=(e=>{this.props.onChange(e.currentTarget.value,e)}),this.handleKeyPressed=(e=>{this.props.onKeyPress&&"Enter"===e.key&&(e.preventDefault(),this.props.onKeyPress(e))})}render(){const e=this.props,{className:t,isFlat:a,isError:s}=e,o=l(e,["className","isFlat","isError"]);return n.a.createElement("input",Object.assign({},o,{className:Object(r.b)(t,i.textInput,a&&i.flat,s&&i.error),onChange:this.handleChange,onKeyPress:this.handleKeyPressed}))}}a.d(t,"a",function(){return c})},253:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return s});const r=e=>({"data-testid":e}),s={login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",submit_btn:"submit-btn",type_input:"provider-type-input"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},335:function(e,t,a){"use strict";var r=a(567),s=a(558),n=a(571),o=a(557),i=a(0),l=a.n(i);let c=0;class d extends l.a.Component{constructor(){super(...arguments),this.id=`${this.props.prefix}${c++}`}render(){return this.props.children({id:this.id})}}d.defaultProps={prefix:"random-id-"};var u=a(125);const p=o.a.create({formGroup:{marginBottom:u.A.value},label:{display:"block",fontWeight:u.u.value,paddingBottom:u.G.value}}),h=({label:e,children:t})=>l.a.createElement(d,{prefix:e},({id:a})=>l.a.createElement("div",{className:Object(o.b)(p.formGroup)},l.a.createElement("label",{className:Object(o.b)(p.label),htmlFor:a},e),l.a.createElement("div",null,l.a.cloneElement(l.a.Children.only(t),{id:a}))));var b=a(203),m=a(30),v=a(26),g=a(35),f=a(11),O=a(25),_=a(253);const k=o.a.create({alert:{marginBottom:u.F.value},docs:{marginBottom:u.F.value},modal:{width:"700px"}});t.a=Object(v.b)(Object(g.a)(e=>({isProviderModalOpen:O.c.selectIsProvidersModalOpen(e),error:f.c.selectAddProviderError(e),fetchStatus:f.c.selectAddProviderFetchStatus(e)})),{addProvider:f.a.addProvider,clearProviderFailure:f.a.clearProviderFailure,closeProvidersModal:O.a.closeProvidersModal})(Object(m.c)()(class extends l.a.Component{constructor(){super(...arguments),this.defaultState={bucket:"",bucketInvalidMsg:null,name:"",nameInvalidMsg:null,resourceName:"",resourceNameInvalidMsg:null,type:"AWS"},this.state=Object.assign({},this.defaultState),this.handleAddProvider=(()=>{this.props.addProvider({name:this.state.name,type:this.state.type,authentication:{provider_resource_name:this.state.resourceName},billing_source:{bucket:this.state.bucket}})}),this.handleCancel=(()=>{this.props.closeProvidersModal()}),this.handleBucketChange=(e=>{const{t:t}=this.props,a=new RegExp("^[a-zA-Z0-9.\\-_]{0,255}$").test(e)?null:t("providers.bucket_error");this.setState(()=>({bucket:e,bucketInvalidMsg:a})),this.props.clearProviderFailure()}),this.handleNameChange=(e=>{const{t:t}=this.props,a=new RegExp("^.?").test(e)?null:t("providers.name_error");this.setState(()=>({name:e,nameInvalidMsg:a})),this.props.clearProviderFailure()}),this.handleResourceNameChange=(e=>{const{t:t}=this.props,a=e.length>0&&!new RegExp("^arn:aws:").test(e)?t("providers.resource_name_error"):null;this.setState(()=>({resourceName:e,resourceNameInvalidMsg:a})),this.props.clearProviderFailure()})}componentDidUpdate(e){const{isProviderModalOpen:t}=this.props;t&&!e.isProviderModalOpen&&this.setState(Object.assign({},this.defaultState))}render(){const{t:e,error:t}=this.props,{bucket:a,bucketInvalidMsg:i,name:c,nameInvalidMsg:d,resourceName:u,resourceNameInvalidMsg:p}=this.state,m=0===a.trim().length||0===c.trim().length||0===u.trim().length,v=null!==i||null!==d||null!==p,g=t&&t.response&&(t.response.data.bucket||t.response.data.billing_source),f=t&&t.response&&t.response.data.name,O=t&&t.response&&(t.response.data.provider_resource_name||t.response.data.authentication);let j=e("providers.default_error");return g?j=t.response.data.bucket||t.response.data.billing_source.bucket:f?j=t.response.data.name:O&&(j=t.response.data.provider_resource_name||t.response.data.authentication.provider_resource_name),l.a.createElement(n.a,{className:Object(o.b)(k.modal),isLarge:!0,isOpen:this.props.isProviderModalOpen,onClose:this.handleCancel,title:"Add Account",actions:[l.a.createElement(s.c,Object.assign({},Object(_.a)(_.b.providers.cancel_btn),{key:"cancel",onClick:this.handleCancel,variant:s.b.secondary}),e("providers.cancel")),l.a.createElement(s.c,Object.assign({},Object(_.a)(_.b.providers.submit_btn),{key:"confirm",isDisabled:m||v||1===this.props.fetchStatus,onClick:this.handleAddProvider,variant:s.b.primary}),e("providers.confirm"))]},Boolean(t||v)&&l.a.createElement("div",{className:Object(o.b)(k.alert)},l.a.createElement(r.b,Object.assign({},Object(_.a)(_.b.login.alert),{variant:r.a.danger,title:i||d||p||j}))),l.a.createElement("p",{className:Object(o.b)(k.docs)},"View the"," ",l.a.createElement("a",{href:"https://koku.readthedocs.io/en/latest/providers.html#adding-an-aws-account",target:"_blank"},"Koku documentation")," ","and learn how to configure your AWS account to allow Koku access."),l.a.createElement(h,{label:e("providers.name_label")},l.a.createElement(b.a,Object.assign({},Object(_.a)(_.b.providers.name_input),{autoFocus:!0,isError:Boolean(f),isFlat:!0,onChange:this.handleNameChange,placeholder:"AWSHCCM",value:c}))),l.a.createElement(h,{label:e("providers.bucket_label")},l.a.createElement(b.a,Object.assign({},Object(_.a)(_.b.providers.bucket_input),{isError:Boolean(g||i),isFlat:!0,type:"text",onChange:this.handleBucketChange,placeholder:"cost-usage-bucket",value:a}))),l.a.createElement(h,{label:e("providers.resource_name_label")},l.a.createElement(b.a,Object.assign({},Object(_.a)(_.b.providers.resource_name_input),{isError:Boolean(O||p),isFlat:!0,onChange:this.handleResourceNameChange,placeholder:"arn:aws:iam::589173575009:role/CostManagement",value:u}))))}}))}}]);
//# sourceMappingURL=52145ac8550da3ba9bd8.bundle.js.map