{"version":3,"file":"js/ocpBreakdown.385af41c5c7959f1999a.js","mappings":"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","sources":["webpack:///./src/routes/views/details/ocpBreakdown/costOverview.tsx","webpack:///./src/routes/views/details/ocpBreakdown/historicalData.tsx","webpack:///./src/routes/views/details/ocpBreakdown/optimizationsBadge.tsx","webpack:///./src/routes/views/details/ocpBreakdown/optimizationsBreakdown.tsx","webpack:///./src/routes/views/details/ocpBreakdown/ocpBreakdown.tsx"],"sourcesContent":["import { connect } from 'react-redux';\nimport { CostOverviewBase } from 'routes/views/details/components/costOverview';\nimport { ocpCostOverviewSelectors } from 'store/breakdown/costOverview/ocpCostOverview';\nimport { createMapStateToProps } from 'store/common';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst mapStateToProps = createMapStateToProps((state, { title }) => {\n    return {\n        selectWidgets: ocpCostOverviewSelectors.selectWidgets(state),\n        widgets: ocpCostOverviewSelectors.selectCurrentWidgets(state),\n        title,\n    };\n});\nconst CostOverview = connect(mapStateToProps, {})(CostOverviewBase);\nexport { CostOverview };\n","import { connect } from 'react-redux';\nimport { HistoricalDataBase } from 'routes/views/details/components/historicalData';\nimport { ocpHistoricalDataSelectors } from 'store/breakdown/historicalData/ocpHistoricalData';\nimport { createMapStateToProps } from 'store/common';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst mapStateToProps = createMapStateToProps((state, props) => {\n    return {\n        selectWidgets: ocpHistoricalDataSelectors.selectWidgets(state),\n        widgets: ocpHistoricalDataSelectors.selectCurrentWidgets(state),\n    };\n});\nconst HistoricalData = connect(mapStateToProps, {})(HistoricalDataBase);\nexport { HistoricalData };\n","import { Badge } from '@patternfly/react-core';\nimport { getQuery } from 'api/queries/query';\nimport { parseQuery } from 'api/queries/rosQuery';\nimport { RosPathsType, RosType } from 'api/ros/ros';\nimport messages from 'locales/messages';\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { getGroupById, getGroupByValue } from 'routes/views/utils/groupBy';\nimport { FetchStatus } from 'store/common';\nimport { createMapStateToProps } from 'store/common';\nimport { rosActions, rosSelectors } from 'store/ros';\nimport { withRouter } from 'utils/router';\nconst reportPathsType = RosPathsType.recommendations;\nconst reportType = RosType.ros;\nclass OptimizationsBadgeBase extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.defaultState = {\n        // TBD...\n        };\n        this.state = Object.assign({}, this.defaultState);\n        this.updateReport = () => {\n            const { fetchReport, reportFetchStatus, reportQueryString } = this.props;\n            if (reportFetchStatus !== FetchStatus.inProgress) {\n                fetchReport(reportPathsType, reportType, reportQueryString);\n            }\n        };\n    }\n    componentDidMount() {\n        this.updateReport();\n    }\n    render() {\n        const { intl, report } = this.props;\n        const count = report && report.meta ? report.meta.count : 0;\n        return React.createElement(Badge, { screenReaderText: intl.formatMessage(messages.optimizationsDetails, { count }) }, count);\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst mapStateToProps = createMapStateToProps((state, { router }) => {\n    const queryFromRoute = parseQuery(router.location.search);\n    const groupBy = getGroupById(queryFromRoute);\n    const groupByValue = getGroupByValue(queryFromRoute);\n    // Don't need pagination here\n    const reportQuery = Object.assign({}, (groupBy && {\n        [groupBy]: groupByValue, // project filter\n    }));\n    const reportQueryString = getQuery(reportQuery);\n    const report = rosSelectors.selectRos(state, reportPathsType, reportType, reportQueryString);\n    const reportError = rosSelectors.selectRosError(state, reportPathsType, reportType, reportQueryString);\n    const reportFetchStatus = rosSelectors.selectRosFetchStatus(state, reportPathsType, reportType, reportQueryString);\n    return {\n        report,\n        reportError,\n        reportFetchStatus,\n        reportQueryString,\n    };\n});\nconst mapDispatchToProps = {\n    fetchReport: rosActions.fetchRosReport,\n};\nconst OptimizationsBadge = injectIntl(withRouter(connect(mapStateToProps, mapDispatchToProps)(OptimizationsBadgeBase)));\nexport { OptimizationsBadge };\n","import { Pagination, PaginationVariant } from '@patternfly/react-core';\nimport { getQuery, parseQuery } from 'api/queries/query';\nimport { RosPathsType, RosType } from 'api/ros/ros';\nimport messages from 'locales/messages';\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { Loading } from 'routes/state/loading';\nimport { NoOptimizations } from 'routes/state/noOptimizations';\nimport { NotAvailable } from 'routes/state/notAvailable';\nimport { OptimizationsTable, OptimizationsToolbar } from 'routes/views/components/optimizations';\nimport { styles } from 'routes/views/optimizations/optimizations.styles';\nimport { getGroupById, getGroupByValue } from 'routes/views/utils/groupBy';\nimport { handleFilterAdded, handleFilterRemoved, handleSort } from 'routes/views/utils/handles';\nimport { getOrderById, getOrderByValue } from 'routes/views/utils/orderBy';\nimport { getRouteForQuery } from 'routes/views/utils/query';\nimport { createMapStateToProps, FetchStatus } from 'store/common';\nimport { rosActions, rosSelectors } from 'store/ros';\nimport { withRouter } from 'utils/router';\nconst baseQuery = {\n    limit: 10,\n    offset: 0,\n    order_by: {\n        last_reported: 'desc',\n    },\n};\nconst reportType = RosType.ros;\nconst reportPathsType = RosPathsType.recommendations;\nclass OptimizationsBreakdownBase extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.defaultState = {\n            columns: [],\n            rows: [],\n        };\n        this.state = Object.assign({}, this.defaultState);\n        this.getPagination = (isDisabled = false, isBottom = false) => {\n            const { intl, report } = this.props;\n            const count = report && report.meta ? report.meta.count : 0;\n            const limit = report && report.meta ? report.meta.limit : baseQuery.limit;\n            const offset = report && report.meta ? report.meta.offset : baseQuery.offset;\n            const page = Math.trunc(offset / limit + 1);\n            return (React.createElement(Pagination, { isCompact: !isBottom, isDisabled: isDisabled, itemCount: count, onPerPageSelect: (event, perPage) => this.handlePerPageSelect(perPage), onSetPage: (event, pageNumber) => this.handleSetPage(pageNumber), page: page, perPage: limit, titles: {\n                    paginationTitle: intl.formatMessage(messages.paginationTitle, {\n                        title: intl.formatMessage(messages.openShift),\n                        placement: isBottom ? 'bottom' : 'top',\n                    }),\n                }, variant: isBottom ? PaginationVariant.bottom : PaginationVariant.top, widgetId: `exports-pagination${isBottom ? '-bottom' : ''}` }));\n        };\n        this.getTable = () => {\n            const { query, report, reportFetchStatus, reportQueryString, router } = this.props;\n            return (React.createElement(OptimizationsTable, { isLoading: reportFetchStatus === FetchStatus.inProgress, onSort: (sortType, isSortAscending) => handleSort(query, router, sortType, isSortAscending), report: report, reportQueryString: reportQueryString }));\n        };\n        this.getToolbar = () => {\n            const { query, report, router } = this.props;\n            const itemsPerPage = report && report.meta ? report.meta.limit : 0;\n            const itemsTotal = report && report.meta ? report.meta.count : 0;\n            const isDisabled = itemsTotal === 0;\n            return (React.createElement(OptimizationsToolbar, { isDisabled: isDisabled, itemsPerPage: itemsPerPage, itemsTotal: itemsTotal, onFilterAdded: filter => handleFilterAdded(query, router, filter), onFilterRemoved: filter => handleFilterRemoved(query, router, filter), pagination: this.getPagination(isDisabled), query: query }));\n        };\n        this.handlePerPageSelect = (perPage) => {\n            const { query, router } = this.props;\n            const newQuery = Object.assign(Object.assign({}, JSON.parse(JSON.stringify(query))), { limit: perPage });\n            const filteredQuery = getRouteForQuery(newQuery, router.location, true);\n            router.navigate(filteredQuery, { replace: true });\n        };\n        this.handleSetPage = (pageNumber) => {\n            const { query, report, router } = this.props;\n            const limit = report && report.meta && report.meta.limit ? report.meta.limit : baseQuery.limit;\n            const offset = pageNumber * limit - 1;\n            const newQuery = Object.assign(Object.assign({}, JSON.parse(JSON.stringify(query))), { limit,\n                offset });\n            const filteredQuery = getRouteForQuery(newQuery, router.location);\n            router.navigate(filteredQuery, { replace: true });\n        };\n        this.updateReport = () => {\n            const { fetchRosReport, reportFetchStatus, reportQueryString } = this.props;\n            if (reportFetchStatus !== FetchStatus.inProgress) {\n                fetchRosReport(reportPathsType, reportType, reportQueryString);\n            }\n        };\n    }\n    componentDidMount() {\n        this.updateReport();\n    }\n    componentDidUpdate(prevProps) {\n        const { report, reportError, reportQueryString, router } = this.props;\n        const newQuery = prevProps.reportQueryString !== reportQueryString;\n        const noReport = !report && !reportError;\n        const noLocation = !router.location.search;\n        if (newQuery || noReport || noLocation) {\n            this.updateReport();\n        }\n    }\n    render() {\n        const { intl, report, reportError, reportFetchStatus } = this.props;\n        const itemsTotal = report && report.meta ? report.meta.count : 0;\n        const isDisabled = itemsTotal === 0;\n        const title = intl.formatMessage(messages.optimizations);\n        const hasOptimizations = report && report.meta && report.meta.count > 0;\n        if (reportError) {\n            return React.createElement(NotAvailable, { title: title });\n        }\n        if (!hasOptimizations && reportFetchStatus === FetchStatus.complete) {\n            return React.createElement(NoOptimizations, null);\n        }\n        return (React.createElement(\"div\", { style: styles.optimizationsContainer },\n            this.getToolbar(),\n            reportFetchStatus === FetchStatus.inProgress ? (React.createElement(Loading, null)) : (React.createElement(React.Fragment, null,\n                this.getTable(),\n                React.createElement(\"div\", { style: styles.pagination }, this.getPagination(isDisabled, true))))));\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst mapStateToProps = createMapStateToProps((state, { router }) => {\n    const queryFromRoute = parseQuery(router.location.search);\n    const groupBy = getGroupById(queryFromRoute);\n    const groupByValue = getGroupByValue(queryFromRoute);\n    const order_by = getOrderById(queryFromRoute) || getOrderById(baseQuery);\n    const order_how = getOrderByValue(queryFromRoute) || getOrderByValue(baseQuery);\n    const query = Object.assign(Object.assign({}, baseQuery), queryFromRoute);\n    const reportQuery = Object.assign(Object.assign(Object.assign({}, (groupBy && {\n        [groupBy]: groupByValue, // Flattened project filter\n    })), query.filter_by), { limit: query.limit, offset: query.offset, order_by,\n        order_how });\n    const reportQueryString = getQuery(reportQuery);\n    const report = rosSelectors.selectRos(state, reportPathsType, reportType, reportQueryString);\n    const reportError = rosSelectors.selectRosError(state, reportPathsType, reportType, reportQueryString);\n    const reportFetchStatus = rosSelectors.selectRosFetchStatus(state, reportPathsType, reportType, reportQueryString);\n    return {\n        groupBy: queryFromRoute.group_by,\n        query,\n        report,\n        reportError,\n        reportFetchStatus,\n        reportQueryString,\n    };\n});\nconst mapDispatchToProps = {\n    fetchRosReport: rosActions.fetchRosReport,\n};\nconst OptimizationsBreakdown = injectIntl(withRouter(connect(mapStateToProps, mapDispatchToProps)(OptimizationsBreakdownBase)));\nexport { OptimizationsBreakdown };\n","import { ProviderType } from 'api/providers';\nimport { getProvidersQuery } from 'api/queries/providersQuery';\nimport { getQuery, parseQuery, parseQueryState } from 'api/queries/query';\nimport { ReportPathsType, ReportType } from 'api/reports/report';\nimport { TagPathsType } from 'api/tags/tag';\nimport messages from 'locales/messages';\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { routes } from 'routes';\nimport { BreakdownBase } from 'routes/views/details/components/breakdown';\nimport { getGroupById, getGroupByValue } from 'routes/views/utils/groupBy';\nimport { filterProviders } from 'routes/views/utils/providers';\nimport { createMapStateToProps } from 'store/common';\nimport { featureFlagsSelectors } from 'store/featureFlags';\nimport { providersQuery, providersSelectors } from 'store/providers';\nimport { reportActions, reportSelectors } from 'store/reports';\nimport { uiActions } from 'store/ui';\nimport { getCostDistribution, getCurrency } from 'utils/localStorage';\nimport { formatPath } from 'utils/paths';\nimport { breakdownDescKey, breakdownTitleKey, platformCategoryKey } from 'utils/props';\nimport { withRouter } from 'utils/router';\nimport { CostOverview } from './costOverview';\nimport { HistoricalData } from './historicalData';\nimport { OptimizationsBadge } from './optimizationsBadge';\nimport { OptimizationsBreakdown } from './optimizationsBreakdown';\nconst detailsURL = formatPath(routes.ocpDetails.path);\nconst reportType = ReportType.cost;\nconst reportPathsType = ReportPathsType.ocp;\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst mapStateToProps = createMapStateToProps((state, { intl, router }) => {\n    const queryFromRoute = parseQuery(router.location.search);\n    const queryState = parseQueryState(queryFromRoute);\n    const groupBy = getGroupById(queryFromRoute);\n    const groupByValue = getGroupByValue(queryFromRoute);\n    const costDistribution = getCostDistribution();\n    const currency = getCurrency();\n    const query = Object.assign({}, queryFromRoute);\n    const reportQuery = {\n        currency,\n        filter: {\n            resolution: 'monthly',\n            time_scope_units: 'month',\n            time_scope_value: -1,\n        },\n        filter_by: Object.assign(Object.assign(Object.assign({}, (queryState && queryState.filter_by && queryState.filter_by)), (queryFromRoute && queryFromRoute.isPlatformCosts && { category: platformCategoryKey })), (groupBy && groupByValue !== '*' && { [groupBy]: undefined })),\n        exclude: Object.assign({}, (queryState && queryState.exclude && queryState.exclude)),\n        group_by: Object.assign({}, (groupBy && { [groupBy]: groupByValue })),\n    };\n    const reportQueryString = getQuery(reportQuery);\n    const report = reportSelectors.selectReport(state, reportPathsType, reportType, reportQueryString);\n    const reportError = reportSelectors.selectReportError(state, reportPathsType, reportType, reportQueryString);\n    const reportFetchStatus = reportSelectors.selectReportFetchStatus(state, reportPathsType, reportType, reportQueryString);\n    const providersQueryString = getProvidersQuery(providersQuery);\n    const providers = providersSelectors.selectProviders(state, ProviderType.all, providersQueryString);\n    const providersFetchStatus = providersSelectors.selectProvidersFetchStatus(state, ProviderType.all, providersQueryString);\n    const title = queryFromRoute[breakdownTitleKey] ? queryFromRoute[breakdownTitleKey] : groupByValue;\n    return {\n        costDistribution,\n        costOverviewComponent: (React.createElement(CostOverview, { costDistribution: costDistribution, currency: currency, groupBy: groupBy, isPlatformCosts: queryFromRoute && queryFromRoute.isPlatformCosts, report: report, title: title })),\n        currency,\n        description: queryFromRoute[breakdownDescKey],\n        detailsURL,\n        emptyStateTitle: intl.formatMessage(messages.ocpDetailsTitle),\n        groupBy,\n        groupByValue,\n        historicalDataComponent: React.createElement(HistoricalData, { costDistribution: costDistribution, currency: currency }),\n        isOptimizationsTab: queryFromRoute.optimizationsTab !== undefined,\n        isRosFeatureEnabled: featureFlagsSelectors.selectIsRosFeatureEnabled(state),\n        optimizationsBadgeComponent: React.createElement(OptimizationsBadge, null),\n        optimizationsComponent: groupBy === 'project' && groupByValue !== '*' ? React.createElement(OptimizationsBreakdown, null) : undefined,\n        providers: filterProviders(providers, ProviderType.ocp),\n        providersFetchStatus,\n        providerType: ProviderType.ocp,\n        query,\n        report,\n        reportError,\n        reportFetchStatus,\n        reportType,\n        reportPathsType,\n        reportQueryString,\n        showCostDistribution: groupBy === 'project',\n        tagReportPathsType: TagPathsType.ocp,\n        title,\n    };\n});\nconst mapDispatchToProps = {\n    closeOptimizationsDrawer: uiActions.closeOptimizationsDrawer,\n    fetchReport: reportActions.fetchReport,\n};\nconst OcpBreakdown = injectIntl(withRouter(connect(mapStateToProps, mapDispatchToProps)(BreakdownBase)));\nexport default OcpBreakdown;\n"],"names":["mapStateToProps","state","title","selectWidgets","ocpCostOverview","widgets","CostOverview","connect","props","ocpHistoricalData","HistoricalData","reportPathsType","reportType","OptimizationsBadgeBase","constructor","super","arguments","this","defaultState","Object","assign","updateReport","fetchReport","reportFetchStatus","reportQueryString","componentDidMount","render","intl","report","count","meta","Badge","screenReaderText","formatMessage","messages","router","queryFromRoute","location","search","groupBy","groupByValue","reportQuery","reportError","mapDispatchToProps","OptimizationsBadge","injectIntl","baseQuery","limit","offset","order_by","last_reported","OptimizationsBreakdownBase","columns","rows","getPagination","isDisabled","isBottom","page","Math","trunc","Pagination","isCompact","itemCount","onPerPageSelect","event","perPage","handlePerPageSelect","onSetPage","pageNumber","handleSetPage","titles","paginationTitle","placement","variant","PaginationVariant","widgetId","getTable","query","isLoading","onSort","sortType","isSortAscending","getToolbar","itemsPerPage","itemsTotal","onFilterAdded","filter","onFilterRemoved","pagination","newQuery","JSON","parse","stringify","filteredQuery","navigate","replace","fetchRosReport","componentDidUpdate","prevProps","noReport","noLocation","hasOptimizations","style","order_how","filter_by","group_by","OptimizationsBreakdown","detailsURL","routes","queryState","costDistribution","currency","resolution","time_scope_units","time_scope_value","isPlatformCosts","category","undefined","exclude","providersQueryString","providers","providersFetchStatus","costOverviewComponent","description","emptyStateTitle","historicalDataComponent","isOptimizationsTab","optimizationsTab","isRosFeatureEnabled","featureFlags","optimizationsBadgeComponent","optimizationsComponent","providerType","showCostDistribution","tagReportPathsType","closeOptimizationsDrawer","ui"],"sourceRoot":""}