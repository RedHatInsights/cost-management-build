{"version":3,"file":"js/permissionsWrapper.e0bd9127dad22550c537.js","mappings":"mIACO,SAASA,EAAkBC,GAC9B,OAAO,IAAAC,WAAUD,EAAO,CAAEE,QAAQ,EAAOC,SAAS,GACtD,C,kDCFO,SAASC,EAAmBJ,GAC/B,OAAO,IAAAC,WAAUD,EAAO,CAAEE,QAAQ,EAAOC,SAAS,GACtD,C,qLCEA,MAiBA,GADkB,EAAAE,EAAA,KAhBI,EAAGC,WAAW,KAAMC,WAatCC,SAASC,MAAQF,EAAKG,cAZD,MAEjB,QADiB,WAEb,KAAK,QAAWC,EAAA,iBACZ,OAAOC,EAAA,oBACX,KAAK,QAAWD,EAAA,iBACZ,OAAOC,EAAA,oBACX,QACI,OAAOA,EAAA,mBACf,EAGgCC,IAC7B,kBAAoB,aAAgB,KAAMP,M,mECJrD,MAAMQ,GAAkB,QAAe,IAAM,kCACvCC,GAAc,QAAe,IAAM,kCACzC,MAAMC,UAA+B,cACjCC,oBACI,MAAM,2BAAEC,EAA0B,qBAAEC,EAAoB,eAAEC,EAAc,gBAAEC,EAAe,qBAAEC,EAAoB,qBAAEC,EAAoB,WAAEC,EAAU,sBAAEC,EAAqB,sBAAEC,GAA2BC,KAAKC,MAE1MJ,IAEIC,IAA0B,iBAC1BJ,EAAgB,QAAoBK,GAEpCJ,IAAyB,iBACzBF,EAAe,QAAkBG,GAEjCL,IAA+B,iBAC/BC,GAER,CACAU,SACI,MAAM,2BAAEX,EAA0B,SAAEZ,EAAQ,qBAAEgB,EAAoB,sBAAEG,GAA0BE,KAAKC,MACnG,OAAQ,kBAAoB,EAAW,KAAMH,IAA0B,eAAyB,kBAAoBV,EAAa,KAAMO,IAAyB,eAAyB,kBAAoB,IAAe,KACxN,kBAAoBR,EAAiB,MACrCI,IAA+B,eAAwBZ,IAC/D,EAEJ,MAAMwB,GAAkB,SAAsBC,IAC1C,MAAMC,EAAkB,2BAA+CD,GACjEE,EAAuB,gCAAoDF,GAC3Eb,EAA6B,sCAA0Da,GACvFR,GAAuB,OAAkB,MACzCW,EAAY,qBAAmCH,EAAO,QAAkBR,GACxEY,EAAiB,0BAAwCJ,EAAO,QAAkBR,GAClFD,EAAuB,gCAA8CS,EAAO,QAAkBR,GAC9FG,GAAwB,OAAmB,MAIjD,MAAO,CACHM,kBACAC,uBACAf,6BACAgB,YACAC,iBACAb,uBACAC,uBACAa,WAXe,sBAAqCL,EAAO,QAAoBL,GAY/EW,gBAXoB,2BAA0CN,EAAO,QAAoBL,GAYzFD,sBAX0B,iCAAgDM,EAAO,QAAoBL,GAYrGA,wBACH,IAECY,EAAqB,CACvBnB,qBAAsB,QACtBC,eAAgB,QAChBC,gBAAiB,QACjBG,WAAYe,EAAA,OAEVC,GAA4B,IAAAC,SAAQX,EAAiBQ,EAAzB,CAA6CtB,GAE/E,GAD2B,EAAAX,EAAA,IAAWmC,E","sources":["webpack:///./src/api/queries/providersQuery.ts","webpack:///./src/api/queries/userAccessQuery.ts","webpack:///./src/components/pageTitle/pageTitle.tsx","webpack:///./src/components/userAccess/permissionsWrapper.tsx"],"sourcesContent":["import { parse, stringify } from 'qs';\nexport function getProvidersQuery(query) {\n    return stringify(query, { encode: false, indices: false });\n}\nexport function parseProvidersQuery(query) {\n    return parse(query, { ignoreQueryPrefix: true });\n}\n","import { parse, stringify } from 'qs';\nexport function getUserAccessQuery(query) {\n    return stringify(query, { encode: false, indices: false });\n}\nexport function parseUserAccessQuery(query) {\n    return parse(query, { ignoreQueryPrefix: true });\n}\n","import messages from 'locales/messages';\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { routes } from 'routes';\nimport { formatPath, usePathname } from 'utils/paths';\nconst PageTitleBase = ({ children = null, intl }) => {\n    const usePageTitle = () => {\n        const pathname = usePathname();\n        switch (pathname) {\n            case formatPath(routes.explorer.path):\n                return messages.pageTitleExplorer;\n            case formatPath(routes.overview.path):\n                return messages.pageTitleOverview;\n            default:\n                return messages.pageTitleDefault;\n        }\n    };\n    // Set page title\n    document.title = intl.formatMessage(usePageTitle());\n    return React.createElement(React.Fragment, null, children);\n};\nconst PageTitle = injectIntl(PageTitleBase);\nexport default PageTitle;\n","import { ProviderType } from 'api/providers';\nimport { getProvidersQuery } from 'api/queries/providersQuery';\nimport { getUserAccessQuery } from 'api/queries/userAccessQuery';\nimport { UserAccessType } from 'api/userAccess';\nimport { asyncComponent } from 'components/async';\nimport { ExportsDrawer } from 'components/exports';\nimport { PageTitle } from 'components/pageTitle';\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { accountSettingsActions, accountSettingsSelectors } from 'store/accountSettings';\nimport { createMapStateToProps, FetchStatus } from 'store/common';\nimport { providersActions, providersQuery, providersSelectors } from 'store/providers';\nimport { uiActions } from 'store/ui';\nimport { userAccessActions, userAccessQuery, userAccessSelectors } from 'store/userAccess';\nconst InactiveSources = asyncComponent(() => import(/* webpackChunkName: \"notFound\" */ 'components/inactiveSources/inactiveSources'));\nconst Permissions = asyncComponent(() => import(/* webpackChunkName: \"notFound\" */ './permissions'));\nclass PermissionsWrapperBase extends React.Component {\n    componentDidMount() {\n        const { accountSettingsFetchStatus, fetchAccountSettings, fetchProviders, fetchUserAccess, providersFetchStatus, providersQueryString, resetState, userAccessFetchStatus, userAccessQueryString, } = this.props;\n        // Clear cached API responses\n        resetState();\n        // Fetched in order of component usage via render()\n        if (userAccessFetchStatus !== FetchStatus.inProgress) {\n            fetchUserAccess(UserAccessType.all, userAccessQueryString);\n        }\n        if (providersFetchStatus !== FetchStatus.inProgress) {\n            fetchProviders(ProviderType.all, providersQueryString);\n        }\n        if (accountSettingsFetchStatus !== FetchStatus.inProgress) {\n            fetchAccountSettings();\n        }\n    }\n    render() {\n        const { accountSettingsFetchStatus, children, providersFetchStatus, userAccessFetchStatus } = this.props;\n        return (React.createElement(PageTitle, null, userAccessFetchStatus === FetchStatus.complete && (React.createElement(Permissions, null, providersFetchStatus === FetchStatus.complete && (React.createElement(ExportsDrawer, null,\n            React.createElement(InactiveSources, null),\n            accountSettingsFetchStatus === FetchStatus.complete && children))))));\n    }\n}\nconst mapStateToProps = createMapStateToProps(state => {\n    const accountSettings = accountSettingsSelectors.selectAccountSettings(state);\n    const accountSettingsError = accountSettingsSelectors.selectAccountSettingsError(state);\n    const accountSettingsFetchStatus = accountSettingsSelectors.selectAccountSettingsFetchStatus(state);\n    const providersQueryString = getProvidersQuery(providersQuery);\n    const providers = providersSelectors.selectProviders(state, ProviderType.all, providersQueryString);\n    const providersError = providersSelectors.selectProvidersError(state, ProviderType.all, providersQueryString);\n    const providersFetchStatus = providersSelectors.selectProvidersFetchStatus(state, ProviderType.all, providersQueryString);\n    const userAccessQueryString = getUserAccessQuery(userAccessQuery);\n    const userAccess = userAccessSelectors.selectUserAccess(state, UserAccessType.all, userAccessQueryString);\n    const userAccessError = userAccessSelectors.selectUserAccessError(state, UserAccessType.all, userAccessQueryString);\n    const userAccessFetchStatus = userAccessSelectors.selectUserAccessFetchStatus(state, UserAccessType.all, userAccessQueryString);\n    return {\n        accountSettings,\n        accountSettingsError,\n        accountSettingsFetchStatus,\n        providers,\n        providersError,\n        providersFetchStatus,\n        providersQueryString,\n        userAccess,\n        userAccessError,\n        userAccessFetchStatus,\n        userAccessQueryString,\n    };\n});\nconst mapDispatchToProps = {\n    fetchAccountSettings: accountSettingsActions.fetchAccountSettings,\n    fetchProviders: providersActions.fetchProviders,\n    fetchUserAccess: userAccessActions.fetchUserAccess,\n    resetState: uiActions.resetState,\n};\nconst PermissionsWrapperConnect = connect(mapStateToProps, mapDispatchToProps)(PermissionsWrapperBase);\nconst PermissionsWrapper = injectIntl(PermissionsWrapperConnect);\nexport default PermissionsWrapper;\n"],"names":["getProvidersQuery","query","stringify","encode","indices","getUserAccessQuery","injectIntl","children","intl","document","title","formatMessage","routes","messages","usePageTitle","InactiveSources","Permissions","PermissionsWrapperBase","componentDidMount","accountSettingsFetchStatus","fetchAccountSettings","fetchProviders","fetchUserAccess","providersFetchStatus","providersQueryString","resetState","userAccessFetchStatus","userAccessQueryString","this","props","render","mapStateToProps","state","accountSettings","accountSettingsError","providers","providersError","userAccess","userAccessError","mapDispatchToProps","ui","PermissionsWrapperConnect","connect"],"sourceRoot":""}