{"version":3,"file":"js/permissions.39fcaa6a8771f94bb046.js","mappings":"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","sources":["webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/Unavailable/Unavailable.js","webpack:///./src/components/permissions/permissions.tsx","webpack:///./node_modules/@redhat-cloud-services/frontend-components/esm/NotAuthorized/NotAuthorized.js","webpack:///./src/routes/components/page/notAuthorized/notAuthorizedState.tsx","webpack:///./src/routes/components/page/notAuthorized/notAuthorized.tsx","webpack:///./src/routes/components/page/notAvailable/notAvailable.tsx","webpack:///./src/utils/chrome.tsx","webpack:///./src/utils/userAccess.ts"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { EmptyState, EmptyStateBody, EmptyStateIcon, EmptyStateVariant, Title } from '@patternfly/react-core';\nimport { ExclamationCircleIcon } from '@patternfly/react-icons';\nimport '../Unavailable/Unavailable.css';\nvar Unavailable = function () {\n    return (_jsxs(EmptyState, __assign({ variant: EmptyStateVariant.large, className: \"ins-c-empty-state__unavailable pf-m-redhat-font\" }, { children: [_jsx(EmptyStateIcon, { icon: ExclamationCircleIcon }), _jsx(Title, __assign({ headingLevel: \"h5\", size: \"lg\" }, { children: \"This page is temporarily unavailable\" })), _jsxs(EmptyStateBody, { children: [\"Try refreshing the page. If the problem persists, contact your organization administrator or visit our\", _jsxs(\"a\", __assign({ href: \"https://status.redhat.com/\", target: \"_blank\", rel: \"noopener noreferrer\" }, { children: [' ', \"status page\"] })), ' ', \"for known outages.\"] })] })));\n};\nexport default Unavailable;\n//# sourceMappingURL=Unavailable.js.map","import { getUserAccessQuery } from 'api/queries/userAccessQuery';\nimport { UserAccessType } from 'api/userAccess';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { routes } from 'routes';\nimport { Loading } from 'routes/components/page/loading';\nimport { NotAuthorized } from 'routes/components/page/notAuthorized';\nimport { NotAvailable } from 'routes/components/page/notAvailable';\nimport { createMapStateToProps, FetchStatus } from 'store/common';\nimport { featureFlagsSelectors } from 'store/featureFlags';\nimport { userAccessQuery, userAccessSelectors } from 'store/userAccess';\nimport { withChrome } from 'utils/chrome';\nimport { formatPath, usePathname } from 'utils/paths';\nimport { hasAwsAccess, hasAzureAccess, hasCostModelAccess, hasGcpAccess, hasIbmAccess, hasOciAccess, hasOcpAccess, hasRhelAccess, hasRosAccess, } from 'utils/userAccess';\nconst PermissionsBase = ({ children = null, \n// chrome,\nisFinsightsFeatureEnabled, isIbmFeatureEnabled, isRosFeatureEnabled, isSettingsFeatureEnabled, userAccess, userAccessError, userAccessFetchStatus, }) => {\n    const hasPermissions = pathname => {\n        if (!(userAccess && userAccessFetchStatus === FetchStatus.complete)) {\n            return false;\n        }\n        const aws = hasAwsAccess(userAccess);\n        const azure = hasAzureAccess(userAccess);\n        const costModel = hasCostModelAccess(userAccess);\n        const gcp = hasGcpAccess(userAccess);\n        const ibm = isIbmFeatureEnabled && hasIbmAccess(userAccess);\n        const oci = hasOciAccess(userAccess);\n        const ocp = hasOcpAccess(userAccess);\n        const rhel = isFinsightsFeatureEnabled && hasRhelAccess(userAccess);\n        const ros = isRosFeatureEnabled && hasRosAccess(userAccess);\n        const settings = isSettingsFeatureEnabled;\n        switch (pathname) {\n            case formatPath(routes.explorer.path):\n            case formatPath(routes.overview.path):\n                return aws || azure || costModel || gcp || ibm || ocp || oci;\n            case formatPath(routes.awsDetails.path):\n            case formatPath(routes.awsDetailsBreakdown.path):\n                return aws;\n            case formatPath(routes.azureDetails.path):\n            case formatPath(routes.azureDetailsBreakdown.path):\n                return azure;\n            case formatPath(routes.costModel.basePath):\n            case formatPath(routes.costModelsDetails.path):\n                return costModel;\n            case formatPath(routes.gcpDetails.path):\n            case formatPath(routes.gcpDetailsBreakdown.path):\n                return gcp;\n            case formatPath(routes.ociDetails.path):\n            case formatPath(routes.ociDetailsBreakdown.path):\n                return oci;\n            case formatPath(routes.ibmDetails.path):\n            case formatPath(routes.ibmDetailsBreakdown.path):\n                return ibm;\n            case formatPath(routes.ocpDetails.path):\n            case formatPath(routes.ocpDetailsBreakdown.path):\n                return ocp;\n            case formatPath(routes.optimizations.path):\n                return ros;\n            case formatPath(routes.rhelDetails.path):\n            case formatPath(routes.rhelDetailsBreakdown.path):\n                return rhel;\n            case formatPath(routes.settings.path):\n                return settings;\n            default:\n                return false;\n        }\n    };\n    // Page access denied because user doesn't have RBAC permissions and is not an org admin\n    const pathname = usePathname();\n    let result = React.createElement(NotAuthorized, { pathname: pathname });\n    if (userAccessFetchStatus === FetchStatus.inProgress) {\n        result = React.createElement(Loading, null);\n    }\n    else if (userAccessError) {\n        result = React.createElement(NotAvailable, null);\n    }\n    else if (hasPermissions(pathname)) {\n        result = React.createElement(React.Fragment, null, children);\n    }\n    return result;\n};\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst mapStateToProps = createMapStateToProps((state, props) => {\n    const userAccessQueryString = getUserAccessQuery(userAccessQuery);\n    const userAccess = userAccessSelectors.selectUserAccess(state, UserAccessType.all, userAccessQueryString);\n    const userAccessError = userAccessSelectors.selectUserAccessError(state, UserAccessType.all, userAccessQueryString);\n    const userAccessFetchStatus = userAccessSelectors.selectUserAccessFetchStatus(state, UserAccessType.all, userAccessQueryString);\n    return {\n        isFinsightsFeatureEnabled: featureFlagsSelectors.selectIsFinsightsFeatureEnabled(state),\n        isIbmFeatureEnabled: featureFlagsSelectors.selectIsIbmFeatureEnabled(state),\n        isRosFeatureEnabled: featureFlagsSelectors.selectIsRosFeatureEnabled(state),\n        isSettingsFeatureEnabled: featureFlagsSelectors.selectIsSettingsFeatureEnabled(state),\n        userAccess,\n        userAccessError,\n        userAccessFetchStatus,\n        userAccessQueryString,\n    };\n});\nconst Permissions = withChrome(connect(mapStateToProps, undefined)(PermissionsBase));\nexport default Permissions;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { Button, EmptyState, EmptyStateBody, EmptyStateIcon, EmptyStateVariant, Title } from '@patternfly/react-core';\nimport { LockIcon } from '@patternfly/react-icons';\nimport '../NotAuthorized/NotAuthorized.css';\nvar ContactBody = function () { return (_jsxs(React.Fragment, { children: [\"Contact your organization administrator(s) for more information or visit\\u00A0\", _jsx(\"a\", __assign({ href: \"./settings/my-user-access\" }, { children: \"My User Access\" })), \"\\u00A0 to learn more about your permissions.\"] })); };\nvar NotAuthorized = function (_a) {\n    var _b = _a.prevPageButtonText, prevPageButtonText = _b === void 0 ? 'Return to previous page' : _b, _c = _a.toLandingPageText, toLandingPageText = _c === void 0 ? 'Go to landing page' : _c, title = _a.title, _d = _a.actions, actions = _d === void 0 ? null : _d, serviceName = _a.serviceName, _e = _a.icon, Icon = _e === void 0 ? LockIcon : _e, _f = _a.description, description = _f === void 0 ? _jsx(ContactBody, {}) : _f, _g = _a.showReturnButton, showReturnButton = _g === void 0 ? true : _g, className = _a.className, props = __rest(_a, [\"prevPageButtonText\", \"toLandingPageText\", \"title\", \"actions\", \"serviceName\", \"icon\", \"description\", \"showReturnButton\", \"className\"]);\n    var heading = title || \"You do not have access to \".concat(serviceName);\n    return (_jsxs(EmptyState, __assign({ variant: EmptyStateVariant.full, className: \"ins-c-not-authorized \".concat(className || '') }, props, { children: [_jsx(EmptyStateIcon, { icon: Icon }), _jsx(Title, __assign({ headingLevel: \"h5\", size: \"lg\" }, { children: heading })), _jsx(EmptyStateBody, { children: description }), actions, showReturnButton &&\n                (document.referrer ? (_jsx(Button, __assign({ variant: \"primary\", onClick: function () { return history.back(); } }, { children: prevPageButtonText }))) : (_jsx(Button, __assign({ variant: \"primary\", component: \"a\", href: \".\" }, { children: toLandingPageText }))))] })));\n};\nexport default NotAuthorized;\n//# sourceMappingURL=NotAuthorized.js.map","import { NotAuthorized as UnAuthorized } from '@redhat-cloud-services/frontend-components/NotAuthorized';\nimport messages from 'locales/messages';\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport { routes } from 'routes';\nimport { formatPath } from 'utils/paths';\nclass NotAuthorizedStateBase extends React.Component {\n    render() {\n        const { intl, pathname } = this.props;\n        let msg;\n        switch (pathname) {\n            case formatPath(routes.awsDetails.path):\n            case formatPath(routes.awsDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateAws;\n                break;\n            case formatPath(routes.azureDetails.path):\n            case formatPath(routes.azureDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateAzure;\n                break;\n            case formatPath(routes.costModel.path):\n            case formatPath(routes.costModelsDetails.path):\n                msg = messages.notAuthorizedStateCostModels;\n                break;\n            case formatPath(routes.gcpDetails.path):\n            case formatPath(routes.gcpDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateGcp;\n                break;\n            case formatPath(routes.ibmDetails.path):\n            case formatPath(routes.ibmDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateIbm;\n                break;\n            case formatPath(routes.ociDetails.path):\n            case formatPath(routes.ociDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateOci;\n                break;\n            case formatPath(routes.ocpDetails.path):\n            case formatPath(routes.ocpDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateOcp;\n                break;\n            case formatPath(routes.rhelDetails.path):\n            case formatPath(routes.rhelDetailsBreakdown.path):\n                msg = messages.notAuthorizedStateRhel;\n                break;\n            case formatPath(routes.optimizations.path):\n                msg = messages.notAuthorizedStateOptimizations;\n                break;\n            case formatPath(routes.settings.path):\n                msg = messages.notAuthorizedStateSettings;\n                break;\n            case formatPath(routes.explorer.path):\n            default:\n                msg = messages.costManagement;\n                break;\n        }\n        return React.createElement(UnAuthorized, { serviceName: intl.formatMessage(msg) });\n    }\n}\nconst NotAuthorizedState = injectIntl(NotAuthorizedStateBase);\nexport { NotAuthorizedState };\n","import { PageSection } from '@patternfly/react-core';\nimport { PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components/PageHeader';\nimport React from 'react';\nimport { NotAuthorizedState } from './notAuthorizedState';\nconst NotAuthorized = ({ pathname, title }) => {\n    return (React.createElement(React.Fragment, null,\n        title && (React.createElement(PageHeader, null,\n            React.createElement(PageHeaderTitle, { title: title }))),\n        React.createElement(PageSection, null,\n            React.createElement(NotAuthorizedState, { pathname: pathname }))));\n};\nexport default NotAuthorized;\n","import { PageSection } from '@patternfly/react-core';\nimport { PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { Unavailable } from '@redhat-cloud-services/frontend-components/Unavailable';\nimport React from 'react';\nconst NotAvailable = ({ title }) => {\n    return (React.createElement(React.Fragment, null,\n        title && (React.createElement(PageHeader, null,\n            React.createElement(PageHeaderTitle, { title: title }))),\n        React.createElement(PageSection, null,\n            React.createElement(Unavailable, null))));\n};\nexport default NotAvailable;\n","import { useChrome } from '@redhat-cloud-services/frontend-components/useChrome';\nimport React, { useLayoutEffect, useRef, useState } from 'react';\nexport const withChrome = Component => {\n    const isOrgAdmin = async (auth) => {\n        var _a;\n        const data = await auth.getUser();\n        try {\n            return !!((_a = data === null || data === void 0 ? void 0 : data.identity.user) === null || _a === void 0 ? void 0 : _a.is_org_admin);\n        }\n        catch (_b) {\n            return false;\n        }\n    };\n    const ComponentWithChromeProp = props => {\n        const { auth } = useChrome();\n        const [initialized, setInitialized] = useState(false);\n        const [orgAdmin, setOrgAdmin] = useState(false);\n        const isMounted = useRef(false);\n        useLayoutEffect(() => {\n            isMounted.current = true;\n            return () => {\n                isMounted.current = false;\n            };\n        }, []);\n        useLayoutEffect(() => {\n            isOrgAdmin(auth).then(val => {\n                if (isMounted.current) {\n                    setOrgAdmin(val);\n                    setInitialized(true);\n                }\n            });\n        });\n        return initialized ? React.createElement(Component, Object.assign({}, props, { chrome: { isOrgAdmin: orgAdmin } })) : null;\n    };\n    return ComponentWithChromeProp;\n};\n","import { UserAccessType } from 'api/userAccess';\nconst hasAccess = (userAccess, userAccessType) => {\n    let result = false;\n    if (userAccess && Array.isArray(userAccess.data)) {\n        // Used with multiple types (e.g., type=)\n        const data = userAccess.data.find(d => d.type === userAccessType);\n        result = data && data.access;\n    }\n    else {\n        // Used with type=any, type=GCP, etc.\n        result = userAccess && userAccess.data === true;\n    }\n    return result;\n};\nconst hasProviders = (providers) => {\n    let result = false;\n    if (providers && providers.meta) {\n        // providers API returns empty data array for no sources\n        result = providers.meta.count > 0;\n    }\n    return result;\n};\n// Returns true if user has access to AWS\nexport const hasAwsAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.aws);\n};\n// Returns true if user has access to AWS and at least one source provider\nexport const isAwsAvailable = (userAccess, awsProviders) => {\n    return hasAwsAccess(userAccess) && hasProviders(awsProviders);\n};\n// Returns true if user has access to Azure\nexport const hasAzureAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.azure);\n};\n// Returns true if user has access to Azure and at least one source provider\nexport const isAzureAvailable = (userAccess, azureProviders) => {\n    return hasAzureAccess(userAccess) && hasProviders(azureProviders);\n};\n// Returns true if user has access to Oci\nexport const hasOciAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.oci);\n};\n// Returns true if user has access to Oci and at least one source provider\nexport const isOciAvailable = (userAccess, ociProviders) => {\n    return hasOciAccess(userAccess) && hasProviders(ociProviders);\n};\n// Returns true if user has access to cost models\nexport const hasCostModelAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.cost_model);\n};\n// Returns true if user has access to GCP\nexport const hasGcpAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.gcp);\n};\n// Returns true if user has access to GCP and at least one source provider\nexport const isGcpAvailable = (userAccess, gcpProviders) => {\n    return hasAccess(userAccess, UserAccessType.gcp) && hasProviders(gcpProviders);\n};\n// Returns true if user has access to IBM\nexport const hasIbmAccess = (userAccess) => {\n    return hasGcpAccess(userAccess);\n};\n// Returns true if user has access to IBM and at least one source provider\nexport const isIbmAvailable = (userAccess, ibmProviders) => {\n    return hasIbmAccess(userAccess) && hasProviders(ibmProviders);\n};\n// Returns true if user has access to OCP\nexport const hasOcpAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.ocp);\n};\n// Returns true if user has access to OCP and at least one source provider\nexport const isOcpAvailable = (userAccess, ocpProviders) => {\n    return hasOcpAccess(userAccess) && hasProviders(ocpProviders);\n};\n// Returns true if user has access to RHEL\nexport const hasRhelAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.rhel);\n};\n// Returns true if user has access to RHEL and at least one source provider\nexport const isRhelAvailable = (userAccess, rhelProviders) => {\n    return hasRhelAccess(userAccess) && hasProviders(rhelProviders);\n};\n// Returns true if user has access to ROS\nexport const hasRosAccess = (userAccess) => {\n    return hasAccess(userAccess, UserAccessType.ros);\n};\n// Returns true if user has access to RHEL and at least one source provider\nexport const isRosAvailable = (userAccess, rosProviders) => {\n    return hasRosAccess(userAccess) && hasProviders(rosProviders);\n};\n// Returns true if user has access to settings tabs\nexport const hasSettingsAccess = (userAccess) => {\n    // Todo: test \"settings\" access when user-access API has been updated\n    return userAccess !== undefined; // hasAccess(userAccess, UserAccessType.settings);\n};\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","EmptyState","variant","EmptyStateVariant","large","className","children","EmptyStateIcon","icon","ExclamationCircleIcon","Title","headingLevel","size","EmptyStateBody","href","target","rel","mapStateToProps","state","props","userAccessQueryString","userAccess","all","userAccessError","userAccessFetchStatus","isFinsightsFeatureEnabled","isIbmFeatureEnabled","isRosFeatureEnabled","isSettingsFeatureEnabled","connect","undefined","pathname","result","inProgress","complete","aws","azure","costModel","gcp","ibm","oci","ocp","rhel","ros","settings","explorer","path","overview","awsDetails","awsDetailsBreakdown","azureDetails","azureDetailsBreakdown","basePath","costModelsDetails","gcpDetails","gcpDetailsBreakdown","ociDetails","ociDetailsBreakdown","ibmDetails","ibmDetailsBreakdown","ocpDetails","ocpDetailsBreakdown","optimizations","rhelDetails","rhelDetailsBreakdown","hasPermissions","ContactBody","_a","_b","prevPageButtonText","_c","toLandingPageText","title","_d","actions","serviceName","_e","Icon","LockIcon","_f","description","_g","showReturnButton","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","heading","concat","full","document","referrer","Button","onClick","history","back","component","NotAuthorizedStateBase","render","intl","msg","routes","messages","notAuthorizedStateAws","notAuthorizedStateAzure","notAuthorizedStateCostModels","notAuthorizedStateGcp","notAuthorizedStateIbm","notAuthorizedStateOci","notAuthorizedStateOcp","notAuthorizedStateRhel","notAuthorizedStateOptimizations","notAuthorizedStateSettings","costManagement","formatMessage","NotAuthorizedState","injectIntl","PageHeader","PageHeaderTitle","PageSection","Unavailable","withChrome","Component","auth","initialized","setInitialized","useState","orgAdmin","setOrgAdmin","isMounted","useRef","useLayoutEffect","current","async","data","getUser","identity","user","is_org_admin","isOrgAdmin","then","val","chrome","hasAccess","userAccessType","Array","isArray","find","d","type","access","hasProviders","providers","meta","count","hasAwsAccess","isAwsAvailable","awsProviders","hasAzureAccess","isAzureAvailable","azureProviders","hasOciAccess","isOciAvailable","ociProviders","hasCostModelAccess","cost_model","hasGcpAccess","isGcpAvailable","gcpProviders","hasIbmAccess","isIbmAvailable","ibmProviders","hasOcpAccess","isOcpAvailable","ocpProviders","hasRhelAccess","isRhelAvailable","rhelProviders","hasRosAccess","hasSettingsAccess"],"sourceRoot":""}