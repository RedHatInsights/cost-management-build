(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[9612],{41269:(e,t)=>{var a;!function(){var n={months:["January","February","March","April","May","June","July","August","September","October","November","December"],toUTC:function(e){var t=e?new Date(e):new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},monthName:function(e){var t;return t="number"==typeof e?e:new Date(e).getMonth()+1,n.months[t-1]},relativeTime:function(e,t){var a,n,s,r,l,o,i=[];if("number"==typeof e?a=e:(r=new Date(e).getTime(),a=((new Date).getTime()-r)/1e3*-1),t||(t={}),t.futureSuffix||(t.futureSuffix="from now"),t.pastSuffix||(t.pastSuffix="ago"),t.presentText||(t.presentText="now"),t.returnObject||(t.returnObject=!1),l=a<0,a=Math.abs(a),n={seconds:Math.floor(a%31536e3%86400%3600%60),minutes:Math.floor(a%31536e3%86400%3600/60),hours:Math.floor(a%31536e3%86400/3600),days:Math.floor(a%31536e3/86400),years:Math.floor(a/31536e3),past:l},t.returnObject)return n;if(0===a)return t.presentText;function c(e,a){o&&(o=t.allUnits,i.push(e+" "+a+(e>1?"s":"")))}return s=n.past?t.pastSuffix:t.futureSuffix,o=!0,n.years&&c(n.years,"year"),n.days&&c(n.days,"day"),n.hours&&c(n.hours,"hour"),n.minutes&&c(n.minutes,"minute"),n.seconds&&c(n.seconds,"second"),i.join(", ")+" "+s},prettyPrint:function(e,t){var a,n,s,r,l,o,i,c,m;return e?"number"==typeof e&&(e=(new Date).setSeconds(e)):e=new Date,t||(t={}),t.showTime||(t.showTime=!1),r=(s=(a=new Date(e)).getDate())>3&&s<21?s+"th":s%10==1?s+"st":s%10==2?s+"nd":s%10==3?s+"rd":s+"th",l=a.getFullYear(),n=this.monthName(a.getMonth()+1)+" "+r+", "+l,m=(i=a.getHours())>=12?"pm":"am",o=(i=i%12?i%12:12)+":"+(c=(c=a.getMinutes())<10?"0"+c:c)+" "+m,t.showTime?n+" at "+o:n}};if(!e.exports)return!(void 0!==(a=function(){return n}.apply(t,[]))&&(e.exports=a));e.exports=n}()},48169:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_e});var n=a(80708),s=a(97522),r=a.n(s),l=a(43476),o=a(87932),i=a(99627),c=a(46462),m=a(16530),u=a(75795);const d={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function p(e){return Object.keys(e).reduce(((t,a)=>null===e[a]?t:""===t?`?${a}=${e[a]}`:`${t}&${a}=${e[a]}`),"")}function g(e,t){return(e-1)*t}Object.keys(d);const h=(0,m.withRouter)((0,l.connect)((e=>{const{count:t,page:a,perPage:n}=o.E6.pagination(e);return{query:o.E6.query(e),count:t,page:a,perPage:n}}),void 0,((e,t,a)=>{const{history:{push:s}}=a,{count:r,page:l,perPage:o,query:i}=e;return{itemCount:r,page:l,perPage:o,variant:n.PaginationVariant.bottom,onSetPage:(e,t,a)=>{s(p(Object.assign(Object.assign(Object.assign({},d),i),{offset:g(t,a)})))},onPerPageSelect:(e,t)=>{s(p(Object.assign(Object.assign(Object.assign({},d),i),{limit:t,offset:0})))}}}))((function(e){const{variant:t,itemCount:a,page:s,perPage:l,onSetPage:o,onPerPageSelect:i}=e;return r().createElement(n.Toolbar,null,r().createElement(n.ToolbarContent,null,r().createElement(n.ToolbarItem,{variant:n.ToolbarItemVariant.pagination},r().createElement(n.Pagination,{onPerPageSelect:i,onSetPage:o,variant:t,itemCount:a,page:s,perPage:l}))))})));var E=a(32004),C=a(93952),f=a(20546),M=a(69957),y=a(6813),S=a(74806),b=a(94377),T=a(5144);const P=r().createContext({metricsHash:{},step:1,type:"",name:"",dirtyName:!1,isDiscount:!1,distribution:"",markup:"",description:"",error:null,apiError:null,sources:[],onTypeChange:e=>null,onNameChange:e=>null,onDescChange:e=>null,onSourceSelect:(...e)=>null,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleSignChange:(...e)=>null,markupValidator:(...e)=>null,handleOnKeyDown:(...e)=>null,setSources:e=>null,dataFetched:!1,loading:!1,filterName:"",onFilterChange:e=>null,query:{},clearQuery:()=>null,total:0,page:1,perPage:10,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,tiers:[],goToAddPL:e=>null,submitTiers:e=>null,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},fetchSources:(e,t,a,n)=>null,createError:null,createSuccess:!1,onClose:()=>null,createProcess:!1});var v=a(51508);const Z=e=>0===e.length?C.Z.CostModelsRequiredField:e.length>100?C.Z.CostModelsInfoTooLong:null,x=e=>e.length>500?C.Z.CostModelsDescTooLong:null,k={"":[()=>!1],AWS:[e=>null===Z(e.name)&&null===x(e.description)&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0],AZURE:[e=>null===Z(e.name)&&null===x(e.description)&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0],GCP:[e=>null===Z(e.name)&&null===x(e.description)&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0],OCP:[e=>null===Z(e.name)&&null===x(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0]},D={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"}},O=(0,S.ZP)((({intl:e})=>r().createElement(P.Consumer,null,(({name:t,dirtyName:a,description:s,type:l,onNameChange:o,onDescChange:i,onTypeChange:c})=>r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(C.Z.CostModelsWizardGeneralInfoTitle))),r().createElement(n.StackItem,null,r().createElement("a",{href:e.formatMessage(C.Z.DocsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(C.Z.LearnMore))),r().createElement(n.StackItem,null,r().createElement(v.l,{style:D.form},r().createElement(n.FormGroup,{helperTextInvalid:Z(t),validated:null!==Z(t)&&a?"error":"default",label:e.formatMessage(C.Z.Names,{count:1}),isRequired:!0,fieldId:"name"},r().createElement(n.TextInput,{validated:null!==Z(t)&&a?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:t,onChange:o})),r().createElement(n.FormGroup,{helperTextInvalid:x(s),validated:null===x(s)?"default":"error",label:e.formatMessage(C.Z.Description),fieldId:"description"},r().createElement(n.TextArea,{style:D.textArea,type:"text",id:"description",name:"description",value:s,validated:null===x(s)?"default":"error",onChange:i})),r().createElement(n.FormGroup,{label:e.formatMessage(C.Z.CostModelsSourceType),isRequired:!0,fieldId:"source-type"},r().createElement(n.FormSelect,{id:"source-type",value:l,onChange:c},r().createElement(n.FormSelectOption,{value:"",label:e.formatMessage(C.Z.CostModelsWizardEmptySourceTypeLabel)}),r().createElement(n.FormSelectOption,{value:"AWS",label:e.formatMessage(C.Z.CostModelsWizardOnboardAWS)}),r().createElement(n.FormSelectOption,{value:"AZURE",label:e.formatMessage(C.Z.Azure)}),r().createElement(n.FormSelectOption,{value:"GCP",label:e.formatMessage(C.Z.GCP)}),r().createElement(n.FormSelectOption,{value:"OCP",label:e.formatMessage(C.Z.CostModelsWizardOnboardOCP)}))))))))));var I=a(4705);class L extends r().Component{render(){const{intl:e}=this.props;return r().createElement(P.Consumer,null,(({handleDistributionChange:t,handleSignChange:a,handleOnKeyDown:s,handleMarkupDiscountChange:l,markupValidator:o,markup:i,isDiscount:c,distribution:m,type:u})=>r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(C.Z.CostCalculations))),r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h3",size:"md"},e.formatMessage(C.Z.MarkupOrDiscount)),e.formatMessage(C.Z.MarkupOrDiscountModalDesc)),r().createElement(n.StackItem,null,r().createElement(n.Flex,{style:I.W.markupRadioContainer},r().createElement(n.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},r().createElement(n.FlexItem,null,r().createElement(n.Radio,{isChecked:!c,name:"discount",label:e.formatMessage(C.Z.MarkupPlus),"aria-label":e.formatMessage(C.Z.MarkupPlus),id:"markup",value:"false",onChange:a,style:I.W.markupRadio}),r().createElement(n.Radio,{isChecked:c,name:"discount",label:e.formatMessage(C.Z.DiscountMinus),"aria-label":e.formatMessage(C.Z.DiscountMinus),id:"discount",value:"true",onChange:a}))),r().createElement(n.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},r().createElement(n.FlexItem,null,r().createElement(n.InputGroup,{style:I.W.rateContainer},r().createElement(n.InputGroupText,{style:I.W.sign},c?"-":"+"),r().createElement(n.TextInput,{style:I.W.inputField,type:"text","aria-label":e.formatMessage(C.Z.Rate),id:"markup-input-box",value:i,onKeyDown:s,onChange:l,validated:o()}),r().createElement(n.InputGroupText,{style:I.W.percent},"%")))))),r().createElement(n.StackItem,null,r().createElement("div",{style:I.W.exampleMargin},r().createElement(n.TextContent,null,r().createElement(n.Text,{component:n.TextVariants.h6},e.formatMessage(C.Z.ExamplesTitle))),r().createElement(n.List,null,r().createElement(n.ListItem,null,e.formatMessage(C.Z.CostModelsExamplesNoAdjust)),r().createElement(n.ListItem,null,e.formatMessage(C.Z.CostModelsExamplesDoubleMarkup)),r().createElement(n.ListItem,null,e.formatMessage(C.Z.CostModelsExamplesReduceZero)),r().createElement(n.ListItem,null,e.formatMessage(C.Z.CostModelsExamplesReduceSeventyfive))))),"OCP"===u&&r().createElement(r().Fragment,null,r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h3",size:"md"},e.formatMessage(C.Z.DistributionType)),r().createElement(n.TextContent,null,r().createElement(n.Text,{style:I.W.cardDescription},e.formatMessage(C.Z.DistributionModelDesc)))),r().createElement(n.StackItem,{isFilled:!0},r().createElement(v.l,null,r().createElement(n.FormGroup,{isInline:!0,fieldId:"cost-distribution",isRequired:!0},r().createElement(n.Radio,{isChecked:"cpu"===m,name:"distribution",label:e.formatMessage(C.Z.CpuTitle),"aria-label":e.formatMessage(C.Z.CpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),r().createElement(n.Radio,{isChecked:"memory"===m,name:"distribution",label:e.formatMessage(C.Z.MemoryTitle),"aria-label":e.formatMessage(C.Z.MemoryTitle),id:"memoryDistribution",value:"memory",onChange:t}))))))))}}const z=(0,S.ZP)(L);var W=a(88485),F=a(52591);const j=(0,S.ZP)((({intl:e=E.N,submitRate:t,cancel:a,metricsHash:s})=>{const{tiers:l}=r().useContext(P),o=(0,F.bF)(s,void 0,l),i=r().useMemo((()=>(0,F.Cw)(o)),[o.errors,o.rateKind]);return r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(C.Z.CostModelsWizardCreatePriceList))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,{component:n.TextVariants.h6},e.formatMessage(C.Z.CostModelsWizardPriceListMetric)))),r().createElement(n.StackItem,null,r().createElement(n.Form,null,r().createElement(F.HJ,{metricsHash:s,rateFormData:o}))),r().createElement(n.StackItem,null,r().createElement(n.ActionGroup,null,r().createElement(n.Button,{variant:n.ButtonVariant.primary,isDisabled:!i,onClick:()=>t(o)},e.formatMessage(C.Z.CreateRate)),r().createElement(n.Button,{variant:n.ButtonVariant.link,onClick:a},e.formatMessage(C.Z.Cancel)))))}));var N=a(7081),R=a(55483),w=a(77656),B=a(80963),V=a(66555),A=a(39574),q=a(85218),G=a(60477);class _ extends r().Component{constructor(){super(...arguments),this.state={metrics:[],measurements:[]}}render(){const{metricsHash:e,intl:t,addRateAction:a,deleteRateAction:s,items:l}=this.props,o=e=>{const a=e.replace(/ /g,"_").toLowerCase();return t.formatMessage(C.Z.MetricValues,{value:a})||e},i=e=>t.formatMessage(C.Z.MeasurementValues,{value:e.toLowerCase(),count:1})||e,c=Object.keys(e).map((e=>({label:o(e),value:e}))),m=c.reduce(((t,a)=>{const n=Object.keys(e[a.value]).filter((e=>!t.map((e=>e.value)).includes(e))).map((e=>({label:i(e),value:e})));return[...t,...n]}),[]),u=()=>r().createElement(n.Bullseye,null,r().createElement(n.EmptyState,null,r().createElement(n.EmptyStateIcon,{icon:N.wl}),r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.lg},t.formatMessage(C.Z.CostModelsWizardEmptyStateTitle)),r().createElement(n.EmptyStateBody,null,t.formatMessage(C.Z.CostModelsWizardEmptyStateSkipStep,{value:r().createElement("strong",null,t.formatMessage(C.Z.CreateRate))}),r().createElement("br",null),t.formatMessage(C.Z.CostModelsWizardEmptyStateSkipStep,{value:r().createElement("strong",null,t.formatMessage(C.Z.Next))}),r().createElement("br",null),t.formatMessage(C.Z.CostModelsWizardEmptyStateOtherTime))));return r().createElement(P.Consumer,null,(({priceListPagination:e})=>r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},t.formatMessage(C.Z.CostModelsWizardCreatePriceList))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,{component:n.TextVariants.h6},t.formatMessage(C.Z.CostModelsWizardSubTitleTable)))),r().createElement(n.StackItem,null,r().createElement(w.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:o,setSearch:i,onRemove:d,onSelect:p,onClearAll:g})=>{const h=(e.page-1)*e.perPage,E=e.page*e.perPage,f=l.filter((e=>0===o.metrics.length||o.metrics.includes(e.metric.label_metric))).filter((e=>0===o.measurements.length||o.measurements.includes(e.metric.label_measurement))),M=f.slice(h,E);return r().createElement(r().Fragment,null,r().createElement(V.Q,{primary:r().createElement(G.J,{isDisabled:0===l.length,primary:o.primary,setPrimary:e=>i({primary:e}),options:[{label:t.formatMessage(C.Z.Metric),value:"metrics"},{label:t.formatMessage(C.Z.Measurement),value:"measurements"}]}),selected:o.primary,secondaries:[{component:r().createElement(q.n,{isDisabled:0===l.length,placeholderText:t.formatMessage(C.Z.ToolBarPriceListMeasurementPlaceHolder),selections:o.measurements,setSelections:e=>p("measurements",e),options:m}),name:"measurements",onRemove:d,filters:o.measurements},{component:r().createElement(q.n,{isDisabled:0===l.length,placeholderText:t.formatMessage(C.Z.ToolBarPriceListMetricPlaceHolder),selections:o.metrics,setSelections:e=>p("metrics",e),options:c}),name:"metrics",onRemove:d,filters:o.metrics}],button:r().createElement(n.Button,{onClick:a},t.formatMessage(C.Z.CreateRate)),onClear:g,pagination:r().createElement(n.Pagination,{isCompact:!0,itemCount:f.length,perPage:e.perPage,page:e.page,onSetPage:e.onPageSet,onPerPageSelect:e.onPerPageSet})}),0===M.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&r().createElement(n.Bullseye,null,r().createElement(R.c,null)),0===M.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&r().createElement(u,null),M.length>0&&r().createElement(A.y,{isCompact:!0,tiers:M,actions:[{title:"Remove",onClick:(e,t,a)=>{s(a.data.index+h)}}]}),r().createElement(B.Z,{isCompact:!0,itemCount:f.length,perPage:e.perPage,page:e.page,onSetPage:e.onPageSet,onPerPageSelect:e.onPerPageSet}))}))))))}}const $=(0,l.connect)((0,b.X1)((e=>({metricsHash:i.qw.metrics(e)}))))((0,S.ZP)(_)),H=()=>{const{metricsHash:e,tiers:t,submitTiers:a,goToAddPL:n}=r().useContext(P),[s,l]=r().useState("table");return"table"===s?r().createElement($,{items:t,deleteRateAction:e=>{const s=[...t.slice(0,e),...t.slice(e+1)];a(s),0===s.length&&(l("form"),n(!1))},addRateAction:()=>{l("form"),n(!1)}}):"form"===s?r().createElement(j,{metricsHash:e,submitRate:s=>{var r;r=(0,F.Nl)(s,e),a([...t,r]),l("table"),n(!0)},cancel:()=>{l("table"),n(!0)}}):null};var U=a(53086),K=a(39887);const J=(0,S.ZP)((({intl:e})=>r().createElement(P.Consumer,null,(({onClose:t,name:a})=>r().createElement(n.EmptyState,null,r().createElement(n.EmptyStateIcon,{icon:U.xX,color:"green"}),r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.lg},e.formatMessage(C.Z.CostModelsWizardReviewStatusTitle)),r().createElement(n.EmptyStateBody,null,e.formatMessage(C.Z.CostModelsWizardReviewStatusSubTitle,{value:a})),r().createElement(n.EmptyStateSecondaryActions,null,r().createElement(n.Button,{variant:"link",onClick:t},e.formatMessage(C.Z.Close)))))))),X=(0,S.ZP)((({intl:e})=>r().createElement(P.Consumer,null,(({name:t,description:a,distribution:s,type:l,markup:o,sources:i,tiers:c,createError:m,isDiscount:u})=>r().createElement(r().Fragment,null,m&&r().createElement(n.Alert,{variant:"danger",title:`${m}`}),r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(C.Z.CostModelsWizardStepsReview))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,{component:n.TextVariants.h6},e.formatMessage(C.Z.CostModelsWizardReviewStatusSubDetails,{create:r().createElement("strong",null,e.formatMessage(C.Z.Create)),back:r().createElement("strong",null,e.formatMessage(C.Z.Back))})))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.TextList,{component:n.TextListVariants.dl},r().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(C.Z.Names,{count:1})),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},t),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(C.Z.Description)),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},a),"OCP"===l&&r().createElement(r().Fragment,null,r().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(C.Z.PriceList)),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},c.length>0?r().createElement(A.y,{tiers:c}):e.formatMessage(C.Z.CostModelsWizardNoRatesAdded))),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(C.Z.CostModelsWizardReviewMarkDiscount)),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},u?"-"+o:o,"%"),"OCP"===l&&r().createElement(r().Fragment,null,r().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(C.Z.DistributionType)),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},s)),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(C.Z.CostModelsAssignSources,{count:2})," ",i.find((e=>e.selected&&Boolean(e.costmodel)))&&r().createElement(K.a,{text:e.formatMessage(C.Z.CostModelsWizardWarningSources)})),r().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},i.filter((e=>e.selected)).map((e=>e.name)).join(", "))))))))))),Q=()=>r().createElement(P.Consumer,null,(({createSuccess:e})=>e?r().createElement(J,null):r().createElement(X,null)));var Y=a(52413),ee=a(27916),te=a(10209),ae=a(80810);const ne=({id:e,placeholder:t="",value:a,onChange:s,onSearch:l})=>r().createElement(n.InputGroup,null,r().createElement(n.TextInput,{value:a,placeholder:t,id:e,onChange:s,onKeyPress:e=>{"Enter"===e.key&&""!==a&&l(e)}}),r().createElement(n.InputGroupText,{style:{borderLeft:"0"}},r().createElement(ae.W1,null))),se=(0,S.ZP)((({intl:e,filterInputProps:t,paginationProps:a,filter:s})=>r().createElement(n.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:s.onClearAll},r().createElement(n.ToolbarContent,null,r().createElement(n.ToolbarItem,{variant:"search-filter"},r().createElement(n.ToolbarFilter,{deleteChip:s.onRemove,chips:s.query.name,categoryName:"name"},r().createElement(ne,Object.assign({placeholder:e.formatMessage(C.Z.CostModelsFilterPlaceholder)},t)))),r().createElement(n.ToolbarItem,{variant:"pagination"},r().createElement(n.Pagination,{isCompact:a.isCompact,itemCount:a.itemCount,page:a.page,perPage:a.perPage,onSetPage:a.onSetPage,onPerPageSelect:a.onPerPageSelect})))))),re=(0,S.ZP)((({intl:e})=>r().createElement(P.Consumer,null,(({loading:t,onSourceSelect:a,sources:s,perPage:l,page:o,type:i,query:c,fetchSources:m,filterName:d,onFilterChange:p})=>{const g="AZURE"===i?"Azure":i;return r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(C.Z.CostModelsWizardSourceTitle))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,{component:n.TextVariants.h6},e.formatMessage(C.Z.CostModelsWizardSourceSubtitle)))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,{component:n.TextVariants.h3},e.formatMessage(C.Z.CostModelsWizardSourceCaption,{value:i.toLowerCase()})))),r().createElement(n.StackItem,null,r().createElement(se,{filter:{onRemove:(e,t)=>m(g,(0,te.fg)(c)(e,t),1,l),onClearAll:()=>m(g,{},1,l),query:c},filterInputProps:{id:"assign-source-search-input",value:d,onChange:p,onSearch:()=>{m(g,(0,te.xZ)(c)("name",d),1,l)}},paginationProps:{isCompact:!0,itemCount:s.length,perPage:l,page:o,onSetPage:(e,t)=>{m(g,c,t,l)},onPerPageSelect:(e,t)=>m(g,c,1,t)}}),t?r().createElement(Y.G,null):r().createElement(u.Table,{"aria-label":e.formatMessage(C.Z.CostModelsWizardSourceTableAriaLabel),cells:["",e.formatMessage(C.Z.Names,{count:1}),e.formatMessage(C.Z.CostModelsWizardSourceTableCostModel)],rows:s.map(((t,s)=>({cells:[r().createElement(r().Fragment,null,r().createElement(n.Checkbox,{onChange:e=>{a(s,e)},id:t.name,key:t.name,isChecked:t.selected,isDisabled:Boolean(t.costmodel)})),r().createElement(r().Fragment,null,t.name," ",Boolean(t.costmodel)&&r().createElement(K.a,{key:`wrng-${t.name}`,text:e.formatMessage(C.Z.CostModelsWizardSourceWarning,{costModel:t.costmodel})})),t.costmodel?t.costmodel:""],selected:t.selected})))},r().createElement(u.TableHeader,null),r().createElement(u.TableBody,null)),r().createElement(B.N,{itemCount:s.length,perPage:l,page:o,onSetPage:(e,t)=>{m(g,c,t,l)},onPerPageSelect:(e,t)=>m(g,c,1,t)})))}))));class le extends r().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:a,perPage:n,fetchSources:s}=this.context;s("AZURE"===e?"Azure":e,t,a,n)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?r().createElement(Y.G,null):this.context.apiError?r().createElement(ee.Bu,{onRefresh:this.fetchData}):r().createElement(re,null)}render(){return this.renderContent()}}le.contextType=P;const oe=le,ie=(0,S.ZP)((({intl:e,isProcess:t,isSuccess:a,closeFnc:s,isOpen:l,onMove:o,validators:i,steps:c,current:m=1,context:u,setError:d,setSuccess:p,updateCostModel:g})=>{const h=c.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:m>t})));h[m-1].enableNext=i[m-1](u);const E="OCP"===u.type&&2===m&&!i[m-1](u);return m===c.length&&""!==u.type&&(h[m-1].nextButtonText=e.formatMessage(C.Z.Create)),l?r().createElement(n.Wizard,{isOpen:!0,title:e.formatMessage(C.Z.CreateCostModelTitle),description:e.formatMessage(C.Z.CreateCostModelDesc),steps:h,startAtStep:m,onNext:o,onBack:o,onGoToStep:o,onClose:s,footer:a||t||E?r().createElement("div",null):null,onSave:()=>{const{name:e,type:t,tiers:a,markup:n,description:s,distribution:r,isDiscount:l,sources:o}=u;(0,y.Rl)({name:e,source_type:t,description:s,distribution:r,rates:a,markup:{value:l?"-"+n:n,unit:"percent"},source_uuids:o.map((e=>e.uuid))}).then((()=>{p(),g()})).catch((e=>d((0,W.L)(e))))}}):null})),ce={step:1,type:"",name:"",dirtyName:!1,distribution:"cpu",isDiscount:!1,description:"",markup:"0.00",filterName:"",sources:[],error:null,apiError:null,dataFetched:!1,query:{},page:1,perPage:10,total:0,loading:!1,tiers:[],priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},createError:null,createSuccess:!1,createProcess:!1,isDialogOpen:!1};class me extends r().Component{constructor(){super(...arguments),this.state=ce}render(){const{metricsHash:e,intl:t}=this.props,a=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},s=r().createElement(n.Button,{key:"cancel",variant:"link",onClick:a},t.formatMessage(C.Z.CreateCostModelNoContinue)),l=r().createElement(n.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},ce))},t.formatMessage(C.Z.CreateCostModelExitYes));return r().createElement(P.Provider,{value:{metricsHash:e,step:this.state.step,type:this.state.type,onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),name:this.state.name,dirtyName:this.state.dirtyName,onNameChange:e=>this.setState({name:e,dirtyName:!0}),description:this.state.description,onDescChange:e=>this.setState({description:e}),distribution:this.state.distribution,handleDistributionChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({distribution:a})},markup:this.state.markup,handleMarkupDiscountChange:(e,t)=>{const{value:a}=t.currentTarget;/^[0-9.]*$/.test(a)&&this.setState({markup:a})},isDiscount:this.state.isDiscount,handleSignChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({isDiscount:"true"===a})},markupValidator:()=>/^\d*(\.?\d{1,2})?$/.test(this.state.markup)?"default":"error",handleOnKeyDown:e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()},error:this.state.error,apiError:this.state.apiError,sources:this.state.sources,dataFetched:this.state.dataFetched,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),onSourceSelect:(e,t)=>{if(-1===e)return this.setState({sources:this.state.sources.map((e=>Object.assign(Object.assign({},e),{selected:t})))});const a=[...this.state.sources];return a[e].selected=t,this.setState({sources:a})},total:this.state.total,page:this.state.page,onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),perPage:this.state.perPage,filterName:this.state.filterName,onFilterChange:e=>this.setState({filterName:e}),query:this.state.query,clearQuery:()=>this.setState({query:{}}),loading:this.state.loading,tiers:this.state.tiers,submitTiers:e=>{this.setState({tiers:e})},priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),fetchSources:(e,t,a,n)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:a,query:n})=>{const s=(t-1)*a,r=a,l=Object.keys(n).reduce(((e,t)=>e?`${e}&${t}=${n[t]}`:`${t}=${n[t]}`),"");return(0,T.l)(`type=${e}&limit=${r}&offset=${s}&${l}`).then((e=>e.data.data)).then((e=>e.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),selected:!1})))))})({type:e,query:t,page:a,perPage:n}).then((e=>this.setState({sources:e,query:t,page:a,perPage:n,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},createSuccess:this.state.createSuccess,createError:this.state.createError,createProcess:this.state.createProcess,onClose:()=>this.setState(Object.assign({},ce),this.props.closeWizard)}},r().createElement(ie,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},ce),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(C.Z.CostModelsWizardStepsGenInfo),component:r().createElement(O,null)}],AZURE:[{id:1,name:t.formatMessage(C.Z.CostModelsWizardStepsGenInfo),component:r().createElement(O,null)},{id:2,name:t.formatMessage(C.Z.CostCalculations),component:r().createElement(z,null)},{id:3,name:t.formatMessage(C.Z.CostModelsWizardStepsSources),component:r().createElement(oe,null)},{id:4,name:t.formatMessage(C.Z.CostModelsWizardStepsReview),component:r().createElement(Q,null)}],AWS:[{id:1,name:t.formatMessage(C.Z.CostModelsWizardStepsGenInfo),component:r().createElement(O,null)},{id:2,name:t.formatMessage(C.Z.CostCalculations),component:r().createElement(z,null)},{id:3,name:t.formatMessage(C.Z.CostModelsWizardStepsSources),component:r().createElement(oe,null)},{id:4,name:t.formatMessage(C.Z.CostModelsWizardStepsReview),component:r().createElement(Q,null)}],GCP:[{id:1,name:t.formatMessage(C.Z.CostModelsWizardStepsGenInfo),component:r().createElement(O,null)},{id:2,name:t.formatMessage(C.Z.CostCalculations),component:r().createElement(z,null)},{id:3,name:t.formatMessage(C.Z.CostModelsWizardStepsSources),component:r().createElement(oe,null)},{id:4,name:t.formatMessage(C.Z.CostModelsWizardStepsReview),component:r().createElement(Q,null)}],OCP:[{id:1,name:t.formatMessage(C.Z.CostModelsWizardStepsGenInfo),component:r().createElement(O,null)},{id:2,name:t.formatMessage(C.Z.PriceList),component:r().createElement(H,null)},{id:3,name:t.formatMessage(C.Z.CostCalculations),component:r().createElement(z,null)},{id:4,name:t.formatMessage(C.Z.CostModelsWizardStepsSources),component:r().createElement(oe,null)},{id:5,name:t.formatMessage(C.Z.CostModelsWizardStepsReview),component:r().createElement(Q,null)}]}[this.state.type],current:this.state.step,validators:k[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,description:this.state.description,distribution:this.state.distribution,markup:this.state.isDiscount?"-"+this.state.markup:this.state.markup,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:this.state.sources.filter((e=>e.selected))}}),r().createElement(n.Modal,{"aria-label":t.formatMessage(C.Z.CreateCostModelExit),isOpen:this.state.isDialogOpen,header:r().createElement(n.Title,{headingLevel:"h1",size:n.TitleSizes["2xl"]},r().createElement(M.LP,{color:"orange"})," ",t.formatMessage(C.Z.CreateCostModelExit)),onClose:a,actions:[l,s],variant:"small"},t.formatMessage(C.Z.CreateCostModelConfirmMsg)))}}const ue=(0,l.connect)((0,b.X1)((e=>({metricsHash:i.qw.metrics(e)}))),{fetch:o.F0.fetchCostModels})((0,S.ZP)(me)),de=(0,S.ZP)((0,l.connect)((e=>({canWrite:c.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,a)=>{const{intl:s=E.N}=a,{canWrite:l}=e,{openWizard:o}=t;return{isDisabled:!l,tooltip:s.formatMessage(C.Z.CostModelsReadOnly),children:r().createElement(n.Button,{isDisabled:!l,onClick:o},s.formatMessage(C.Z.CostModelsWizardCreateCostModel))}}))(f.j)),pe=(0,l.connect)((e=>({isOpen:o.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:a}=e,{openWizard:n,closeWizard:s}=t;return{isOpen:a,openWizard:n,closeWizard:s}}))(ue);function ge({head:e,body:t,sources:a}){return r().createElement(n.Stack,{hasGutter:!0},r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,null,e))),r().createElement(n.StackItem,null,r().createElement(n.TextContent,null,r().createElement(n.Text,null,t),r().createElement(n.TextList,{component:n.TextListVariants.ol},a.map((e=>r().createElement(n.TextListItem,{key:e},e)))))))}const he=(0,S.ZP)((0,l.connect)((e=>({isOpen:o.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:o.E6.deleteProcessing(e),deleteError:o.E6.deleteError(e),dialogData:o.E6.dialogData(e)})),(e=>({closeDialog:()=>e(o.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>o.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,a)=>{const{intl:s=E.N}=a,l=(o=e.isLoading,i=e.isOpen,c=e.deleteError,i?o?"loading":c?"failure":"open":"close");var o,i,c;const m=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,u=m?m.name:"",d=m?m.sources.map((e=>e.name)):[],p=m?m.uuid:"",g=function({status:e,deleteText:t,deleteAction:a,cancelText:s,cancelAction:l,sourcesNo:o}){let i=[];return"loading"===e&&(i=[r().createElement(n.Button,{key:"pending_delete",variant:n.ButtonVariant.danger,isDisabled:!0},t),r().createElement(n.Button,{key:"pending_cancel",variant:n.ButtonVariant.link,isDisabled:!0},s)]),["failure","open"].includes(e)&&o>0&&(i=[r().createElement(n.Button,{key:"sources_cancel",variant:n.ButtonVariant.link,onClick:l},s)]),["failure","open"].includes(e)&&0===o&&(i=[r().createElement(n.Button,{key:"delete",variant:n.ButtonVariant.danger,onClick:a},t),r().createElement(n.Button,{key:"cancel",variant:n.ButtonVariant.link,onClick:l},s)]),i}({status:l,deleteText:s.formatMessage(C.Z.CostModelsDelete),deleteAction:()=>t.deleteCostModel(p),cancelText:s.formatMessage(C.Z.Cancel),cancelAction:t.closeDialog,sourcesNo:d.length}),h=function({status:e,sources:t,error:a,cannotDeleteTitle:s,cannotDeleteBody:l,canDeleteBody:o}){return"close"!==e&&t.length>0?r().createElement(ge,{head:s,body:l,sources:t}):"close"!==e&&0===t.length?r().createElement(n.Stack,{hasGutter:!0},"failure"===e?r().createElement(n.StackItem,null,r().createElement(n.Alert,{variant:n.AlertVariant.danger,title:a})):null,r().createElement(n.StackItem,null,o)):void 0}({status:l,sources:d,error:e.deleteError,cannotDeleteTitle:s.formatMessage(C.Z.CostModelsDeleteSource),cannotDeleteBody:s.formatMessage(C.Z.CostModelsCanNotDelete,{name:u}),canDeleteBody:s.formatMessage(C.Z.CostModelsCanDelete,{name:u})});return{actions:g,isOpen:"close"!==l,variant:n.ModalVariant.small,"aria-label":s.formatMessage(C.Z.CostModelsDelete),title:s.formatMessage(C.Z.CostModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:h}}))(n.Modal));var Ee=a(91290);const Ce=(0,S.ZP)((0,l.connect)(((e,t)=>{const{intl:a}=t;return{children:r().createElement(r().Fragment,null,a.formatMessage(C.Z.CostModels),r().createElement(n.Popover,{"aria-label":a.formatMessage(C.Z.CostModelsPopoverAriaLabel),bodyContent:a.formatMessage(C.Z.CostModelsPopover,{learnMore:r().createElement("a",{href:a.formatMessage(C.Z.DocsUsingCostModels),rel:"noreferrer",target:"_blank"},a.formatMessage(C.Z.LearnMore))}),enableFlip:!0},r().createElement(n.Button,{variant:n.ButtonVariant.plain},r().createElement(Ee.iC,null))))}}))((function({children:e}){return r().createElement(n.TextContent,null,r().createElement(n.Title,{headingLevel:"h1",size:n.TitleSizes["2xl"]},e))})));var fe=a(20167),Me=a(41269),ye=a(8679);function Se(e){return function(t){var a=function(a){return s.createElement(t,Object.assign({},a,e(a)))};return a.displayName="HookIntoProps("+(t.displayName||t.name||"Component")+")",ye(a,t)}}const be=Se((({intl:e=E.N})=>({title:e.formatMessage(C.Z.CostModelsEmptyState),description:e.formatMessage(C.Z.CostModelsEmptyStateDesc),icon:N.wl,actions:r().createElement(r().Fragment,null,r().createElement(de,null),r().createElement("br",null),r().createElement("br",null),r().createElement("a",{href:e.formatMessage(C.Z.DocsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(C.Z.CostModelsEmptyStateLearnMore)))})))((function(e){return r().createElement(n.EmptyState,{className:"pf-m-redhat-font"},r().createElement(n.EmptyStateIcon,{icon:e.icon}),r().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.lg},e.title),r().createElement(n.EmptyStateBody,null,e.description),e.actions?e.actions:null)})),Te=(0,S.ZP)(be);class Pe extends r().Component{constructor(){super(...arguments),this.state={dialogSource:null}}render(){const{actionResolver:e,intl:t=E.N,canWrite:a,costData:s,history:{push:l},openDeleteDialog:o,query:i,stateName:c}=this.props,d=[{title:t.formatMessage(C.Z.Names,{count:1}),transforms:[u.sortable],data:{orderName:"name"}},{title:t.formatMessage(C.Z.Description)},{title:t.formatMessage(C.Z.CostModelsSourceType),transforms:[u.sortable],data:{orderName:"source_type"}},{title:t.formatMessage(C.Z.CostModelsAssignedSources)},{title:t.formatMessage(C.Z.CostModelsLastChange),transforms:[u.sortable],data:{orderName:"updated_timestamp"}}],g=function(e,t){const{ordering:a}=e;if(null===a)return{};const n="-"===a[0]?a.slice(1):a,s="-"===a[0]?u.SortByDirection.desc:u.SortByDirection.asc;return{index:t.findIndex((e=>e.data&&e.data.orderName===n)),direction:s}}(i,d),h=function(e,t,a){return function(n,s,r){const l=e[s]&&e[s].data?e[s].data.orderName:null;null!==l&&(r!==u.SortByDirection.asc?a(p(Object.assign(Object.assign({},t),{ordering:`-${l}`}))):a(p(Object.assign(Object.assign({},t),{ordering:l}))))}}(d,i,l),f=function(e,t){let a=null;return"loading"===e&&(a=r().createElement(Y.G,null)),"empty"===e&&(a=r().createElement(Te,null)),"no-match"===e&&(a=r().createElement(R.c,null)),"failure"===e&&(a=r().createElement(fe.Z,null)),null!==a?[{heightAuto:!0,cells:[{props:{colSpan:5},title:r().createElement(n.Bullseye,null," ",a," ")}]}]:t.map((e=>({cells:[{title:r().createElement(m.Link,{to:`/cost-models/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),(0,Me.relativeTime)(e.updated_timestamp)],data:{costModel:e}})))}(c,s),M=function(e,t,a){return"success"!==e?[]:a.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(c,a,[{title:t.formatMessage(C.Z.Delete),tooltip:t.formatMessage(C.Z.CostModelsReadOnly),onClick:(e,t,a)=>{o(a.data)}}]);return r().createElement(n.PageSection,{variant:n.PageSectionVariants.light},r().createElement(u.Table,{gridBreakPoint:u.TableGridBreakpoint.grid2xl,actions:M,actionResolver:e,rows:f,cells:d,onSort:h,sortBy:g,"aria-label":t.formatMessage(C.Z.CostModelsTableAriaLabel)},r().createElement(u.TableHeader,null),r().createElement(u.TableBody,null)))}}const ve=(0,b.X1)((e=>({canWrite:c.c5.isCostModelWritePermission(e),query:o.E6.query(e),costData:o.E6.costModels(e),stateName:o.E6.stateName(e)}))),Ze=(0,l.connect)(ve,(e=>{const t=o.F0.setCostModelDialog;return{openDeleteDialog:a=>e(t({name:"deleteCostModel",isOpen:!0,meta:a}))}}))(Pe),xe=(0,S.ZP)((0,m.withRouter)(Ze)),ke=({placeholder:e="",value:t,onChange:a,onKeyPress:s})=>r().createElement(n.InputGroup,null,r().createElement(n.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:a,onKeyPress:e=>{"Enter"===e.key&&""!==t&&s(e)}}),r().createElement(n.InputGroupText,{style:{borderLeft:"0"}},r().createElement(ae.W1,null))),De=(e,t,a,n)=>s=>{if("Enter"===s.key&&""!==n.value){const s=n.value;e(p(Object.assign(Object.assign({},a),{[t]:a[t]?`${a[t]},${s}`:s}))),n.setValue("")}},Oe=(e,t,a)=>(n,s)=>{const r=a[t]?a[t].split(",").filter((e=>e!==s)):null;e(p(Object.assign(Object.assign({},a),{[t]:null===r||0===r.length?null:r.join(",")})))},Ie=(e,t,a)=>()=>{e(p(Object.assign(Object.assign({},t),{[a]:null})))},Le=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,a)=>{const{intl:n=E.N,value:s,setValue:l,history:{push:o}}=a,{filterType:i,query:c}=e,m="description"===i?r().createElement(ke,{placeholder:n.formatMessage(C.Z.FilterByPlaceholder,{value:i}),value:s,onChange:e=>l(e),onKeyPress:De(o,"description",Object.assign(Object.assign({},d),c),{value:s,setValue:l})}):null,u=c.description?c.description.split(","):[];return{deleteChip:Oe(o,"description",Object.assign(Object.assign({},d),c)),deleteChipGroup:Ie(o,Object.assign(Object.assign({},d),c),"description"),chips:u,categoryName:n.formatMessage(C.Z.Description),children:m}}))(n.ToolbarFilter),ze=Se((()=>{const[e,t]=r().useState("");return{value:e,setValue:t}}))((0,S.ZP)((0,m.withRouter)(Le))),We=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,a)=>{const{intl:n=E.N,setValue:s,value:l,history:{push:o}}=a,{filterType:i,query:c}=e,m="name"===i?r().createElement(ke,{placeholder:n.formatMessage(C.Z.FilterByPlaceholder,{value:i}),value:l,onChange:e=>s(e),onKeyPress:De(o,"name",Object.assign(Object.assign({},d),c),{value:l,setValue:s})}):null,u=c.name?c.name.split(","):[];return{deleteChip:Oe(o,"name",Object.assign(Object.assign({},d),c)),deleteChipGroup:Ie(o,Object.assign(Object.assign({},d),c),"name"),chips:u,categoryName:n.formatMessage(C.Z.Names,{count:1}),children:m}}))(n.ToolbarFilter),Fe=Se((()=>{const[e,t]=r().useState("");return{value:e,setValue:t}}))((0,S.ZP)((0,m.withRouter)(We))),je=(e,t)=>()=>{t(!1);const a=document.getElementById(e);a&&a.focus()},Ne=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,a)=>{const s="source-type-filter",{intl:l=E.N,isOpen:o,setIsOpen:i,history:{push:c}}=a,{filterType:m,query:u}=e,g=e=>c(p(Object.assign(Object.assign(Object.assign({},d),u),{source_type:e}))),h="sourceType"===m?r().createElement(n.Dropdown,{onSelect:je(s,i),isOpen:o,toggle:r().createElement(n.DropdownToggle,{onToggle:e=>{i(e)},id:s},l.formatMessage(C.Z.FilterByPlaceholder,{value:"source_type"})),dropdownItems:[r().createElement(n.DropdownItem,{key:"aws",component:"button",onClick:()=>g("aws")},l.formatMessage(C.Z.AWS)),r().createElement(n.DropdownItem,{key:"azure",component:"button",onClick:()=>g("azure")},l.formatMessage(C.Z.Azure)),r().createElement(n.DropdownItem,{key:"ocp",component:"button",onClick:()=>g("ocp")},l.formatMessage(C.Z.OpenShift))]}):null,f=u.source_type?[u.source_type]:[];return{deleteChip:Ie(c,Object.assign(Object.assign({},d),u),"source_type"),chips:f,categoryName:l.formatMessage(C.Z.CostModelsSourceType),children:h}}))(n.ToolbarFilter),Re=Se((()=>{const[e,t]=r().useState(!1);return{isOpen:e,setIsOpen:t}}))((0,S.ZP)((0,m.withRouter)(Ne))),we=(0,m.withRouter)((0,l.connect)((e=>({query:o.E6.query(e)})),void 0,((e,t,a)=>{const{history:{push:n}}=a,{query:s}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>n(p(Object.assign(Object.assign(Object.assign({},d),s),{description:null,source_type:null,name:null}))),children:a.children}}))(n.Toolbar));var Be=a(76889);const Ve=Se((()=>{const[e,t]=r().useState(!1);return{isOpen:e,setIsOpen:t}}))((0,S.ZP)((0,l.connect)((e=>({filterType:o.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(o.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,a)=>{const{intl:s=E.N}=a,l=[r().createElement(n.SelectOption,{key:"name",value:"name"},s.formatMessage(C.Z.Names,{count:1})),r().createElement(n.SelectOption,{key:"description",value:"description"},s.formatMessage(C.Z.Description)),r().createElement(n.SelectOption,{key:"sourceType",value:"sourceType"},s.formatMessage(C.Z.CostModelsSourceType))];return{variant:n.SelectVariant.single,selections:e.filterType,onToggle:a.setIsOpen,isOpen:a.isOpen,onSelect:(e,n)=>{t.updateFilterType(n),a.setIsOpen(!1)},children:l,toggleIcon:r().createElement(Be.k1,null)}}))(n.Select))),Ae=(0,m.withRouter)((0,l.connect)((e=>{const{count:t,page:a,perPage:n}=o.E6.pagination(e);return{count:t,page:a,perPage:n,query:o.E6.query(e)}}),void 0,((e,t,a)=>{const{history:{push:s}}=a,{count:r,page:l,perPage:o,query:i}=e;return{isCompact:!0,itemCount:r,page:l,perPage:o,variant:n.PaginationVariant.top,onSetPage:(e,t,a)=>{s(p(Object.assign(Object.assign(Object.assign({},d),i),{offset:g(t,a)})))},onPerPageSelect:(e,t)=>{s(p(Object.assign(Object.assign(Object.assign({},d),i),{limit:t,offset:0})))}}}))(n.Pagination)),qe=()=>r().createElement(we,null,r().createElement(n.ToolbarContent,null,r().createElement(n.ToolbarGroup,{variant:"filter-group"},r().createElement(n.ToolbarItem,null,r().createElement(Ve,null)),r().createElement(n.ToolbarItem,null,r().createElement(Fe,null),r().createElement(ze,null),r().createElement(Re,null)),r().createElement(n.ToolbarItem,null,r().createElement(de,null))),r().createElement(n.ToolbarItem,{variant:n.ToolbarItemVariant.pagination},r().createElement(Ae,null))));class Ge extends r().Component{componentDidMount(){this.props.getCostModelsData(this.props.search.slice(1)),this.props.getRbacData(),this.props.getMetricsData()}componentDidUpdate(e){e.search!==this.props.search&&this.props.getCostModelsData(this.props.search.slice(1))}render(){return r().createElement(r().Fragment,null,r().createElement(n.PageSection,{variant:n.PageSectionVariants.light},r().createElement(Ce,null)),r().createElement(n.PageSection,{isFilled:!0},r().createElement(pe,null),r().createElement(he,null),r().createElement(qe,null),r().createElement(xe,null),r().createElement(h,null)))}}const _e=(0,l.connect)(((e,t)=>({search:t.location.search})),(e=>({getCostModelsData:t=>o.F0.fetchCostModels(t)(e),getRbacData:()=>c.O9.fetchRbac()(e),getMetricsData:()=>i.Wg.fetchMetrics()(e)})))(Ge)}}]);
//# sourceMappingURL=a8fb1885b864f288d129.bundle.js.map