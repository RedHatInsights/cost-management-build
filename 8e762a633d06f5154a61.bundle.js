/*! For license information please see 8e762a633d06f5154a61.bundle.js.LICENSE.txt */
(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[612],{8679:(e,t,n)=>{"use strict";var a=n(59864),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function i(e){return a.isMemo(e)?s:o[e.$$typeof]||r}o[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[a.Memo]=s;var c=Object.defineProperty,m=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,a){if("string"!=typeof n){if(g){var r=d(n);r&&r!==g&&e(t,r,a)}var s=m(n);u&&(s=s.concat(u(n)));for(var o=i(t),h=i(n),_=0;_<s.length;++_){var E=s[_];if(!(l[E]||a&&a[E]||h&&h[E]||o&&o[E])){var y=p(n,E);try{c(t,E,y)}catch(e){}}}}return t}},41269:(e,t)=>{var n;!function(){var a={months:["January","February","March","April","May","June","July","August","September","October","November","December"],toUTC:function(e){var t=e?new Date(e):new Date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},monthName:function(e){var t;return t="number"==typeof e?e:new Date(e).getMonth()+1,a.months[t-1]},relativeTime:function(e,t){var n,a,r,l,s,o,i=[];if("number"==typeof e?n=e:(l=new Date(e).getTime(),n=((new Date).getTime()-l)/1e3*-1),t||(t={}),t.futureSuffix||(t.futureSuffix="from now"),t.pastSuffix||(t.pastSuffix="ago"),t.presentText||(t.presentText="now"),t.returnObject||(t.returnObject=!1),s=n<0,n=Math.abs(n),a={seconds:Math.floor(n%31536e3%86400%3600%60),minutes:Math.floor(n%31536e3%86400%3600/60),hours:Math.floor(n%31536e3%86400/3600),days:Math.floor(n%31536e3/86400),years:Math.floor(n/31536e3),past:s},t.returnObject)return a;if(0===n)return t.presentText;function c(e,n){o&&(o=t.allUnits,i.push(e+" "+n+(e>1?"s":"")))}return r=a.past?t.pastSuffix:t.futureSuffix,o=!0,a.years&&c(a.years,"year"),a.days&&c(a.days,"day"),a.hours&&c(a.hours,"hour"),a.minutes&&c(a.minutes,"minute"),a.seconds&&c(a.seconds,"second"),i.join(", ")+" "+r},prettyPrint:function(e,t){var n,a,r,l,s,o,i,c,m;return e?"number"==typeof e&&(e=(new Date).setSeconds(e)):e=new Date,t||(t={}),t.showTime||(t.showTime=!1),l=(r=(n=new Date(e)).getDate())>3&&r<21?r+"th":r%10==1?r+"st":r%10==2?r+"nd":r%10==3?r+"rd":r+"th",s=n.getFullYear(),a=this.monthName(n.getMonth()+1)+" "+l+", "+s,m=(i=n.getHours())>=12?"pm":"am",o=(i=i%12?i%12:12)+":"+(c=(c=n.getMinutes())<10?"0"+c:c)+" "+m,t.showTime?a+" at "+o:a}};if(!e.exports)return!(void 0!==(n=function(){return a}.apply(t,[]))&&(e.exports=n));e.exports=a}()},69921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,i=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,m=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,_=n?Symbol.for("react.lazy"):60116,E=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,f=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case m:case u:case l:case o:case s:case d:return e;default:switch(e=e&&e.$$typeof){case c:case p:case _:case h:case i:return e;default:return t}}case r:return t}}}function C(e){return S(e)===u}t.AsyncMode=m,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=i,t.Element=a,t.ForwardRef=p,t.Fragment=l,t.Lazy=_,t.Memo=h,t.Portal=r,t.Profiler=o,t.StrictMode=s,t.Suspense=d,t.isAsyncMode=function(e){return C(e)||S(e)===m},t.isConcurrentMode=C,t.isContextConsumer=function(e){return S(e)===c},t.isContextProvider=function(e){return S(e)===i},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return S(e)===p},t.isFragment=function(e){return S(e)===l},t.isLazy=function(e){return S(e)===_},t.isMemo=function(e){return S(e)===h},t.isPortal=function(e){return S(e)===r},t.isProfiler=function(e){return S(e)===o},t.isStrictMode=function(e){return S(e)===s},t.isSuspense=function(e){return S(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===l||e===u||e===o||e===s||e===d||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===_||e.$$typeof===h||e.$$typeof===i||e.$$typeof===c||e.$$typeof===p||e.$$typeof===y||e.$$typeof===f||e.$$typeof===b||e.$$typeof===E)},t.typeOf=S},59864:(e,t,n)=>{"use strict";e.exports=n(69921)},27753:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ge});var a=n(489),r=n(97522),l=n.n(r),s=n(43476),o=n(87932),i=n(99627),c=n(46462),m=n(16530),u=n(62691);const p={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function d(e){return Object.keys(e).reduce(((t,n)=>null===e[n]?t:""===t?`?${n}=${e[n]}`:`${t}&${n}=${e[n]}`),"")}function g(e,t){return(e-1)*t}Object.keys(p);const h=(0,m.withRouter)((0,s.connect)((e=>{const{count:t,page:n,perPage:a}=o.E6.pagination(e);return{query:o.E6.query(e),count:t,page:n,perPage:a}}),void 0,((e,t,n)=>{const{history:{push:r}}=n,{count:l,page:s,perPage:o,query:i}=e;return{itemCount:l,page:s,perPage:o,variant:a.PaginationVariant.bottom,onSetPage:(e,t,n)=>{r(d(Object.assign(Object.assign(Object.assign({},p),i),{offset:g(t,n)})))},onPerPageSelect:(e,t)=>{r(d(Object.assign(Object.assign(Object.assign({},p),i),{limit:t,offset:0})))}}}))((function(e){const{variant:t,itemCount:n,page:r,perPage:s,onSetPage:o,onPerPageSelect:i}=e;return l().createElement(a.Toolbar,null,l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},l().createElement(a.Pagination,{onPerPageSelect:i,onSetPage:o,variant:t,itemCount:n,page:r,perPage:s}))))})));var _=n(20546),E=n(19694),y=n(6813),f=n(91768),b=n(94377),S=n(901),C=n(5144);const v=l().createContext({metricsHash:{},step:1,type:"",name:"",dirtyName:!1,markup:"",description:"",error:null,apiError:null,sources:[],onTypeChange:e=>null,onNameChange:e=>null,onDescChange:e=>null,onMarkupChange:e=>null,onSourceSelect:(...e)=>null,setSources:e=>null,dataFetched:!1,loading:!1,filterName:"",onFilterChange:e=>null,query:{},clearQuery:()=>null,total:0,page:1,perPage:10,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,tiers:[],goToAddPL:e=>null,submitTiers:e=>null,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},fetchSources:(e,t,n,a)=>null,createError:null,createSuccess:!1,onClose:()=>null,createProcess:!1});var T=n(88485),P=n(51508);const w={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"}},x=(0,f.Z)()((({t:e})=>l().createElement(v.Consumer,null,(({name:t,dirtyName:n,description:r,type:s,onNameChange:o,onDescChange:i,onTypeChange:c})=>l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:"xl"},e("cost_models_wizard.general_info.title"))),l().createElement(a.StackItem,null,l().createElement("a",{href:e("docs.config_cost_models"),rel:"noreferrer",target:"_blank"},e("learn_more"))),l().createElement(a.StackItem,null,l().createElement(P.l,{style:w.form},l().createElement(a.FormGroup,{helperTextInvalid:e(se(t)),validated:null!==se(t)&&n?"error":"default",label:e("name"),isRequired:!0,fieldId:"name"},l().createElement(a.TextInput,{validated:null!==se(t)&&n?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:t,onChange:o})),l().createElement(a.FormGroup,{helperTextInvalid:e(oe(r)),validated:null===oe(r)?"default":"error",label:e("description"),fieldId:"description"},l().createElement(a.TextArea,{style:w.textArea,type:"text",id:"description",name:"description",value:r,validated:null===oe(r)?"default":"error",onChange:i})),l().createElement(a.FormGroup,{label:e("cost_models_wizard.general_info.source_type_label"),isRequired:!0,fieldId:"source-type"},l().createElement(a.FormSelect,{id:"source-type",value:s,onChange:c},l().createElement(a.FormSelectOption,{value:"",label:e("cost_models_wizard.general_info.source_type_empty_value_label")}),l().createElement(a.FormSelectOption,{value:"AWS",label:e("onboarding.type_options.aws")}),l().createElement(a.FormSelectOption,{value:"AZURE",label:e("onboarding.type_options.azure")}),l().createElement(a.FormSelectOption,{value:"GCP",label:e("onboarding.type_options.gcp")}),l().createElement(a.FormSelectOption,{value:"OCP",label:e("onboarding.type_options.ocp")}))))))))));class k extends l().Component{constructor(){super(...arguments),this.state={isValid:!0}}render(){const{t:e}=this.props,{isValid:t}=this.state;return l().createElement(v.Consumer,null,(({onMarkupChange:n,markup:r})=>l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:"xl"},e("cost_models_wizard.markup.title"))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h6},e("cost_models_wizard.markup.sub_title")))),l().createElement(a.StackItem,null,l().createElement(P.l,null,l().createElement(a.FormGroup,{label:e("cost_models_wizard.markup.markup_label"),fieldId:"markup",helperTextInvalid:e("cost_models_wizard.markup.invalid_markup_text"),validated:t?"default":"error"},l().createElement(a.InputGroup,{style:{width:"150px"}},l().createElement(a.TextInput,{type:"text",id:"markup",name:"markup",value:r,onBlur:()=>{this.setState({isValid:!isNaN(Number(r))})},onChange:e=>{n(e),"-"!==e&&this.setState({isValid:!isNaN(Number(e))})},validated:t?"default":"error"}),l().createElement(a.InputGroupText,{style:{borderLeft:"0"}},"%"))))))))}}const O=(0,f.Z)()(k);var z=n(52591),I=n(26793);const D=({submitRate:e,cancel:t,metricsHash:n})=>{const{tiers:r}=l().useContext(v),{t:s}=(0,I.$)(),o=(0,z.bF)(n,void 0,r),i=l().useMemo((()=>(0,z.Cw)(o)),[o.errors,o.rateKind]);return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:"xl"},s("cost_models_wizard.price_list.title"))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h6},s("cost_models_wizard.price_list.sub_title_add")))),l().createElement(a.StackItem,null,l().createElement(a.Form,null,l().createElement(z.HJ,{metricsHash:n,rateFormData:o}))),l().createElement(a.StackItem,null,l().createElement(a.ActionGroup,null,l().createElement(a.Button,{variant:a.ButtonVariant.primary,isDisabled:!i,onClick:()=>e(o)},s("cost_models_wizard.price_list.create_rate")),l().createElement(a.Button,{variant:a.ButtonVariant.link,onClick:t},s("cost_models_wizard.price_list.cancel")))))};var j=n(20777),F=n(55483),N=n(77656),L=n(80963),M=n(66555),$=n(39574),B=n(85218),V=n(60477),q=n(89116);const A=({t:e})=>l().createElement(a.Bullseye,null,l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:j.wl}),l().createElement(a.Title,{headingLevel:"h2",size:"lg"},e("cost_models_wizard.empty_state.title")),l().createElement(a.EmptyStateBody,null,l().createElement(q.c,{i18nKey:"cost_models_wizard.empty_state.desc_create"},l().createElement("strong",null,e("cost_models_wizard.price_list.create_rate"))),l().createElement("br",null),l().createElement(q.c,{i18nKey:"cost_models_wizard.empty_state.desc_skip"},l().createElement("strong",null,e("cost_models_wizard.empty_state.next"))),l().createElement("br",null),l().createElement(q.c,{i18nKey:"cost_models_wizard.empty_state.desc_other_time"}))));class R extends l().Component{constructor(){super(...arguments),this.state={metrics:[],measurements:[]}}render(){const{metricsHash:e,t,addRateAction:n,deleteRateAction:r,items:s}=this.props,o=Object.keys(e).map((e=>({label:e,value:e}))),i=o.reduce(((t,n)=>{const a=Object.keys(e[n.value]).filter((e=>!t.map((e=>e.value)).includes(e))).map((e=>({label:e,value:e})));return[...t,...a]}),[]);return l().createElement(v.Consumer,null,(({priceListPagination:e})=>l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:"xl"},t("cost_models_wizard.price_list.title"))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h6},t("cost_models_wizard.price_list.sub_title_table")))),l().createElement(a.StackItem,null,l().createElement(N.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:c,setSearch:m,onRemove:u,onSelect:p,onClearAll:d})=>{const g=(e.page-1)*e.perPage,h=e.page*e.perPage,_=s.filter((e=>0===c.metrics.length||c.metrics.includes(e.metric.label_metric))).filter((e=>0===c.measurements.length||c.measurements.includes(e.metric.label_measurement))),E=_.slice(g,h);return l().createElement(l().Fragment,null,l().createElement(M.Q,{primary:l().createElement(V.J,{isDisabled:0===s.length,primary:c.primary,setPrimary:e=>m({primary:e}),options:[{label:t("toolbar.pricelist.metric"),value:"metrics"},{label:t("toolbar.pricelist.measurement"),value:"measurements"}]}),selected:c.primary,secondaries:[{component:l().createElement(B.n,{isDisabled:0===s.length,placeholderText:t("toolbar.pricelist.measurement_placeholder"),selections:c.measurements,setSelections:e=>p("measurements",e),options:i}),name:"measurements",onRemove:u,filters:c.measurements},{component:l().createElement(B.n,{isDisabled:0===s.length,placeholderText:t("toolbar.pricelist.metric_placeholder"),selections:c.metrics,setSelections:e=>p("metrics",e),options:o}),name:"metrics",onRemove:u,filters:c.metrics}],button:l().createElement(a.Button,{onClick:n},t("cost_models_wizard.price_list.create_rate")),onClear:d,pagination:l().createElement(a.Pagination,{isCompact:!0,itemCount:_.length,perPage:e.perPage,page:e.page,onSetPage:e.onPageSet,onPerPageSelect:e.onPerPageSet})}),0===E.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&l().createElement(a.Bullseye,null,l().createElement(F.c,{filter:t("cost_models_wizard.price_list.toolbar_top_results_aria_label")})),0===E.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&l().createElement(A,{t}),E.length>0&&l().createElement($.y,{isCompact:!0,t,tiers:E,actions:[{title:"Remove",onClick:(e,t,n)=>{r(n.data.index+g)}}]}),l().createElement(L.Z,{isCompact:!0,itemCount:_.length,perPage:e.perPage,page:e.page,onSetPage:e.onPageSet,onPerPageSelect:e.onPerPageSet}))}))))))}}const W=(0,s.connect)((0,b.X1)((e=>({metricsHash:i.qw.metrics(e)}))))((0,f.Z)()(R)),G=()=>{const{metricsHash:e,tiers:t,submitTiers:n,goToAddPL:a}=l().useContext(v),[r,s]=l().useState("table");return"table"===r?l().createElement(W,{items:t,deleteRateAction:e=>{const r=[...t.slice(0,e),...t.slice(e+1)];n(r),0===r.length&&(s("form"),a(!1))},addRateAction:()=>{s("form"),a(!1)}}):"form"===r?l().createElement(D,{metricsHash:e,submitRate:r=>{var l;l=(0,z.Nl)(r,e),n([...t,l]),s("table"),a(!0)},cancel:()=>{s("table"),a(!0)}}):null};var Z=n(78091),H=n(39887);const U=(0,f.Z)()((({t:e})=>l().createElement(v.Consumer,null,(({onClose:t,name:n})=>l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:Z.xX,color:"green"}),l().createElement(a.Title,{headingLevel:"h2",size:"lg"},e("cost_models_wizard.review.title_success")),l().createElement(a.EmptyStateBody,null,e("cost_models_wizard.review.sub_title_success",{cost_model:n})),l().createElement(a.EmptyStateSecondaryActions,null,l().createElement(a.Button,{variant:"link",onClick:t},e("cost_models_wizard.review.close_button")))))))),K=(0,f.Z)()((({t:e})=>l().createElement(v.Consumer,null,(({name:t,description:n,type:r,markup:s,sources:o,tiers:i,createError:c})=>l().createElement(l().Fragment,null,c&&l().createElement(a.Alert,{variant:"danger",title:`${c}`}),l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:"xl"},e("cost_models_wizard.review.title_details"))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h6},l().createElement(q.c,{i18nKey:"cost_models_wizard.review.sub_title_details"},l().createElement("strong",null,e("cost_models_wizard.review.create_button")),l().createElement("strong",null,e("cost_models_wizard.review.back_button")))))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.TextList,{component:a.TextListVariants.dl},l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e("name")),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},t),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e("description")),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},n),"OCP"===r&&l().createElement(l().Fragment,null,l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e("cost_models_wizard.steps.price_list")),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},i.length>0?l().createElement($.y,{t:e,tiers:i}):e("cost_models_wizard.no_rates"))),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e("cost_models_wizard.review.markup")),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},s,"%"),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e("cost_models_wizard.review.sources")," ",o.find((e=>e.selected&&Boolean(e.costmodel)))&&l().createElement(H.a,{text:e("cost_models_wizard.warning_override_sources")})),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},o.filter((e=>e.selected)).map((e=>e.name)).join(", "))))))))))),J=()=>l().createElement(v.Consumer,null,(({createSuccess:e})=>e?l().createElement(U,null):l().createElement(K,null)));var Q=n(52413),X=n(27916),Y=n(10209),ee=n(48794);const te=({id:e,placeholder:t="",value:n,onChange:r,onSearch:s})=>l().createElement(a.InputGroup,null,l().createElement(a.TextInput,{value:n,placeholder:t,id:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==n&&s(e)}}),l().createElement(a.InputGroupText,{style:{borderLeft:"0"}},l().createElement(ee.W1,null))),ne=(0,f.Z)()((({t:e,filterInputProps:t,paginationProps:n,filter:r})=>l().createElement(a.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:r.onClearAll},l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarItem,{variant:"search-filter"},l().createElement(a.ToolbarFilter,{deleteChip:r.onRemove,chips:r.query.name,categoryName:"name"},l().createElement(te,Object.assign({placeholder:e("cost_models_wizard.source_table.filter_placeholder")},t)))),l().createElement(a.ToolbarItem,{variant:"pagination"},l().createElement(a.Pagination,{isCompact:n.isCompact,itemCount:n.itemCount,page:n.page,perPage:n.perPage,onSetPage:n.onSetPage,onPerPageSelect:n.onPerPageSelect})))))),ae=(0,f.Z)()((({t:e})=>l().createElement(v.Consumer,null,(({loading:t,onSourceSelect:n,sources:r,perPage:s,page:o,type:i,query:c,fetchSources:m,filterName:p,onFilterChange:d})=>{const g="AZURE"===i?"Azure":i;return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:"xl"},e("cost_models_wizard.source.title"))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h6},e("cost_models_wizard.source.sub_title")))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h3},e("cost_models_wizard.source.caption",{type:e(`source_details.type.${i}`)})))),l().createElement(a.StackItem,null,l().createElement(ne,{filter:{onRemove:(e,t)=>m(g,(0,Y.fg)(c)(e,t),1,s),onClearAll:()=>m(g,{},1,s),query:c},filterInputProps:{id:"assign-source-search-input",value:p,onChange:d,onSearch:()=>{m(g,(0,Y.xZ)(c)("name",p),1,s)}},paginationProps:{isCompact:!0,itemCount:r.length,perPage:s,page:o,onSetPage:(e,t)=>{m(g,c,t,s)},onPerPageSelect:(e,t)=>m(g,c,1,t)}}),t?l().createElement(Q.G,null):l().createElement(u.Table,{"aria-label":e("cost_models_wizard.source_table.table_aria_label"),cells:["",e("name"),e("cost_models_wizard.source_table.column_cost_model")],rows:r.map(((t,r)=>({cells:[l().createElement(l().Fragment,null,l().createElement(a.Checkbox,{onChange:e=>{n(r,e)},id:t.name,key:t.name,isChecked:t.selected,isDisabled:Boolean(t.costmodel)})),l().createElement(l().Fragment,null,t.name," ",Boolean(t.costmodel)&&l().createElement(H.a,{key:`wrng-${t.name}`,text:e("cost_models_wizard.warning_source",{cost_model:t.costmodel})})),t.costmodel?t.costmodel:""],selected:t.selected})))},l().createElement(u.TableHeader,null),l().createElement(u.TableBody,null)),l().createElement(L.N,{"aria-label":"cost_models_wizard.source_table.pagination_section_aria_label",itemCount:r.length,perPage:s,page:o,onSetPage:(e,t)=>{m(g,c,t,s)},onPerPageSelect:(e,t)=>m(g,c,1,t)})))}))));class re extends l().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:n,perPage:a,fetchSources:r}=this.context;r("AZURE"===e?"Azure":e,t,n,a)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?l().createElement(Q.G,null):this.context.apiError?l().createElement(X.Bu,{onRefresh:this.fetchData}):l().createElement(ae,null)}render(){return this.renderContent()}}re.contextType=v;const le=re,se=e=>0===e.length?"cost_models.required_field":e.length>100?"cost_models_wizard.general_info.name_too_long":null,oe=e=>e.length>500?"cost_models.description_too_long":null,ie=e=>({"":[{id:1,name:e("cost_models_wizard.steps.general_info"),component:l().createElement(x,null)}],AZURE:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:l().createElement(x,null)},{id:2,name:e("cost_models_wizard.steps.markup"),component:l().createElement(O,null)},{id:3,name:e("cost_models_wizard.steps.sources"),component:l().createElement(le,null)},{id:4,name:e("cost_models_wizard.steps.review"),component:l().createElement(J,null)}],AWS:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:l().createElement(x,null)},{id:2,name:e("cost_models_wizard.steps.markup"),component:l().createElement(O,null)},{id:3,name:e("cost_models_wizard.steps.sources"),component:l().createElement(le,null)},{id:4,name:e("cost_models_wizard.steps.review"),component:l().createElement(J,null)}],GCP:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:l().createElement(x,null)},{id:2,name:e("cost_models_wizard.steps.markup"),component:l().createElement(O,null)},{id:3,name:e("cost_models_wizard.steps.sources"),component:l().createElement(le,null)},{id:4,name:e("cost_models_wizard.steps.review"),component:l().createElement(J,null)}],OCP:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:l().createElement(x,null)},{id:2,name:e("cost_models_wizard.steps.price_list"),component:l().createElement(G,null)},{id:3,name:e("cost_models_wizard.steps.markup"),component:l().createElement(O,null)},{id:4,name:e("cost_models_wizard.steps.sources"),component:l().createElement(le,null)},{id:5,name:e("cost_models_wizard.steps.review"),component:l().createElement(J,null)}]}),ce={"":[()=>!1],AWS:[e=>null===se(e.name)&&null===oe(e.description)&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0],AZURE:[e=>null===se(e.name)&&null===oe(e.description)&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0],GCP:[e=>null===se(e.name)&&null===oe(e.description)&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0],OCP:[e=>null===se(e.name)&&null===oe(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>""!==e.markup&&!isNaN(Number(e.markup)),()=>!0,()=>!0]},me=(0,f.Z)()((({t:e,isProcess:t,isSuccess:n,closeFnc:r,isOpen:s,onMove:o,validators:i,steps:c,current:m=1,context:u,setError:p,setSuccess:d,updateCostModel:g})=>{const h=c.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:m>t})));h[m-1].enableNext=i[m-1](u);const _="OCP"===u.type&&2===m&&!i[m-1](u);return m===c.length&&""!==u.type&&(h[m-1].nextButtonText=e("cost_models_wizard.review.create_button")),s?l().createElement(a.Wizard,{isOpen:!0,title:e("cost_models_wizard.title"),description:e("cost_models_wizard.description"),steps:h,startAtStep:m,onNext:o,onBack:o,onGoToStep:o,onClose:r,footer:n||t||_?l().createElement("div",null):null,onSave:()=>{const{name:e,type:t,tiers:n,markup:a,description:r,sources:l}=u;(0,y.Rl)({name:e,source_type:t,description:r,rates:n,markup:{value:a,unit:"percent"},source_uuids:l.map((e=>e.uuid))}).then((()=>{d(),g()})).catch((e=>p((0,T.L)(e))))}}):null})),ue={step:1,type:"",name:"",dirtyName:!1,description:"",markup:"0.00",filterName:"",sources:[],error:null,apiError:null,dataFetched:!1,query:{},page:1,perPage:10,total:0,loading:!1,tiers:[],priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},createError:null,createSuccess:!1,createProcess:!1,isDialogOpen:!1};class pe extends l().Component{constructor(){super(...arguments),this.state=ue}render(){const{metricsHash:e,t}=this.props,n=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},r=l().createElement(a.Button,{key:"cancel",variant:"link",onClick:n},t("cost_models_wizard.confirm.cancel")),s=l().createElement(a.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},ue))},t("cost_models_wizard.confirm.ok"));return l().createElement(v.Provider,{value:{metricsHash:e,step:this.state.step,type:this.state.type,onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),name:this.state.name,dirtyName:this.state.dirtyName,onNameChange:e=>this.setState({name:e,dirtyName:!0}),description:this.state.description,onDescChange:e=>this.setState({description:e}),markup:this.state.markup,onMarkupChange:e=>{const t=Number(e),n=e.split("").findIndex((e=>"."===e));!isNaN(t)&&n>-1&&e.length-n-1>2?this.setState({markup:(0,S.Bw)(t,"markup",{fractionDigits:2})}):this.setState({markup:e})},error:this.state.error,apiError:this.state.apiError,sources:this.state.sources,dataFetched:this.state.dataFetched,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),onSourceSelect:(e,t)=>{if(-1===e)return this.setState({sources:this.state.sources.map((e=>Object.assign(Object.assign({},e),{selected:t})))});const n=[...this.state.sources];return n[e].selected=t,this.setState({sources:n})},total:this.state.total,page:this.state.page,onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),perPage:this.state.perPage,filterName:this.state.filterName,onFilterChange:e=>this.setState({filterName:e}),query:this.state.query,clearQuery:()=>this.setState({query:{}}),loading:this.state.loading,tiers:this.state.tiers,submitTiers:e=>{this.setState({tiers:e})},priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),fetchSources:(e,t,n,a)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:n,query:a})=>{const r=(t-1)*n,l=n,s=Object.keys(a).reduce(((e,t)=>e?`${e}&${t}=${a[t]}`:`${t}=${a[t]}`),"");return(0,C.l)(`type=${e}&limit=${l}&offset=${r}&${s}`).then((e=>e.data.data)).then((e=>e.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),selected:!1})))))})({type:e,query:t,page:n,perPage:a}).then((e=>this.setState({sources:e,query:t,page:n,perPage:a,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},createSuccess:this.state.createSuccess,createError:this.state.createError,createProcess:this.state.createProcess,onClose:()=>this.setState(Object.assign({},ue),this.props.closeWizard)}},l().createElement(me,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},ue),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:ie(t)[this.state.type],current:this.state.step,validators:ce[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,description:this.state.description,markup:this.state.markup,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:this.state.sources.filter((e=>e.selected))}}),l().createElement(a.Modal,{"aria-label":t("cost_models_wizard.confirm.title"),isOpen:this.state.isDialogOpen,header:l().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},l().createElement(E.LP,{color:"orange"})," ",t("cost_models_wizard.confirm.title")),onClose:n,actions:[s,r],variant:"small"},t("cost_models_wizard.confirm.message")))}}const de=(0,s.connect)((0,b.X1)((e=>({metricsHash:i.qw.metrics(e)}))),{fetch:o.F0.fetchCostModels})((0,f.Z)()(pe)),ge=(0,f.Z)()((0,s.connect)((e=>({canWrite:c.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,n)=>{const{t:r}=n,{canWrite:s}=e,{openWizard:o}=t;return{isDisabled:!s,tooltip:r("cost_models.read_only_tooltip"),children:l().createElement(a.Button,{isDisabled:!s,onClick:o},r("page_cost_models.create_cost_model"))}}))(_.j)),he=(0,s.connect)((e=>({isOpen:o.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:n}=e,{openWizard:a,closeWizard:r}=t;return{isOpen:n,openWizard:a,closeWizard:r}}))(de);function _e({head:e,body:t,sources:n}){return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,e))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,t),l().createElement(a.TextList,{component:a.TextListVariants.ol},n.map((e=>l().createElement(a.TextListItem,{key:e},e)))))))}const Ee=(0,f.Z)()((0,s.connect)((e=>({isOpen:o.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:o.E6.deleteProcessing(e),deleteError:o.E6.deleteError(e),dialogData:o.E6.dialogData(e)})),(e=>({closeDialog:()=>e(o.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>o.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,n)=>{const{t:r}=n,s=(o=e.isLoading,i=e.isOpen,c=e.deleteError,i?o?"loading":c?"failure":"open":"close");var o,i,c;const m=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,u=m?m.name:"",p=m?m.sources.map((e=>e.name)):[],d=m?m.uuid:"",g=function({status:e,deleteText:t,deleteAction:n,cancelText:r,cancelAction:s,sourcesNo:o}){let i=[];return"loading"===e&&(i=[l().createElement(a.Button,{key:"pending_delete",variant:a.ButtonVariant.danger,isDisabled:!0},t),l().createElement(a.Button,{key:"pending_cancel",variant:a.ButtonVariant.link,isDisabled:!0},r)]),["failure","open"].includes(e)&&o>0&&(i=[l().createElement(a.Button,{key:"sources_cancel",variant:a.ButtonVariant.link,onClick:s},r)]),["failure","open"].includes(e)&&0===o&&(i=[l().createElement(a.Button,{key:"delete",variant:a.ButtonVariant.danger,onClick:n},t),l().createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:s},r)]),i}({status:s,deleteText:r("page_cost_models.delete_cost_model"),deleteAction:()=>t.deleteCostModel(d),cancelText:r("page_cost_models.cancel"),cancelAction:t.closeDialog,sourcesNo:p.length}),h=function({status:e,sources:t,error:n,cannotDeleteTitle:r,cannotDeleteBody:s,canDeleteBody:o}){return"close"!==e&&t.length>0?l().createElement(_e,{head:r,body:s,sources:t}):"close"!==e&&0===t.length?l().createElement(a.Stack,{hasGutter:!0},"failure"===e?l().createElement(a.StackItem,null,l().createElement(a.Alert,{variant:a.AlertVariant.danger,title:n})):null,l().createElement(a.StackItem,null,o)):void 0}({status:s,sources:p,error:e.deleteError,cannotDeleteTitle:r("page_cost_models.cannot_delete_description_head"),cannotDeleteBody:r("page_cost_models.cannot_delete_description_body",{name:u}),canDeleteBody:r("page_cost_models.can_delete_description",{name:u})});return{actions:g,isOpen:"close"!==s,variant:a.ModalVariant.small,"aria-label":"delete-cost-model",title:r("page_cost_models.delete_title"),titleIconVariant:"warning",onClose:t.closeDialog,children:h}}))(a.Modal));var ye=n(55795);const fe=(0,f.Z)()((0,s.connect)(((e,t)=>{const{t:n}=t;return{children:l().createElement(l().Fragment,null,n("page_cost_models.header_title"),l().createElement(a.Popover,{"aria-label":"page header popver",bodyContent:l().createElement(q.c,{i18nKey:"page_cost_models.header_popover"},l().createElement("a",{href:n("docs.using_cost_models"),rel:"noreferrer",target:"_blank"})),enableFlip:!0},l().createElement(a.Button,{variant:a.ButtonVariant.plain},l().createElement(ye.iC,null))))}}))((function({children:e}){return l().createElement(a.TextContent,null,l().createElement(a.Title,{headingLevel:"h1",size:"2xl"},e))})));var be=n(20167),Se=n(41269),Ce=n(8679);function ve(e){return function(t){var n=function(n){return r.createElement(t,Object.assign({},n,e(n)))};return n.displayName="HookIntoProps("+(t.displayName||t.name||"Component")+")",Ce(n,t)}}const Te=function(e){return l().createElement(a.EmptyState,{className:"pf-m-redhat-font"},l().createElement(a.EmptyStateIcon,{icon:e.icon}),l().createElement(a.Title,{headingLevel:"h2",size:"lg"},e.title),l().createElement(a.EmptyStateBody,null,e.description),e.actions?e.actions:null)},Pe=ve((()=>{const{t:e}=(0,I.$)();return{title:e("page_cost_models.no_cost_models_title"),description:e("page_cost_models.no_cost_models_description"),icon:j.wl,actions:l().createElement(l().Fragment,null,l().createElement(ge,null),l().createElement("br",null),l().createElement("br",null),l().createElement("a",{href:e("docs.config_cost_models"),rel:"noreferrer",target:"_blank"},e("page_cost_models.no_cost_models_learn_more")))}}))(Te),we=ve((()=>{const{t:e}=(0,I.$)();return{title:e("empty_filter_state.title"),description:e("empty_filter_state.subtitle"),icon:ee.W1}}))(Te),xe=(0,m.withRouter)((0,f.Z)()((0,s.connect)((e=>({canWrite:c.c5.isCostModelWritePermission(e),query:o.E6.query(e),costData:o.E6.costModels(e),stateName:o.E6.stateName(e)})),(e=>{const t=o.F0.setCostModelDialog;return{openDeleteDialog:n=>e(t({name:"deleteCostModel",isOpen:!0,meta:n}))}}),((e,t,n)=>{const{t:r,history:{push:s}}=n,o=[{title:r("name"),transforms:[u.sortable],data:{orderName:"name"}},{title:r("description")},{title:r("page_cost_models.source_type"),transforms:[u.sortable],data:{orderName:"source_type"}},{title:r("page_cost_models.assigned_sources")},{title:r("page_cost_models.last_change"),transforms:[u.sortable],data:{orderName:"updated_timestamp"}}],i=function(e,t){const{ordering:n}=e;if(null===n)return{};const a="-"===n[0]?n.slice(1):n,r="-"===n[0]?u.SortByDirection.desc:u.SortByDirection.asc;return{index:t.findIndex((e=>e.data&&e.data.orderName===a)),direction:r}}(e.query,o),c=function(e,t,n){return function(a,r,l){const s=e[r]&&e[r].data?e[r].data.orderName:null;null!==s&&(l!==u.SortByDirection.asc?n(d(Object.assign(Object.assign({},t),{ordering:`-${s}`}))):n(d(Object.assign(Object.assign({},t),{ordering:s}))))}}(o,e.query,s);return{"aria-label":"cost-models",cells:o,rows:function(e,t){let n=null;return"loading"===e&&(n=l().createElement(Q.G,null)),"empty"===e&&(n=l().createElement(Pe,null)),"no-match"===e&&(n=l().createElement(we,null)),"failure"===e&&(n=l().createElement(be.Z,null)),null!==n?[{heightAuto:!0,cells:[{props:{colSpan:5},title:l().createElement(a.Bullseye,null," ",n," ")}]}]:t.map((e=>({cells:[{title:l().createElement(m.Link,{to:`/cost-models/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),(0,Se.relativeTime)(e.updated_timestamp)],data:{costModel:e}})))}(e.stateName,e.costData),sortBy:i,onSort:c,actions:(p=e.stateName,g=e.canWrite,h=[{title:r("page_cost_models.delete"),tooltip:r("cost_models.read_only_tooltip"),onClick:(e,n,a)=>{t.openDeleteDialog(a.data)}}],"success"!==p?[]:h.map((e=>Object.assign(Object.assign({},e),{isDisabled:!g,style:g?void 0:{pointerEvents:"auto"},tooltip:g?void 0:e.tooltip}))))};var p,g,h}))((function(e){return l().createElement(a.PageSection,{variant:a.PageSectionVariants.light},l().createElement(u.Table,{gridBreakPoint:u.TableGridBreakpoint.grid2xl,actions:e.actions,actionResolver:e.actionResolver,rows:e.rows,cells:e.cells,onSort:e.onSort,sortBy:e.sortBy,"aria-label":e["aria-label"]},l().createElement(u.TableHeader,null),l().createElement(u.TableBody,null)))})))),ke=({placeholder:e="",value:t,onChange:n,onKeyPress:r})=>l().createElement(a.InputGroup,null,l().createElement(a.TextInput,{value:t,placeholder:e,onChange:n,onKeyPress:e=>{"Enter"===e.key&&""!==t&&r(e)}}),l().createElement(a.InputGroupText,{style:{borderLeft:"0"}},l().createElement(ee.W1,null))),Oe=(e,t,n,a)=>r=>{if("Enter"===r.key&&""!==a.value){const r=a.value;e(d(Object.assign(Object.assign({},n),{[t]:n[t]?`${n[t]},${r}`:r}))),a.setValue("")}},ze=(e,t,n)=>(a,r)=>{const l=n[t]?n[t].split(",").filter((e=>e!==r)):null;e(d(Object.assign(Object.assign({},n),{[t]:null===l||0===l.length?null:l.join(",")})))},Ie=(e,t,n)=>()=>{e(d(Object.assign(Object.assign({},t),{[n]:null})))},De=(0,s.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,n)=>{const{t:a,value:r,setValue:s,history:{push:o}}=n,{filterType:i,query:c}=e,m="description"===i?l().createElement(ke,{placeholder:a("page_cost_models.filter_by_description"),value:r,onChange:e=>s(e),onKeyPress:Oe(o,"description",Object.assign(Object.assign({},p),c),{value:r,setValue:s})}):null,u=c.description?c.description.split(","):[];return{deleteChip:ze(o,"description",Object.assign(Object.assign({},p),c)),deleteChipGroup:Ie(o,Object.assign(Object.assign({},p),c),"description"),chips:u,categoryName:a("description"),children:m}}))(a.ToolbarFilter),je=ve((()=>{const[e,t]=l().useState("");return{value:e,setValue:t}}))((0,m.withRouter)((0,f.Z)()(De))),Fe=(0,s.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,n)=>{const{t:a,setValue:r,value:s,history:{push:o}}=n,{filterType:i,query:c}=e,m="name"===i?l().createElement(ke,{placeholder:a("page_cost_models.filter_by_name"),value:s,onChange:e=>r(e),onKeyPress:Oe(o,"name",Object.assign(Object.assign({},p),c),{value:s,setValue:r})}):null,u=c.name?c.name.split(","):[];return{deleteChip:ze(o,"name",Object.assign(Object.assign({},p),c)),deleteChipGroup:Ie(o,Object.assign(Object.assign({},p),c),"name"),chips:u,categoryName:a("name"),children:m}}))(a.ToolbarFilter),Ne=ve((()=>{const[e,t]=l().useState("");return{value:e,setValue:t}}))((0,m.withRouter)((0,f.Z)()(Fe))),Le=(e,t)=>()=>{t(!1);const n=document.getElementById(e);n&&n.focus()},Me=(0,s.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,n)=>{const r="source-type-filter",{t:s,isOpen:o,setIsOpen:i,history:{push:c}}=n,{filterType:m,query:u}=e,g=e=>c(d(Object.assign(Object.assign(Object.assign({},p),u),{source_type:e}))),h="sourceType"===m?l().createElement(a.Dropdown,{onSelect:Le(r,i),isOpen:o,toggle:l().createElement(a.DropdownToggle,{onToggle:e=>{i(e)},id:r},s("page_cost_models.filter_by_source_type")),dropdownItems:[l().createElement(a.DropdownItem,{key:"aws",component:"button",onClick:()=>g("aws")},s("page_cost_models.aws")),l().createElement(a.DropdownItem,{key:"azure",component:"button",onClick:()=>g("azure")},s("page_cost_models.azure")),l().createElement(a.DropdownItem,{key:"ocp",component:"button",onClick:()=>g("ocp")},s("page_cost_models.ocp"))]}):null,_=u.source_type?[u.source_type]:[];return{deleteChip:Ie(c,Object.assign(Object.assign({},p),u),"source_type"),chips:_,categoryName:s("page_cost_models.source_type"),children:h}}))(a.ToolbarFilter),$e=ve((()=>{const[e,t]=l().useState(!1);return{isOpen:e,setIsOpen:t}}))((0,m.withRouter)((0,f.Z)()(Me))),Be=(0,m.withRouter)((0,s.connect)((e=>({query:o.E6.query(e)})),void 0,((e,t,n)=>{const{history:{push:a}}=n,{query:r}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>a(d(Object.assign(Object.assign(Object.assign({},p),r),{description:null,source_type:null,name:null}))),children:n.children}}))(a.Toolbar));var Ve=n(8755);const qe=ve((()=>{const[e,t]=l().useState(!1);return{isOpen:e,setIsOpen:t}}))((0,f.Z)()((0,s.connect)((e=>({filterType:o.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(o.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,n)=>{const{t:r}=n,s=[l().createElement(a.SelectOption,{key:"name",value:"name"},r("name")),l().createElement(a.SelectOption,{key:"description",value:"description"},r("description")),l().createElement(a.SelectOption,{key:"sourceType",value:"sourceType"},r("page_cost_models.source_type"))];return{variant:a.SelectVariant.single,selections:e.filterType,onToggle:n.setIsOpen,isOpen:n.isOpen,onSelect:(e,a)=>{t.updateFilterType(a),n.setIsOpen(!1)},children:s,toggleIcon:l().createElement(Ve.k1,null)}}))(a.Select))),Ae=(0,m.withRouter)((0,s.connect)((e=>{const{count:t,page:n,perPage:a}=o.E6.pagination(e);return{count:t,page:n,perPage:a,query:o.E6.query(e)}}),void 0,((e,t,n)=>{const{history:{push:r}}=n,{count:l,page:s,perPage:o,query:i}=e;return{isCompact:!0,itemCount:l,page:s,perPage:o,variant:a.PaginationVariant.top,onSetPage:(e,t,n)=>{r(d(Object.assign(Object.assign(Object.assign({},p),i),{offset:g(t,n)})))},onPerPageSelect:(e,t)=>{r(d(Object.assign(Object.assign(Object.assign({},p),i),{limit:t,offset:0})))}}}))(a.Pagination)),Re=()=>l().createElement(Be,null,l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarGroup,{variant:"filter-group"},l().createElement(a.ToolbarItem,null,l().createElement(qe,null)),l().createElement(a.ToolbarItem,null,l().createElement(Ne,null),l().createElement(je,null),l().createElement($e,null)),l().createElement(a.ToolbarItem,null,l().createElement(ge,null))),l().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},l().createElement(Ae,null))));class We extends l().Component{componentDidMount(){this.props.getCostModelsData(this.props.search.slice(1)),this.props.getRbacData(),this.props.getMetricsData()}componentDidUpdate(e){e.search!==this.props.search&&this.props.getCostModelsData(this.props.search.slice(1))}render(){return l().createElement(l().Fragment,null,l().createElement(a.PageSection,{variant:a.PageSectionVariants.light},l().createElement(fe,null)),l().createElement(a.PageSection,{isFilled:!0},l().createElement(he,null),l().createElement(Ee,null),l().createElement(Re,null),l().createElement(xe,null),l().createElement(h,null)))}}const Ge=(0,s.connect)(((e,t)=>({search:t.location.search})),(e=>({getCostModelsData:t=>o.F0.fetchCostModels(t)(e),getRbacData:()=>c.O9.fetchRbac()(e),getMetricsData:()=>i.Wg.fetchMetrics()(e)})))(We)}}]);
//# sourceMappingURL=8e762a633d06f5154a61.bundle.js.map