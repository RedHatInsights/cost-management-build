(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{126:function(e,t,a){"use strict";var r=a(1),n=a.n(r),s=a(0),o=a.n(s),l=a(44),i=a.n(l),c=a(225),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},p=function(e){function t(){var a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=r=u(this,e.call.apply(e,[this].concat(s))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!d(e)){e.preventDefault();var t=r.context.router.history,a=r.props,n=a.replace,s=a.to;n?t.replace(s):t.push(s)}},u(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),a=e.innerRef,r=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["replace","to","innerRef"]);i()(this.context.router,"You should not use <Link> outside a <Router>"),i()(void 0!==t,'You must specify the "to" property');var s=this.context.router.history,o="string"==typeof t?Object(c.b)(t,null,null,s.location):t,l=s.createHref(o);return n.a.createElement("a",m({},r,{onClick:this.handleClick,href:l,ref:a}))},t}(n.a.Component);p.propTypes={onClick:o.a.func,target:o.a.string,replace:o.a.bool,to:o.a.oneOfType([o.a.string,o.a.object]).isRequired,innerRef:o.a.oneOfType([o.a.string,o.a.func])},p.defaultProps={replace:!1},p.contextTypes={router:o.a.shape({history:o.a.shape({push:o.a.func.isRequired,replace:o.a.func.isRequired,createHref:o.a.func.isRequired}).isRequired}).isRequired},t.a=p},589:function(e,t,a){!function(t,r){e.exports=r(a(121),a(0),a(1))}(window,function(e,t,a){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./src/Components/Skeleton/index.js")}({"../../node_modules/@babel/runtime/helpers/defineProperty.js":
/*!*******************************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/defineProperty.js ***!
  \*******************************************************************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},"../../node_modules/@babel/runtime/helpers/extends.js":
/*!************************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/extends.js ***!
  \************************************************************************************************************/
/*! no static exports found */function(e,t){function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},a.apply(this,arguments)}e.exports=a},"../../node_modules/@babel/runtime/helpers/interopRequireDefault.js":
/*!**************************************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!
  \**************************************************************************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},"../../node_modules/@babel/runtime/helpers/interopRequireWildcard.js":
/*!***************************************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/interopRequireWildcard.js ***!
  \***************************************************************************************************************************/
/*! no static exports found */function(e,t,a){var r=a(/*! ../helpers/typeof */"../../node_modules/@babel/runtime/helpers/typeof.js");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,t&&t.set(e,a),a}},"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js":
/*!****************************************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/objectWithoutProperties.js ***!
  \****************************************************************************************************************************/
/*! no static exports found */function(e,t,a){var r=a(/*! ./objectWithoutPropertiesLoose */"../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");e.exports=function(e,t){if(null==e)return{};var a,n,s=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}},"../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":
/*!*********************************************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************************************************************/
/*! no static exports found */function(e,t){e.exports=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}},"../../node_modules/@babel/runtime/helpers/typeof.js":
/*!***********************************************************************************************************!*\
  !*** /home/travis/build/RedHatInsights/frontend-components/node_modules/@babel/runtime/helpers/typeof.js ***!
  \***********************************************************************************************************/
/*! no static exports found */function(e,t){function a(t){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=a=function(e){return typeof e}:e.exports=a=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(t)}e.exports=a},"./src/Components/Skeleton/Skeleton.js":
/*!*********************************************!*\
  !*** ./src/Components/Skeleton/Skeleton.js ***!
  \*********************************************/
/*! no static exports found */function(e,t,a){"use strict";var r=a(/*! @babel/runtime/helpers/interopRequireDefault */"../../node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SkeletonSize=void 0;var n=r(a(/*! @babel/runtime/helpers/extends */"../../node_modules/@babel/runtime/helpers/extends.js")),s=r(a(/*! @babel/runtime/helpers/defineProperty */"../../node_modules/@babel/runtime/helpers/defineProperty.js")),o=r(a(/*! @babel/runtime/helpers/objectWithoutProperties */"../../node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),l=r(a(/*! react */"react")),i=r(a(/*! prop-types */"prop-types")),c=r(a(/*! classnames */"classnames"));a(/*! ./skeleton.scss */"./src/Components/Skeleton/skeleton.scss");var m={xs:"xs",sm:"sm",md:"md",lg:"lg"};t.SkeletonSize=m;var u=function(e){var t=e.size,a=e.isDark,r=e.className,i=(0,o.default)(e,["size","isDark","className"]),m=(0,c.default)("ins-c-skeleton","ins-c-skeleton__".concat(t),(0,s.default)({},"ins-m-dark",a),r);return l.default.createElement("div",(0,n.default)({className:m},i),"Â ")},d=u;t.default=d,u.propTypes={className:i.default.string,size:i.default.oneOf(Object.values(m)),isDark:i.default.bool},u.defaultProps={size:m.md,isDark:!1}},"./src/Components/Skeleton/index.js":
/*!******************************************!*\
  !*** ./src/Components/Skeleton/index.js ***!
  \******************************************/
/*! no static exports found */function(e,t,a){"use strict";var r=a(/*! @babel/runtime/helpers/interopRequireWildcard */"../../node_modules/@babel/runtime/helpers/interopRequireWildcard.js");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Skeleton",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"SkeletonSize",{enumerable:!0,get:function(){return n.SkeletonSize}});var n=r(a(/*! ./Skeleton.js */"./src/Components/Skeleton/Skeleton.js"))},"./src/Components/Skeleton/skeleton.scss":
/*!***********************************************!*\
  !*** ./src/Components/Skeleton/skeleton.scss ***!
  \***********************************************/
/*! no static exports found */function(e,t,a){},classnames:
/*!*****************************!*\
  !*** external "classnames" ***!
  \*****************************/
/*! no static exports found */function(t,a){t.exports=e},"prop-types":
/*!*****************************!*\
  !*** external "prop-types" ***!
  \*****************************/
/*! no static exports found */function(e,a){e.exports=t},react:
/*!************************!*\
  !*** external "react" ***!
  \************************/
/*! no static exports found */function(e,t){e.exports=a}})})},802:function(e,t,a){var r;!function(){var a={months:["January","February","March","April","May","June","July","August","September","October","November","December"],toUTC:function(e){var t=e?new Date(e):new Date;return t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},monthName:function(e){var t;return t="number"==typeof e?e:new Date(e).getMonth()+1,a.months[t-1]},relativeTime:function(e,t){var a,r,n,s,o,l,i=[];if("number"==typeof e?a=e:(s=new Date(e).getTime(),a=((new Date).getTime()-s)/1e3*-1),t||(t={}),t.futureSuffix||(t.futureSuffix="from now"),t.pastSuffix||(t.pastSuffix="ago"),t.presentText||(t.presentText="now"),t.returnObject||(t.returnObject=!1),o=a<0,a=Math.abs(a),r={seconds:Math.floor(a%31536e3%86400%3600%60),minutes:Math.floor(a%31536e3%86400%3600/60),hours:Math.floor(a%31536e3%86400/3600),days:Math.floor(a%31536e3/86400),years:Math.floor(a/31536e3),past:o},t.returnObject)return r;if(0===a)return t.presentText;function c(e,a){l&&(l=t.allUnits,i.push(e+" "+a+(e>1?"s":"")))}return n=r.past?t.pastSuffix:t.futureSuffix,l=!0,r.years&&c(r.years,"year"),r.days&&c(r.days,"day"),r.hours&&c(r.hours,"hour"),r.minutes&&c(r.minutes,"minute"),r.seconds&&c(r.seconds,"second"),i.join(", ")+" "+n},prettyPrint:function(e,t){var a,r,n,s,o,l,i,c,m;return e?"number"==typeof e&&(e=(new Date).setSeconds(e)):e=new Date,t||(t={}),t.showTime||(t.showTime=!1),s=(n=(a=new Date(e)).getDate())>3&&n<21?n+"th":n%10==1?n+"st":n%10==2?n+"nd":n%10==3?n+"rd":n+"th",o=a.getFullYear(),r=this.monthName(a.getMonth()+1)+" "+s+", "+o,i=a.getHours(),c=a.getMinutes(),m=i>=12?"pm":"am",l=(i=i%12?i%12:12)+":"+(c=c<10?"0"+c:c)+" "+m,t.showTime?r+" at "+l:r}};if(void 0===e||!e.exports)return!(void 0!==(r=function(){return a}.apply(t,[]))&&(e.exports=r));e.exports=a}()},988:function(e,t,a){"use strict";a.r(t);var r=a(93),n=a(106),s=a(150),o=a(178),l=a(180),i=a(181),c=a(610),m=a(601),u=a(603),d=a(978),p=a(1032),h=a(1071),g=a(977),b=a(1033),_=a(1025),f=a(156),y=a(1),E=a.n(y),v=a(136),S=a(154);const C=({type:e,page:t,perPage:a,query:r})=>{const n=(t-1)*a,s=a,o=Object.keys(r).reduce((e,t)=>e?`${e}&${t}=${r[t]}`:`${t}=${r[t]}`,"");return Object(S.a)(`type=${e}&limit=${s}&offset=${n}&${o}`).then(e=>e.data.data).then(e=>e.map(e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map(e=>e.name).join(","),selected:!1})))},O=E.a.createContext({metricsHash:{},step:1,type:"",name:"",markup:"",description:"",error:null,apiError:null,sources:[],onTypeChange:e=>null,onNameChange:e=>null,onDescChange:e=>null,onMarkupChange:e=>null,onSourceSelect:(...e)=>null,setSources:e=>null,dataFetched:!1,loading:!1,filterName:"",onFilterChange:e=>null,query:{},clearQuery:()=>null,total:0,page:1,perPage:10,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,tiers:[],goToAddPL:e=>null,submitTiers:e=>null,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},fetchSources:(e,t,a,r)=>null,createError:null,createSuccess:!1,onClose:()=>null,createProcess:!1});var P=a(138),w=a(1055),j=a(1031),x=a(1030),k=a(1072),z=a(1056),T=a(951),D=a(1058),M=a(1054),R=a(654);const F={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"}};var N=Object(v.e)()(({t:e})=>{return E.a.createElement(O.Consumer,null,({name:t,description:a,type:r,onNameChange:n,onDescChange:s,onTypeChange:o})=>E.a.createElement(j.a,{gutter:"md"},E.a.createElement(x.a,null,E.a.createElement(k.a,{size:"xl"},e("cost_models_wizard.general_info.title"))),E.a.createElement(x.a,null,E.a.createElement("a",{href:"https://access.redhat.com/documentation/en-us/openshift_container_platform/4.3/html/using_cost_models/configuring-cost-models",target:"blank"},e("cost_models_wizard.general_info.learn_more"))),E.a.createElement(x.a,null,E.a.createElement(R.a,{style:F.form},E.a.createElement(T.a,{label:e("cost_models_wizard.general_info.name_label"),isRequired:!0,fieldId:"name"},E.a.createElement(D.a,{isRequired:!0,type:"text",id:"name",name:"name",value:t,onChange:n})),E.a.createElement(T.a,{label:e("cost_models_wizard.general_info.description_label"),fieldId:"description"},E.a.createElement(M.a,{style:F.textArea,type:"text",id:"description",name:"description",value:a,onChange:s})),E.a.createElement(T.a,{label:e("cost_models_wizard.general_info.source_type_label"),isRequired:!0,fieldId:"source-type"},E.a.createElement(z.a,{id:"source-type",value:r,onChange:o},E.a.createElement(w.a,{value:"",label:e("cost_models_wizard.general_info.source_type_empty_value_label")}),E.a.createElement(w.a,{value:"AWS",label:e("onboarding.type_options.aws")}),E.a.createElement(w.a,{value:"AZURE",label:e("onboarding.type_options.azure")}),E.a.createElement(w.a,{value:"OCP",label:e("onboarding.type_options.ocp")})))))))}),A=a(1043),q=a(1053),L=a(1057),W=a(1042);var U=Object(v.e)()(class extends E.a.Component{constructor(){super(...arguments),this.state={isValid:!0}}render(){const{t:e}=this.props,{isValid:t}=this.state;return E.a.createElement(O.Consumer,null,({onMarkupChange:a,markup:r})=>E.a.createElement(j.a,{gutter:"md"},E.a.createElement(x.a,null,E.a.createElement(k.a,{size:"xl"},e("cost_models_wizard.markup.title"))),E.a.createElement(x.a,null,E.a.createElement(A.a,null,E.a.createElement(W.a,{component:W.b.h6},e("cost_models_wizard.markup.sub_title")))),E.a.createElement(x.a,null,E.a.createElement(R.a,null,E.a.createElement(T.a,{label:e("cost_models_wizard.markup.markup_label"),fieldId:"markup",helperTextInvalid:e("cost_models_wizard.markup.invalid_markup_text"),isValid:t},E.a.createElement(L.a,{style:{width:"150px"}},E.a.createElement(D.a,{type:"text",id:"markup",name:"markup",value:r,onBlur:()=>{this.setState({isValid:!isNaN(Number(r))})},onChange:e=>{a(e),"-"!==e&&this.setState({isValid:!isNaN(Number(e))})},isValid:t}),E.a.createElement(q.a,{style:{borderLeft:"0"}},"%")))))))}}),$=a(730),B=a(699),H=a(990),I=a(946),V=a(1037),K=a(972),J=a(799),Z=a(1051),Y=a(1050),Q=a(1052),G=a(1018),X=a(731),ee=a(740),te=a(739),ae=a(736),re=a(695);const ne=({t:e})=>E.a.createElement(V.a,null,E.a.createElement(Q.a,null,E.a.createElement(Y.a,{icon:G.a}),E.a.createElement(k.a,{size:"lg"},e("cost_models_wizard.empty_state.title")),E.a.createElement(Z.a,null,E.a.createElement(v.c,{i18nKey:"cost_models_wizard.empty_state.desc_create",add_rate:E.a.createElement("strong",null,e("cost_models_wizard.empty_state.add_rate"))}),E.a.createElement("br",null),E.a.createElement(v.c,{i18nKey:"cost_models_wizard.empty_state.desc_skip",next:E.a.createElement("strong",null,e("cost_models_wizard.empty_state.next"))}),E.a.createElement("br",null),E.a.createElement(v.c,{i18nKey:"cost_models_wizard.empty_state.desc_other_time"}))));var se=Object(n.connect)(Object(s.a)(e=>({metricsHash:l.c.metrics(e),maxRate:l.c.maxRate(e)})))(Object(v.e)()(class extends E.a.Component{constructor(){super(...arguments),this.state={metrics:[],measurements:[]}}render(){const{metricsHash:e,t:t,maxRate:a,addRateAction:r,deleteRateAction:n,items:s}=this.props,o=Object.keys(e).map(e=>({label:t(`cost_models.${e}`),value:e})),l=o.reduce((a,r)=>{const n=Object.keys(e[r.value]).filter(e=>!a.map(e=>e.value).includes(e)).map(e=>({label:t(`toolbar.pricelist.options.${e}`),value:e}));return[...a,...n]},[]);return E.a.createElement(O.Consumer,null,({priceListPagination:e})=>E.a.createElement(j.a,{gutter:"md"},E.a.createElement(x.a,null,E.a.createElement(k.a,{size:J.a.xl},t("cost_models_wizard.price_list.title"))),E.a.createElement(x.a,null,E.a.createElement(A.a,null,E.a.createElement(W.a,{component:W.b.h6},t("cost_models_wizard.price_list.sub_title_table")))),E.a.createElement(x.a,null,E.a.createElement(X.a,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},({search:i,setSearch:m,onRemove:u,onSelect:d,onClearAll:p})=>{const g=(e.page-1)*e.perPage,b=e.page*e.perPage,_=s.filter(e=>0===i.metrics.length||i.metrics.includes(e.metric)).filter(e=>0===i.measurements.length||i.measurements.includes(e.measurement)),f=_.slice(g,b);return E.a.createElement(E.a.Fragment,null,E.a.createElement(ee.a,{primary:E.a.createElement(ae.a,{isDisabled:0===s.length,primary:i.primary,setPrimary:e=>m({primary:e}),options:[{label:t("toolbar.pricelist.metric"),value:"metrics"},{label:t("toolbar.pricelist.measurement"),value:"measurements"}]}),selected:i.primary,secondaries:[{component:E.a.createElement(te.a,{isDisabled:0===s.length,placeholderText:t("toolbar.pricelist.measurement_placeholder"),selections:i.measurements,setSelections:e=>d("measurements",e),options:l}),name:"measurements",onRemove:u,filters:i.measurements},{component:E.a.createElement(te.a,{isDisabled:0===s.length,placeholderText:t("toolbar.pricelist.metric_placeholder"),selections:i.metrics,setSelections:e=>d("metrics",e),options:o}),name:"metrics",onRemove:u,filters:i.metrics}],button:E.a.createElement(h.a,{isDisabled:a===s.length,onClick:r},t("toolbar.pricelist.add_rate")),onClear:p,pagination:E.a.createElement(K.a,{isCompact:!0,itemCount:_.length,perPage:e.perPage,page:e.page,onSetPage:e.onPageSet,onPerPageSelect:e.onPerPageSet,perPageOptions:[{title:"2",value:2},{title:"4",value:4},{title:"6",value:6}]})}),0===f.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&E.a.createElement(V.a,null,E.a.createElement(c.a,{filter:t("cost_models_wizard.price_list.toolbar_top_results_aria_label")})),0===f.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&E.a.createElement(ne,{t:t}),f.length>0&&E.a.createElement(re.a,{isCompact:!0,t:t,tiers:f,actions:[{title:"Remove",onClick:(e,t,a,r)=>{n(f[t])}}]}))}))))}}));const oe=({items:e,sideEffectSubmit:t,sideEffectEnabler:a})=>Object(I.a)({id:"price-list-step-machine",context:{items:e},initial:"table",states:{table:{entry:["enableNext"],on:{ADD_RATE:"form",DELETE_RATE:[{target:"form",actions:["deleteRate"],cond:"isEmpty"},{target:"table",actions:["deleteRate"]}]}},form:{entry:["disableNext"],on:{SUBMIT:{target:"table",actions:["addNewRate"]},CANCEL:"table"}}}},{actions:{enableNext:(e,r)=>{t&&t(e.items),a&&a(!0)},disableNext:(e,t)=>{a&&a(!1)},deleteRate:Object(B.b)({items:(e,t)=>{if("DELETE_RATE"!==t.type)return e.items;const a=e.items.findIndex(e=>e.metric===t.value.metric&&e.measurement===t.value.measurement);return-1===a?e.items:[...e.items.slice(0,a),...e.items.slice(a+1)]}}),addNewRate:Object(B.b)({items:(e,t)=>"SUBMIT"!==t.type?e.items:[...e.items,t.value]})},guards:{isEmpty:(e,t)=>{if("DELETE_RATE"!==t.type)return!1;const{items:a}=e,{measurement:r,metric:n}=t.value;return Boolean(1===a.length&&a[0].metric===n&&a[0].measurement===r)}}});class le extends E.a.Component{constructor(e){super(e),this.state={current:null},this.service=null;const{items:t,setNextButton:a,submit:r}=e,n=oe({items:t,sideEffectSubmit:r,sideEffectEnabler:a});this.state={current:n.initialState},this.service=Object(H.a)(n).onTransition(e=>this.setState({current:e}))}componentDidMount(){this.service.start()}componentWillUnmount(){this.service.stop()}render(){const{metricsHash:e}=this.props,{current:t}=this.state,{send:a}=this.service,r=t.toStrings()[0],{items:n}=t.context;switch(r){case"table":return E.a.createElement(se,{items:n,deleteRateAction:e=>a({type:"DELETE_RATE",value:e}),addRateAction:()=>a("ADD_RATE")});case"form":return E.a.createElement($.b,{metricsHash:e,items:n,submitRate:e=>a({type:"SUBMIT",value:e}),cancel:()=>a("CANCEL")});default:return null}}}var ie=()=>E.a.createElement(O.Consumer,null,({metricsHash:e,goToAddPL:t,submitTiers:a,tiers:r})=>E.a.createElement(le,{items:r,metricsHash:e,setNextButton:e=>t(e),submit:e=>a(e)})),ce=a(1040),me=a(1049),ue=a(965),de=a(1041),pe=a(1015),he=a(694);const ge=Object(v.e)()(({t:e})=>E.a.createElement(O.Consumer,null,({onClose:t,name:a})=>E.a.createElement(Q.a,null,E.a.createElement(Y.a,{icon:pe.a,color:"green"}),E.a.createElement(k.a,{size:J.a.lg},e("cost_models_wizard.review.title_success")),E.a.createElement(Z.a,null,e("cost_models_wizard.review.sub_title_success",{cost_model:a})),E.a.createElement(me.a,null,E.a.createElement(h.a,{variant:"link",onClick:t},e("cost_models_wizard.review.close_button")))))),be=Object(v.e)()(({t:e})=>E.a.createElement(O.Consumer,null,({name:t,description:a,type:r,markup:n,sources:s,tiers:o,createError:l})=>E.a.createElement(E.a.Fragment,null,l&&E.a.createElement(ue.a,{variant:"danger",title:`${l}`}),E.a.createElement(j.a,{gutter:"md"},E.a.createElement(x.a,null,E.a.createElement(k.a,{size:J.a.xl},e("cost_models_wizard.review.title_details"))),E.a.createElement(x.a,null,E.a.createElement(A.a,null,E.a.createElement(W.a,{component:W.b.h6},E.a.createElement(v.c,{i18nKey:"cost_models_wizard.review.sub_title_details",create:E.a.createElement("b",null,e("cost_models_wizard.review.create_button")),back:E.a.createElement("b",null,e("cost_models_wizard.review.back_button"))})))),E.a.createElement(x.a,null,E.a.createElement(A.a,null,E.a.createElement(de.a,{component:de.b.dl},E.a.createElement(ce.a,{component:ce.b.dt},e("cost_models_wizard.general_info.name_label")),E.a.createElement(ce.a,{component:ce.b.dd},t),E.a.createElement(ce.a,{component:ce.b.dt},e("cost_models_wizard.general_info.description_label")),E.a.createElement(ce.a,{component:ce.b.dd},a),"OCP"===r&&E.a.createElement(E.a.Fragment,null,E.a.createElement(ce.a,{component:ce.b.dt},e("cost_models_wizard.steps.price_list")),E.a.createElement(ce.a,{component:ce.b.dd},o.length>0?E.a.createElement(re.a,{t:e,tiers:o}):e("cost_models_wizard.no_rates"))),E.a.createElement(ce.a,{component:ce.b.dt},e("cost_models_wizard.review.markup")),E.a.createElement(ce.a,{component:ce.b.dd},n,"%"),E.a.createElement(ce.a,{component:ce.b.dt},e("cost_models_wizard.review.sources")," ",s.find(e=>e.selected&&Boolean(e.costmodel))&&E.a.createElement(he.a,{text:e("cost_models_wizard.warning_override_sources")})),E.a.createElement(ce.a,{component:ce.b.dd},s.filter(e=>e.selected).map(e=>e.name).join(", ")))))))));var _e=()=>E.a.createElement(O.Consumer,null,({createSuccess:e})=>e?E.a.createElement(ge,null):E.a.createElement(be,null)),fe=a(728),ye=a(797),Ee=a(944),ve=a(958),Se=a(1059),Ce=a(120),Oe=a(966),Pe=a(974),we=a(668),je=a(945),xe=a(1017);const ke=({id:e,placeholder:t="",value:a,onChange:r,onSearch:n})=>E.a.createElement(L.a,null,E.a.createElement(D.a,{value:a,placeholder:t,id:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==a&&n(e)}}),E.a.createElement(q.a,{style:{borderLeft:"0"}},E.a.createElement(xe.a,null))),ze=Object(v.e)()(({t:e,searchInputProps:t,paginationProps:a,filter:r})=>E.a.createElement(ve.a,{id:"assign-sources-toolbar",clearAllFilters:r.onClearAll},E.a.createElement(Ee.a,null,E.a.createElement(fe.a,{variant:"search-filter"},E.a.createElement(je.a,{deleteChip:r.onRemove,chips:r.query.name,categoryName:"name"},E.a.createElement(ke,Object.assign({placeholder:e("cost_models_wizard.source_table.filter_placeholder")},t)))),E.a.createElement(fe.a,{variant:"pagination"},E.a.createElement(K.a,Object.assign({},a))))));var Te=Object(v.e)()(({t:e})=>E.a.createElement(O.Consumer,null,({loading:t,onSourceSelect:a,sources:r,perPage:n,page:s,type:o,query:l,fetchSources:i,filterName:c,onFilterChange:m})=>{const d="AZURE"===o?"Azure":o;return E.a.createElement(j.a,{gutter:"md"},E.a.createElement(x.a,null,E.a.createElement(k.a,{size:"xl"},e(`cost_models_wizard.source.title_${o}`))),E.a.createElement(x.a,null,E.a.createElement(A.a,null,E.a.createElement(W.a,{component:W.b.h6},e("cost_models_wizard.source.sub_title")))),E.a.createElement(x.a,null,E.a.createElement(A.a,null,E.a.createElement(W.a,{component:W.b.h3},e("cost_models_wizard.source.caption",{type:e(`source_details.type.${o}`)})))),E.a.createElement(x.a,null,E.a.createElement(ze,{filter:{onRemove:(e,t)=>i(d,Object(we.c)(l)(e,t),1,n),onClearAll:()=>i(d,{},1,n),query:l},searchInputProps:{id:"assign-source-search-input",value:c,onChange:m,onSearch:e=>{i(d,Object(we.a)(l)("name",c),1,n)}},paginationProps:{isCompact:!0,itemCount:r.length,perPage:n,page:s,onSetPage:(e,t)=>{i(d,l,t,n)},onPerPageSelect:(e,t)=>i(d,l,1,t)}}),t?E.a.createElement(u.a,null):E.a.createElement(Ce.b,{"aria-label":e("cost_models_wizard.source_table.table_aria_label"),cells:["",e("cost_models_wizard.source_table.column_name"),e("cost_models_wizard.source_table.column_cost_model")],rows:r.map((t,r)=>({cells:[E.a.createElement(E.a.Fragment,null,E.a.createElement(Se.a,{onChange:e=>{a(r,e)},id:t.name,key:t.name,isChecked:t.selected,isDisabled:Boolean(t.costmodel)})),E.a.createElement(E.a.Fragment,null,t.name," ",Boolean(t.costmodel)&&E.a.createElement(he.a,{key:`wrng-${t.name}`,text:e("cost_models_wizard.warning_source",{cost_model:t.costmodel})})),Boolean(t.costmodel)?t.costmodel:""],selected:t.selected}))},E.a.createElement(Oe.a,null),E.a.createElement(Pe.a,null)),E.a.createElement(ve.a,{id:"costmodels_wizard_datatoolbar"},E.a.createElement(Ee.a,{"aria-label":e("cost_models_wizard.source_table.pagination_section_aria_label")},E.a.createElement(ye.a,{style:{marginLeft:"auto"}},E.a.createElement(fe.a,null,E.a.createElement(K.a,{isCompact:!0,itemCount:r.length,perPage:n,page:s,onSetPage:(e,t)=>{i(d,l,t,n)},onPerPageSelect:(e,t)=>i(d,l,1,t)})))))))}));class De extends E.a.Component{componentDidMount(){const{dataFetched:e,type:t,query:a,page:r,perPage:n,fetchSources:s}=this.context;e||s("AZURE"===t?"Azure":t,a,r,n)}renderContent(){return this.context.dataFetched?E.a.createElement(Te,null):E.a.createElement(u.a,null)}render(){return this.renderContent()}}De.contextType=O;var Me=De;const Re=e=>({"":[{id:1,name:e("cost_models_wizard.steps.general_info"),component:E.a.createElement(N,null)}],AZURE:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:E.a.createElement(N,null)},{id:2,name:e("cost_models_wizard.steps.markup"),component:E.a.createElement(U,null)},{id:3,name:e("cost_models_wizard.steps.sources"),component:E.a.createElement(Me,null)},{id:4,name:e("cost_models_wizard.steps.review"),component:E.a.createElement(_e,null)}],AWS:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:E.a.createElement(N,null)},{id:2,name:e("cost_models_wizard.steps.markup"),component:E.a.createElement(U,null)},{id:3,name:e("cost_models_wizard.steps.sources"),component:E.a.createElement(Me,null)},{id:4,name:e("cost_models_wizard.steps.review"),component:E.a.createElement(_e,null)}],OCP:[{id:1,name:e("cost_models_wizard.steps.general_info"),component:E.a.createElement(N,null)},{id:2,name:e("cost_models_wizard.steps.price_list"),component:E.a.createElement(ie,null)},{id:3,name:e("cost_models_wizard.steps.markup"),component:E.a.createElement(U,null)},{id:4,name:e("cost_models_wizard.steps.sources"),component:E.a.createElement(Me,null)},{id:5,name:e("cost_models_wizard.steps.review"),component:E.a.createElement(_e,null)}]}),Fe={"":[e=>!1],AWS:[e=>""!==e.name&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),e=>!0,e=>!0],AZURE:[e=>""!==e.name&&""!==e.type,e=>""!==e.markup&&!isNaN(Number(e.markup)),e=>!0,e=>!0],OCP:[e=>""!==e.name&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>""!==e.markup&&!isNaN(Number(e.markup)),e=>!0,e=>!0]},Ne=Object(v.e)()(({t:e,isProcess:t,isSuccess:a,closeFnc:r,isOpen:n,onMove:s,validators:o,steps:l,current:i=1,context:c,setError:m,setSuccess:u,updateCostModel:p,metricsHash:h})=>{const g=l.map((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:i>t}));g[i-1].enableNext=o[i-1](c);const b="OCP"===c.type&&2===i&&!o[i-1](c);return i===l.length&&""!==c.type&&(g[i-1].nextButtonText=e("cost_models_wizard.review.create_button")),n?E.a.createElement(d.a,{isOpen:!0,title:e("cost_models_wizard.title"),description:e("cost_models_wizard.description"),steps:g,startAtStep:i,onNext:s,onBack:s,onClose:r,footer:a||t||b?E.a.createElement("div",null):null,onSave:()=>{const{name:e,type:t,tiers:a,markup:r,description:n,sources:s}=c;Object(f.a)({name:e,source_type:t,description:n,rates:a.map(e=>({metric:{name:h&&h[e.metric]&&h[e.metric][e.measurement].metric},tiered_rates:[{value:e.rate,unit:"USD"}],cost_type:e.costType})),markup:{value:r,unit:"percent"},source_uuids:s.map(e=>e.uuid)}).then(e=>{u(),p()}).catch(e=>m(Object(P.a)(e)))}}):null}),Ae={step:1,type:"",name:"",description:"",markup:"0",filterName:"",sources:[],error:null,apiError:null,dataFetched:!1,query:{},page:1,perPage:10,total:0,loading:!1,tiers:[],priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:4},createError:null,createSuccess:!1,createProcess:!1,isDialogOpen:!1};const qe=Object(n.connect)(Object(s.a)(e=>({metricsHash:l.c.metrics(e)})),{fetch:o.a.fetchCostModels})(Object(v.e)()(class extends E.a.Component{constructor(){super(...arguments),this.state=Ae}render(){const{metricsHash:e,t:t}=this.props,a=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},r=E.a.createElement(h.a,{key:"cancel",variant:"link",onClick:a},t("cost_models_wizard.confirm.cancel")),n=E.a.createElement(h.a,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},Ae))},t("cost_models_wizard.confirm.ok"));return E.a.createElement(O.Provider,{value:{metricsHash:e,step:this.state.step,type:this.state.type,onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),name:this.state.name,onNameChange:e=>this.setState({name:e}),description:this.state.description,onDescChange:e=>this.setState({description:e}),markup:this.state.markup,onMarkupChange:e=>this.setState({markup:e}),error:this.state.error,apiError:this.state.apiError,sources:this.state.sources,dataFetched:this.state.dataFetched,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),onSourceSelect:(e,t)=>{if(-1===e)return this.setState({sources:this.state.sources.map(e=>Object.assign(Object.assign({},e),{selected:t}))});const a=[...this.state.sources];return a[e].selected=t,this.setState({sources:a})},total:this.state.total,page:this.state.page,onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),perPage:this.state.perPage,filterName:this.state.filterName,onFilterChange:e=>this.setState({filterName:e}),query:this.state.query,clearQuery:()=>this.setState({query:{}}),loading:this.state.loading,tiers:this.state.tiers,submitTiers:e=>{this.setState({tiers:e})},priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),fetchSources:(e,t,a,r)=>{this.setState({loading:!0,apiError:null,filterName:""},()=>C({type:e,query:t,page:a,perPage:r}).then(e=>this.setState({sources:e,query:t,page:a,perPage:r,loading:!1,dataFetched:!0,filterName:""})).catch(e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))},createSuccess:this.state.createSuccess,createError:this.state.createError,createProcess:this.state.createProcess,onClose:()=>this.setState(Object.assign({},Ae),this.props.closeWizard)}},E.a.createElement(Ne,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{this.setState({isDialogOpen:!0},this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:Re(t)[this.state.type],current:this.state.step,validators:Fe[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,description:this.state.description,markup:this.state.markup,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:this.state.sources.filter(e=>e.selected)}}),E.a.createElement(g.a,{isFooterLeftAligned:!0,isOpen:this.state.isDialogOpen,isSmall:!0,title:t("cost_models_wizard.confirm.title"),onClose:a,actions:[n,r]},E.a.createElement(b.a,{gutter:"md"},E.a.createElement(p.a,null,E.a.createElement(_.a,{size:"xl",color:"orange"})),E.a.createElement(p.a,{isFilled:!0},E.a.createElement("div",null,t("cost_models_wizard.confirm.message"))))))}}));var Le=a(967),We=a(125),Ue=a(798),$e=a(1023),Be=a(652);const He=({id:e,placeholder:t="",value:a,onChange:r,onSearch:n})=>E.a.createElement(L.a,null,E.a.createElement(D.a,{value:a,placeholder:t,id:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==a&&n(e)}}),E.a.createElement(q.a,{style:{borderLeft:"0"}},E.a.createElement(xe.a,null))),Ie=({options:e,onSelect:t,onToggle:a,selected:r,isExpanded:n})=>E.a.createElement(Le.a,{isExpanded:n,toggleIcon:E.a.createElement($e.a,null),variant:We.e.single,onSelect:t,onToggle:a,selections:r},e.map(e=>E.a.createElement(Ue.a,Object.assign({key:`${e.value}`},e)))),Ve=({t:e,chips:t,buttonProps:a,primaryProps:r,paginationProps:n,secondaries:s,onClearAll:o,onRemove:l})=>E.a.createElement(ve.a,{id:"costmodels-details-datatoolbar",clearAllFilters:o},E.a.createElement(Ee.a,null,E.a.createElement(ye.a,{variant:"filter-group"},E.a.createElement(fe.a,null,E.a.createElement(Ie,{onSelect:r.onSelect,onToggle:r.onToggle,selected:r.selected,isExpanded:r.isExpanded,options:[{value:"name",children:e("toolbar.sources.primary.name"),key:"name"},{value:"source_type",children:e("toolbar.sources.primary.source_type"),key:"source_type"},{value:"description",children:e("toolbar.sources.primary.description"),key:"description"}]})),s.map(a=>E.a.createElement(fe.a,{key:a.name},E.a.createElement(je.a,{deleteChip:l,chips:t[a.name],categoryName:e(`toolbar.sources.primary.${a.name}`)},r.selected===a.name&&a.render())))),E.a.createElement(fe.a,null,E.a.createElement(Be.a,{isDisabled:a.isDisabled},E.a.createElement(h.a,Object.assign({},a)))),E.a.createElement(fe.a,{variant:"pagination",breakpointMods:[{modifier:"align-right"}]},E.a.createElement(K.a,{isCompact:n.isCompact,itemCount:n.itemCount,perPage:n.perPage,page:n.page,onSetPage:n.onSetPage,onPerPageSelect:n.onPerPageSelect}))));const Ke=Object(v.e)()(class extends E.a.Component{constructor(){super(...arguments),this.state={primaryExpanded:!1,primarySelected:"name",secondaryExpanded:!1,secondaryValue:""}}render(){const{t:e,paginationProps:t,buttonProps:a,onSearch:r,query:n}=this.props,{primaryExpanded:s,primarySelected:o,secondaryValue:l,secondaryExpanded:i}=this.state;return E.a.createElement(Ve,{onRemove:(t,a)=>{let s;return t===e("toolbar.sources.primary.name")&&(s=Object(we.c)(n)("name",a)),t===e("toolbar.sources.primary.description")&&(s=Object(we.c)(n)("description",a)),t===e("toolbar.sources.primary.source_type")&&(s=Object(we.d)(n)("source_type",a)),r(s)},onClearAll:()=>r({name:null,description:null,source_type:null}),chips:{name:n.name||[],source_type:Boolean(n.source_type)?[n.source_type]:[],description:n.description||[]},buttonProps:a,paginationProps:t,primaryProps:{isExpanded:s,onSelect:(e,t)=>{this.setState({primaryExpanded:!1,primarySelected:t,secondaryValue:""})},onToggle:e=>this.setState({primaryExpanded:e}),selected:o},secondaries:[{name:"name",render:()=>E.a.createElement(He,{id:"cost-model-details-toolbar-name-search",value:l,onChange:e=>{this.setState({secondaryValue:e})},onSearch:e=>{const t=Object(we.a)(n)(o,l);this.setState({secondaryValue:""},()=>r(t))},placeholder:e("toolbar.filterby",{name:e("toolbar.sources.lower.name")})})},{name:"description",render:()=>E.a.createElement(He,{id:"cost-model-details-toolbar-description-search",value:l,onChange:e=>{this.setState({secondaryValue:e})},onSearch:e=>{const t=Object(we.a)(n)(o,l);this.setState({secondaryValue:""},()=>r(t))},placeholder:e("toolbar.filterby",{name:e("toolbar.sources.lower.description")})})},{name:"source_type",render:()=>E.a.createElement(Ie,{onSelect:(e,t)=>{const a=Object(we.b)(n)(o,t);this.setState({secondaryValue:t,secondaryExpanded:!1},()=>r(a))},onToggle:e=>{this.setState({secondaryExpanded:e})},selected:l,isExpanded:i,options:[{value:"none",children:e("toolbar.sources.secondary.none"),key:"none",isPlaceholder:!0,isDisabled:!0},{value:"AWS",children:e("toolbar.sources.secondary.aws"),key:"aws"},{value:"OCP",children:e("toolbar.sources.secondary.ocp"),key:"ocp"},{value:"AZURE",children:e("toolbar.sources.secondary.azure"),key:"azure"}]})}],t:e})}});var Je=a(667),Ze=a(589);var Ye=({status:e,pagination:t,fetch:a})=>0===e?E.a.createElement("div",{style:{width:"130px"}},E.a.createElement(Ze.Skeleton,{size:Ze.SkeletonSize.md})):E.a.createElement(K.a,{itemCount:t.count,onPerPageSelect:(e,t)=>{a({offset:"0",limit:t.toString()})},onSetPage:(e,r)=>{const n=(r-1)*t.perPage;a({offset:n.toString(),limit:t.perPage.toString()})},page:t.page,perPage:t.perPage,variant:K.b.top}),Qe=a(1045),Ge=a(1044),Xe=a(734),et=a(802),tt=a(126),at=a(666);const rt={updated_timestamp:4,name:0,source_type:2},nt=e=>Object.keys(e).reduce((t,a)=>Object.assign(Object.assign({},t),{[e[a]]:a}),{}),st=(e,t)=>{if(null===e)return{};return{index:t["-"===e[0]?e.slice(1):e],direction:"-"===e[0]?Ce.a.desc:Ce.a.asc}};var ot=Object(n.connect)(Object(s.a)(e=>({isDialogOpen:o.c.isDialogOpen(e)("costmodel"),isDeleteProcessing:o.c.deleteProcessing(e),deleteError:o.c.deleteError(e),current:o.c.selected(e)})),{setDialogOpen:o.a.setCostModelDialog,deleteCostModel:o.a.deleteCostModel})(Object(v.e)()(class extends E.a.Component{constructor(){super(...arguments),this.state={rowId:0}}render(){const{deleteCostModel:e,deleteError:t,isDeleteProcessing:a,showDeleteDialog:r,isDialogOpen:n,setDialogOpen:s,columns:o,rows:l,t:i,setUuid:c,onOrdering:m,sortBy:u,isWritePermissions:d}=this.props,p=l.map(e=>({cells:[{title:E.a.createElement(tt.a,{to:`cost-models/${e.uuid}`},e.name)},e.description,e.source_type,String(e.sources.length),Object(et.relativeTime)(e.updated_timestamp)]})),h=l[this.state.rowId];return E.a.createElement(E.a.Fragment,null,E.a.createElement(at.a,{isSmall:!0,isOpen:n.deleteCostModel,title:i("dialog.delete_cost_model_title",{cost_model:h.name}),onClose:()=>s({name:"deleteCostModel",isOpen:!1}),error:t,isProcessing:a,onProceed:()=>{e(h.uuid,"deleteCostModel")},body:E.a.createElement(E.a.Fragment,null,0===h.sources.length&&i("dialog.delete_cost_model_body_green",{cost_model:h.name}),h.sources.length>0&&E.a.createElement(E.a.Fragment,null,i("dialog.delete_cost_model_body_red",{cost_model:h.name}),E.a.createElement("br",null),E.a.createElement("br",null),i("dialog.delete_cost_model_body_red_costmodel_delete"),E.a.createElement("br",null),E.a.createElement(Qe.a,null,h.sources.map(e=>E.a.createElement(Ge.a,{key:`${e.uuid}`},e.name))))),actionText:0===l[this.state.rowId].sources.length?i("dialog.deleteCostModel"):""}),E.a.createElement("div",{style:Je.a.tableContainer},E.a.createElement(Ce.b,{gridBreakPoint:Ce.d.grid2xl,sortBy:st(u,rt),onSort:(e,t,a)=>{const r=nt(rt)[t];if(null===u)return void m({ordering:r});const n="-"===u[0]?u.slice(1).toLowerCase():u.toLowerCase();m(n!==r?{ordering:r}:{ordering:a===Ce.a.desc?`-${n}`:n})},"aria-label":"cost-models-table",cells:o.map(e=>[i("cost_models_details.table.columns.name"),i("cost_models_details.table.columns.source_type"),i("cost_models_details.table.columns.last_modified")].includes(e)?{title:e,transforms:[Xe.a]}:e),rows:p,actions:[{title:i("cost_models_details.action_view"),onClick:(e,t)=>{c(l[t].uuid)}},{style:d?void 0:{pointerEvents:"auto"},tooltip:d?void 0:E.a.createElement("div",null,i("cost_models.read_only_tooltip")),isDisabled:!d,title:d?E.a.createElement("div",{style:{color:"red"}},i("cost_models_details.action_delete")):i("cost_models_details.action_delete"),onClick:(e,t)=>{this.setState({rowId:t},()=>r())}}]},E.a.createElement(Oe.a,null),E.a.createElement(Pe.a,null))))}})),lt=a(1024),it=a(226);const ct={container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"}};var mt=Object(n.connect)(Object(s.a)(e=>({isWritePermission:Object(it.isCostModelWritePermission)(e)})))(Object(v.e)()(class extends E.a.Component{render(){const{t:e,openModal:t,isWritePermission:a}=this.props;return E.a.createElement("div",{style:ct.container},E.a.createElement(Q.a,null,E.a.createElement(Y.a,{icon:lt.a}),E.a.createElement(k.a,{size:"lg"},e("cost_models_details.empty_state.title")),E.a.createElement(Z.a,null,E.a.createElement("p",null,e("cost_models_details.empty_state.desc"))),a&&E.a.createElement(h.a,{variant:"primary",onClick:t},e("cost_models_details.empty_state.primary_action")),!a&&E.a.createElement(me.a,null,E.a.createElement(Be.a,{isDisabled:!0},E.a.createElement(h.a,{isDisabled:!0},e("cost_models_details.empty_state.primary_action"))))))}})),ut=a(973),dt=a(1022);var pt=({t:e})=>E.a.createElement("header",{style:Je.a.header},E.a.createElement(k.a,{style:Je.a.title,size:"2xl"},e("cost_models_details.header.title"),E.a.createElement(ut.a,{"aria-label":e("cost_models_details.header.sub"),enableFlip:!0,bodyContent:e("cost_models_details.header.sub")},E.a.createElement(h.a,{variant:h.c.plain},E.a.createElement(dt.a,null)))));var ht=Object(v.e)()(class extends E.a.Component{constructor(e){super(e),this.state={isWizardOpen:!1,uuid:""},this.onPaginationChange=this.onPaginationChange.bind(this),this.onOrdering=this.onOrdering.bind(this),this.onFilterChange=this.onFilterChange.bind(this),this.onUpdateFilter=this.onUpdateFilter.bind(this),this.onRemove=this.onRemove.bind(this),this.resetFilter=this.resetFilter.bind(this)}componentDidMount(){this.props.fetch(),this.props.fetchMetrics("OCP"),this.props.fetchRbac()}onRemove(e,t){const a=this.props.query[e];if(!a)return;const r=a.split(","),n=r.indexOf(t);if(n<-1)return;const s=[...r.slice(0,n),...r.slice(n+1)].join(",");this.updateResults(Object.assign(Object.assign({},this.props.query),{[e]:s}))}onUpdateFilter(e){let t=null;return"type"===e&&(t="currentFilterType"),"value"===e&&(t="currentFilterValue"),e=>{null!==t&&this.props.updateFilter({[t]:e})}}updateResults(e){const t=Object.keys(e).filter(t=>e[t]).reduce((t,a)=>{const r=`${a}=${e[a]}`;return null===t?r:`${t}&${r}`},null);this.props.fetch(t)}onPaginationChange(e){const t=Object.assign(Object.assign({},this.props.query),e);this.updateResults(t)}onOrdering(e){this.updateResults(Object.assign(Object.assign({},this.props.query),e))}onFilterChange(e){const{limit:t,offset:a,ordering:r}=this.props.query;this.updateResults(Object.assign({limit:t,offset:a,ordering:r},e))}resetFilter(){this.updateResults({})}render(){const{isWritePermission:e,setDialogOpen:t,setCurrentCostModel:a,costModels:r,pagination:n,status:s,error:o,t:l,query:i}=this.props,d=[l("cost_models_details.table.columns.name"),l("cost_models_details.table.columns.desc"),l("cost_models_details.table.columns.source_type"),l("cost_models_details.table.columns.sources"),l("cost_models_details.table.columns.last_modified"),""],p=Object.keys(i).filter(e=>["name","type","description"].includes(e)).find(e=>this.props.query[e]);return E.a.createElement(E.a.Fragment,null,E.a.createElement(qe,{isOpen:this.state.isWizardOpen,closeWizard:()=>this.setState({isWizardOpen:!1}),openWizard:()=>this.setState({isWizardOpen:!0})}),E.a.createElement("div",{style:Je.a.sourceSettings},E.a.createElement(pt,{t:l}),E.a.createElement("div",{style:Je.a.content},0!==s&&null===o&&(r.length>0||p)&&E.a.createElement("div",{style:Je.a.toolbarContainer},E.a.createElement(Ke,{buttonProps:{isDisabled:!e,onClick:()=>this.setState({isWizardOpen:!0}),children:l("cost_models_details.filter.create_button")},query:Object.keys(i).reduce((e,t)=>["source_type","name","description"].includes(t)&&Boolean(i[t])?["name","description"].includes(t)?Object.assign(Object.assign({},e),{[t]:i[t].split(",")}):Object.assign(Object.assign({},e),{[t]:i[t]}):e,{}),onSearch:e=>this.onFilterChange(e),paginationProps:{itemCount:n.count,onPerPageSelect:(e,t)=>{this.onPaginationChange({offset:"0",limit:t.toString()})},onSetPage:(e,t)=>{const a=(t-1)*n.perPage;this.onPaginationChange({offset:a.toString(),limit:n.perPage.toString()})},page:n.page,perPage:n.perPage}})),2!==s&&E.a.createElement(u.a,null),2===s&&Boolean(o)&&E.a.createElement(m.a,{error:o}),2===s&&!Boolean(o)&&r.length>0&&E.a.createElement(E.a.Fragment,null,E.a.createElement(ot,{isWritePermissions:e,sortBy:this.props.query.ordering,onOrdering:this.onOrdering,columns:d,rows:r,setUuid:e=>a(r.find(t=>t.uuid===e)),showDeleteDialog:()=>{t({isOpen:!0,name:"deleteCostModel"})}}),E.a.createElement("div",{style:Je.a.paginationContainer},E.a.createElement(Ye,{status:s,fetch:this.onPaginationChange,pagination:n}))),2===s&&!Boolean(o)&&void 0===p&&0===r.length&&E.a.createElement(mt,{openModal:()=>this.setState({isWizardOpen:!0})}),2===s&&p&&0===r.length&&E.a.createElement(c.a,{filter:this.props.query.name,subTitle:l("no_match_found_state.desc")}))))}});t.default=Object(n.connect)(Object(s.a)(e=>({costModels:o.c.costModels(e),error:o.c.error(e),status:o.c.status(e),pagination:o.c.pagination(e),query:o.c.query(e),currentFilterValue:o.c.currentFilterValue(e),currentFilterType:o.c.currentFilterType(e),currentCostModel:o.c.selected(e),isWritePermission:i.c.isCostModelWritePermission(e)})),{updateFilter:o.a.updateFilterToolbar,fetch:o.a.fetchCostModels,notify:r.addNotification,resetCurrentCostModel:o.a.resetCostModel,setCurrentCostModel:o.a.selectCostModel,setDialogOpen:o.a.setCostModelDialog,fetchMetrics:l.a.fetchMetrics,fetchRbac:i.a.fetchRbac})(ht)}}]);
//# sourceMappingURL=00a437228afa6f4cf98c.bundle.js.map