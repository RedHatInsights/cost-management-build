(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[3758],{48716:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(22122),n=a(96156),r=a(81253),o=a(97522),i=a.n(o),l=a(45697),c=a.n(l),m=a(94184),u=a.n(m),d=a(72466),p=function(e){var t=e.className,a=e.children,o=(0,r.Z)(e,["className","children"]),l=u()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return i().createElement(d.Z.Consumer,null,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=u()((0,n.Z)({},"pf-m-".concat(e,"-200"),"dark"===e),(0,n.Z)({},"pf-m-light","light"===e));return i().createElement("section",(0,s.Z)({},o,{className:"".concat(l," ").concat(t),"widget-type":"InsightsPageHeader"}),a)}))};const g=p;p.propTypes={children:c().any.isRequired,className:c().string}},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a(97522),n=a.n(s),r=a(45697),o=a.n(r),i=a(94184),l=a.n(i),c=a(60485),m=function(e){var t=e.className,a=e.title,s=l()(t);return n().createElement(c.D,{headingLevel:"h1",size:"2xl",className:s,"widget-type":"InsightsPageHeaderTitle"}," ",a," ")};const u=m;m.propTypes={title:o().node.isRequired,className:o().string}},94605:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Oe});var s=a(95995),n=a(65619),r=a(38291),o=a(48716),i=a(39173),l=a(93952),c=a(20546),m=a(97522),u=a.n(m),d=a(74806),p=a(43476),g=a(94377),h=a(87932),E=a(46462),C=a(4705);class f extends u().Component{constructor(e){super(e),this.handleDistributionChange=(e,t)=>{const{value:a}=t.currentTarget;this.setState({distribution:a})},this.state={distribution:this.props.current.distribution}}render(){const{error:e,current:t,intl:a,isLoading:n,onClose:r,updateCostModel:o}=this.props;return u().createElement(s.Modal,{title:a.formatMessage(l.Z.DistributionType),isOpen:!0,onClose:()=>r({name:"updateDistribution",isOpen:!1}),variant:s.ModalVariant.small,actions:[u().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const e=Object.assign(Object.assign({},t),{source_uuids:t.sources.map((e=>e.uuid)),source_type:"OCP",distribution:this.state.distribution});o(t.uuid,e,"updateDistribution")}},a.formatMessage(l.Z.Save)),u().createElement(s.Button,{key:"cancel",variant:"link",onClick:()=>r({name:"updateDistribution",isOpen:!1}),isDisabled:n},a.formatMessage(l.Z.Cancel))]},u().createElement(s.Stack,{hasGutter:!0},u().createElement(s.StackItem,null,e&&u().createElement(s.Alert,{variant:"danger",title:`${e}`})),u().createElement(s.StackItem,null,u().createElement(s.TextContent,null,u().createElement(s.Text,{style:C.W.cardDescription},a.formatMessage(l.Z.DistributionModelDesc)))),u().createElement(s.StackItem,null,u().createElement(s.Form,null,u().createElement(s.FormGroup,{isInline:!0,fieldId:"cost-distribution",isRequired:!0},u().createElement(s.Radio,{isChecked:"cpu"===this.state.distribution,name:"distribution",label:a.formatMessage(l.Z.CpuTitle),"aria-label":a.formatMessage(l.Z.CpuTitle),id:"cpuDistribution",value:"cpu",onChange:this.handleDistributionChange}),u().createElement(s.Radio,{isChecked:"memory"===this.state.distribution,name:"distribution",label:a.formatMessage(l.Z.MemoryTitle),"aria-label":a.formatMessage(l.Z.MemoryTitle),id:"memoryDistribution",value:"memory",onChange:this.handleDistributionChange}))))))}}const M=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({isLoading:h.E6.updateProcessing(e),error:h.E6.updateError(e)}))),{onClose:h.F0.setCostModelDialog,updateCostModel:h.F0.updateCostModel},((e,t,a)=>Object.assign(Object.assign(Object.assign({},e),t),a)))(f)),b=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>{const{updateDistribution:t}=h.E6.isDialogOpen(e)("distribution");return{isUpdateDialogOpen:t,costModelDialog:h.E6.isDialogOpen(e)("distribution"),isWritePermission:E.c5.isCostModelWritePermission(e)}})),{setCostModelDialog:h.F0.setCostModelDialog})((({intl:e,isWritePermission:t,setCostModelDialog:a,current:n,isUpdateDialogOpen:r})=>{const[o,i]=u().useState(!1),m="cpu"===n.distribution?e.formatMessage(l.Z.CpuTitle):e.formatMessage(l.Z.MemoryTitle);return u().createElement(u().Fragment,null,r&&u().createElement(M,{current:n}),u().createElement(s.Card,{style:C.W.card},u().createElement(s.CardHeader,null,u().createElement(s.CardHeaderMain,null,u().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.md},e.formatMessage(l.Z.DistributionType))),u().createElement(s.CardActions,null,u().createElement(s.Dropdown,{toggle:u().createElement(s.KebabToggle,{onToggle:i}),isOpen:o,onSelect:()=>i(!1),position:s.DropdownPosition.right,isPlain:!0,dropdownItems:[u().createElement(c.j,{key:"edit",isDisabled:!t},u().createElement(s.DropdownItem,{isDisabled:!t,onClick:()=>a({isOpen:!0,name:"updateDistribution"}),component:"button"},e.formatMessage(l.Z.CostModelsDistributionEdit)))]}))),u().createElement(s.CardBody,{style:C.W.cardDescription},e.formatMessage(l.Z.CostModelsDistributionDesc)),u().createElement(s.CardBody,{isFilled:!0}),u().createElement(s.CardBody,{style:C.W.cardBody},m),u().createElement(s.CardBody,{isFilled:!0})))})));var y=a(99291);class P extends u().Component{constructor(e){super(e),this.handleSignChange=(e,t)=>{const{value:a}=t.currentTarget;this.setState({isDiscount:"true"===a})},this.handleMarkupDiscountChange=(e,t)=>{const{value:a}=t.currentTarget;this.setState({markup:(0,y.Wx)(a,"en")})},this.handleOnKeyDown=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()},this.markupValidator=()=>{const{markup:e}=this.state;return isNaN(Number(e))?l.Z.MarkupOrDiscountNumber:(0,y.cR)(e)>10?l.Z.MarkupOrDiscountTooLong:void 0};const t=Number(this.props.current.markup.value||0),a=t<0;this.state={isDiscount:a,markup:a?t.toString().substring(1):t.toString()}}render(){const{error:e,current:t,intl:a,isLoading:n,onClose:r,updateCostModel:o}=this.props,{isDiscount:i}=this.state,c=this.markupValidator(),m=c?"error":"default",d=`${i?"-":""}${this.state.markup}`;return u().createElement(s.Modal,{title:a.formatMessage(l.Z.EditMarkupOrDiscount),isOpen:!0,onClose:()=>r({name:"updateMarkup",isOpen:!1}),variant:s.ModalVariant.medium,actions:[u().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const e=Object.assign(Object.assign({},t),{source_uuids:t.sources.map((e=>e.uuid)),source_type:"OpenShift Container Platform"===t.source_type?"OCP":"AWS",markup:{value:d,unit:"percent"}});o(t.uuid,e,"updateMarkup")},isDisabled:n||"error"===m||0===d.trim().length||Number(d)===Number(t.markup.value)},a.formatMessage(l.Z.Save)),u().createElement(s.Button,{key:"cancel",variant:"link",onClick:()=>r({name:"updateMarkup",isOpen:!1}),isDisabled:n},a.formatMessage(l.Z.Cancel))]},u().createElement(s.Stack,{hasGutter:!0},u().createElement(s.StackItem,null,e&&u().createElement(s.Alert,{variant:"danger",title:`${e}`})),u().createElement(s.StackItem,null,u().createElement(s.TextContent,null,u().createElement(s.Text,{style:C.W.cardDescription},a.formatMessage(l.Z.MarkupOrDiscountModalDesc)))),u().createElement(s.StackItem,null,u().createElement(s.TextContent,null,u().createElement(s.Title,{headingLevel:"h2",size:"md"},a.formatMessage(l.Z.MarkupOrDiscount))),u().createElement(s.Flex,{style:C.W.markupRadioContainer},u().createElement(s.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},u().createElement(s.FlexItem,null,u().createElement(s.Radio,{isChecked:!i,name:"discount",label:a.formatMessage(l.Z.MarkupPlus),"aria-label":a.formatMessage(l.Z.MarkupPlus),id:"markup",value:"false",onChange:this.handleSignChange,style:C.W.markupRadio}),u().createElement(s.Radio,{isChecked:i,name:"discount",label:a.formatMessage(l.Z.DiscountMinus),"aria-label":a.formatMessage(l.Z.DiscountMinus),id:"discount",value:"true",onChange:this.handleSignChange}))),u().createElement(s.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},u().createElement(s.FlexItem,null,u().createElement(s.Form,null,u().createElement(s.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:c?a.formatMessage(c):void 0,style:C.W.rateContainer,validated:m},u().createElement(s.InputGroup,null,u().createElement(s.InputGroupText,{style:C.W.sign},i?a.formatMessage(l.Z.DiscountMinus):a.formatMessage(l.Z.MarkupPlus)),u().createElement(s.TextInput,{"aria-label":a.formatMessage(l.Z.Rate),id:"markup-input-box",isRequired:!0,onKeyDown:this.handleOnKeyDown,onChange:this.handleMarkupDiscountChange,placeholder:(0,y.Wx)("0"),style:C.W.inputField,type:"text",validated:m,value:(0,y.Wx)(this.state.markup)}),u().createElement(s.InputGroupText,{style:C.W.percent},a.formatMessage(l.Z.PercentSymbol))))))))),u().createElement(s.StackItem,null),u().createElement(s.StackItem,null,u().createElement(s.TextContent,null,u().createElement(s.Title,{headingLevel:"h3",size:"md"},a.formatMessage(l.Z.ExamplesTitle))),u().createElement(s.List,null,u().createElement(s.ListItem,null,a.formatMessage(l.Z.CostModelsExamplesNoAdjust)),u().createElement(s.ListItem,null,a.formatMessage(l.Z.CostModelsExamplesDoubleMarkup)),u().createElement(s.ListItem,null,a.formatMessage(l.Z.CostModelsExamplesReduceZero)),u().createElement(s.ListItem,null,a.formatMessage(l.Z.CostModelsExamplesReduceSeventyfive))))))}}const S=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({isLoading:h.E6.updateProcessing(e),error:h.E6.updateError(e)}))),{onClose:h.F0.setCostModelDialog,updateCostModel:h.F0.updateCostModel},((e,t,a)=>Object.assign(Object.assign(Object.assign({},e),t),a)))(P)),v=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>{const{updateMarkup:t}=h.E6.isDialogOpen(e)("markup");return{isUpdateDialogOpen:t,costModelDialog:h.E6.isDialogOpen(e)("markup"),isWritePermission:E.c5.isCostModelWritePermission(e)}})),{setCostModelDialog:h.F0.setCostModelDialog})((({intl:e,isWritePermission:t,setCostModelDialog:a,current:n,isUpdateDialogOpen:r})=>{const[o,i]=u().useState(!1),m=(0,y.rl)(n&&n.markup&&n.markup.value?Number(n.markup.value):0,{minimumFractionDigits:0,maximumFractionDigits:10});return u().createElement(u().Fragment,null,r&&u().createElement(S,{current:n}),u().createElement(s.Card,{style:C.W.card},u().createElement(s.CardHeader,null,u().createElement(s.CardHeaderMain,null,u().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.md},e.formatMessage(l.Z.MarkupOrDiscount))),u().createElement(s.CardActions,null,u().createElement(s.Dropdown,{toggle:u().createElement(s.KebabToggle,{onToggle:i}),isOpen:o,onSelect:()=>i(!1),position:s.DropdownPosition.right,isPlain:!0,dropdownItems:[u().createElement(c.j,{key:"edit",isDisabled:!t},u().createElement(s.DropdownItem,{isDisabled:!t,onClick:()=>a({isOpen:!0,name:"updateMarkup"}),component:"button"},e.formatMessage(l.Z.EditMarkup)))]}))),u().createElement(s.CardBody,{style:C.W.cardDescription},e.formatMessage(l.Z.MarkupOrDiscountDesc)),u().createElement(s.CardBody,{isFilled:!0}),u().createElement(s.CardBody,{style:C.W.cardBody},e.formatMessage(l.Z.Percent,{value:m})),u().createElement(s.CardBody,{isFilled:!0})))})));var Z=a(66646),D=a(20167),k=a(55483),T=a(52413),O=a(77656),x=a(66555),I=a(39574),R=a(85218),F=a(60477),L=a(99627),_=a(23394),j=a(96085);const B=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>{const t=h.E6.costModels(e);let a=null;return t.length>0&&(a=t[0]),{costModel:a,isOpen:h.E6.isDialogOpen(e)("rate").addRate,updateError:h.E6.updateError(e),isProcessing:h.E6.updateProcessing(e),metricsHash:L.qw.metrics(e)}})),(e=>({onClose:()=>{e(h.F0.setCostModelDialog({name:"addRate",isOpen:!1}))},updateCostModel:(t,a)=>h.F0.updateCostModel(t,a,"addRate")(e)})))((({costModel:e,intl:t,isOpen:a,isProcessing:n,metricsHash:r,onClose:o,updateCostModel:i,updateError:c})=>{const m=(0,_.bF)(r),d=u().useMemo((()=>(0,_.Cw)(m)),[m.errors,m.rateKind]);return u().useEffect((()=>{m.reset(Object.assign(Object.assign({},j.Pv),{otherTiers:e.rates}))}),[a]),u().createElement(s.Modal,{title:t.formatMessage(l.Z.PriceListAddRate),isOpen:a,onClose:o,variant:"large",actions:[u().createElement(s.Button,{key:"add-rate",variant:s.ButtonVariant.primary,isDisabled:!d||n,onClick:()=>{const t=(0,_.L3)(r,e,m);i(e.uuid,t)}},t.formatMessage(l.Z.PriceListAddRate)),u().createElement(s.Button,{key:"cancel",variant:s.ButtonVariant.link,isDisabled:n,onClick:o},t.formatMessage(l.Z.Cancel))]},u().createElement(s.Form,null,c&&u().createElement(s.Alert,{variant:"danger",title:`${c}`}),u().createElement(_.HJ,{metricsHash:r,rateFormData:m})))})));var w=a(69957),W=a(32004);const q=(0,d.ZP)((({intl:e=W.N,onClose:t,onProceed:a,title:n,body:r,actionText:o,isProcessing:i=!1,isOpen:c=!1,isSmall:m=!1,error:d=""})=>{const p=u().createElement(s.Button,{key:"cancel",variant:"link",onClick:t,isDisabled:i},e.formatMessage(l.Z.Cancel)),g=u().createElement(s.Button,{key:"proceed",variant:"danger",onClick:a,isDisabled:i},o),h=u().createElement(s.Button,{key:"close",variant:"primary",onClick:t,isDisabled:i},e.formatMessage(l.Z.Close)),E=""!==o?[g,p]:[h];return u().createElement(s.Modal,{"aria-label":n,header:u().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes["2xl"]},u().createElement(w.LP,{color:"orange"})," ",n),isOpen:c,onClose:t,actions:E,variant:m?"small":"default"},d&&u().createElement(s.Alert,{variant:"danger",title:`${d}`}),r)}));var A=a(51508);const $=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>{const t=h.E6.costModels(e);let a=null;return t.length>0&&(a=t[0]),{costModel:a,isOpen:h.E6.isDialogOpen(e)("rate").updateRate,updateError:h.E6.updateError(e),isProcessing:h.E6.updateProcessing(e),metricsHash:L.qw.metrics(e)}})),(e=>({onClose:()=>{e(h.F0.setCostModelDialog({name:"updateRate",isOpen:!1}))},updateCostModel:(t,a)=>h.F0.updateCostModel(t,a,"updateRate")(e)})))((({costModel:e,index:t,intl:a=W.N,isOpen:n,isProcessing:r,metricsHash:o,onClose:i,updateCostModel:c,updateError:m})=>{const d=e&&e.rates&&e.rates[t]?e.rates[t]:null,p=(0,_.bF)(o,d,e.rates),g=u().useMemo((()=>(0,_.Cw)(p)),[p]),h=u().useMemo((()=>(0,_.uD)(d,p)),[p]);return u().useEffect((()=>{p.reset((0,_.Pz)(d,void 0,d&&d.tag_rates?e.rates.filter((e=>e.metric.name!==d.metric.name||e.cost_type!==d.cost_type||e.tag_rates&&d.tag_rates&&e.tag_rates.tag_key!==d.tag_rates.tag_key)):e.rates))}),[n]),u().createElement(s.Modal,{title:a.formatMessage(l.Z.PriceListEditRate),isOpen:n,onClose:i,variant:"large",actions:[u().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const a=(0,_.L3)(o,e,p,t);c(e.uuid,a)},isDisabled:!g||r||!h},a.formatMessage(l.Z.Save)),u().createElement(s.Button,{key:"cancel",variant:"link",onClick:i,isDisabled:r},a.formatMessage(l.Z.Cancel))]},u().createElement(s.Stack,{hasGutter:!0},m&&u().createElement(s.StackItem,null,u().createElement(s.Alert,{variant:"danger",title:`${m}`})),u().createElement(s.StackItem,null,u().createElement(A.l,null,u().createElement(_.HJ,{currencyUnits:(e=>{if(null===e)return"USD";if(e.tiered_rates)for(const t of e.tiered_rates)if(t.unit||t.usage)return t.unit||t.usage.unit;if(e.tag_rates)for(const t of e.tag_rates.tag_values)if(t.unit)return t.unit})(d),metricsHash:o,rateFormData:p})))))})));class N extends u().Component{constructor(){super(...arguments),this.state={deleteRate:null,index:-1,pagination:{perPage:10,page:1}}}render(){const{fetchStatus:e,fetchError:t,intl:a,isDialogOpen:n,isWritePermission:r,metricsHash:o}=this.props,i=e=>{const t=e.replace(/ /g,"_").toLowerCase();return a.formatMessage(l.Z.MetricValues,{value:t})||e},c=e=>a.formatMessage(l.Z.MeasurementValues,{value:e.toLowerCase(),count:1})||e,m=Object.keys(o).map((e=>({label:i(e),value:e}))),d=m.reduce(((e,t)=>{const a=Object.keys(o[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:c(e),value:e})));return[...e,...a]}),[]),p=this.props.assignees&&this.props.assignees.length>0,g=this.props.costModel,h=this.state.deleteRate?`${this.state.deleteRate.metric.label_metric}-${this.state.deleteRate.metric.label_measurement} (${this.state.deleteRate.metric.label_measurement_unit})`:"";return u().createElement(u().Fragment,null,u().createElement(B,null),u().createElement($,{index:this.state.index}),u().createElement(q,{isSmall:!0,isOpen:n.deleteRate,title:a.formatMessage(l.Z.PriceListDeleteRate),onClose:()=>{this.props.setDialogOpen({name:"deleteRate",isOpen:!1}),this.setState({deleteRate:null})},isProcessing:this.props.isLoading,onProceed:()=>{const{index:e}=this.state,{current:t}=this.props,a=Object.assign(Object.assign({},t),{source_uuids:t.sources.map((e=>e.uuid)),source_type:"OCP",rates:[...t.rates.slice(0,e),...t.rates.slice(e+1)]});this.props.updateCostModel(t.uuid,a,"deleteRate")},body:u().createElement(u().Fragment,null,a.formatMessage(l.Z.PriceListDeleteRateDesc,{metric:u().createElement("b",null,h),costModel:u().createElement("b",null,g),count:p?2:1}),p&&u().createElement(s.List,null,this.props.assignees.map((e=>u().createElement(s.ListItem,{key:e},e))))),actionText:a.formatMessage(l.Z.PriceListDeleteRate)}),u().createElement(O.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:n,setSearch:o,onRemove:i,onSelect:c,onClearAll:p})=>{const g=(this.state.pagination.page-1)*this.state.pagination.perPage,h=this.state.pagination.page*this.state.pagination.perPage,E=this.props.current.rates.filter((e=>0===n.metrics.length||n.metrics.includes(e.metric.label_metric))).filter((e=>0===n.measurements.length||n.measurements.includes(e.metric.label_measurement))),C=E.slice(g,h);return u().createElement(u().Fragment,null,u().createElement(x.Q,{primary:u().createElement(F.J,{isDisabled:0===this.props.current.rates.length,primary:n.primary,setPrimary:e=>o({primary:e}),options:[{label:a.formatMessage(l.Z.Metric),value:"metrics"},{label:a.formatMessage(l.Z.Measurement),value:"measurements"}]}),selected:n.primary,secondaries:[{component:u().createElement(R.n,{isDisabled:0===this.props.current.rates.length,placeholderText:a.formatMessage(l.Z.MeasurementPlaceholder),selections:n.measurements,setSelections:e=>c("measurements",e),options:d}),name:"measurements",onRemove:i,filters:n.measurements},{component:u().createElement(R.n,{isDisabled:0===this.props.current.rates.length,placeholderText:a.formatMessage(l.Z.MetricPlaceholder),selections:n.metrics,setSelections:e=>c("metrics",e),options:m}),name:"metrics",onRemove:i,filters:n.metrics}],button:u().createElement(s.Button,{isDisabled:!r,onClick:()=>this.props.setDialogOpen({name:"addRate",isOpen:!0})},a.formatMessage(l.Z.PriceListAddRate)),onClear:p,pagination:u().createElement(s.Pagination,{isCompact:!0,itemCount:E.length,perPage:this.state.pagination.perPage,page:this.state.pagination.page,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}})})}),2!==e&&u().createElement(T.G,null),2===e&&Boolean(t)&&u().createElement(D.Z,null),2===e&&0===C.length&&(0!==n.metrics.length||0!==n.measurements.length)&&u().createElement(k.c,null),2===e&&0===C.length&&0===n.measurements.length&&0===n.metrics.length&&u().createElement(s.Bullseye,null,u().createElement(s.EmptyState,null,u().createElement(s.EmptyStateIcon,{icon:Z.Yw}),u().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},a.formatMessage(l.Z.PriceListEmptyRate)),u().createElement(s.EmptyStateBody,null,a.formatMessage(l.Z.PriceListEmptyRateDesc)))),2===e&&C.length>0&&u().createElement(u().Fragment,null,u().createElement(I.y,{actions:[{title:a.formatMessage(l.Z.PriceListEditRate),isDisabled:!r,style:r?void 0:{pointerEvents:"auto"},tooltip:r?void 0:u().createElement("div",null,a.formatMessage(l.Z.CostModelsReadOnly)),onClick:(e,t,a)=>{this.setState({deleteRate:null,index:a.data.index+g}),this.props.setDialogOpen({name:"updateRate",isOpen:!0})}},{title:a.formatMessage(l.Z.Delete),isDisabled:!r,style:r?{}:{pointerEvents:"auto"},tooltip:r?void 0:u().createElement("div",null,a.formatMessage(l.Z.CostModelsReadOnly)),onClick:(e,t,a)=>{const s=a.data.index;this.setState({deleteRate:C[s],index:s+g}),this.props.setDialogOpen({name:"deleteRate",isOpen:!0})}}],tiers:C}),u().createElement(s.Toolbar,{id:"price-list-toolbar-bottom"},u().createElement(s.ToolbarContent,null,u().createElement(s.ToolbarItem,{variant:s.ToolbarItemVariant.pagination},u().createElement(s.Pagination,{itemCount:E.length,perPage:this.state.pagination.perPage,page:this.state.pagination.page,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}}),variant:"bottom"}))))))})))}}const z=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({isLoading:h.E6.updateProcessing(e),error:h.E6.updateError(e),isDialogOpen:h.E6.isDialogOpen(e)("rate"),fetchError:h.E6.error(e),fetchStatus:h.E6.status(e),metricsHash:L.qw.metrics(e),costTypes:L.qw.costTypes(e),isWritePermission:E.c5.isCostModelWritePermission(e)}))),{updateCostModel:h.F0.updateCostModel,setDialogOpen:h.F0.setCostModelDialog})(N));var G=a(88485),K=a(62226),H=a(34168),U=a(27916),V=a(10209),X=a(39887),J=a(80810);const Q=({id:e,placeholder:t="",value:a,onChange:n,onSearch:r})=>u().createElement(s.InputGroup,null,u().createElement(s.TextInput,{value:a,placeholder:t,id:e,onChange:n,onKeyPress:e=>{"Enter"===e.key&&""!==a&&r(e)}}),u().createElement(s.InputGroupText,{style:{borderLeft:"0"}},u().createElement(J.W1,null))),Y=(0,d.ZP)((({filterInputProps:e,intl:t,paginationProps:a,filter:n})=>u().createElement(s.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:n.onClearAll},u().createElement(s.ToolbarContent,null,u().createElement(s.ToolbarItem,{variant:"search-filter"},u().createElement(s.ToolbarFilter,{deleteChip:n.onRemove,chips:n.query.name,categoryName:"name"},u().createElement(Q,Object.assign({placeholder:t.formatMessage(l.Z.CostModelsFilterPlaceholder)},e)))),u().createElement(s.ToolbarItem,{variant:"pagination"},u().createElement(s.Pagination,{isCompact:a.isCompact,itemCount:a.itemCount,page:a.page,perPage:a.perPage,onSetPage:a.onSetPage,onPerPageSelect:a.onPerPageSelect}))))));class ee extends u().Component{render(){const{costModel:e,intl:t}=this.props;if(this.props.isLoadingSources)return u().createElement(T.G,null);if(this.props.fetchingSourcesError)return u().createElement(U.fv,null);const a=this.props.providers.map((a=>{const s=!!this.props.checked[a.uuid]&&this.props.checked[a.uuid].selected,n=void 0===a.cost_models?t.formatMessage(l.Z.CostModelsWizardSourceTableDefaultCostModel):a.cost_models.map((e=>e.name)).join(","),r=a.cost_models.length&&void 0===a.cost_models.find((t=>t.name===e.name))?u().createElement(X.a,{key:a.uuid,text:t.formatMessage(l.Z.CostModelsWizardSourceWarning,{costModel:n})}):null;return{cells:[u().createElement("div",{key:a.uuid},a.name," ",r),n||""],selected:s,disableSelection:a.cost_models.length>0}})),n={"OpenShift Container Platform":"OCP","Microsoft Azure":"AZURE","Amazon Web Services":"AWS"}[e.source_type];return u().createElement(u().Fragment,null,u().createElement(Y,{filter:{onClearAll:()=>this.props.fetch(`source_type=${n}&limit=${this.props.pagination.perPage}`),onRemove:(e,t)=>{const a=(0,V.fg)({name:this.props.query.name?this.props.query.name.split(","):[]})(e,t);this.props.fetch(`source_type=${n}${a.name?`&name=${a.name.join(",")}`:""}&offset=0&limit=${this.props.pagination.perPage}`)},query:{name:this.props.query.name?this.props.query.name.split(","):[]}},filterInputProps:{id:"assign-sources-modal-toolbar",onChange:e=>this.props.updateFilter({currentFilterType:"name",currentFilterValue:e}),value:this.props.currentFilter.value,onSearch:()=>{const e=this.props.query.name?this.props.query.name.split(","):[],t=(0,V.xZ)({name:e})("name",this.props.currentFilter.value);this.props.fetch(`source_type=${n}&name=${t.name.join(",")}&limit=${this.props.pagination.perPage}&offset=0`)}},paginationProps:{isCompact:!0,itemCount:this.props.pagination.count,perPage:this.props.pagination.perPage,page:this.props.pagination.page,onPerPageSelect:(e,t)=>{this.props.fetch(`source_type=${n}&limit=${t}&offset=0&${this.props.query.name?`name=${this.props.query.name}`:""}`)},onSetPage:(e,t)=>{this.props.fetch(`source_type=${n}&limit=${this.props.pagination.perPage}&offset=${this.props.pagination.perPage*(t-1)}&${this.props.query.name?`name=${this.props.query.name}`:""}`)}}}),a.length>0&&u().createElement(H.Table,{"aria-label":t.formatMessage(l.Z.CostModelsAssignSources,{count:1}),cells:[t.formatMessage(l.Z.Names,{count:1}),t.formatMessage(l.Z.CostModelsWizardSourceTableCostModel)],rows:a,onSelect:(e,t,a)=>{if(-1!==a)this.props.setState(Object.assign(Object.assign({},this.props.checked),{[this.props.providers[a].uuid]:{selected:t,meta:this.props.providers[a]}}));else{const e=this.props.providers.reduce(((e,a)=>{const s=!!this.props.checked[a.uuid]&&this.props.checked[a.uuid].selected,n=a.cost_models.length>0;return Object.assign(Object.assign({},e),{[a.uuid]:{selected:n?s:t,meta:a,disabled:n}})}),{});this.props.setState(e)}}},u().createElement(H.TableHeader,null),u().createElement(H.TableBody,null)),0===a.length&&u().createElement(k.c,{filter:this.props.filter,subTitle:l.Z.EmptyFilterSourceStateSubtitle}),u().createElement(s.Toolbar,{id:"costmodels_details.sources_pagination_datatoolbar"},u().createElement(s.ToolbarContent,{style:{flexDirection:"row-reverse"}},u().createElement(s.ToolbarItem,{variant:"pagination"},u().createElement(s.Pagination,{itemCount:this.props.pagination.count,isDisabled:this.props.isLoadingSources,perPage:this.props.pagination.perPage,page:this.props.pagination.page,onPerPageSelect:(e,t)=>{this.props.fetch(`limit=${t}&offset=0&${this.props.query.name?`name=${this.props.query.name}`:""}`)},onSetPage:(e,t)=>{this.props.fetch(`limit=${this.props.pagination.perPage}&offset=${this.props.pagination.perPage*(t-1)}&${this.props.query.name?`name=${this.props.query.name}`:""}`)}})))))}}const te=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({currentFilter:{name:K.vc.currentFilterType(e),value:K.vc.currentFilterValue(e)},filter:K.vc.filter(e)}))),{updateFilter:K.lk.updateFilterToolbar})(ee)),ae={"OpenShift Container Platform":"OCP","Microsoft Azure":"AZURE","Amazon Web Services":"AWS"};class se extends u().Component{constructor(){super(...arguments),this.state={checked:{}},this.hasSelections=()=>{const{checked:e}=this.state;let t=!1;for(const a of Object.keys(e))if(e[a].selected&&!e[a].disabled){t=!0;break}return t}}componentDidMount(){const{costModel:{source_type:e},fetch:t}=this.props;t(`type=${ae[e]}&limit=10&offset=0`)}componentDidUpdate(e){if(!0===e.isLoadingSources&&!1===this.props.isLoadingSources){const e=this.props.providers.reduce(((e,t)=>{const a=this.props.costModel.sources.some((e=>e.uuid===t.uuid));return Object.assign(Object.assign({},e),{[t.uuid]:{disabled:a,selected:a,meta:t}})}),{});this.setState({checked:e})}}render(){const{intl:e,isUpdateInProgress:t,onClose:a,isOpen:n,onSave:r,costModel:o,updateApiError:i}=this.props;return u().createElement(s.Modal,{isOpen:n,title:e.formatMessage(l.Z.CostModelsAssignSources,{count:2}),onClose:a,variant:"large",actions:[u().createElement(s.Button,{key:"save",isDisabled:!this.hasSelections()||t||this.props.isLoadingSources||null!==this.props.fetchingSourcesError,onClick:()=>{r(Object.keys(this.state.checked).filter((e=>this.state.checked[e].selected)))}},e.formatMessage(l.Z.CostModelsAssignSourcesParen)),u().createElement(s.Button,{key:"cancel",variant:"link",isDisabled:t,onClick:a},e.formatMessage(l.Z.Cancel))]},u().createElement(s.Stack,null,u().createElement(s.StackItem,null,Boolean(i)&&u().createElement(s.Alert,{variant:"danger",title:`${i}`})),u().createElement(s.StackItem,null,u().createElement(s.Grid,null,u().createElement(s.GridItem,{span:2},u().createElement(s.TextContent,null,u().createElement(s.Text,{component:s.TextVariants.h6},e.formatMessage(l.Z.Names,{count:1})))),u().createElement(s.GridItem,{span:10},u().createElement(s.TextContent,null,u().createElement(s.Text,{component:s.TextVariants.p},this.props.costModel.name))),u().createElement(s.GridItem,{span:2},u().createElement(s.TextContent,null,u().createElement(s.Text,{component:s.TextVariants.h6},e.formatMessage(l.Z.CostModelsSourceType)))),u().createElement(s.GridItem,{span:10},u().createElement(s.TextContent,null,u().createElement(s.Text,{component:s.TextVariants.p},this.props.costModel.source_type))))),u().createElement(s.StackItem,null,u().createElement(te,{fetch:this.props.fetch,fetchingSourcesError:this.props.fetchingSourcesError,isLoadingSources:this.props.isLoadingSources,providers:this.props.providers,pagination:this.props.pagination,query:this.props.query,costModel:o,checked:this.state.checked,setState:e=>{this.setState({checked:e})}}))))}}const ne=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({pagination:K.vc.pagination(e),query:K.vc.query(e),providers:K.vc.sources(e),isLoadingSources:1===K.vc.status(e),isUpdateInProgress:h.E6.updateProcessing(e),updateApiError:h.E6.updateError(e),fetchingSourcesError:K.vc.error(e)?(0,G.L)(K.vc.error(e)):null}))),{fetch:K.lk.fetchSources})(se));var re=a(97960),oe=a(80963);const ie=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({canWrite:E.c5.isCostModelWritePermission(e),costModels:h.E6.costModels(e)}))))((({canWrite:e,costModels:t,intl:a,showDeleteDialog:s})=>{const n=e?[{title:a.formatMessage(l.Z.CostModelsSourceDelete),onClick:(e,t)=>s(t)}]:[{style:{pointerEvents:"auto"},tooltip:a.formatMessage(l.Z.CostModelsReadOnly),isDisabled:!0,title:a.formatMessage(l.Z.CostModelsSourceDelete)}],r=[a.formatMessage(l.Z.Names,{count:1})],o=t.length>0?t[0].sources.map((e=>[e.name])):[];return u().createElement(H.Table,{actions:n,"aria-label":a.formatMessage(l.Z.CostModelsSourceTableAriaLabel),cells:r,gridBreakPoint:H.TableGridBreakpoint.grid2xl,rows:o},u().createElement(H.TableHeader,null),u().createElement(H.TableBody,null))}))),le=({id:e,placeholder:t="",value:a,onChange:n,onSearch:r})=>u().createElement(s.InputGroup,null,u().createElement(s.TextInput,{value:a,placeholder:t,id:e,onChange:n,onKeyPress:e=>{"Enter"===e.key&&""!==a&&r(e)}}),u().createElement(s.InputGroupText,{style:{borderLeft:"0"}},u().createElement(J.W1,null))),ce=({filterInputProps:e,paginationProps:t,filter:a,actionButtonProps:n})=>u().createElement(s.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:a.onClearAll},u().createElement(s.ToolbarContent,null,u().createElement(s.ToolbarItem,{variant:"search-filter"},u().createElement(s.ToolbarFilter,{deleteChip:a.onRemove,chips:a.query.name,categoryName:a.categoryNames.name},u().createElement(le,Object.assign({},e)))),u().createElement(s.ToolbarItem,null,u().createElement(c.j,{isDisabled:n.isDisabled},u().createElement(s.Button,Object.assign({},n)))),u().createElement(s.ToolbarItem,{variant:"pagination"},u().createElement(s.Pagination,{isCompact:t.isCompact,itemCount:t.itemCount,page:t.page,perPage:t.perPage,onSetPage:t.onSetPage,onPerPageSelect:t.onPerPageSelect})))),me={emptyState:{display:"flex",flexDirection:"row",justifyContent:"center"},sourceTypeTitle:{marginLeft:20,marginTop:8,marginBottom:8}};class ue extends u().Component{constructor(){super(...arguments),this.state={query:{name:[]},currentFilter:"",filter:"",pagination:{page:1,perPage:10}}}render(){const{pagination:{page:e,perPage:t}}=this.state,{current:a,intl:n,isWritePermission:r,onAdd:o,rows:i}=this.props,c=i.filter((e=>!this.state.query.name||this.state.query.name.every((t=>e.includes(t))))).map((e=>[e])),m=c.slice((e-1)*t,e*t);return u().createElement(u().Fragment,null,u().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.md,style:me.sourceTypeTitle},n.formatMessage(l.Z.CostModelsSourceType),": ",a.source_type),u().createElement(ce,{actionButtonProps:{isDisabled:!r,onClick:o,children:n.formatMessage(l.Z.CostModelsAssignSources,{count:1})},filter:{onClearAll:()=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:1}),query:{name:[]}}),onRemove:(e,t)=>{this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:1}),query:(0,V.fg)(this.state.query)("name",t)})},query:this.state.query,categoryNames:{name:n.formatMessage(l.Z.Names,{count:1})}},paginationProps:{isCompact:!0,itemCount:c.length,perPage:t,page:e,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}})},filterInputProps:{id:"sources-tab-toolbar",onChange:e=>this.setState({currentFilter:e}),onSearch:()=>{this.setState({query:(0,V.xZ)(this.state.query)("name",this.state.currentFilter),currentFilter:"",filter:this.state.currentFilter,pagination:Object.assign(Object.assign({},this.state.pagination),{page:1})})},value:this.state.currentFilter,placeholder:n.formatMessage(l.Z.CostModelsFilterPlaceholder)}}),m.length>0&&u().createElement(ie,{showDeleteDialog:e=>{this.props.onDelete(m[e])}}),0===i.length&&u().createElement("div",{style:me.emptyState},u().createElement(s.EmptyState,null,u().createElement(s.EmptyStateIcon,{icon:re.bk}),u().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},n.formatMessage(l.Z.CostModelsSourceEmptyStateDesc)),u().createElement(s.EmptyStateBody,null,n.formatMessage(l.Z.CostModelsSourceEmptyStateTitle)))),0===c.length&&i.length>0&&u().createElement(k.c,{filter:this.state.filter,subTitle:l.Z.EmptyFilterSourceStateSubtitle}),u().createElement(oe.N,{id:"costmodels_details_filter_datatoolbar","aria-label":n.formatMessage(l.Z.CostModelsSourceTablePaginationAriaLabel),variant:"bottom",itemCount:c.length,perPage:t,page:e,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}})}))}}const de=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({isWritePermission:E.c5.isCostModelWritePermission(e)}))))(ue));class pe extends u().Component{constructor(){super(...arguments),this.state={dialogSource:null}}render(){const{intl:e,isDialogOpen:t,isLoading:a,setDialogOpen:s,sources:n,costModel:r}=this.props;return u().createElement(u().Fragment,null,t.addSource&&u().createElement(ne,{costModel:r,isOpen:!0,onClose:()=>s({name:"addSource",isOpen:!1}),onSave:e=>{this.props.updateCostModel(r.uuid,Object.assign(Object.assign({},r),{source_type:"OpenShift Container Platform"===r.source_type?"OCP":"AWS",source_uuids:e}),"addSource")}}),u().createElement(q,{isSmall:!0,isOpen:t.deleteSource,title:e.formatMessage(l.Z.CostModelsSourceDeleteSource),onClose:()=>{s({name:"deleteSource",isOpen:!1}),this.setState({dialogSource:null})},isProcessing:a,onProceed:()=>{const e=Object.assign(Object.assign({},r),{source_type:"OpenShift Container Platform"===r.source_type?"OCP":"AWS",source_uuids:n.filter((e=>e.name!==this.state.dialogSource)).map((e=>e.uuid))});this.props.updateCostModel(r.uuid,e,"deleteSource")},body:u().createElement(u().Fragment,null,e.formatMessage(l.Z.CostModelsSourceDeleteSourceDesc,{source:this.state.dialogSource,costModel:r.name})),actionText:e.formatMessage(l.Z.CostModelsSourceDeleteSource)}),u().createElement(de,{onDeleteText:e.formatMessage(l.Z.CostModelsSourceDelete),onDelete:e=>{this.setState({dialogSource:e[0]}),s({name:"deleteSource",isOpen:!0})},onAdd:()=>s({name:"addSource",isOpen:!0}),rows:n.map((e=>e.name)),current:r}))}}const ge=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({isLoading:h.E6.updateProcessing(e),isDialogOpen:h.E6.isDialogOpen(e)("sources")}))),{setDialogOpen:h.F0.setCostModelDialog,updateCostModel:h.F0.updateCostModel})(pe));var he=a(73466),Ee=a(81787),Ce=a(49382),fe=a(98499),Me=a(32412),be=a(48196);const ye={headerDescription:{width:"97%",wordWrap:"break-word"},content:{paddingTop:fe.ZP.value,height:"182vh"},costCalculation:{marginLeft:fe.ZP.value,marginRight:fe.ZP.value},costmodelsContainer:{marginLeft:fe.ZP.value,marginRight:fe.ZP.value,backgroundColor:Ce.ZP.value,paddingBottom:Me.ZP.value,paddingTop:Me.ZP.value},headerCostModel:{padding:fe.ZP.var,paddingBottom:0,backgroundColor:Ce.ZP.value},title:{paddingBottom:be.ZP.var}},Pe={headerDescription:{width:"97%",wordWrap:"break-word"},content:{paddingTop:fe.ZP.value,height:"182vh"},costmodelsContainer:{marginLeft:fe.ZP.value,marginRight:fe.ZP.value,paddingBottom:Me.ZP.value,paddingTop:Me.ZP.value,paddingLeft:fe.ZP.value,paddingRight:fe.ZP.value},tableContainer:{marginLeft:fe.ZP.value,marginRight:fe.ZP.value},paginationContainer:{paddingBottom:Me.ZP.value,paddingTop:Me.ZP.value,paddingLeft:fe.ZP.value,paddingRight:fe.ZP.value,marginLeft:fe.ZP.value,marginRight:fe.ZP.value,marginBottom:fe.ZP.value,backgroundColor:Ce.ZP.value},toolbarContainer:{paddingBottom:Me.ZP.value,paddingTop:Me.ZP.value,marginLeft:fe.ZP.value,marginRight:fe.ZP.value,backgroundColor:Ce.ZP.value},header:{padding:fe.ZP.var,backgroundColor:Ce.ZP.var},headerCostModel:{padding:fe.ZP.value,paddingBottom:0,backgroundColor:Ce.ZP.var},breadcrumb:{paddingBottom:Me.ZP.var},title:{paddingBottom:be.ZP.var},sourceTypeTitle:{paddingBottom:Me.ZP.var}};class Se extends u().Component{constructor(e){super(e);const t=this.props.costModel[0];this.state={name:t.name,description:t.description}}render(){const{costModel:e,intl:t,isProcessing:a,setDialogOpen:n,updateCostModel:r,updateError:o}=this.props,i=e[0];return u().createElement(s.Modal,{title:t.formatMessage(l.Z.EditCostModel),isOpen:!0,onClose:()=>n({name:"updateCostModel",isOpen:!1}),variant:"small",actions:[u().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const{uuid:e,sources:t}=i,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(i,["uuid","sources"]);r(e,Object.assign(Object.assign({},a),{source_uuids:t.map((e=>e.uuid)),name:this.state.name,description:this.state.description,source_type:"OpenShift Container Platform"===i.source_type?"OCP":"AWS"}),"updateCostModel")},isDisabled:a||this.state.name===i.name&&this.state.description===i.description},t.formatMessage(l.Z.Save)),u().createElement(s.Button,{key:"cancel",variant:"secondary",onClick:()=>n({name:"updateCostModel",isOpen:!1}),isDisabled:a},t.formatMessage(l.Z.Cancel))]},u().createElement(u().Fragment,null,o&&u().createElement(s.Alert,{variant:"danger",title:`${o}`}),u().createElement(s.Form,null,u().createElement(s.FormGroup,{label:t.formatMessage(l.Z.Names,{count:1}),isRequired:!0,fieldId:"name"},u().createElement(s.TextInput,{isRequired:!0,type:"text",id:"name",name:"name",value:this.state.name,onChange:e=>this.setState({name:e})})),u().createElement(s.FormGroup,{label:t.formatMessage(l.Z.Description),fieldId:"description"},u().createElement(s.TextArea,{type:"text",id:"description",name:"description",value:this.state.description,onChange:e=>this.setState({description:e})})))))}}const ve=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({costModel:h.E6.costModels(e),isProcessing:h.E6.updateProcessing(e),updateError:h.E6.updateError(e)}))),{setDialogOpen:h.F0.setCostModelDialog,updateCostModel:h.F0.updateCostModel})(Se));var Ze=a(57954),De=a(97828);const ke=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({isDialogOpen:h.E6.isDialogOpen(e)("costmodel"),isDeleteProcessing:h.E6.deleteProcessing(e),deleteError:h.E6.deleteError(e),isWritePermission:E.c5.isCostModelWritePermission(e)}))),{setDialogOpen:h.F0.setCostModelDialog,deleteCostModel:h.F0.deleteCostModel})((({intl:e,tabRefs:t,tabIndex:a,onSelectTab:n,setDialogOpen:r,isDialogOpen:o,deleteError:i,isDeleteProcessing:m,deleteCostModel:d,current:p,isWritePermission:g,historyObject:h})=>{const[E,C]=u().useState(!1),f=(0,De.e)(window.location.pathname);return u().createElement(u().Fragment,null,o.updateCostModel&&u().createElement(ve,null),u().createElement(q,{isSmall:!0,isOpen:o.deleteCostModel,title:e.formatMessage(l.Z.CostModelsDelete),onClose:()=>r({name:"deleteCostModel",isOpen:!1}),error:i,isProcessing:m,onProceed:()=>{d(p.uuid,"deleteCostModel",h)},body:u().createElement(u().Fragment,null,0===p.sources.length&&e.formatMessage(l.Z.CostModelsDeleteDesc,{costModel:p.name}),p.sources.length>0&&u().createElement(u().Fragment,null,e.formatMessage(l.Z.CostModelsDeleteSource),u().createElement("br",null),u().createElement("br",null),e.formatMessage(l.Z.CostModelsAvailableSources),u().createElement("br",null),u().createElement(s.List,null,p.sources.map((e=>u().createElement(s.ListItem,{key:`${e.uuid}`},e.name)))))),actionText:0===p.sources.length?e.formatMessage(l.Z.CostModelsDelete):""}),u().createElement("header",{style:Pe.headerCostModel},u().createElement(s.Breadcrumb,{style:Pe.breadcrumb},u().createElement(s.BreadcrumbItem,{to:`${f}${Ze.Hb.costModels}`},e.formatMessage(l.Z.CostModels)),u().createElement(s.BreadcrumbItem,{isActive:!0},p.name)),u().createElement(s.Split,null,u().createElement(s.SplitItem,{style:Pe.headerDescription},u().createElement(s.Title,{headingLevel:"h1",style:Pe.title,size:s.TitleSizes["2xl"]},p.name),p.description),u().createElement(s.SplitItem,null,u().createElement(s.Dropdown,{toggle:u().createElement(s.KebabToggle,{onToggle:C}),isOpen:E,onSelect:()=>C(!1),isPlain:!0,position:"right",dropdownItems:[u().createElement(c.j,{key:"edit",isDisabled:!g},u().createElement(s.DropdownItem,{isDisabled:!g,onClick:()=>r({isOpen:!0,name:"updateCostModel"})},e.formatMessage(l.Z.Edit))),u().createElement(c.j,{key:"delete",isDisabled:!g},u().createElement(s.DropdownItem,{isDisabled:!g,onClick:()=>r({isOpen:!0,name:"deleteCostModel"})},e.formatMessage(l.Z.Delete)))]}))),"OpenShift Container Platform"===p.source_type?u().createElement(s.Tabs,{activeKey:a,onSelect:(e,t)=>n(t)},u().createElement(s.Tab,{eventKey:0,title:u().createElement(s.TabTitleText,null,e.formatMessage(l.Z.PriceList)),tabContentId:"refPriceList",tabContentRef:t[0]}),u().createElement(s.Tab,{eventKey:1,title:u().createElement(s.TabTitleText,null,e.formatMessage(l.Z.CostCalculations)),tabContentId:"refMarkup",tabContentRef:t[1]}),u().createElement(s.Tab,{eventKey:2,title:u().createElement(s.TabTitleText,null,e.formatMessage(l.Z.Sources)),tabContentId:"refSources",tabContentRef:t[2]})):u().createElement(s.Tabs,{activeKey:a,onSelect:(e,t)=>n(t)},u().createElement(s.Tab,{eventKey:0,title:u().createElement(s.TabTitleText,null,e.formatMessage(l.Z.CostCalculations)),tabContentId:"refMarkup",tabContentRef:t[0]}),u().createElement(s.Tab,{eventKey:1,title:u().createElement(s.TabTitleText,null,e.formatMessage(l.Z.Sources)),tabContentId:"refSources",tabContentRef:t[1]}))))})));class Te extends u().Component{constructor(e){super(e),this.tabRefs=[u().createRef(),u().createRef(),u().createRef()],this.state={tabIndex:0}}componentDidMount(){this.props.fetchRbac(),this.props.fetchMetrics(),this.props.fetchCostModels(`uuid=${this.props.match.params.uuid}`)}render(){const{costModels:e,costModelError:t,costModelStatus:a,intl:c,metricsError:m,metricsStatus:d,rbacError:p,rbacStatus:g}=this.props;if(2!==d||2!==g||2!==a)return u().createElement(he.Z,{title:c.formatMessage(l.Z.CostModels)});if(m||p||t)return null!==t&&"detail: Invalid provider uuid"===(0,G.L)(t)?u().createElement(u().Fragment,null,u().createElement(o.Z,null,u().createElement(i.Z,{title:c.formatMessage(l.Z.CostModels)})),u().createElement(r.Z,null,u().createElement(s.EmptyState,null,u().createElement(s.EmptyStateIcon,{icon:n.g_}),u().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},c.formatMessage(l.Z.CostModelsUUIDEmptyState)),u().createElement(s.EmptyStateBody,null,c.formatMessage(l.Z.CostModelsUUIDEmptyStateDesc,{uuid:this.props.match.params.uuid}))))):u().createElement(Ee.Z,{title:c.formatMessage(l.Z.CostModels)});const h=e[0],E=h.sources;return u().createElement("div",null,u().createElement(ke,{historyObject:this.props.history,current:h,tabRefs:this.tabRefs,tabIndex:this.state.tabIndex,onSelectTab:e=>this.setState({tabIndex:e})}),u().createElement("div",{style:ye.content},"OpenShift Container Platform"===h.source_type?u().createElement(u().Fragment,null,u().createElement(s.TabContent,{eventKey:0,id:"refPriceList",ref:this.tabRefs[0],hidden:0!==this.state.tabIndex},u().createElement("div",{style:ye.costmodelsContainer},u().createElement(z,{assignees:E.map((e=>e.name)),costModel:h.name,current:h}))),u().createElement(s.TabContent,{eventKey:1,id:"refCostCalculations",ref:this.tabRefs[1],hidden:1!==this.state.tabIndex},u().createElement("div",{style:ye.costCalculation},u().createElement(s.Grid,{hasGutter:!0},u().createElement(s.GridItem,{lg:6,id:"refMarkup"},u().createElement(v,{current:h})),u().createElement(s.GridItem,{lg:6,id:"refDistribution"},u().createElement(b,{current:h}))))),u().createElement(s.TabContent,{eventKey:3,id:"refSources",ref:this.tabRefs[2],hidden:2!==this.state.tabIndex},u().createElement("div",{style:ye.costmodelsContainer},u().createElement(ge,{costModel:h,sources:E})))):u().createElement(u().Fragment,null,u().createElement(s.TabContent,{eventKey:0,id:"refMarkup",ref:this.tabRefs[0],hidden:0!==this.state.tabIndex},u().createElement("div",{style:ye.costCalculation},u().createElement(v,{current:h}))),u().createElement(s.TabContent,{eventKey:1,id:"refSources",ref:this.tabRefs[1],hidden:1!==this.state.tabIndex},u().createElement("div",{style:ye.costmodelsContainer},u().createElement(ge,{costModel:h,sources:E}))))))}}const Oe=(0,d.ZP)((0,p.connect)((0,g.X1)((e=>({costModels:h.E6.costModels(e),costModelError:h.E6.error(e),costModelStatus:h.E6.status(e),metricsHash:L.qw.metrics(e),maxRate:L.qw.maxRate(e),costTypes:L.qw.costTypes(e),metricsError:L.qw.metricsState(e).error,metricsStatus:L.qw.status(e),rbacError:E.c5.selectRbacState(e).error,rbacStatus:E.c5.selectRbacState(e).status}))),{fetchMetrics:L.Wg.fetchMetrics,fetchRbac:E.O9.fetchRbac,fetchCostModels:h.F0.fetchCostModels})(Te))},73466:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(38291),n=a(48716),r=a(39173),o=a(52413),i=a(97522),l=a.n(i);const c=(0,a(16530).withRouter)((({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(n.Z,null,l().createElement(r.Z,{title:e})),l().createElement(s.Z,null,l().createElement(o.G,null)))))},81787:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(38291),n=a(48716),r=a(39173),o=a(20167),i=a(97522),l=a.n(i);const c=(0,a(16530).withRouter)((({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(n.Z,null,l().createElement(r.Z,{title:e})),l().createElement(s.Z,null,l().createElement(o.Z,null)))))}}]);
//# sourceMappingURL=4b13c65859b4aef04c85.bundle.js.map