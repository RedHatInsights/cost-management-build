(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[340],{66785:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var r=s(80129);function a(e){return(0,r.stringify)(e,{encode:!1,indices:!1})}},52413:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var r=s(80708),a=s(32004),o=s(93952),c=s(97522),i=s.n(c);const n=(0,s(74806).ZP)((({intl:e=a.N})=>{const t=e.formatMessage(o.Z.LoadingStateTitle),s=e.formatMessage(o.Z.LoadingStateDesc);return i().createElement(r.EmptyState,{variant:r.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(r.Spinner,{size:"lg"}),i().createElement(r.Title,{headingLevel:"h5",size:"lg"},t),i().createElement(r.EmptyStateBody,null,s))}))},96924:(e,t,s)=>{"use strict";s.d(t,{X:()=>p});var r=s(80708),a=s(93952),o=s(97522),c=s.n(o),i=s(74806);const n={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:s(32412).ZP.var},perspectiveOptionLabel:{marginBottom:6,marginLeft:8,marginTop:6}};class l extends c().Component{constructor(){super(...arguments),this.defaultState={isPerspectiveOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{intl:e,options:t}=this.props;return t.map((t=>c().createElement(r.DropdownItem,{component:"button",key:t.value,onClick:()=>this.handleClick(t.value)},e.formatMessage(t.label,{value:t.value}))))},this.getCurrentLabel=()=>{const{currentItem:e,intl:t,options:s}=this.props;let r="";for(const a of s)if(e===a.value){r=t.formatMessage(a.label,{value:a.value});break}return r},this.getDropDown=()=>{const{intl:e,isDisabled:t,options:s}=this.props,{isPerspectiveOpen:a}=this.state,o=this.getDropDownItems();return 1===s.length?c().createElement("div",{style:n.perspectiveOptionLabel},e.formatMessage(s[0].label,{value:s[0].value})):c().createElement(r.Dropdown,{onSelect:this.handleSelect,toggle:c().createElement(r.DropdownToggle,{isDisabled:t,onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:a,dropdownItems:o})},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isPerspectiveOpen:!this.state.isPerspectiveOpen})},this.handleToggle=e=>{this.setState({isPerspectiveOpen:e})}}render(){const{intl:e}=this.props;return c().createElement("div",{style:n.perspectiveSelector},c().createElement("label",{style:n.perspectiveLabel},e.formatMessage(a.Z.Perspective)),this.getDropDown())}}const p=(0,i.ZP)(l)},64506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>lt});var r=s(80708),a=s(91290),o=s(86208),c=s(66785),i=s(93952),n=s(73466),l=s(64146),p=s(13883),u=s(96924),h=s(97522),g=s.n(h);const d=({DashboardWidget:e,selectWidgets:t,widgets:s})=>g().createElement("div",null,g().createElement(r.Grid,{hasGutter:!0},s.map((s=>t[s].details.showHorizontal?g().createElement(r.GridItem,{sm:12,key:s},g().createElement(e,{widgetId:s})):g().createElement(r.GridItem,{lg:12,xl:6,xl2:4,key:s},g().createElement(e,{widgetId:s}))))));var m=s(43476),b=s(94377),v=s(67119),y=s(95078),f=s(60232),T=s(35956),P=s(7064),F=s(16530),D=s(901);class R extends g().Component{constructor(){super(...arguments),this.defaultState={isChartComparisonOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e}=this.props;return e.map((e=>g().createElement(r.DropdownItem,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},e.label)))},this.getCurrentLabel=()=>{const{currentItem:e,options:t}=this.props;let s="";for(const r of t)if(e===r.value){s=r.label;break}return s},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isChartComparisonOpen:!this.state.isChartComparisonOpen})},this.handleToggle=e=>{this.setState({isChartComparisonOpen:e})}}render(){const{isChartComparisonOpen:e}=this.state,t=this.getDropDownItems();return g().createElement(r.Dropdown,{onSelect:this.handleSelect,toggle:g().createElement(r.DropdownToggle,{onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:e,dropdownItems:t})}}const S=R;var C=s(91707),w=s(32412),I=s(57640);const Z={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},E={comparison:{marginBottom:w.ZP.value},tabs:{marginTop:C.ZP.value},tabItems:{marginTop:I.ZP.value}};class A extends g().Component{constructor(){super(...arguments),this.state={activeTabKey:0,currentComparison:"cumulative"},this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:s}=this.props,r=s(e);return`${t.viewAllPath}?${(0,y.pm)({group_by:{[r]:"*"},order_by:{cost:"desc"}})}`},this.getChart=(e,t,s=!1)=>{const{chartType:r,trend:a}=this.props;return"dailyTrend"===r?this.getDailyTrendChart(e,t,s,a.showInfrastructureLabel,a.showSupplementaryLabel):"dailyCost"===r?this.getDailyCostChart(e,t,s):"trend"===r?this.getTrendChart(e,t,s,a.showInfrastructureLabel,a.showSupplementaryLabel):"usage"===r?this.getUsageChart(t,s):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:s}=this.state,r=this.getUnits(),a=e.formatMessage(t.titleKey,{units:r}),o=[{label:e.formatMessage(t.dailyTitleKey,{units:r}),value:"daily"},{label:a,value:"cumulative"}];return g().createElement(S,{currentItem:s||o[0].value,onItemClicked:this.handleComparisonClick,options:o})},this.getDailyCostChart=(e,t,s=!1)=>{const{currentReport:r,previousReport:a,trend:o}=this.props,{currentComparison:c}=this.state,i=o.computedReportItem,n=o.computedReportItemValue,l="daily"===c,p=l?1:o.type,u=(0,f.zJ)(r,p,"date","infrastructure",n),h=(0,f.zJ)(a,p,"date","infrastructure",n),d=(0,f.zJ)(r,p,"date",i,n),m=(0,f.zJ)(a,p,"date",i,n),b=this.getForecastData(r,o.computedForecastItem),v=this.getForecastData(r,o.computedForecastInfrastructureItem),y=l?T.V3:T.me;return g().createElement(g().Fragment,null,g().createElement("div",{style:E.comparison},this.getChartComparison()),g().createElement(y,{adjustContainerHeight:s,containerHeight:e,currentCostData:d,currentInfrastructureCostData:u,forecastConeData:b.forecastConeData,forecastData:b.forecastData,forecastInfrastructureConeData:v.forecastConeData,forecastInfrastructureData:v.forecastData,formatDatumValue:D.Bw,formatDatumOptions:o.formatOptions,height:t,previousCostData:m,previousInfrastructureCostData:h,showForecast:void 0!==o.computedForecastItem}))},this.getDailyTrendChart=(e,t,s=!1,r=!1,a=!1)=>{const{currentReport:o,details:c,previousReport:i,trend:n}=this.props,{currentComparison:l}=this.state,p=this.getUnits(),u=n.computedReportItem,h=n.computedReportItemValue,d="daily"===l,m=d?1:n.type,b=(0,f.zJ)(o,m,"date",u,h),v=(0,f.zJ)(i,m,"date",u,h),{forecastData:y,forecastConeData:P}=this.getForecastData(o,n.computedForecastItem),F=d?T.Y0:T.Nd;return g().createElement(g().Fragment,null,g().createElement("div",{style:E.comparison},this.getChartComparison()),g().createElement(F,{adjustContainerHeight:s,containerHeight:e,currentData:b,forecastData:y,forecastConeData:P,formatDatumValue:D.Bw,formatDatumOptions:n.formatOptions,height:t,previousData:v,showForecast:void 0!==n.computedForecastItem,showInfrastructureLabel:r,showSupplementaryLabel:a,showUsageLegendLabel:c.showUsageLegendLabel,units:p}))},this.getForecastData=(e,t="cost")=>{const{forecast:s,trend:r}=this.props,{currentComparison:a}=this.state,o="daily"===a?1:r.type;let c,i;if(t){const r=(0,P.cloneDeep)(s);if(r&&(r.data=[]),s&&e&&e.data){const a=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.value:0,c=e.data.filter((e=>e.values.length)),i=c[c.length-1]?c[c.length-1].date:void 0;if(s&&s.data&&s.data.length>0){const e=new Date(i),t=e.getMonth()+1;for(const a of s.data){const s=new Date(a.date),o=s.getMonth()+1;s>e&&t===o&&r.data.push(a)}if(0===o){const e=s.data[0].values&&s.data[0].values.length>0?s.data[0].values[0].date:void 0,t=1===this.getNumberOfDays(i,e)?i:e;r.data.unshift({date:t,values:[{date:t,cost:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:"USD"}},infrastructure:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:"USD"}},supplementary:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:"USD"}}}]})}}}c=(0,f.nB)(r,o,t),i=(0,f.Qw)(r,o,t)}return{forecastData:c,forecastConeData:i}},this.getNumberOfDays=(e,t)=>{const s=new Date(e),r=new Date(t).getTime()-s.getTime();return Math.round(r/864e5)},this.getTrendChart=(e,t,s=!1,r=!1,a=!1)=>{const{currentReport:o,details:c,intl:i,previousReport:n,trend:l}=this.props,p=this.getUnits(),u=i.formatMessage(l.titleKey,{units:p}),h=l.computedReportItem,d=l.computedReportItemValue,m=(0,f.zJ)(o,l.type,"date",h,d),b=(0,f.zJ)(n,l.type,"date",h,d),{forecastData:v,forecastConeData:y}=this.getForecastData(o,l.computedForecastItem);return g().createElement(T.Nd,{adjustContainerHeight:s,containerHeight:e,currentData:m,forecastData:v,forecastConeData:y,formatDatumValue:D.Bw,formatDatumOptions:l.formatOptions,height:t,previousData:b,showForecast:void 0!==l.computedForecastItem,showInfrastructureLabel:r,showSupplementaryLabel:a,showUsageLegendLabel:c.showUsageLegendLabel,title:u,units:p})},this.getUsageChart=(e,t=!1)=>{const{currentReport:s,intl:r,previousReport:a,trend:o}=this.props,c=this.getUnits(),i=r.formatMessage(o.titleKey,{units:c}),n=(0,f.zJ)(s,o.type,"date","request"),l=(0,f.zJ)(a,o.type,"date","request"),p=(0,f.zJ)(s,o.type,"date","usage"),u=(0,f.zJ)(a,o.type,"date","usage");return g().createElement(T.I0,{adjustContainerHeight:t,containerHeight:Z.containerUsageHeight,currentRequestData:n,currentUsageData:p,formatDatumValue:D.Bw,formatDatumOptions:o.formatOptions,height:e,previousRequestData:l,previousUsageData:u,title:i})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:s,reportType:r,trend:a}=this.props,o=a.computedReportItem||"cost",c=a.computedReportItemValue||"total",i=this.getUnits();return g().createElement(T.rN,{chartType:e,computedReportItem:o,computedReportItemValue:c,costLabel:this.getDetailsLabel(s.costKey,i),formatOptions:s.formatOptions,formatValue:D.Bw,report:t,reportType:r,requestLabel:this.getDetailsLabel(s.requestKey,i),showTooltip:s.showTooltip,showUnits:s.showUnits,showUsageFirst:s.showUsageFirst,units:s.units,usageFormatOptions:s.usageFormatOptions,usageLabel:this.getDetailsLabel(s.usageKey,i)})},this.getDetailsLabel=(e,t)=>{const{intl:s}=this.props;return e?s.formatMessage(e,{units:s.formatMessage(i.Z.Units,{units:t})}):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?g().createElement(F.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:s}=this.props,r=t(e)||"";return s.formatMessage(i.Z.GroupByAll,{value:r,count:2})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=Z.containerAltHeight,chartAltHeight:t=Z.chartAltHeight,currentReportFetchStatus:s,details:r}=this.props;return g().createElement(T.j0,{detailsLink:this.getDetailsLink(),status:s,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,r.adjustContainerHeight))},this.getTab=(e,t)=>{const{getIdKeyForTab:s,tabsReport:a,tabsReportFetchStatus:o}=this.props,c=s(e);return g().createElement(r.Tab,{eventKey:t,key:`${s(e)}-tab`,title:g().createElement(r.TabTitleText,null,this.getTabTitle(e))},g().createElement("div",{style:E.tabItems},g().createElement(T.mZ,{idKey:c,key:`${c}-items`,report:a,status:o},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:s,details:r,getIdKeyForTab:a,tabsReport:o,topItems:c,trend:i}=this.props,{activeTabKey:n}=this.state,l=a(e),p=a(s[n]),u=i.computedReportItem||"cost",h=i.computedReportItemValue||"total";let d;const m=o&&o.meta&&o.meta.total;return"usage"===u?m&&o.meta.total.usage&&(d=o.meta.total.usage.value):m&&o.meta.total[u]&&o.meta.total[u][h]&&(d=o.meta.total[u][h].value),p===l?g().createElement(T.EH,{key:`${t.id}-item`,formatOptions:c.formatOptions,formatValue:D.Bw,label:t.label?t.label.toString():"",totalValue:d,units:r.units?r.units:this.getUnits(),value:t[u][h].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return g().createElement(r.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:s}=this.props,r=t(e)||"";return s.formatMessage(i.Z.GroupByTop,{value:r,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,intl:s,trend:r}=this.props,a=r.computedReportItem||"cost",o=r.computedReportItemValue||"total";if(t.units)return s.formatMessage(i.Z.Units,{units:(0,D.dM)(t.units)});let c;const n=e&&e.meta&&e.meta.total;return c="usage"===a?n&&e.meta.total.usage?(0,D.dM)(e.meta.total.usage.units):"":n&&e.meta.total[a]&&e.meta.total[a][o]?(0,D.dM)(e.meta.total[a][o].units):"",c?s.formatMessage(i.Z.Units,{units:c}):""},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:s}=this.props;return g().createElement(T.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(Z.containerTrendHeight,Z.chartHeight,s.adjustContainerHeight),Boolean(e)&&g().createElement("div",{style:E.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:s,id:r,updateTab:a}=this.props;a(r,s[t]),this.setState({activeTabKey:t})}}componentDidMount(){const{availableTabs:e,fetchForecasts:t,fetchReports:s,id:r,trend:a,updateTab:o,widgetId:c}=this.props;e&&o(r,e[0]),s&&s(c),void 0!==a.computedForecastItem&&t(c)}render(){const{details:e}=this.props;return e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}var O=s(74806),V=s(83127),_=s(42581);const L=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},W=(0,b.X1)(((e,{widgetId:t})=>{const s=v.Cv.selectWidget(e,t),r=v.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:L,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),j={fetchForecasts:v.Kf.v4,fetchReports:v.Kf.a4,updateTab:v.Kf.as},M=(0,O.ZP)((0,m.connect)(W,j)(A)),Q=(0,b.X1)(((e,t)=>({DashboardWidget:M,selectWidgets:v.Cv.selectWidgets(e),widgets:v.Cv.selectCurrentWidgets(e)}))),K=(0,m.connect)(Q,{})(d);var k=s(99317);const z=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},U=(0,b.X1)(((e,{widgetId:t})=>{const s=k.Hc.selectWidget(e,t),r=k.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:z,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),H={fetchForecasts:k.NA.v4,fetchReports:k.NA.a4,updateTab:k.NA.as},X=(0,O.ZP)((0,m.connect)(U,H)(A)),x=(0,b.X1)(((e,t)=>({DashboardWidget:X,selectWidgets:k.Hc.selectWidgets(e),widgets:k.Hc.selectCurrentWidgets(e)}))),B=(0,m.connect)(x,{})(d);var J=s(31554);const N=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},G=(0,b.X1)(((e,{widgetId:t})=>{const s=J.rj.selectWidget(e,t),r=J.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:N,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),$={fetchForecasts:J.oc.v4,fetchReports:J.oc.a4,updateTab:J.oc.as},q=(0,O.ZP)((0,m.connect)(G,$)(A)),Y=(0,b.X1)(((e,t)=>({DashboardWidget:q,selectWidgets:J.rj.selectWidgets(e),widgets:J.rj.selectCurrentWidgets(e)}))),ee=(0,m.connect)(Y,{})(d);var te=s(44986);const se=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},re=(0,b.X1)(((e,{widgetId:t})=>{const s=te.MW.selectWidget(e,t),r=te.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:se,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),ae={fetchForecasts:te._V.v4,fetchReports:te._V.a4,updateTab:te._V.as},oe=(0,O.ZP)((0,m.connect)(re,ae)(A)),ce=(0,b.X1)(((e,t)=>({DashboardWidget:oe,selectWidgets:te.MW.selectWidgets(e),widgets:te.MW.selectCurrentWidgets(e)}))),ie=(0,m.connect)(ce,{})(d);var ne=s(79522);const le=e=>{switch(e){case"services":return"service";case"projects":return"project";case"regions":return"region";case"instance_type":return"instance_type"}},pe=(0,b.X1)(((e,{widgetId:t})=>{const s=ne.oS.selectWidget(e,t),r=ne.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:le,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),ue={fetchForecasts:ne.n5.v4,fetchReports:ne.n5.a4,updateTab:ne.n5.as},he=(0,O.ZP)((0,m.connect)(pe,ue)(A)),ge=(0,b.X1)(((e,t)=>({DashboardWidget:he,selectWidgets:ne.oS.selectWidgets(e),widgets:ne.oS.selectCurrentWidgets(e)}))),de=(0,m.connect)(ge,{})(d);var me=s(85394);const be=e=>{switch(e){case"services":return"service";case"projects":return"project";case"regions":return"region";case"instance_type":return"instance_type"}},ve=(0,b.X1)(((e,{widgetId:t})=>{const s=me.FF.selectWidget(e,t),r=me.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:be,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),ye={fetchForecasts:me.uM.v4,fetchReports:me.uM.a4,updateTab:me.uM.as},fe=(0,O.ZP)((0,m.connect)(ve,ye)(A)),Te=(0,b.X1)(((e,t)=>({DashboardWidget:fe,selectWidgets:me.FF.selectWidgets(e),widgets:me.FF.selectCurrentWidgets(e)}))),Pe=(0,m.connect)(Te,{})(d);var Fe=s(75836);const De=e=>{switch(e){case"services":return"service";case"projects":return"project";case"regions":return"region";case"instance_type":return"instance_type"}},Re=(0,b.X1)(((e,{widgetId:t})=>{const s=Fe.Pi.selectWidget(e,t),r=Fe.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:De,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Se={fetchForecasts:Fe.lj.v4,fetchReports:Fe.lj.a4,updateTab:Fe.lj.as},Ce=(0,O.ZP)((0,m.connect)(Re,Se)(A)),we=(0,b.X1)(((e,t)=>({DashboardWidget:Ce,selectWidgets:Fe.Pi.selectWidgets(e),widgets:Fe.Pi.selectCurrentWidgets(e)}))),Ie=(0,m.connect)(we,{})(d);var Ze=s(83123);const Ee=e=>{switch(e){case"accounts":return"account";case"regions":return"region";case"services":return"service"}},Ae=(0,b.X1)(((e,{widgetId:t})=>{const s=Ze.qN.selectWidget(e,t),r=Ze.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:Ee,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Oe={fetchForecasts:Ze.BV.v4,fetchReports:Ze.BV.a4,updateTab:Ze.BV.as},Ve=(0,O.ZP)((0,m.connect)(Ae,Oe)(A)),_e=(0,b.X1)(((e,t)=>({DashboardWidget:Ve,selectWidgets:Ze.qN.selectWidgets(e),widgets:Ze.qN.selectCurrentWidgets(e)}))),Le=(0,m.connect)(_e,{})(d);var We=s(17563);const je=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Me=(0,b.X1)(((e,{widgetId:t})=>{const s=We.nH.selectWidget(e,t),r=We.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign({},s),{getIdKeyForTab:je,chartAltHeight:250,containerAltHeight:250,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:V.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:_.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Qe={fetchForecasts:We.U6.v4,fetchReports:We.U6.a4,updateTab:We.U6.as},Ke=(0,O.ZP)((0,m.connect)(Me,Qe)(A)),ke=(0,b.X1)(((e,t)=>({DashboardWidget:Ke,selectWidgets:We.nH.selectWidgets(e),widgets:We.nH.selectCurrentWidgets(e)}))),ze=(0,m.connect)(ke,{})(d);var Ue=s(94329),He=s(45235),Xe=s(26018),xe=s(1723),Be=s(33307),Je=s(45785),Ne=s(17918),Ge=s(98499);const $e={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},infoIcon:{fontSize:Ne.ZP.value},infoTitle:{fontWeight:"bold"},perspective:{display:"flex",marginTop:Ge.ZP.value},tabs:{marginTop:Ge.ZP.value}},qe=e=>{switch(e){case"infrastructure":return"infrastructure";case"ocp":return"ocp"}},Ye=[{label:i.Z.PerspectiveValues,value:"ocp"}],et=[{label:i.Z.PerspectiveValues,value:"aws"}],tt=[{label:i.Z.PerspectiveValues,value:"aws_ocp"}],st=[{label:i.Z.PerspectiveValues,value:"azure"}],rt=[{label:i.Z.PerspectiveValues,value:"azure_ocp"}],at=[{label:i.Z.PerspectiveValues,value:"gcp"}],ot=[{label:i.Z.PerspectiveValues,value:"ibm"}];class ct extends g().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const e=[];return this.isOcpAvailable()&&e.push({contentRef:g().createRef(),tab:"ocp"}),(this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOcpCloudAvailable())&&e.push({contentRef:g().createRef(),tab:"infrastructure"}),e},this.getCurrentTab=()=>{const{activeTabKey:e}=this.state,t=this.isAwsAvailable(),s=this.isAzureAvailable(),r=this.isGcpAvailable(),a=this.isIbmAvailable(),o=this.isOcpAvailable(),c=this.isOcpCloudAvailable();return o&&!(t||s||r||a||c)?"ocp":!o&&(t||s||r||a||c)?"infrastructure":0===e?"ocp":"infrastructure"},this.getDefaultInfrastructurePerspective=()=>this.isAwsAvailable()?"aws":this.isAzureAvailable()?"azure":this.isGcpAvailable()?"gcp":this.isIbmAvailable()?"ibm":void 0,this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,ocpProvidersFetchStatus:t,userAccess:s}=this.props;if((0,Je.mn)(s,e,t))return"ocp"},this.getPerspective=()=>{const{currentInfrastructurePerspective:e,currentOcpPerspective:t}=this.state,s=this.isAwsAvailable(),r=this.isAzureAvailable(),a=this.isGcpAvailable(),o=this.isIbmAvailable(),c=this.isOcpAvailable();if(!(s||r||a||o||c))return null;const i=[];"infrastructure"===this.getCurrentTab()?(s&&i.push(...et),s&&c&&i.push(...tt),a&&i.push(...at),o&&i.push(...ot),r&&i.push(...st),r&&c&&i.push(...rt)):i.push(...Ye);const n="infrastructure"===this.getCurrentTab()?e:t;return g().createElement(u.X,{currentItem:n||i[0].value,onItemClicked:this.handlePerspectiveClick,options:i})},this.getTab=(e,t,s)=>g().createElement(r.Tab,{eventKey:s,key:`${qe(e)}-tab`,tabContentId:`tab-${s}`,tabContentRef:t,title:g().createElement(r.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>g().createElement(r.TabContent,{eventKey:t,key:`${qe(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:s,azureProviders:r,gcpProviders:a,ibmProviders:o,ocpProviders:c}=this.props,{activeTabKey:i,currentInfrastructurePerspective:n,currentOcpPerspective:p}=this.state,u=g().createElement(g().Fragment,null),h=g().createElement(l.Z,{showReload:!1});if(i!==t)return u;const d=qe(e);if("infrastructure"===d)return"ocp_cloud"===n?(0,Ue.g8)(c)||(0,Ue.rL)(c)?g().createElement(Le,null):h:"aws"===n?(0,Ue.g8)(s)||(0,Ue.rL)(s)?g().createElement(K,null):h:"aws_ocp"===n?(0,Ue.at)(s,c)||(0,Ue.D2)(s,c)?g().createElement(B,null):h:"gcp"===n?(0,Ue.g8)(a)||(0,Ue.rL)(a)?g().createElement(de,null):h:"gcp_ocp"===n?(0,Ue.at)(a,c)||(0,Ue.D2)(a,c)?g().createElement(Pe,null):h:"ibm"===n?(0,Ue.g8)(o)||(0,Ue.rL)(o)?g().createElement(Ie,null):h:"azure"===n?(0,Ue.g8)(r)||(0,Ue.rL)(r)?g().createElement(ee,null):h:"azure_ocp"===n&&((0,Ue.at)(r,c)||(0,Ue.D2)(r,c))?g().createElement(ie,null):h;if("ocp"===d){const e=(0,Ue.g8)(c)||(0,Ue.rL)(c);return"ocp"===p&&e?g().createElement(ze,null):h}return u},this.getTabs=e=>{const{activeTabKey:t}=this.state;return g().createElement(r.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return"infrastructure"===e?t.formatMessage(i.Z.Infrastructure):"ocp"===e?t.formatMessage(i.Z.OpenShift):void 0},this.handlePerspectiveClick=e=>{const t=this.getCurrentTab();this.setState(Object.assign(Object.assign({},"infrastructure"===t&&{currentInfrastructurePerspective:e}),"ocp"===t&&{currentOcpPerspective:e}))},this.handleTabClick=(e,t)=>{const{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t})},this.isAwsAvailable=()=>{const{awsProviders:e,awsProvidersFetchStatus:t,userAccess:s}=this.props;return(0,Je.n9)(s,e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,azureProvidersFetchStatus:t,userAccess:s}=this.props;return(0,Je.hn)(s,e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,gcpProvidersFetchStatus:t,userAccess:s}=this.props;return(0,Je.FE)(s,e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,ibmProvidersFetchStatus:t,ibmUserAccess:s}=this.props;return(0,Je.Es)(s,e,t)},this.isOcpAvailable=()=>{const{ocpProviders:e,ocpProvidersFetchStatus:t,userAccess:s}=this.props;return(0,Je.mn)(s,e,t)},this.isOcpCloudAvailable=()=>this.isAwsAvailable()&&this.isOcpAvailable()}componentDidMount(){const{resetState:e}=this.props;e(),this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}componentDidUpdate(e){const{awsProviders:t,azureProviders:s,gcpProviders:r,ibmProviders:a,ocpProviders:o,userAccess:c}=this.props;e.userAccess===c&&e.awsProviders===t&&e.azureProviders===s&&e.gcpProviders===r&&e.ibmProviders===a&&e.ocpProviders===o||this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}render(){const{awsProvidersFetchStatus:e,azureProvidersFetchStatus:t,gcpProvidersFetchStatus:s,ibmProvidersFetchStatus:o,intl:c,ocpProvidersFetchStatus:l,userAccessFetchStatus:u}=this.props,h=this.getAvailableTabs(),d=1===e||1===t||1===s||1===o||1===l||1===u,m=!this.isAwsAvailable()&&2===e,b=!this.isAzureAvailable()&&2===t,v=!this.isGcpAvailable()&&2===s,y=!this.isIbmAvailable()&&2===o,f=!this.isOcpAvailable()&&2===l,T=m&&b&&v&&y&&f,P=c.formatMessage(i.Z.OverviewTitle);return T?g().createElement(p.Z,{title:P}):d?g().createElement(n.Z,{title:P}):g().createElement(g().Fragment,null,g().createElement("section",{className:"pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light headerOverride}"},g().createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},g().createElement(r.Title,{headingLevel:"h1",size:r.TitleSizes["2xl"]},P,g().createElement("span",{style:$e.infoIcon},g().createElement(r.Popover,{"aria-label":c.formatMessage(i.Z.OverviewInfoArialLabel),enableFlip:!0,bodyContent:g().createElement(g().Fragment,null,g().createElement("p",{style:$e.infoTitle},c.formatMessage(i.Z.OpenShiftCloudInfrastructure)),g().createElement("p",null,c.formatMessage(i.Z.OpenShiftCloudInfrastructureDesc)),g().createElement("br",null),g().createElement("p",{style:$e.infoTitle},c.formatMessage(i.Z.OpenShift)),g().createElement("p",null,c.formatMessage(i.Z.OpenShiftDesc)),g().createElement("br",null),g().createElement("p",{style:$e.infoTitle},c.formatMessage(i.Z.GCP)),g().createElement("p",null,c.formatMessage(i.Z.GCPDesc)),g().createElement("br",null),g().createElement("p",{style:$e.infoTitle},c.formatMessage(i.Z.IBM)),g().createElement("p",null,c.formatMessage(i.Z.IBMDesc)),g().createElement("br",null),g().createElement("p",{style:$e.infoTitle},c.formatMessage(i.Z.AWS)),g().createElement("p",null,c.formatMessage(i.Z.AWSDesc)),g().createElement("br",null),g().createElement("p",{style:$e.infoTitle},c.formatMessage(i.Z.Azure)),g().createElement("p",null,c.formatMessage(i.Z.AzureDesc)))},g().createElement(r.Button,{variant:r.ButtonVariant.plain},g().createElement(a.iC,null)))))),g().createElement("div",{style:$e.tabs},this.getTabs(h)),g().createElement("div",{style:$e.perspective},this.getPerspective(),g().createElement("div",{style:$e.date},(0,Be.J4)()))),g().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},this.getTabContent(h)))}}const it=(0,b.X1)(((e,t)=>{const s=(0,o.H)(He.JL),r=He.aX.selectProviders(e,"aws",s),a=He.aX.selectProvidersFetchStatus(e,"aws",s),i=(0,o.H)(He.u5),n=He.aX.selectProviders(e,"azure",i),l=He.aX.selectProvidersFetchStatus(e,"azure",i),p=(0,o.H)(He.U6),u=He.aX.selectProviders(e,"gcp",p),h=He.aX.selectProvidersFetchStatus(e,"gcp",p),g=(0,o.H)(He.t8),d=He.aX.selectProviders(e,"ibm",g),m=He.aX.selectProvidersFetchStatus(e,"ibm",g),b=(0,o.H)(He.Vp),v=He.aX.selectProviders(e,"ocp",b),y=He.aX.selectProvidersFetchStatus(e,"ocp",b),f=(0,c.T)(xe.BD),T=xe.JO.selectUserAccess(e,"",f),P=xe.JO.selectUserAccessError(e,"",f),F=xe.JO.selectUserAccessFetchStatus(e,"",f),D=(0,c.T)(xe.HC);return{awsProviders:r,awsProvidersFetchStatus:a,awsProvidersQueryString:s,azureProviders:n,azureProvidersFetchStatus:l,azureProvidersQueryString:i,gcpProviders:u,gcpProvidersFetchStatus:h,gcpProvidersQueryString:p,ibmProviders:d,ibmProvidersFetchStatus:m,ibmProvidersQueryString:g,ibmUserAccess:xe.JO.selectUserAccess(e,"ibm",D),ibmUserAccessError:xe.JO.selectUserAccessError(e,"ibm",D),ibmUserAccessFetchStatus:xe.JO.selectUserAccessFetchStatus(e,"ibm",D),ibmUserAccessQueryString:D,ocpProviders:v,ocpProvidersFetchStatus:y,ocpProvidersQueryString:b,userAccess:T,userAccessError:P,userAccessFetchStatus:F,userAccessQueryString:f}})),nt={resetState:Xe.Aw.oA},lt=(0,O.ZP)((0,m.connect)(it,nt)(ct))},901:(e,t,s)=>{"use strict";s.d(t,{dM:()=>o,Bw:()=>c,xG:()=>n,$l:()=>l});var r=s(32004),a=s(93952);const o=e=>{const t=e?e.replace(/[- ]/g,"_").toLowerCase():"";switch(t){case"core_hours":case"gb":case"gb_hours":case"gb_mo":case"gibibyte_month":case"hour":case"hrs":case"tag_mo":case"vm_hours":case"usd":return t;case"$usd":return"usd";default:return""}},c=(e,t,s={})=>{const r=o(t),a=e||0;switch(r){case"usd":return n(a,r,s);case"gb":case"gb_hours":case"gb_mo":case"gibibyte_month":case"tag_mo":case"vm_hours":return p(a,r,s);case"coreHours":case"hour":case"hrs":return u(a,r,s);default:return i(a,r,s)}},i=(e,t,{fractionDigits:s=0}={})=>e.toLocaleString((0,r.K)(),{minimumFractionDigits:s,maximumFractionDigits:s}),n=(e,t,{fractionDigits:s=2}={})=>{let a=e;return e||(a=0),a.toLocaleString((0,r.K)(),{style:"currency",currency:t||"USD",minimumFractionDigits:s,maximumFractionDigits:s})},l=(e,t,{fractionDigits:s=2}={})=>{let o=e;e||(o=0);const c=[{val:1e15,symbol:"quadrillion"},{val:1e12,symbol:"trillion"},{val:1e9,symbol:"billion"},{val:1e6,symbol:"million"},{val:1e3,symbol:"thousand"}];let i;if(null!=c&&(i=c.find((e=>o>=e.val))),null!=i){const{val:e,symbol:c}=i,n=(o/e).toLocaleString((0,r.K)(),{style:"currency",currency:t||"USD",minimumFractionDigits:0,maximumFractionDigits:s}).match(/([\D]*)([\d.,]+)([\D]*)/),l=r.N.formatMessage(a.Z.CurrencyAbbreviations,{value:c});return`${n[1]}${n[2]}${l}${n[3]}`}return o.toLocaleString((0,r.K)(),{style:"currency",currency:t||"USD",minimumFractionDigits:0,maximumFractionDigits:s})},p=(e,t,{fractionDigits:s=0}={})=>e.toLocaleString((0,r.K)(),{minimumFractionDigits:s,maximumFractionDigits:s}),u=(e,t,{fractionDigits:s=0}={})=>e.toLocaleString((0,r.K)(),{minimumFractionDigits:s,maximumFractionDigits:s})},45785:(e,t,s)=>{"use strict";s.d(t,{KT:()=>o,n9:()=>c,FW:()=>i,hn:()=>n,ot:()=>l,Sv:()=>p,FE:()=>u,tt:()=>h,Es:()=>g,Rt:()=>d,mn:()=>m});const r=(e,t)=>{let s=!1;if(e&&Array.isArray(e.data)){const r=e.data.find((e=>e.type===t));s=r&&r.access}else s=e&&!0===e.data;return s},a=(e,t)=>{let s=!1;return 2===t&&(s=void 0!==e&&void 0!==e.meta&&e.meta.count>0),s},o=e=>r(e,"aws"),c=(e,t,s)=>o(e)&&a(t,s),i=e=>r(e,"azure"),n=(e,t,s)=>i(e)&&a(t,s),l=e=>r(e,"cost_model"),p=e=>r(e,"gcp"),u=(e,t,s)=>r(e,"gcp")&&a(t,s),h=e=>p(e),g=(e,t,s)=>h(e)&&a(t,s),d=e=>r(e,"ocp"),m=(e,t,s)=>d(e)&&a(t,s)}}]);
//# sourceMappingURL=fe7af5aa9bae4d8c2929.bundle.js.map