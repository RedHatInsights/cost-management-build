(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{122:function(e,t,a){"use strict";a.r(t),function(e){var r=a(40),n=a(339);t.default=Object(r.hot)(e)(n.a)}.call(this,a(38)(e))},185:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n});const r=e=>({"data-testid":e}),n={export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",submit_btn:"submit-btn",type_input:"provider-type-input"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},208:function(e,t,a){"use strict";var r=a(560),n=a(0),s=a.n(n),o=a(127);const i=r.a.create({textInput:{width:"100%",fontSize:o.q.value,paddingTop:o.I.value,paddingRight:o.H.value,paddingBottom:o.I.value,paddingLeft:o.G.value,lineHeight:"24px",outline:0,border:`${o.h.value} solid ${o.d.value}`,":focus":{borderColor:o.e.value}},flat:{border:"none",borderBottom:[o.h.value,"solid",o.d.value].join(" "),":focus":{borderBottom:[o.g.value,"solid",o.e.value].join(" ")}},error:{borderColor:o.x.value,":focus":{borderColor:o.y.value}}});var l=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&(a[r[n]]=e[r[n]])}return a};class c extends s.a.Component{constructor(){super(...arguments),this.handleChange=(e=>{this.props.onChange(e.currentTarget.value,e)}),this.handleKeyPressed=(e=>{this.props.onKeyPress&&"Enter"===e.key&&(e.preventDefault(),this.props.onKeyPress(e))})}render(){const e=this.props,{className:t,isFlat:a,isError:n}=e,o=l(e,["className","isFlat","isError"]);return s.a.createElement("input",Object.assign({},o,{className:Object(r.b)(t,i.textInput,a&&i.flat,n&&i.error),onChange:this.handleChange,onKeyPress:this.handleKeyPressed}))}}a.d(t,"a",function(){return c})},209:function(e,t,a){"use strict";var r=a(560),n=a(0),s=a.n(n);let o=0;class i extends s.a.Component{constructor(){super(...arguments),this.id=`${this.props.prefix}${o++}`}render(){return this.props.children({id:this.id})}}i.defaultProps={prefix:"random-id-"};var l=a(127);const c=r.a.create({formGroup:{marginBottom:l.A.value},label:{display:"block",fontWeight:l.u.value,paddingBottom:l.G.value}}),d=({label:e,children:t})=>s.a.createElement(i,{prefix:e},({id:a})=>s.a.createElement("div",{className:Object(r.b)(c.formGroup)},s.a.createElement("label",{className:Object(r.b)(c.label),htmlFor:a},e),s.a.createElement("div",null,s.a.cloneElement(s.a.Children.only(t),{id:a}))));a.d(t,"a",function(){return d})},339:function(e,t,a){"use strict";var r=a(575),n=a(566),s=a(54),o=a(560),i=a(209),l=a(208),c=a(0),d=a.n(c),u=a(31),p=a(26),b=a(37),h=a(11),m=a(25),v=a(185),g=a(127);const f=o.a.create({alert:{marginBottom:g.F.value},docs:{marginBottom:g.F.value},modal:{width:"700px"}});t.a=Object(p.b)(Object(b.a)(e=>({isProviderModalOpen:m.c.selectIsProvidersModalOpen(e),error:h.c.selectAddProviderError(e),fetchStatus:h.c.selectAddProviderFetchStatus(e)})),{addProvider:h.a.addProvider,clearProviderFailure:h.a.clearProviderFailure,closeProvidersModal:m.a.closeProvidersModal})(Object(u.c)()(class extends d.a.Component{constructor(){super(...arguments),this.defaultState={bucket:"",bucketInvalidMsg:null,name:"",nameInvalidMsg:null,resourceName:"",resourceNameInvalidMsg:null,type:"AWS"},this.state=Object.assign({},this.defaultState),this.handleAddProvider=(()=>{this.props.addProvider({name:this.state.name,type:this.state.type,authentication:{provider_resource_name:this.state.resourceName},billing_source:{bucket:this.state.bucket}})}),this.handleCancel=(()=>{this.props.closeProvidersModal()}),this.handleBucketChange=(e=>{const{t:t}=this.props,a=new RegExp("^[a-zA-Z0-9.\\-_]{0,255}$").test(e)?null:t("providers.bucket_error");this.setState(()=>({bucket:e,bucketInvalidMsg:a})),this.props.clearProviderFailure()}),this.handleNameChange=(e=>{const{t:t}=this.props,a=new RegExp("^.?").test(e)?null:t("providers.name_error");this.setState(()=>({name:e,nameInvalidMsg:a})),this.props.clearProviderFailure()}),this.handleResourceNameChange=(e=>{const{t:t}=this.props,a=e.length>0&&!new RegExp("^arn:aws:").test(e)?t("providers.resource_name_error"):null;this.setState(()=>({resourceName:e,resourceNameInvalidMsg:a})),this.props.clearProviderFailure()})}componentDidUpdate(e){const{isProviderModalOpen:t}=this.props;t&&!e.isProviderModalOpen&&this.setState(Object.assign({},this.defaultState))}render(){const{t:e,error:t}=this.props,{bucket:a,bucketInvalidMsg:c,name:u,nameInvalidMsg:p,resourceName:b,resourceNameInvalidMsg:h}=this.state,m=0===a.trim().length||0===u.trim().length||0===b.trim().length,g=null!==c||null!==p||null!==h,_=t&&t.response&&(t.response.data.bucket||t.response.data.billing_source),O=t&&t.response&&t.response.data.name,k=t&&t.response&&(t.response.data.provider_resource_name||t.response.data.authentication);let j=e("providers.default_error");return _?j=t.response.data.bucket||t.response.data.billing_source.bucket:O?j=t.response.data.name:k&&(j=t.response.data.provider_resource_name||t.response.data.authentication.provider_resource_name),d.a.createElement(s.a,{className:Object(o.b)(f.modal),isLarge:!0,isOpen:this.props.isProviderModalOpen,onClose:this.handleCancel,title:e("providers.add_account"),actions:[d.a.createElement(n.c,Object.assign({},Object(v.a)(v.b.providers.cancel_btn),{key:"cancel",onClick:this.handleCancel,variant:n.b.secondary}),e("providers.cancel")),d.a.createElement(n.c,Object.assign({},Object(v.a)(v.b.providers.submit_btn),{key:"confirm",isDisabled:m||g||1===this.props.fetchStatus,onClick:this.handleAddProvider,variant:n.b.primary}),e("providers.confirm"))]},Boolean(t||g)&&d.a.createElement("div",{className:Object(o.b)(f.alert)},d.a.createElement(r.b,Object.assign({},Object(v.a)(v.b.login.alert),{variant:r.a.danger,title:c||p||h||j}))),d.a.createElement("p",{className:Object(o.b)(f.docs)},"View the"," ",d.a.createElement("a",{href:"https://koku.readthedocs.io/en/latest/providers.html#adding-an-aws-account",target:"_blank"},"Koku documentation")," ","and learn how to configure your AWS account to allow Koku access."),d.a.createElement(i.a,{label:e("providers.name_label")},d.a.createElement(l.a,Object.assign({},Object(v.a)(v.b.providers.name_input),{autoFocus:!0,isError:Boolean(O),isFlat:!0,onChange:this.handleNameChange,placeholder:"AWSHCCM",value:u}))),d.a.createElement(i.a,{label:e("providers.bucket_label")},d.a.createElement(l.a,Object.assign({},Object(v.a)(v.b.providers.bucket_input),{isError:Boolean(_||c),isFlat:!0,type:"text",onChange:this.handleBucketChange,placeholder:"cost-usage-bucket",value:a}))),d.a.createElement(i.a,{label:e("providers.resource_name_label")},d.a.createElement(l.a,Object.assign({},Object(v.a)(v.b.providers.resource_name_input),{isError:Boolean(k||h),isFlat:!0,onChange:this.handleResourceNameChange,placeholder:"arn:aws:iam::589173575009:role/CostManagement",value:b}))))}}))}}]);
//# sourceMappingURL=afab507dd4152388d334.bundle.js.map