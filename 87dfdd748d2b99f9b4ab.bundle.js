"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[176],{16679:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r(64146).Z},46774:(e,t,r)=>{r.d(t,{X:()=>G});var a=r(22938),s=r(45997),o=r(30232),n=r(93952),i=r(44439),l=r(92950),c=r.n(l),p=r(74806),u=r(98147),h=r(94377),d=r(95413),g=r(76821),m=r(41251),y=r(32412),v=r(48196),b=r(73861);const f={alert:{marginBottom:y.ZP.var},form:{marginLeft:v.ZP.var},modal:{input:{marginRight:b.ZP.var},ul:{marginLeft:v.ZP.var}},title:{marginBottom:y.ZP.var}};var C=r(17844),S=r(43703),T=r(35823),E=r.n(T),O=r(33307);const Z="cost";class D extends c().Component{constructor(e,t){super(e,t),this.defaultState={fetchReportClicked:!1},this.state=Object.assign({},this.defaultState),this.getExport=()=>{const{report:e,reportFetchStatus:t}=this.props;e&&2===t&&(E()(e.data,this.getFileName(),"text/csv"),this.handleClose())},this.getFileName=()=>{const{endDate:e,groupBy:t,intl:r,reportPathsType:a,resolution:o,startDate:i}=this.props;return`${r.formatMessage(n.Z.exportFileName,{endDate:e,provider:a,groupBy:-1!==t.indexOf(s.P)?"tag":t,resolution:o,startDate:i})}.csv`},this.handleClose=()=>{const{reportError:e}=this.props;this.setState(Object.assign({},this.defaultState),(()=>{e||this.props.onClose(!1)}))},this.handleFetchReport=()=>{const{exportReport:e,queryString:t,reportPathsType:r}=this.props;e(r,Z,t),this.setState({fetchReportClicked:!0},(()=>{this.getExport()}))}}componentDidUpdate(e){const{report:t,reportError:r}=this.props,{fetchReportClicked:a}=this.state;e.report!==t&&a&&this.getExport(),r&&this.props.onError(r)}render(){const{disabled:e,intl:t,reportFetchStatus:r}=this.props;return c().createElement(a.Button,Object.assign({},(0,g.g_)(g._q.export.submit_btn),{isDisabled:e||1===r,key:"confirm",onClick:this.handleFetchReport,variant:a.ButtonVariant.primary}),t.formatMessage(n.Z.exportGenerate))}}const B=(0,h.X1)(((e,t)=>{const{groupBy:r,isAllItems:a,items:n,query:i,reportPathsType:l,resolution:c,timeScope:p}=t;let u=i.end_date,h=i.start_date;const g=(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(i))),{filter:Object.assign({limit:void 0,offset:void 0,resolution:c||void 0},!(h&&u)&&{time_scope_value:"previous"===p?-2:-1}),filter_by:{},limit:0,order_by:void 0,perspective:void 0,dateRange:void 0,delta:void 0});if(i.filter_by)for(const t of Object.keys(i.filter_by))void 0===e.filter_by[t]&&(e.filter_by[t]=[]),e.filter_by[t].push(i.filter_by[t]);if(a)r===s.dV&&(void 0===e.filter_by[s.dV]&&(e.filter_by[s.dV]=[]),e.filter_by[s.dV].push(i.group_by[s.dV]));else if(r===s.dV)for(const t of n){const r="organizational_unit"===t.type?s.dV:t.type;void 0===e.filter_by[r]&&(e.filter_by[r]=[]),e.filter_by[r].push(t.id)}else for(const t of n)void 0===e.filter_by[r]&&(e.filter_by[r]=[]),e.filter_by[r].push(t.id);return(0,s.pm)(e)})(),m=d.$S.selectExport(e,l,Z,g),y=d.$S.selectExportError(e,l,Z,g),v=d.$S.selectExportFetchStatus(e,l,Z,g);if(!h||!u){const e="previous"===p,t=(0,O.x2)();e&&t.setMonth(t.getMonth()-1),u=(0,o.Z)(e?(0,C.Z)(t):t,"yyyy-MM-dd"),h=(0,o.Z)((0,S.Z)(t),"yyyy-MM-dd")}return{endDate:u,queryString:g,report:m,reportError:y,reportFetchStatus:v,startDate:h}})),x={exportReport:d.HY.Hy},R=(0,u.connect)(B,x)(D),k=(0,p.ZP)(R),M=[{label:n.Z.exportFormatType,value:"csv"},{label:n.Z.exportFormatType,value:"json"}],L=[{label:n.Z.exportResolution,value:"daily"},{label:n.Z.exportResolution,value:"monthly"}],P=[{label:n.Z.exportTimeScope,value:"current"},{label:n.Z.exportTimeScope,value:"previous"}];class _ extends c().Component{constructor(e,t){super(e,t),this.defaultState={error:void 0,formatType:"csv",timeScope:"current",resolution:this.props.resolution||"monthly"},this.state=Object.assign({},this.defaultState),this.handleClose=()=>{this.setState(Object.assign({},this.defaultState),(()=>{this.props.onClose(!1)}))},this.handleError=e=>{this.setState({error:e})},this.handleMonthChange=(e,t)=>{this.setState({timeScope:t.currentTarget.value})},this.handleNameChange=(e,t)=>{this.setState({name:t.currentTarget.value})},this.handleResolutionChange=(e,t)=>{this.setState({resolution:t.currentTarget.value})},this.handleTypeChange=(e,t)=>{this.setState({formatType:t.currentTarget.value})},this.nameValidator=e=>0===e.trim().length?n.Z.exportNameRequired:e.length>50?n.Z.exportNameTooLong:void 0,this.handleMonthChange=this.handleMonthChange.bind(this),this.handleResolutionChange=this.handleResolutionChange.bind(this),this.handleTypeChange=this.handleTypeChange.bind(this)}render(){const{count:e=0,groupBy:t,intl:r,isAllItems:l,items:p,query:u,reportPathsType:h,showAggregateType:d=!0,showFormatType:y=!0,showTimeScope:v=!0}=this.props,{error:b,formatType:C,name:S,resolution:T,timeScope:E}=this.state;let O=[...p];this.props.isOpen&&(O=p&&0===p.length&&l?[{label:r.formatMessage(n.Z.exportAll)}]:(0,i.orderBy)(O,["label"],["asc"]));let Z=r.formatMessage(n.Z.exportSelected,{groupBy:t,count:e});-1!==t.indexOf(s.P)&&(Z=r.formatMessage(n.Z.exportSelected,{groupBy:"tag",count:e}));const D=new Date,B=(new Date).setMonth(D.getMonth()-1),x=(0,o.Z)(D,"MMMM yyyy"),R=(0,o.Z)(B-1,"MMMM yyyy"),_=void 0!==S?S:r.formatMessage(n.Z.exportName,{provider:h,groupBy:-1!==t.indexOf(s.P)?"tag":t}),w=this.nameValidator(_),V=w?"error":"default";return c().createElement(a.Modal,{style:f.modal,isOpen:this.props.isOpen,onClose:this.handleClose,title:r.formatMessage(n.Z.exportTitle),variant:"small",actions:[c().createElement(k,{disabled:"error"===V,formatType:C,groupBy:t,isAllItems:l,items:p,key:"confirm",timeScope:v?E:void 0,onClose:this.handleClose,onError:this.handleError,name:_,query:u,reportPathsType:h,resolution:T}),c().createElement(a.Button,Object.assign({},(0,g.g_)(g._q.export.cancel_btn),{key:"cancel",onClick:this.handleClose,variant:a.ButtonVariant.link}),r.formatMessage(n.Z.cancel))]},b&&c().createElement(a.Alert,{variant:"danger",style:f.alert,title:r.formatMessage(n.Z.exportError)}),c().createElement("div",{style:f.title},(0,m.K)("exports")?c().createElement("span",null,r.formatMessage(n.Z.exportDesc,{value:c().createElement("b",null,r.formatMessage(n.Z.exportsTitle))})):c().createElement("span",null,r.formatMessage(n.Z.exportHeading,{groupBy:t}))),c().createElement(a.Form,{style:f.form},c().createElement(a.Grid,{hasGutter:!0,md:6},(0,m.K)("exports")&&c().createElement(a.GridItem,{span:12},c().createElement(a.FormGroup,{fieldId:"exportName",helperTextInvalid:w?r.formatMessage(w):void 0,label:r.formatMessage(n.Z.names,{count:1}),isRequired:!0,validated:V},c().createElement(a.TextInput,{isRequired:!0,type:"text",id:"exportName",name:"exportName",value:_,onChange:this.handleNameChange}))),d&&c().createElement(a.FormGroup,{fieldId:"aggregate-type",label:r.formatMessage(n.Z.exportAggregateType),isRequired:!0},c().createElement(c().Fragment,null,L.map(((e,t)=>c().createElement(a.Radio,{key:t,id:`resolution-${t}`,isValid:void 0!==e.value,label:r.formatMessage(e.label,{value:e.value}),value:e.value,checked:T===e.value,name:"resolution",onChange:this.handleResolutionChange,"aria-label":r.formatMessage(e.label,{value:e.value})}))))),v&&c().createElement(a.FormGroup,{fieldId:"timeScope",label:r.formatMessage(n.Z.exportTimeScopeTitle),isRequired:!0},c().createElement(c().Fragment,null,P.map(((e,t)=>c().createElement(a.Radio,{key:t,id:`timeScope-${t}`,isValid:void 0!==e.value,label:r.formatMessage(e.label,{date:"previous"===e.value?R:x,value:e.value}),value:e.value,checked:E===e.value,name:"timeScope",onChange:this.handleMonthChange,"aria-label":r.formatMessage(e.label,{date:"previous"===e.value?R:x,value:e.value})}))))),y&&(0,m.K)("exports")&&c().createElement(a.GridItem,{span:12},c().createElement(a.FormGroup,{fieldId:"formatType",label:r.formatMessage(n.Z.exportFormatTypeTitle),isRequired:!0},M.map(((e,t)=>c().createElement(a.Radio,{key:t,id:`formatType-${t}`,isValid:void 0!==e.value,label:r.formatMessage(e.label,{value:e.value}),value:e.value,checked:C===e.value,name:"formatType",onChange:this.handleTypeChange,"aria-label":r.formatMessage(e.label,{value:e.value})}))))),c().createElement(a.GridItem,{span:12},c().createElement(a.FormGroup,{label:Z,fieldId:"selectedLabels"},c().createElement("ul",null,O.map(((e,t)=>c().createElement("li",{key:t},e.label)))))))))}}const w=(0,h.X1)((()=>({}))),V={exportReport:d.HY.Hy},j=(0,u.connect)(w,V)(_),G=(0,p.ZP)(j)},2088:(e,t,r)=>{r.d(t,{X:()=>B});var a=r(22938),s=r(45997),o=r(93952),n=r(92950),i=r.n(n),l=r(74806),c=r(98147),p=r(94377),u=r(38434),h=r(7917);const d={groupBySelector:{display:"flex",alignItems:"center"},groupBySelectorLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"}};class g extends i().Component{constructor(e){super(e),this.defaultState={defaultItem:this.props.groupBy||this.props.options[0].value,isGroupByOpen:!1},this.state=Object.assign({},this.defaultState),this.getCurrentGroupBy=()=>{const{getIdKeyForGroupBy:e}=this.props,t=(0,s.mB)(location.search),r=t&&t.group_by?Object.keys(t.group_by):[];let a=e(t.group_by);for(const e of r)if(-1!==e.indexOf(s.dV)){a=t.group_by[s.dV];break}return a},this.getGroupByItems=()=>{const{orgReport:e}=this.props;if(!e||!e.data)return[];const t=e.data.sort(((e,t)=>e[s.iP]<t[s.iP]?-1:e[s.iP]>t[s.iP]?1:0)),r=t.filter((e=>0===e.level)),a=t.filter((e=>0!==e.level));return r.map((e=>{const r=t.find((t=>t[s.dV]===e[s.dV]));a.unshift(r)})),a.map((e=>({id:e[s.dV],toString:()=>e[s.iP]})))},this.handleGroupByClear=()=>{this.setState({currentItem:void 0})},this.handleGroupBySelected=(e,t)=>{const{onSelected:r}=this.props;this.setState({currentItem:t.id,isGroupByOpen:!1}),r&&r(`${s.dV}${t.id}`)},this.handleGroupByToggle=e=>{this.setState({isGroupByOpen:e})},this.handleGroupByClear=this.handleGroupByClear.bind(this),this.handleGroupBySelected=this.handleGroupBySelected.bind(this),this.handleGroupByToggle=this.handleGroupByToggle.bind(this)}componentDidMount(){this.setState({currentItem:this.getCurrentGroupBy()})}componentDidUpdate(e){const{groupBy:t}=this.props;e.groupBy!==t&&this.setState({currentItem:this.getCurrentGroupBy()})}render(){const{isDisabled:e=!1,intl:t}=this.props,{currentItem:r,isGroupByOpen:s}=this.state,n=this.getGroupByItems(),l=n.find((e=>e.id===r));return i().createElement("div",{style:d.groupBySelector},i().createElement(a.Select,{"aria-label":t.formatMessage(o.Z.filterByOrgUnitAriaLabel),isDisabled:e,onClear:this.handleGroupByClear,onToggle:this.handleGroupByToggle,onSelect:this.handleGroupBySelected,isOpen:s,placeholderText:t.formatMessage(o.Z.filterByOrgUnitPlaceholder),selections:l,variant:a.SelectVariant.typeahead},n.map((e=>i().createElement(a.SelectOption,{description:e.id,key:e.id,value:e})))))}}const m=(0,l.ZP)(g);var y=r(44439);class v extends i().Component{constructor(e){super(e),this.defaultState={isGroupByOpen:!1},this.state=Object.assign({},this.defaultState),this.getGroupByItems=()=>{const{tagReport:e}=this.props;if(!e||!e.data)return[];let t=!1;for(const r of e.data)if(r.hasOwnProperty("key")){t=!0;break}let r=[];if(t){const t=e.data.map((e=>{var{type:t}=e;return function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,["type"])}));r=(0,y.uniqBy)(t,"key")}else r=(0,y.uniq)(e.data);return r.map((e=>{const r=t?e.key:e;return i().createElement(a.SelectOption,{key:e.key,value:r})}))},this.getCurrentGroupBy=()=>{const e=(0,s.mB)(location.search),t=e&&e.group_by?Object.keys(e.group_by):[];let r;for(const e of t)if(-1!==e.indexOf(s.P)){r=e.slice(s.P.length);break}return r},this.handleGroupByClear=()=>{this.setState({currentItem:void 0})},this.handleGroupBySelected=(e,t)=>{const{onSelected:r}=this.props;this.setState({currentItem:t,isGroupByOpen:!1}),r&&r(`${s.P}${t}`)},this.handleGroupByToggle=e=>{this.setState({isGroupByOpen:e})},this.handleGroupByClear=this.handleGroupByClear.bind(this),this.handleGroupBySelected=this.handleGroupBySelected.bind(this),this.handleGroupByToggle=this.handleGroupByToggle.bind(this)}componentDidMount(){this.setState({currentItem:this.getCurrentGroupBy()})}componentDidUpdate(e){const{groupBy:t}=this.props;e.groupBy!==t&&this.setState({currentItem:this.getCurrentGroupBy()})}render(){const{isDisabled:e,intl:t}=this.props,{currentItem:r,isGroupByOpen:s}=this.state;return i().createElement("div",{style:d.groupBySelector},i().createElement(a.Select,{"aria-label":t.formatMessage(o.Z.filterByTagKeyAriaLabel),isDisabled:e,onClear:this.handleGroupByClear,onToggle:this.handleGroupByToggle,onSelect:this.handleGroupBySelected,isOpen:s,placeholderText:t.formatMessage(o.Z.filterByTagKeyPlaceholder),selections:r,variant:a.SelectVariant.typeahead},this.getGroupByItems()))}}const b=(0,l.ZP)(v),f=[{label:s.dV,value:s.dV}],C=[{label:s.up,value:s.up}],S="org",T="tag";class E extends i().Component{constructor(e,t){super(e,t),this.defaultState={defaultItem:this.props.groupBy||this.props.options[0].value,isGroupByOpen:!1,isGroupByOrgVisible:!1,isGroupByTagVisible:!1},this.state=Object.assign({},this.defaultState),this.getCurrentGroupBy=()=>{const{getIdKeyForGroupBy:e}=this.props,{defaultItem:t}=this.state,r=(0,s.mB)(location.search);if(!r||!r.group_by)return t;let a=e(r.group_by);const o=r&&r.group_by?Object.keys(r.group_by):[];for(const e of o){let t=e.indexOf(s.P);if(-1!==t){a=s.up,this.setState({isGroupByTagVisible:!0});break}if(t=e.indexOf(s.dV),-1!==t){a=s.dV,this.setState({isGroupByOrgVisible:!0});break}}return"date"!==a?a:t},this.getGroupBy=()=>{const{isDisabled:e}=this.props,{currentItem:t,isGroupByOpen:r}=this.state,s=this.getGroupByOptions(),o=s.find((e=>e.value===t));return i().createElement(a.Select,{id:"groupBySelect",isDisabled:e,isOpen:r,onSelect:this.handleGroupBySelected,onToggle:this.handleGroupByToggle,selections:o,variant:a.SelectVariant.single},s.map((e=>i().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getGroupByOptions=()=>{const{options:e,orgReport:t,tagReport:r,intl:a}=this.props,s=[...e];return t&&t.data&&t.data.length>0&&s.push(...f),r&&r.data&&r.data.length>0&&s.push(...C),s.map((e=>({toString:()=>a.formatMessage(o.Z.groupByValuesTitleCase,{value:e.label,count:1}),value:e.value})))},this.handleGroupBySelected=(e,t)=>{const{onSelected:r}=this.props;t.value===s.dV||t.value===s.up?this.setState({currentItem:t.value,isGroupByOpen:!1,isGroupByOrgVisible:t.value===s.dV,isGroupByTagVisible:t.value===s.up}):this.setState({currentItem:t.value,isGroupByOpen:!1,isGroupByOrgVisible:!1,isGroupByTagVisible:!1},(()=>{r&&r(t.value)}))},this.handleGroupByToggle=e=>{this.setState({isGroupByOpen:e})},this.handleGroupBySelected=this.handleGroupBySelected.bind(this),this.handleGroupByToggle=this.handleGroupByToggle.bind(this)}componentDidMount(){const{fetchOrg:e,fetchTag:t,orgQueryString:r,orgReportFetchStatus:a,orgReportPathsType:s,showOrgs:o,showTags:n,tagQueryString:i,tagReportFetchStatus:l,tagReportPathsType:c}=this.props;this.setState({currentItem:this.getCurrentGroupBy()},(()=>{o&&1!==a&&e(s,S,r),n&&1!==l&&t(c,T,i)}))}componentDidUpdate(e){const{fetchOrg:t,fetchTag:r,groupBy:a,orgQueryString:s,orgReportFetchStatus:o,orgReportPathsType:n,perspective:i,showOrgs:l,showTags:c,tagQueryString:p,tagReportFetchStatus:u,tagReportPathsType:h}=this.props;if(e.groupBy!==a||e.perspective!==i){let a;e.perspective!==i&&(a={isGroupByOrgVisible:!1,isGroupByTagVisible:!1}),this.setState(Object.assign({currentItem:this.getCurrentGroupBy()},a||{}),(()=>{l&&1!==o&&t(n,S,s),c&&1!==u&&r(h,T,p)}))}}render(){const{getIdKeyForGroupBy:e,groupBy:t,isDisabled:r=!1,onSelected:s,orgReport:n,intl:l,tagReport:c}=this.props,{isGroupByOrgVisible:p,isGroupByTagVisible:u}=this.state;return i().createElement("div",{style:d.groupBySelector},i().createElement(a.Title,{headingLevel:"h3",size:"md",style:d.groupBySelectorLabel},l.formatMessage(o.Z.groupByLabel)),this.getGroupBy(),Boolean(p)&&i().createElement(m,{getIdKeyForGroupBy:e,groupBy:t,isDisabled:r,onSelected:s,options:f,orgReport:n}),Boolean(u)&&i().createElement(b,{groupBy:t,isDisabled:r,onSelected:s,options:C,tagReport:c}))}}const O=(0,p.X1)(((e,{orgReportPathsType:t,tagReportPathsType:r})=>{const a=(0,s.pm)({key_only:!0,limit:1e3}),o=h.ux.selectTag(e,r,T,a),n=h.ux.selectTagFetchStatus(e,r,T,a),i=(0,s.pm)({key_only:!0,limit:1e3});return{orgQueryString:i,orgReport:u.zE.selectOrg(e,t,S,i),orgReportFetchStatus:u.zE.selectOrgFetchStatus(e,t,S,i),tagQueryString:a,tagReport:o,tagReportFetchStatus:n}})),Z={fetchOrg:u.Lp.T7,fetchTag:h.xr.Xt},D=(0,c.connect)(O,Z)(E),B=(0,l.ZP)(D)},80878:(e,t,r)=>{r.d(t,{e:()=>b});var a=r(22938),s=r(45997),o=r(93952),n=r(46774),i=r(92950),l=r.n(i),c=r(74806),p=r(98147),u=r(5977),h=r(94377),d=r(87932);class g extends l().Component{constructor(e,t){super(e,t),this.defaultState={isDropdownOpen:!1,isExportModalOpen:!1},this.state=Object.assign({},this.defaultState),this.getExportModal=()=>{const{groupBy:e,item:t,query:r,reportPathsType:a}=this.props,{isExportModalOpen:s}=this.state;return l().createElement(n.X,{count:1,groupBy:e,isOpen:s,items:[t],onClose:this.handleExportModalClose,query:r,reportPathsType:a})},this.handleExportModalClose=e=>{this.setState({isExportModalOpen:e})},this.handleExportModalOpen=()=>{this.setState({isExportModalOpen:!0})},this.handleOnSelect=()=>{const{isDropdownOpen:e}=this.state;this.setState({isDropdownOpen:!e})},this.handleOnToggle=e=>{this.setState({isDropdownOpen:e})},this.handleExportModalClose=this.handleExportModalClose.bind(this),this.handleExportModalOpen=this.handleExportModalOpen.bind(this),this.handleOnToggle=this.handleOnToggle.bind(this),this.handleOnSelect=this.handleOnSelect.bind(this)}render(){const{groupBy:e,isDisabled:t,showPriceListOption:r,intl:n,redirectToCostModel:i,history:c,item:{source_uuid:p}}=this.props,u=[l().createElement(a.DropdownItem,{component:"button",isDisabled:t,key:"export-action",onClick:this.handleExportModalOpen},n.formatMessage(o.Z.detailsActionsExport))];return r&&u.unshift(l().createElement(a.DropdownItem,{component:"button",key:"price-list-action",isDisabled:t||e.includes(s.P)||0===p.length,onClick:()=>i(p[0],c)},n.formatMessage(o.Z.detailsActionsPriceList))),l().createElement(l().Fragment,null,l().createElement(a.Dropdown,{onSelect:this.handleOnSelect,toggle:l().createElement(a.KebabToggle,{onToggle:this.handleOnToggle}),isOpen:this.state.isDropdownOpen,isPlain:!0,position:"right",dropdownItems:u}),this.getExportModal())}}const m=(0,h.X1)(((e,t)=>({}))),y={redirectToCostModel:d.F0.redirectToCostModelFromSourceUuid},v=(0,p.connect)(m,y)(g),b=(0,c.ZP)((0,u.EN)(v))},36928:(e,t,r)=>{r.d(t,{Z:()=>re});var a=r(22938),s=r(45997),o=r(93952),n=r(73466),i=r(16679),l=r(32605),c=r(81787),p=r(94329),u=r(92950),h=r.n(u),d=r(74806),g=r(98499);const m={content:{paddingBottom:g.ZP.value,paddingLeft:g.ZP.value,paddingRight:g.ZP.value,paddingTop:g.ZP.value}};var y=r(71973),v=r(91616),b=r(96908),f=r(55785),C=r(23246),S=r(98147),T=r(94377),E=r(7917),O=r(76821),Z=r(23992),D=r(11331),B=r(48196);const x={dataListHeading:{fontWeight:Z.ZP.value},groupByHeading:{marginBottom:g.ZP.value},tagLink:{marginLeft:B.ZP.value},tagsContainer:{marginRight:D.ZP.value,marginTop:B.ZP.value}};class R extends h().Component{constructor(){super(...arguments),this.getDataListItems=()=>{const{tagReport:e}=this.props,t=[];if(e)for(const r of e.data)for(const e of r.values){const s=`${r.key}:${e}`;t.push(h().createElement(a.DataListItem,{"aria-labelledby":s,key:`${s}-item`},h().createElement(a.DataListItemRow,null,h().createElement(a.DataListItemCells,{dataListCells:[h().createElement(a.DataListCell,{key:`${s}-cell1`},h().createElement("span",{id:s},r.key)),h().createElement(a.DataListCell,{key:`${s}-cell2`},e)]}))))}return t}}render(){const{groupBy:e,groupByValue:t,intl:r}=this.props,s=this.getDataListItems();return h().createElement(h().Fragment,null,h().createElement("div",null,h().createElement("span",{style:x.dataListHeading},r.formatMessage(o.Z.groupByValues,{value:e,count:1}))),h().createElement("div",{style:x.groupByHeading},h().createElement("span",null,t)),h().createElement(a.DataList,{"aria-label":r.formatMessage(o.Z.tagNames),isCompact:!0},h().createElement(a.DataListItem,{"aria-labelledby":"heading1"},h().createElement(a.DataListItemRow,null,h().createElement(a.DataListItemCells,{dataListCells:[h().createElement(a.DataListCell,{key:"primary content"},h().createElement("span",{id:"heading1",style:x.dataListHeading},r.formatMessage(o.Z.tagHeadingKey))),h().createElement(a.DataListCell,{key:"secondary content"},h().createElement("span",{id:"heading2",style:x.dataListHeading},r.formatMessage(o.Z.tagHeadingValue)))]}))),s.map((e=>e))))}}const k=(0,d.ZP)((0,S.connect)()(R)),M="tag";class L extends h().Component{constructor(e){super(e),this.getTagValueCount=()=>{const{tagReport:e}=this.props;let t=0;if(e)for(const r of e.data)r.values&&(t+=r.values.length);return t},this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}componentDidMount(){const{fetchTag:e,queryString:t,tagReportPathsType:r}=this.props;e(r,M,t)}componentDidUpdate(e){const{fetchTag:t,queryString:r,tagReportPathsType:a}=this.props;e.queryString!==r&&t(a,M,r)}shouldComponentUpdate(e){const{groupByValue:t,isOpen:r}=this.props;return e.groupByValue!==t||e.isOpen!==r}render(){const{groupBy:e,isOpen:t,query:r,tagReport:s,intl:n}=this.props,i=r&&r.filter&&r.filter.account?r.filter.account:this.props.groupByValue;return h().createElement(a.Modal,{isOpen:t,onClose:this.handleClose,title:n.formatMessage(o.Z.tagHeadingTitle,{value:this.getTagValueCount()}),width:"50%"},h().createElement(k,{groupBy:e,groupByValue:i,tagReport:s}))}}const P=(0,T.X1)(((e,{tagReportPathsType:t})=>{const r=(0,s.mB)(location.search),a=(0,C.OA)(r),o=a?s.dV:(0,C.VL)(r),n=a||(0,C.pe)(r),i=r&&r.filter_by?r.filter_by:{};for(const e of Object.keys(i))-1!==e.indexOf(s.P)&&(i[e]=void 0);const l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},i),r&&r.filter&&r.filter.account&&{[`${s.Sq}account`]:r.filter.account}),o&&-1===o.indexOf(s.P)&&{[o]:n})},c=(0,s.pm)(l);return{groupBy:o,groupByValue:n,query:r,queryString:c,tagReport:E.ux.selectTag(e,t,M,c),tagReportFetchStatus:E.ux.selectTagFetchStatus(e,t,M,c)}})),_={fetchTag:E.xr.Xt},w=(0,d.ZP)((0,S.connect)(P,_)(L)),V="tag";class j extends h().Component{constructor(e){super(e),this.defaultState={isOpen:!1},this.state=Object.assign({},this.defaultState),this.handleClose=e=>{this.setState({isOpen:e})},this.handleOpen=e=>(this.setState({isOpen:!0}),e.preventDefault(),!1),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this)}componentDidMount(){const{fetchTag:e,queryString:t,tagReportPathsType:r}=this.props;e(r,V,t)}componentDidUpdate(e){const{fetchTag:t,queryString:r,tagReportPathsType:a}=this.props;e.queryString!==r&&t(a,V,r)}render(){const{id:e,tagReport:t,tagReportPathsType:r}=this.props,{isOpen:a}=this.state;let s=0;if(t)for(const e of t.data)e.values&&(s+=e.values.length);return h().createElement("div",{style:x.tagsContainer,id:e},Boolean(s>0)&&h().createElement(h().Fragment,null,h().createElement(f.lO,null),h().createElement("a",Object.assign({},(0,O.g_)(O._q.details.tag_lnk),{href:"#/",onClick:this.handleOpen,style:x.tagLink}),s)),h().createElement(w,{isOpen:a,onClose:this.handleClose,tagReportPathsType:r}))}}const G=(0,T.X1)(((e,{tagReportPathsType:t})=>{const r=(0,s.mB)(location.search),a=(0,C.OA)(r),o=a?s.dV:(0,C.VL)(r),n=a||(0,C.pe)(r),i=r&&r.filter_by?r.filter_by:{};for(const e of Object.keys(i))-1!==e.indexOf(s.P)&&(i[e]=void 0);const l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},i),r&&r.filter&&r.filter.account&&{[`${s.Sq}account`]:r.filter.account}),o&&-1===o.indexOf(s.P)&&{[o]:n})},c=(0,s.pm)(l);return{groupBy:o,groupByValue:n,query:r,queryString:c,tagReport:E.ux.selectTag(e,t,V,c),tagReportFetchStatus:E.ux.selectTagFetchStatus(e,t,V,c)}})),F={fetchTag:E.xr.Xt},I=(0,d.ZP)((0,S.connect)(G,F)(j));var q=r(73727),U=r(33307),N=r(41251),A=r(99291),z=r(72892),Q=r(12289),$=r(40794),H=r(32412),W=r(57640),X=r(73861);const K={cost:{marginTop:W.ZP.var},costLabel:{marginTop:X.ZP.var},costValue:{marginTop:0,marginBottom:0,textAlign:"right"},costLabelDate:{textAlign:"right"},costType:{marginTop:H.ZP.var},header:{backgroundColor:z.ZP.var,paddingLeft:g.ZP.var,paddingRight:g.ZP.var,paddingTop:g.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentRight:{display:"flex"},infoDescription:{color:Q.ZP.value,fontSize:$.ZP.value},tabs:{display:"flex"},tag:{marginLeft:g.ZP.var},title:{paddingBottom:g.ZP.var,paddingTop:X.ZP.var}};class J extends h().Component{constructor(){super(...arguments),this.buildDetailsLink=()=>{const{detailsURL:e,groupBy:t,query:r}=this.props;let a=t,o="*";r[s.dV]&&(a=s.dV,o=r[s.dV]);const n=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{group_by:{[a]:o}});return n.filter&&(n.filter.account=void 0,n[s.eG]=void 0,n[s.dV]=void 0,n[s.yG]=void 0),`${e}?${(0,s.IV)(n)}`},this.getTotalCost=()=>{const{report:e}=this.props,t=e&&e.meta&&e.meta.total&&e.meta.total.cost&&e.meta.total.cost.total;return(0,A.xG)(t?e.meta.total.cost.total.value:0,t?e.meta.total.cost.total.units:"USD")},this.handleCostTypeSelected=e=>{const{onCostTypeSelected:t}=this.props;t&&t(e)}}render(){const{costType:e,description:t,groupBy:r,query:n,intl:i,showCostType:l=!1,tabs:c,tagReportPathsType:p,title:u}=this.props,d=n&&n.filter?n.filter.account:void 0,g=(0,C.OA)(n),m=(0,C.qV)(n),f=d||"account"===r||"project"===r||"gcp_project"===r||"subscription_guid"===r,S=d?"account":m?"tag":g?s.dV:r;return h().createElement("header",{style:K.header},h().createElement("div",{style:K.headerContent},h().createElement("nav",{"aria-label":i.formatMessage(o.Z.breakdownBackToDetailsAriaLabel),className:"breadcrumbOverride"},h().createElement("ol",{className:"pf-c-breadcrumb__list"},h().createElement("li",{className:"pf-c-breadcrumb__item"},h().createElement("span",{className:"pf-c-breadcrumb__item-divider"},h().createElement(y.fP,null)),h().createElement(q.rU,{to:this.buildDetailsLink()},i.formatMessage(o.Z.breakdownBackToDetails,{value:i.formatMessage(o.Z.breakdownBackToTitles,{value:p}),groupBy:S}))))),h().createElement("div",{style:K.headerContentRight},(0,N.K)("currency")&&h().createElement(v.F,null))),h().createElement("div",{style:K.headerContent},h().createElement("div",{style:K.title},h().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},i.formatMessage(o.Z.breakdownTitle,{value:u}),t&&h().createElement("div",{style:K.infoDescription},t)),l&&h().createElement("div",{style:K.costType},h().createElement(b.T,{onSelect:this.handleCostTypeSelected,costType:e}))),h().createElement("div",{style:K.cost},h().createElement("div",{style:K.costLabel},h().createElement(a.Title,{headingLevel:"h2",style:K.costValue,size:a.TitleSizes["4xl"]},h().createElement("span",null,this.getTotalCost()))),h().createElement("div",{style:K.costLabelDate},(0,U.Y)(i.formatMessage(o.Z.groupByValuesTitleCase,{value:S,count:2}),o.Z.breakdownTotalCostDate,0)))),h().createElement("div",null,h().createElement("div",{style:K.tabs},c,h().createElement("div",{style:K.tag},Boolean(f)&&h().createElement(I,{id:"tags",tagReportPathsType:p})))))}}const Y=(0,d.ZP)(J),ee=e=>{switch(e){case"cost-overview":return"cost-overview";case"historical-data":return"historical-data"}};class te extends h().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:h().createRef(),tab:"cost-overview"},{contentRef:h().createRef(),tab:"historical-data"}],this.getRouteForQuery=e=>{const{history:t}=this.props;return`${t.location.pathname}?${(0,s.IV)(e)}`},this.getTab=(e,t,r)=>h().createElement(a.Tab,{eventKey:r,key:`${ee(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:h().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>h().createElement(a.TabContent,{eventKey:t,key:`${ee(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{costOverviewComponent:r,historicalDataComponent:a}=this.props,{activeTabKey:s}=this.state,o=h().createElement(h().Fragment,null);if(s!==t)return o;const n=ee(e);return"cost-overview"===n?r:"historical-data"===n?a:o},this.getTabs=e=>{const{activeTabKey:t}=this.state;return h().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return"cost-overview"===e?t.formatMessage(o.Z.breakdownCostOverviewTitle):"historical-data"===e?t.formatMessage(o.Z.breakdownHistoricalDataTitle):void 0},this.handleCostTypeSelected=e=>{const{history:t,query:r}=this.props,a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{cost_type:e});t.replace(this.getRouteForQuery(a))},this.handleTabClick=(e,t)=>{const{activeTabKey:r}=this.state;r!==t&&this.setState({activeTabKey:t})},this.updateReport=()=>{const{location:e,fetchReport:t,queryString:r,reportPathsType:a,reportType:s}=this.props;e.search&&t(a,s,r)}}componentDidMount(){this.updateReport()}componentDidUpdate(e){const{location:t,report:r,reportError:a,queryString:s}=this.props,o=e.queryString!==s,n=!r&&!a,i=!t.search;(o||n||i)&&this.updateReport()}render(){const{costType:e,description:t,detailsURL:r,emptyStateTitle:a,groupBy:s,providers:o,providersFetchStatus:u,providerType:d,query:g,report:y,reportError:v,reportFetchStatus:b,showCostType:f,tagReportPathsType:C,title:S}=this.props,T=this.getAvailableTabs();if(v)return h().createElement(c.Z,{title:a});if(1===u&&1===b)return h().createElement(n.Z,{title:a});if(2===u&&2===b){if(o&&o.meta&&0===o.meta.count&&2===u)return h().createElement(l.Z,{providerType:d,title:a});if(!(0,p.g8)(o))return h().createElement(i.Z,{title:S})}return h().createElement(h().Fragment,null,h().createElement(Y,{costType:e,description:t,detailsURL:r,groupBy:s,onCostTypeSelected:this.handleCostTypeSelected,query:g,report:y,showCostType:f,tabs:this.getTabs(T),tagReportPathsType:C,title:S}),h().createElement("div",{style:m.content},this.getTabContent(T)))}}const re=(0,d.ZP)(te)},6827:(e,t,r)=>{r.d(t,{X:()=>pe});var a=r(22938),s=r(91290),o=r(45997),n=r(93952),i=r(92950),l=r.n(i),c=r(74806),p=r(76821),u=r(31447),h=r(11331),d=r(48196);const g={clustersContainer:{marginRight:h.ZP.value,marginTop:d.ZP.value}};class m extends l().Component{render(){const{item:e}=this.props;return e.clusters?e.clusters.map(((e,t)=>l().createElement("div",{key:`cluster-${t}`},e))):null}}const y=(0,c.ZP)(m),v={modal:{height:"700px",width:"600px"},subTitle:{marginTop:r(91707).ZP.value,textAlign:"right"}};class b extends l().Component{constructor(e){super(e),this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}shouldComponentUpdate(e){const{isOpen:t,item:r}=this.props;return e.item!==r||e.isOpen!==t}render(){const{groupBy:e,isOpen:t,item:r,intl:s}=this.props;return l().createElement(a.Modal,{className:"modalOverride",style:v.modal,isOpen:t,onClose:this.handleClose,title:s.formatMessage(n.Z.detailsClustersModalTitle,{groupBy:e,name:r.label}),width:"50%"},l().createElement(y,{item:r}))}}const f=(0,c.ZP)(b);class C extends l().Component{constructor(e){super(e),this.defaultState={isOpen:!1,showAll:!1},this.state=Object.assign({},this.defaultState),this.handleClose=e=>{this.setState({isOpen:e})},this.handleOpen=e=>(this.setState({isOpen:!0}),e.preventDefault(),!1),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this)}render(){const{groupBy:e,report:t,intl:r}=this.props,{isOpen:a,showAll:s}=this.state;let o=0;const i=[],c=[],h=(0,u.R)({report:t,idKey:e}),d=h&&h.length?h[0]:void 0;if(!d)return null;for(const e of d.clusters){const t=`${i.length>0?", ":""}${e}`;s?i.push(t):o<=50&&(o+t.length>50?i.push(t.slice(0,50-o).trim().concat("...")):i.push(t)),o+=t.length,c.push(e)}return l().createElement("div",{style:g.clustersContainer},Boolean(i)&&i.map(((e,t)=>l().createElement("span",{key:t},e))),Boolean(i.length<c.length)&&l().createElement("a",Object.assign({},(0,p.g_)(p._q.details.cluster_lnk),{href:"#/",onClick:this.handleOpen}),r.formatMessage(n.Z.detailsMoreClusters,{value:c.length-i.length})),l().createElement(f,{groupBy:e,isOpen:a,item:d,onClose:this.handleClose}))}}const S=(0,c.ZP)(C);var T=r(10310),E=r(80469),O=r(34502),Z=r(30950),D=r(99291),B=r(57279),x=r(23992),R=r(32412);const k={chartHeight:150,chartWidth:400,subTitle:{fontWeight:x.ZP.value}},M={chartSkeleton:{height:"125px",marginBottom:R.ZP.value,marginTop:h.ZP.value}};class L extends l().Component{constructor(){super(...arguments),this.getLegendLabel=()=>e=>{var{values:t}=e,r=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,["values"]);return l().createElement(T.Df,Object.assign({},r,{style:[{fontWeight:k.subTitle.fontWeight},{}],text:[t[r.index],r.text]}))},this.getSkeleton=()=>l().createElement(l().Fragment,null,l().createElement(a.Skeleton,{style:M.chartSkeleton,width:B.N.md}))}render(){const{report:e,reportFetchStatus:t,intl:r}=this.props,a=e&&e.meta&&e.meta.total&&e.meta.total.cost,s=a&&e.meta.total.cost.markup,o=a&&e.meta.total.cost.raw,i=a&&e.meta.total.cost.usage,c=s?e.meta.total.cost.markup.units:"USD",p=o?e.meta.total.cost.raw.units:"USD",u=i?e.meta.total.cost.usage.units:"USD",h=s?e.meta.total.cost.markup.value:0,d=o?e.meta.total.cost.raw.value:0,g=i?e.meta.total.cost.usage.value:0,m=(0,D.xG)(s?e.meta.total.cost.markup.value:0,c),y=(0,D.xG)(o?e.meta.total.cost.raw.value:0,p),v=(0,D.xG)(i?e.meta.total.cost.usage.value:0,u),b=r.formatMessage(n.Z.markupTitle),f=r.formatMessage(n.Z.rawCostTitle),C=r.formatMessage(n.Z.usageCostTitle),S=this.getLegendLabel(),T=l().createElement(E.Qk,{gutter:25,itemsPerRow:2,labelComponent:l().createElement(S,{dy:10,lineHeight:1.5,values:[y,m,v]}),rowGutter:20});return l().createElement("div",{style:{height:k.chartHeight,width:k.chartWidth}},1===t?this.getSkeleton():l().createElement(O.Td,{ariaDesc:r.formatMessage(n.Z.breakdownCostChartAriaDesc),ariaTitle:r.formatMessage(n.Z.breakdownCostBreakdownTitle),constrainToVisibleArea:!0,data:[{x:f,y:d,units:p},{x:b,y:h,units:c},{x:C,y:g,units:u}],height:k.chartHeight,labels:({datum:e})=>r.formatMessage(n.Z.breakdownCostChartTooltip,{name:e.x,value:(0,D.xG)(e.y,e.units)}),legendComponent:T,legendData:[{name:f},{name:b},{name:C}],legendOrientation:"vertical",legendPosition:"right",padding:{bottom:20,left:0,right:275,top:20},themeColor:Z.nz.green,width:k.chartWidth}))}}const P=(0,c.ZP)(L);var _=r(98896),w=r(23246),V=r(98147),j=r(94377),G=r(42581);const F={mainContent:{marginTop:r(57640).ZP.value},subTitle:{textAlign:"right"}},I="cost";class q extends l().Component{constructor(e){super(e)}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:r}=this.props;e(r,I,t)}componentDidUpdate(e){const{fetchReport:t,queryString:r,reportPathsType:a}=this.props;e.queryString!==r&&t(a,I,r)}render(){const{intl:e,report:t,reportGroupBy:r,reportFetchStatus:s}=this.props,o=t&&t.meta&&t.meta.total,i=(0,D.xG)(o?t.meta.total.cost.total.value:0,o?t.meta.total.cost.total.units:"USD");return l().createElement(l().Fragment,null,l().createElement("div",{style:F.subTitle},l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(n.Z.detailsCostValue,{value:i}))),l().createElement("div",{style:F.mainContent},l().createElement(_.mZ,{idKey:r,report:t,status:s},(({items:e})=>e.map((e=>l().createElement(_.EH,{key:e.id,formatOptions:{},label:e.label?e.label.toString():"",totalValue:t.meta.total.cost.total.value,units:t.meta.total.cost.total.units,value:e.cost.total.value})))))))}}const U=(0,j.X1)(((e,{reportGroupBy:t,reportPathsType:r})=>{const a=(0,o.mB)(location.search),s=(0,w.OA)(a),n=s?o.dV:(0,w.VL)(a),i=s||(0,w.pe)(a),l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},a&&a.filter_by&&a.filter_by),a&&a.filter&&a.filter.account&&{[`${o.Sq}account`]:a.filter.account}),n&&{[n]:void 0}),n&&{[n]:i}),group_by:Object.assign({},t&&{[t]:"*"})},c=(0,o.pm)(l);return{queryString:c,report:G.ZV.selectReport(e,r,I,c),reportFetchStatus:G.ZV.selectReportFetchStatus(e,r,I,c)}})),N={fetchReport:G.nx.fetchReport},A=(0,c.ZP)((0,V.connect)(U,N)(q));class z extends l().Component{constructor(e){super(e),this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}shouldComponentUpdate(e){const{groupByValue:t,isOpen:r}=this.props;return e.groupByValue!==t||e.isOpen!==r}render(){const{groupByValue:e,intl:t,isOpen:r,reportGroupBy:s,reportPathsType:o}=this.props;return l().createElement(a.Modal,{className:"modalOverride",isOpen:r,onClose:this.handleClose,title:t.formatMessage(n.Z.detailsSummaryModalTitle,{groupBy:s,name:e}),variant:"large"},l().createElement(A,{reportGroupBy:s,reportPathsType:o}))}}const Q=(0,c.ZP)(z),$={card:{},skeleton:{marginTop:R.ZP.value},viewAllContainer:{marginLeft:"-15px"}};class H extends l().Component{constructor(){super(...arguments),this.state={isBulletChartModalOpen:!1},this.getItems=()=>{const{report:e,reportGroupBy:t}=this.props;return(0,u.R)({report:e,idKey:t})},this.getSummary=()=>{const{report:e,reportGroupBy:t,reportFetchStatus:r}=this.props;return l().createElement(_.mZ,{idKey:t,report:e,status:r},(({items:t})=>t.map((t=>l().createElement(_.EH,{formatOptions:{},key:`${t.id}-item`,label:t.label?t.label.toString():void 0,totalValue:e.meta.total.cost.total.value,units:e.meta.total.cost.total.units,value:t.cost.total.value})))))},this.getViewAll=()=>{const{groupBy:e,query:t,reportGroupBy:r,reportPathsType:s,intl:o}=this.props,{isBulletChartModalOpen:i}=this.state;if(-1!==this.getItems().findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}))){const c=t&&t.filter&&t.filter.account?t.filter.account:this.props.groupByValue;return l().createElement("div",{style:$.viewAllContainer},l().createElement(a.Button,Object.assign({},(0,p.g_)(p._q.details.view_all_btn),{onClick:this.handleBulletChartModalOpen,type:a.ButtonType.button,variant:a.ButtonVariant.link}),o.formatMessage(n.Z.detailsViewAll,{value:r})),l().createElement(Q,{groupBy:e,groupByValue:c,isOpen:i,onClose:this.handleBulletChartModalClose,query:t,reportGroupBy:r,reportPathsType:s}))}return null},this.handleBulletChartModalClose=e=>{this.setState({isBulletChartModalOpen:e})},this.handleBulletChartModalOpen=e=>{this.setState({isBulletChartModalOpen:!0}),e.preventDefault()}}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:r,reportType:a}=this.props;e(r,a,t)}componentDidUpdate(e){const{costType:t,fetchReport:r,queryString:a,reportPathsType:s,reportType:o}=this.props;e.queryString===a&&e.costType===t||r(s,o,a)}render(){const{reportGroupBy:e,reportFetchStatus:t,intl:r}=this.props;return l().createElement(a.Card,{style:$.card},l().createElement(a.CardTitle,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(n.Z.breakdownSummaryTitle,{value:e}))),l().createElement(a.CardBody,null,1===t?l().createElement(l().Fragment,null,l().createElement(a.Skeleton,{width:B.N.md}),l().createElement(a.Skeleton,{style:$.skeleton,width:B.N.md}),l().createElement(a.Skeleton,{style:$.skeleton,width:B.N.md}),l().createElement(a.Skeleton,{style:$.skeleton,width:B.N.md})):this.getSummary()),l().createElement(a.CardFooter,null,this.getViewAll()))}}const W=(0,j.X1)(((e,{costType:t,reportGroupBy:r,reportPathsType:a,reportType:s})=>{const n=(0,o.mB)(location.search),i=(0,w.OA)(n),l=i?o.dV:(0,w.VL)(n),c=i||(0,w.pe)(n),p={cost_type:t,filter:{limit:3,resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},n&&n.filter_by&&n.filter_by),n&&n.filter&&n.filter.account&&{[`${o.Sq}account`]:n.filter.account}),l&&{[l]:void 0}),l&&{[l]:c}),group_by:Object.assign({},r&&{[r]:"*"})},u=(0,o.pm)(p);return{groupBy:l,groupByValue:c,query:n,queryString:u,report:G.ZV.selectReport(e,a,s,u),reportFetchStatus:G.ZV.selectReportFetchStatus(e,a,s,u),reportPathsType:a,reportType:s}})),X={fetchReport:G.nx.fetchReport},K=(0,c.ZP)((0,V.connect)(W,X)(H));r(50265);var J=r(762),Y=r(90392),ee=r(8049),te=r(63211);const re={chartSkeleton:{marginBottom:R.ZP.value},capacity:{fontWeight:x.ZP.value},legendSkeleton:{marginTop:R.ZP.value}};class ae extends l().Component{constructor(){super(...arguments),this.containerRef=l().createRef(),this.observer=te.Z,this.state={width:0},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})},this.getChart=()=>{const{groupBy:e,reportFetchStatus:t,report:r}=this.props,{width:a}=this.state,s=this.getChartDatum();return r&&0!==s.usage.length?l().createElement("div",{className:"chartOverride"},1===t?this.getSkeleton():l().createElement(l().Fragment,null,Boolean("cluster"===e)&&this.getFreeSpace(),l().createElement(J.n,{comparativeErrorMeasureData:s.limit.value?[{tooltip:s.limit.tooltip,y:s.limit.value}]:[],comparativeErrorMeasureLegendData:s.limit.value?[{name:s.limit.legend}]:[],height:this.getChartHeight(),labels:({datum:e})=>`${e.tooltip}`,legendPosition:"bottom-left",legendItemsPerRow:this.getItemsPerRow(),maxDomain:this.isDatumEmpty(s)?100:void 0,minDomain:0,padding:{bottom:75,left:10,right:50,top:0},primarySegmentedMeasureData:s.usage.length?s.usage.map((e=>({tooltip:e.tooltip,y:e.value}))):[],primarySegmentedMeasureLegendData:s.usage.length?s.usage.map((e=>({name:e.legend}))):[],qualitativeRangeData:s.ranges.length?[{tooltip:s.ranges[0].tooltip,y:s.ranges[0].value}]:[],qualitativeRangeLegendData:s.ranges.length?[{name:s.ranges[0].legend}]:[],width:a}))):null},this.getChartHeight=()=>{const{groupBy:e}=this.props,{width:t}=this.state;return"cluster"===e?t>950?115:t>450?150:210:t>700?115:t>450?150:180},this.getItemsPerRow=()=>{const{width:e}=this.state;return e>950?4:e>700?3:e>450?2:1},this.getSkeleton=()=>l().createElement(l().Fragment,null,l().createElement(a.Skeleton,{style:re.chartSkeleton,width:B.N.md}),l().createElement(a.Skeleton,{style:re.legendSkeleton,width:B.N.xs})),this.isDatumEmpty=e=>{let t=!1;for(const r of e.ranges)if(r.value){t=!0;break}let r=!1;for(const t of e.usage)if(t.value){r=!0;break}return!(e.limit.value||t||r)}}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:r,reportType:a}=this.props;e(r,a,t),this.observer=(0,ee.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){const{fetchReport:t,queryString:r,reportPathsType:a,reportType:s}=this.props;e.queryString!==this.props.queryString&&t(a,s,r)}componentWillUnmount(){this.observer&&this.observer()}getChartDatum(){const{groupBy:e,report:t,intl:r}=this.props,a={limit:{},ranges:[],usage:[]},s=t&&t.meta&&t.meta.total,o=s&&t.meta.total.limit&&null!==t.meta.total.limit,i=Math.trunc(o?t.meta.total.limit.value:0),l=r.formatMessage(n.Z.units,{units:(0,D.ZV)(o?t.meta.total.limit.units:void 0)});if(a.limit={legend:r.formatMessage(n.Z.detailsUsageLimit,{value:i,units:l}),tooltip:r.formatMessage(n.Z.detailsUsageLimit,{value:i,units:l}),value:Math.trunc(i)},"cluster"===e){const e=s&&t.meta.total.request&&null!==t.meta.total.request,o=Math.trunc(e?t.meta.total.capacity.value:0),i=r.formatMessage(n.Z.units,{units:(0,D.ZV)(e?t.meta.total.capacity.units:void 0)});a.ranges=[{legend:r.formatMessage(n.Z.detailsUsageCapacity,{value:o,units:i}),tooltip:r.formatMessage(n.Z.detailsUsageCapacity,{value:o,units:i}),value:Math.trunc(o)}]}const c=s&&t.meta.total.request&&null!==t.meta.total.request,p=s&&t.meta.total.usage&&null!==t.meta.total.usage,u=Math.trunc(c?t.meta.total.request.value:0),h=r.formatMessage(n.Z.units,{units:(0,D.ZV)(c?t.meta.total.request.units:void 0)}),d=Math.trunc(p?t.meta.total.usage.value:0),g=r.formatMessage(n.Z.units,{units:(0,D.ZV)(p?t.meta.total.usage.units:void 0)});return a.usage=[{legend:r.formatMessage(n.Z.detailsUsageUsage,{value:d,units:g}),tooltip:r.formatMessage(n.Z.detailsUsageUsage,{value:d,units:g}),value:Math.trunc(d)},{legend:r.formatMessage(n.Z.detailsUsageRequests,{value:u,units:h}),tooltip:r.formatMessage(n.Z.detailsUsageRequests,{value:u,units:h}),value:Math.trunc(u)}],a}getFreeSpace(){const{report:e,intl:t}=this.props,r=e&&e.meta&&e.meta.total,s=r&&e.meta.total.request&&null!==e.meta.total.request,o=r&&e.meta.total.request&&null!==e.meta.total.request,i=r&&e.meta.total.usage&&null!==e.meta.total.usage,c=Math.trunc(s?e.meta.total.capacity.value:0),p=Math.trunc(o?e.meta.total.request.value:0),u=t.formatMessage(n.Z.units,{units:(0,D.ZV)(o?e.meta.total.request.units:void 0)}),h=Math.trunc(i?e.meta.total.usage.value:0),d=t.formatMessage(n.Z.units,{units:(0,D.ZV)(i?e.meta.total.usage.units:void 0)}),g=c-p,m=c-h;let y=p>0?p/c*100:0;y>100&&(y=100-y);let v=c>h?h/c*100:0;return v>100&&(v=100-v),l().createElement(a.Grid,{hasGutter:!0},l().createElement(a.GridItem,{md:12,lg:6},l().createElement("div",null,t.formatMessage(n.Z.detailsUnusedUsageLabel)),l().createElement("div",{style:re.capacity},(0,D.bM)(m,d)),l().createElement("div",null,t.formatMessage(n.Z.detailsUnusedUnits,{percentage:(0,D.rl)(v,{minimumFractionDigits:0,maximumFractionDigits:0}),units:d}))),l().createElement(a.GridItem,{md:12,lg:6},l().createElement("div",null,t.formatMessage(n.Z.detailsUnusedRequestsLabel)),l().createElement("div",{style:re.capacity},(0,D.bM)(g,u)),l().createElement("div",null,t.formatMessage(n.Z.detailsUnusedUnits,{percentage:(0,D.rl)(y,{minimumFractionDigits:0,maximumFractionDigits:0}),units:u}))))}render(){return l().createElement("div",{className:"chartOverride",ref:this.containerRef},this.getChart())}}const se=(0,j.X1)(((e,{reportPathsType:t,reportType:r})=>{const a=(0,Y.mB)(location.search),s=(0,w.VL)(a),n=(0,w.pe)(a),i={filter:{time_scope_units:"month",time_scope_value:-1,resolution:"monthly"},filter_by:Object.assign(Object.assign({},a&&a.filter_by&&a.filter_by),s&&{[s]:void 0}),group_by:Object.assign({},s&&{[s]:n})},l=(0,o.pm)(i);return{groupBy:s,report:G.ZV.selectReport(e,t,r,l),reportFetchStatus:G.ZV.selectReportFetchStatus(e,t,r,l),queryString:l}})),oe={fetchReport:G.nx.fetchReport},ne=(0,c.ZP)((0,V.connect)(se,oe)(ae));var ie=r(57116);const le="placeholder";class ce extends l().Component{constructor(){super(...arguments),this.getClusterChart=e=>{const{groupBy:t,report:r,intl:s}=this.props;let i=!1;for(const r of e.cluster.showWidgetOnGroupBy)if(r===t||r===o.P&&-1!==t.indexOf(o.P)){i=!0;break}return i?l().createElement(a.Card,null,l().createElement(a.CardTitle,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},s.formatMessage(n.Z.clusters))),l().createElement(a.CardBody,null,l().createElement(S,{groupBy:e.cluster.reportGroupBy,report:r}))):null},this.getCostChart=()=>{const{report:e,intl:t}=this.props;return l().createElement(a.Card,null,l().createElement(a.CardTitle,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},t.formatMessage(n.Z.breakdownCostBreakdownTitle),l().createElement(a.Popover,{"aria-label":t.formatMessage(n.Z.breakdownCostBreakdownAriaLabel),enableFlip:!0,bodyContent:l().createElement(l().Fragment,null,l().createElement("p",{style:ie.W.infoTitle},t.formatMessage(n.Z.rawCostTitle)),l().createElement("p",null,t.formatMessage(n.Z.rawCostDescription)),l().createElement("br",null),l().createElement("p",{style:ie.W.infoTitle},t.formatMessage(n.Z.usageCostTitle)),l().createElement("p",null,t.formatMessage(n.Z.usageCostDescription)),l().createElement("br",null),l().createElement("p",{style:ie.W.infoTitle},t.formatMessage(n.Z.markupTitle)),l().createElement("p",null,t.formatMessage(n.Z.markupDescription)),l().createElement("br",null),l().createElement("a",{href:t.formatMessage(n.Z.docsCostModelTerminology),rel:"noreferrer",target:"_blank"},t.formatMessage(n.Z.learnMore)))},l().createElement(a.Button,{variant:a.ButtonVariant.plain},l().createElement(s.iC,{style:ie.W.info}))))),l().createElement(a.CardBody,null,l().createElement(P,{report:e})))},this.getCpuUsageChart=e=>{const{intl:t}=this.props;return l().createElement(a.Card,null,l().createElement(a.CardTitle,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},t.formatMessage(n.Z.cpuTitle))),l().createElement(a.CardBody,null,l().createElement(ne,{reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getMemoryUsageChart=e=>{const{intl:t}=this.props;return l().createElement(a.Card,null,l().createElement(a.CardTitle,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},t.formatMessage(n.Z.memoryTitle))),l().createElement(a.CardBody,null,l().createElement(ne,{reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getSummaryCard=e=>{const{costType:t,groupBy:r,query:a}=this.props;let s=!1;for(const t of e.reportSummary.showWidgetOnGroupBy)if(t===r||a&&a.group_by&&a.group_by[o.dV]||t===o.P&&r&&-1!==r.indexOf(o.P)){s=!0;break}return s?l().createElement(K,{costType:t,reportGroupBy:e.reportSummary.reportGroupBy,reportPathsType:e.reportPathsType,reportType:e.reportType}):e.reportSummary.usePlaceholder?le:null},this.getWidgetsColumns=()=>{const{selectWidgets:e,widgets:t}=this.props,r=[];t.map((t=>{const a=e[t],s=this.renderWidget(a);null!==s&&r.push(s)}));const a=Math.floor(r.length/2)+r.length%2,s=[],o=[];for(let e=0;e<a;e++)r[e]!==le&&s.push(r[e]),e+a<r.length&&r[e+a]!==le&&o.push(r[e+a]);return{leftColumnWidgets:s,rightColumnWidgets:o}}}renderWidget(e){switch(e.type){case"cluster":return this.getClusterChart(e);case"cost":return this.getCostChart();case"cpuUsage":return this.getCpuUsageChart(e);case"memoryUsage":return this.getMemoryUsageChart(e);case"summary":return this.getSummaryCard(e);default:return null}}render(){const{leftColumnWidgets:e,rightColumnWidgets:t}=this.getWidgetsColumns();return l().createElement(a.Grid,{hasGutter:!0},l().createElement(a.GridItem,{lg:12,xl:6},l().createElement(a.Grid,{hasGutter:!0},e.map(((e,t)=>l().createElement(a.GridItem,{key:`widget-${t}`},e))))),l().createElement(a.GridItem,{lg:12,xl:6},l().createElement(a.Grid,{hasGutter:!0},t.map(((e,t)=>l().createElement(a.GridItem,{key:`widget-${t}`},e))))))}}const pe=(0,c.ZP)(ce)},97518:(e,t,r)=>{r.d(t,{f:()=>de});var a=r(22938),s=r(93952),o=r(92950),n=r.n(o),i=r(74806),l=r(45997),c=r(89116),p=(r(50265),r(21094)),u=r(2311),h=r(80469),d=r(84154),g=r(48629),m=r(52109),y=r(2370),v=r(55855),b=r(93863),f=r(8049),C=r(63211),S=r(27765),T=r(19960),E=r(84076),O=r(18131),Z=r(24656),D=r(84615),B=r(70698),x=r(72021),R=r(21768),k=r(41534),M=r(98499),L=r(48196);const P={currentCapacityData:{fill:"none"},currentColorScale:[R.CH.value,x.R0.value,B.t6.value,D.S7.value,k.iM.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},currentCostData:{fill:"none"},itemsPerRow:0,previousCapacityData:{fill:"none"},previousColorScale:[S.O6.value,T.OS.value,E.iY.value,O.cQ.value,Z.DD.value],previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousCostData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},_={chart:{marginTop:L.S1.value},title:{marginLeft:"-"+M.Js.value}};class w extends n().Component{constructor(){super(...arguments),this.containerRef=n().createRef(),this.observer=C.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentCostData:e,currentInfrastructureCostData:t,previousCostData:r,previousInfrastructureCostData:a}=this.props,o=s.Z.chartCostLegendLabel,n=s.Z.chartCostInfrastructureLegendLabel,i=s.Z.chartCostInfrastructureLegendTooltip,l=s.Z.chartCostLegendTooltip,p=[{childName:"previousCost",data:r,legendItem:{name:(0,c.uL)(r,o,!0,!0,1,s.Z.chartCostLegendNoDataLabel),symbol:{fill:P.previousColorScale[0],type:"minus"},tooltip:(0,c.uL)(r,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},P.previousCostData),{stroke:P.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,c.uL)(e,o,!0,!1,0,s.Z.chartCostLegendNoDataLabel),symbol:{fill:P.currentColorScale[0],type:"minus"},tooltip:(0,c.uL)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},P.currentCostData),{stroke:P.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:a,legendItem:{name:(0,c.uL)(a,n,!0,!0,1,s.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:P.previousColorScale[1],type:"dash"},tooltip:(0,c.uL)(a,i,!1,!1,1)},style:{data:Object.assign(Object.assign({},P.previousInfrastructureCostData),{stroke:P.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:t,legendItem:{name:(0,c.uL)(t,n,!0,!1,0,s.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:P.currentColorScale[1],type:"dash"},tooltip:(0,c.uL)(t,i,!1,!1)},style:{data:Object.assign(Object.assign({},P.currentInfrastructureCostData),{stroke:P.currentColorScale[1]})}}],u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:p})},this.getChart=(e,t)=>{const{hiddenSeries:r}=this.state;return n().createElement(p.A,{data:r.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,r=(0,u.f)("voronoi","cursor");return n().createElement(r,{cursorDimension:"x",labels:({datum:r})=>(0,f.zj)(r,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:120,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:r,width:a}=this.state,s=e||(a>700?P.itemsPerRow:2);return n().createElement(h.Qk,{data:(0,f.oX)(r,t),height:25,gutter:20,itemsPerRow:s,name:"legend"})},this.handleLegendClick=e=>{const t=(0,f.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,f.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentCostData===this.props.currentCostData&&e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.previousCostData===this.props.previousCostData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentInfrastructureCostData:e,previousInfrastructureCostData:t}=this.props,r=e?(0,v.Z)((0,c.Y_)(e,!0,!0)[1]):0,a=t?(0,v.Z)((0,c.Y_)(t,!0,!0)[1]):0;return r>0||a>0?Math.max(r,a):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,d.u)({chartNames:(0,f.bC)(t),isHidden:t=>(0,f.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{adjustContainerHeight:e,height:t,intl:r,containerHeight:o=t,padding:i={bottom:120,left:8,right:8,top:8},title:l,xAxisLabel:c,yAxisLabel:p}=this.props,{cursorVoronoiContainer:u,hiddenSeries:h,series:d,width:v}=this.state,C=(0,f.ge)(d,h),S=this.getEndDate(),T=Math.floor(S/2),E=e&&v>700?o-25:o,O=u?n().cloneElement(u,{disable:!(0,f.TW)(d,h),labelComponent:n().createElement(g.M,{legendData:(0,f.oX)(d,h,!0),title:e=>r.formatMessage(s.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return n().createElement("div",{className:"chartOverride",ref:this.containerRef},n().createElement(a.Title,{headingLevel:"h2",style:_.title,size:a.TitleSizes.xl},l),n().createElement("div",{style:Object.assign(Object.assign({},_.chart),{height:E})},n().createElement("div",{style:{height:t,width:v},"data-testid":"historical-chart-wrapper"},n().createElement(m.k,{containerComponent:O,domain:C,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:(0,f.oX)(d,h),legendPosition:"bottom",padding:i,theme:b.Z,width:v},d&&d.map(((e,t)=>this.getChart(e,t))),n().createElement(y.C,{label:c,style:P.xAxis,tickValues:[1,T,S]}),n().createElement(y.C,{dependentAxis:!0,label:p,style:P.yAxis})))))}}const V=(0,i.ZP)(w);var j=r(23246),G=r(98147),F=r(94377),I=r(42581),q=r(99291),U=r(57279),N=r(11331),A=r(32412);const z={chartContainer:{marginLeft:M.ZP.value},chartSkeleton:{height:"125px",marginBottom:A.ZP.value,marginTop:N.ZP.value},costChart:{marginBottom:L.ZP.value,marginTop:L.ZP.value},legendSkeleton:{marginTop:A.ZP.value},trendChart:{marginBottom:L.ZP.value,marginTop:L.ZP.value},usageChart:{marginTop:L.ZP.value}};class Q extends n().Component{constructor(){super(...arguments),this.getSkeleton=()=>n().createElement(n().Fragment,null,n().createElement(a.Skeleton,{style:z.chartSkeleton,width:U.N.md}),n().createElement(a.Skeleton,{style:z.legendSkeleton,width:U.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:r,reportPathsType:a,reportType:s}=this.props;e(a,s,t),e(a,s,r)}componentDidUpdate(e){const{fetchReport:t,costType:r,currentQueryString:a,previousQueryString:s,reportPathsType:o,reportType:n}=this.props;e.currentQueryString===a&&e.costType===r||t(o,n,a),e.previousQueryString===s&&e.costType===r||t(o,n,s)}render(){const{currentReport:e,currentReportFetchStatus:t,previousReport:r,previousReportFetchStatus:a,intl:o}=this.props,i=(0,c.zJ)(e,0,"date","cost"),l=(0,c.zJ)(e,0,"date","infrastructure"),p=(0,c.zJ)(r,0,"date","cost"),u=(0,c.zJ)(r,0,"date","infrastructure"),h=e&&e.meta&&e.meta.total&&e.meta.total.cost?e.meta.total.cost.total.units:"USD",d=o.formatMessage(s.Z.currencyUnits,{units:h});return n().createElement("div",{style:z.chartContainer},n().createElement("div",{style:z.costChart},1===t&&1===a?this.getSkeleton():n().createElement(V,{adjustContainerHeight:!0,containerHeight:275,currentCostData:i,currentInfrastructureCostData:l,formatOptions:{},formatter:q.bM,height:300,previousCostData:p,previousInfrastructureCostData:u,xAxisLabel:o.formatMessage(s.Z.historicalChartDayOfMonthLabel),yAxisLabel:o.formatMessage(s.Z.historicalChartCostLabel,{units:d})})))}}const $=(0,F.X1)(((e,{costType:t,reportPathsType:r,reportType:a})=>{const s=(0,l.mB)(location.search),o=(0,j.VL)(s),n=(0,j.pe)(s),i={cost_type:t,filter_by:Object.assign(Object.assign({},s&&s.filter_by&&s.filter_by),o&&{[o]:void 0}),group_by:Object.assign({},o&&{[o]:n})},c=Object.assign(Object.assign({},i),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),p=(0,l.pm)(c),u=Object.assign(Object.assign({},i),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),h=(0,l.pm)(u);return{currentQuery:c,currentQueryString:p,currentReport:I.ZV.selectReport(e,r,a,p),currentReportFetchStatus:I.ZV.selectReportFetchStatus(e,r,a,p),previousQuery:u,previousQueryString:h,previousReport:I.ZV.selectReport(e,r,a,h),previousReportFetchStatus:I.ZV.selectReportFetchStatus(e,r,a,h)}})),H={fetchReport:I.nx.fetchReport},W=(0,i.ZP)((0,G.connect)($,H)(Q)),X={currentColorScale:[R.CH.value,x.R0.value,B.t6.value,D.S7.value,k.iM.value],currentMonthData:{fill:"none"},itemsPerRow:0,previousColorScale:[S.O6.value,T.OS.value,E.iY.value,O.cQ.value,Z.DD.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},K={chart:{marginTop:L.S1.value},title:{marginLeft:"-"+M.Js.value}};class J extends n().Component{constructor(){super(...arguments),this.containerRef=n().createRef(),this.observer=C.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,previousData:t,showUsageLegendLabel:r=!1}=this.props,a=r?s.Z.chartUsageLegendLabel:s.Z.chartCostLegendLabel,o=r?s.Z.chartUsageLegendTooltip:s.Z.chartCostLegendTooltip,n=[{childName:"previousCost",data:t,legendItem:{name:(0,c.uL)(t,a,!0,!0,1,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:X.previousColorScale[0],type:"minus"},tooltip:(0,c.uL)(t,o,!1,!1,1)},style:{data:Object.assign(Object.assign({},X.previousMonthData),{stroke:X.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,c.uL)(e,a,!0,!1,0,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:X.currentColorScale[1],type:"minus"},tooltip:(0,c.uL)(e,o,!1,!1)},style:{data:Object.assign(Object.assign({},X.currentMonthData),{stroke:X.currentColorScale[1]})}}],i=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:i,series:n})},this.getChart=(e,t)=>{const{hiddenSeries:r}=this.state;return n().createElement(p.A,{data:r.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,r=(0,u.f)("voronoi","cursor");return n().createElement(r,{cursorDimension:"x",labels:({datum:r})=>(0,f.zj)(r,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:120,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:r}=this.state;return n().createElement(h.Qk,{data:(0,f.oX)(r,t),height:25,gutter:20,itemsPerRow:e,name:"legend"})},this.handleLegendClick=e=>{const t=(0,f.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,f.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,previousData:t}=this.props,r=t?(0,v.Z)((0,c.Y_)(t,!0,!0)[1]):0,a=e?(0,v.Z)((0,c.Y_)(e,!0,!0)[1]):0;return a>0||r>0?Math.max(a,r):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,d.u)({chartNames:(0,f.bC)(t),isHidden:t=>(0,f.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,containerHeight:r=e,padding:o={bottom:120,left:8,right:8,top:8},title:i,xAxisLabel:l,yAxisLabel:c}=this.props,{cursorVoronoiContainer:p,hiddenSeries:u,series:h,width:d}=this.state,v=(0,f.ge)(h,u),C=this.getEndDate(),S=Math.floor(C/2),T=p?n().cloneElement(p,{disable:!(0,f.TW)(h,u),labelComponent:n().createElement(g.M,{legendData:(0,f.oX)(h,u,!0),title:e=>t.formatMessage(s.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return n().createElement("div",{className:"chartOverride",ref:this.containerRef},n().createElement(a.Title,{headingLevel:"h2",style:K.title,size:a.TitleSizes.xl},i),n().createElement("div",{style:Object.assign(Object.assign({},K.chart),{height:r})},n().createElement("div",{style:{height:e,width:d},"data-testid":"historical-chart-wrapper"},n().createElement(m.k,{containerComponent:T,domain:v,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,f.oX)(h,u),legendPosition:"bottom",padding:o,theme:b.Z,width:d},h&&h.map(((e,t)=>this.getChart(e,t))),n().createElement(y.C,{label:l,style:X.xAxis,tickValues:[1,S,C]}),n().createElement(y.C,{dependentAxis:!0,label:c,style:X.yAxis})))))}}const Y=(0,i.ZP)(J);class ee extends n().Component{constructor(){super(...arguments),this.getSkeleton=()=>n().createElement(n().Fragment,null,n().createElement(a.Skeleton,{style:z.chartSkeleton,width:U.N.md}),n().createElement(a.Skeleton,{style:z.legendSkeleton,width:U.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:r,reportPathsType:a,reportType:s}=this.props;e(a,s,t),e(a,s,r)}componentDidUpdate(e){const{fetchReport:t,costType:r,currentQueryString:a,previousQueryString:s,reportPathsType:o,reportType:n}=this.props;e.currentQueryString===a&&e.costType===r||t(o,n,a),e.previousQueryString===s&&e.costType===r||t(o,n,s)}render(){const{currentReport:e,currentReportFetchStatus:t,previousReport:r,previousReportFetchStatus:a,reportType:o,intl:i}=this.props,l="cost"===o,p=(0,c.zJ)(e,l?0:1,"date",l?"cost":"usage"),u=(0,c.zJ)(r,l?0:1,"date",l?"cost":"usage"),h=e&&e.meta&&e.meta.total&&e.meta.total.cost?e.meta.total.cost.total.units:"USD",d=e&&e.meta&&e.meta.total&&e.meta.total.usage?e.meta.total.usage.units:void 0;let g;if(l){const e=i.formatMessage(s.Z.currencyUnits,{units:h});g=i.formatMessage(s.Z.historicalChartCostLabel,{units:e})}else if(d&&Number.isNaN(Number(e.meta.total.usage.units)))g=i.formatMessage(s.Z.units,{units:(0,q.ZV)(d)});else{const e=i.formatMessage(s.Z.historicalChartUsageLabel,{value:o});g=i.formatMessage(s.Z.units,{units:(0,q.ZV)(e)})}return n().createElement("div",{style:z.chartContainer},n().createElement("div",{style:z.trendChart},1===t&&1===a?this.getSkeleton():n().createElement(Y,{containerHeight:250,currentData:p,formatOptions:{},formatter:q.bM,height:300,previousData:u,units:l?h:d,xAxisLabel:i.formatMessage(s.Z.historicalChartDayOfMonthLabel),yAxisLabel:g})))}}const te=(0,F.X1)(((e,{costType:t,reportPathsType:r,reportType:a})=>{const s=(0,l.mB)(location.search),o=(0,j.OA)(s),n=o?l.dV:(0,j.VL)(s),i=o||(0,j.pe)(s),c={cost_type:t,filter_by:Object.assign(Object.assign(Object.assign({},s&&s.filter_by&&s.filter_by),s&&s.filter&&s.filter.account&&{[`${l.Sq}account`]:s.filter.account}),n&&{[n]:void 0}),group_by:Object.assign({},n&&{[n]:i})},p=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),u=(0,l.pm)(p),h=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),d=(0,l.pm)(h);return{currentQuery:p,currentQueryString:u,currentReport:I.ZV.selectReport(e,r,a,u),currentReportFetchStatus:I.ZV.selectReportFetchStatus(e,r,a,u),previousQuery:h,previousQueryString:d,previousReport:I.ZV.selectReport(e,r,a,d),previousReportFetchStatus:I.ZV.selectReportFetchStatus(e,r,a,d)}})),re={fetchReport:I.nx.fetchReport},ae=(0,i.ZP)((0,G.connect)(te,re)(ee)),se={currentCapacityData:{fill:"none"},currentColorScale:[R.CH.value,x.R0.value,B.t6.value,D.S7.value,k.iM.value],currentLimitData:{fill:"none"},currentRequestData:{fill:"none",strokeDasharray:"3,3"},currentUsageData:{fill:"none"},itemsPerRow:0,previousCapacityData:{fill:"none"},previousColorScale:[S.O6.value,T.OS.value,E.iY.value,O.cQ.value,Z.DD.value],previousLimitData:{fill:"none"},previousRequestData:{fill:"none",strokeDasharray:"3,3"},previousUsageData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},oe={chart:{marginTop:L.S1.value},title:{marginLeft:"-"+M.Js.value}};class ne extends n().Component{constructor(){super(...arguments),this.containerRef=n().createRef(),this.observer=C.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentLimitData:e,currentRequestData:t,currentUsageData:r,previousLimitData:a,previousRequestData:o,previousUsageData:n}=this.props,i=s.Z.chartLimitLegendLabel,l=s.Z.chartLimitLegendTooltip,p=s.Z.chartRequestsLegendLabel,u=s.Z.chartRequestsLegendTooltip,h=s.Z.chartUsageLegendLabel,d=s.Z.chartUsageLegendTooltip,g=[{childName:"previousUsage",data:n,legendItem:{name:(0,c.Fs)(n,h,!0,!0,1,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:se.previousColorScale[0],type:"minus"},tooltip:(0,c.Fs)(n,d,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousUsageData),{stroke:se.previousColorScale[0]})}},{childName:"currentUsage",data:r,legendItem:{name:(0,c.Fs)(r,h,!0,!1,0,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:se.currentColorScale[0],type:"minus"},tooltip:(0,c.Fs)(r,d,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentUsageData),{stroke:se.currentColorScale[0]})}},{childName:"previousRequest",data:o,legendItem:{name:(0,c.Fs)(o,p,!0,!0,1,s.Z.chartRequestsLegendNoDataLabel),symbol:{fill:se.previousColorScale[1],type:"dash"},tooltip:(0,c.Fs)(o,u,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousRequestData),{stroke:se.previousColorScale[1]})}},{childName:"currentRequest",data:t,legendItem:{name:(0,c.Fs)(t,p,!0,!1,0,s.Z.chartRequestsLegendNoDataLabel),symbol:{fill:se.currentColorScale[1],type:"dash"},tooltip:(0,c.Fs)(t,u,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentRequestData),{stroke:se.currentColorScale[1]})}},{childName:"previousLimit",data:a,legendItem:{name:(0,c.Fs)(a,i,!0,!0,1,s.Z.chartLimitLegendNoDataLabel),symbol:{fill:se.previousColorScale[2],type:"minus"},tooltip:(0,c.Fs)(a,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousLimitData),{stroke:se.previousColorScale[2]})}},{childName:"currentLimit",data:e,legendItem:{name:(0,c.Fs)(e,i,!0,!1,0,s.Z.chartLimitLegendNoDataLabel),symbol:{fill:se.currentColorScale[2],type:"minus"},tooltip:(0,c.Fs)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentLimitData),{stroke:se.currentColorScale[2]})}}],m=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:m,series:g})},this.getChart=(e,t)=>{const{hiddenSeries:r}=this.state;return n().createElement(p.A,{data:r.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,r=(0,u.f)("voronoi","cursor");return n().createElement(r,{cursorDimension:"x",labels:({datum:r})=>(0,f.zj)(r,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:130,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:r,width:a}=this.state,s=e||(a>900?se.itemsPerRow:2);return n().createElement(h.Qk,{data:(0,f.oX)(r,t),height:25,gutter:20,itemsPerRow:s,name:"legend"})},this.handleLegendClick=e=>{const t=(0,f.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,f.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentLimitData===this.props.currentLimitData&&e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousLimitData===this.props.previousLimitData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:r,previousUsageData:a}=this.props,s=e?(0,v.Z)((0,c.Y_)(e,!0,!0)[1]):0,o=t?(0,v.Z)((0,c.Y_)(t,!0,!0)[1]):0,n=r?(0,v.Z)((0,c.Y_)(r,!0,!0)[1]):0,i=a?(0,v.Z)((0,c.Y_)(a,!0,!0)[1]):0;return s>0||o>0||n>0||i>0?Math.max(s,o,n,i):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,d.u)({chartNames:(0,f.bC)(t),isHidden:t=>(0,f.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{adjustContainerHeight:e,height:t,intl:r,containerHeight:o=t,padding:i={bottom:130,left:8,right:8,top:8},title:l,xAxisLabel:c,yAxisLabel:p}=this.props,{cursorVoronoiContainer:u,hiddenSeries:h,series:d,width:v}=this.state,C=(0,f.ge)(d,h),S=this.getEndDate(),T=Math.floor(S/2),E=e&&v>900?o-50:o,O=u?n().cloneElement(u,{disable:!(0,f.TW)(d,h),labelComponent:n().createElement(g.M,{legendData:(0,f.oX)(d,h,!0),title:e=>r.formatMessage(s.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return n().createElement("div",{className:"chartOverride",ref:this.containerRef},n().createElement(a.Title,{headingLevel:"h2",style:oe.title,size:a.TitleSizes.xl},l),n().createElement("div",{style:Object.assign(Object.assign({},oe.chart),{height:E})},n().createElement("div",{style:{height:t,width:v},"data-testid":"historical-chart-wrapper"},n().createElement(m.k,{containerComponent:O,domain:C,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:(0,f.oX)(d,h),legendPosition:"bottom",padding:i,theme:b.Z,width:v},d&&d.map(((e,t)=>this.getChart(e,t))),n().createElement(y.C,{label:c,style:se.xAxis,tickValues:[1,T,S]}),n().createElement(y.C,{dependentAxis:!0,label:p,style:se.yAxis})))))}}const ie=(0,i.ZP)(ne);class le extends n().Component{constructor(){super(...arguments),this.getSkeleton=()=>n().createElement(n().Fragment,null,n().createElement(a.Skeleton,{style:z.chartSkeleton,width:U.N.md}),n().createElement(a.Skeleton,{style:z.legendSkeleton,width:U.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:r,reportPathsType:a,reportType:s}=this.props;e(a,s,t),e(a,s,r)}componentDidUpdate(e){const{fetchReport:t,currentQueryString:r,previousQueryString:a,reportPathsType:s,reportType:o}=this.props;e.currentQueryString!==r&&t(s,o,r),e.previousQueryString!==a&&t(s,o,a)}render(){const{currentReport:e,currentReportFetchStatus:t,previousReport:r,previousReportFetchStatus:a,intl:o}=this.props,i=(0,c.zJ)(e,1,"date","limit"),l=(0,c.zJ)(e,1,"date","request"),p=(0,c.zJ)(e,1,"date","usage"),u=(0,c.zJ)(r,1,"date","limit"),h=(0,c.zJ)(r,1,"date","request"),d=(0,c.zJ)(r,1,"date","usage"),g=e&&e.meta&&e.meta.total&&e.meta.total.usage?e.meta.total.usage.units:"";return n().createElement("div",{style:z.chartContainer},n().createElement("div",{style:z.usageChart},1===t&&1===a?this.getSkeleton():n().createElement(ie,{adjustContainerHeight:!0,containerHeight:300,currentLimitData:i,currentRequestData:l,currentUsageData:p,formatter:q.bM,formatOptions:{},height:300,previousLimitData:u,previousRequestData:h,previousUsageData:d,xAxisLabel:o.formatMessage(s.Z.historicalChartDayOfMonthLabel),yAxisLabel:o.formatMessage(s.Z.units,{units:(0,q.ZV)(g)})})))}}const ce=(0,F.X1)(((e,{reportPathsType:t,reportType:r})=>{const a=(0,l.mB)(location.search),s=(0,j.OA)(a),o=(0,j.VL)(a),n=(0,j.pe)(a),i="instance_type"===r||"storage"===r,c={filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},a&&a.filter_by&&a.filter_by),a&&a.filter&&a.filter.account&&{[`${l.Sq}account`]:a.filter.account}),o&&{[o]:void 0}),s&&i&&{[l.dV]:s}),group_by:Object.assign(Object.assign({},s&&!i&&{[l.dV]:s}),o&&!s&&{[o]:n})},p=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),u=(0,l.pm)(p),h=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),d=(0,l.pm)(h);return{currentQuery:p,currentQueryString:u,currentReport:I.ZV.selectReport(e,t,r,u),currentReportFetchStatus:I.ZV.selectReportFetchStatus(e,t,r,u),previousQuery:h,previousQueryString:d,previousReport:I.ZV.selectReport(e,t,r,d),previousReportFetchStatus:I.ZV.selectReportFetchStatus(e,t,r,d)}})),pe={fetchReport:I.nx.fetchReport},ue=(0,i.ZP)((0,G.connect)(ce,pe)(le));class he extends n().Component{constructor(){super(...arguments),this.getCostChart=e=>{const{costType:t,intl:r}=this.props;return n().createElement(a.Card,null,n().createElement(a.CardTitle,null,n().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(s.Z.historicalChartTitle,{value:e.reportType}))),n().createElement(a.CardBody,null,n().createElement(W,{costType:t,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getTrendChart=e=>{const{costType:t,intl:r}=this.props;return n().createElement(a.Card,null,n().createElement(a.CardTitle,null,n().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(s.Z.historicalChartTitle,{value:e.reportType}))),n().createElement(a.CardBody,null,n().createElement(ae,{costType:t,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getUsageChart=e=>{const{intl:t}=this.props;return n().createElement(a.Card,null,n().createElement(a.CardTitle,null,n().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},t.formatMessage(s.Z.historicalChartTitle,{value:e.reportType}))),n().createElement(a.CardBody,null,n().createElement(ue,{reportPathsType:e.reportPathsType,reportType:e.reportType})))}}renderWidget(e){switch(e.type){case"cost":return this.getCostChart(e);case"trend":return this.getTrendChart(e);case"usage":return this.getUsageChart(e);default:return null}}render(){const{selectWidgets:e,widgets:t}=this.props;return n().createElement(a.Grid,{hasGutter:!0},t.map((t=>{const r=e[t];return n().createElement(a.GridItem,{key:`widget-${t}`},this.renderWidget(r))})))}}const de=(0,i.ZP)(he)},57116:(e,t,r)=>{r.d(t,{W:()=>c});var a=r(49382),s=r(33605),o=r(17918),n=r(54881),i=r(98499),l=r(48196);const c={costValue:{marginTop:i.ZP.var,marginBottom:0},costLabelUnit:{fontSize:n.ZP.value,color:s.ZP.var},dateTitle:{textAlign:"end"},header:{backgroundColor:a.ZP.var,padding:i.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex",minHeight:"90px"},headerContentRight:{display:"flex"},info:{verticalAlign:"middle"},infoIcon:{fontSize:o.ZP.value},infoTitle:{fontWeight:"bold"},title:{paddingBottom:l.ZP.var}}},88268:(e,t,r)=>{r.d(t,{T:()=>s,Z:()=>o});var a=r(45997);const s=({basePath:e,label:t,description:r,groupBy:s,query:o})=>{const n=Object.assign(Object.assign(Object.assign({},o),r&&r!==t&&{[a.eG]:r}),{group_by:{[s]:t}});return`${e}?${(0,a.IV)(n)}`},o=({basePath:e,description:t,groupBy:r,groupByOrg:s,id:o,orgUnitId:n,query:i,title:l,type:c})=>{const p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},JSON.parse(JSON.stringify(i))),t&&t!==l&&{[a.eG]:t}),l&&{[a.yG]:l}),s&&n&&{[a.dV]:n}),{group_by:{[r]:o}});return p.filter||(p.filter={}),"account"===c?(p.filter.account=o,p.group_by={[a.dV]:s}):"organizational_unit"===c&&(p.group_by={[a.dV]:o}),`${e}?${(0,a.IV)(p)}`}},76821:(e,t,r)=>{r.d(t,{_q:()=>s,g_:()=>a});const a=e=>({"data-testid":e}),s={details:{cluster_lnk:"cluster-lnk",historical_data_btn:"historical-data-btn",show_more_btn:"show-more-btn",tag_lnk:"tag-lnk",view_all_btn:"view-all-btn"},export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},onboarding:{btn_cancel:"btn-cancel",btn_back:"btn-back",btn_continue:"btn-continue",btn_close:"btn-close",type_selector:"type-selector",type_opt_aws:"type-option-aws",type_opt_ocp:"type-option-ocp",type_opt_non:"type-option-non",name_input:"name-input",check_box_1:"check-box-1",check_box_2:"check-box-2",s3_input:"s3-input",clusterid_input:"clusterid-input",arn_input:"arn-input"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}}}]);
//# sourceMappingURL=87dfdd748d2b99f9b4ab.bundle.js.map