"use strict";(self.webpackChunkcostManagement=self.webpackChunkcostManagement||[]).push([[2340],{52636:(e,t,r)=>{r.d(t,{Xk:()=>o,rU:()=>s});var a=r(40400);const s={name:"CalculatorIcon",height:512,width:448,svgPath:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z",yOffset:0,xOffset:0},o=(0,a.IU)(s)},53086:(e,t,r)=>{r.d(t,{xX:()=>o,yK:()=>s});var a=r(40400);const s={name:"OkIcon",height:1024,width:1024,svgPath:"M668.3,361.4 L465.1,564.6 L352.2,451.7 C346.210177,445.698444 338.079189,442.325817 329.6,442.325817 C321.120811,442.325817 312.989823,445.698444 307,451.7 L261.8,496.9 C255.798444,502.889823 252.425817,511.020811 252.425817,519.5 C252.425817,527.979189 255.798444,536.110177 261.8,542.1 L442.4,722.7 C448.389823,728.701556 456.520811,732.074183 465,732.074183 C473.479189,732.074183 481.610177,728.701556 487.6,722.7 L758.6,451.7 C764.601556,445.710177 767.974183,437.579189 767.974183,429.1 C767.974183,420.620811 764.601556,412.489823 758.6,406.5 L713.4,361.3 C700.916226,348.87879 680.728569,348.923552 668.3,361.4 M512.1,127.9 C300.3,127.9 128.1,300.2 128.1,511.9 C128.1,723.8 300.3,895.9 512.1,895.9 C723.9,895.9 896.1,723.7 896.1,511.9 C896.1,300.1 723.8,127.9 512.1,127.9 M512.1,1024 C229.7,1024 0,794.3 0,512 C0,229.7 229.7,0 512.1,0 C794.3,0 1024,229.7 1024,512 C1024,794.3 794.3,1024 512.1,1024",yOffset:0,xOffset:0},o=(0,a.IU)(s)},84717:(e,t,r)=>{r.d(t,{H:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,r)=>{r.d(t,{T:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},6450:(e,t,r)=>{r.d(t,{F:()=>y,m:()=>m});var a=r(90154),s=r(97027),o=r(92950),n=r.n(o),i=r(74806),l=r(82537),c=r(1156),p=r(15829);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"}},m=[{label:s.Z.currencyOptions,value:"AUD"},{label:s.Z.currencyOptions,value:"CAD"},{label:s.Z.currencyOptions,value:"CHF"},{label:s.Z.currencyOptions,value:"CNY"},{label:s.Z.currencyOptions,value:"DKK"},{label:s.Z.currencyOptions,value:"EUR"},{label:s.Z.currencyOptions,value:"GBP"},{label:s.Z.currencyOptions,value:"HKD"},{label:s.Z.currencyOptions,value:"JPY"},{label:s.Z.currencyOptions,value:"NOK"},{label:s.Z.currencyOptions,value:"NZD"},{label:s.Z.currencyOptions,value:"SEK"},{label:s.Z.currencyOptions,value:"SGD"},{label:s.Z.currencyOptions,value:"USD"},{label:s.Z.currencyOptions,value:"ZAR"}];class d extends n().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t,showLabel:r=!0}=this.props,{isSelectOpen:s}=this.state,o=this.getSelectOptions(),i=o.find((t=>t.value===e));return n().createElement(a.Select,{className:r?"currencyOverride":void 0,id:"currencySelect",isDisabled:t,isOpen:s,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:i,variant:a.SelectVariant.single},o.map((e=>n().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return m.map((r=>{t.push({toString:()=>e.formatMessage(r.label,{units:r.value}),value:r.value})})),t},this.handleSelect=(e,t)=>{const{isLocalStorage:r=!0,onSelect:a}=this.props;r&&(0,p.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{a&&a(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e,showLabel:t=!0}=this.props;return n().createElement("div",{style:u.currencySelector},t&&n().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.md,style:u.currencyLabel},e.formatMessage(s.Z.currency)),this.getSelect())}}const h=(0,c.X1)((()=>({}))),g=(0,l.connect)(h,{})(d),y=(0,i.ZP)(g)},91882:(e,t,r)=>{r.d(t,{W:()=>l});var a=r(49382),s=r(12289),o=r(40794),n=r(11331),i=r(43789);const l={costColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end",paddingRight:0},defaultLabel:{minWidth:"50px"},emptyState:{backgroundColor:a.ZP.value,display:"flex",justifyContent:"center",paddingTop:n.ZP.value,height:"35vh",width:"100%"},infoArrow:{position:"relative"},infoArrowDesc:{bottom:i.ZP.value},infoDescription:{color:s.ZP.value,fontSize:o.ZP.value},lastItem:{textAlign:"right",paddingRight:"3.8rem"},lastItemColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end"},managedColumn:{textAlign:"right"},nameColumn:{width:"1%"}}},70637:(e,t,r)=>{r.d(t,{w:()=>h,V:()=>y});var a=r(90154),s=r(52636),o=r(40227),n=r(97027),i=r(92950),l=r.n(i),c=r(74806),p=r(42901),u=r(5842),m=r(91882);class d extends l().Component{constructor(e){super(e),this.getEmptyState=()=>{const{filterBy:e,intl:t}=this.props;if(e)for(const t of Object.values(e))if("*"!==t)return l().createElement(p.c,{filter:t,showMargin:!1});return l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:s.Xk}),l().createElement(a.EmptyStateBody,null,t.formatMessage(n.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,orderBy:r}=this.props,a=r&&r[t[e].orderBy];return a?{index:e,direction:a}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSelect=(e,t,r)=>{const{onSelected:a,rows:s}=this.props;let o,n=[];-1===r?o=s.map((e=>(e.selected=t,e))):(o=[...s],o[r].selected=t,n=[o[r].item]),this.setState({rows:s},(()=>{a&&a(n,t)}))},this.handleOnSort=(e,t,r)=>{const{columns:a,onSort:s}=this.props;s&&s(a[t].orderBy,r===o.SortByDirection.asc)},this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isActionsCell:r=!1,isLoading:s,rows:i}=this.props;return l().createElement(l().Fragment,null,l().createElement(o.TableComposable,{"aria-label":t.formatMessage(n.Z.dataTableAriaLabel),className:"tableOverride",gridBreakPoint:"grid-2xl",variant:o.TableVariant.compact},l().createElement(o.Thead,null,l().createElement(o.Tr,null,e.map(((e,t)=>l().createElement(o.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),l().createElement(o.Tbody,null,s?l().createElement(o.Tr,null,l().createElement(o.Td,{colSpan:100},l().createElement(a.Bullseye,null,l().createElement("div",{style:{textAlign:"center"}},l().createElement(a.Spinner,{size:"xl"}))))):i.map(((t,a)=>l().createElement(o.Tr,{key:`row-${a}`},t.cells.map(((s,n)=>0===n?l().createElement(o.Td,{dataLabel:e[n].name,key:`cell-${n}-${a}`,modifier:"nowrap",select:{disable:t.selectionDisabled,isSelected:t.selected,onSelect:(e,t)=>this.handleOnSelect(e,t,a),rowIndex:a},style:s.style}):l().createElement(o.Td,{dataLabel:e[n].name,key:`cell-${a}-${n}`,modifier:"nowrap",isActionCell:r&&n===t.cells.length-1,style:s.style},s.value)))))))),0===i.length&&l().createElement("div",{style:m.W.emptyState},this.getEmptyState()))}}const h=(0,c.ZP)((0,u.E)(d));class g extends l().Component{constructor(e){super(e),this.getEmptyState=()=>{const{emptyState:e,filterBy:t,intl:r}=this.props;if(t)for(const e of Object.values(t))if("*"!==e)return l().createElement(p.c,{filter:e,showMargin:!1});return e||l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:s.Xk}),l().createElement(a.EmptyStateBody,null,r.formatMessage(n.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,orderBy:r}=this.props,a=r&&r[t[e].orderBy];return a?{index:e,direction:a}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSort=(e,t,r)=>{const{columns:a,onSort:s}=this.props;s&&s(a[t].orderBy,r===o.SortByDirection.asc)},this.handleOnRowClick=(e,t)=>{const{onRowClick:r,rows:a}=this.props;a.map((e=>e.selected=!1)),a[t].selected=!0,this.setState({rows:a},(()=>{r&&r(e,t)}))},this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isLoading:r,rows:s}=this.props;return l().createElement(l().Fragment,null,l().createElement(o.TableComposable,{"aria-label":t.formatMessage(n.Z.selectableTableAriaLabel),gridBreakPoint:"grid-2xl",hasSelectableRowCaption:!0,variant:o.TableVariant.compact},l().createElement(o.Thead,null,l().createElement(o.Tr,null,e.map(((e,t)=>l().createElement(o.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),l().createElement(o.Tbody,null,r?l().createElement(o.Tr,null,l().createElement(o.Td,{colSpan:100},l().createElement(a.Bullseye,null,l().createElement("div",{style:{textAlign:"center"}},l().createElement(a.Spinner,{size:"xl"}))))):s.map(((r,a)=>l().createElement(o.Tr,{"aria-label":t.formatMessage(n.Z.selectableTableRowAriaLabel),isSelectable:!0,isHoverable:!0,isRowSelected:r.selected,onRowClick:e=>this.handleOnRowClick(e,a),key:`row-${a}`},r.cells.map(((r,s)=>0===s?l().createElement(o.Th,{"aria-label":t.formatMessage(n.Z.selectableTableHeaderAriaLabel),dataLabel:e[s].name,key:`cell-${a}-${s}`,modifier:"nowrap",style:r.style},r.value):l().createElement(o.Td,{dataLabel:e[s].name,key:`cell-${a}-${s}`,modifier:"nowrap",style:r.style},r.value)))))))),0===s.length&&l().createElement("div",{style:m.W.emptyState},this.getEmptyState()))}}const y=(0,c.ZP)((0,u.E)(g))},86374:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),i=r.n(n),l=r(7081),c=r(97027),p=r(74806);class u extends i().Component{render(){const{intl:e,showReload:t=!0}=this.props;return i().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(a.EmptyStateIcon,{icon:l.wl}),i().createElement(a.Title,{headingLevel:"h5",size:a.TitleSizes.lg},e.formatMessage(c.Z.noDataStateTitle)),i().createElement(a.EmptyStateBody,null,e.formatMessage(c.Z.noDataStateDesc)),t&&i().createElement(a.Button,{variant:"primary",onClick:()=>window.location.reload()},e.formatMessage(c.Z.noDataStateRefresh)))}}const m=(0,p.ZP)(u),d=({showReload:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(s.Z,null,i().createElement(o.Z,{title:t})),i().createElement(a.PageSection,null,i().createElement(m,{showReload:e})))},86882:(e,t,r)=>{r.d(t,{L:()=>T});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),i=r.n(n),l=r(15265),c=r(7081),p=r(1326),u=r(97027),m=r(74806);const d=r(84735),h=(0,m.ZP)((({className:e,intl:t})=>i().createElement("img",{className:`cost-icon ${e}`,src:d,alt:t.formatMessage(u.Z.costManagement),"aria-hidden":"true"})));var g=r(68025),y=r(98499);const f={iconSpacer:{marginLeft:r(43789).ZP.value},viewSources:{marginTop:y.ZP.value}};class b extends i().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{intl:r}=this.props;return i().createElement("a",{href:r.formatMessage(t),rel:"noreferrer",target:"_blank"},r.formatMessage(e),i().createElement("span",{style:f.iconSpacer},i().createElement(l.LA,null)))},this.getRouteToSources=()=>`${(0,g.IG)()}/settings/sources`}render(){const{intl:e,providerType:t}=this.props;let r,s,o,n=u.Z.noProvidersStateOverviewDesc,l=u.Z.noProvidersStateOverviewTitle;switch(t){case p.l.aws:n=u.Z.noProvidersStateAwsDesc,l=u.Z.noProvidersStateAwsTitle;break;case p.l.azure:n=u.Z.noProvidersStateAzureDesc,l=u.Z.noProvidersStateAzureTitle;break;case p.l.gcp:n=u.Z.noProvidersStateGcpDesc,l=u.Z.noProvidersStateGcpTitle;break;case p.l.ibm:n=u.Z.noProvidersStateIbmDesc,l=u.Z.noProvidersStateIbmTitle;break;case p.l.ocp:n=u.Z.noProvidersStateOcpDesc,r=u.Z.docsAddOcpSources,o=u.Z.noProvidersStateOcpAddSources,l=u.Z.noProvidersStateOcpTitle;break;default:s=h}return i().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(a.EmptyStateIcon,{icon:s||c.wl}),i().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes.lg},e.formatMessage(l)),i().createElement(a.EmptyStateBody,null,e.formatMessage(n)),r&&o?i().createElement("div",{style:f.viewSources},this.getDocLink(o,r)):i().createElement(a.Button,{variant:"primary",component:"a",href:this.getRouteToSources()},e.formatMessage(u.Z.noProvidersStateGetStarted)))}}const v=(0,m.ZP)(b),T=({providerType:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(s.Z,null,i().createElement(o.Z,{title:t})),i().createElement(a.PageSection,null,i().createElement(v,{providerType:e})))},71060:(e,t,r)=>{r.d(t,{b:()=>v});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),i=r.n(n),l=r(85893),c=r(15138),p=function(){return p=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},p.apply(this,arguments)},u=function(){return(0,l.jsxs)(i().Fragment,{children:["Contact your organization administrator(s) for more information or visit ",(0,l.jsx)("a",p({href:"./settings/my-user-access"},{children:"My User Access"})),"  to learn more about your permissions."]})};const m=function(e){var t=e.prevPageButtonText,r=void 0===t?"Return to previous page":t,s=e.toLandingPageText,o=void 0===s?"Go to landing page":s,n=e.title,i=e.actions,m=void 0===i?null:i,d=e.serviceName,h=e.icon,g=void 0===h?c.LockIcon:h,y=e.description,f=void 0===y?(0,l.jsx)(u,{}):y,b=e.showReturnButton,v=void 0===b||b,T=e.className,E=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,["prevPageButtonText","toLandingPageText","title","actions","serviceName","icon","description","showReturnButton","className"]),S=n||"You do not have access to ".concat(d);return(0,l.jsxs)(a.EmptyState,p({variant:a.EmptyStateVariant.full,className:"ins-c-not-authorized ".concat(T||"")},E,{children:[(0,l.jsx)(a.EmptyStateIcon,{icon:g}),(0,l.jsx)(a.Title,p({headingLevel:"h5",size:"lg"},{children:S})),(0,l.jsx)(a.EmptyStateBody,{children:f}),m,v&&(document.referrer?(0,l.jsx)(a.Button,p({variant:"primary",onClick:function(){return history.back()}},{children:r})):(0,l.jsx)(a.Button,p({variant:"primary",component:"a",href:"."},{children:o})))]}))};var d=r(97027),h=r(74806),g=r(91919),y=r(68025);class f extends i().Component{render(){const{intl:e,pathname:t}=this.props;let r;switch(t){case(0,y.dI)(g._.awsDetails.path):case(0,y.dI)(g._.awsDetailsBreakdown.path):r=d.Z.notAuthorizedStateAws;break;case(0,y.dI)(g._.azureDetails.path):case(0,y.dI)(g._.azureDetailsBreakdown.path):r=d.Z.notAuthorizedStateAzure;break;case(0,y.dI)(g._.costModel.path):case(0,y.dI)(g._.costModelsDetails.path):r=d.Z.notAuthorizedStateCostModels;break;case(0,y.dI)(g._.gcpDetails.path):case(0,y.dI)(g._.gcpDetailsBreakdown.path):r=d.Z.notAuthorizedStateGcp;break;case(0,y.dI)(g._.ibmDetails.path):case(0,y.dI)(g._.ibmDetailsBreakdown.path):r=d.Z.notAuthorizedStateIbm;break;case(0,y.dI)(g._.ociDetails.path):case(0,y.dI)(g._.ociDetailsBreakdown.path):r=d.Z.notAuthorizedStateOci;break;case(0,y.dI)(g._.ocpDetails.path):case(0,y.dI)(g._.ocpDetailsBreakdown.path):r=d.Z.notAuthorizedStateOcp;break;case(0,y.dI)(g._.rhelDetails.path):case(0,y.dI)(g._.rhelDetailsBreakdown.path):r=d.Z.notAuthorizedStateRhel;break;case(0,y.dI)(g._.optimizations.path):r=d.Z.notAuthorizedStateOptimizations;break;case(0,y.dI)(g._.settings.path):r=d.Z.notAuthorizedStateSettings;break;case(0,y.dI)(g._.explorer.path):default:r=d.Z.costManagement}return i().createElement(m,{serviceName:e.formatMessage(r)})}}const b=(0,h.ZP)(f),v=({pathname:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(s.Z,null,i().createElement(o.Z,{title:t})),i().createElement(a.PageSection,null,i().createElement(b,{pathname:e})))},32046:(e,t,r)=>{r.d(t,{X:()=>T});var a=r(97027),s=r(92950),o=r.n(s),n=r(55360);const i=[{label:a.Z.perspectiveValues,value:"aws"}],l=[{label:a.Z.perspectiveValues,value:"aws_ocp"}],c=[{label:a.Z.perspectiveValues,value:"azure"}],p=[{label:a.Z.perspectiveValues,value:"oci"}],u=[{label:a.Z.perspectiveValues,value:"azure_ocp"}],m=[{label:a.Z.perspectiveValues,value:"gcp"}],d=[{label:a.Z.perspectiveValues,value:"gcp_ocp"}],h=[{label:a.Z.perspectiveValues,value:"ibm"}],g=[{label:a.Z.perspectiveValues,value:"ibm_ocp"}],y=[{label:a.Z.perspectiveValues,value:"ocp_cloud"}],f=[{label:a.Z.perspectiveValues,value:"ocp"}],b=[{label:a.Z.perspectiveValues,value:"rhel"}],v=({hasAws:e,hasAwsOcp:t,hasAzure:r,hasAzureOcp:a,hasGcp:s,hasGcpOcp:o,hasIbm:n,hasIbmOcp:y,hasOci:f,isIbmFeatureEnabled:b})=>{const v=[];return e&&v.push(...i),t&&v.push(...l),s&&v.push(...m),o&&v.push(...d),n&&v.push(...h),y&&b&&v.push(...g),r&&v.push(...c),a&&v.push(...u),f&&v.push(...p),v},T=({currentItem:e,hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:i,hasGcpOcp:l,hasIbm:c,hasIbmOcp:p,hasOci:u,hasOcp:m,hasOcpCloud:d,hasRhel:h,isDisabled:g,isIbmFeatureEnabled:T,isInfrastructureTab:E,isRhelTab:S,onSelected:P})=>{const Z=[];return void 0!==E||void 0!==S?E?(d&&Z.push(...y),Z.push(...v({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:i,hasGcpOcp:l,hasIbm:c,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:T}))):S?h&&Z.push(...b):m&&Z.push(...f):(m&&Z.push(...f),d&&Z.push(...y),h&&Z.push(...b),Z.push(...v({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:i,hasGcpOcp:l,hasIbm:c,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:T}))),o().createElement(n.o,{currentItem:e||Z[0].value,isDisabled:g,onSelected:P,options:Z})}},71493:(e,t,r)=>{r.r(t),r.d(t,{default:()=>wt});var a=r(90154),s=r(91290),o=r(1326),n=r(39333),i=r(84717),l=r(37610),c=r(91577),p=r(97027),u=r(92950),m=r.n(u),d=r(74806),h=r(82537),g=r(6279),y=r(6450),f=r(38274),b=r(86374),v=r(86882),T=r(32046);const E=({costType:e,currency:t,DashboardWidget:r,selectWidgets:s,widgets:o})=>m().createElement("div",null,m().createElement(a.Grid,{hasGutter:!0},o.map((o=>{const n=s[o];return n.details&&n.details.showHorizontal?m().createElement(a.GridItem,{sm:12,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t}))):m().createElement(a.GridItem,{lg:12,xl:6,xl2:4,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t})))}))));var S=r(39836),P=r(69701),Z=r(42101),C=r(86847),M=r(91919),O=r(64273),R=r(1156),F=r(68025),I=r(17918);const k={infoIcon:{fontSize:I.ZP.value}},D=(0,d.ZP)((({intl:e,report:t,status:r,title:o})=>{const n=t&&t.meta?t.meta.count:0,i=e.formatMessage(p.Z.optimizationsDetails,{count:n});return m().createElement(a.Card,{className:"summary"},m().createElement(a.CardTitle,null,m().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o),m().createElement("span",{style:k.infoIcon},m().createElement(a.Popover,{"aria-label":e.formatMessage(p.Z.optimizationsInfoArialLabel),enableFlip:!0,bodyContent:m().createElement("p",{style:k.infoTitle},e.formatMessage(p.Z.optimizationsInfo))},m().createElement(a.Button,{"aria-label":e.formatMessage(p.Z.optimizationsInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null)))))),m().createElement(a.CardBody,null,r===R.iF.inProgress?m().createElement(m().Fragment,null,m().createElement(a.Skeleton,{width:"16%"}),m().createElement(a.Skeleton,{className:"skeleton",width:O.N.md})):n>0?m().createElement(S.Link,{to:(0,F.dI)(M._.optimizations.path)},i):i))}));var j=r(30564),A=r(60329),w=r(91778);class x extends m().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:r}=this.state,s=this.getSelectOptions(),o=s.find((e=>e.value===t));return m().createElement(a.Select,{id:"comparisonSelect",isDisabled:e,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:a.SelectVariant.single},s.map((e=>m().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:r}=this.props;r&&r(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const V=x;var L=r(91707),z=r(32412),W=r(57640);const B={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},_={comparison:{marginBottom:z.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:L.ZP.value},tabItems:{marginTop:W.ZP.value}};var N;!function(e){e.cumulative="cumulative",e.daily="daily"}(N||(N={}));class U extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,currentComparison:N.cumulative},this.state=Object.assign({},this.defaultState),this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,a=r(e);return`${t.viewAllPath}?${(0,n.pm)({group_by:{[a]:"*"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:a,trend:s}=this.props;return a===j.i.dailyTrend?this.getDailyTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.dailyCost?this.getDailyCostChart(e,t,r):a===j.i.trend?this.getTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.usage?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:r}=this.state,a=this.getFormattedUnits(),s=e.formatMessage(t.titleKey,{units:a}),o=[{label:e.formatMessage(t.dailyTitleKey,{units:a}),value:N.daily},{label:s,value:N.cumulative,default:!0}];return m().createElement(V,{currentItem:r||o[0].value,onItemClicked:this.handleComparisonClick,options:o})},this.getDailyCostChart=(e,t,r=!1)=>{const{chartFormatter:a,currentReport:s,previousReport:o,trend:n}=this.props,{currentComparison:i}=this.state,l=n.computedReportItem,c=n.computedReportItemValue,p=i===N.daily,u=p?P.yZ.rolling:n.datumType,d=(0,P.zJ)(s,u,"date",l,c),h=(0,P.zJ)(o,u,"date",l,c),g=this.getForecastData(s,n.computedForecastItem),y=p?C.V3:C.me;return m().createElement(m().Fragment,null,m().createElement("div",{style:_.comparisonContainer},m().createElement("div",{style:_.comparison},this.getChartComparison())),m().createElement(y,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,forecastConeData:g.forecastConeData,forecastData:g.forecastData,formatOptions:n.formatOptions,formatter:a||w.xG,height:t,previousCostData:h,showForecast:void 0!==n.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:i,previousReport:l,trend:c}=this.props,{currentComparison:p}=this.state,u=c.computedReportItem,d=c.computedReportItemValue,h=p===N.daily,g=h?P.yZ.rolling:c.datumType,y=(0,P.zJ)(n,g,"date",u,d),f=(0,P.zJ)(l,g,"date",u,d),{forecastData:b,forecastConeData:v}=this.getForecastData(n,c.computedForecastItem),T=h?C.Y0:C.Nd;return m().createElement(m().Fragment,null,m().createElement("div",{style:_.comparisonContainer},m().createElement("div",{style:_.comparison},this.getChartComparison())),m().createElement(T,{adjustContainerHeight:r,chartName:o,containerHeight:e,currentData:y,forecastData:b,forecastConeData:v,formatOptions:c.formatOptions,formatter:s||w.bM,height:t,previousData:f,showForecast:void 0!==c.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:i.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:a}=this.props,{currentComparison:s}=this.state,o=s===N.daily?P.yZ.rolling:a.datumType,n=(0,Z.x1)(r,e,t,o);return{forecastData:(0,Z.nB)(n,o,t),forecastConeData:(0,Z.Qw)(n,o,t)}},this.getTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:i,intl:l,previousReport:c,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,h=l.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),g=(0,P.zJ)(n,p.datumType,"date",u,d),y=(0,P.zJ)(c,p.datumType,"date",u,d),{forecastData:f,forecastConeData:b}=this.getForecastData(n,p.computedForecastItem);return m().createElement(C.Nd,{adjustContainerHeight:r,containerHeight:e,chartName:o,currentData:g,forecastData:f,forecastConeData:b,formatOptions:p.formatOptions,formatter:s||w.bM,height:t,previousData:y,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:i.showUsageLegendLabel,title:h,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:r,chartName:a,currentReport:s,intl:o,previousReport:n,trend:i}=this.props,l=o.formatMessage(i.titleKey,{units:this.getFormattedUnits()}),c=(0,P.zJ)(s,i.datumType,"date","request"),p=(0,P.zJ)(n,i.datumType,"date","request"),u=(0,P.zJ)(s,i.datumType,"date","usage"),d=(0,P.zJ)(n,i.datumType,"date","usage");return m().createElement(C.I0,{adjustContainerHeight:t,chartName:a,containerHeight:B.containerUsageHeight,currentRequestData:c,currentUsageData:u,formatOptions:i.formatOptions,formatter:r||w.bM,height:e,previousRequestData:p,previousUsageData:d,title:l})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:a,trend:s}=this.props,o=s.computedReportItem||"cost",n=s.computedReportItemValue||"total";return m().createElement(C.rN,{chartType:e,computedReportItem:o,computedReportItemValue:n,costLabel:this.getDetailsLabel(r.costKey),formatOptions:r.formatOptions,report:t,reportType:a,requestLabel:this.getDetailsLabel(r.requestKey),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:this.getUnits(),usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?m().createElement(S.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByAll,{value:a,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,r=t.computedReportItem||"cost",a=this.getUnits();return r===P.LI.usage?e.formatMessage(p.Z.units,{units:(0,w.ZV)(a)}):e.formatMessage(p.Z.currencyUnits,{units:a})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=B.containerAltHeight,chartAltHeight:t=B.chartAltHeight,currentReportFetchStatus:r,details:a}=this.props;return m().createElement(C.j0,{detailsLink:this.getDetailsLink(),status:r,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,a.adjustContainerHeight))},this.getOptimizationsSummary=()=>{const{rosReportFetchStatus:e,rosReport:t,titleKey:r}=this.props;return m().createElement(D,{status:e,report:t,title:r})},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:s,tabsReportFetchStatus:o}=this.props,n=r(e);return m().createElement(a.Tab,{eventKey:t,key:`${r(e)}-tab`,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))},m().createElement("div",{style:_.tabItems},m().createElement(C.mZ,{idKey:n,key:`${n}-items`,report:s,status:o},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,getIdKeyForTab:a,tabsReport:s,topItems:o,trend:n}=this.props,{activeTabKey:i}=this.state,l=a(e),c=a(r[i]),p=n.computedReportItem||"cost",u=n.costDistribution&&e===A.V7.projects?n.costDistribution:n.computedReportItemValue||"total";let d;const h=s&&s.meta&&s.meta.total;return p===P.LI.usage?h&&s.meta.total.usage&&(d=s.meta.total.usage.value):h&&s.meta.total[p]&&s.meta.total[p][u]&&(d=s.meta.total[p][u].value),c===l?m().createElement(C.EH,{formatOptions:o?o.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return m().createElement(a.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByTop,{value:a,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,a=r.computedReportItem||"cost",s=r.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const o=e&&e.meta&&e.meta.total;return a===P.LI.usage?o&&e.meta.total.usage?e.meta.total.usage.units:void 0:o&&e.meta.total[a]&&e.meta.total[a][s]?e.meta.total[a][s].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return m().createElement(C.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(B.containerTrendHeight,B.chartHeight,r.adjustContainerHeight),e&&m().createElement("div",{style:_.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:a,updateTab:s}=this.props;s(a,r[t]),this.setState({activeTabKey:t})},this.updateForecasts=()=>{const{fetchForecasts:e,widgetId:t}=this.props;e&&e(t)},this.updateReports=()=>{const{fetchReports:e,widgetId:t}=this.props;e&&e(t)},this.updateRosReports=()=>{const{fetchRosReports:e,isRosFeatureEnabled:t,widgetId:r}=this.props;e&&t&&e(r)}}componentDidMount(){const{availableTabs:e,details:t,id:r,trend:a,updateTab:s}=this.props;e&&s(r,e[0]),a&&void 0!==a.computedForecastItem&&this.updateForecasts(),t.showOptimizations||this.updateReports(),t.showOptimizations&&this.updateRosReports()}componentDidUpdate(e){const{costType:t,currency:r,trend:a}=this.props;e.costType===t&&e.currency===r||(this.updateReports(),a&&void 0!==a.computedForecastItem&&this.updateForecasts())}render(){const{details:e,isRosFeatureEnabled:t}=this.props;return e.showOptimizations?t?this.getOptimizationsSummary():null:e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const K=U;var G=r(81628),q=r(79277),H=r(15920),$=r(15829);const J=e=>{switch(e){case G.IC.services:return"service";case G.IC.accounts:return"account";case G.IC.regions:return"region"}},X=(0,R.X1)(((e,{widgetId:t})=>{const r=G.Cv.selectWidget(e,t),a=G.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),costType:(0,$.uY)(),getIdKeyForTab:J}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Q={fetchForecasts:G.Kf.v4,fetchReports:G.Kf.a4,updateTab:G.Kf.as},Y=(0,d.ZP)((0,h.connect)(X,Q)(K)),ee=(0,R.X1)(((e,t)=>({DashboardWidget:Y,selectWidgets:G.Cv.selectWidgets(e),widgets:G.Cv.selectCurrentWidgets(e)}))),te=(0,h.connect)(ee,{})(E);var re=r(25566);const ae=e=>{switch(e){case re.e1.services:return"service";case re.e1.accounts:return"account";case re.e1.regions:return"region"}},se=(0,R.X1)(((e,{widgetId:t})=>{const r=re.Hc.selectWidget(e,t),a=re.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),costType:(0,$.uY)(),getIdKeyForTab:ae}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),oe={fetchForecasts:re.NA.v4,fetchReports:re.NA.a4,updateTab:re.NA.as},ne=(0,d.ZP)((0,h.connect)(se,oe)(K)),ie=(0,R.X1)(((e,t)=>({DashboardWidget:ne,selectWidgets:re.Hc.selectWidgets(e),widgets:re.Hc.selectCurrentWidgets(e)}))),le=(0,h.connect)(ie,{})(E);var ce=r(25976);const pe=e=>{switch(e){case ce.vY.service_names:return"service_name";case ce.vY.subscription_guids:return"subscription_guid";case ce.vY.resource_locations:return"resource_location"}},ue=(0,R.X1)(((e,{widgetId:t})=>{const r=ce.rj.selectWidget(e,t),a=ce.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:pe}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),me={fetchForecasts:ce.oc.v4,fetchReports:ce.oc.a4,updateTab:ce.oc.as},de=(0,d.ZP)((0,h.connect)(ue,me)(K)),he=(0,R.X1)(((e,t)=>({DashboardWidget:de,selectWidgets:ce.rj.selectWidgets(e),widgets:ce.rj.selectCurrentWidgets(e)}))),ge=(0,h.connect)(he,{})(E);var ye=r(76764);const fe=e=>{switch(e){case ye.Vp.service_names:return"service_name";case ye.Vp.subscription_guids:return"subscription_guid";case ye.Vp.resource_locations:return"resource_location"}},be=(0,R.X1)(((e,{widgetId:t})=>{const r=ye.MW.selectWidget(e,t),a=ye.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:fe}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),ve={fetchForecasts:ye._V.v4,fetchReports:ye._V.a4,updateTab:ye._V.as},Te=(0,d.ZP)((0,h.connect)(be,ve)(K)),Ee=(0,R.X1)(((e,t)=>({DashboardWidget:Te,selectWidgets:ye.MW.selectWidgets(e),widgets:ye.MW.selectCurrentWidgets(e)}))),Se=(0,h.connect)(Ee,{})(E);var Pe=r(67776);const Ze=e=>{switch(e){case Pe.BP.gcpProjects:return"gcp_project";case Pe.BP.regions:return"region";case Pe.BP.services:return"service"}},Ce=(0,R.X1)(((e,{widgetId:t})=>{const r=Pe.oS.selectWidget(e,t),a=Pe.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:Ze}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Me={fetchForecasts:Pe.n5.v4,fetchReports:Pe.n5.a4,updateTab:Pe.n5.as},Oe=(0,d.ZP)((0,h.connect)(Ce,Me)(K)),Re=(0,R.X1)(((e,t)=>({DashboardWidget:Oe,selectWidgets:Pe.oS.selectWidgets(e),widgets:Pe.oS.selectCurrentWidgets(e)}))),Fe=(0,h.connect)(Re,{})(E);var Ie=r(99900);const ke=e=>{switch(e){case Ie.VN.gcpProjects:return"gcp_project";case Ie.VN.regions:return"region";case Ie.VN.services:return"service"}},De=(0,R.X1)(((e,{widgetId:t})=>{const r=Ie.FF.selectWidget(e,t),a=Ie.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:ke}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),je={fetchForecasts:Ie.uM.v4,fetchReports:Ie.uM.a4,updateTab:Ie.uM.as},Ae=(0,d.ZP)((0,h.connect)(De,je)(K)),we=(0,R.X1)(((e,t)=>({DashboardWidget:Ae,selectWidgets:Ie.FF.selectWidgets(e),widgets:Ie.FF.selectCurrentWidgets(e)}))),xe=(0,h.connect)(we,{})(E);var Ve=r(48788);const Le=e=>{switch(e){case Ve.DA.services:return"service";case Ve.DA.projects:return"project";case Ve.DA.regions:return"region"}},ze=(0,R.X1)(((e,{widgetId:t})=>{const r=Ve.Pi.selectWidget(e,t),a=Ve.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:Le}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),We={fetchForecasts:Ve.lj.v4,fetchReports:Ve.lj.a4,updateTab:Ve.lj.as},Be=(0,d.ZP)((0,h.connect)(ze,We)(K)),_e=(0,R.X1)(((e,t)=>({DashboardWidget:Be,selectWidgets:Ve.Pi.selectWidgets(e),widgets:Ve.Pi.selectCurrentWidgets(e)}))),Ne=(0,h.connect)(_e,{})(E);var Ue=r(17568);const Ke=e=>{switch(e){case Ue.Qr.accounts:return"account";case Ue.Qr.regions:return"region";case Ue.Qr.services:return"service"}},Ge=(0,R.X1)(((e,{widgetId:t})=>{const r=Ue.qN.selectWidget(e,t),a=Ue.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:Ke}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),qe={fetchForecasts:Ue.BV.v4,fetchReports:Ue.BV.a4,updateTab:Ue.BV.as},He=(0,d.ZP)((0,h.connect)(Ge,qe)(K)),$e=(0,R.X1)(((e,t)=>({DashboardWidget:He,selectWidgets:Ue.qN.selectWidgets(e),widgets:Ue.qN.selectCurrentWidgets(e)}))),Je=(0,h.connect)($e,{})(E);var Xe=r(22369),Qe=r(2136);const Ye=e=>{switch(e){case A.V7.clusters:return"cluster";case A.V7.nodes:return"node";case A.V7.projects:return"project"}},et=(0,R.X1)(((e,{widgetId:t})=>{const r=A.nH.selectWidget(e,t),a=A.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:Ye,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)}),r.rosPathsType&&r.rosType&&{isRosFeatureEnabled:Xe.iJ.selectIsRosFeatureEnabled(e),rosReport:Qe.R0.selectRos(e,r.rosPathsType,r.rosType,a.optimizations),rosReportError:Qe.R0.selectRosError(e,r.rosPathsType,r.rosType,a.optimizations),rosReportFetchStatus:Qe.R0.selectRosFetchStatus(e,r.rosPathsType,r.rosType,a.optimizations)})})),tt={fetchForecasts:A.U6.v4,fetchReports:A.U6.a4,fetchRosReports:A.U6.XE,updateTab:A.U6.as},rt=(0,d.ZP)((0,h.connect)(et,tt)(K)),at=(0,R.X1)(((e,t)=>({DashboardWidget:rt,selectWidgets:A.nH.selectWidgets(e),widgets:A.nH.selectCurrentWidgets(e)}))),st=(0,h.connect)(at,{})(E);var ot=r(67522);const nt=e=>{switch(e){case ot.is.clusters:return"cluster";case ot.is.nodes:return"node";case ot.is.projects:return"project"}},it=(0,R.X1)(((e,{widgetId:t})=>{const r=ot.fO.selectWidget(e,t),a=ot.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:nt,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),lt={fetchForecasts:ot.BV.v4,fetchReports:ot.BV.a4,updateTab:ot.BV.as},ct=(0,d.ZP)((0,h.connect)(it,lt)(K)),pt=(0,R.X1)(((e,t)=>({DashboardWidget:ct,selectWidgets:ot.fO.selectWidgets(e),widgets:ot.fO.selectCurrentWidgets(e)}))),ut=(0,h.connect)(pt,{})(E);var mt=r(1032),dt=r(62331),ht=r(46919),gt=r(45087),yt=r(5842),ft=r(96351),bt=r(77392);const vt=e=>{switch(e){case bt.FY.product_services:return"product_service";case bt.FY.payer_tenant_ids:return"payer_tenant_id";case bt.FY.regions:return"region"}},Tt=(0,R.X1)(((e,{widgetId:t})=>{const r=bt.$h.selectWidget(e,t),a=bt.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,$.zC)(),getIdKeyForTab:vt}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:H.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:H.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:H.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Et={fetchForecasts:bt.eb.v4,fetchReports:bt.eb.a4,updateTab:bt.eb.as},St=(0,d.ZP)((0,h.connect)(Tt,Et)(K)),Pt=(0,R.X1)(((e,t)=>({DashboardWidget:St,selectWidgets:bt.$h.selectWidgets(e),widgets:bt.$h.selectCurrentWidgets(e)}))),Zt=(0,h.connect)(Pt,{})(E);var Ct=r(49382),Mt=r(98499);const Ot={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:z.ZP.var},header:{backgroundColor:Ct.ZP.var,padding:Mt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:I.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:Mt.ZP.value},tabs:{backgroundColor:Ct.ZP.var,paddingBottom:Mt.ZP.var,paddingTop:Mt.ZP.var}};var Rt,Ft,It,kt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(Rt||(Rt={})),function(e){e.ocp="ocp"}(Ft||(Ft={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(It||(It={})),function(e){e.rhel="rhel"}(kt||(kt={}));const Dt=e=>{switch(e){case It.infrastructure:return"infrastructure";case It.ocp:return"ocp";case It.rhel:return"rhel"}};class jt extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFinsightsFeatureEnabled:e}=this.props,t=[],r=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:m().createRef(),tab:It.infrastructure}]:void 0,a=this.isOcpAvailable()?[{contentRef:m().createRef(),tab:It.ocp}]:void 0,s=this.isRhelAvailable()?[{contentRef:m().createRef(),tab:It.rhel}]:void 0;return e?(r&&t.push(...r),s&&t.push(...s),a&&t.push(...a)):(a&&t.push(...a),r&&t.push(...r)),t},this.getCostType=()=>{const{costType:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r}=this.state,a=this.getCurrentTab()===It.infrastructure?t:r;return a===Rt.aws||a===Rt.awsOcp?m().createElement("div",{style:Ot.costType},m().createElement(g.T,{costType:e,onSelect:this.handleOnCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return m().createElement(y.F,{onSelect:this.handleOnCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFinsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,r=this.isAwsAvailable(),a=this.isAzureAvailable(),s=this.isOciAvailable(),o=this.isGcpAvailable(),n=this.isIbmAvailable(),i=this.isOcpAvailable(),l=this.isOcpCloudAvailable(),c=this.isRhelAvailable(),p=r||a||s||o||n||l,u=p&&!i&&!c,m=c&&!p&&!i;if(i&&!p&&!c)return It.ocp;if(u)return It.infrastructure;if(m)return It.rhel;if(e)switch(t){case 0:return It.infrastructure;case 1:return It.rhel;case 2:return It.ocp}switch(t){case 0:return It.ocp;case 1:return It.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case Rt.aws:case Rt.awsOcp:case Rt.azure:case Rt.oci:case Rt.azureOcp:case Rt.gcp:case Rt.gcpOcp:case Rt.ibm:case Rt.ibmOcp:case Rt.ocpCloud:return e}return this.isOcpCloudAvailable()?Rt.ocpCloud:this.isAwsAvailable()?Rt.aws:this.isAzureAvailable()?Rt.azure:this.isOciAvailable()?Rt.oci:this.isGcpAvailable()?Rt.gcp:this.isIbmAvailable()?Rt.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:r}=this.props;return t===Ft.ocp?t:(0,ft.mn)(r,e)?Ft.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:r}=this.props;return e===kt.rhel?e:(0,ft.ZC)(r,t)?kt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r,currentRhelPerspective:a}=this.state,s=this.isAwsAvailable(),o=this.isAzureAvailable(),n=this.isGcpAvailable(),i=this.isIbmAvailable(),l=this.isOciAvailable(),c=this.isOcpAvailable(),p=this.isRhelAvailable();if(!(s||o||n||i||l||c||p))return null;let u;const d=this.getCurrentTab();switch(d){case It.infrastructure:u=t;break;case It.ocp:u=r;break;case It.rhel:u=a}return m().createElement(T.X,{currentItem:u,hasAws:s,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:o,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:n,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:i,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:l,hasOcp:c,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:p,isIbmFeatureEnabled:e,isInfrastructureTab:It.infrastructure===d,isRhelTab:It.rhel===d,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return n.IV(e)}(e)}`},this.getTab=(e,t,r)=>m().createElement(a.Tab,{eventKey:r,key:`${Dt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>m().createElement(a.TabContent,{eventKey:t,key:`${Dt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:a,ociProviders:s,costType:o,currency:n,gcpProviders:i,ibmProviders:l,ocpProviders:c,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:h,currentRhelPerspective:g}=this.state,y=m().createElement(m().Fragment,null),f=m().createElement(b.Z,{showReload:!1});if(u!==t)return y;const v=Dt(e);if(v===It.infrastructure)return d===Rt.ocpCloud?(0,mt.Bj)(r,c)||(0,mt.Bj)(a,c)||(0,mt.Bj)(i,c)||(0,mt.Bj)(l,c)?m().createElement(Je,{currency:n}):f:d===Rt.aws?(0,mt.g8)(r)||(0,mt.rL)(r)?m().createElement(te,{costType:o}):f:d===Rt.awsOcp?(0,mt.at)(r,c)||(0,mt.D2)(r,c)?m().createElement(le,{currency:n}):f:d===Rt.azure?(0,mt.g8)(a)||(0,mt.rL)(a)?m().createElement(ge,{currency:n}):f:d===Rt.azureOcp?(0,mt.at)(a,c)||(0,mt.D2)(a,c)?m().createElement(Se,{currency:n}):f:d===Rt.gcp?(0,mt.g8)(i)||(0,mt.rL)(i)?m().createElement(Fe,{currency:n}):f:d===Rt.gcpOcp?(0,mt.at)(i,c)||(0,mt.D2)(i,c)?m().createElement(xe,{currency:n}):f:d===Rt.ibm?(0,mt.g8)(l)||(0,mt.rL)(l)?m().createElement(Ne,{currency:n}):f:d===Rt.oci&&((0,mt.g8)(s)||(0,mt.rL)(s))?m().createElement(Zt,{currency:n}):f;if(v===It.ocp){const e=(0,mt.g8)(c)||(0,mt.rL)(c);return h===Ft.ocp&&e?m().createElement(st,{currency:n}):f}if(v===It.rhel){const e=(0,mt.g8)(p)||(0,mt.rL)(p);return g===kt.rhel&&e?m().createElement(ut,{currency:n}):f}return y},this.getTabs=e=>{const{activeTabKey:t}=this.state;return m().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFinsightsFeatureEnabled:r}=this.props;return e===It.infrastructure?r?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===It.ocp?t.formatMessage(p.Z.openShift):e===It.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleOnCostTypeSelected=()=>{const{query:e,router:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(r),{replace:!0})},this.handleOnCurrencySelected=()=>{const{router:e,query:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(r),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:r}=this.props,a=this.getCurrentTab();this.setState(Object.assign(Object.assign({},a===It.infrastructure&&{currentInfrastructurePerspective:e}),a===It.ocp&&{currentOcpPerspective:e}),(()=>{const a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});r.navigate(this.getRouteForQuery(a),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,ft.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ft.KT)(r)&&(0,mt.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,ft.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ft.FW)(r)&&(0,mt.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,ft.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ft.Sv)(r)&&(0,mt.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,ft.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ft.tt)(r)&&(0,mt.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,ft.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,ft.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),r=this.isGcpOcpAvailable(),a=this.isIbmOcpAvailable();return e||t||r||a},this.isRhelAvailable=()=>{const{isFinsightsFeatureEnabled:e,rhelProviders:t,userAccess:r}=this.props;return e&&(0,ft.ZC)(r,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:r,userAccess:a}=this.props;e.userAccess===a&&e.providers===t||this.setState({activeTabKey:r,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isFinsightsFeatureEnabled:r,isIbmFeatureEnabled:o,userAccessFetchStatus:n}=this.props,i=!(e!==R.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),l=e===R.iF.inProgress||n===R.iF.inProgress,c=this.getAvailableTabs(),u=t.formatMessage(p.Z.overviewTitle);return l?m().createElement(f.g,{title:u}):i?m().createElement(v.L,{title:u}):m().createElement(m().Fragment,null,m().createElement("header",{style:Ot.header},m().createElement("div",{style:Ot.headerContent},m().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},u,m().createElement("span",{style:Ot.infoIcon},m().createElement(a.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:m().createElement(m().Fragment,null,m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),m().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.openShift)),m().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),m().createElement("br",null),r&&m().createElement(m().Fragment,null,m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.rhel)),m().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),m().createElement("br",null)),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.aws)),m().createElement("p",null,t.formatMessage(p.Z.awsDesc)),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.gcp)),m().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),o&&m().createElement(m().Fragment,null,m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.ibm)),m().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.azure)),m().createElement("p",null,t.formatMessage(p.Z.azureDesc)),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.oci)),m().createElement("p",null,t.formatMessage(p.Z.ociDesc)))},m().createElement(a.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null))))),m().createElement("div",{style:Ot.headerContentRight},this.getCurrency())),m().createElement("div",{style:Ot.tabs},this.getTabs(c)),m().createElement("div",{style:Ot.headerContent},m().createElement("div",{style:Ot.headerContentLeft},this.getPerspective(),this.getCostType()),m().createElement("div",{style:Ot.date},(0,gt.J4)()))),m().createElement("div",{style:Ot.main},this.getTabContent(c)))}}const At=(0,R.X1)(((e,{router:t})=>{const r=function(e){return n.mB(e)}(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0,s=r.perspective,p=(0,$.zC)(),u=s===Rt.aws||s===Rt.awsOcp?(0,$.uY)():void 0,m=Object.assign({},r),d=(0,i.H)(dt.NT),h=dt.aX.selectProviders(e,o.l.all,d),g=dt.aX.selectProvidersError(e,o.l.all,d),y=dt.aX.selectProvidersFetchStatus(e,o.l.all,d),f=(0,l.T)(ht.QR),b=ht.JO.selectUserAccess(e,c.n.all,f),v=ht.JO.selectUserAccessError(e,c.n.all,f),T=ht.JO.selectUserAccessFetchStatus(e,c.n.all,f);return{awsProviders:(0,mt.BV)(h,o.l.aws),azureProviders:(0,mt.BV)(h,o.l.azure),costType:u,currency:p,gcpProviders:(0,mt.BV)(h,o.l.gcp),ibmProviders:(0,mt.BV)(h,o.l.ibm),isFinsightsFeatureEnabled:Xe.iJ.selectIsFinsightsFeatureEnabled(e),isIbmFeatureEnabled:Xe.iJ.selectIsIbmFeatureEnabled(e),ociProviders:(0,mt.BV)(h,o.l.oci),ocpProviders:(0,mt.BV)(h,o.l.ocp),providers:h,providersError:g,providersFetchStatus:y,perspective:s,query:m,rhelProviders:(0,mt.BV)(h,o.l.rhel),tabKey:a,userAccess:b,userAccessError:v,userAccessFetchStatus:T,userAccessQueryString:f}})),wt=(0,d.ZP)((0,yt.E)((0,h.connect)(At,{})(jt)))},33494:(e,t,r)=>{r.r(t),r.d(t,{default:()=>gr});var a=r(90154),s=r(37610),o=r(91577),n=r(97027),i=r(92950),l=r.n(i),c=r(86896),p=r(82537),u=r(91919),m=r(38274),d=r(71060),h=r(74806),g=r(6279),y=r(6450),f=r(1156),b=r(29379),v=r(15829),T=r(5842),E=r(49382),S=r(98499),P=r(32412),Z=r(48196);const C={costType:{marginBottom:S.ZP.var,marginTop:S.ZP.var,width:"fit-content"},costTypeContainer:{backgroundColor:E.ZP.var,paddingBottom:S.ZP.var,paddingLeft:S.ZP.var,paddingRight:S.ZP.var,paddingTop:S.ZP.var},currency:{marginTop:S.ZP.var,width:"fit-content"},currencyContainer:{backgroundColor:E.ZP.var,paddingBottom:S.ZP.var,paddingLeft:S.ZP.var,paddingRight:S.ZP.var,paddingTop:S.ZP.var},resetContainer:{display:"inline-block",paddingLeft:P.ZP.var},title:{paddingBottom:Z.ZP.var}};class M extends l().Component{constructor(){super(...arguments),this.defaultState={currentCostType:(0,v.uY)(),currentCurrency:(0,v.zC)()},this.state=Object.assign({},this.defaultState),this.getCostType=()=>{const{intl:e}=this.props,{currentCostType:t}=this.state;return l().createElement("div",{style:C.costTypeContainer},l().createElement(a.Title,{headingLevel:"h2",style:C.title,size:a.TitleSizes.md},e.formatMessage(n.Z.costTypeSettingsLabel)),e.formatMessage(n.Z.costTypeSettingsDesc),l().createElement("div",{style:C.costType},l().createElement(g.T,{costType:t,isLocalStorage:!1,onSelect:this.handleOnCostTypeSelected,showLabel:!1})))},this.getCurrency=()=>{const{intl:e}=this.props,{currentCurrency:t}=this.state;return l().createElement("div",{style:C.currencyContainer},l().createElement(a.Title,{headingLevel:"h2",style:C.title,size:a.TitleSizes.md},e.formatMessage(n.Z.currency)),e.formatMessage(n.Z.currencyDesc),l().createElement("div",{style:C.currency},l().createElement(y.F,{currency:t,isLocalStorage:!1,onSelect:this.handleOnCurrencySelected,showLabel:!1})))},this.handleOnCostTypeSelected=e=>{const{updateSettings:t}=this.props;this.setState({currentCostType:e},(()=>{(0,v.M1)(e),t({api:{settings:{cost_type:e}}})}))},this.handleOnCurrencySelected=e=>{const{updateSettings:t}=this.props;this.setState({currentCurrency:e},(()=>{(0,v.NW)(e),(0,v.Nc)(e),t({api:{settings:{currency:e}}})}))}}render(){return l().createElement(a.PageSection,{isFilled:!0},this.getCurrency(),this.getCostType())}}const O=(0,f.X1)((e=>({updateSettingsStatus:b.Hq.selectSettingsUpdateStatus(e)}))),R={updateSettings:b.ff.VP},F=(0,h.ZP)((0,T.E)((0,p.connect)(O,R)(M)));var I=r(80129),k=r(58613),D=r(91800),j=r(73805),A=r(45868),w=r(40227);const x={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function V(e){return Object.keys(e).reduce(((t,r)=>null===e[r]?t:""===t?`?${r}=${e[r]}`:`${t}&${r}=${e[r]}`),"")}function L(e,t){return(e-1)*t}Object.keys(x);const z=(0,T.E)((0,p.connect)((e=>{const{count:t,page:r,perPage:a}=k.E6.pagination(e);return{query:k.E6.query(e),count:t,page:r,perPage:a}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:i,query:l}=e;return{itemCount:o,page:n,perPage:i,variant:a.PaginationVariant.bottom,onSetPage:(e,t,r)=>{s.navigate(V(Object.assign(Object.assign(Object.assign({},x),l),{offset:L(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(V(Object.assign(Object.assign(Object.assign({},x),l),{limit:t,offset:0})))}}}))((0,h.ZP)((e=>{const{variant:t,intl:r=A.N,itemCount:s,page:o,perPage:i,onSetPage:c,onPerPageSelect:p}=e;return l().createElement(a.Toolbar,null,l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},l().createElement(a.Pagination,{onPerPageSelect:p,onSetPage:c,variant:t,itemCount:s,page:o,perPage:i,titles:{paginationTitle:r.formatMessage(n.Z.paginationTitle,{title:r.formatMessage(n.Z.costModelsDetailsTitle),placement:"bottom"})}}))))})))),W={descContainer:{backgroundColor:E.ZP.value,padding:P.ZP.value}};var B=r(69425),_=r(69957),N=r(34327),U=r(44439),K=r(91778),G=r(1326);const q={apiError:null,checked:{},clearQuery:()=>null,createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,v.tk)(),dataFetched:!1,description:"",dirtyName:!1,distribution:"",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,fetchSources:(e,t,r,a)=>null,filterName:"",goToAddPL:e=>null,isDiscount:!1,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleDistributePlatformUnallocatedChange:(...e)=>null,handleDistributeWorkerUnallocatedChange:(...e)=>null,handleSignChange:(...e)=>null,loading:!1,markup:"",metricsHash:{},name:"",onClose:()=>null,onCurrencyChange:e=>null,onDescChange:e=>null,onFilterChange:e=>null,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,onTypeChange:e=>null,onNameChange:e=>null,onSourceSelect:(...e)=>null,page:1,perPage:10,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},query:{},step:1,setSources:e=>null,sources:[],submitTiers:e=>null,tiers:[],total:0,type:""},H=l().createContext(q);var $=r(68134);const J={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"},selector:{maxHeight:"350px"},titleWithLearnMore:{display:"inline-block",marginRight:"1em"}};class X extends l().Component{render(){const{intl:e}=this.props;return l().createElement(H.Consumer,null,(({handleDistributionChange:t,handleDistributePlatformUnallocatedChange:r,handleDistributeWorkerUnallocatedChange:s,distribution:o,distributePlatformUnallocated:i,distributeWorkerUnallocated:c})=>l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:J.titleWithLearnMore},e.formatMessage(n.Z.costDistribution)),l().createElement("a",{href:e.formatMessage(n.Z.docsCostModelsDistribution),rel:"noreferrer",target:"_blank"},e.formatMessage(n.Z.learnMore))),l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(n.Z.distributionType)),l().createElement(a.TextContent,null,l().createElement(a.Text,{style:J.cardDescription},e.formatMessage(n.Z.distributionModelDesc)))),l().createElement(a.StackItem,{isFilled:!0},l().createElement($.l,null,l().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-type",isRequired:!0},l().createElement(a.Radio,{isChecked:"cpu"===o,name:"distributionType",label:e.formatMessage(n.Z.cpuTitle),"aria-label":e.formatMessage(n.Z.cpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),l().createElement(a.Radio,{isChecked:"memory"===o,name:"distributionType",label:e.formatMessage(n.Z.memoryTitle),"aria-label":e.formatMessage(n.Z.memoryTitle),id:"memoryDistribution",value:"memory",onChange:t})))),l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(n.Z.platform)),l().createElement(a.TextContent,null,l().createElement(a.Text,{style:J.cardDescription},e.formatMessage(n.Z.platformDesc)))),l().createElement(a.StackItem,{isFilled:!0},l().createElement($.l,null,l().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-platform-unallocated",isRequired:!0},l().createElement(a.Radio,{isChecked:i,name:"distributePlatformUnallocated",label:e.formatMessage(n.Z.distribute),"aria-label":e.formatMessage(n.Z.distribute),id:"distributePlatformTrue",value:"true",onChange:r}),l().createElement(a.Radio,{isChecked:!i,name:"distributePlatformUnallocated",label:e.formatMessage(n.Z.doNotDistribute),"aria-label":e.formatMessage(n.Z.doNotDistribute),id:"distributePlatformFalse",value:"false",onChange:r})))),l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(n.Z.workerUnallocated)),l().createElement(a.TextContent,null,l().createElement(a.Text,{style:J.cardDescription},e.formatMessage(n.Z.workerUnallocatedDesc)))),l().createElement(a.StackItem,{isFilled:!0},l().createElement($.l,null,l().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-worker-unallocated",isRequired:!0},l().createElement(a.Radio,{isChecked:c,name:"distributeWorkerUnallocated",label:e.formatMessage(n.Z.distribute),"aria-label":e.formatMessage(n.Z.distribute),id:"distributeWorkerTrue",value:"true",onChange:s}),l().createElement(a.Radio,{isChecked:!c,name:"distributeWorkerUnallocated",label:e.formatMessage(n.Z.doNotDistribute),"aria-label":e.formatMessage(n.Z.doNotDistribute),id:"distributeWorkerFalse",value:"false",onChange:s})))))))}}const Q=(0,f.X1)((()=>({}))),Y=(0,h.ZP)((0,p.connect)(Q,{})(X));var ee=r(34459);const te=e=>0===e.length?n.Z.costModelsRequiredField:e.length>100?n.Z.costModelsInfoTooLong:null,re=e=>e.length>500?n.Z.costModelsDescTooLong:null,ae=e=>""!==e.trim()&&(!!(0,K.WW)(e)&&!((0,K.cR)(e)>10)),se={"":[()=>!1],AWS:[e=>null===te(e.name)&&null===re(e.description)&&""!==e.type,e=>ae(e.markup),()=>!0,()=>!0],Azure:[e=>null===te(e.name)&&null===re(e.description)&&""!==e.type,e=>ae(e.markup),()=>!0,()=>!0],GCP:[e=>null===te(e.name)&&null===re(e.description)&&""!==e.type,e=>ae(e.markup),()=>!0,()=>!0],OCP:[e=>null===te(e.name)&&null===re(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>ae(e.markup),()=>!0,()=>!0,()=>!0]};class oe extends l().Component{render(){const e=(e,r)=>{const a=r.find((t=>t.value===e));return a?t.formatMessage(a.label,{units:a.value}):e},{intl:t}=this.props,r=[{label:n.Z.costModelsWizardOnboardAws,value:"AWS"},{label:n.Z.azure,value:"Azure"},{label:n.Z.gcp,value:"GCP"},{label:n.Z.costModelsWizardOnboardOcp,value:"OCP"}];return l().createElement(H.Consumer,null,(({currencyUnits:s,dirtyName:o,description:i,name:c,type:p,onCurrencyChange:u,onNameChange:m,onDescChange:d,onTypeChange:h})=>l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:J.titleWithLearnMore},t.formatMessage(n.Z.costModelsWizardGeneralInfoTitle)),l().createElement("a",{href:t.formatMessage(n.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},t.formatMessage(n.Z.learnMore))),l().createElement(a.StackItem,null,l().createElement($.l,{style:J.form},l().createElement(a.FormGroup,{helperTextInvalid:te(c)&&t.formatMessage(te(c)),validated:null!==te(c)&&o?"error":"default",label:t.formatMessage(n.Z.names,{count:1}),isRequired:!0,fieldId:"name"},l().createElement(a.TextInput,{validated:null!==te(c)&&o?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:c,onChange:m})),l().createElement(a.FormGroup,{helperTextInvalid:re(i)&&t.formatMessage(re(i)),validated:null===re(i)?"default":"error",label:t.formatMessage(n.Z.description),fieldId:"description"},l().createElement(a.TextArea,{style:J.textArea,type:"text",id:"description",name:"description",value:i,validated:null===re(i)?"default":"error",onChange:d})),l().createElement(ee.Q,{isRequired:!0,id:"source-type-selector",direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:J.selector.maxHeight,label:n.Z.sourceType,toggleAriaLabel:t.formatMessage(n.Z.costModelsWizardEmptySourceTypeLabel),placeholderText:t.formatMessage(n.Z.costModelsWizardEmptySourceTypeLabel),value:e(p,r),onChange:h,options:r}),l().createElement(ee.Q,{label:n.Z.currency,direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:J.selector.maxHeight,toggleAriaLabel:t.formatMessage(n.Z.costModelsWizardCurrencyToggleLabel),value:e(s,y.m),onChange:u,id:"currency-units-selector",options:y.m.map((e=>({label:t.formatMessage(e.label,{units:e.value}),value:e.value})))}))))))}}const ne=(0,f.X1)((()=>({}))),ie=(0,h.ZP)((0,p.connect)(ne,{})(oe));var le=r(47242);class ce extends l().Component{render(){const{intl:e}=this.props,t=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};return l().createElement(H.Consumer,null,(({handleSignChange:r,handleMarkupDiscountChange:s,markup:o,isDiscount:i})=>{const c=(p=o,(0,K.WW)(p)?(0,K.cR)(p)>10?n.Z.markupOrDiscountTooLong:void 0:n.Z.markupOrDiscountNumber);var p;const u=c?"error":"default";return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:J.titleWithLearnMore},e.formatMessage(n.Z.costCalculationsOptional)),l().createElement("a",{href:e.formatMessage(n.Z.docsCostModelsMarkup),rel:"noreferrer",target:"_blank"},e.formatMessage(n.Z.learnMore))),l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(n.Z.markupOrDiscount)),l().createElement(a.TextContent,null,l().createElement(a.Text,null,e.formatMessage(n.Z.markupOrDiscountModalDesc)))),l().createElement(a.StackItem,null,l().createElement(a.Flex,{style:le.W.markupRadioContainer},l().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},l().createElement(a.FlexItem,null,l().createElement(a.Radio,{isChecked:!i,name:"discount",label:e.formatMessage(n.Z.markupPlus),"aria-label":e.formatMessage(n.Z.markupPlus),id:"markup",value:"false",onChange:r,style:le.W.markupRadio}),l().createElement(a.Radio,{isChecked:i,name:"discount",label:e.formatMessage(n.Z.discountMinus),"aria-label":e.formatMessage(n.Z.discountMinus),id:"discount",value:"true",onChange:r}))),l().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},l().createElement(a.FlexItem,null,l().createElement($.l,null,l().createElement(a.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:c?e.formatMessage(c):void 0,style:le.W.rateContainer,validated:u},l().createElement(a.InputGroup,null,l().createElement(a.InputGroupText,{style:le.W.sign},i?e.formatMessage(n.Z.discountMinus):e.formatMessage(n.Z.markupPlus)),l().createElement(a.TextInput,{"aria-label":e.formatMessage(n.Z.rate),id:"markup-input-box",isRequired:!0,onKeyDown:t,onChange:s,placeholder:"0",style:le.W.inputField,type:"text",validated:u,value:o}),l().createElement(a.InputGroupText,{style:le.W.percent},e.formatMessage(n.Z.percentSymbol))))))))),l().createElement(a.StackItem,null,l().createElement("div",{style:le.W.exampleMargin},l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(n.Z.examplesTitle))),l().createElement(a.List,null,l().createElement(a.ListItem,null,e.formatMessage(n.Z.costModelsExamplesNoAdjust)),l().createElement(a.ListItem,null,e.formatMessage(n.Z.costModelsExamplesDoubleMarkup)),l().createElement(a.ListItem,null,e.formatMessage(n.Z.costModelsExamplesReduceZero)),l().createElement(a.ListItem,null,e.formatMessage(n.Z.costModelsExamplesReduceSeventyfive))))))}))}}const pe=(0,f.X1)((()=>({}))),ue=(0,h.ZP)((0,p.connect)(pe,{})(ce));var me=r(11040),de=r(50250);const he=(0,h.ZP)((({cancel:e,currencyUnits:t,intl:r=A.N,metricsHash:s,submitRate:o})=>{const{tiers:i}=l().useContext(H),c=(0,de.bF)(s,void 0,i),p=l().useMemo((()=>(0,de.Cw)(c)),[c.errors,c.rateKind]);return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(n.Z.costModelsWizardCreatePriceList))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h3},r.formatMessage(n.Z.costModelsWizardPriceListMetric)))),l().createElement(a.StackItem,null,l().createElement(a.Form,null,l().createElement(de.HJ,{currencyUnits:t,metricsHash:s,rateFormData:c}))),l().createElement(a.StackItem,null,l().createElement(a.ActionGroup,null,l().createElement(a.Button,{variant:a.ButtonVariant.primary,isDisabled:!p,onClick:()=>o(c)},r.formatMessage(n.Z.createRate)),l().createElement(a.Button,{variant:a.ButtonVariant.link,onClick:e},r.formatMessage(n.Z.cancel)))))}));var ge=r(7081),ye=r(42901),fe=r(94985);const be=(0,h.ZP)((({id:e,intl:t,itemCount:r,perPage:s,page:o,variant:i,onPerPageSelect:c,onSetPage:p})=>l().createElement(a.Toolbar,{id:e},l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarItem,{variant:"pagination"},l().createElement(a.Pagination,{variant:i,itemCount:r,perPage:s,page:o,onSetPage:p,onPerPageSelect:c,titles:{paginationTitle:t.formatMessage(n.Z.paginationTitle,{title:t.formatMessage(n.Z.createCostModelTitle),placement:"bottom"})}}))))));var ve=r(14106),Te=r(17031),Ee=r(66094),Se=r(66474),Pe=r(23686);class Ze extends l().Component{constructor(){super(...arguments),this.defaultState={metrics:[],measurements:[],sortBy:{index:0,direction:w.SortByDirection.asc}},this.state=Object.assign({},this.defaultState)}render(){const{addRateAction:e,deleteRateAction:t,intl:r,items:s,metricsHash:o}=this.props,i=e=>{const t=e.replace(/ /g,"_").toLowerCase();return r.formatMessage(n.Z.metricValues,{value:t})||e},c=e=>r.formatMessage(n.Z.measurementValues,{value:e.toLowerCase().replace("-","_"),count:1})||e,p=Object.keys(o).map((e=>({label:i(e),value:e}))),u=p.reduce(((e,t)=>{const r=Object.keys(o[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:c(e),value:e})));return[...e,...r]}),[]),m=()=>l().createElement(a.Bullseye,null,l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:ge.wl}),l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(n.Z.costModelsWizardEmptyStateTitle)),l().createElement(a.EmptyStateBody,null,r.formatMessage(n.Z.costModelsWizardEmptyStateSkipStep,{value:l().createElement("strong",null,r.formatMessage(n.Z.next))}),l().createElement("br",null),r.formatMessage(n.Z.costModelsWizardEmptyStateOtherTime))));return l().createElement(H.Consumer,null,(({priceListPagination:o})=>l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(n.Z.costModelsWizardCreatePriceList))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,r.formatMessage(n.Z.costModelsWizardSubTitleTable)))),l().createElement(a.StackItem,null,l().createElement(fe.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:i,setSearch:c,onRemove:d,onSelect:h,onClearAll:g})=>{const y=(o.page-1)*o.perPage,f=o.page*o.perPage,b=s.map(((e,t)=>Object.assign(Object.assign({},e),{stateIndex:t}))).filter((e=>0===i.metrics.length||i.metrics.includes(e.metric.label_metric))).filter((e=>0===i.measurements.length||i.measurements.includes(e.metric.label_measurement))).sort(((e,t)=>{const a=1===this.state.sortBy.index?e=>{return t=e.metric.label_metric,r.formatMessage(n.Z.metricValues,{value:t})||t;var t}:2===this.state.sortBy.index?e=>{return t=e.metric.label_measurement,a=e.metric.label_measurement_unit,a=r.formatMessage(n.Z.units,{units:(0,K.ZV)(a)})||a,r.formatMessage(n.Z.measurementValues,{value:t.toLowerCase().replace("-","_"),units:a,count:2});var t,a}:()=>"";return(0,Te.tT)(e,t,this.state.sortBy.direction,a)})),v=b.slice(y,f);return l().createElement(l().Fragment,null,l().createElement(ve.Q,{primary:l().createElement(Pe.J,{isDisabled:0===s.length,primary:i.primary,setPrimary:e=>c({primary:e}),options:[{label:r.formatMessage(n.Z.metric),value:"metrics"},{label:r.formatMessage(n.Z.measurement),value:"measurements"}]}),selected:i.primary,secondaries:[{component:l().createElement(Se.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(n.Z.toolBarPriceListMeasurementPlaceHolder),selections:i.measurements,setSelections:e=>h("measurements",e),options:u}),name:"measurements",onRemove:d,filters:i.measurements},{component:l().createElement(Se.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(n.Z.toolBarPriceListMetricPlaceHolder),selections:i.metrics,setSelections:e=>h("metrics",e),options:p}),name:"metrics",onRemove:d,filters:i.metrics}],button:l().createElement(a.Button,{onClick:e},r.formatMessage(n.Z.createRate)),onClear:g,pagination:l().createElement(a.Pagination,{isCompact:!0,itemCount:b.length,perPage:o.perPage,page:o.page,onSetPage:o.onPageSet,onPerPageSelect:o.onPerPageSet,titles:{paginationTitle:r.formatMessage(n.Z.paginationTitle,{title:r.formatMessage(n.Z.costModelsAssignSourcesParen),placement:"top"})}})}),0===v.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&l().createElement(a.Bullseye,null,l().createElement(ye.c,null)),0===v.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&l().createElement(m,null),v.length>0&&l().createElement(Ee.y,{actions:[{title:r.formatMessage(n.Z.remove),onClick:(e,r,a)=>{t(a.data.stateIndex)}}],tiers:v,sortCallback:e=>{this.setState(Object.assign(Object.assign({},this.state),{sortBy:Object.assign({},e)}))}}),l().createElement(be,{isCompact:!0,itemCount:b.length,perPage:o.perPage,page:o.page,onSetPage:o.onPageSet,onPerPageSelect:o.onPerPageSet,titles:{paginationTitle:r.formatMessage(n.Z.paginationTitle,{title:r.formatMessage(n.Z.costModelsAssignSourcesParen),placement:"bottom"})}}))}))))))}}const Ce=(0,p.connect)((0,f.X1)((e=>({metricsHash:D.qw.metrics(e)}))))((0,h.ZP)(Ze)),Me=()=>{const{currencyUnits:e,goToAddPL:t,metricsHash:r,tiers:a,submitTiers:s}=l().useContext(H),[o,n]=l().useState("table");return"table"===o?l().createElement(Ce,{items:a,deleteRateAction:e=>{const r=[...a.slice(0,e),...a.slice(e+1)];s(r),0===r.length&&t(!0)},addRateAction:()=>{n("form"),t(!1)}}):"form"===o?l().createElement(he,{currencyUnits:e,metricsHash:r,submitRate:o=>{var i;i=(0,de.Nl)(o,r,e),s([...a,i]),n("table"),t(!0)},cancel:()=>{n("table"),t(!0)}}):null};var Oe=r(53086),Re=r(64255);const Fe=(0,h.ZP)((({intl:e})=>l().createElement(H.Consumer,null,(({onClose:t,name:r})=>l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:Oe.xX,color:"green"}),l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(n.Z.costModelsWizardReviewStatusTitle)),l().createElement(a.EmptyStateBody,null,e.formatMessage(n.Z.costModelsWizardReviewStatusSubTitle,{value:r})),l().createElement(a.EmptyStateSecondaryActions,null,l().createElement(a.Button,{variant:"link",onClick:t},e.formatMessage(n.Z.close)))))))),Ie=(0,f.X1)((()=>({}))),ke=(0,h.ZP)((0,p.connect)(Ie,{})((({intl:e})=>l().createElement(H.Consumer,null,(({checked:t,createError:r,currencyUnits:s,description:o,distribution:i,distributePlatformUnallocated:c,distributeWorkerUnallocated:p,isDiscount:u,markup:m,name:d,tiers:h,type:g})=>{const y=Object.keys(t).filter((e=>t[e].selected)).map((e=>t[e].meta));return l().createElement(l().Fragment,null,r&&l().createElement(a.Alert,{variant:"danger",title:`${r}`}),l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(n.Z.costModelsWizardStepsReview))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,e.formatMessage(n.Z.costModelsWizardReviewStatusSubDetails,{create:l().createElement("strong",null,e.formatMessage(n.Z.create)),back:l().createElement("strong",null,e.formatMessage(n.Z.back))})))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.TextList,{component:a.TextListVariants.dl},l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.names,{count:1})),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},d),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.description)),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},o),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.currency)),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(n.Z.currencyOptions,{units:s})),"OCP"===g&&l().createElement(l().Fragment,null,l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.priceList)),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},h.length>0?l().createElement(Ee.y,{tiers:h}):e.formatMessage(n.Z.costModelsWizardNoRatesAdded))),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.costModelsWizardReviewMarkDiscount)),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(n.Z.percent,{value:u?"-"+m:m})),"OCP"===g&&l().createElement(l().Fragment,null,l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.costDistribution)),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(n.Z.distributionTypeDesc,{type:i})),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(n.Z.distributeCosts,{value:c,type:"platform"})),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(n.Z.distributeCosts,{value:p,type:"worker"}))),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(n.Z.costModelsAssignSources,{count:2})," ",y.find((e=>Boolean(e.costmodel)))&&l().createElement(Re.a,{text:e.formatMessage(n.Z.costModelsWizardWarningSources)})),l().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},y.map((e=>e.name)).join(", ")))))))}))))),De=()=>l().createElement(H.Consumer,null,(({createSuccess:e})=>e?l().createElement(Fe,null):l().createElement(ke,null)));var je=r(261),Ae=r(89291),we=r(40120),xe=r(76889),Ve=r(80810);const Le=({id:e,placeholder:t="",value:r,onChange:s,onSearch:o})=>l().createElement(a.InputGroup,null,l().createElement(a.TextInput,{value:r,placeholder:t,id:e,onChange:s,onKeyPress:e=>{"Enter"===e.key&&""!==r&&o(e)}}),l().createElement(a.InputGroupText,{style:{borderLeft:"0"}},l().createElement(Ve.W1,null))),ze=(0,h.ZP)((({intl:e,filterInputProps:t,paginationProps:r,filter:s})=>l().createElement(a.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:s.onClearAll},l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:l().createElement(xe.k1,null)},l().createElement(a.ToolbarItem,{variant:"search-filter"},l().createElement(a.ToolbarFilter,{deleteChip:s.onRemove,chips:s.query.name,categoryName:"name"},l().createElement(Le,Object.assign({placeholder:e.formatMessage(n.Z.costModelsFilterPlaceholder)},t))))),l().createElement(a.ToolbarItem,{variant:"pagination"},l().createElement(a.Pagination,{isCompact:r.isCompact,itemCount:r.itemCount,page:r.page,perPage:r.perPage,onSetPage:r.onSetPage,onPerPageSelect:r.onPerPageSelect,titles:{paginationTitle:e.formatMessage(n.Z.paginationTitle,{title:e.formatMessage(n.Z.costModelsAssignSourcesParen),placement:"bottom"})}})))))),We=(0,h.ZP)((({intl:e})=>l().createElement(H.Consumer,null,(({checked:t,loading:r,onSourceSelect:s,sources:o,perPage:i,page:c,type:p,query:u,fetchSources:m,filterName:d,onFilterChange:h})=>{const g="Azure"===p?"Azure":p,y=o.length>0?o[0].meta.count:0;return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(n.Z.costModelsWizardSourceTitle))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,e.formatMessage(n.Z.costModelsWizardSourceSubtitle)))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(n.Z.costModelsWizardSourceCaption,{value:p.toLowerCase()})))),l().createElement(a.StackItem,null,l().createElement(ze,{filter:{onRemove:(e,t)=>m(g,(0,we.fg)(u)(e,t),1,i),onClearAll:()=>m(g,{},1,i),query:u},filterInputProps:{id:"assign-source-search-input",value:d,onChange:h,onSearch:()=>{m(g,(0,we.xZ)(u)("name",d),1,i)}},paginationProps:{isCompact:!0,itemCount:y,perPage:i,page:c,onSetPage:(e,t)=>{m(g,u,t,i)},onPerPageSelect:(e,t)=>m(g,u,1,t)}}),r?l().createElement(je.G,null):l().createElement(w.TableComposable,{"aria-label":e.formatMessage(n.Z.costModelsWizardSourceTableAriaLabel),variant:w.TableVariant.compact},l().createElement(w.Thead,null,l().createElement(w.Tr,null,["",e.formatMessage(n.Z.names,{count:1}),e.formatMessage(n.Z.costModelsWizardSourceTableCostModel)].map(((e,t)=>l().createElement(w.Th,{key:t},e))))),l().createElement(w.Tbody,null,o.map(((r,o)=>l().createElement(w.Tr,{key:o},l().createElement(w.Td,null,l().createElement(a.Checkbox,{onChange:e=>{s(o,e)},id:r.name,key:r.name,"aria-label":e.formatMessage(n.Z.selectRow,{value:o}),isChecked:t[r.uuid]&&t[r.uuid].selected,isDisabled:Boolean(r.costmodel)})),l().createElement(w.Td,null,r.name," ",r.costmodel&&l().createElement(Re.a,{key:`wrng-${r.name}`,text:e.formatMessage(n.Z.costModelsWizardSourceWarning,{costModel:r.costmodel})})),l().createElement(w.Td,null,r.costmodel?r.costmodel:"")))))),l().createElement(be,{itemCount:y,perPage:i,page:c,titles:{paginationTitle:e.formatMessage(n.Z.paginationTitle,{title:e.formatMessage(n.Z.sources),placement:"bottom"})},onSetPage:(e,t)=>{m(g,u,t,i)},onPerPageSelect:(e,t)=>m(g,u,1,t)})))}))));class Be extends l().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:r,perPage:a,fetchSources:s}=this.context;s("Azure"===e?"Azure":e,t,r,a)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?l().createElement(je.G,null):this.context.apiError?l().createElement(Ae.Bu,{onRefresh:this.fetchData}):l().createElement(We,null)}render(){return this.renderContent()}}Be.contextType=H;const _e=Be,Ne=(e,t="USD")=>{const r=(0,U.cloneDeep)(e);return r.map((e=>{if(e.tiered_rates)for(const r of e.tiered_rates)r.unit=t,r.usage.unit=t;if(e.tag_rates)for(const r of e.tag_rates.tag_values)r.unit=t})),r},Ue=(0,h.ZP)((({intl:e,isProcess:t,isSuccess:r,closeFnc:s,isOpen:o,onMove:i,validators:c,steps:p,current:u=1,context:m,setError:d,setSuccess:h,updateCostModel:g})=>{const y=p.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:u>t})));y[u-1].enableNext=c[u-1](m);const f="OCP"===m.type&&2===u&&!c[u-1](m);return u===p.length&&""!==m.type&&(y[u-1].nextButtonText=e.formatMessage(n.Z.create)),o?l().createElement(a.Wizard,{isOpen:!0,title:e.formatMessage(n.Z.createCostModelTitle),description:e.formatMessage(n.Z.createCostModelDesc),steps:y,startAtStep:u,onNext:i,onBack:i,onGoToStep:i,onClose:s,footer:r||t||f?l().createElement("div",null):null,onSave:()=>{const{currency:e,description:t,distribution:r,distributePlatformUnallocated:a,distributeWorkerUnallocated:s,isDiscount:o,markup:n,name:i,type:l,tiers:c,sources:p}=m;(0,N.Rl)({name:i,source_type:l,currency:e,description:t,distribution_info:{distribution_type:r,platform_cost:a,worker_cost:s},rates:c,markup:{value:`${o?"-":""}${(0,K.E3)(n)}`,unit:"percent"},source_uuids:p.map((e=>e.uuid))}).then((()=>{h(),g()})).catch((e=>d((0,me.L)(e))))}}):null}));class Ke extends l().Component{constructor(){super(...arguments),this.defaultState={apiError:null,checked:{},createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,v.tk)(),dataFetched:!1,dirtyName:!1,description:"",distribution:"cpu",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,filterName:"",isDialogOpen:!1,isDiscount:!1,loading:!1,markup:"0",name:"",page:1,perPage:10,priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},query:{},sources:[],step:1,tiers:[],total:0,type:""},this.state=Object.assign({},this.defaultState)}render(){const{metricsHash:e,intl:t}=this.props,r=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},s=l().createElement(a.Button,{key:"cancel",variant:"link",onClick:r},t.formatMessage(n.Z.createCostModelNoContinue)),o=l().createElement(a.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},this.defaultState))},t.formatMessage(n.Z.createCostModelExitYes));return l().createElement(H.Provider,{value:{apiError:this.state.apiError,checked:this.state.checked,clearQuery:()=>this.setState({query:{}}),createError:this.state.createError,createProcess:this.state.createProcess,createSuccess:this.state.createSuccess,currencyUnits:this.state.currencyUnits,description:this.state.description,dataFetched:this.state.dataFetched,dirtyName:this.state.dirtyName,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,error:this.state.error,filterName:this.state.filterName,fetchSources:(e,t,r,a)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:r,query:a})=>{const s=(t-1)*r,o=r,n=Object.keys(a).reduce(((e,t)=>e?`${e}&${t}=${a[t]}`:`${t}=${a[t]}`),"");return(0,G.s)(`type=${e}&limit=${o}&offset=${s}&${n}`).then((e=>{const t=e.data;return t.data.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),meta:t.meta})))}))})({type:e,query:t,page:r,perPage:a}).then((e=>this.setState({sources:e,query:t,page:r,perPage:a,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),handleDistributionChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distribution:r})},handleDistributePlatformUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributePlatformUnallocated:"true"===r})},handleDistributeWorkerUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributeWorkerUnallocated:"true"===r})},handleMarkupDiscountChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({markup:r})},handleSignChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({isDiscount:"true"===r})},isDiscount:this.state.isDiscount,loading:this.state.loading,metricsHash:e,onClose:()=>this.setState(Object.assign({},this.defaultState),this.props.closeWizard),onCurrencyChange:e=>this.setState({currencyUnits:e,tiers:Ne(this.state.tiers,e)}),onDescChange:e=>this.setState({description:e}),onFilterChange:e=>this.setState({filterName:e}),onNameChange:e=>this.setState({name:e,dirtyName:!0}),onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),onSourceSelect:(e,t)=>{if(-1===e){const e=this.state.sources.map((e=>({[e.uuid]:{selected:t,meta:e}}))),r=Object.assign(Object.assign({},this.state.checked),e);return this.setState({checked:r})}const r=Object.assign(Object.assign({},this.state.checked),{[this.state.sources[e].uuid]:{selected:t,meta:this.state.sources[e]}});return this.setState({checked:r})},onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),page:this.state.page,priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},markup:this.state.markup,name:this.state.name,perPage:this.state.perPage,query:this.state.query,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),sources:this.state.sources,step:this.state.step,submitTiers:e=>{this.setState({tiers:e})},tiers:this.state.tiers,total:this.state.total,type:this.state.type}},l().createElement(Ue,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},this.defaultState),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(n.Z.costModelsWizardStepsGenInfo),component:l().createElement(ie,null)}],Azure:[{id:1,name:t.formatMessage(n.Z.costModelsWizardStepsGenInfo),component:l().createElement(ie,null)},{id:2,name:t.formatMessage(n.Z.costCalculations),component:l().createElement(ue,null)},{id:3,name:t.formatMessage(n.Z.costModelsWizardStepsSources),component:l().createElement(_e,null)},{id:4,name:t.formatMessage(n.Z.costModelsWizardStepsReview),component:l().createElement(De,null)}],AWS:[{id:1,name:t.formatMessage(n.Z.costModelsWizardStepsGenInfo),component:l().createElement(ie,null)},{id:2,name:t.formatMessage(n.Z.costCalculations),component:l().createElement(ue,null)},{id:3,name:t.formatMessage(n.Z.costModelsWizardStepsSources),component:l().createElement(_e,null)},{id:4,name:t.formatMessage(n.Z.costModelsWizardStepsReview),component:l().createElement(De,null)}],GCP:[{id:1,name:t.formatMessage(n.Z.costModelsWizardStepsGenInfo),component:l().createElement(ie,null)},{id:2,name:t.formatMessage(n.Z.costCalculations),component:l().createElement(ue,null)},{id:3,name:t.formatMessage(n.Z.costModelsWizardStepsSources),component:l().createElement(_e,null)},{id:4,name:t.formatMessage(n.Z.costModelsWizardStepsReview),component:l().createElement(De,null)}],OCP:[{id:1,name:t.formatMessage(n.Z.costModelsWizardStepsGenInfo),component:l().createElement(ie,null)},{id:2,name:t.formatMessage(n.Z.priceList),component:l().createElement(Me,null)},{id:3,name:t.formatMessage(n.Z.costCalculations),component:l().createElement(ue,null)},{id:4,name:t.formatMessage(n.Z.costDistribution),component:l().createElement(Y,null)},{id:5,name:t.formatMessage(n.Z.costModelsWizardStepsSources),component:l().createElement(_e,null)},{id:6,name:t.formatMessage(n.Z.costModelsWizardStepsReview),component:l().createElement(De,null)}]}[this.state.type],current:this.state.step,validators:se[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,currency:this.state.currencyUnits,description:this.state.description,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,markup:`${this.state.isDiscount?"-":""}${this.state.markup}`,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:Object.keys(this.state.checked).map((e=>this.state.checked[e].meta))}}),l().createElement(a.Modal,{"aria-label":t.formatMessage(n.Z.createCostModelExit),isOpen:this.state.isDialogOpen,header:l().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},l().createElement(_.LP,{color:"orange"})," ",t.formatMessage(n.Z.createCostModelExit)),onClose:r,actions:[o,s],variant:"small"},t.formatMessage(n.Z.createCostModelConfirmMsg)))}}const Ge=(0,p.connect)((0,f.X1)((e=>({metricsHash:D.qw.metrics(e)}))),{fetch:k.F0.fetchCostModels})((0,h.ZP)(Ke)),qe=(0,h.ZP)((0,p.connect)((e=>({canWrite:j.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(k.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(k.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,r)=>{const{intl:s=A.N}=r,{canWrite:o}=e,{openWizard:i}=t;return{isDisabled:!o,tooltip:s.formatMessage(n.Z.costModelsReadOnly),children:l().createElement(a.Button,{isDisabled:!o,onClick:i},s.formatMessage(n.Z.costModelsWizardCreateCostModel))}}))(B.j)),He=(0,p.connect)((e=>({isOpen:k.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(k.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(k.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:r}=e,{openWizard:a,closeWizard:s}=t;return{isOpen:r,openWizard:a,closeWizard:s}}))(Ge);function $e({head:e,body:t,sources:r}){return l().createElement(a.Stack,{hasGutter:!0},l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,e))),l().createElement(a.StackItem,null,l().createElement(a.TextContent,null,l().createElement(a.Text,null,t),l().createElement(a.TextList,{component:a.TextListVariants.ol},r.map((e=>l().createElement(a.TextListItem,{key:e},e)))))))}const Je=(0,h.ZP)((0,p.connect)((e=>({isOpen:k.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:k.E6.deleteProcessing(e),deleteError:k.E6.deleteError(e),dialogData:k.E6.dialogData(e)})),(e=>({closeDialog:()=>e(k.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>k.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,r)=>{const{intl:s=A.N}=r,o=(i=e.isLoading,c=e.isOpen,p=e.deleteError,c?i?"loading":p?"failure":"open":"close");var i,c,p;const u=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,m=u?u.name:"",d=u?u.sources.map((e=>e.name)):[],h=u?u.uuid:"",g=function({status:e,deleteText:t,deleteAction:r,cancelText:s,cancelAction:o,sourcesNo:n}){let i=[];return"loading"===e&&(i=[l().createElement(a.Button,{key:"pending_delete",variant:a.ButtonVariant.danger,isDisabled:!0},t),l().createElement(a.Button,{key:"pending_cancel",variant:a.ButtonVariant.link,isDisabled:!0},s)]),["failure","open"].includes(e)&&n>0&&(i=[l().createElement(a.Button,{key:"sources_cancel",variant:a.ButtonVariant.link,onClick:o},s)]),["failure","open"].includes(e)&&0===n&&(i=[l().createElement(a.Button,{key:"delete",variant:a.ButtonVariant.danger,onClick:r},t),l().createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:o},s)]),i}({status:o,deleteText:s.formatMessage(n.Z.costModelsDelete),deleteAction:()=>t.deleteCostModel(h),cancelText:s.formatMessage(n.Z.cancel),cancelAction:t.closeDialog,sourcesNo:d.length}),y=function({status:e,sources:t,error:r,cannotDeleteTitle:s,cannotDeleteBody:o,canDeleteBody:n}){return"close"!==e&&t.length>0?l().createElement($e,{head:s,body:o,sources:t}):"close"!==e&&0===t.length?l().createElement(a.Stack,{hasGutter:!0},"failure"===e?l().createElement(a.StackItem,null,l().createElement(a.Alert,{variant:a.AlertVariant.danger,title:r})):null,l().createElement(a.StackItem,null,n)):void 0}({status:o,sources:d,error:e.deleteError,cannotDeleteTitle:s.formatMessage(n.Z.costModelsDeleteSource),cannotDeleteBody:s.formatMessage(n.Z.costModelsCanNotDelete,{name:m}),canDeleteBody:s.formatMessage(n.Z.costModelsCanDelete,{name:m})});return{actions:g,isOpen:"close"!==o,variant:a.ModalVariant.small,"aria-label":s.formatMessage(n.Z.costModelsDelete),title:s.formatMessage(n.Z.costModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:y}}))(a.Modal)),Xe=Je;var Qe=r(15984),Ye=r(39836);const et=function(e){return l().createElement(a.EmptyState,{className:"pf-m-redhat-font"},l().createElement(a.EmptyStateIcon,{icon:e.icon}),l().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.title),l().createElement(a.EmptyStateBody,null,e.description),e.actions?e.actions:null)},tt=(0,h.ZP)((({intl:e=A.N})=>l().createElement(et,{title:e.formatMessage(n.Z.costModelsEmptyState),description:e.formatMessage(n.Z.costModelsEmptyStateDesc),icon:ge.wl,actions:l().createElement(l().Fragment,null,l().createElement(qe,null),l().createElement("br",null),l().createElement("br",null),l().createElement("a",{href:e.formatMessage(n.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(n.Z.costModelsEmptyStateLearnMore)))})));var rt=r(68025);class at extends l().Component{constructor(){super(...arguments),this.defaultState={dialogSource:null,activeSortDirection:"asc",activeSortIndex:0},this.state=Object.assign({},this.defaultState)}render(){const{intl:e=A.N,canWrite:t,costData:r,openDeleteDialog:s,query:o,router:i,stateName:c}=this.props,p=function(e,t){let r=null;return"loading"===e&&(r=l().createElement(je.G,null)),"empty"===e&&(r=l().createElement(tt,null)),"no-match"===e&&(r=l().createElement(ye.c,null)),"failure"===e&&(r=l().createElement(Qe.Z,null)),null!==r?[{heightAuto:!0,cells:[{props:{colSpan:6},title:l().createElement(a.Bullseye,null," ",r," ")}]}]:t.map((e=>{const t=A.N.formatDate(e.updated_timestamp,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"short",timeZone:"UTC",timeZoneName:"short",year:"numeric"});return{cells:[{title:l().createElement(Ye.Link,{to:`${(0,rt.dI)(u._.costModel.basePath)}/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),t],data:{costModel:e}}}))}(c,r),m=[Object.assign({title:e.formatMessage(n.Z.names,{count:1}),data:{orderName:"name"}},p.length&&{transforms:[w.sortable]}),{title:e.formatMessage(n.Z.description)},Object.assign({title:e.formatMessage(n.Z.sourceType),data:{orderName:"source_type"}},p.length&&{transforms:[w.sortable]}),{title:e.formatMessage(n.Z.costModelsAssignedSources)},Object.assign({title:e.formatMessage(n.Z.costModelsLastChange),data:{orderName:"updated_timestamp"}},p.length&&{transforms:[w.sortable]}),{title:"",props:{"aria-label":e.formatMessage(n.Z.costModelsActions)}}],d=function(e,t,r){return"success"!==e?[]:r.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(c,t,[{title:e.formatMessage(n.Z.delete),tooltip:e.formatMessage(n.Z.costModelsReadOnly),onClick:(e,t,r)=>{s(r.data)}}]),h=function(e,t,r){return function(a,s,o){const n=e[s]&&e[s].data?e[s].data.orderName:null;null!==n&&(o!==w.SortByDirection.asc?r.navigate(V(Object.assign(Object.assign({},t),{ordering:`-${n}`}))):r.navigate(V(Object.assign(Object.assign({},t),{ordering:n}))))}}(m,o,i),g=e=>({sortBy:{index:this.state.activeSortIndex,direction:this.state.activeSortDirection,defaultDirection:"asc"},onSort:(e,t,r)=>{this.setState(Object.assign(Object.assign({},this.state),{activeSortDirection:r,activeSortIndex:t})),h(e,t,r)},columnIndex:e});return l().createElement(w.TableComposable,{"aria-label":e.formatMessage(n.Z.costModelsTableAriaLabel),gridBreakPoint:w.TableGridBreakpoint.grid2xl,variant:w.TableVariant.compact},l().createElement(w.Thead,null,l().createElement(w.Tr,null,m.map(((e,t)=>l().createElement(w.Th,{key:t,sort:e.transforms?g(t):void 0},e.title))),l().createElement(w.Th,null))),l().createElement(w.Tbody,null,p.map(((e,t)=>l().createElement(w.Tr,{key:t},e.cells.map(((e,t)=>l().createElement(w.Td,{colSpan:e.props?e.props.colSpan:void 0,key:t},e.title?e.title:e))),!e.heightAuto&&l().createElement(w.Td,{isActionCell:!0},l().createElement(w.ActionsColumn,{items:d.map((r=>Object.assign(Object.assign({},r),{onClick:a=>r.onClick(a,t,e,null)})))})))))))}}const st=(0,f.X1)((e=>({canWrite:j.c5.isCostModelWritePermission(e),query:k.E6.query(e),costData:k.E6.costModels(e),stateName:k.E6.stateName(e)}))),ot=(0,p.connect)(st,(e=>{const t=k.F0.setCostModelDialog;return{openDeleteDialog:r=>e(t({name:"deleteCostModel",isOpen:!0,meta:r}))}}))(at),nt=(0,h.ZP)((0,T.E)(ot)),it=({placeholder:e="",value:t,onChange:r,onKeyPress:s})=>l().createElement(a.InputGroup,null,l().createElement(a.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==t&&s(e)}}),l().createElement(a.InputGroupText,{style:{borderLeft:"0"}},l().createElement(Ve.W1,null))),lt=(e,t,r,a)=>s=>{if("Enter"===s.key&&""!==a.value){const s=a.value;e.navigate(V(Object.assign(Object.assign({},r),{[t]:r[t]?`${r[t]},${s}`:s}))),a.setValue("")}},ct=(e,t,r)=>(a,s)=>{const o=r[t]?r[t].split(",").filter((e=>e!==s)):null;e.navigate(V(Object.assign(Object.assign({},r),{[t]:null===o||0===o.length?null:o.join(",")})))},pt=(e,t,r)=>()=>{e.navigate(V(Object.assign(Object.assign({},t),{[r]:null})))},ut=(0,p.connect)((e=>({filterType:k.E6.currentFilterType(e),query:k.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=A.N,router:s}=r,{filterType:o,query:i}=e,l=i.description?i.description.split(","):[];return{categoryName:a.formatMessage(n.Z.description),chips:l,deleteChip:ct(s,"description",Object.assign(Object.assign({},x),i)),deleteChipGroup:pt(s,Object.assign(Object.assign({},x),i),"description"),filterType:o,intl:a,query:i,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:o,categoryName:i,query:c,router:p})=>{const[u,m]=l().useState(""),d="description"===r?l().createElement(it,{placeholder:s.formatMessage(n.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:lt(p,"description",Object.assign(Object.assign({},x),c),{value:u,setValue:m})}):null;return l().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:o,categoryName:i},d)})),mt=(0,h.ZP)((0,T.E)(ut)),dt=(0,p.connect)((e=>({filterType:k.E6.currentFilterType(e),query:k.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=A.N,router:s}=r,{filterType:o,query:i}=e,l=i.name?i.name.split(","):[];return{deleteChip:ct(s,"name",Object.assign(Object.assign({},x),i)),deleteChipGroup:pt(s,Object.assign(Object.assign({},x),i),"name"),filterType:o,chips:l,categoryName:a.formatMessage(n.Z.names,{count:1}),intl:a,query:i,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:o,categoryName:i,query:c,router:p})=>{const[u,m]=l().useState(""),d="name"===r?l().createElement(it,{placeholder:s.formatMessage(n.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:lt(p,"name",Object.assign(Object.assign({},x),c),{value:u,setValue:m})}):null;return l().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:o,categoryName:i},d)})),ht=(0,h.ZP)((0,T.E)(dt)),gt=(e,t)=>()=>{t(!1);const r=document.getElementById(e);r&&r.focus()},yt=(0,p.connect)((e=>({filterType:k.E6.currentFilterType(e),query:k.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=A.N,router:s}=r,{filterType:o,query:i}=e;return{chips:i.source_type?[i.source_type]:[],categoryName:a.formatMessage(n.Z.sourceType),deleteChip:pt(s,Object.assign(Object.assign({},x),i),"source_type"),filterType:o,intl:a,query:i,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:o,categoryName:i,query:c,router:p})=>{const[u,m]=l().useState(!1),d="source-type-filter",h=e=>p.navigate(V(Object.assign(Object.assign(Object.assign({},x),c),{source_type:e}))),g="sourceType"===r?l().createElement(a.Dropdown,{onSelect:gt(d,m),isOpen:u,toggle:l().createElement(a.DropdownToggle,{onToggle:e=>{m(e)},id:d},s.formatMessage(n.Z.filterByPlaceholder,{value:"source_type"})),dropdownItems:[l().createElement(a.DropdownItem,{key:"aws",component:"button",onClick:()=>h("aws")},s.formatMessage(n.Z.aws)),l().createElement(a.DropdownItem,{key:"azure",component:"button",onClick:()=>h("azure")},s.formatMessage(n.Z.azure)),l().createElement(a.DropdownItem,{key:"ocp",component:"button",onClick:()=>h("ocp")},s.formatMessage(n.Z.openShift))]}):null;return l().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:o,categoryName:i},g)})),ft=(0,h.ZP)((0,T.E)(yt)),bt=(0,T.E)((0,p.connect)((e=>({query:k.E6.query(e)})),void 0,((e,t,r)=>{const{children:a,router:s}=r,{query:o}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>s.navigate(V(Object.assign(Object.assign(Object.assign({},x),o),{description:null,source_type:null,name:null}))),children:a}}))(a.Toolbar)),vt=(0,p.connect)((e=>({filterType:k.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(k.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,r)=>{const{intl:a=A.N}=r,{filterType:s}=e;return{filterType:s,intl:a,updateFilterType:t.updateFilterType}}))((({filterType:e,intl:t,updateFilterType:r})=>{const[s,o]=l().useState(!1),i=[l().createElement(a.SelectOption,{key:"name",value:"name"},t.formatMessage(n.Z.names,{count:1})),l().createElement(a.SelectOption,{key:"description",value:"description"},t.formatMessage(n.Z.description)),l().createElement(a.SelectOption,{key:"sourceType",value:"sourceType"},t.formatMessage(n.Z.sourceType))];return l().createElement(a.Select,{isOpen:s,onSelect:(e,t)=>{r(t),o(!1)},onToggle:o,selections:e,toggleIcon:l().createElement(xe.k1,null),variant:a.SelectVariant.single},i)})),Tt=(0,h.ZP)((0,T.E)(vt)),Et=(0,T.E)((0,p.connect)((e=>{const{count:t,page:r,perPage:a}=k.E6.pagination(e);return{count:t,page:r,perPage:a,query:k.E6.query(e)}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:i,query:l}=e;return{isCompact:!0,itemCount:o,page:n,perPage:i,variant:a.PaginationVariant.top,onSetPage:(e,t,r)=>{s.navigate(V(Object.assign(Object.assign(Object.assign({},x),l),{offset:L(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(V(Object.assign(Object.assign(Object.assign({},x),l),{limit:t,offset:0})))}}}))(a.Pagination)),St=()=>l().createElement(bt,null,l().createElement(a.ToolbarContent,null,l().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:l().createElement(xe.k1,null)},l().createElement(a.ToolbarGroup,{variant:"filter-group"},l().createElement(a.ToolbarItem,null,l().createElement(Tt,null)),l().createElement(ht,null),l().createElement(mt,null),l().createElement(ft,null))),l().createElement(a.ToolbarGroup,null,l().createElement(qe,null)),l().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},l().createElement(Et,null))));class Pt extends l().Component{componentDidMount(){const{getCostModelsData:e,getMetricsData:t,getRbacData:r,search:a}=this.props;e(a),t(),r()}componentDidUpdate(e){const{getCostModelsData:t,search:r}=this.props;e.search!==r&&t(r)}render(){const{intl:e}=this.props;return l().createElement(a.PageSection,{isFilled:!0},l().createElement("div",{style:W.descContainer},e.formatMessage(n.Z.costModelsDesc,{learnMore:l().createElement("a",{href:e.formatMessage(n.Z.docsUsingCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(n.Z.learnMore))})),l().createElement(He,null),l().createElement(Xe,null),l().createElement(St,null),l().createElement(nt,null),l().createElement(z,null))}}const Zt=(0,T.E)((0,h.ZP)((0,p.connect)(((e,t)=>{const r=(0,I.parse)(t.router.location.search,{ignoreQueryPrefix:!0}),a=Object.assign(Object.assign({},r),{tabKey:void 0});return{search:(0,I.stringify)(a,{encode:!1,indices:!1})}}),(e=>({getCostModelsData:t=>k.F0.fetchCostModels(t)(e),getRbacData:()=>j.O9.fetchRbac()(e),getMetricsData:()=>D.Wg.fetchMetrics()(e)})))(Pt)));var Ct=r(39333),Mt=r(6456),Ot=r(46955),Rt=r(34328),Ft=r(32924),It=r(15920);const kt={action:{marginLeft:P.ZP.var},descContainer:{backgroundColor:E.ZP.value,paddingLeft:P.ZP.value,paddingRight:P.ZP.value,paddingTop:P.ZP.value},pagination:{backgroundColor:E.ZP.value,paddingBottom:P.ZP.value,paddingTop:P.ZP.value}};var Dt=r(70637),jt=r(91882);class At extends l().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{intl:e,isAllSelected:t,report:r,selectedItems:s}=this.props;if(!r)return;const o=[],i=(0,Rt.c)({report:r,idKey:"project"}),c=[{name:""},Object.assign({orderBy:"project",name:e.formatMessage(n.Z.detailsResourceNames,{value:"name"})},i.length&&{isSortable:!0}),Object.assign({orderBy:"group",name:e.formatMessage(n.Z.detailsResourceNames,{value:"group"})},i.length&&{isSortable:!0}),Object.assign(Object.assign({orderBy:"cluster",name:e.formatMessage(n.Z.clusters)},i.length&&{isSortable:!0}),{style:jt.W.lastItemColumn})];i.map((r=>{const i=r&&null!==r.label?r.label:"";o.push({cells:[{},{value:i},{value:l().createElement(a.Label,{variant:"outline",color:"green"},e.formatMessage(n.Z.platform))},{value:"cluster",style:jt.W.lastItem}],item:r,selected:t||s&&void 0!==s.find((e=>e.id===r.id))})}));const p=c.filter((e=>!e.hidden)),u=o.map((e=>{var t=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:p,rows:u})}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t,selectedItems:r}=this.props,a=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")===a&&e.selectedItems===r||this.initDatum()}render(){const{filterBy:e,isLoading:t,onSelected:r,onSort:a,orderBy:s,selectedItems:o}=this.props,{columns:n,rows:i}=this.state;return l().createElement(Dt.w,{columns:n,filterBy:e,isLoading:t,onSelected:r,onSort:a,orderBy:s,rows:i,selectedItems:o})}}const wt=(0,h.ZP)((0,T.E)(At));var xt=r(36116),Vt=r(70200);class Lt extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getActions=()=>{const{intl:e,onAddProjects:t,onRemoveProjects:r,selectedItems:s}=this.props,o=0===s.length;return l().createElement(l().Fragment,null,l().createElement(a.Tooltip,{content:e.formatMessage(n.Z.selectProjects)},l().createElement(a.Button,{isAriaDisabled:o,key:"save",onClick:t,variant:a.ButtonVariant.primary},e.formatMessage(n.Z.addProjects))),l().createElement(a.Tooltip,{content:e.formatMessage(n.Z.selectProjects)},l().createElement(a.Button,{isAriaDisabled:o,key:"reset",onClick:r,style:kt.action,variant:a.ButtonVariant.secondary},e.formatMessage(n.Z.removeProjects))))},this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(n.Z.filterByValues,{value:"name"}),key:"project"},{name:e.formatMessage(n.Z.filterByValues,{value:"group"}),key:"group"},{name:e.formatMessage(n.Z.filterByValues,{value:"cluster"}),key:"cluster"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:i,query:c,selectedItems:p}=this.props,{categoryOptions:u}=this.state;return l().createElement(Vt.p,{actions:this.getActions(),categoryOptions:u,isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:i,query:c,resourcePathsType:xt.C.ocp,selectedItems:p,showBulkSelect:!0,showFilter:!0})}}const zt=(0,f.X1)(((e,t)=>({}))),Wt=(0,p.connect)(zt,{})(Lt),Bt=(0,h.ZP)(Wt),_t={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1,limit:10,offset:0},filter_by:{},group_by:{project:"*"},order_by:{cost:"desc"}},Nt=()=>{const[e,t]=(0,i.useState)(!1),[r,s]=(0,i.useState)(Object.assign({},_t)),[o,u]=(0,i.useState)([]),d=(0,c.Z)(),{report:h,reportError:g,reportFetchStatus:y,reportQueryString:b}=(({query:e})=>{const t=Mt.C.cost,r=Mt.K.ocp,a=(0,p.useDispatch)(),s=(0,Ct.pm)(e),o=(0,p.useSelector)((e=>It.ZV.selectReport(e,r,t,s))),n=(0,p.useSelector)((e=>It.ZV.selectReportFetchStatus(e,r,t,s))),l=(0,p.useSelector)((e=>It.ZV.selectReportError(e,r,t,s)));return(0,i.useEffect)((()=>{l||n===f.iF.inProgress||a(It.nx.fetchReport(r,t,s))}),[e]),{report:o,reportError:l,reportFetchStatus:n,reportQueryString:s}})({query:r}),v=()=>(0,Rt.c)({report:h,idKey:"project"}),T=(e=!1,t=!1)=>{const r=h&&h.meta?h.meta.count:0,s=h&&h.meta&&h.meta.filter&&h.meta.filter.limit?h.meta.filter.limit:_t.filter.limit,o=h&&h.meta&&h.meta.filter&&h.meta.filter.offset?h.meta.filter.offset:_t.filter.offset,i=Math.trunc(o/s+1);return l().createElement(a.Pagination,{isCompact:!t,isDisabled:e,itemCount:r,onPerPageSelect:(e,t)=>Z(t),onSetPage:(e,t)=>C(t),page:i,perPage:s,titles:{paginationTitle:d.formatMessage(n.Z.paginationTitle,{title:d.formatMessage(n.Z.openShift),placement:t?"bottom":"top"})},variant:t?a.PaginationVariant.bottom:a.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},E=r=>{"none"===r?(t(!1),u([])):"page"===r?(t(!1),u(v())):"all"===r&&(t(!e),u([]))},S=()=>{},P=()=>{},Z=e=>{const t=Ft.Lk(r,e);s(t)},C=e=>{const t=Ft.F4(r,h,e);s(t)},M=v(),O=0===M.length;return g?l().createElement(Ot.W,null):l().createElement(a.PageSection,{isFilled:!0},l().createElement("div",{style:kt.descContainer},d.formatMessage(n.Z.platfomProjectaDesc,{learnMore:l().createElement("a",{href:d.formatMessage(n.Z.docsConfigPlatformProjects),rel:"noreferrer",target:"_blank"},d.formatMessage(n.Z.learnMore))})),(t=>{const a=0===t.length,n=h&&h.meta?h.meta.count:0;return l().createElement(Bt,{isAllSelected:e,isDisabled:a,itemsPerPage:t.length,itemsTotal:n,onAddProjects:S,onBulkSelected:E,onFilterAdded:e=>(e=>{const t=Ft.JA(r,e);s(t)})(e),onFilterRemoved:e=>(e=>{const t=Ft.vI(r,e);s(t)})(e),onRemoveProjects:P,pagination:T(a),query:r,selectedItems:o})})(M),y===f.iF.inProgress?l().createElement(m.g,null):l().createElement(l().Fragment,null,l().createElement(wt,{filterBy:r.filter_by,isAllSelected:e,isLoading:y===f.iF.inProgress,orderBy:r.order_by,onSelected:(r,a=!1)=>{let s=[...e?v():o];r&&r.length>0&&(a?r.map((e=>s.push(e))):r.map((e=>{s=s.filter((t=>t.id!==e.id))}))),t(!1),u(s)},onSort:(e,t)=>((e,t)=>{const a=Ft.K8(r,e,t);s(a)})(e,t),report:h,reportQueryString:b,selectedItems:o}),l().createElement("div",{style:kt.pagination},T(O,!0))))},Ut={action:{marginLeft:P.ZP.var},descContainer:{backgroundColor:E.ZP.value,paddingLeft:P.ZP.value,paddingRight:P.ZP.value,paddingTop:P.ZP.value},pagination:{backgroundColor:E.ZP.value,paddingBottom:P.ZP.value,paddingTop:P.ZP.value}};class Kt extends l().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{intl:e,isAllSelected:t,report:r,selectedItems:s}=this.props;if(!r)return;const o=[],i=(0,Rt.c)({report:r,idKey:"project"}),c=[{name:""},Object.assign({orderBy:"project",name:e.formatMessage(n.Z.detailsResourceNames,{value:"name"})},i.length&&{isSortable:!0}),Object.assign({orderBy:"status",name:e.formatMessage(n.Z.detailsResourceNames,{value:"status"})},i.length&&{isSortable:!0}),Object.assign(Object.assign({orderBy:"source_type",name:e.formatMessage(n.Z.sourceType)},i.length&&{isSortable:!0}),{style:jt.W.lastItemColumn})];i.map((r=>{const i=r&&null!==r.label?r.label:"";o.push({cells:[{},{value:i},{value:l().createElement(a.Label,{variant:"outline",color:"green"},e.formatMessage(n.Z.enabled))},{value:"source type",style:jt.W.lastItem}],item:r,selected:t||s&&void 0!==s.find((e=>e.id===r.id))})}));const p=c.filter((e=>!e.hidden)),u=o.map((e=>{var t=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:p,rows:u})}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t,selectedItems:r}=this.props,a=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")===a&&e.selectedItems===r||this.initDatum()}render(){const{filterBy:e,isLoading:t,onSelected:r,onSort:a,orderBy:s,selectedItems:o}=this.props,{columns:n,rows:i}=this.state;return l().createElement(Dt.w,{columns:n,filterBy:e,isLoading:t,onSelected:r,onSort:a,orderBy:s,rows:i,selectedItems:o})}}const Gt=(0,h.ZP)((0,T.E)(Kt));class qt extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getActions=()=>{const{intl:e,onDisableTags:t,onEnableTags:r,selectedItems:s}=this.props,o=0===s.length;return l().createElement(l().Fragment,null,l().createElement(a.Tooltip,{content:e.formatMessage(n.Z.selectTags)},l().createElement(a.Button,{isAriaDisabled:o,key:"save",onClick:r,variant:a.ButtonVariant.primary},e.formatMessage(n.Z.enableTags))),l().createElement(a.Tooltip,{content:e.formatMessage(n.Z.selectTags)},l().createElement(a.Button,{isAriaDisabled:o,key:"reset",onClick:t,style:Ut.action,variant:a.ButtonVariant.secondary},e.formatMessage(n.Z.disableTags))))},this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(n.Z.filterByValues,{value:"name"}),key:"project"},{name:e.formatMessage(n.Z.filterByValues,{value:"status"}),key:"status"},{name:e.formatMessage(n.Z.filterByValues,{value:"source_type"}),key:"source_type"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:i,query:c,selectedItems:p}=this.props,{categoryOptions:u}=this.state;return l().createElement(Vt.p,{actions:this.getActions(),categoryOptions:u,isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:i,query:c,resourcePathsType:xt.C.ocp,selectedItems:p,showBulkSelect:!0,showFilter:!0})}}const Ht=(0,f.X1)(((e,t)=>({}))),$t=(0,p.connect)(Ht,{})(qt),Jt=(0,h.ZP)($t),Xt={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1,limit:10,offset:0},filter_by:{},group_by:{project:"*"},order_by:{cost:"desc"}},Qt=()=>{const[e,t]=(0,i.useState)(!1),[r,s]=(0,i.useState)(Object.assign({},Xt)),[o,u]=(0,i.useState)([]),d=(0,c.Z)(),{report:h,reportError:g,reportFetchStatus:y,reportQueryString:b}=(({query:e})=>{const t=Mt.C.cost,r=Mt.K.ocp,a=(0,p.useDispatch)(),s=(0,Ct.pm)(e),o=(0,p.useSelector)((e=>It.ZV.selectReport(e,r,t,s))),n=(0,p.useSelector)((e=>It.ZV.selectReportFetchStatus(e,r,t,s))),l=(0,p.useSelector)((e=>It.ZV.selectReportError(e,r,t,s)));return(0,i.useEffect)((()=>{l||n===f.iF.inProgress||a(It.nx.fetchReport(r,t,s))}),[e]),{report:o,reportError:l,reportFetchStatus:n,reportQueryString:s}})({query:r}),v=()=>(0,Rt.c)({report:h,idKey:"project"}),T=(e=!1,t=!1)=>{const r=h&&h.meta?h.meta.count:0,s=h&&h.meta&&h.meta.filter&&h.meta.filter.limit?h.meta.filter.limit:Xt.filter.limit,o=h&&h.meta&&h.meta.filter&&h.meta.filter.offset?h.meta.filter.offset:Xt.filter.offset,i=Math.trunc(o/s+1);return l().createElement(a.Pagination,{isCompact:!t,isDisabled:e,itemCount:r,onPerPageSelect:(e,t)=>Z(t),onSetPage:(e,t)=>C(t),page:i,perPage:s,titles:{paginationTitle:d.formatMessage(n.Z.paginationTitle,{title:d.formatMessage(n.Z.openShift),placement:t?"bottom":"top"})},variant:t?a.PaginationVariant.bottom:a.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},E=r=>{"none"===r?(t(!1),u([])):"page"===r?(t(!1),u(v())):"all"===r&&(t(!e),u([]))},S=()=>{},P=()=>{},Z=e=>{const t=Ft.Lk(r,e);s(t)},C=e=>{const t=Ft.F4(r,h,e);s(t)},M=v(),O=0===M.length;return g?l().createElement(Ot.W,null):l().createElement(a.PageSection,{isFilled:!0},l().createElement("div",{style:Ut.descContainer},d.formatMessage(n.Z.tagDesc,{learnMore:l().createElement("a",{href:d.formatMessage(n.Z.docsConfigTags),rel:"noreferrer",target:"_blank"},d.formatMessage(n.Z.learnMore))})),(t=>{const a=0===t.length,n=h&&h.meta?h.meta.count:0;return l().createElement(Jt,{isAllSelected:e,isDisabled:a,itemsPerPage:t.length,itemsTotal:n,onBulkSelected:E,onDisableTags:S,onEnableTags:P,onFilterAdded:e=>(e=>{const t=Ft.JA(r,e);s(t)})(e),onFilterRemoved:e=>(e=>{const t=Ft.vI(r,e);s(t)})(e),pagination:T(a),query:r,selectedItems:o})})(M),y===f.iF.inProgress?l().createElement(m.g,null):l().createElement(l().Fragment,null,l().createElement(Gt,{filterBy:r.filter_by,isAllSelected:e,isLoading:y===f.iF.inProgress,orderBy:r.order_by,onSelected:(r,a=!1)=>{let s=[...e?v():o];r&&r.length>0&&(a?r.map((e=>s.push(e))):r.map((e=>{s=s.filter((t=>t.id!==e.id))}))),t(!1),u(s)},onSort:(e,t)=>((e,t)=>{const a=Ft.K8(r,e,t);s(a)})(e,t),report:h,reportQueryString:b,selectedItems:o}),l().createElement("div",{style:Ut.pagination},T(O,!0))))};var Yt=r(22369),er=r(46919),tr=r(74926),rr=r(96351);const ar={action:{marginLeft:P.ZP.var},descContainer:{backgroundColor:E.ZP.value,paddingLeft:P.ZP.value,paddingRight:P.ZP.value,paddingTop:P.ZP.value},pagination:{backgroundColor:E.ZP.value,paddingBottom:P.ZP.value,paddingTop:P.ZP.value}};class sr extends l().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{intl:e,isAllSelected:t,report:r,selectedItems:s}=this.props;if(!r)return;const o=[],i=(0,Rt.c)({report:r,idKey:"project"}),c=[{name:""},Object.assign({orderBy:"project",name:e.formatMessage(n.Z.detailsResourceNames,{value:"name"})},i.length&&{isSortable:!0}),Object.assign({orderBy:"status",name:e.formatMessage(n.Z.detailsResourceNames,{value:"status"})},i.length&&{isSortable:!0})];i.map((r=>{const i=r&&null!==r.label?r.label:"";o.push({cells:[{},{value:i},{value:l().createElement(a.Label,{variant:"outline",color:"green"},e.formatMessage(n.Z.enabled))}],item:r,selected:t||s&&void 0!==s.find((e=>e.id===r.id))})}));const p=c.filter((e=>!e.hidden)),u=o.map((e=>{var t=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:p,rows:u})}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t,selectedItems:r}=this.props,a=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")===a&&e.selectedItems===r||this.initDatum()}render(){const{filterBy:e,isLoading:t,onSelected:r,onSort:a,orderBy:s,selectedItems:o}=this.props,{columns:n,rows:i}=this.state;return l().createElement(Dt.w,{columns:n,filterBy:e,isLoading:t,onSelected:r,onSort:a,orderBy:s,rows:i,selectedItems:o})}}const or=(0,h.ZP)((0,T.E)(sr));class nr extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getActions=()=>{const{intl:e,onDisableTags:t,onEnableTags:r,selectedItems:s}=this.props,o=0===s.length;return l().createElement(l().Fragment,null,l().createElement(a.Tooltip,{content:e.formatMessage(n.Z.selectCategories)},l().createElement(a.Button,{isAriaDisabled:o,key:"save",onClick:r,variant:a.ButtonVariant.primary},e.formatMessage(n.Z.enableCategories))),l().createElement(a.Tooltip,{content:e.formatMessage(n.Z.selectCategories)},l().createElement(a.Button,{isAriaDisabled:o,key:"reset",onClick:t,style:ar.action,variant:a.ButtonVariant.secondary},e.formatMessage(n.Z.disableCategories))))},this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(n.Z.filterByValues,{value:"name"}),key:"project"},{name:e.formatMessage(n.Z.filterByValues,{value:"status"}),key:"status"},{name:e.formatMessage(n.Z.filterByValues,{value:"source_type"}),key:"source_type"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:i,query:c,selectedItems:p}=this.props,{categoryOptions:u}=this.state;return l().createElement(Vt.p,{actions:this.getActions(),categoryOptions:u,isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:i,query:c,resourcePathsType:xt.C.ocp,selectedItems:p,showBulkSelect:!0,showFilter:!0})}}const ir=(0,f.X1)((()=>({}))),lr=(0,p.connect)(ir,{})(nr),cr=(0,h.ZP)(lr),pr={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1,limit:10,offset:0},filter_by:{},group_by:{project:"*"},order_by:{cost:"desc"}},ur=()=>{const[e,t]=(0,i.useState)(!1),[r,s]=(0,i.useState)(Object.assign({},pr)),[o,u]=(0,i.useState)([]),d=(0,c.Z)(),{report:h,reportError:g,reportFetchStatus:y,reportQueryString:b}=(({query:e})=>{const t=Mt.C.cost,r=Mt.K.ocp,a=(0,p.useDispatch)(),s=(0,Ct.pm)(e),o=(0,p.useSelector)((e=>It.ZV.selectReport(e,r,t,s))),n=(0,p.useSelector)((e=>It.ZV.selectReportFetchStatus(e,r,t,s))),l=(0,p.useSelector)((e=>It.ZV.selectReportError(e,r,t,s)));return(0,i.useEffect)((()=>{l||n===f.iF.inProgress||a(It.nx.fetchReport(r,t,s))}),[e]),{report:o,reportError:l,reportFetchStatus:n,reportQueryString:s}})({query:r}),v=()=>(0,Rt.c)({report:h,idKey:"project"}),T=(e=!1,t=!1)=>{const r=h&&h.meta?h.meta.count:0,s=h&&h.meta&&h.meta.filter&&h.meta.filter.limit?h.meta.filter.limit:pr.filter.limit,o=h&&h.meta&&h.meta.filter&&h.meta.filter.offset?h.meta.filter.offset:pr.filter.offset,i=Math.trunc(o/s+1);return l().createElement(a.Pagination,{isCompact:!t,isDisabled:e,itemCount:r,onPerPageSelect:(e,t)=>Z(t),onSetPage:(e,t)=>C(t),page:i,perPage:s,titles:{paginationTitle:d.formatMessage(n.Z.paginationTitle,{title:d.formatMessage(n.Z.openShift),placement:t?"bottom":"top"})},variant:t?a.PaginationVariant.bottom:a.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},E=r=>{"none"===r?(t(!1),u([])):"page"===r?(t(!1),u(v())):"all"===r&&(t(!e),u([]))},S=()=>{},P=()=>{},Z=e=>{const t=Ft.Lk(r,e);s(t)},C=e=>{const t=Ft.F4(r,h,e);s(t)},M=v(),O=0===M.length;return g?l().createElement(Ot.W,null):l().createElement(a.PageSection,{isFilled:!0},l().createElement("div",{style:ar.descContainer},d.formatMessage(n.Z.costCategoryDesc,{learnMore:l().createElement("a",{href:d.formatMessage(n.Z.docsConfigCostCategory),rel:"noreferrer",target:"_blank"},d.formatMessage(n.Z.learnMore))})),(t=>{const a=0===t.length,n=h&&h.meta?h.meta.count:0;return l().createElement(cr,{isAllSelected:e,isDisabled:a,itemsPerPage:t.length,itemsTotal:n,onBulkSelected:E,onDisableTags:S,onEnableTags:P,onFilterAdded:e=>(e=>{const t=Ft.JA(r,e);s(t)})(e),onFilterRemoved:e=>(e=>{const t=Ft.vI(r,e);s(t)})(e),pagination:T(a),query:r,selectedItems:o})})(M),y===f.iF.inProgress?l().createElement(m.g,null):l().createElement(l().Fragment,null,l().createElement(or,{filterBy:r.filter_by,isAllSelected:e,isLoading:y===f.iF.inProgress,orderBy:r.order_by,onSelected:(r,a=!1)=>{let s=[...e?v():o];r&&r.length>0&&(a?r.map((e=>s.push(e))):r.map((e=>{s=s.filter((t=>t.id!==e.id))}))),t(!1),u(s)},onSort:(e,t)=>((e,t)=>{const a=Ft.K8(r,e,t);s(a)})(e,t),report:h,reportQueryString:b,selectedItems:o}),l().createElement("div",{style:ar.pagination},T(O,!0))))},mr={header:{backgroundColor:E.ZP.var,paddingLeft:S.ZP.var,paddingRight:S.ZP.var,paddingTop:S.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},tabs:{backgroundColor:E.ZP.var,paddingTop:S.ZP.var}};var dr;!function(e){e.costModels="cost_models",e.calculations="calculations",e.costCategory="cost_category",e.platformProjects="platform_projects",e.tags="tags"}(dr||(dr={}));const hr=e=>{switch(e){case dr.costModels:return"cost_models";case dr.calculations:return"calculations";case dr.costCategory:return"cost_category";case dr.platformProjects:return"platform_projects";case dr.tags:return"tags"}},gr=(0,tr.z)((({chrome:e})=>{const[t,r]=(0,i.useState)(0),{isSettingsPlatformEnabled:h,userAccess:g,userAccessFetchStatus:y}=(()=>{const e=(0,s.T)(er.QR),t=(0,p.useSelector)((t=>er.JO.selectUserAccess(t,o.n.all,e))),r=(0,p.useSelector)((t=>er.JO.selectUserAccessError(t,o.n.all,e))),a=(0,p.useSelector)((t=>er.JO.selectUserAccessFetchStatus(t,o.n.all,e)));return{isSettingsPlatformEnabled:(0,p.useSelector)((e=>Yt.iJ.selectIsSettingsPlatformFeatureEnabled(e))),userAccess:t,userAccessError:r,userAccessFetchStatus:a,userAccessQueryString:e}})(),b=(0,c.Z)(),v=e=>e===dr.calculations?b.formatMessage(n.Z.currencyCalcuationsTitle):e===dr.costCategory?b.formatMessage(n.Z.costCategoryTitle):e===dr.costModels?b.formatMessage(n.Z.costModels):e===dr.platformProjects?b.formatMessage(n.Z.platformProjectsTitle):e===dr.tags?b.formatMessage(n.Z.tagLabelsTitle):void 0,T=(e,a)=>{t!==a&&r(a)},E=(()=>{const e=[{contentRef:l().createRef(),tab:dr.costModels},{contentRef:l().createRef(),tab:dr.calculations},{contentRef:l().createRef(),tab:dr.tags},{contentRef:l().createRef(),tab:dr.costCategory}];return h&&e.push({contentRef:l().createRef(),tab:dr.platformProjects}),e})();return l().createElement("div",{className:"tabsOverride"},l().createElement("header",{style:mr.header},l().createElement("div",{style:mr.headerContent},l().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},b.formatMessage(n.Z.settingsTitle))),y===f.iF.inProgress?l().createElement(m.g,null):l().createElement("div",{style:mr.tabs},(e=>l().createElement(a.Tabs,{activeKey:t,onSelect:T},e.map(((e,t)=>((e,t,r)=>l().createElement(a.Tab,{eventKey:r,key:`${hr(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:l().createElement(a.TabTitleText,null,v(e))}))(e.tab,e.contentRef,t)))))(E))),l().createElement("div",null,(r=>r.map(((r,s)=>l().createElement(a.TabContent,{eventKey:s,key:`${hr(r.tab)}-tabContent`,id:`tab-${s}`,ref:r.contentRef},((r,a)=>{const s=l().createElement(d.b,{pathname:(0,rt.dI)(u._.settings.path)}),o=l().createElement(l().Fragment,null);if(t!==a)return o;const n=hr(r);return n===dr.costModels?e.isOrgAdmin||(0,rr.ot)(g)?l().createElement(Zt,null):l().createElement(d.b,{pathname:(0,rt.dI)(u._.costModel.path)}):n===dr.calculations?e.isOrgAdmin?l().createElement(F,null):s:n===dr.costCategory?e.isOrgAdmin?l().createElement(ur,null):s:n===dr.platformProjects?e.isOrgAdmin?l().createElement(Nt,null):s:n===dr.tags?e.isOrgAdmin?l().createElement(Qt,null):s:o})(r.tab,s)))))(E)))}))},1032:(e,t,r)=>{var a;r.d(t,{BV:()=>o,Bj:()=>c,D2:()=>p,JY:()=>u,Mg:()=>d,at:()=>l,g8:()=>m,rL:()=>h}),function(e){e.currentMonthData="current_month_data",e.hasData="has_data",e.previousMonthData="previous_month_data"}(a||(a={}));const s=(e,t)=>{let r;if(e&&e.data)for(const a of e.data)if(a.infrastructure&&a.infrastructure.uuid===t){r=a;break}return r},o=(e,t)=>{if(!e)return e;const r=e.data.filter((e=>e.source_type.toLowerCase()===t)),a=Object.assign(Object.assign({},e.meta),{count:r.length});return Object.assign(Object.assign({},e),{meta:a,data:r})},n=(e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(a[t]){r=!0;break}return r},i=(e,t,r)=>{let a=!1;if(e&&e.data)for(const o of e.data){const e=s(t,o.uuid);if(e&&e[r]){a=!0;break}}return a},l=(e,t)=>i(e,t,a.currentMonthData),c=(e,t)=>i(e,t,a.hasData),p=(e,t)=>i(e,t,a.previousMonthData),u=(e,t)=>((e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(s(t,a.uuid)){r=!0;break}return r})(e,t),m=e=>n(e,a.currentMonthData),d=e=>n(e,a.hasData),h=e=>n(e,a.previousMonthData)},32924:(e,t,r)=>{r.d(t,{F4:()=>d,JA:()=>p,K8:()=>h,LB:()=>i,Lk:()=>m,ZE:()=>n,bU:()=>c,ft:()=>l,vI:()=>u});var a=r(39333),s=r(39552);const o=(e,t=!1,r={})=>{const a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),r);return t&&(a.filter&&void 0!==a.filter.offset&&(a.filter=Object.assign(Object.assign({},e.filter),{offset:0})),void 0!==a.offset&&(a.offset=0)),a},n=(e,t,r=!1)=>{const s=o(e,r);return`${t.pathname}?${(0,a.IV)(s)}`},i=e=>o(e),l=e=>o(e),c=e=>o(e,!1,{order_by:void 0}),p=(e,t)=>{const r=o(e,!0);return(0,s.oQ)(r,t)},u=(e,t)=>{const r=o(e,!0);return(0,s.cJ)(r,t)},m=(e,t,r=!1)=>o(e,!1,Object.assign({},r?{limit:t}:{filter:Object.assign(Object.assign({},e.filter),{limit:t})})),d=(e,t,r,a=!1)=>{let s=10;t&&t.meta&&(a&&void 0!==t.meta.limit?s=t.meta.limit:t.meta.filter&&void 0!==t.meta.filter.limit&&(s=t.meta.filter.limit));const n=r*s-s;return o(e,!1,Object.assign({},a?{limit:s,offset:n}:{filter:Object.assign(Object.assign({},e.filter),{limit:s,offset:n})}))},h=(e,t,r,a=undefined)=>o(e,!1,{order_by:Object.assign({[t]:r?"asc":"desc"},a&&{date:a})})},74926:(e,t,r)=>{r.d(t,{z:()=>n});var a=r(55140),s=r(92950),o=r.n(s);const n=e=>t=>{const{auth:r}=(0,a.Z)(),[n,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),p=(0,s.useRef)(!1);return(0,s.useLayoutEffect)((()=>(p.current=!0,()=>{p.current=!1})),[]),(0,s.useLayoutEffect)((()=>{(async e=>{var t;const r=await e.getUser();try{return!!(null===(t=null==r?void 0:r.identity.user)||void 0===t?void 0:t.is_org_admin)}catch(e){return!1}})(r).then((e=>{p.current&&(c(e),i(!0))}))})),n?o().createElement(e,Object.assign({},t,{chrome:{isOrgAdmin:l}})):null}},96351:(e,t,r)=>{r.d(t,{Es:()=>y,F4:()=>E,FE:()=>h,FW:()=>l,HC:()=>u,KT:()=>n,Rt:()=>f,Sv:()=>d,Xd:()=>p,ZC:()=>T,hn:()=>c,mn:()=>b,n9:()=>i,ot:()=>m,tt:()=>g,yY:()=>v});var a=r(91577);const s=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const a=e.data.find((e=>e.type===t));r=a&&a.access}else r=e&&!0===e.data;return r},o=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},n=e=>s(e,a.n.aws),i=(e,t)=>n(e)&&o(t),l=e=>s(e,a.n.azure),c=(e,t)=>l(e)&&o(t),p=e=>s(e,a.n.oci),u=(e,t)=>p(e)&&o(t),m=e=>s(e,a.n.cost_model),d=e=>s(e,a.n.gcp),h=(e,t)=>s(e,a.n.gcp)&&o(t),g=e=>d(e),y=(e,t)=>g(e)&&o(t),f=e=>s(e,a.n.ocp),b=(e,t)=>f(e)&&o(t),v=e=>s(e,a.n.rhel),T=(e,t)=>v(e)&&o(t),E=e=>s(e,a.n.ros)},84735:(e,t,r)=>{e.exports=r.p+"fonts/Cost-icon.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.ae4aadef2a2ac03861da323442377806.js.map