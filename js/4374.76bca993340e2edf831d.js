"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[4374],{52636:(e,t,a)=>{a.d(t,{Xk:()=>n,rU:()=>o});var r=a(40400);const o={name:"CalculatorIcon",height:512,width:448,svgPath:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z",yOffset:0,xOffset:0},n=(0,r.IU)(o)},33183:(e,t,a)=>{a.d(t,{g:()=>l});var r=a(97027),o=a(92950),n=a.n(o),i=a(74806);const s=a(41163),l=(0,i.ZP)((({className:e,intl:t})=>n().createElement("img",{className:`optimization-icon ${e}`,src:s,alt:t.formatMessage(r.Z.optimizations),"aria-hidden":"true"})))},90302:(e,t,a)=>{a.d(t,{W:()=>l});var r=a(49382),o=a(12289),n=a(40794),i=a(11331),s=a(43789);const l={costColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end",paddingRight:0},defaultLabel:{minWidth:"63px"},emptyState:{backgroundColor:r.ZP.value,display:"flex",justifyContent:"center",paddingTop:i.ZP.value,height:"35vh",width:"100%"},infoArrow:{position:"relative"},infoArrowDesc:{bottom:s.ZP.value},infoDescription:{color:o.ZP.value,fontSize:n.ZP.value},lastReported:{textAlign:"right",paddingRight:"40px"},lastReportedColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end"},managedColumn:{textAlign:"right"},nameColumn:{width:"1%"}}},90569:(e,t,a)=>{a.d(t,{w:()=>y});var r=a(90154),o=a(52636),n=a(40227),i=a(79112),s=a(97027),l=a(92950),c=a.n(l),m=a(74806),p=a(33183),d=a(42901),u=a(5842),g=a(90302);class h extends c().Component{constructor(e){super(e),this.getEmptyState=()=>{const{intl:e,isOptimizations:t,router:a}=this.props,n=(0,i.mB)(a.location.search);if(n.filter_by)for(const e of Object.values(n.filter_by))if("*"!==e)return c().createElement(d.c,{filter:e,showMargin:!1});return c().createElement(r.EmptyState,null,c().createElement(r.EmptyStateIcon,{icon:t?p.g:o.Xk}),c().createElement(r.EmptyStateBody,null,e.formatMessage(t?s.Z.optimizationsEmptyState:s.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,router:a}=this.props,r=t[e].orderBy,o=(0,i.mB)(a.location.search),n=o&&o.order_by&&o.order_by[r];return n?{index:e,direction:n}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSelect=(e,t,a)=>{const{onSelected:r,rows:o}=this.props;let n,i=[];-1===a?n=o.map((e=>(e.selected=t,e))):(n=[...o],n[a].selected=t,i=[n[a].item]),this.setState({rows:o},(()=>{r&&r(i,t)}))},this.handleOnSort=(e,t,a)=>{const{columns:r,onSort:o}=this.props;o&&o(r[t].orderBy,a===n.SortByDirection.asc)},this.handleOnRowClick=(e,t)=>{const{onRowClick:a,rows:r}=this.props;r.map((e=>e.selected=!1)),r[t].selected=!0,this.setState({rows:r},(()=>{a&&a(e,t)}))},this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isLoading:a,isOptimizations:o,rows:i}=this.props;return c().createElement(c().Fragment,null,c().createElement(n.TableComposable,{"aria-label":t.formatMessage(s.Z.dataTableAriaLabel),className:"tableOverride",gridBreakPoint:"grid-2xl",hasSelectableRowCaption:o},c().createElement(n.Thead,null,c().createElement(n.Tr,null,e.map(((e,t)=>c().createElement(n.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),c().createElement(n.Tbody,null,a?c().createElement(n.Tr,null,c().createElement(n.Td,{colSpan:100},c().createElement(r.Bullseye,null,c().createElement("div",{style:{textAlign:"center"}},c().createElement(r.Spinner,{size:"xl"}))))):i.map(((t,a)=>c().createElement(n.Tr,{isSelectable:o,isHoverable:o,isRowSelected:o&&t.selected,onRowClick:o?e=>this.handleOnRowClick(e,a):void 0,key:`row-${a}`},t.cells.map(((r,i)=>0!==i||o?c().createElement(n.Td,{dataLabel:e[i].name,key:`cell-${a}-${i}`,modifier:"nowrap",isActionCell:!o&&i===t.cells.length-1,style:r.style},r.value):c().createElement(n.Td,{dataLabel:e[i].name,key:`cell-${i}-${a}`,modifier:"nowrap",select:{disable:t.selectionDisabled,isSelected:t.selected,onSelect:(e,t)=>this.handleOnSelect(e,t,a),rowIndex:a},style:r.style})))))))),Boolean(0===i.length)&&c().createElement("div",{style:g.W.emptyState},this.getEmptyState()))}}const y=(0,m.ZP)((0,u.E)(h))},44374:(e,t,a)=>{a.d(t,{Z:()=>K});var r=a(90154),o=a(52016),n=a(89256),i=a(97027),s=a(92950),l=a.n(s),c=a(74806),m=a(77760),p=a(52471),d=a(89376),u=a(39173),g=a(33183);class h extends l().Component{render(){const{intl:e}=this.props;return l().createElement(r.EmptyState,{variant:r.EmptyStateVariant.large,className:"pf-m-redhat-font"},l().createElement(r.EmptyStateIcon,{icon:g.g}),l().createElement(r.Title,{headingLevel:"h1",size:"lg"},e.formatMessage(i.Z.noOptimizationsTitle)),l().createElement(r.EmptyStateBody,null,e.formatMessage(i.Z.noOptimizationsDesc)))}}const y=(0,c.ZP)(h),f=({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(d.Z,null,l().createElement(u.Z,{title:e})),l().createElement(r.PageSection,null,l().createElement(y,null)));var v=a(47947),E=a(37269),b=a(19727),S=a(1156),w=a(2136),O=a(5842),P=a(49382),Z=a(98499),C=a(32412);const k={content:{paddingBottom:Z.ZP.value,paddingTop:Z.ZP.value},header:{backgroundColor:P.ZP.var,padding:Z.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},optimizationsContainer:{minHeight:"100vh"},paginationContainer:{marginLeft:Z.ZP.value,marginRight:Z.ZP.value},pagination:{backgroundColor:P.ZP.value,paddingBottom:C.ZP.value,paddingTop:C.ZP.value},tableContainer:{marginLeft:Z.ZP.value,marginRight:Z.ZP.value},toolbarContainer:{marginLeft:Z.ZP.value,marginRight:Z.ZP.value}};class R extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState)}render(){const{intl:e}=this.props;return l().createElement("header",{style:k.header},l().createElement("div",{style:k.headerContent},l().createElement(r.Title,{headingLevel:"h1",style:k.title,size:r.TitleSizes["2xl"]},e.formatMessage(i.Z.optimizations))))}}const z=(0,S.X1)((()=>({}))),B=(0,c.ZP)((0,m.connect)(z,{})(R));var x=a(39333),T=a(90569),j=a(90302),M=a(20997),_=a(45087);class F extends l().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{groupBy:e,intl:t,report:a}=this.props;if(!a)return;const r=a&&a.data&&a.data.length>0,o=[],n=[Object.assign({name:t.formatMessage(i.Z.optimizationsNames,{value:"container"}),orderBy:"container"},r&&{isSortable:!0}),Object.assign({hidden:"project"===e,name:t.formatMessage(i.Z.optimizationsNames,{value:"project"}),orderBy:"project"},r&&{isSortable:!0}),Object.assign({name:t.formatMessage(i.Z.optimizationsNames,{value:"workload"}),orderBy:"workload"},r&&{isSortable:!0}),Object.assign({name:t.formatMessage(i.Z.optimizationsNames,{value:"workload_type"}),orderBy:"workload_type"},r&&{isSortable:!0}),Object.assign({hidden:"cluster"===e,name:t.formatMessage(i.Z.optimizationsNames,{value:"cluster"}),orderBy:"cluster"},r&&{isSortable:!0}),Object.assign({name:t.formatMessage(i.Z.optimizationsNames,{value:"last_reported"}),orderBy:"last_reported",style:j.W.lastReportedColumn},r&&{isSortable:!0})];r&&a.data.map((t=>{const a=t.cluster_alias?t.cluster_alias:t.cluster_uuid?t.cluster_uuid:"",r=t.container?t.container:"",n=(0,_.i0)(t.last_reported),i=t.project?t.project:"",s=t.workload?t.workload:"",c=t.workload_type?t.workload_type:"";o.push({cells:[{value:l().createElement("div",null,r)},{value:l().createElement("div",null,i),hidden:"project"===e},{value:l().createElement("div",null,s)},{value:l().createElement("div",null,c)},{value:l().createElement("div",null,a),hidden:"cluster"===e},{value:l().createElement("div",null,n),style:j.W.lastReported}],optimization:{container:t.container,id:t.id}})}));const s=n.filter((e=>!e.hidden)),c=o.map((e=>{var t=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]])}return a}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:s,rows:c})},this.handleOnRowClick=(e,t)=>{const{openOptimizationsDrawer:a}=this.props,{rows:r}=this.state;a(r[t].optimization)}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t}=this.props,a=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")!==a&&this.initDatum()}render(){const{isLoading:e,onSort:t}=this.props,{columns:a,rows:r}=this.state;return l().createElement(T.w,{columns:a,isLoading:e,isOptimizations:!0,onSort:t,rows:r,onRowClick:this.handleOnRowClick})}}const D=(0,S.X1)(((e,{router:t})=>{const a=(0,x.mB)(t.location.search);return{groupBy:(0,E.VL)(a),isOpen:M.lU.selectIsOptimizationsDrawerOpen(e)}})),A={closeOptimizationsDrawer:M.Aw.Zv,openOptimizationsDrawer:M.Aw.Kk},L=(0,c.ZP)((0,O.E)((0,m.connect)(D,A)(F)));var N=a(36116),V=a(70539);class I extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(i.Z.filterByValues,{value:"cluster"}),key:"cluster"},{name:e.formatMessage(i.Z.filterByValues,{value:"project"}),key:"project"},{name:e.formatMessage(i.Z.filterByValues,{value:"workload_type"}),key:"workload_type"},{name:e.formatMessage(i.Z.filterByValues,{value:"workload"}),key:"workload"},{name:e.formatMessage(i.Z.filterByValues,{value:"container"}),key:"container"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isDisabled:e,itemsPerPage:t,itemsTotal:a,onFilterAdded:r,onFilterRemoved:o,pagination:n,query:i}=this.props,{categoryOptions:s}=this.state;return l().createElement(V.k,{categoryOptions:s,isDisabled:e,itemsPerPage:t,itemsTotal:a,onFilterAdded:r,onFilterRemoved:o,pagination:n,query:i,resourcePathsType:N.C.ocp,showFilter:!0})}}const $=(0,S.X1)((()=>({}))),q=(0,m.connect)($,{})(I),H=(0,c.ZP)(q),Q={limit:10,offset:0,order_by:{cost:"desc"}},W=n.N.ros,X=n.v.recommendations;class U extends l().Component{constructor(){super(...arguments),this.defaultState={columns:[],rows:[]},this.state=Object.assign({},this.defaultState),this.getPagination=(e=!1,t=!1)=>{const{intl:a,query:o,report:n,router:s}=this.props,c=n&&n.meta?n.meta.count:0,m=n&&n.meta?n.meta.limit:Q.limit,p=(n&&n.meta?n.meta.offset:Q.offset)/m+1;return l().createElement(r.Pagination,{isCompact:!t,isDisabled:e,itemCount:c,onPerPageSelect:(e,t)=>(0,b.xh)(o,s,t),onSetPage:(e,t)=>(0,b.$9)(o,s,n,t),page:p,perPage:m,titles:{paginationTitle:a.formatMessage(i.Z.paginationTitle,{title:a.formatMessage(i.Z.openShift),placement:t?"bottom":"top"})},variant:t?r.PaginationVariant.bottom:r.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},this.getTable=()=>{const{query:e,report:t,reportFetchStatus:a,reportQueryString:r,router:o}=this.props;return l().createElement(L,{isLoading:a===S.iF.inProgress,onSort:(t,a)=>(0,b.yB)(e,o,t,a),report:t,reportQueryString:r})},this.getToolbar=()=>{const{query:e,report:t,router:a}=this.props,r=t&&t.meta?t.meta.limit:0,o=t&&t.meta?t.meta.count:0,n=0===o;return l().createElement(H,{isDisabled:n,itemsPerPage:r,itemsTotal:o,onFilterAdded:t=>(0,b.$3)(e,a,t),onFilterRemoved:t=>(0,b.q7)(e,a,t),pagination:this.getPagination(n),query:e})},this.updateReport=()=>{const{fetchRosReport:e,reportFetchStatus:t,reportQueryString:a}=this.props;t!==S.iF.inProgress&&e(X,W,a)}}componentDidMount(){this.updateReport()}componentDidUpdate(e){const{report:t,reportError:a,reportQueryString:r,router:o}=this.props,n=e.reportQueryString!==r,i=!t&&!a,s=!o.location.search;(n||i||s)&&this.updateReport()}render(){const{groupBy:e,intl:t,report:a,reportError:r,reportFetchStatus:o}=this.props,n=0===(a&&a.meta?a.meta.count:0),s=void 0===e,c=t.formatMessage(i.Z.optimizations),m=a&&a.meta&&a.meta.count>0;return r?l().createElement(v.W,{title:c}):m||o!==S.iF.complete?l().createElement("div",{style:k.optimizationsContainer},s?l().createElement(l().Fragment,null,l().createElement(B,null),l().createElement("div",{style:k.content},l().createElement("div",{style:k.toolbarContainer},this.getToolbar()),o===S.iF.inProgress?l().createElement(p.g,null):l().createElement(l().Fragment,null,l().createElement("div",{style:k.tableContainer},this.getTable()),l().createElement("div",{style:k.paginationContainer},l().createElement("div",{style:k.pagination},this.getPagination(n,!0)))))):l().createElement(l().Fragment,null,this.getToolbar(),o===S.iF.inProgress?l().createElement(p.g,null):l().createElement(l().Fragment,null,this.getTable(),l().createElement("div",{style:k.pagination},this.getPagination(n,!0))))):l().createElement(f,{title:s?c:void 0})}}const G=(0,S.X1)(((e,{router:t})=>{const a=(0,o.mB)(t.location.search),r=(0,E.VL)(a),n=(0,E.pe)(a),i=Object.assign(Object.assign({},r&&{[r]:n}),{filter_by:a.filter_by||Q.filter_by,limit:a.limit||Q.limit,offset:a.offset||Q.offset}),s=(0,o.pm)(Object.assign({},i)),l=w.R0.selectRos(e,X,W,s),c=w.R0.selectRosError(e,X,W,s),m=w.R0.selectRosFetchStatus(e,X,W,s);return{groupBy:a.group_by,query:i,report:l,reportError:c,reportFetchStatus:m,reportQueryString:s}})),J={fetchRosReport:w.Ze.fetchRosReport},K=(0,c.ZP)((0,O.E)((0,m.connect)(G,J)(U)))},41163:(e,t,a)=>{e.exports=a.p+"fonts/Icon-Red_Hat-IT_Optimization-A-Gray-RGB.svg"}}]);
//# sourceMappingURL=../sourcemaps/4374.5b61c00c89731a514b1615a5f07fafe6.js.map