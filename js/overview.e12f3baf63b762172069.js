"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{52636:(e,t,r)=>{r.d(t,{Xk:()=>o,rU:()=>s});var a=r(40400);const s={name:"CalculatorIcon",height:512,width:448,svgPath:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z",yOffset:0,xOffset:0},o=(0,a.IU)(s)},53086:(e,t,r)=>{r.d(t,{xX:()=>o,yK:()=>s});var a=r(40400);const s={name:"OkIcon",height:1024,width:1024,svgPath:"M668.3,361.4 L465.1,564.6 L352.2,451.7 C346.210177,445.698444 338.079189,442.325817 329.6,442.325817 C321.120811,442.325817 312.989823,445.698444 307,451.7 L261.8,496.9 C255.798444,502.889823 252.425817,511.020811 252.425817,519.5 C252.425817,527.979189 255.798444,536.110177 261.8,542.1 L442.4,722.7 C448.389823,728.701556 456.520811,732.074183 465,732.074183 C473.479189,732.074183 481.610177,728.701556 487.6,722.7 L758.6,451.7 C764.601556,445.710177 767.974183,437.579189 767.974183,429.1 C767.974183,420.620811 764.601556,412.489823 758.6,406.5 L713.4,361.3 C700.916226,348.87879 680.728569,348.923552 668.3,361.4 M512.1,127.9 C300.3,127.9 128.1,300.2 128.1,511.9 C128.1,723.8 300.3,895.9 512.1,895.9 C723.9,895.9 896.1,723.7 896.1,511.9 C896.1,300.1 723.8,127.9 512.1,127.9 M512.1,1024 C229.7,1024 0,794.3 0,512 C0,229.7 229.7,0 512.1,0 C794.3,0 1024,229.7 1024,512 C1024,794.3 794.3,1024 512.1,1024",yOffset:0,xOffset:0},o=(0,a.IU)(s)},84717:(e,t,r)=>{r.d(t,{H:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,r)=>{r.d(t,{T:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},6450:(e,t,r)=>{r.d(t,{F:()=>y,m:()=>m});var a=r(90154),s=r(97027),o=r(92950),n=r.n(o),i=r(74806),c=r(77760),l=r(1156),p=r(15829);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"}},m=[{label:s.Z.currencyOptions,value:"AUD"},{label:s.Z.currencyOptions,value:"CAD"},{label:s.Z.currencyOptions,value:"CHF"},{label:s.Z.currencyOptions,value:"CNY"},{label:s.Z.currencyOptions,value:"DKK"},{label:s.Z.currencyOptions,value:"EUR"},{label:s.Z.currencyOptions,value:"GBP"},{label:s.Z.currencyOptions,value:"HKD"},{label:s.Z.currencyOptions,value:"JPY"},{label:s.Z.currencyOptions,value:"NOK"},{label:s.Z.currencyOptions,value:"NZD"},{label:s.Z.currencyOptions,value:"SEK"},{label:s.Z.currencyOptions,value:"SGD"},{label:s.Z.currencyOptions,value:"USD"},{label:s.Z.currencyOptions,value:"ZAR"}];class d extends n().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t,showLabel:r=!0}=this.props,{isSelectOpen:s}=this.state,o=this.getSelectOptions(),i=o.find((t=>t.value===e));return n().createElement(a.Select,{className:r?"currencyOverride":void 0,id:"currencySelect",isDisabled:t,isOpen:s,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:i,variant:a.SelectVariant.single},o.map((e=>n().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return m.map((r=>{t.push({toString:()=>e.formatMessage(r.label,{units:r.value}),value:r.value})})),t},this.handleSelect=(e,t)=>{const{isLocalStorage:r=!0,onSelect:a}=this.props;r&&(0,p.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{a&&a(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e,showLabel:t=!0}=this.props;return n().createElement("div",{style:u.currencySelector},t&&n().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.md,style:u.currencyLabel},e.formatMessage(s.Z.currency)),this.getSelect())}}const h=(0,l.X1)((()=>({}))),g=(0,c.connect)(h,{})(d),y=(0,i.ZP)(g)},99344:(e,t,r)=>{r.r(t),r.d(t,{default:()=>sr});var a=r(90154),s=r(39333),o=r(97027),n=r(92950),i=r.n(n),c=r(74806),l=r(77760),p=r(6279),u=r(6450),m=r(1156),d=r(29379),h=r(15829),g=r(5842),y=r(49382),b=r(98499),f=r(32412),T=r(48196);const v={costType:{marginBottom:b.ZP.var,marginTop:b.ZP.var,width:"fit-content"},costTypeContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},currency:{marginTop:b.ZP.var,width:"fit-content"},currencyContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},resetContainer:{display:"inline-block",paddingLeft:f.ZP.var},title:{paddingBottom:T.ZP.var}};class E extends i().Component{constructor(){super(...arguments),this.defaultState={currentCostType:(0,h.uY)(),currentCurrency:(0,h.zC)()},this.state=Object.assign({},this.defaultState),this.getCostType=()=>{const{intl:e}=this.props,{currentCostType:t}=this.state;return i().createElement("div",{style:v.costTypeContainer},i().createElement(a.Title,{headingLevel:"h2",style:v.title,size:a.TitleSizes.md},e.formatMessage(o.Z.costTypeSettingsLabel)),e.formatMessage(o.Z.costTypeSettingsDesc),i().createElement("div",{style:v.costType},i().createElement(p.T,{costType:t,isLocalStorage:!1,onSelect:this.handleOnCostTypeSelected,showLabel:!1})))},this.getCurrency=()=>{const{intl:e}=this.props,{currentCurrency:t}=this.state;return i().createElement("div",{style:v.currencyContainer},i().createElement(a.Title,{headingLevel:"h2",style:v.title,size:a.TitleSizes.md},e.formatMessage(o.Z.currency)),e.formatMessage(o.Z.currencyDesc),i().createElement("div",{style:v.currency},i().createElement(u.F,{currency:t,isLocalStorage:!1,onSelect:this.handleOnCurrencySelected,showLabel:!1})))},this.handleOnCostTypeSelected=e=>{const{updateSettings:t}=this.props;this.setState({currentCostType:e},(()=>{(0,h.M1)(e),t({api:{settings:{cost_type:e}}})}))},this.handleOnCurrencySelected=e=>{const{updateSettings:t}=this.props;this.setState({currentCurrency:e},(()=>{(0,h.NW)(e),(0,h.Nc)(e),t({api:{settings:{currency:e}}})}))}}render(){return i().createElement(a.PageSection,{isFilled:!0},this.getCurrency(),this.getCostType())}}const S=(0,m.X1)((e=>({updateSettingsStatus:d.Hq.selectSettingsUpdateStatus(e)}))),P={updateSettings:d.ff.VP},C=(0,c.ZP)((0,g.E)((0,l.connect)(S,P)(E)));var Z=r(80129),M=r(58613),O=r(91800),R=r(73805),F=r(45868),I=r(40227);const k={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function D(e){return Object.keys(e).reduce(((t,r)=>null===e[r]?t:""===t?`?${r}=${e[r]}`:`${t}&${r}=${e[r]}`),"")}function j(e,t){return(e-1)*t}Object.keys(k);const A=(0,g.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:a}=M.E6.pagination(e);return{query:M.E6.query(e),count:t,page:r,perPage:a}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:i,query:c}=e;return{itemCount:o,page:n,perPage:i,variant:a.PaginationVariant.bottom,onSetPage:(e,t,r)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{offset:j(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{limit:t,offset:0})))}}}))((0,c.ZP)((e=>{const{variant:t,intl:r=F.N,itemCount:s,page:n,perPage:c,onSetPage:l,onPerPageSelect:p}=e;return i().createElement(a.Toolbar,null,i().createElement(a.ToolbarContent,null,i().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},i().createElement(a.Pagination,{onPerPageSelect:p,onSetPage:l,variant:t,itemCount:s,page:n,perPage:c,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsDetailsTitle),placement:"bottom"})}}))))})))),x={descContainer:{backgroundColor:y.ZP.value,padding:f.ZP.value}};var V=r(69425),w=r(69957),L=r(34327),z=r(44439),W=r(91778),B=r(1326);const N={apiError:null,checked:{},clearQuery:()=>null,createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,h.tk)(),dataFetched:!1,description:"",dirtyName:!1,distribution:"",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,fetchSources:(e,t,r,a)=>null,filterName:"",goToAddPL:e=>null,isDiscount:!1,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleDistributePlatformUnallocatedChange:(...e)=>null,handleDistributeWorkerUnallocatedChange:(...e)=>null,handleSignChange:(...e)=>null,loading:!1,markup:"",metricsHash:{},name:"",onClose:()=>null,onCurrencyChange:e=>null,onDescChange:e=>null,onFilterChange:e=>null,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,onTypeChange:e=>null,onNameChange:e=>null,onSourceSelect:(...e)=>null,page:1,perPage:10,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},query:{},step:1,setSources:e=>null,sources:[],submitTiers:e=>null,tiers:[],total:0,type:""},_=i().createContext(N);var U=r(68134);const K={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"},selector:{maxHeight:"350px"},titleWithLearnMore:{display:"inline-block",marginRight:"1em"}};class G extends i().Component{render(){const{intl:e}=this.props;return i().createElement(_.Consumer,null,(({handleDistributionChange:t,handleDistributePlatformUnallocatedChange:r,handleDistributeWorkerUnallocatedChange:s,distribution:n,distributePlatformUnallocated:c,distributeWorkerUnallocated:l})=>i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:K.titleWithLearnMore},e.formatMessage(o.Z.costDistribution)),i().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsDistribution),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.distributionType)),i().createElement(a.TextContent,null,i().createElement(a.Text,{style:K.cardDescription},e.formatMessage(o.Z.distributionModelDesc)))),i().createElement(a.StackItem,{isFilled:!0},i().createElement(U.l,null,i().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-type",isRequired:!0},i().createElement(a.Radio,{isChecked:"cpu"===n,name:"distributionType",label:e.formatMessage(o.Z.cpuTitle),"aria-label":e.formatMessage(o.Z.cpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),i().createElement(a.Radio,{isChecked:"memory"===n,name:"distributionType",label:e.formatMessage(o.Z.memoryTitle),"aria-label":e.formatMessage(o.Z.memoryTitle),id:"memoryDistribution",value:"memory",onChange:t})))),i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.platform)),i().createElement(a.TextContent,null,i().createElement(a.Text,{style:K.cardDescription},e.formatMessage(o.Z.platformDesc)))),i().createElement(a.StackItem,{isFilled:!0},i().createElement(U.l,null,i().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-platform-unallocated",isRequired:!0},i().createElement(a.Radio,{isChecked:c,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributePlatformTrue",value:"true",onChange:r}),i().createElement(a.Radio,{isChecked:!c,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributePlatformFalse",value:"false",onChange:r})))),i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.workerUnallocated)),i().createElement(a.TextContent,null,i().createElement(a.Text,{style:K.cardDescription},e.formatMessage(o.Z.workerUnallocatedDesc)))),i().createElement(a.StackItem,{isFilled:!0},i().createElement(U.l,null,i().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-worker-unallocated",isRequired:!0},i().createElement(a.Radio,{isChecked:l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributeWorkerTrue",value:"true",onChange:s}),i().createElement(a.Radio,{isChecked:!l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributeWorkerFalse",value:"false",onChange:s})))))))}}const q=(0,m.X1)((()=>({}))),H=(0,c.ZP)((0,l.connect)(q,{})(G));var $=r(34459);const J=e=>0===e.length?o.Z.costModelsRequiredField:e.length>100?o.Z.costModelsInfoTooLong:null,X=e=>e.length>500?o.Z.costModelsDescTooLong:null,Q=e=>""!==e.trim()&&(!!(0,W.WW)(e)&&!((0,W.cR)(e)>10)),Y={"":[()=>!1],AWS:[e=>null===J(e.name)&&null===X(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],Azure:[e=>null===J(e.name)&&null===X(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],GCP:[e=>null===J(e.name)&&null===X(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],OCP:[e=>null===J(e.name)&&null===X(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>Q(e.markup),()=>!0,()=>!0,()=>!0]};class ee extends i().Component{render(){const e=(e,r)=>{const a=r.find((t=>t.value===e));return a?t.formatMessage(a.label,{units:a.value}):e},{intl:t}=this.props,r=[{label:o.Z.costModelsWizardOnboardAws,value:"AWS"},{label:o.Z.azure,value:"Azure"},{label:o.Z.gcp,value:"GCP"},{label:o.Z.costModelsWizardOnboardOcp,value:"OCP"}];return i().createElement(_.Consumer,null,(({currencyUnits:s,dirtyName:n,description:c,name:l,type:p,onCurrencyChange:m,onNameChange:d,onDescChange:h,onTypeChange:g})=>i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:K.titleWithLearnMore},t.formatMessage(o.Z.costModelsWizardGeneralInfoTitle)),i().createElement("a",{href:t.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},t.formatMessage(o.Z.learnMore))),i().createElement(a.StackItem,null,i().createElement(U.l,{style:K.form},i().createElement(a.FormGroup,{helperTextInvalid:J(l)&&t.formatMessage(J(l)),validated:null!==J(l)&&n?"error":"default",label:t.formatMessage(o.Z.names,{count:1}),isRequired:!0,fieldId:"name"},i().createElement(a.TextInput,{validated:null!==J(l)&&n?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:l,onChange:d})),i().createElement(a.FormGroup,{helperTextInvalid:X(c)&&t.formatMessage(X(c)),validated:null===X(c)?"default":"error",label:t.formatMessage(o.Z.description),fieldId:"description"},i().createElement(a.TextArea,{style:K.textArea,type:"text",id:"description",name:"description",value:c,validated:null===X(c)?"default":"error",onChange:h})),i().createElement($.Q,{isRequired:!0,id:"source-type-selector",direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:K.selector.maxHeight,label:o.Z.sourceType,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),placeholderText:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),value:e(p,r),onChange:g,options:r}),i().createElement($.Q,{label:o.Z.currency,direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:K.selector.maxHeight,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardCurrencyToggleLabel),value:e(s,u.m),onChange:m,id:"currency-units-selector",options:u.m.map((e=>({label:t.formatMessage(e.label,{units:e.value}),value:e.value})))}))))))}}const te=(0,m.X1)((()=>({}))),re=(0,c.ZP)((0,l.connect)(te,{})(ee));var ae=r(47242);class se extends i().Component{render(){const{intl:e}=this.props,t=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};return i().createElement(_.Consumer,null,(({handleSignChange:r,handleMarkupDiscountChange:s,markup:n,isDiscount:c})=>{const l=(p=n,(0,W.WW)(p)?(0,W.cR)(p)>10?o.Z.markupOrDiscountTooLong:void 0:o.Z.markupOrDiscountNumber);var p;const u=l?"error":"default";return i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:K.titleWithLearnMore},e.formatMessage(o.Z.costCalculationsOptional)),i().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsMarkup),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.markupOrDiscount)),i().createElement(a.TextContent,null,i().createElement(a.Text,null,e.formatMessage(o.Z.markupOrDiscountModalDesc)))),i().createElement(a.StackItem,null,i().createElement(a.Flex,{style:ae.W.markupRadioContainer},i().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},i().createElement(a.FlexItem,null,i().createElement(a.Radio,{isChecked:!c,name:"discount",label:e.formatMessage(o.Z.markupPlus),"aria-label":e.formatMessage(o.Z.markupPlus),id:"markup",value:"false",onChange:r,style:ae.W.markupRadio}),i().createElement(a.Radio,{isChecked:c,name:"discount",label:e.formatMessage(o.Z.discountMinus),"aria-label":e.formatMessage(o.Z.discountMinus),id:"discount",value:"true",onChange:r}))),i().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},i().createElement(a.FlexItem,null,i().createElement(U.l,null,i().createElement(a.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:l?e.formatMessage(l):void 0,style:ae.W.rateContainer,validated:u},i().createElement(a.InputGroup,null,i().createElement(a.InputGroupText,{style:ae.W.sign},c?e.formatMessage(o.Z.discountMinus):e.formatMessage(o.Z.markupPlus)),i().createElement(a.TextInput,{"aria-label":e.formatMessage(o.Z.rate),id:"markup-input-box",isRequired:!0,onKeyDown:t,onChange:s,placeholder:"0",style:ae.W.inputField,type:"text",validated:u,value:n}),i().createElement(a.InputGroupText,{style:ae.W.percent},e.formatMessage(o.Z.percentSymbol))))))))),i().createElement(a.StackItem,null,i().createElement("div",{style:ae.W.exampleMargin},i().createElement(a.TextContent,null,i().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(o.Z.examplesTitle))),i().createElement(a.List,null,i().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesNoAdjust)),i().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesDoubleMarkup)),i().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceZero)),i().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceSeventyfive))))))}))}}const oe=(0,m.X1)((()=>({}))),ne=(0,c.ZP)((0,l.connect)(oe,{})(se));var ie=r(11040),ce=r(50250);const le=(0,c.ZP)((({cancel:e,currencyUnits:t,intl:r=F.N,metricsHash:s,submitRate:n})=>{const{tiers:c}=i().useContext(_),l=(0,ce.bF)(s,void 0,c),p=i().useMemo((()=>(0,ce.Cw)(l)),[l.errors,l.rateKind]);return i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,{component:a.TextVariants.h3},r.formatMessage(o.Z.costModelsWizardPriceListMetric)))),i().createElement(a.StackItem,null,i().createElement(a.Form,null,i().createElement(ce.HJ,{currencyUnits:t,metricsHash:s,rateFormData:l}))),i().createElement(a.StackItem,null,i().createElement(a.ActionGroup,null,i().createElement(a.Button,{variant:a.ButtonVariant.primary,isDisabled:!p,onClick:()=>n(l)},r.formatMessage(o.Z.createRate)),i().createElement(a.Button,{variant:a.ButtonVariant.link,onClick:e},r.formatMessage(o.Z.cancel)))))}));var pe=r(7081),ue=r(42901),me=r(94985);const de=(0,c.ZP)((({id:e,intl:t,itemCount:r,perPage:s,page:n,variant:c,onPerPageSelect:l,onSetPage:p})=>i().createElement(a.Toolbar,{id:e},i().createElement(a.ToolbarContent,null,i().createElement(a.ToolbarItem,{variant:"pagination"},i().createElement(a.Pagination,{variant:c,itemCount:r,perPage:s,page:n,onSetPage:p,onPerPageSelect:l,titles:{paginationTitle:t.formatMessage(o.Z.paginationTitle,{title:t.formatMessage(o.Z.createCostModelTitle),placement:"bottom"})}}))))));var he=r(14106),ge=r(17031),ye=r(66094),be=r(66474),fe=r(23686);class Te extends i().Component{constructor(){super(...arguments),this.defaultState={metrics:[],measurements:[],sortBy:{index:0,direction:I.SortByDirection.asc}},this.state=Object.assign({},this.defaultState)}render(){const{addRateAction:e,deleteRateAction:t,intl:r,items:s,metricsHash:n}=this.props,c=e=>{const t=e.replace(/ /g,"_").toLowerCase();return r.formatMessage(o.Z.metricValues,{value:t})||e},l=e=>r.formatMessage(o.Z.measurementValues,{value:e.toLowerCase().replace("-","_"),count:1})||e,p=Object.keys(n).map((e=>({label:c(e),value:e}))),u=p.reduce(((e,t)=>{const r=Object.keys(n[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:l(e),value:e})));return[...e,...r]}),[]),m=()=>i().createElement(a.Bullseye,null,i().createElement(a.EmptyState,null,i().createElement(a.EmptyStateIcon,{icon:pe.wl}),i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(o.Z.costModelsWizardEmptyStateTitle)),i().createElement(a.EmptyStateBody,null,r.formatMessage(o.Z.costModelsWizardEmptyStateSkipStep,{value:i().createElement("strong",null,r.formatMessage(o.Z.next))}),i().createElement("br",null),r.formatMessage(o.Z.costModelsWizardEmptyStateOtherTime))));return i().createElement(_.Consumer,null,(({priceListPagination:n})=>i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,null,r.formatMessage(o.Z.costModelsWizardSubTitleTable)))),i().createElement(a.StackItem,null,i().createElement(me.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:c,setSearch:l,onRemove:d,onSelect:h,onClearAll:g})=>{const y=(n.page-1)*n.perPage,b=n.page*n.perPage,f=s.map(((e,t)=>Object.assign(Object.assign({},e),{stateIndex:t}))).filter((e=>0===c.metrics.length||c.metrics.includes(e.metric.label_metric))).filter((e=>0===c.measurements.length||c.measurements.includes(e.metric.label_measurement))).sort(((e,t)=>{const a=1===this.state.sortBy.index?e=>{return t=e.metric.label_metric,r.formatMessage(o.Z.metricValues,{value:t})||t;var t}:2===this.state.sortBy.index?e=>{return t=e.metric.label_measurement,a=e.metric.label_measurement_unit,a=r.formatMessage(o.Z.units,{units:(0,W.ZV)(a)})||a,r.formatMessage(o.Z.measurementValues,{value:t.toLowerCase().replace("-","_"),units:a,count:2});var t,a}:()=>"";return(0,ge.tT)(e,t,this.state.sortBy.direction,a)})),T=f.slice(y,b);return i().createElement(i().Fragment,null,i().createElement(he.Q,{primary:i().createElement(fe.J,{isDisabled:0===s.length,primary:c.primary,setPrimary:e=>l({primary:e}),options:[{label:r.formatMessage(o.Z.metric),value:"metrics"},{label:r.formatMessage(o.Z.measurement),value:"measurements"}]}),selected:c.primary,secondaries:[{component:i().createElement(be.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMeasurementPlaceHolder),selections:c.measurements,setSelections:e=>h("measurements",e),options:u}),name:"measurements",onRemove:d,filters:c.measurements},{component:i().createElement(be.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMetricPlaceHolder),selections:c.metrics,setSelections:e=>h("metrics",e),options:p}),name:"metrics",onRemove:d,filters:c.metrics}],button:i().createElement(a.Button,{onClick:e},r.formatMessage(o.Z.createRate)),onClear:g,pagination:i().createElement(a.Pagination,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"top"})}})}),0===T.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&i().createElement(a.Bullseye,null,i().createElement(ue.c,null)),0===T.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&i().createElement(m,null),T.length>0&&i().createElement(ye.y,{actions:[{title:r.formatMessage(o.Z.remove),onClick:(e,r,a)=>{t(a.data.stateIndex)}}],tiers:T,sortCallback:e=>{this.setState(Object.assign(Object.assign({},this.state),{sortBy:Object.assign({},e)}))}}),i().createElement(de,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}}))}))))))}}const ve=(0,l.connect)((0,m.X1)((e=>({metricsHash:O.qw.metrics(e)}))))((0,c.ZP)(Te)),Ee=()=>{const{currencyUnits:e,goToAddPL:t,metricsHash:r,tiers:a,submitTiers:s}=i().useContext(_),[o,n]=i().useState("table");return"table"===o?i().createElement(ve,{items:a,deleteRateAction:e=>{const r=[...a.slice(0,e),...a.slice(e+1)];s(r),0===r.length&&t(!0)},addRateAction:()=>{n("form"),t(!1)}}):"form"===o?i().createElement(le,{currencyUnits:e,metricsHash:r,submitRate:o=>{var i;i=(0,ce.Nl)(o,r,e),s([...a,i]),n("table"),t(!0)},cancel:()=>{n("table"),t(!0)}}):null};var Se=r(53086),Pe=r(64255);const Ce=(0,c.ZP)((({intl:e})=>i().createElement(_.Consumer,null,(({onClose:t,name:r})=>i().createElement(a.EmptyState,null,i().createElement(a.EmptyStateIcon,{icon:Se.xX,color:"green"}),i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o.Z.costModelsWizardReviewStatusTitle)),i().createElement(a.EmptyStateBody,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubTitle,{value:r})),i().createElement(a.EmptyStateSecondaryActions,null,i().createElement(a.Button,{variant:"link",onClick:t},e.formatMessage(o.Z.close)))))))),Ze=(0,m.X1)((()=>({}))),Me=(0,c.ZP)((0,l.connect)(Ze,{})((({intl:e})=>i().createElement(_.Consumer,null,(({checked:t,createError:r,currencyUnits:s,description:n,distribution:c,distributePlatformUnallocated:l,distributeWorkerUnallocated:p,isDiscount:u,markup:m,name:d,tiers:h,type:g})=>{const y=Object.keys(t).filter((e=>t[e].selected)).map((e=>t[e].meta));return i().createElement(i().Fragment,null,r&&i().createElement(a.Alert,{variant:"danger",title:`${r}`}),i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardStepsReview))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubDetails,{create:i().createElement("strong",null,e.formatMessage(o.Z.create)),back:i().createElement("strong",null,e.formatMessage(o.Z.back))})))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.TextList,{component:a.TextListVariants.dl},i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.names,{count:1})),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},d),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.description)),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},n),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.currency)),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.currencyOptions,{units:s})),"OCP"===g&&i().createElement(i().Fragment,null,i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.priceList)),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},h.length>0?i().createElement(ye.y,{tiers:h}):e.formatMessage(o.Z.costModelsWizardNoRatesAdded))),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsWizardReviewMarkDiscount)),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.percent,{value:u?"-"+m:m})),"OCP"===g&&i().createElement(i().Fragment,null,i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costDistribution)),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributionTypeDesc,{type:c})),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:l,type:"platform"})),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:p,type:"worker"}))),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsAssignSources,{count:2})," ",y.find((e=>Boolean(e.costmodel)))&&i().createElement(Pe.a,{text:e.formatMessage(o.Z.costModelsWizardWarningSources)})),i().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},y.map((e=>e.name)).join(", ")))))))}))))),Oe=()=>i().createElement(_.Consumer,null,(({createSuccess:e})=>e?i().createElement(Ce,null):i().createElement(Me,null)));var Re=r(261),Fe=r(89291),Ie=r(40120),ke=r(76889),De=r(80810);const je=({id:e,placeholder:t="",value:r,onChange:s,onSearch:o})=>i().createElement(a.InputGroup,null,i().createElement(a.TextInput,{value:r,placeholder:t,id:e,onChange:s,onKeyPress:e=>{"Enter"===e.key&&""!==r&&o(e)}}),i().createElement(a.InputGroupText,{style:{borderLeft:"0"}},i().createElement(De.W1,null))),Ae=(0,c.ZP)((({intl:e,filterInputProps:t,paginationProps:r,filter:s})=>i().createElement(a.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:s.onClearAll},i().createElement(a.ToolbarContent,null,i().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:i().createElement(ke.k1,null)},i().createElement(a.ToolbarItem,{variant:"search-filter"},i().createElement(a.ToolbarFilter,{deleteChip:s.onRemove,chips:s.query.name,categoryName:"name"},i().createElement(je,Object.assign({placeholder:e.formatMessage(o.Z.costModelsFilterPlaceholder)},t))))),i().createElement(a.ToolbarItem,{variant:"pagination"},i().createElement(a.Pagination,{isCompact:r.isCompact,itemCount:r.itemCount,page:r.page,perPage:r.perPage,onSetPage:r.onSetPage,onPerPageSelect:r.onPerPageSelect,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}})))))),xe=(0,c.ZP)((({intl:e})=>i().createElement(_.Consumer,null,(({checked:t,loading:r,onSourceSelect:s,sources:n,perPage:c,page:l,type:p,query:u,fetchSources:m,filterName:d,onFilterChange:h})=>{const g="Azure"===p?"Azure":p,y=n.length>0?n[0].meta.count:0;return i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardSourceTitle))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,null,e.formatMessage(o.Z.costModelsWizardSourceSubtitle)))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(o.Z.costModelsWizardSourceCaption,{value:p.toLowerCase()})))),i().createElement(a.StackItem,null,i().createElement(Ae,{filter:{onRemove:(e,t)=>m(g,(0,Ie.fg)(u)(e,t),1,c),onClearAll:()=>m(g,{},1,c),query:u},filterInputProps:{id:"assign-source-search-input",value:d,onChange:h,onSearch:()=>{m(g,(0,Ie.xZ)(u)("name",d),1,c)}},paginationProps:{isCompact:!0,itemCount:y,perPage:c,page:l,onSetPage:(e,t)=>{m(g,u,t,c)},onPerPageSelect:(e,t)=>m(g,u,1,t)}}),r?i().createElement(Re.G,null):i().createElement(I.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsWizardSourceTableAriaLabel),variant:I.TableVariant.compact},i().createElement(I.Thead,null,i().createElement(I.Tr,null,["",e.formatMessage(o.Z.names,{count:1}),e.formatMessage(o.Z.costModelsWizardSourceTableCostModel)].map(((e,t)=>i().createElement(I.Th,{key:t},e))))),i().createElement(I.Tbody,null,n.map(((r,n)=>i().createElement(I.Tr,{key:n},i().createElement(I.Td,null,i().createElement(a.Checkbox,{onChange:e=>{s(n,e)},id:r.name,key:r.name,"aria-label":e.formatMessage(o.Z.selectRow,{value:n}),isChecked:t[r.uuid]&&t[r.uuid].selected,isDisabled:Boolean(r.costmodel)})),i().createElement(I.Td,null,r.name," ",r.costmodel&&i().createElement(Pe.a,{key:`wrng-${r.name}`,text:e.formatMessage(o.Z.costModelsWizardSourceWarning,{costModel:r.costmodel})})),i().createElement(I.Td,null,r.costmodel?r.costmodel:"")))))),i().createElement(de,{itemCount:y,perPage:c,page:l,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.sources),placement:"bottom"})},onSetPage:(e,t)=>{m(g,u,t,c)},onPerPageSelect:(e,t)=>m(g,u,1,t)})))}))));class Ve extends i().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:r,perPage:a,fetchSources:s}=this.context;s("Azure"===e?"Azure":e,t,r,a)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?i().createElement(Re.G,null):this.context.apiError?i().createElement(Fe.Bu,{onRefresh:this.fetchData}):i().createElement(xe,null)}render(){return this.renderContent()}}Ve.contextType=_;const we=Ve,Le=(e,t="USD")=>{const r=(0,z.cloneDeep)(e);return r.map((e=>{if(e.tiered_rates)for(const r of e.tiered_rates)r.unit=t,r.usage.unit=t;if(e.tag_rates)for(const r of e.tag_rates.tag_values)r.unit=t})),r},ze=(0,c.ZP)((({intl:e,isProcess:t,isSuccess:r,closeFnc:s,isOpen:n,onMove:c,validators:l,steps:p,current:u=1,context:m,setError:d,setSuccess:h,updateCostModel:g})=>{const y=p.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:u>t})));y[u-1].enableNext=l[u-1](m);const b="OCP"===m.type&&2===u&&!l[u-1](m);return u===p.length&&""!==m.type&&(y[u-1].nextButtonText=e.formatMessage(o.Z.create)),n?i().createElement(a.Wizard,{isOpen:!0,title:e.formatMessage(o.Z.createCostModelTitle),description:e.formatMessage(o.Z.createCostModelDesc),steps:y,startAtStep:u,onNext:c,onBack:c,onGoToStep:c,onClose:s,footer:r||t||b?i().createElement("div",null):null,onSave:()=>{const{currency:e,description:t,distribution:r,distributePlatformUnallocated:a,distributeWorkerUnallocated:s,isDiscount:o,markup:n,name:i,type:c,tiers:l,sources:p}=m;(0,L.Rl)({name:i,source_type:c,currency:e,description:t,distribution_info:{distribution_type:r,platform_cost:a,worker_cost:s},rates:l,markup:{value:`${o?"-":""}${(0,W.E3)(n)}`,unit:"percent"},source_uuids:p.map((e=>e.uuid))}).then((()=>{h(),g()})).catch((e=>d((0,ie.L)(e))))}}):null}));class We extends i().Component{constructor(){super(...arguments),this.defaultState={apiError:null,checked:{},createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,h.tk)(),dataFetched:!1,dirtyName:!1,description:"",distribution:"cpu",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,filterName:"",isDialogOpen:!1,isDiscount:!1,loading:!1,markup:"0",name:"",page:1,perPage:10,priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},query:{},sources:[],step:1,tiers:[],total:0,type:""},this.state=Object.assign({},this.defaultState)}render(){const{metricsHash:e,intl:t}=this.props,r=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},s=i().createElement(a.Button,{key:"cancel",variant:"link",onClick:r},t.formatMessage(o.Z.createCostModelNoContinue)),n=i().createElement(a.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},this.defaultState))},t.formatMessage(o.Z.createCostModelExitYes));return i().createElement(_.Provider,{value:{apiError:this.state.apiError,checked:this.state.checked,clearQuery:()=>this.setState({query:{}}),createError:this.state.createError,createProcess:this.state.createProcess,createSuccess:this.state.createSuccess,currencyUnits:this.state.currencyUnits,description:this.state.description,dataFetched:this.state.dataFetched,dirtyName:this.state.dirtyName,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,error:this.state.error,filterName:this.state.filterName,fetchSources:(e,t,r,a)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:r,query:a})=>{const s=(t-1)*r,o=r,n=Object.keys(a).reduce(((e,t)=>e?`${e}&${t}=${a[t]}`:`${t}=${a[t]}`),"");return(0,B.s)(`type=${e}&limit=${o}&offset=${s}&${n}`).then((e=>{const t=e.data;return t.data.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),meta:t.meta})))}))})({type:e,query:t,page:r,perPage:a}).then((e=>this.setState({sources:e,query:t,page:r,perPage:a,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),handleDistributionChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distribution:r})},handleDistributePlatformUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributePlatformUnallocated:"true"===r})},handleDistributeWorkerUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributeWorkerUnallocated:"true"===r})},handleMarkupDiscountChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({markup:r})},handleSignChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({isDiscount:"true"===r})},isDiscount:this.state.isDiscount,loading:this.state.loading,metricsHash:e,onClose:()=>this.setState(Object.assign({},this.defaultState),this.props.closeWizard),onCurrencyChange:e=>this.setState({currencyUnits:e,tiers:Le(this.state.tiers,e)}),onDescChange:e=>this.setState({description:e}),onFilterChange:e=>this.setState({filterName:e}),onNameChange:e=>this.setState({name:e,dirtyName:!0}),onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),onSourceSelect:(e,t)=>{if(-1===e){const e=this.state.sources.map((e=>({[e.uuid]:{selected:t,meta:e}}))),r=Object.assign(Object.assign({},this.state.checked),e);return this.setState({checked:r})}const r=Object.assign(Object.assign({},this.state.checked),{[this.state.sources[e].uuid]:{selected:t,meta:this.state.sources[e]}});return this.setState({checked:r})},onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),page:this.state.page,priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},markup:this.state.markup,name:this.state.name,perPage:this.state.perPage,query:this.state.query,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),sources:this.state.sources,step:this.state.step,submitTiers:e=>{this.setState({tiers:e})},tiers:this.state.tiers,total:this.state.total,type:this.state.type}},i().createElement(ze,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},this.defaultState),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)}],Azure:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Oe,null)}],AWS:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Oe,null)}],GCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Oe,null)}],OCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.priceList),component:i().createElement(Ee,null)},{id:3,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:4,name:t.formatMessage(o.Z.costDistribution),component:i().createElement(H,null)},{id:5,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:6,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Oe,null)}]}[this.state.type],current:this.state.step,validators:Y[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,currency:this.state.currencyUnits,description:this.state.description,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,markup:`${this.state.isDiscount?"-":""}${this.state.markup}`,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:Object.keys(this.state.checked).map((e=>this.state.checked[e].meta))}}),i().createElement(a.Modal,{"aria-label":t.formatMessage(o.Z.createCostModelExit),isOpen:this.state.isDialogOpen,header:i().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},i().createElement(w.LP,{color:"orange"})," ",t.formatMessage(o.Z.createCostModelExit)),onClose:r,actions:[n,s],variant:"small"},t.formatMessage(o.Z.createCostModelConfirmMsg)))}}const Be=(0,l.connect)((0,m.X1)((e=>({metricsHash:O.qw.metrics(e)}))),{fetch:M.F0.fetchCostModels})((0,c.ZP)(We)),Ne=(0,c.ZP)((0,l.connect)((e=>({canWrite:R.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,r)=>{const{intl:s=F.N}=r,{canWrite:n}=e,{openWizard:c}=t;return{isDisabled:!n,tooltip:s.formatMessage(o.Z.costModelsReadOnly),children:i().createElement(a.Button,{isDisabled:!n,onClick:c},s.formatMessage(o.Z.costModelsWizardCreateCostModel))}}))(V.j)),_e=(0,l.connect)((e=>({isOpen:M.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:r}=e,{openWizard:a,closeWizard:s}=t;return{isOpen:r,openWizard:a,closeWizard:s}}))(Be);function Ue({head:e,body:t,sources:r}){return i().createElement(a.Stack,{hasGutter:!0},i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,null,e))),i().createElement(a.StackItem,null,i().createElement(a.TextContent,null,i().createElement(a.Text,null,t),i().createElement(a.TextList,{component:a.TextListVariants.ol},r.map((e=>i().createElement(a.TextListItem,{key:e},e)))))))}const Ke=(0,c.ZP)((0,l.connect)((e=>({isOpen:M.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:M.E6.deleteProcessing(e),deleteError:M.E6.deleteError(e),dialogData:M.E6.dialogData(e)})),(e=>({closeDialog:()=>e(M.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>M.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,r)=>{const{intl:s=F.N}=r,n=(c=e.isLoading,l=e.isOpen,p=e.deleteError,l?c?"loading":p?"failure":"open":"close");var c,l,p;const u=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,m=u?u.name:"",d=u?u.sources.map((e=>e.name)):[],h=u?u.uuid:"",g=function({status:e,deleteText:t,deleteAction:r,cancelText:s,cancelAction:o,sourcesNo:n}){let c=[];return"loading"===e&&(c=[i().createElement(a.Button,{key:"pending_delete",variant:a.ButtonVariant.danger,isDisabled:!0},t),i().createElement(a.Button,{key:"pending_cancel",variant:a.ButtonVariant.link,isDisabled:!0},s)]),["failure","open"].includes(e)&&n>0&&(c=[i().createElement(a.Button,{key:"sources_cancel",variant:a.ButtonVariant.link,onClick:o},s)]),["failure","open"].includes(e)&&0===n&&(c=[i().createElement(a.Button,{key:"delete",variant:a.ButtonVariant.danger,onClick:r},t),i().createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:o},s)]),c}({status:n,deleteText:s.formatMessage(o.Z.costModelsDelete),deleteAction:()=>t.deleteCostModel(h),cancelText:s.formatMessage(o.Z.cancel),cancelAction:t.closeDialog,sourcesNo:d.length}),y=function({status:e,sources:t,error:r,cannotDeleteTitle:s,cannotDeleteBody:o,canDeleteBody:n}){return"close"!==e&&t.length>0?i().createElement(Ue,{head:s,body:o,sources:t}):"close"!==e&&0===t.length?i().createElement(a.Stack,{hasGutter:!0},"failure"===e?i().createElement(a.StackItem,null,i().createElement(a.Alert,{variant:a.AlertVariant.danger,title:r})):null,i().createElement(a.StackItem,null,n)):void 0}({status:n,sources:d,error:e.deleteError,cannotDeleteTitle:s.formatMessage(o.Z.costModelsDeleteSource),cannotDeleteBody:s.formatMessage(o.Z.costModelsCanNotDelete,{name:m}),canDeleteBody:s.formatMessage(o.Z.costModelsCanDelete,{name:m})});return{actions:g,isOpen:"close"!==n,variant:a.ModalVariant.small,"aria-label":s.formatMessage(o.Z.costModelsDelete),title:s.formatMessage(o.Z.costModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:y}}))(a.Modal)),Ge=Ke;var qe=r(15984),He=r(39836),$e=r(91919);const Je=function(e){return i().createElement(a.EmptyState,{className:"pf-m-redhat-font"},i().createElement(a.EmptyStateIcon,{icon:e.icon}),i().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.title),i().createElement(a.EmptyStateBody,null,e.description),e.actions?e.actions:null)},Xe=(0,c.ZP)((({intl:e=F.N})=>i().createElement(Je,{title:e.formatMessage(o.Z.costModelsEmptyState),description:e.formatMessage(o.Z.costModelsEmptyStateDesc),icon:pe.wl,actions:i().createElement(i().Fragment,null,i().createElement(Ne,null),i().createElement("br",null),i().createElement("br",null),i().createElement("a",{href:e.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.costModelsEmptyStateLearnMore)))})));var Qe=r(68025);class Ye extends i().Component{constructor(){super(...arguments),this.defaultState={dialogSource:null,activeSortDirection:"asc",activeSortIndex:0},this.state=Object.assign({},this.defaultState)}render(){const{intl:e=F.N,canWrite:t,costData:r,openDeleteDialog:s,query:n,router:c,stateName:l}=this.props,p=function(e,t){let r=null;return"loading"===e&&(r=i().createElement(Re.G,null)),"empty"===e&&(r=i().createElement(Xe,null)),"no-match"===e&&(r=i().createElement(ue.c,null)),"failure"===e&&(r=i().createElement(qe.Z,null)),null!==r?[{heightAuto:!0,cells:[{props:{colSpan:6},title:i().createElement(a.Bullseye,null," ",r," ")}]}]:t.map((e=>{const t=F.N.formatDate(e.updated_timestamp,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"short",timeZone:"UTC",timeZoneName:"short",year:"numeric"});return{cells:[{title:i().createElement(He.Link,{to:`${(0,Qe.dI)($e._.costModel.basePath)}/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),t],data:{costModel:e}}}))}(l,r),u=[Object.assign({title:e.formatMessage(o.Z.names,{count:1}),data:{orderName:"name"}},p.length&&{transforms:[I.sortable]}),{title:e.formatMessage(o.Z.description)},Object.assign({title:e.formatMessage(o.Z.sourceType),data:{orderName:"source_type"}},p.length&&{transforms:[I.sortable]}),{title:e.formatMessage(o.Z.costModelsAssignedSources)},Object.assign({title:e.formatMessage(o.Z.costModelsLastChange),data:{orderName:"updated_timestamp"}},p.length&&{transforms:[I.sortable]}),{title:"",props:{"aria-label":e.formatMessage(o.Z.costModelsActions)}}],m=function(e,t,r){return"success"!==e?[]:r.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(l,t,[{title:e.formatMessage(o.Z.delete),tooltip:e.formatMessage(o.Z.costModelsReadOnly),onClick:(e,t,r)=>{s(r.data)}}]),d=function(e,t,r){return function(a,s,o){const n=e[s]&&e[s].data?e[s].data.orderName:null;null!==n&&(o!==I.SortByDirection.asc?r.navigate(D(Object.assign(Object.assign({},t),{ordering:`-${n}`}))):r.navigate(D(Object.assign(Object.assign({},t),{ordering:n}))))}}(u,n,c),h=e=>({sortBy:{index:this.state.activeSortIndex,direction:this.state.activeSortDirection,defaultDirection:"asc"},onSort:(e,t,r)=>{this.setState(Object.assign(Object.assign({},this.state),{activeSortDirection:r,activeSortIndex:t})),d(e,t,r)},columnIndex:e});return i().createElement(I.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsTableAriaLabel),gridBreakPoint:I.TableGridBreakpoint.grid2xl,variant:I.TableVariant.compact},i().createElement(I.Thead,null,i().createElement(I.Tr,null,u.map(((e,t)=>i().createElement(I.Th,{key:t,sort:e.transforms?h(t):void 0},e.title))),i().createElement(I.Th,null))),i().createElement(I.Tbody,null,p.map(((e,t)=>i().createElement(I.Tr,{key:t},e.cells.map(((e,t)=>i().createElement(I.Td,{colSpan:e.props?e.props.colSpan:void 0,key:t},e.title?e.title:e))),!e.heightAuto&&i().createElement(I.Td,{isActionCell:!0},i().createElement(I.ActionsColumn,{items:m.map((r=>Object.assign(Object.assign({},r),{onClick:a=>r.onClick(a,t,e,null)})))})))))))}}const et=(0,m.X1)((e=>({canWrite:R.c5.isCostModelWritePermission(e),query:M.E6.query(e),costData:M.E6.costModels(e),stateName:M.E6.stateName(e)}))),tt=(0,l.connect)(et,(e=>{const t=M.F0.setCostModelDialog;return{openDeleteDialog:r=>e(t({name:"deleteCostModel",isOpen:!0,meta:r}))}}))(Ye),rt=(0,c.ZP)((0,g.E)(tt)),at=({placeholder:e="",value:t,onChange:r,onKeyPress:s})=>i().createElement(a.InputGroup,null,i().createElement(a.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==t&&s(e)}}),i().createElement(a.InputGroupText,{style:{borderLeft:"0"}},i().createElement(De.W1,null))),st=(e,t,r,a)=>s=>{if("Enter"===s.key&&""!==a.value){const s=a.value;e.navigate(D(Object.assign(Object.assign({},r),{[t]:r[t]?`${r[t]},${s}`:s}))),a.setValue("")}},ot=(e,t,r)=>(a,s)=>{const o=r[t]?r[t].split(",").filter((e=>e!==s)):null;e.navigate(D(Object.assign(Object.assign({},r),{[t]:null===o||0===o.length?null:o.join(",")})))},nt=(e,t,r)=>()=>{e.navigate(D(Object.assign(Object.assign({},t),{[r]:null})))},it=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=F.N,router:s}=r,{filterType:n,query:i}=e,c=i.description?i.description.split(","):[];return{categoryName:a.formatMessage(o.Z.description),chips:c,deleteChip:ot(s,"description",Object.assign(Object.assign({},k),i)),deleteChipGroup:nt(s,Object.assign(Object.assign({},k),i),"description"),filterType:n,intl:a,query:i,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:c,query:l,router:p})=>{const[u,m]=i().useState(""),d="description"===r?i().createElement(at,{placeholder:s.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:st(p,"description",Object.assign(Object.assign({},k),l),{value:u,setValue:m})}):null;return i().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:c},d)})),ct=(0,c.ZP)((0,g.E)(it)),lt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=F.N,router:s}=r,{filterType:n,query:i}=e,c=i.name?i.name.split(","):[];return{deleteChip:ot(s,"name",Object.assign(Object.assign({},k),i)),deleteChipGroup:nt(s,Object.assign(Object.assign({},k),i),"name"),filterType:n,chips:c,categoryName:a.formatMessage(o.Z.names,{count:1}),intl:a,query:i,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:c,query:l,router:p})=>{const[u,m]=i().useState(""),d="name"===r?i().createElement(at,{placeholder:s.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:st(p,"name",Object.assign(Object.assign({},k),l),{value:u,setValue:m})}):null;return i().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:c},d)})),pt=(0,c.ZP)((0,g.E)(lt)),ut=(e,t)=>()=>{t(!1);const r=document.getElementById(e);r&&r.focus()},mt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=F.N,router:s}=r,{filterType:n,query:i}=e;return{chips:i.source_type?[i.source_type]:[],categoryName:a.formatMessage(o.Z.sourceType),deleteChip:nt(s,Object.assign(Object.assign({},k),i),"source_type"),filterType:n,intl:a,query:i,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:c,query:l,router:p})=>{const[u,m]=i().useState(!1),d="source-type-filter",h=e=>p.navigate(D(Object.assign(Object.assign(Object.assign({},k),l),{source_type:e}))),g="sourceType"===r?i().createElement(a.Dropdown,{onSelect:ut(d,m),isOpen:u,toggle:i().createElement(a.DropdownToggle,{onToggle:e=>{m(e)},id:d},s.formatMessage(o.Z.filterByPlaceholder,{value:"source_type"})),dropdownItems:[i().createElement(a.DropdownItem,{key:"aws",component:"button",onClick:()=>h("aws")},s.formatMessage(o.Z.aws)),i().createElement(a.DropdownItem,{key:"azure",component:"button",onClick:()=>h("azure")},s.formatMessage(o.Z.azure)),i().createElement(a.DropdownItem,{key:"ocp",component:"button",onClick:()=>h("ocp")},s.formatMessage(o.Z.openShift))]}):null;return i().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:c},g)})),dt=(0,c.ZP)((0,g.E)(mt)),ht=(0,g.E)((0,l.connect)((e=>({query:M.E6.query(e)})),void 0,((e,t,r)=>{const{children:a,router:s}=r,{query:o}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>s.navigate(D(Object.assign(Object.assign(Object.assign({},k),o),{description:null,source_type:null,name:null}))),children:a}}))(a.Toolbar)),gt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(M.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,r)=>{const{intl:a=F.N}=r,{filterType:s}=e;return{filterType:s,intl:a,updateFilterType:t.updateFilterType}}))((({filterType:e,intl:t,updateFilterType:r})=>{const[s,n]=i().useState(!1),c=[i().createElement(a.SelectOption,{key:"name",value:"name"},t.formatMessage(o.Z.names,{count:1})),i().createElement(a.SelectOption,{key:"description",value:"description"},t.formatMessage(o.Z.description)),i().createElement(a.SelectOption,{key:"sourceType",value:"sourceType"},t.formatMessage(o.Z.sourceType))];return i().createElement(a.Select,{isOpen:s,onSelect:(e,t)=>{r(t),n(!1)},onToggle:n,selections:e,toggleIcon:i().createElement(ke.k1,null),variant:a.SelectVariant.single},c)})),yt=(0,c.ZP)((0,g.E)(gt)),bt=(0,g.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:a}=M.E6.pagination(e);return{count:t,page:r,perPage:a,query:M.E6.query(e)}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:i,query:c}=e;return{isCompact:!0,itemCount:o,page:n,perPage:i,variant:a.PaginationVariant.top,onSetPage:(e,t,r)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{offset:j(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{limit:t,offset:0})))}}}))(a.Pagination)),ft=()=>i().createElement(ht,null,i().createElement(a.ToolbarContent,null,i().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:i().createElement(ke.k1,null)},i().createElement(a.ToolbarGroup,{variant:"filter-group"},i().createElement(a.ToolbarItem,null,i().createElement(yt,null)),i().createElement(pt,null),i().createElement(ct,null),i().createElement(dt,null))),i().createElement(a.ToolbarGroup,null,i().createElement(Ne,null)),i().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},i().createElement(bt,null))));class Tt extends i().Component{componentDidMount(){const{getCostModelsData:e,getMetricsData:t,getRbacData:r,search:a}=this.props;e(a),t(),r()}componentDidUpdate(e){const{getCostModelsData:t,search:r}=this.props;e.search!==r&&t(r)}render(){const{intl:e}=this.props;return i().createElement(a.PageSection,{isFilled:!0},i().createElement("div",{style:x.descContainer},e.formatMessage(o.Z.costModelsDesc,{learnMore:i().createElement("a",{href:e.formatMessage(o.Z.docsUsingCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))})),i().createElement(_e,null),i().createElement(Ge,null),i().createElement(ft,null),i().createElement(rt,null),i().createElement(A,null))}}const vt=(0,g.E)((0,c.ZP)((0,l.connect)(((e,t)=>{const r=(0,Z.parse)(t.router.location.search,{ignoreQueryPrefix:!0}),a=Object.assign(Object.assign({},r),{tabKey:void 0});return{search:(0,Z.stringify)(a,{encode:!1,indices:!1})}}),(e=>({getCostModelsData:t=>M.F0.fetchCostModels(t)(e),getRbacData:()=>R.O9.fetchRbac()(e),getMetricsData:()=>O.Wg.fetchMetrics()(e)})))(Tt)));var Et=r(79112),St=r(6456),Pt=r(52471),Ct=r(47947),Zt=r(38935),Mt=r(44348),Ot=r(37269),Rt=r(19727),Ft=r(22369),It=r(15920),kt=r(9475),Dt=r(69511),jt=r(14483);const At={action:{marginLeft:f.ZP.var},descContainer:{backgroundColor:y.ZP.value,paddingLeft:f.ZP.value,paddingRight:f.ZP.value,paddingTop:f.ZP.value},pagination:{backgroundColor:y.ZP.value,paddingBottom:f.ZP.value,paddingTop:f.ZP.value}};var xt=r(90569),Vt=r(90302);class wt extends i().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{intl:e,isAllSelected:t,report:r,selectedItems:s}=this.props;if(!r)return;const n=[],c=(0,Dt.c)({report:r,idKey:"project"}),l=[{name:""},Object.assign({orderBy:"name",name:e.formatMessage(o.Z.detailsResourceNames,{value:"name"})},c.length&&{isSortable:!0}),Object.assign({orderBy:"status",name:e.formatMessage(o.Z.detailsResourceNames,{value:"status"})},c.length&&{isSortable:!0}),Object.assign(Object.assign({orderBy:"source_type",name:e.formatMessage(o.Z.sourceType)},c.length&&{isSortable:!0}),{style:Vt.W.lastItemColumn})];c.map((r=>{const c=r&&null!==r.label?r.label:"";n.push({cells:[{},{value:c},{value:i().createElement(a.Label,{variant:"outline",color:"green"},e.formatMessage(o.Z.enabled))},{value:"source type",style:Vt.W.lastItem}],item:r,selected:t||s&&void 0!==s.find((e=>e.id===r.id))})}));const p=l.filter((e=>!e.hidden)),u=n.map((e=>{var t=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:p,rows:u})}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t,selectedItems:r}=this.props,a=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")===a&&e.selectedItems===r||this.initDatum()}render(){const{isLoading:e,onSelected:t,onSort:r,selectedItems:a}=this.props,{columns:s,rows:o}=this.state;return i().createElement(xt.w,{columns:s,isLoading:e,onSelected:t,onSort:r,rows:o,selectedItems:a})}}const Lt=(0,c.ZP)((0,g.E)(wt));var zt=r(36116),Wt=r(7893);class Bt extends i().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getTagActions=()=>{const{intl:e,onDisableTags:t,onEnableTags:r,selectedItems:s}=this.props;return i().createElement(i().Fragment,null,i().createElement(a.Button,{isDisabled:0===s.length,key:"save",onClick:r,variant:a.ButtonVariant.primary},e.formatMessage(o.Z.enableTags)),i().createElement(a.Button,{isDisabled:0===s.length,key:"reset",onClick:t,style:At.action,variant:a.ButtonVariant.secondary},e.formatMessage(o.Z.disableTags)))},this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(o.Z.filterByValues,{value:"name"}),key:"name"},{name:e.formatMessage(o.Z.filterByValues,{value:"status"}),key:"status"},{name:e.formatMessage(o.Z.filterByValues,{value:"source_type"}),key:"source_type"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:c,query:l,selectedItems:p}=this.props,{categoryOptions:u}=this.state;return i().createElement(Wt.k,{categoryOptions:u,isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:a,onBulkSelected:s,onFilterAdded:o,onFilterRemoved:n,pagination:c,query:l,resourcePathsType:zt.C.ocp,selectedItems:p,showBulkSelect:!0,showFilter:!0,tagActions:this.getTagActions()})}}const Nt=(0,m.X1)(((e,t)=>({}))),_t=(0,l.connect)(Nt,{})(Bt),Ut=(0,c.ZP)(_t),Kt={filter:{limit:10,offset:0},filter_by:{},exclude:{},group_by:{project:"*"},order_by:{cost:"desc"}},Gt=[{label:o.Z.monthOverMonthChange,value:"monthOverMonth"},{description:o.Z.ocpDetailsInfrastructureCostDesc,label:o.Z.ocpDetailsInfrastructureCost,value:"infrastructure",hidden:!0},{description:o.Z.ocpDetailsSupplementaryCostDesc,label:o.Z.ocpDetailsSupplementaryCost,value:"supplementary",hidden:!0}],qt=St.C.cost,Ht=St.K.ocp;class $t extends i().Component{constructor(e,t){super(e,t),this.defaultState={columns:[],hiddenColumns:(0,Mt.Y)(Gt),isAllSelected:!1,rows:[],selectedItems:[]},this.state=Object.assign({},this.defaultState),this.getComputedItems=()=>{const{query:e,report:t}=this.props,r=(0,kt.K)(e.group_by),a=(0,Ot.qV)(e);return(0,Dt.c)({report:t,idKey:a||r})},this.getPagination=(e=!1,t=!1)=>{const{intl:r,query:s,report:n,router:c}=this.props,l=n&&n.meta?n.meta.count:0,p=n&&n.meta&&n.meta.filter&&n.meta.filter.limit?n.meta.filter.limit:Kt.filter.limit,u=n&&n.meta&&n.meta.filter&&n.meta.filter.offset?n.meta.filter.offset:Kt.filter.offset,m=Math.trunc(u/p+1);return i().createElement(a.Pagination,{isCompact:!t,isDisabled:e,itemCount:l,onPerPageSelect:(e,t)=>(0,Rt.Lk)(s,c,t),onSetPage:(e,t)=>(0,Rt.F4)(s,c,n,t),page:m,perPage:p,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.openShift),placement:t?"bottom":"top"})},variant:t?a.PaginationVariant.bottom:a.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},this.getTable=()=>{const{query:e,report:t,reportFetchStatus:r,reportQueryString:a,router:s}=this.props,{hiddenColumns:o,isAllSelected:n,selectedItems:c}=this.state,l=(0,kt.K)(e.group_by),p=(0,Ot.qV)(e);return i().createElement(Lt,{groupBy:p?`${jt.P}${p}`:l,groupByTagKey:p,hiddenColumns:o,isAllSelected:n,isLoading:r===m.iF.inProgress,onSelected:this.handleSelected,onSort:(t,r)=>(0,Rt.K8)(e,s,t,r),report:t,reportQueryString:a,selectedItems:c})},this.getToolbar=e=>{const{query:t,report:r,router:a}=this.props,{isAllSelected:s,selectedItems:o}=this.state,n=0===e.length,c=r&&r.meta?r.meta.count:0;return i().createElement(Ut,{isAllSelected:s,isDisabled:n,itemsPerPage:e.length,itemsTotal:c,onBulkSelected:this.handleBulkSelected,onDisableTags:this.handleOnDisableTags,onEnableTags:this.handleOnEnableTags,onFilterAdded:e=>(0,Rt.JA)(t,a,e),onFilterRemoved:e=>(0,Rt.vI)(t,a,e),pagination:this.getPagination(n),query:t,selectedItems:o})},this.handleBulkSelected=e=>{const{isAllSelected:t}=this.state;"none"===e?this.setState({isAllSelected:!1,selectedItems:[]}):"page"===e?this.setState({isAllSelected:!1,selectedItems:this.getComputedItems()}):"all"===e&&this.setState({isAllSelected:!t,selectedItems:[]})},this.handleSelected=(e,t=!1)=>{const{isAllSelected:r,selectedItems:a}=this.state;let s=[...r?this.getComputedItems():a];e&&e.length>0&&(t?e.map((e=>s.push(e))):e.map((e=>{s=s.filter((t=>t.id!==e.id))}))),this.setState({isAllSelected:!1,selectedItems:s})},this.handleOnDisableTags=()=>{},this.handleOnEnableTags=()=>{},this.updateReport=()=>{const{fetchReport:e,reportQueryString:t}=this.props;e(Ht,qt,t)},this.handleBulkSelected=this.handleBulkSelected.bind(this),this.handleSelected=this.handleSelected.bind(this)}componentDidMount(){this.updateReport()}componentDidUpdate(e,t){const{report:r,reportError:a,reportQueryString:s,router:o}=this.props,{selectedItems:n}=this.state,i=e.reportQueryString!==s,c=!r&&!a,l=!o.location.search,p=t.selectedItems!==n;(i||c||l||p)&&this.updateReport()}render(){const{intl:e,reportError:t,reportFetchStatus:r}=this.props,s=this.getComputedItems(),n=0===s.length,c=e.formatMessage(o.Z.ocpDetailsTitle);return t?i().createElement(Ct.W,{title:c}):i().createElement(a.PageSection,{isFilled:!0},i().createElement("div",{style:At.descContainer},e.formatMessage(o.Z.tagDesc,{learnMore:i().createElement("a",{href:e.formatMessage(o.Z.docsConfigTags),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))})),this.getToolbar(s),r===m.iF.inProgress?i().createElement(Pt.g,null):i().createElement(i().Fragment,null,this.getTable(),i().createElement("div",{style:At.pagination},this.getPagination(n,!0))))}}const Jt=(0,m.X1)(((e,{router:t})=>{const r=(0,Et.mB)(t.location.search),a=r.group_by?(0,Ot.VL)(r):(0,Ot.VL)(Kt),s=Ft.iJ.selectIsCostDistributionFeatureEnabled(e),o="project"===a&&s?(0,h.vn)():void 0,n=(0,h.zC)(),i=Object.assign(Object.assign(Object.assign({},Kt),o===Zt.Qf.distributed&&{order_by:{distributed_cost:"desc"}}),r),c={category:i.category,currency:n,delta:o===Zt.Qf.distributed?"distributed_cost":"cost",exclude:i.exclude,filter:Object.assign(Object.assign({},i.filter),{resolution:"monthly",time_scope_units:"month",time_scope_value:-1}),filter_by:i.filter_by,group_by:i.group_by,order_by:i.order_by},l=(0,Et.pm)(c);return{query:i,report:It.ZV.selectReport(e,Ht,qt,l),reportError:It.ZV.selectReportError(e,Ht,qt,l),reportFetchStatus:It.ZV.selectReportFetchStatus(e,Ht,qt,l),reportQueryString:l}})),Xt={fetchReport:It.nx.fetchReport},Qt=(0,c.ZP)((0,g.E)((0,l.connect)(Jt,Xt)($t))),Yt={header:{backgroundColor:y.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},tabs:{backgroundColor:y.ZP.var,paddingTop:b.ZP.var}};var er;!function(e){e.costModels="cost-models",e.calculations="calculations",e.tags="tags"}(er||(er={}));const tr=e=>{switch(e){case er.costModels:return"cost-models";case er.calculations:return"calculations";case er.tags:return"tags"}};class rr extends i().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:i().createRef(),tab:er.costModels},{contentRef:i().createRef(),tab:er.calculations},{contentRef:i().createRef(),tab:er.tags}],this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${(0,s.IV)(e)}`},this.getTab=(e,t,r)=>i().createElement(a.Tab,{eventKey:r,key:`${tr(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:i().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>i().createElement(a.TabContent,{eventKey:t,key:`${tr(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{activeTabKey:r}=this.state,a=i().createElement(i().Fragment,null);if(r!==t)return a;const s=tr(e);return s===er.costModels?i().createElement(vt,null):s===er.calculations?i().createElement(C,null):s===er.tags?i().createElement(Qt,null):a},this.getTabs=e=>{const{activeTabKey:t}=this.state;return i().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return e===er.costModels?t.formatMessage(o.Z.costModels):e===er.calculations?t.formatMessage(o.Z.currencyCalcuations):e===er.tags?t.formatMessage(o.Z.tagLabels):void 0},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e})}render(){const{intl:e}=this.props,t=this.getAvailableTabs(),r=e.formatMessage(o.Z.settingsTitle);return i().createElement("div",{className:"tabsOverride"},i().createElement("header",{style:Yt.header},i().createElement("div",{style:Yt.headerContent},i().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},r)),i().createElement("div",{style:Yt.tabs},this.getTabs(t))),i().createElement("div",null,this.getTabContent(t)))}}const ar=(0,m.X1)(((e,{router:t})=>{const r=(0,s.mB)(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0;return{query:Object.assign({},r),tabKey:a}})),sr=(0,c.ZP)((0,g.E)((0,l.connect)(ar,{})(rr)))},83819:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),i=r.n(n),c=r(7081),l=r(97027),p=r(74806);class u extends i().Component{render(){const{intl:e,showReload:t=!0}=this.props;return i().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(a.EmptyStateIcon,{icon:c.wl}),i().createElement(a.Title,{headingLevel:"h5",size:a.TitleSizes.lg},e.formatMessage(l.Z.noDataStateTitle)),i().createElement(a.EmptyStateBody,null,e.formatMessage(l.Z.noDataStateDesc)),t&&i().createElement(a.Button,{variant:"primary",onClick:()=>window.location.reload()},e.formatMessage(l.Z.noDataStateRefresh)))}}const m=(0,p.ZP)(u),d=({showReload:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(s.Z,null,i().createElement(o.Z,{title:t})),i().createElement(a.PageSection,null,i().createElement(m,{showReload:e})))},72483:(e,t,r)=>{r.d(t,{Y:()=>u});var a=r(90154),s=r(97027),o=r(92950),n=r.n(o),i=r(74806);const c=r(80794),l=(0,i.ZP)((({className:e,intl:t})=>n().createElement("img",{className:`optimization-icon ${e}`,src:c,alt:t.formatMessage(s.Z.optimizations),"aria-hidden":"true"})));class p extends n().Component{render(){const{intl:e}=this.props;return n().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},n().createElement(a.EmptyStateIcon,{icon:l}),n().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes.lg},e.formatMessage(s.Z.noOptimizationsTitle)),n().createElement(a.EmptyStateBody,null,e.formatMessage(s.Z.noOptimizationsDesc)))}}const u=(0,i.ZP)(p)},2985:(e,t,r)=>{r.d(t,{L:()=>v});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),i=r.n(n),c=r(15265),l=r(7081),p=r(1326),u=r(97027),m=r(74806);const d=r(84735),h=(0,m.ZP)((({className:e,intl:t})=>i().createElement("img",{className:`cost-icon ${e}`,src:d,alt:t.formatMessage(u.Z.costManagement),"aria-hidden":"true"})));var g=r(68025),y=r(98499);const b={iconSpacer:{marginLeft:r(43789).ZP.value},viewSources:{marginTop:y.ZP.value}};class f extends i().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{intl:r}=this.props;return i().createElement("a",{href:r.formatMessage(t),rel:"noreferrer",target:"_blank"},r.formatMessage(e),i().createElement("span",{style:b.iconSpacer},i().createElement(c.LA,null)))},this.getRouteToSources=()=>`${(0,g.IG)()}/settings/sources`}render(){const{intl:e,providerType:t}=this.props;let r,s,o,n=u.Z.noProvidersStateOverviewDesc,c=u.Z.noProvidersStateOverviewTitle;switch(t){case p.l.aws:n=u.Z.noProvidersStateAwsDesc,c=u.Z.noProvidersStateAwsTitle;break;case p.l.azure:n=u.Z.noProvidersStateAzureDesc,c=u.Z.noProvidersStateAzureTitle;break;case p.l.gcp:n=u.Z.noProvidersStateGcpDesc,c=u.Z.noProvidersStateGcpTitle;break;case p.l.ibm:n=u.Z.noProvidersStateIbmDesc,c=u.Z.noProvidersStateIbmTitle;break;case p.l.ocp:n=u.Z.noProvidersStateOcpDesc,r=u.Z.docsAddOcpSources,o=u.Z.noProvidersStateOcpAddSources,c=u.Z.noProvidersStateOcpTitle;break;default:s=h}return i().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(a.EmptyStateIcon,{icon:s||l.wl}),i().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes.lg},e.formatMessage(c)),i().createElement(a.EmptyStateBody,null,e.formatMessage(n)),r&&o?i().createElement("div",{style:b.viewSources},this.getDocLink(o,r)):i().createElement(a.Button,{variant:"primary",component:"a",href:this.getRouteToSources()},e.formatMessage(u.Z.noProvidersStateGetStarted)))}}const T=(0,m.ZP)(f),v=({providerType:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(s.Z,null,i().createElement(o.Z,{title:t})),i().createElement(a.PageSection,null,i().createElement(T,{providerType:e})))},76930:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(97027),s=r(92950),o=r.n(s),n=r(22807);const i=[{label:a.Z.perspectiveValues,value:"aws"}],c=[{label:a.Z.perspectiveValues,value:"aws_ocp"}],l=[{label:a.Z.perspectiveValues,value:"azure"}],p=[{label:a.Z.perspectiveValues,value:"oci"}],u=[{label:a.Z.perspectiveValues,value:"azure_ocp"}],m=[{label:a.Z.perspectiveValues,value:"gcp"}],d=[{label:a.Z.perspectiveValues,value:"gcp_ocp"}],h=[{label:a.Z.perspectiveValues,value:"ibm"}],g=[{label:a.Z.perspectiveValues,value:"ibm_ocp"}],y=[{label:a.Z.perspectiveValues,value:"ocp_cloud"}],b=[{label:a.Z.perspectiveValues,value:"ocp"}],f=[{label:a.Z.perspectiveValues,value:"rhel"}],T=({hasAws:e,hasAwsOcp:t,hasAzure:r,hasAzureOcp:a,hasGcp:s,hasGcpOcp:o,hasIbm:n,hasIbmOcp:y,hasOci:b,isIbmFeatureEnabled:f})=>{const T=[];return e&&T.push(...i),t&&T.push(...c),s&&T.push(...m),o&&T.push(...d),n&&T.push(...h),y&&f&&T.push(...g),r&&T.push(...l),a&&T.push(...u),b&&T.push(...p),T},v=({currentItem:e,hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:i,hasGcpOcp:c,hasIbm:l,hasIbmOcp:p,hasOci:u,hasOcp:m,hasOcpCloud:d,hasRhel:h,isDisabled:g,isIbmFeatureEnabled:v,isInfrastructureTab:E,isRhelTab:S,onSelected:P})=>{const C=[];return void 0!==E||void 0!==S?E?(d&&C.push(...y),C.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:i,hasGcpOcp:c,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))):S?h&&C.push(...f):m&&C.push(...b):(m&&C.push(...b),d&&C.push(...y),h&&C.push(...f),C.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:i,hasGcpOcp:c,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))),o().createElement(n.o,{currentItem:e||C[0].value,isDisabled:g,onSelected:P,options:C})}},44348:(e,t,r)=>{r.d(t,{$:()=>h,Y:()=>p});var a=r(90154),s=r(97027),o=r(92950),n=r.n(o),i=r(74806),c=r(77760),l=r(1156);const p=e=>{const t=new Set;return e.map((e=>{e.hidden&&t.add(e.value)})),t};class u extends n().Component{constructor(e,t){super(e,t),this.defaultState={hiddenColumns:p(this.props.options)},this.state=Object.assign({},this.defaultState),this.getHidden=e=>{const{hiddenColumns:t}=this.state,r=new Set(t);return r.delete(e)||r.add(e),r},this.isHidden=e=>{const{hiddenColumns:t}=this.state;return t.has(e)},this.handleChange=(e,t)=>{const r=this.getHidden(t.target.id);this.setState({hiddenColumns:r})},this.handleClose=()=>{this.setState(Object.assign({},this.defaultState),(()=>{this.props.onClose(!1)}))},this.handleSave=()=>{const{hiddenColumns:e}=this.state;this.props.onSave(e),this.handleClose()},this.selectAll=()=>{this.setState({hiddenColumns:new Set})}}componentDidUpdate(e){const{options:t}=this.props;if(e.options!==t){const e=p(t);this.setState({hiddenColumns:e})}}render(){const{options:e,intl:t}=this.props;return n().createElement(a.Modal,{description:n().createElement(a.TextContent,null,n().createElement(a.Text,{component:a.TextVariants.p},t.formatMessage(s.Z.manageColumnsDesc)),n().createElement(a.Button,{isInline:!0,onClick:this.selectAll,variant:"link"},t.formatMessage(s.Z.selectAll))),isOpen:this.props.isOpen,onClose:this.handleClose,title:t.formatMessage(s.Z.manageColumnsTitle),variant:a.ModalVariant.medium,actions:[n().createElement(a.Button,{key:"save",onClick:this.handleSave,variant:a.ButtonVariant.link},t.formatMessage(s.Z.save)),n().createElement(a.Button,{key:"cancel",onClick:this.handleClose,variant:a.ButtonVariant.link},t.formatMessage(s.Z.cancel))]},n().createElement(a.DataList,{"aria-label":t.formatMessage(s.Z.manageColumnsAriaLabel),id:"table-column-management",isCompact:!0},e.map((e=>n().createElement(a.DataListItem,{"aria-labelledby":e.value,key:e.value},n().createElement(a.DataListItemRow,null,n().createElement(a.DataListCheck,{"aria-labelledby":`${e.value}Label`,isChecked:!this.isHidden(e.value),name:e.value,id:e.value,onChange:this.handleChange}),n().createElement(a.DataListItemCells,{dataListCells:[n().createElement(a.DataListCell,{id:`${e.value}Label`,key:"table-column-management-item1"},n().createElement("span",null,t.formatMessage(e.label))),n().createElement(a.DataListCell,{key:"table-column-management-item2"},e.description&&n().createElement("span",null,t.formatMessage(e.description)))]})))))))}}const m=(0,l.X1)((()=>({}))),d=(0,c.connect)(m,{})(u),h=(0,i.ZP)(d)},90302:(e,t,r)=>{r.d(t,{W:()=>c});var a=r(49382),s=r(12289),o=r(40794),n=r(11331),i=r(43789);const c={costColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end",paddingRight:0},defaultLabel:{minWidth:"50px"},emptyState:{backgroundColor:a.ZP.value,display:"flex",justifyContent:"center",paddingTop:n.ZP.value,height:"35vh",width:"100%"},infoArrow:{position:"relative"},infoArrowDesc:{bottom:i.ZP.value},infoDescription:{color:s.ZP.value,fontSize:o.ZP.value},lastItem:{textAlign:"right",paddingRight:"3.8rem"},lastItemColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end"},managedColumn:{textAlign:"right"},nameColumn:{width:"1%"}}},90569:(e,t,r)=>{r.d(t,{w:()=>y});var a=r(90154),s=r(52636),o=r(40227),n=r(79112),i=r(97027),c=r(92950),l=r.n(c),p=r(74806),u=r(42901),m=r(72483),d=r(5842),h=r(90302);class g extends l().Component{constructor(e){super(e),this.getEmptyState=()=>{const{intl:e,isOptimizations:t,router:r}=this.props,o=(0,n.mB)(r.location.search);if(o.filter_by)for(const e of Object.values(o.filter_by))if("*"!==e)return l().createElement(u.c,{filter:e,showMargin:!1});return t?l().createElement(m.Y,null):l().createElement(a.EmptyState,null,l().createElement(a.EmptyStateIcon,{icon:s.Xk}),l().createElement(a.EmptyStateBody,null,e.formatMessage(i.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,router:r}=this.props,a=t[e].orderBy,s=(0,n.mB)(r.location.search),o=s&&s.order_by&&s.order_by[a];return o?{index:e,direction:o}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSelect=(e,t,r)=>{const{onSelected:a,rows:s}=this.props;let o,n=[];-1===r?o=s.map((e=>(e.selected=t,e))):(o=[...s],o[r].selected=t,n=[o[r].item]),this.setState({rows:s},(()=>{a&&a(n,t)}))},this.handleOnSort=(e,t,r)=>{const{columns:a,onSort:s}=this.props;s&&s(a[t].orderBy,r===o.SortByDirection.asc)},this.handleOnRowClick=(e,t)=>{const{onRowClick:r,rows:a}=this.props;a.map((e=>e.selected=!1)),a[t].selected=!0,this.setState({rows:a},(()=>{r&&r(e,t)}))},this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isActionsCell:r=!1,isLoading:s,isOptimizations:n,rows:c}=this.props;return l().createElement(l().Fragment,null,l().createElement(o.TableComposable,{"aria-label":t.formatMessage(i.Z.dataTableAriaLabel),className:"tableOverride",gridBreakPoint:"grid-2xl",hasSelectableRowCaption:n,variant:o.TableVariant.compact},l().createElement(o.Thead,null,l().createElement(o.Tr,null,e.map(((e,t)=>l().createElement(o.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),l().createElement(o.Tbody,null,s?l().createElement(o.Tr,null,l().createElement(o.Td,{colSpan:100},l().createElement(a.Bullseye,null,l().createElement("div",{style:{textAlign:"center"}},l().createElement(a.Spinner,{size:"xl"}))))):c.map(((t,a)=>l().createElement(o.Tr,{isSelectable:n,isHoverable:n,isRowSelected:n&&t.selected,onRowClick:n?e=>this.handleOnRowClick(e,a):void 0,key:`row-${a}`},t.cells.map(((s,i)=>0!==i||n?l().createElement(o.Td,{dataLabel:e[i].name,key:`cell-${a}-${i}`,modifier:"nowrap",isActionCell:r&&i===t.cells.length-1,style:s.style},s.value):l().createElement(o.Td,{dataLabel:e[i].name,key:`cell-${i}-${a}`,modifier:"nowrap",select:{disable:t.selectionDisabled,isSelected:t.selected,onSelect:(e,t)=>this.handleOnSelect(e,t,a),rowIndex:a},style:s.style})))))))),0===c.length&&l().createElement("div",{style:h.W.emptyState},this.getEmptyState()))}}const y=(0,p.ZP)((0,d.E)(g))},15817:(e,t,r)=>{r.r(t),r.d(t,{default:()=>xt});var a=r(90154),s=r(91290),o=r(1326),n=r(39333),i=r(84717),c=r(37610),l=r(91577),p=r(97027),u=r(92950),m=r.n(u),d=r(74806),h=r(77760),g=r(6279),y=r(6450),b=r(52471),f=r(83819),T=r(2985),v=r(76930);const E=({costType:e,currency:t,DashboardWidget:r,selectWidgets:s,widgets:o})=>m().createElement("div",null,m().createElement(a.Grid,{hasGutter:!0},o.map((o=>{const n=s[o];return n.details&&n.details.showHorizontal?m().createElement(a.GridItem,{sm:12,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t}))):m().createElement(a.GridItem,{lg:12,xl:6,xl2:4,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t})))}))));var S=r(39836),P=r(4996),C=r(16044),Z=r(38470),M=r(91919),O=r(1156),R=r(68025),F=r(20513),I=r(17918);const k={infoIcon:{fontSize:I.ZP.value}},D=(0,d.ZP)((({intl:e,report:t,status:r,title:o})=>{const n=t&&t.meta?t.meta.count:0,i=e.formatMessage(p.Z.optimizationsDetails,{count:n});return m().createElement(a.Card,{className:"summary"},m().createElement(a.CardTitle,null,m().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o),m().createElement("span",{style:k.infoIcon},m().createElement(a.Popover,{"aria-label":e.formatMessage(p.Z.optimizationsInfoArialLabel),enableFlip:!0,bodyContent:m().createElement("p",{style:k.infoTitle},e.formatMessage(p.Z.optimizationsInfo))},m().createElement(a.Button,{"aria-label":e.formatMessage(p.Z.optimizationsInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null)))))),m().createElement(a.CardBody,null,r===O.iF.inProgress?m().createElement(m().Fragment,null,m().createElement(a.Skeleton,{width:"16%"}),m().createElement(a.Skeleton,{className:"skeleton",width:F.N.md})):n>0?m().createElement(S.Link,{to:(0,R.dI)(M._.optimizations.path)},i):i))}));var j=r(30564),A=r(91778);class x extends m().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:r}=this.state,s=this.getSelectOptions(),o=s.find((e=>e.value===t));return m().createElement(a.Select,{id:"comparisonSelect",isDisabled:e,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:a.SelectVariant.single},s.map((e=>m().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:r}=this.props;r&&r(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const V=x;var w=r(91707),L=r(32412),z=r(57640);const W={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},B={comparison:{marginBottom:L.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:w.ZP.value},tabItems:{marginTop:z.ZP.value}};var N;!function(e){e.cumulative="cumulative",e.daily="daily"}(N||(N={}));class _ extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,currentComparison:N.cumulative},this.state=Object.assign({},this.defaultState),this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,a=r(e);return`${t.viewAllPath}?${(0,n.pm)({group_by:{[a]:"*"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:a,trend:s}=this.props;return a===j.i.dailyTrend?this.getDailyTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.dailyCost?this.getDailyCostChart(e,t,r):a===j.i.trend?this.getTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.usage?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:r}=this.state,a=this.getFormattedUnits(),s=e.formatMessage(t.titleKey,{units:a}),o=[{label:e.formatMessage(t.dailyTitleKey,{units:a}),value:N.daily},{label:s,value:N.cumulative,default:!0}];return m().createElement(V,{currentItem:r||o[0].value,onItemClicked:this.handleComparisonClick,options:o})},this.getDailyCostChart=(e,t,r=!1)=>{const{chartFormatter:a,currentReport:s,previousReport:o,trend:n}=this.props,{currentComparison:i}=this.state,c=n.computedReportItem,l=n.computedReportItemValue,p=i===N.daily,u=p?P.yZ.rolling:n.datumType,d=(0,P.zJ)(s,u,"date",c,l),h=(0,P.zJ)(o,u,"date",c,l),g=this.getForecastData(s,n.computedForecastItem),y=p?Z.V3:Z.me;return m().createElement(m().Fragment,null,m().createElement("div",{style:B.comparisonContainer},m().createElement("div",{style:B.comparison},this.getChartComparison())),m().createElement(y,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,forecastConeData:g.forecastConeData,forecastData:g.forecastData,formatOptions:n.formatOptions,formatter:a||A.xG,height:t,previousCostData:h,showForecast:void 0!==n.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:i,previousReport:c,trend:l}=this.props,{currentComparison:p}=this.state,u=l.computedReportItem,d=l.computedReportItemValue,h=p===N.daily,g=h?P.yZ.rolling:l.datumType,y=(0,P.zJ)(n,g,"date",u,d),b=(0,P.zJ)(c,g,"date",u,d),{forecastData:f,forecastConeData:T}=this.getForecastData(n,l.computedForecastItem),v=h?Z.Y0:Z.Nd;return m().createElement(m().Fragment,null,m().createElement("div",{style:B.comparisonContainer},m().createElement("div",{style:B.comparison},this.getChartComparison())),m().createElement(v,{adjustContainerHeight:r,chartName:o,containerHeight:e,currentData:y,forecastData:f,forecastConeData:T,formatOptions:l.formatOptions,formatter:s||A.bM,height:t,previousData:b,showForecast:void 0!==l.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:i.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:a}=this.props,{currentComparison:s}=this.state,o=s===N.daily?P.yZ.rolling:a.datumType,n=(0,C.x1)(r,e,t,o);return{forecastData:(0,C.nB)(n,o,t),forecastConeData:(0,C.Qw)(n,o,t)}},this.getTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:i,intl:c,previousReport:l,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,h=c.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),g=(0,P.zJ)(n,p.datumType,"date",u,d),y=(0,P.zJ)(l,p.datumType,"date",u,d),{forecastData:b,forecastConeData:f}=this.getForecastData(n,p.computedForecastItem);return m().createElement(Z.Nd,{adjustContainerHeight:r,containerHeight:e,chartName:o,currentData:g,forecastData:b,forecastConeData:f,formatOptions:p.formatOptions,formatter:s||A.bM,height:t,previousData:y,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:i.showUsageLegendLabel,title:h,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:r,chartName:a,currentReport:s,intl:o,previousReport:n,trend:i}=this.props,c=o.formatMessage(i.titleKey,{units:this.getFormattedUnits()}),l=(0,P.zJ)(s,i.datumType,"date","request"),p=(0,P.zJ)(n,i.datumType,"date","request"),u=(0,P.zJ)(s,i.datumType,"date","usage"),d=(0,P.zJ)(n,i.datumType,"date","usage");return m().createElement(Z.I0,{adjustContainerHeight:t,chartName:a,containerHeight:W.containerUsageHeight,currentRequestData:l,currentUsageData:u,formatOptions:i.formatOptions,formatter:r||A.bM,height:e,previousRequestData:p,previousUsageData:d,title:c})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:a,trend:s}=this.props,o=s.computedReportItem||"cost",n=s.computedReportItemValue||"total";return m().createElement(Z.rN,{chartType:e,computedReportItem:o,computedReportItemValue:n,costLabel:this.getDetailsLabel(r.costKey),formatOptions:r.formatOptions,report:t,reportType:a,requestLabel:this.getDetailsLabel(r.requestKey),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:this.getUnits(),usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?m().createElement(S.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByAll,{value:a,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,r=t.computedReportItem||"cost",a=this.getUnits();return r===P.LI.usage?e.formatMessage(p.Z.units,{units:(0,A.ZV)(a)}):e.formatMessage(p.Z.currencyUnits,{units:a})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=W.containerAltHeight,chartAltHeight:t=W.chartAltHeight,currentReportFetchStatus:r,details:a}=this.props;return m().createElement(Z.j0,{detailsLink:this.getDetailsLink(),status:r,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,a.adjustContainerHeight))},this.getOptimizationsSummary=()=>{const{rosReportFetchStatus:e,rosReport:t,titleKey:r}=this.props;return m().createElement(D,{status:e,report:t,title:r})},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:s,tabsReportFetchStatus:o}=this.props,n=r(e);return m().createElement(a.Tab,{eventKey:t,key:`${r(e)}-tab`,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))},m().createElement("div",{style:B.tabItems},m().createElement(Z.mZ,{idKey:n,key:`${n}-items`,report:s,status:o},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,getIdKeyForTab:a,tabsReport:s,topItems:o,trend:n}=this.props,{activeTabKey:i}=this.state,c=a(e),l=a(r[i]),p=n.computedReportItem||"cost",u=n.computedReportItemValue||"total";let d;const h=s&&s.meta&&s.meta.total;return p===P.LI.usage?h&&s.meta.total.usage&&(d=s.meta.total.usage.value):h&&s.meta.total[p]&&s.meta.total[p][u]&&(d=s.meta.total[p][u].value),l===c?m().createElement(Z.EH,{formatOptions:o?o.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return m().createElement(a.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByTop,{value:a,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,a=r.computedReportItem||"cost",s=r.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const o=e&&e.meta&&e.meta.total;return a===P.LI.usage?o&&e.meta.total.usage?e.meta.total.usage.units:void 0:o&&e.meta.total[a]&&e.meta.total[a][s]?e.meta.total[a][s].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return m().createElement(Z.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(W.containerTrendHeight,W.chartHeight,r.adjustContainerHeight),e&&m().createElement("div",{style:B.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:a,updateTab:s}=this.props;s(a,r[t]),this.setState({activeTabKey:t})},this.updateForecasts=()=>{const{fetchForecasts:e,widgetId:t}=this.props;e&&e(t)},this.updateReports=()=>{const{fetchReports:e,widgetId:t}=this.props;e&&e(t)},this.updateRosReports=()=>{const{fetchRosReports:e,isRosFeatureEnabled:t,widgetId:r}=this.props;e&&t&&e(r)}}componentDidMount(){const{availableTabs:e,details:t,id:r,trend:a,updateTab:s}=this.props;e&&s(r,e[0]),a&&void 0!==a.computedForecastItem&&this.updateForecasts(),t.showOptimizations||this.updateReports(),t.showOptimizations&&this.updateRosReports()}componentDidUpdate(e){const{costType:t,currency:r,trend:a}=this.props;e.costType===t&&e.currency===r||(this.updateReports(),a&&void 0!==a.computedForecastItem&&this.updateForecasts())}render(){const{details:e,isRosFeatureEnabled:t}=this.props;return e.showOptimizations?t?this.getOptimizationsSummary():null:e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const U=_;var K=r(81628),G=r(79277),q=r(15920),H=r(15829);const $=e=>{switch(e){case K.IC.services:return"service";case K.IC.accounts:return"account";case K.IC.regions:return"region"}},J=(0,O.X1)(((e,{widgetId:t})=>{const r=K.Cv.selectWidget(e,t),a=K.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:$}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),X={fetchForecasts:K.Kf.v4,fetchReports:K.Kf.a4,updateTab:K.Kf.as},Q=(0,d.ZP)((0,h.connect)(J,X)(U)),Y=(0,O.X1)(((e,t)=>({DashboardWidget:Q,selectWidgets:K.Cv.selectWidgets(e),widgets:K.Cv.selectCurrentWidgets(e)}))),ee=(0,h.connect)(Y,{})(E);var te=r(25566);const re=e=>{switch(e){case te.e1.services:return"service";case te.e1.accounts:return"account";case te.e1.regions:return"region"}},ae=(0,O.X1)(((e,{widgetId:t})=>{const r=te.Hc.selectWidget(e,t),a=te.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:re}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),se={fetchForecasts:te.NA.v4,fetchReports:te.NA.a4,updateTab:te.NA.as},oe=(0,d.ZP)((0,h.connect)(ae,se)(U)),ne=(0,O.X1)(((e,t)=>({DashboardWidget:oe,selectWidgets:te.Hc.selectWidgets(e),widgets:te.Hc.selectCurrentWidgets(e)}))),ie=(0,h.connect)(ne,{})(E);var ce=r(25976);const le=e=>{switch(e){case ce.vY.service_names:return"service_name";case ce.vY.subscription_guids:return"subscription_guid";case ce.vY.resource_locations:return"resource_location"}},pe=(0,O.X1)(((e,{widgetId:t})=>{const r=ce.rj.selectWidget(e,t),a=ce.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:le}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),ue={fetchForecasts:ce.oc.v4,fetchReports:ce.oc.a4,updateTab:ce.oc.as},me=(0,d.ZP)((0,h.connect)(pe,ue)(U)),de=(0,O.X1)(((e,t)=>({DashboardWidget:me,selectWidgets:ce.rj.selectWidgets(e),widgets:ce.rj.selectCurrentWidgets(e)}))),he=(0,h.connect)(de,{})(E);var ge=r(76764);const ye=e=>{switch(e){case ge.Vp.service_names:return"service_name";case ge.Vp.subscription_guids:return"subscription_guid";case ge.Vp.resource_locations:return"resource_location"}},be=(0,O.X1)(((e,{widgetId:t})=>{const r=ge.MW.selectWidget(e,t),a=ge.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:ye}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),fe={fetchForecasts:ge._V.v4,fetchReports:ge._V.a4,updateTab:ge._V.as},Te=(0,d.ZP)((0,h.connect)(be,fe)(U)),ve=(0,O.X1)(((e,t)=>({DashboardWidget:Te,selectWidgets:ge.MW.selectWidgets(e),widgets:ge.MW.selectCurrentWidgets(e)}))),Ee=(0,h.connect)(ve,{})(E);var Se=r(67776);const Pe=e=>{switch(e){case Se.BP.gcpProjects:return"gcp_project";case Se.BP.regions:return"region";case Se.BP.services:return"service"}},Ce=(0,O.X1)(((e,{widgetId:t})=>{const r=Se.oS.selectWidget(e,t),a=Se.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Pe}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Ze={fetchForecasts:Se.n5.v4,fetchReports:Se.n5.a4,updateTab:Se.n5.as},Me=(0,d.ZP)((0,h.connect)(Ce,Ze)(U)),Oe=(0,O.X1)(((e,t)=>({DashboardWidget:Me,selectWidgets:Se.oS.selectWidgets(e),widgets:Se.oS.selectCurrentWidgets(e)}))),Re=(0,h.connect)(Oe,{})(E);var Fe=r(99900);const Ie=e=>{switch(e){case Fe.VN.gcpProjects:return"gcp_project";case Fe.VN.regions:return"region";case Fe.VN.services:return"service"}},ke=(0,O.X1)(((e,{widgetId:t})=>{const r=Fe.FF.selectWidget(e,t),a=Fe.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ie}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),De={fetchForecasts:Fe.uM.v4,fetchReports:Fe.uM.a4,updateTab:Fe.uM.as},je=(0,d.ZP)((0,h.connect)(ke,De)(U)),Ae=(0,O.X1)(((e,t)=>({DashboardWidget:je,selectWidgets:Fe.FF.selectWidgets(e),widgets:Fe.FF.selectCurrentWidgets(e)}))),xe=(0,h.connect)(Ae,{})(E);var Ve=r(48788);const we=e=>{switch(e){case Ve.DA.services:return"service";case Ve.DA.projects:return"project";case Ve.DA.regions:return"region"}},Le=(0,O.X1)(((e,{widgetId:t})=>{const r=Ve.Pi.selectWidget(e,t),a=Ve.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:we}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),ze={fetchForecasts:Ve.lj.v4,fetchReports:Ve.lj.a4,updateTab:Ve.lj.as},We=(0,d.ZP)((0,h.connect)(Le,ze)(U)),Be=(0,O.X1)(((e,t)=>({DashboardWidget:We,selectWidgets:Ve.Pi.selectWidgets(e),widgets:Ve.Pi.selectCurrentWidgets(e)}))),Ne=(0,h.connect)(Be,{})(E);var _e=r(17568);const Ue=e=>{switch(e){case _e.Qr.accounts:return"account";case _e.Qr.regions:return"region";case _e.Qr.services:return"service"}},Ke=(0,O.X1)(((e,{widgetId:t})=>{const r=_e.qN.selectWidget(e,t),a=_e.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ue}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Ge={fetchForecasts:_e.BV.v4,fetchReports:_e.BV.a4,updateTab:_e.BV.as},qe=(0,d.ZP)((0,h.connect)(Ke,Ge)(U)),He=(0,O.X1)(((e,t)=>({DashboardWidget:qe,selectWidgets:_e.qN.selectWidgets(e),widgets:_e.qN.selectCurrentWidgets(e)}))),$e=(0,h.connect)(He,{})(E);var Je=r(60329),Xe=r(22369),Qe=r(2136);const Ye=e=>{switch(e){case Je.V7.clusters:return"cluster";case Je.V7.nodes:return"node";case Je.V7.projects:return"project"}},et=(0,O.X1)(((e,{widgetId:t})=>{const r=Je.nH.selectWidget(e,t),a=Je.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ye,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)}),r.rosPathsType&&r.rosType&&{isRosFeatureEnabled:Xe.iJ.selectIsRosFeatureEnabled(e),rosReport:Qe.R0.selectRos(e,r.rosPathsType,r.rosType,a.optimizations),rosReportError:Qe.R0.selectRosError(e,r.rosPathsType,r.rosType,a.optimizations),rosReportFetchStatus:Qe.R0.selectRosFetchStatus(e,r.rosPathsType,r.rosType,a.optimizations)})})),tt={fetchForecasts:Je.U6.v4,fetchReports:Je.U6.a4,fetchRosReports:Je.U6.XE,updateTab:Je.U6.as},rt=(0,d.ZP)((0,h.connect)(et,tt)(U)),at=(0,O.X1)(((e,t)=>({DashboardWidget:rt,selectWidgets:Je.nH.selectWidgets(e),widgets:Je.nH.selectCurrentWidgets(e)}))),st=(0,h.connect)(at,{})(E);var ot=r(67522);const nt=e=>{switch(e){case ot.is.clusters:return"cluster";case ot.is.nodes:return"node";case ot.is.projects:return"project"}},it=(0,O.X1)(((e,{widgetId:t})=>{const r=ot.fO.selectWidget(e,t),a=ot.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:nt,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),ct={fetchForecasts:ot.BV.v4,fetchReports:ot.BV.a4,updateTab:ot.BV.as},lt=(0,d.ZP)((0,h.connect)(it,ct)(U)),pt=(0,O.X1)(((e,t)=>({DashboardWidget:lt,selectWidgets:ot.fO.selectWidgets(e),widgets:ot.fO.selectCurrentWidgets(e)}))),ut=(0,h.connect)(pt,{})(E);var mt=r(86482),dt=r(62331),ht=r(46919),gt=r(45087),yt=r(5842),bt=r(96351),ft=r(77392);const Tt=e=>{switch(e){case ft.FY.product_services:return"product_service";case ft.FY.payer_tenant_ids:return"payer_tenant_id";case ft.FY.regions:return"region"}},vt=(0,O.X1)(((e,{widgetId:t})=>{const r=ft.$h.selectWidget(e,t),a=ft.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Tt}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Et={fetchForecasts:ft.eb.v4,fetchReports:ft.eb.a4,updateTab:ft.eb.as},St=(0,d.ZP)((0,h.connect)(vt,Et)(U)),Pt=(0,O.X1)(((e,t)=>({DashboardWidget:St,selectWidgets:ft.$h.selectWidgets(e),widgets:ft.$h.selectCurrentWidgets(e)}))),Ct=(0,h.connect)(Pt,{})(E);var Zt=r(49382),Mt=r(98499);const Ot={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:L.ZP.var},header:{backgroundColor:Zt.ZP.var,padding:Mt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:I.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:Mt.ZP.value},tabs:{backgroundColor:Zt.ZP.var,paddingBottom:Mt.ZP.var,paddingTop:Mt.ZP.var}};var Rt,Ft,It,kt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(Rt||(Rt={})),function(e){e.ocp="ocp"}(Ft||(Ft={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(It||(It={})),function(e){e.rhel="rhel"}(kt||(kt={}));const Dt=e=>{switch(e){case It.infrastructure:return"infrastructure";case It.ocp:return"ocp";case It.rhel:return"rhel"}};class jt extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFinsightsFeatureEnabled:e}=this.props,t=[],r=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:m().createRef(),tab:It.infrastructure}]:void 0,a=this.isOcpAvailable()?[{contentRef:m().createRef(),tab:It.ocp}]:void 0,s=this.isRhelAvailable()?[{contentRef:m().createRef(),tab:It.rhel}]:void 0;return e?(r&&t.push(...r),s&&t.push(...s),a&&t.push(...a)):(a&&t.push(...a),r&&t.push(...r)),t},this.getCostType=()=>{const{costType:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r}=this.state,a=this.getCurrentTab()===It.infrastructure?t:r;return a===Rt.aws||a===Rt.awsOcp?m().createElement("div",{style:Ot.costType},m().createElement(g.T,{costType:e,onSelect:this.handleOnCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return m().createElement(y.F,{onSelect:this.handleOnCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFinsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,r=this.isAwsAvailable(),a=this.isAzureAvailable(),s=this.isOciAvailable(),o=this.isGcpAvailable(),n=this.isIbmAvailable(),i=this.isOcpAvailable(),c=this.isOcpCloudAvailable(),l=this.isRhelAvailable(),p=r||a||s||o||n||c,u=p&&!i&&!l,m=l&&!p&&!i;if(i&&!p&&!l)return It.ocp;if(u)return It.infrastructure;if(m)return It.rhel;if(e)switch(t){case 0:return It.infrastructure;case 1:return It.rhel;case 2:return It.ocp}switch(t){case 0:return It.ocp;case 1:return It.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case Rt.aws:case Rt.awsOcp:case Rt.azure:case Rt.oci:case Rt.azureOcp:case Rt.gcp:case Rt.gcpOcp:case Rt.ibm:case Rt.ibmOcp:case Rt.ocpCloud:return e}return this.isOcpCloudAvailable()?Rt.ocpCloud:this.isAwsAvailable()?Rt.aws:this.isAzureAvailable()?Rt.azure:this.isOciAvailable()?Rt.oci:this.isGcpAvailable()?Rt.gcp:this.isIbmAvailable()?Rt.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:r}=this.props;return t===Ft.ocp?t:(0,bt.mn)(r,e)?Ft.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:r}=this.props;return e===kt.rhel?e:(0,bt.ZC)(r,t)?kt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r,currentRhelPerspective:a}=this.state,s=this.isAwsAvailable(),o=this.isAzureAvailable(),n=this.isGcpAvailable(),i=this.isIbmAvailable(),c=this.isOciAvailable(),l=this.isOcpAvailable(),p=this.isRhelAvailable();if(!(s||o||n||i||c||l||p))return null;let u;const d=this.getCurrentTab();switch(d){case It.infrastructure:u=t;break;case It.ocp:u=r;break;case It.rhel:u=a}return m().createElement(v.X,{currentItem:u,hasAws:s,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:o,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:n,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:i,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:c,hasOcp:l,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:p,isIbmFeatureEnabled:e,isInfrastructureTab:It.infrastructure===d,isRhelTab:It.rhel===d,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return n.IV(e)}(e)}`},this.getTab=(e,t,r)=>m().createElement(a.Tab,{eventKey:r,key:`${Dt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>m().createElement(a.TabContent,{eventKey:t,key:`${Dt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:a,ociProviders:s,costType:o,currency:n,gcpProviders:i,ibmProviders:c,ocpProviders:l,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:h,currentRhelPerspective:g}=this.state,y=m().createElement(m().Fragment,null),b=m().createElement(f.Z,{showReload:!1});if(u!==t)return y;const T=Dt(e);if(T===It.infrastructure)return d===Rt.ocpCloud?(0,mt.Bj)(r,l)||(0,mt.Bj)(a,l)||(0,mt.Bj)(i,l)||(0,mt.Bj)(c,l)?m().createElement($e,{currency:n}):b:d===Rt.aws?(0,mt.g8)(r)||(0,mt.rL)(r)?m().createElement(ee,{costType:o}):b:d===Rt.awsOcp?(0,mt.at)(r,l)||(0,mt.D2)(r,l)?m().createElement(ie,{currency:n}):b:d===Rt.azure?(0,mt.g8)(a)||(0,mt.rL)(a)?m().createElement(he,{currency:n}):b:d===Rt.azureOcp?(0,mt.at)(a,l)||(0,mt.D2)(a,l)?m().createElement(Ee,{currency:n}):b:d===Rt.gcp?(0,mt.g8)(i)||(0,mt.rL)(i)?m().createElement(Re,{currency:n}):b:d===Rt.gcpOcp?(0,mt.at)(i,l)||(0,mt.D2)(i,l)?m().createElement(xe,{currency:n}):b:d===Rt.ibm?(0,mt.g8)(c)||(0,mt.rL)(c)?m().createElement(Ne,{currency:n}):b:d===Rt.oci&&((0,mt.g8)(s)||(0,mt.rL)(s))?m().createElement(Ct,{currency:n}):b;if(T===It.ocp){const e=(0,mt.g8)(l)||(0,mt.rL)(l);return h===Ft.ocp&&e?m().createElement(st,{currency:n}):b}if(T===It.rhel){const e=(0,mt.g8)(p)||(0,mt.rL)(p);return g===kt.rhel&&e?m().createElement(ut,{currency:n}):b}return y},this.getTabs=e=>{const{activeTabKey:t}=this.state;return m().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFinsightsFeatureEnabled:r}=this.props;return e===It.infrastructure?r?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===It.ocp?t.formatMessage(p.Z.openShift):e===It.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleOnCostTypeSelected=()=>{const{query:e,router:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(r),{replace:!0})},this.handleOnCurrencySelected=()=>{const{router:e,query:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(r),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:r}=this.props,a=this.getCurrentTab();this.setState(Object.assign(Object.assign({},a===It.infrastructure&&{currentInfrastructurePerspective:e}),a===It.ocp&&{currentOcpPerspective:e}),(()=>{const a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});r.navigate(this.getRouteForQuery(a),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,bt.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.KT)(r)&&(0,mt.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,bt.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.FW)(r)&&(0,mt.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,bt.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.Sv)(r)&&(0,mt.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,bt.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.tt)(r)&&(0,mt.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,bt.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,bt.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),r=this.isGcpOcpAvailable(),a=this.isIbmOcpAvailable();return e||t||r||a},this.isRhelAvailable=()=>{const{isFinsightsFeatureEnabled:e,rhelProviders:t,userAccess:r}=this.props;return e&&(0,bt.ZC)(r,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:r,userAccess:a}=this.props;e.userAccess===a&&e.providers===t||this.setState({activeTabKey:r,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isFinsightsFeatureEnabled:r,isIbmFeatureEnabled:o,userAccessFetchStatus:n}=this.props,i=!(e!==O.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),c=e===O.iF.inProgress||n===O.iF.inProgress,l=this.getAvailableTabs(),u=t.formatMessage(p.Z.overviewTitle);return c?m().createElement(b.g,{title:u}):i?m().createElement(T.L,{title:u}):m().createElement(m().Fragment,null,m().createElement("header",{style:Ot.header},m().createElement("div",{style:Ot.headerContent},m().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},u,m().createElement("span",{style:Ot.infoIcon},m().createElement(a.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:m().createElement(m().Fragment,null,m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),m().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.openShift)),m().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),m().createElement("br",null),r&&m().createElement(m().Fragment,null,m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.rhel)),m().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),m().createElement("br",null)),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.aws)),m().createElement("p",null,t.formatMessage(p.Z.awsDesc)),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.gcp)),m().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),o&&m().createElement(m().Fragment,null,m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.ibm)),m().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.azure)),m().createElement("p",null,t.formatMessage(p.Z.azureDesc)),m().createElement("br",null),m().createElement("p",{style:Ot.infoTitle},t.formatMessage(p.Z.oci)),m().createElement("p",null,t.formatMessage(p.Z.ociDesc)))},m().createElement(a.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null))))),m().createElement("div",{style:Ot.headerContentRight},this.getCurrency())),m().createElement("div",{style:Ot.tabs},this.getTabs(l)),m().createElement("div",{style:Ot.headerContent},m().createElement("div",{style:Ot.headerContentLeft},this.getPerspective(),this.getCostType()),m().createElement("div",{style:Ot.date},(0,gt.J4)()))),m().createElement("div",{style:Ot.main},this.getTabContent(l)))}}const At=(0,O.X1)(((e,{router:t})=>{const r=function(e){return n.mB(e)}(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0,s=r.perspective,p=(0,H.zC)(),u=s===Rt.aws||s===Rt.awsOcp?(0,H.uY)():void 0,m=Object.assign({},r),d=(0,i.H)(dt.NT),h=dt.aX.selectProviders(e,o.l.all,d),g=dt.aX.selectProvidersError(e,o.l.all,d),y=dt.aX.selectProvidersFetchStatus(e,o.l.all,d),b=(0,c.T)(ht.QR),f=ht.JO.selectUserAccess(e,l.n.all,b),T=ht.JO.selectUserAccessError(e,l.n.all,b),v=ht.JO.selectUserAccessFetchStatus(e,l.n.all,b);return{awsProviders:(0,mt.BV)(h,o.l.aws),azureProviders:(0,mt.BV)(h,o.l.azure),costType:u,currency:p,gcpProviders:(0,mt.BV)(h,o.l.gcp),ibmProviders:(0,mt.BV)(h,o.l.ibm),isFinsightsFeatureEnabled:Xe.iJ.selectIsFinsightsFeatureEnabled(e),isIbmFeatureEnabled:Xe.iJ.selectIsIbmFeatureEnabled(e),ociProviders:(0,mt.BV)(h,o.l.oci),ocpProviders:(0,mt.BV)(h,o.l.ocp),providers:h,providersError:g,providersFetchStatus:y,perspective:s,query:m,rhelProviders:(0,mt.BV)(h,o.l.rhel),tabKey:a,userAccess:f,userAccessError:T,userAccessFetchStatus:v,userAccessQueryString:b}})),xt=(0,d.ZP)((0,yt.E)((0,h.connect)(At,{})(jt)))},19727:(e,t,r)=>{r.d(t,{F4:()=>m,JA:()=>l,K8:()=>d,LB:()=>n,Lk:()=>u,bU:()=>c,ft:()=>i,vI:()=>p});var a=r(9256),s=r(10066);const o=(e,t,r,a=!1)=>{const o=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate((0,s.Z)(o,t.location,a),{replace:!0})},n=(e,t,r,a=!1)=>{o(e,t,0,a)},i=(e,t,r,a=!1)=>{o(e,t,0,a)},c=(e,t,r,a=!1)=>{const s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{order_by:void 0});o(s,t,0,a)},l=(e,t,r)=>{const o=(0,a.oQ)(e,r);t.navigate((0,s.Z)(o,t.location,!0),{replace:!0})},p=(e,t,r)=>{const o=(0,a.cJ)(e,r);t.navigate((0,s.Z)(o,t.location,!0),{replace:!0})},u=(e,t,r)=>{const a=Object.assign({},JSON.parse(JSON.stringify(e)));a.filter=Object.assign(Object.assign({},e.filter),{limit:r});const o=(0,s.Z)(a,t.location,!0);t.navigate(o,{replace:!0})},m=(e,t,r,a)=>{const o=r&&r.meta&&r.meta.filter&&r.meta.filter.limit?r.meta.filter.limit:10,n=a*o-o,i=Object.assign({},JSON.parse(JSON.stringify(e)));i.filter=Object.assign(Object.assign({},e.filter),{offset:n});const c=(0,s.Z)(i,t.location);t.navigate(c,{replace:!0})},d=(e,t,r,a,o=undefined)=>{const n=Object.assign({},JSON.parse(JSON.stringify(e)));n.order_by={},n.order_by[r]=a?"asc":"desc",o&&(n.order_by.date=o);const i=(0,s.Z)(n,t.location);t.navigate(i,{replace:!0})}},86482:(e,t,r)=>{var a;r.d(t,{BV:()=>o,Bj:()=>l,D2:()=>p,JY:()=>u,Mg:()=>d,at:()=>c,g8:()=>m,rL:()=>h}),function(e){e.currentMonthData="current_month_data",e.hasData="has_data",e.previousMonthData="previous_month_data"}(a||(a={}));const s=(e,t)=>{let r;if(e&&e.data)for(const a of e.data)if(a.infrastructure&&a.infrastructure.uuid===t){r=a;break}return r},o=(e,t)=>{if(!e)return e;const r=e.data.filter((e=>e.source_type.toLowerCase()===t)),a=Object.assign(Object.assign({},e.meta),{count:r.length});return Object.assign(Object.assign({},e),{meta:a,data:r})},n=(e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(a[t]){r=!0;break}return r},i=(e,t,r)=>{let a=!1;if(e&&e.data)for(const o of e.data){const e=s(t,o.uuid);if(e&&e[r]){a=!0;break}}return a},c=(e,t)=>i(e,t,a.currentMonthData),l=(e,t)=>i(e,t,a.hasData),p=(e,t)=>i(e,t,a.previousMonthData),u=(e,t)=>((e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(s(t,a.uuid)){r=!0;break}return r})(e,t),m=e=>n(e,a.currentMonthData),d=e=>n(e,a.hasData),h=e=>n(e,a.previousMonthData)},10066:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(39333);const s=(e,t,r=!1)=>(r&&(e.filter&&void 0!==e.filter.offset&&(e.filter=Object.assign(Object.assign({},e.filter),{offset:0})),void 0!==e.offset&&(e.offset=0)),`${t.pathname}?${(0,a.IV)(e)}`)},9475:(e,t,r)=>{function a(e={}){return e.project?"project":e.cluster?"cluster":e.node?"node":"date"}r.d(t,{K:()=>a})},96351:(e,t,r)=>{r.d(t,{Es:()=>y,F4:()=>E,FE:()=>h,FW:()=>c,HC:()=>u,KT:()=>n,Rt:()=>b,Sv:()=>d,Xd:()=>p,ZC:()=>v,hn:()=>l,mn:()=>f,n9:()=>i,ot:()=>m,tt:()=>g,yY:()=>T});var a=r(91577);const s=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const a=e.data.find((e=>e.type===t));r=a&&a.access}else r=e&&!0===e.data;return r},o=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},n=e=>s(e,a.n.aws),i=(e,t)=>n(e)&&o(t),c=e=>s(e,a.n.azure),l=(e,t)=>c(e)&&o(t),p=e=>s(e,a.n.oci),u=(e,t)=>p(e)&&o(t),m=e=>s(e,a.n.cost_model),d=e=>s(e,a.n.gcp),h=(e,t)=>s(e,a.n.gcp)&&o(t),g=e=>d(e),y=(e,t)=>g(e)&&o(t),b=e=>s(e,a.n.ocp),f=(e,t)=>b(e)&&o(t),T=e=>s(e,a.n.rhel),v=(e,t)=>T(e)&&o(t),E=e=>s(e,a.n.ros)},84735:(e,t,r)=>{e.exports=r.p+"fonts/Cost-icon.svg"},80794:(e,t,r)=>{e.exports=r.p+"fonts/Red_Hat-IT_Optimization-Gray.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.3a5aea309de4611354e2830e8c2393ff.js.map