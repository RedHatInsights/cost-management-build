"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[7602],{53086:(e,t,a)=>{a.d(t,{xX:()=>s,yK:()=>r});var n=a(40400);const r={name:"OkIcon",height:1024,width:1024,svgPath:"M668.3,361.4 L465.1,564.6 L352.2,451.7 C346.210177,445.698444 338.079189,442.325817 329.6,442.325817 C321.120811,442.325817 312.989823,445.698444 307,451.7 L261.8,496.9 C255.798444,502.889823 252.425817,511.020811 252.425817,519.5 C252.425817,527.979189 255.798444,536.110177 261.8,542.1 L442.4,722.7 C448.389823,728.701556 456.520811,732.074183 465,732.074183 C473.479189,732.074183 481.610177,728.701556 487.6,722.7 L758.6,451.7 C764.601556,445.710177 767.974183,437.579189 767.974183,429.1 C767.974183,420.620811 764.601556,412.489823 758.6,406.5 L713.4,361.3 C700.916226,348.87879 680.728569,348.923552 668.3,361.4 M512.1,127.9 C300.3,127.9 128.1,300.2 128.1,511.9 C128.1,723.8 300.3,895.9 512.1,895.9 C723.9,895.9 896.1,723.7 896.1,511.9 C896.1,300.1 723.8,127.9 512.1,127.9 M512.1,1024 C229.7,1024 0,794.3 0,512 C0,229.7 229.7,0 512.1,0 C794.3,0 1024,229.7 1024,512 C1024,794.3 794.3,1024 512.1,1024",yOffset:0,xOffset:0},s=(0,n.IU)(r)},91290:(e,t,a)=>{a.d(t,{iC:()=>s,sN:()=>r});var n=a(40400);const r={name:"OutlinedQuestionCircleIcon",height:512,width:512,svgPath:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",yOffset:0,xOffset:0},s=(0,n.IU)(r)},6450:(e,t,a)=>{a.d(t,{F:()=>E,m:()=>d});var n=a(90154),r=a(97027),s=a(92950),l=a.n(s),o=a(74806),i=a(77760),c=a(1156),m=a(15829);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:a(32412).ZP.var,whiteSpace:"nowrap"}},d=[{label:r.Z.currencyOptions,value:"AUD"},{label:r.Z.currencyOptions,value:"CAD"},{label:r.Z.currencyOptions,value:"CHF"},{label:r.Z.currencyOptions,value:"CNY"},{label:r.Z.currencyOptions,value:"DKK"},{label:r.Z.currencyOptions,value:"EUR"},{label:r.Z.currencyOptions,value:"GBP"},{label:r.Z.currencyOptions,value:"HKD"},{label:r.Z.currencyOptions,value:"JPY"},{label:r.Z.currencyOptions,value:"NOK"},{label:r.Z.currencyOptions,value:"NZD"},{label:r.Z.currencyOptions,value:"SEK"},{label:r.Z.currencyOptions,value:"SGD"},{label:r.Z.currencyOptions,value:"USD"},{label:r.Z.currencyOptions,value:"ZAR"}];class p extends l().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t}=this.props,{isSelectOpen:a}=this.state,r=this.getSelectOptions(),s=r.find((t=>t.value===e));return l().createElement(n.Select,{className:"currencyOverride",id:"currencySelect",isDisabled:t,isOpen:a,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:s,variant:n.SelectVariant.single},r.map((e=>l().createElement(n.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return d.map((a=>{t.push({toString:()=>e.formatMessage(a.label,{units:a.value}),value:a.value})})),t},this.handleSelect=(e,t)=>{const{onSelect:a}=this.props;(0,m.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{a&&a(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return(0,m.eu)(),l().createElement("div",{style:u.currencySelector},l().createElement(n.Title,{headingLevel:"h2",size:"md",style:u.currencyLabel},e.formatMessage(r.Z.currency)),this.getSelect())}}const g=(0,c.X1)((()=>({}))),h=(0,i.connect)(g,{})(p),E=(0,o.ZP)(h)},42676:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ct});var n=a(90154),r=a(92950),s=a.n(r),l=a(77760),o=a(58613),i=a(91800),c=a(73805),m=a(5842),u=a(45868),d=a(97027),p=a(74806),g=a(40227);const h={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function E(e){return Object.keys(e).reduce(((t,a)=>null===e[a]?t:""===t?`?${a}=${e[a]}`:`${t}&${a}=${e[a]}`),"")}function f(e,t){return(e-1)*t}Object.keys(h);const M=(0,m.E)((0,l.connect)((e=>{const{count:t,page:a,perPage:n}=o.E6.pagination(e);return{query:o.E6.query(e),count:t,page:a,perPage:n}}),void 0,((e,t,a)=>{const{router:r}=a,{count:s,page:l,perPage:o,query:i}=e;return{itemCount:s,page:l,perPage:o,variant:n.PaginationVariant.bottom,onSetPage:(e,t,a)=>{r.navigate(E(Object.assign(Object.assign(Object.assign({},h),i),{offset:f(t,a)})))},onPerPageSelect:(e,t)=>{r.navigate(E(Object.assign(Object.assign(Object.assign({},h),i),{limit:t,offset:0})))}}}))((0,p.ZP)((e=>{const{variant:t,intl:a=u.N,itemCount:r,page:l,perPage:o,onSetPage:i,onPerPageSelect:c}=e;return s().createElement(n.Toolbar,null,s().createElement(n.ToolbarContent,null,s().createElement(n.ToolbarItem,{variant:n.ToolbarItemVariant.pagination},s().createElement(n.Pagination,{onPerPageSelect:c,onSetPage:i,variant:t,itemCount:r,page:l,perPage:o,titles:{paginationTitle:a.formatMessage(d.Z.paginationTitle,{title:a.formatMessage(d.Z.costModelsDetailsTitle),placement:"bottom"})}}))))}))));var b=a(88611),y=a(69957),C=a(34327),S=a(44439),T=a(1156),v=a(91778),Z=a(15829),P=a(1326);const k={apiError:null,checked:{},clearQuery:()=>null,createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,Z.tk)(),dataFetched:!1,description:"",dirtyName:!1,distribution:"",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,fetchSources:(e,t,a,n)=>null,filterName:"",goToAddPL:e=>null,isDiscount:!1,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleDistributePlatformUnallocatedChange:(...e)=>null,handleDistributeWorkerUnallocatedChange:(...e)=>null,handleSignChange:(...e)=>null,loading:!1,markup:"",metricsHash:{},name:"",onClose:()=>null,onCurrencyChange:e=>null,onDescChange:e=>null,onFilterChange:e=>null,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,onTypeChange:e=>null,onNameChange:e=>null,onSourceSelect:(...e)=>null,page:1,perPage:10,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},query:{},step:1,setSources:e=>null,sources:[],submitTiers:e=>null,tiers:[],total:0,type:""},x=s().createContext(k);var O=a(68239);const D={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"},selector:{maxHeight:"350px"},titleWithLearnMore:{display:"inline-block",marginRight:"1em"}};class I extends s().Component{render(){const{intl:e}=this.props;return s().createElement(x.Consumer,null,(({handleDistributionChange:t,handleDistributePlatformUnallocatedChange:a,handleDistributeWorkerUnallocatedChange:r,distribution:l,distributePlatformUnallocated:o,distributeWorkerUnallocated:i})=>s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:"xl",style:D.titleWithLearnMore},e.formatMessage(d.Z.costDistribution)),s().createElement("a",{href:e.formatMessage(d.Z.docsCostModelsDistribution),rel:"noreferrer",target:"_blank"},e.formatMessage(d.Z.learnMore))),s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h3",size:"md"},e.formatMessage(d.Z.distributionType)),s().createElement(n.TextContent,null,s().createElement(n.Text,{style:D.cardDescription},e.formatMessage(d.Z.distributionModelDesc)))),s().createElement(n.StackItem,{isFilled:!0},s().createElement(O.l,null,s().createElement(n.FormGroup,{isInline:!0,fieldId:"cost-distribution-type",isRequired:!0},s().createElement(n.Radio,{isChecked:"cpu"===l,name:"distributionType",label:e.formatMessage(d.Z.cpuTitle),"aria-label":e.formatMessage(d.Z.cpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),s().createElement(n.Radio,{isChecked:"memory"===l,name:"distributionType",label:e.formatMessage(d.Z.memoryTitle),"aria-label":e.formatMessage(d.Z.memoryTitle),id:"memoryDistribution",value:"memory",onChange:t})))),s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h3",size:"md"},e.formatMessage(d.Z.platform)),s().createElement(n.TextContent,null,s().createElement(n.Text,{style:D.cardDescription},e.formatMessage(d.Z.platformDesc)))),s().createElement(n.StackItem,{isFilled:!0},s().createElement(O.l,null,s().createElement(n.FormGroup,{isInline:!0,fieldId:"cost-distribution-platform-unallocated",isRequired:!0},s().createElement(n.Radio,{isChecked:o,name:"distributePlatformUnallocated",label:e.formatMessage(d.Z.distribute),"aria-label":e.formatMessage(d.Z.distribute),id:"distributePlatformTrue",value:"true",onChange:a}),s().createElement(n.Radio,{isChecked:!o,name:"distributePlatformUnallocated",label:e.formatMessage(d.Z.doNotDistribute),"aria-label":e.formatMessage(d.Z.doNotDistribute),id:"distributePlatformFalse",value:"false",onChange:a})))),s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h3",size:"md"},e.formatMessage(d.Z.workerUnallocated)),s().createElement(n.TextContent,null,s().createElement(n.Text,{style:D.cardDescription},e.formatMessage(d.Z.workerUnallocatedDesc)))),s().createElement(n.StackItem,{isFilled:!0},s().createElement(O.l,null,s().createElement(n.FormGroup,{isInline:!0,fieldId:"cost-distribution-worker-unallocated",isRequired:!0},s().createElement(n.Radio,{isChecked:i,name:"distributeWorkerUnallocated",label:e.formatMessage(d.Z.distribute),"aria-label":e.formatMessage(d.Z.distribute),id:"distributeWorkerTrue",value:"true",onChange:r}),s().createElement(n.Radio,{isChecked:!i,name:"distributeWorkerUnallocated",label:e.formatMessage(d.Z.doNotDistribute),"aria-label":e.formatMessage(d.Z.doNotDistribute),id:"distributeWorkerFalse",value:"false",onChange:r})))))))}}const L=(0,T.X1)((()=>({}))),W=(0,p.ZP)((0,l.connect)(L,{})(I));var z=a(6450),j=a(86159);const F=e=>0===e.length?d.Z.costModelsRequiredField:e.length>100?d.Z.costModelsInfoTooLong:null,N=e=>e.length>500?d.Z.costModelsDescTooLong:null,R=e=>""!==e.trim()&&(!!(0,v.WW)(e)&&!((0,v.cR)(e)>10)),A={"":[()=>!1],AWS:[e=>null===F(e.name)&&null===N(e.description)&&""!==e.type,e=>R(e.markup),()=>!0,()=>!0],Azure:[e=>null===F(e.name)&&null===N(e.description)&&""!==e.type,e=>R(e.markup),()=>!0,()=>!0],GCP:[e=>null===F(e.name)&&null===N(e.description)&&""!==e.type,e=>R(e.markup),()=>!0,()=>!0],OCP:[e=>null===F(e.name)&&null===N(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>R(e.markup),()=>!0,()=>!0,()=>!0]};class B extends s().Component{render(){const e=(e,a)=>{const n=a.find((t=>t.value===e));return n?t.formatMessage(n.label,{units:n.value}):e},{intl:t}=this.props,a=[{label:d.Z.costModelsWizardOnboardAws,value:"AWS"},{label:d.Z.azure,value:"Azure"},{label:d.Z.gcp,value:"GCP"},{label:d.Z.costModelsWizardOnboardOcp,value:"OCP"}];return s().createElement(x.Consumer,null,(({currencyUnits:r,dirtyName:l,description:o,name:i,type:c,onCurrencyChange:m,onNameChange:u,onDescChange:p,onTypeChange:g})=>s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl,style:D.titleWithLearnMore},t.formatMessage(d.Z.costModelsWizardGeneralInfoTitle)),s().createElement("a",{href:t.formatMessage(d.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},t.formatMessage(d.Z.learnMore))),s().createElement(n.StackItem,null,s().createElement(O.l,{style:D.form},s().createElement(n.FormGroup,{helperTextInvalid:F(i)&&t.formatMessage(F(i)),validated:null!==F(i)&&l?"error":"default",label:t.formatMessage(d.Z.names,{count:1}),isRequired:!0,fieldId:"name"},s().createElement(n.TextInput,{validated:null!==F(i)&&l?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:i,onChange:u})),s().createElement(n.FormGroup,{helperTextInvalid:N(o)&&t.formatMessage(N(o)),validated:null===N(o)?"default":"error",label:t.formatMessage(d.Z.description),fieldId:"description"},s().createElement(n.TextArea,{style:D.textArea,type:"text",id:"description",name:"description",value:o,validated:null===N(o)?"default":"error",onChange:p})),s().createElement(j.Q,{isRequired:!0,id:"source-type-selector",direction:n.SelectDirection.up,appendMenuTo:"inline",maxHeight:D.selector.maxHeight,label:d.Z.costModelsSourceType,toggleAriaLabel:t.formatMessage(d.Z.costModelsWizardEmptySourceTypeLabel),placeholderText:t.formatMessage(d.Z.costModelsWizardEmptySourceTypeLabel),value:e(c,a),onChange:g,options:a}),s().createElement(j.Q,{label:d.Z.currency,direction:n.SelectDirection.up,appendMenuTo:"inline",maxHeight:D.selector.maxHeight,toggleAriaLabel:t.formatMessage(d.Z.costModelsWizardCurrencyToggleLabel),value:e(r,z.m),onChange:m,id:"currency-units-selector",options:z.m.map((e=>({label:t.formatMessage(e.label,{units:e.value}),value:e.value})))}))))))}}const U=(0,T.X1)((()=>({}))),G=(0,p.ZP)((0,l.connect)(U,{})(B));var q=a(10848);class V extends s().Component{render(){const{intl:e}=this.props,t=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};return s().createElement(x.Consumer,null,(({handleSignChange:a,handleMarkupDiscountChange:r,markup:l,isDiscount:o})=>{const i=(c=l,(0,v.WW)(c)?(0,v.cR)(c)>10?d.Z.markupOrDiscountTooLong:void 0:d.Z.markupOrDiscountNumber);var c;const m=i?"error":"default";return s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl,style:D.titleWithLearnMore},e.formatMessage(d.Z.costCalculationsOptional)),s().createElement("a",{href:e.formatMessage(d.Z.docsCostModelsMarkup),rel:"noreferrer",target:"_blank"},e.formatMessage(d.Z.learnMore))),s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h3",size:"md"},e.formatMessage(d.Z.markupOrDiscount)),s().createElement(n.TextContent,null,s().createElement(n.Text,null,e.formatMessage(d.Z.markupOrDiscountModalDesc)))),s().createElement(n.StackItem,null,s().createElement(n.Flex,{style:q.W.markupRadioContainer},s().createElement(n.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},s().createElement(n.FlexItem,null,s().createElement(n.Radio,{isChecked:!o,name:"discount",label:e.formatMessage(d.Z.markupPlus),"aria-label":e.formatMessage(d.Z.markupPlus),id:"markup",value:"false",onChange:a,style:q.W.markupRadio}),s().createElement(n.Radio,{isChecked:o,name:"discount",label:e.formatMessage(d.Z.discountMinus),"aria-label":e.formatMessage(d.Z.discountMinus),id:"discount",value:"true",onChange:a}))),s().createElement(n.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},s().createElement(n.FlexItem,null,s().createElement(O.l,null,s().createElement(n.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:i?e.formatMessage(i):void 0,style:q.W.rateContainer,validated:m},s().createElement(n.InputGroup,null,s().createElement(n.InputGroupText,{style:q.W.sign},o?e.formatMessage(d.Z.discountMinus):e.formatMessage(d.Z.markupPlus)),s().createElement(n.TextInput,{"aria-label":e.formatMessage(d.Z.rate),id:"markup-input-box",isRequired:!0,onKeyDown:t,onChange:r,placeholder:"0",style:q.W.inputField,type:"text",validated:m,value:l}),s().createElement(n.InputGroupText,{style:q.W.percent},e.formatMessage(d.Z.percentSymbol))))))))),s().createElement(n.StackItem,null,s().createElement("div",{style:q.W.exampleMargin},s().createElement(n.TextContent,null,s().createElement(n.Text,{component:n.TextVariants.h3},e.formatMessage(d.Z.examplesTitle))),s().createElement(n.List,null,s().createElement(n.ListItem,null,e.formatMessage(d.Z.costModelsExamplesNoAdjust)),s().createElement(n.ListItem,null,e.formatMessage(d.Z.costModelsExamplesDoubleMarkup)),s().createElement(n.ListItem,null,e.formatMessage(d.Z.costModelsExamplesReduceZero)),s().createElement(n.ListItem,null,e.formatMessage(d.Z.costModelsExamplesReduceSeventyfive))))))}))}}const w=(0,T.X1)((()=>({}))),_=(0,p.ZP)((0,l.connect)(w,{})(V));var $=a(90),H=a(34660);const K=(0,p.ZP)((({cancel:e,currencyUnits:t,intl:a=u.N,metricsHash:r,submitRate:l})=>{const{tiers:o}=s().useContext(x),i=(0,H.bF)(r,void 0,o),c=s().useMemo((()=>(0,H.Cw)(i)),[i.errors,i.rateKind]);return s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},a.formatMessage(d.Z.costModelsWizardCreatePriceList))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,{component:n.TextVariants.h3},a.formatMessage(d.Z.costModelsWizardPriceListMetric)))),s().createElement(n.StackItem,null,s().createElement(n.Form,null,s().createElement(H.HJ,{currencyUnits:t,metricsHash:r,rateFormData:i}))),s().createElement(n.StackItem,null,s().createElement(n.ActionGroup,null,s().createElement(n.Button,{variant:n.ButtonVariant.primary,isDisabled:!c,onClick:()=>l(i)},a.formatMessage(d.Z.createRate)),s().createElement(n.Button,{variant:n.ButtonVariant.link,onClick:e},a.formatMessage(d.Z.cancel)))))}));var X=a(7081),Q=a(42901),J=a(33735);const Y=(0,p.ZP)((({id:e,intl:t,itemCount:a,perPage:r,page:l,variant:o,onPerPageSelect:i,onSetPage:c})=>s().createElement(n.Toolbar,{id:e},s().createElement(n.ToolbarContent,null,s().createElement(n.ToolbarItem,{variant:"pagination"},s().createElement(n.Pagination,{variant:o,itemCount:a,perPage:r,page:l,onSetPage:c,onPerPageSelect:i,titles:{paginationTitle:t.formatMessage(d.Z.paginationTitle,{title:t.formatMessage(d.Z.createCostModelTitle),placement:"bottom"})}}))))));var ee=a(69732),te=a(44808),ae=a(67581),ne=a(54001),re=a(41552);class se extends s().Component{constructor(){super(...arguments),this.defaultState={metrics:[],measurements:[],sortBy:{index:0,direction:g.SortByDirection.asc}},this.state=Object.assign({},this.defaultState)}render(){const{addRateAction:e,deleteRateAction:t,intl:a,items:r,metricsHash:l}=this.props,o=e=>{const t=e.replace(/ /g,"_").toLowerCase();return a.formatMessage(d.Z.metricValues,{value:t})||e},i=e=>a.formatMessage(d.Z.measurementValues,{value:e.toLowerCase().replace("-","_"),count:1})||e,c=Object.keys(l).map((e=>({label:o(e),value:e}))),m=c.reduce(((e,t)=>{const a=Object.keys(l[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:i(e),value:e})));return[...e,...a]}),[]),u=()=>s().createElement(n.Bullseye,null,s().createElement(n.EmptyState,null,s().createElement(n.EmptyStateIcon,{icon:X.wl}),s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.lg},a.formatMessage(d.Z.costModelsWizardEmptyStateTitle)),s().createElement(n.EmptyStateBody,null,a.formatMessage(d.Z.costModelsWizardEmptyStateSkipStep,{value:s().createElement("strong",null,a.formatMessage(d.Z.next))}),s().createElement("br",null),a.formatMessage(d.Z.costModelsWizardEmptyStateOtherTime))));return s().createElement(x.Consumer,null,(({priceListPagination:l})=>s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},a.formatMessage(d.Z.costModelsWizardCreatePriceList))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,null,a.formatMessage(d.Z.costModelsWizardSubTitleTable)))),s().createElement(n.StackItem,null,s().createElement(J.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:o,setSearch:i,onRemove:p,onSelect:g,onClearAll:h})=>{const E=(l.page-1)*l.perPage,f=l.page*l.perPage,M=r.map(((e,t)=>Object.assign(Object.assign({},e),{stateIndex:t}))).filter((e=>0===o.metrics.length||o.metrics.includes(e.metric.label_metric))).filter((e=>0===o.measurements.length||o.measurements.includes(e.metric.label_measurement))).sort(((e,t)=>{const n=1===this.state.sortBy.index?e=>{return t=e.metric.label_metric,a.formatMessage(d.Z.metricValues,{value:t})||t;var t}:2===this.state.sortBy.index?e=>{return t=e.metric.label_measurement,n=e.metric.label_measurement_unit,n=a.formatMessage(d.Z.units,{units:(0,v.ZV)(n)})||n,a.formatMessage(d.Z.measurementValues,{value:t.toLowerCase().replace("-","_"),units:n,count:2});var t,n}:()=>"";return(0,te.tT)(e,t,this.state.sortBy.direction,n)})),b=M.slice(E,f);return s().createElement(s().Fragment,null,s().createElement(ee.Q,{primary:s().createElement(re.J,{isDisabled:0===r.length,primary:o.primary,setPrimary:e=>i({primary:e}),options:[{label:a.formatMessage(d.Z.metric),value:"metrics"},{label:a.formatMessage(d.Z.measurement),value:"measurements"}]}),selected:o.primary,secondaries:[{component:s().createElement(ne.n,{isDisabled:0===r.length,placeholderText:a.formatMessage(d.Z.toolBarPriceListMeasurementPlaceHolder),selections:o.measurements,setSelections:e=>g("measurements",e),options:m}),name:"measurements",onRemove:p,filters:o.measurements},{component:s().createElement(ne.n,{isDisabled:0===r.length,placeholderText:a.formatMessage(d.Z.toolBarPriceListMetricPlaceHolder),selections:o.metrics,setSelections:e=>g("metrics",e),options:c}),name:"metrics",onRemove:p,filters:o.metrics}],button:s().createElement(n.Button,{onClick:e},a.formatMessage(d.Z.createRate)),onClear:h,pagination:s().createElement(n.Pagination,{isCompact:!0,itemCount:M.length,perPage:l.perPage,page:l.page,onSetPage:l.onPageSet,onPerPageSelect:l.onPerPageSet,titles:{paginationTitle:a.formatMessage(d.Z.paginationTitle,{title:a.formatMessage(d.Z.costModelsAssignSourcesParen),placement:"top"})}})}),0===b.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&s().createElement(n.Bullseye,null,s().createElement(Q.c,null)),0===b.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&s().createElement(u,null),b.length>0&&s().createElement(ae.y,{actions:[{title:a.formatMessage(d.Z.remove),onClick:(e,a,n)=>{t(n.data.stateIndex)}}],isCompact:!0,tiers:b,sortCallback:e=>{this.setState(Object.assign(Object.assign({},this.state),{sortBy:Object.assign({},e)}))}}),s().createElement(Y,{isCompact:!0,itemCount:M.length,perPage:l.perPage,page:l.page,onSetPage:l.onPageSet,onPerPageSelect:l.onPerPageSet,titles:{paginationTitle:a.formatMessage(d.Z.paginationTitle,{title:a.formatMessage(d.Z.costModelsAssignSourcesParen),placement:"bottom"})}}))}))))))}}const le=(0,l.connect)((0,T.X1)((e=>({metricsHash:i.qw.metrics(e)}))))((0,p.ZP)(se)),oe=()=>{const{currencyUnits:e,goToAddPL:t,metricsHash:a,tiers:n,submitTiers:r}=s().useContext(x),[l,o]=s().useState("table");return"table"===l?s().createElement(le,{items:n,deleteRateAction:e=>{const a=[...n.slice(0,e),...n.slice(e+1)];r(a),0===a.length&&t(!0)},addRateAction:()=>{o("form"),t(!1)}}):"form"===l?s().createElement(K,{currencyUnits:e,metricsHash:a,submitRate:s=>{var l;l=(0,H.Nl)(s,a,e),r([...n,l]),o("table"),t(!0)},cancel:()=>{o("table"),t(!0)}}):null};var ie=a(53086),ce=a(56728);const me=(0,p.ZP)((({intl:e})=>s().createElement(x.Consumer,null,(({onClose:t,name:a})=>s().createElement(n.EmptyState,null,s().createElement(n.EmptyStateIcon,{icon:ie.xX,color:"green"}),s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.lg},e.formatMessage(d.Z.costModelsWizardReviewStatusTitle)),s().createElement(n.EmptyStateBody,null,e.formatMessage(d.Z.costModelsWizardReviewStatusSubTitle,{value:a})),s().createElement(n.EmptyStateSecondaryActions,null,s().createElement(n.Button,{variant:"link",onClick:t},e.formatMessage(d.Z.close)))))))),ue=(0,T.X1)((()=>({}))),de=(0,p.ZP)((0,l.connect)(ue,{})((({intl:e})=>s().createElement(x.Consumer,null,(({checked:t,createError:a,currencyUnits:r,description:l,distribution:o,distributePlatformUnallocated:i,distributeWorkerUnallocated:c,isDiscount:m,markup:u,name:p,tiers:g,type:h})=>{const E=Object.keys(t).filter((e=>t[e].selected)).map((e=>t[e].meta));return s().createElement(s().Fragment,null,a&&s().createElement(n.Alert,{variant:"danger",title:`${a}`}),s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(d.Z.costModelsWizardStepsReview))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,null,e.formatMessage(d.Z.costModelsWizardReviewStatusSubDetails,{create:s().createElement("strong",null,e.formatMessage(d.Z.create)),back:s().createElement("strong",null,e.formatMessage(d.Z.back))})))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.TextList,{component:n.TextListVariants.dl},s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.names,{count:1})),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},p),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.description)),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},l),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.currency)),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},e.formatMessage(d.Z.currencyOptions,{units:r})),"OCP"===h&&s().createElement(s().Fragment,null,s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.priceList)),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},g.length>0?s().createElement(ae.y,{tiers:g}):e.formatMessage(d.Z.costModelsWizardNoRatesAdded))),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.costModelsWizardReviewMarkDiscount)),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},e.formatMessage(d.Z.percent,{value:m?"-"+u:u})),"OCP"===h&&s().createElement(s().Fragment,null,s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.costDistribution)),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},e.formatMessage(d.Z.distributionTypeDesc,{type:o})),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},e.formatMessage(d.Z.distributeCosts,{value:i,type:"platform"})),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},e.formatMessage(d.Z.distributeCosts,{value:c,type:"worker"}))),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dt},e.formatMessage(d.Z.costModelsAssignSources,{count:2})," ",E.find((e=>Boolean(e.costmodel)))&&s().createElement(ce.a,{text:e.formatMessage(d.Z.costModelsWizardWarningSources)})),s().createElement(n.TextListItem,{component:n.TextListItemVariants.dd},E.map((e=>e.name)).join(", ")))))))}))))),pe=()=>s().createElement(x.Consumer,null,(({createSuccess:e})=>e?s().createElement(me,null):s().createElement(de,null)));var ge=a(261),he=a(56790),Ee=a(30537),fe=a(76889),Me=a(80810);const be=({id:e,placeholder:t="",value:a,onChange:r,onSearch:l})=>s().createElement(n.InputGroup,null,s().createElement(n.TextInput,{value:a,placeholder:t,id:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==a&&l(e)}}),s().createElement(n.InputGroupText,{style:{borderLeft:"0"}},s().createElement(Me.W1,null))),ye=(0,p.ZP)((({intl:e,filterInputProps:t,paginationProps:a,filter:r})=>s().createElement(n.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:r.onClearAll},s().createElement(n.ToolbarContent,null,s().createElement(n.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:s().createElement(fe.k1,null)},s().createElement(n.ToolbarItem,{variant:"search-filter"},s().createElement(n.ToolbarFilter,{deleteChip:r.onRemove,chips:r.query.name,categoryName:"name"},s().createElement(be,Object.assign({placeholder:e.formatMessage(d.Z.costModelsFilterPlaceholder)},t))))),s().createElement(n.ToolbarItem,{variant:"pagination"},s().createElement(n.Pagination,{isCompact:a.isCompact,itemCount:a.itemCount,page:a.page,perPage:a.perPage,onSetPage:a.onSetPage,onPerPageSelect:a.onPerPageSelect,titles:{paginationTitle:e.formatMessage(d.Z.paginationTitle,{title:e.formatMessage(d.Z.costModelsAssignSourcesParen),placement:"bottom"})}})))))),Ce=(0,p.ZP)((({intl:e})=>s().createElement(x.Consumer,null,(({checked:t,loading:a,onSourceSelect:r,sources:l,perPage:o,page:i,type:c,query:m,fetchSources:u,filterName:p,onFilterChange:h})=>{const E="Azure"===c?"Azure":c,f=l.length>0?l[0].meta.count:0;return s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.xl},e.formatMessage(d.Z.costModelsWizardSourceTitle))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,null,e.formatMessage(d.Z.costModelsWizardSourceSubtitle)))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,{component:n.TextVariants.h3},e.formatMessage(d.Z.costModelsWizardSourceCaption,{value:c.toLowerCase()})))),s().createElement(n.StackItem,null,s().createElement(ye,{filter:{onRemove:(e,t)=>u(E,(0,Ee.fg)(m)(e,t),1,o),onClearAll:()=>u(E,{},1,o),query:m},filterInputProps:{id:"assign-source-search-input",value:p,onChange:h,onSearch:()=>{u(E,(0,Ee.xZ)(m)("name",p),1,o)}},paginationProps:{isCompact:!0,itemCount:f,perPage:o,page:i,onSetPage:(e,t)=>{u(E,m,t,o)},onPerPageSelect:(e,t)=>u(E,m,1,t)}}),a?s().createElement(ge.G,null):s().createElement(g.TableComposable,{"aria-label":e.formatMessage(d.Z.costModelsWizardSourceTableAriaLabel)},s().createElement(g.Thead,null,s().createElement(g.Tr,null,["",e.formatMessage(d.Z.names,{count:1}),e.formatMessage(d.Z.costModelsWizardSourceTableCostModel)].map(((e,t)=>s().createElement(g.Th,{key:t},e))))),s().createElement(g.Tbody,null,l.map(((a,l)=>s().createElement(g.Tr,{key:l},s().createElement(g.Td,null,s().createElement(n.Checkbox,{onChange:e=>{r(l,e)},id:a.name,key:a.name,"aria-label":e.formatMessage(d.Z.selectRow,{value:l}),isChecked:t[a.uuid]&&t[a.uuid].selected,isDisabled:Boolean(a.costmodel)})),s().createElement(g.Td,null,a.name," ",Boolean(a.costmodel)&&s().createElement(ce.a,{key:`wrng-${a.name}`,text:e.formatMessage(d.Z.costModelsWizardSourceWarning,{costModel:a.costmodel})})),s().createElement(g.Td,null,a.costmodel?a.costmodel:"")))))),s().createElement(Y,{itemCount:f,perPage:o,page:i,titles:{paginationTitle:e.formatMessage(d.Z.paginationTitle,{title:e.formatMessage(d.Z.sources),placement:"bottom"})},onSetPage:(e,t)=>{u(E,m,t,o)},onPerPageSelect:(e,t)=>u(E,m,1,t)})))}))));class Se extends s().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:a,perPage:n,fetchSources:r}=this.context;r("Azure"===e?"Azure":e,t,a,n)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?s().createElement(ge.G,null):this.context.apiError?s().createElement(he.Bu,{onRefresh:this.fetchData}):s().createElement(Ce,null)}render(){return this.renderContent()}}Se.contextType=x;const Te=Se,ve=(e,t="USD")=>{const a=(0,S.cloneDeep)(e);return a.map((e=>{if(e.tiered_rates)for(const a of e.tiered_rates)a.unit=t,a.usage.unit=t;if(e.tag_rates)for(const a of e.tag_rates.tag_values)a.unit=t})),a},Ze=(0,p.ZP)((({intl:e,isProcess:t,isSuccess:a,closeFnc:r,isOpen:l,onMove:o,validators:i,steps:c,current:m=1,context:u,setError:p,setSuccess:g,updateCostModel:h})=>{const E=c.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:m>t})));E[m-1].enableNext=i[m-1](u);const f="OCP"===u.type&&2===m&&!i[m-1](u);return m===c.length&&""!==u.type&&(E[m-1].nextButtonText=e.formatMessage(d.Z.create)),l?s().createElement(n.Wizard,{isOpen:!0,title:e.formatMessage(d.Z.createCostModelTitle),description:e.formatMessage(d.Z.createCostModelDesc),steps:E,startAtStep:m,onNext:o,onBack:o,onGoToStep:o,onClose:r,footer:a||t||f?s().createElement("div",null):null,onSave:()=>{const{currency:e,description:t,distribution:a,distributePlatformUnallocated:n,distributeWorkerUnallocated:r,isDiscount:s,markup:l,name:o,type:i,tiers:c,sources:m}=u;(0,C.Rl)({name:o,source_type:i,currency:e,description:t,distribution_info:{distribution_type:a,platform_cost:n,worker_cost:r},rates:c,markup:{value:`${s?"-":""}${(0,v.E3)(l)}`,unit:"percent"},source_uuids:m.map((e=>e.uuid))}).then((()=>{g(),h()})).catch((e=>p((0,$.L)(e))))}}):null}));class Pe extends s().Component{constructor(){super(...arguments),this.defaultState={apiError:null,checked:{},createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,Z.tk)(),dataFetched:!1,dirtyName:!1,description:"",distribution:"cpu",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,filterName:"",isDialogOpen:!1,isDiscount:!1,loading:!1,markup:"0",name:"",page:1,perPage:10,priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},query:{},sources:[],step:1,tiers:[],total:0,type:""},this.state=Object.assign({},this.defaultState)}render(){const{metricsHash:e,intl:t}=this.props,a=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},r=s().createElement(n.Button,{key:"cancel",variant:"link",onClick:a},t.formatMessage(d.Z.createCostModelNoContinue)),l=s().createElement(n.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},this.defaultState))},t.formatMessage(d.Z.createCostModelExitYes));return s().createElement(x.Provider,{value:{apiError:this.state.apiError,checked:this.state.checked,clearQuery:()=>this.setState({query:{}}),createError:this.state.createError,createProcess:this.state.createProcess,createSuccess:this.state.createSuccess,currencyUnits:this.state.currencyUnits,description:this.state.description,dataFetched:this.state.dataFetched,dirtyName:this.state.dirtyName,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,error:this.state.error,filterName:this.state.filterName,fetchSources:(e,t,a,n)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:a,query:n})=>{const r=(t-1)*a,s=a,l=Object.keys(n).reduce(((e,t)=>e?`${e}&${t}=${n[t]}`:`${t}=${n[t]}`),"");return(0,P.s)(`type=${e}&limit=${s}&offset=${r}&${l}`).then((e=>{const t=e.data;return t.data.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),meta:t.meta})))}))})({type:e,query:t,page:a,perPage:n}).then((e=>this.setState({sources:e,query:t,page:a,perPage:n,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),handleDistributionChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({distribution:a})},handleDistributePlatformUnallocatedChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({distributePlatformUnallocated:"true"===a})},handleDistributeWorkerUnallocatedChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({distributeWorkerUnallocated:"true"===a})},handleMarkupDiscountChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({markup:a})},handleSignChange:(e,t)=>{const{value:a}=t.currentTarget;this.setState({isDiscount:"true"===a})},isDiscount:this.state.isDiscount,loading:this.state.loading,metricsHash:e,onClose:()=>this.setState(Object.assign({},this.defaultState),this.props.closeWizard),onCurrencyChange:e=>this.setState({currencyUnits:e,tiers:ve(this.state.tiers,e)}),onDescChange:e=>this.setState({description:e}),onFilterChange:e=>this.setState({filterName:e}),onNameChange:e=>this.setState({name:e,dirtyName:!0}),onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),onSourceSelect:(e,t)=>{if(-1===e){const e=this.state.sources.map((e=>({[e.uuid]:{selected:t,meta:e}}))),a=Object.assign(Object.assign({},this.state.checked),e);return this.setState({checked:a})}const a=Object.assign(Object.assign({},this.state.checked),{[this.state.sources[e].uuid]:{selected:t,meta:this.state.sources[e]}});return this.setState({checked:a})},onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),page:this.state.page,priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},markup:this.state.markup,name:this.state.name,perPage:this.state.perPage,query:this.state.query,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),sources:this.state.sources,step:this.state.step,submitTiers:e=>{this.setState({tiers:e})},tiers:this.state.tiers,total:this.state.total,type:this.state.type}},s().createElement(Ze,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},this.defaultState),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(d.Z.costModelsWizardStepsGenInfo),component:s().createElement(G,null)}],Azure:[{id:1,name:t.formatMessage(d.Z.costModelsWizardStepsGenInfo),component:s().createElement(G,null)},{id:2,name:t.formatMessage(d.Z.costCalculations),component:s().createElement(_,null)},{id:3,name:t.formatMessage(d.Z.costModelsWizardStepsSources),component:s().createElement(Te,null)},{id:4,name:t.formatMessage(d.Z.costModelsWizardStepsReview),component:s().createElement(pe,null)}],AWS:[{id:1,name:t.formatMessage(d.Z.costModelsWizardStepsGenInfo),component:s().createElement(G,null)},{id:2,name:t.formatMessage(d.Z.costCalculations),component:s().createElement(_,null)},{id:3,name:t.formatMessage(d.Z.costModelsWizardStepsSources),component:s().createElement(Te,null)},{id:4,name:t.formatMessage(d.Z.costModelsWizardStepsReview),component:s().createElement(pe,null)}],GCP:[{id:1,name:t.formatMessage(d.Z.costModelsWizardStepsGenInfo),component:s().createElement(G,null)},{id:2,name:t.formatMessage(d.Z.costCalculations),component:s().createElement(_,null)},{id:3,name:t.formatMessage(d.Z.costModelsWizardStepsSources),component:s().createElement(Te,null)},{id:4,name:t.formatMessage(d.Z.costModelsWizardStepsReview),component:s().createElement(pe,null)}],OCP:[{id:1,name:t.formatMessage(d.Z.costModelsWizardStepsGenInfo),component:s().createElement(G,null)},{id:2,name:t.formatMessage(d.Z.priceList),component:s().createElement(oe,null)},{id:3,name:t.formatMessage(d.Z.costCalculations),component:s().createElement(_,null)},{id:4,name:t.formatMessage(d.Z.costDistribution),component:s().createElement(W,null)},{id:5,name:t.formatMessage(d.Z.costModelsWizardStepsSources),component:s().createElement(Te,null)},{id:6,name:t.formatMessage(d.Z.costModelsWizardStepsReview),component:s().createElement(pe,null)}]}[this.state.type],current:this.state.step,validators:A[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,currency:this.state.currencyUnits,description:this.state.description,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,markup:`${this.state.isDiscount?"-":""}${this.state.markup}`,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:Object.keys(this.state.checked).map((e=>this.state.checked[e].meta))}}),s().createElement(n.Modal,{"aria-label":t.formatMessage(d.Z.createCostModelExit),isOpen:this.state.isDialogOpen,header:s().createElement(n.Title,{headingLevel:"h1",size:n.TitleSizes["2xl"]},s().createElement(y.LP,{color:"orange"})," ",t.formatMessage(d.Z.createCostModelExit)),onClose:a,actions:[l,r],variant:"small"},t.formatMessage(d.Z.createCostModelConfirmMsg)))}}const ke=(0,l.connect)((0,T.X1)((e=>({metricsHash:i.qw.metrics(e)}))),{fetch:o.F0.fetchCostModels})((0,p.ZP)(Pe)),xe=(0,p.ZP)((0,l.connect)((e=>({canWrite:c.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,a)=>{const{intl:r=u.N}=a,{canWrite:l}=e,{openWizard:o}=t;return{isDisabled:!l,tooltip:r.formatMessage(d.Z.costModelsReadOnly),children:s().createElement(n.Button,{isDisabled:!l,onClick:o},r.formatMessage(d.Z.costModelsWizardCreateCostModel))}}))(b.j)),Oe=(0,l.connect)((e=>({isOpen:o.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(o.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:a}=e,{openWizard:n,closeWizard:r}=t;return{isOpen:a,openWizard:n,closeWizard:r}}))(ke);function De({head:e,body:t,sources:a}){return s().createElement(n.Stack,{hasGutter:!0},s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,null,e))),s().createElement(n.StackItem,null,s().createElement(n.TextContent,null,s().createElement(n.Text,null,t),s().createElement(n.TextList,{component:n.TextListVariants.ol},a.map((e=>s().createElement(n.TextListItem,{key:e},e)))))))}const Ie=(0,p.ZP)((0,l.connect)((e=>({isOpen:o.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:o.E6.deleteProcessing(e),deleteError:o.E6.deleteError(e),dialogData:o.E6.dialogData(e)})),(e=>({closeDialog:()=>e(o.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>o.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,a)=>{const{intl:r=u.N}=a,l=(o=e.isLoading,i=e.isOpen,c=e.deleteError,i?o?"loading":c?"failure":"open":"close");var o,i,c;const m=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,p=m?m.name:"",g=m?m.sources.map((e=>e.name)):[],h=m?m.uuid:"",E=function({status:e,deleteText:t,deleteAction:a,cancelText:r,cancelAction:l,sourcesNo:o}){let i=[];return"loading"===e&&(i=[s().createElement(n.Button,{key:"pending_delete",variant:n.ButtonVariant.danger,isDisabled:!0},t),s().createElement(n.Button,{key:"pending_cancel",variant:n.ButtonVariant.link,isDisabled:!0},r)]),["failure","open"].includes(e)&&o>0&&(i=[s().createElement(n.Button,{key:"sources_cancel",variant:n.ButtonVariant.link,onClick:l},r)]),["failure","open"].includes(e)&&0===o&&(i=[s().createElement(n.Button,{key:"delete",variant:n.ButtonVariant.danger,onClick:a},t),s().createElement(n.Button,{key:"cancel",variant:n.ButtonVariant.link,onClick:l},r)]),i}({status:l,deleteText:r.formatMessage(d.Z.costModelsDelete),deleteAction:()=>t.deleteCostModel(h),cancelText:r.formatMessage(d.Z.cancel),cancelAction:t.closeDialog,sourcesNo:g.length}),f=function({status:e,sources:t,error:a,cannotDeleteTitle:r,cannotDeleteBody:l,canDeleteBody:o}){return"close"!==e&&t.length>0?s().createElement(De,{head:r,body:l,sources:t}):"close"!==e&&0===t.length?s().createElement(n.Stack,{hasGutter:!0},"failure"===e?s().createElement(n.StackItem,null,s().createElement(n.Alert,{variant:n.AlertVariant.danger,title:a})):null,s().createElement(n.StackItem,null,o)):void 0}({status:l,sources:g,error:e.deleteError,cannotDeleteTitle:r.formatMessage(d.Z.costModelsDeleteSource),cannotDeleteBody:r.formatMessage(d.Z.costModelsCanNotDelete,{name:p}),canDeleteBody:r.formatMessage(d.Z.costModelsCanDelete,{name:p})});return{actions:E,isOpen:"close"!==l,variant:n.ModalVariant.small,"aria-label":r.formatMessage(d.Z.costModelsDelete),title:r.formatMessage(d.Z.costModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:f}}))(n.Modal)),Le=Ie;var We=a(91290);const ze={headerContent:{display:"flex",justifyContent:"space-between"}},je=(0,p.ZP)((0,l.connect)(((e,t)=>{const{intl:a}=t;return{children:s().createElement(s().Fragment,null,a.formatMessage(d.Z.costModels),s().createElement(n.Popover,{"aria-label":a.formatMessage(d.Z.costModelsPopoverAriaLabel),bodyContent:a.formatMessage(d.Z.costModelsPopover,{learnMore:s().createElement("a",{href:a.formatMessage(d.Z.docsUsingCostModels),rel:"noreferrer",target:"_blank"},a.formatMessage(d.Z.learnMore))}),enableFlip:!0},s().createElement(n.Button,{"aria-label":a.formatMessage(d.Z.costModelsPopoverButtonAriaLabel),variant:n.ButtonVariant.plain},s().createElement(We.iC,null))))}}))((function({children:e}){return s().createElement("div",{style:ze.headerContent},s().createElement(n.TextContent,null,s().createElement(n.Title,{headingLevel:"h1",size:n.TitleSizes["2xl"]},e)))})));var Fe=a(15984),Ne=a(39836),Re=a(91919);const Ae=function(e){return s().createElement(n.EmptyState,{className:"pf-m-redhat-font"},s().createElement(n.EmptyStateIcon,{icon:e.icon}),s().createElement(n.Title,{headingLevel:"h2",size:n.TitleSizes.lg},e.title),s().createElement(n.EmptyStateBody,null,e.description),e.actions?e.actions:null)},Be=(0,p.ZP)((({intl:e=u.N})=>s().createElement(Ae,{title:e.formatMessage(d.Z.costModelsEmptyState),description:e.formatMessage(d.Z.costModelsEmptyStateDesc),icon:X.wl,actions:s().createElement(s().Fragment,null,s().createElement(xe,null),s().createElement("br",null),s().createElement("br",null),s().createElement("a",{href:e.formatMessage(d.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(d.Z.costModelsEmptyStateLearnMore)))})));var Ue=a(68025);class Ge extends s().Component{constructor(){super(...arguments),this.defaultState={dialogSource:null,activeSortDirection:"asc",activeSortIndex:0},this.state=Object.assign({},this.defaultState)}render(){const{intl:e=u.N,canWrite:t,costData:a,openDeleteDialog:r,query:l,router:o,stateName:i}=this.props,c=function(e,t){let a=null;return"loading"===e&&(a=s().createElement(ge.G,null)),"empty"===e&&(a=s().createElement(Be,null)),"no-match"===e&&(a=s().createElement(Q.c,null)),"failure"===e&&(a=s().createElement(Fe.Z,null)),null!==a?[{heightAuto:!0,cells:[{props:{colSpan:5},title:s().createElement(n.Bullseye,null," ",a," ")}]}]:t.map((e=>{const t=u.N.formatDate(e.updated_timestamp,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"short",timeZone:"UTC",timeZoneName:"short",year:"numeric"});return{cells:[{title:s().createElement(Ne.Link,{to:`${(0,Ue.dI)(Re._.costModelsDetails.path)}/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),t],data:{costModel:e}}}))}(i,a),m=[Object.assign({title:e.formatMessage(d.Z.names,{count:1}),data:{orderName:"name"}},c.length&&{transforms:[g.sortable]}),{title:e.formatMessage(d.Z.description)},Object.assign({title:e.formatMessage(d.Z.costModelsSourceType),data:{orderName:"source_type"}},c.length&&{transforms:[g.sortable]}),{title:e.formatMessage(d.Z.costModelsAssignedSources)},Object.assign({title:e.formatMessage(d.Z.costModelsLastChange),data:{orderName:"updated_timestamp"}},c.length&&{transforms:[g.sortable]}),{title:"",props:{"aria-label":e.formatMessage(d.Z.costModelsActions)}}],p=function(e,t,a){return"success"!==e?[]:a.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(i,t,[{title:e.formatMessage(d.Z.delete),tooltip:e.formatMessage(d.Z.costModelsReadOnly),onClick:(e,t,a)=>{r(a.data)}}]),h=function(e,t,a){return function(n,r,s){const l=e[r]&&e[r].data?e[r].data.orderName:null;null!==l&&(s!==g.SortByDirection.asc?a.navigate(E(Object.assign(Object.assign({},t),{ordering:`-${l}`}))):a.navigate(E(Object.assign(Object.assign({},t),{ordering:l}))))}}(m,l,o),f=e=>({sortBy:{index:this.state.activeSortIndex,direction:this.state.activeSortDirection,defaultDirection:"asc"},onSort:(e,t,a)=>{this.setState(Object.assign(Object.assign({},this.state),{activeSortDirection:a,activeSortIndex:t})),h(e,t,a)},columnIndex:e});return s().createElement(n.PageSection,{variant:n.PageSectionVariants.light},s().createElement(g.TableComposable,{"aria-label":e.formatMessage(d.Z.costModelsTableAriaLabel),gridBreakPoint:g.TableGridBreakpoint.grid2xl},s().createElement(g.Thead,null,s().createElement(g.Tr,null,m.map(((e,t)=>s().createElement(g.Th,{key:t,sort:e.transforms?f(t):void 0},e.title))),s().createElement(g.Th,null))),s().createElement(g.Tbody,null,c.map(((e,t)=>s().createElement(g.Tr,{key:t},e.cells.map(((e,t)=>s().createElement(g.Td,{key:t},e.title?e.title:e))),s().createElement(g.Td,{isActionCell:!0},s().createElement(g.ActionsColumn,{items:p.map((a=>Object.assign(Object.assign({},a),{onClick:n=>a.onClick(n,t,e,null)})))}))))))))}}const qe=(0,T.X1)((e=>({canWrite:c.c5.isCostModelWritePermission(e),query:o.E6.query(e),costData:o.E6.costModels(e),stateName:o.E6.stateName(e)}))),Ve=(0,l.connect)(qe,(e=>{const t=o.F0.setCostModelDialog;return{openDeleteDialog:a=>e(t({name:"deleteCostModel",isOpen:!0,meta:a}))}}))(Ge),we=(0,p.ZP)((0,m.E)(Ve)),_e=({placeholder:e="",value:t,onChange:a,onKeyPress:r})=>s().createElement(n.InputGroup,null,s().createElement(n.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:a,onKeyPress:e=>{"Enter"===e.key&&""!==t&&r(e)}}),s().createElement(n.InputGroupText,{style:{borderLeft:"0"}},s().createElement(Me.W1,null))),$e=(e,t,a,n)=>r=>{if("Enter"===r.key&&""!==n.value){const r=n.value;e.navigate(E(Object.assign(Object.assign({},a),{[t]:a[t]?`${a[t]},${r}`:r}))),n.setValue("")}},He=(e,t,a)=>(n,r)=>{const s=a[t]?a[t].split(",").filter((e=>e!==r)):null;e.navigate(E(Object.assign(Object.assign({},a),{[t]:null===s||0===s.length?null:s.join(",")})))},Ke=(e,t,a)=>()=>{e.navigate(E(Object.assign(Object.assign({},t),{[a]:null})))},Xe=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,a)=>{const{intl:n=u.N,router:r}=a,{filterType:s,query:l}=e,o=l.description?l.description.split(","):[];return{categoryName:n.formatMessage(d.Z.description),chips:o,deleteChip:He(r,"description",Object.assign(Object.assign({},h),l)),deleteChipGroup:Ke(r,Object.assign(Object.assign({},h),l),"description"),filterType:s,intl:n,query:l,router:r}}))((({deleteChip:e,deleteChipGroup:t,filterType:a,intl:r,chips:l,categoryName:o,query:i,router:c})=>{const[m,u]=s().useState(""),p="description"===a?s().createElement(_e,{placeholder:r.formatMessage(d.Z.filterByPlaceholder,{value:a}),value:m,onChange:e=>u(e),onKeyPress:$e(c,"description",Object.assign(Object.assign({},h),i),{value:m,setValue:u})}):null;return s().createElement(n.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:l,categoryName:o},p)})),Qe=(0,p.ZP)((0,m.E)(Xe)),Je=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,a)=>{const{intl:n=u.N,router:r}=a,{filterType:s,query:l}=e,o=l.name?l.name.split(","):[];return{deleteChip:He(r,"name",Object.assign(Object.assign({},h),l)),deleteChipGroup:Ke(r,Object.assign(Object.assign({},h),l),"name"),filterType:s,chips:o,categoryName:n.formatMessage(d.Z.names,{count:1}),intl:n,query:l,router:r}}))((({deleteChip:e,deleteChipGroup:t,filterType:a,intl:r,chips:l,categoryName:o,query:i,router:c})=>{const[m,u]=s().useState(""),p="name"===a?s().createElement(_e,{placeholder:r.formatMessage(d.Z.filterByPlaceholder,{value:a}),value:m,onChange:e=>u(e),onKeyPress:$e(c,"name",Object.assign(Object.assign({},h),i),{value:m,setValue:u})}):null;return s().createElement(n.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:l,categoryName:o},p)})),Ye=(0,p.ZP)((0,m.E)(Je)),et=(e,t)=>()=>{t(!1);const a=document.getElementById(e);a&&a.focus()},tt=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e),query:o.E6.query(e)})),void 0,((e,t,a)=>{const{intl:n=u.N,router:r}=a,{filterType:s,query:l}=e;return{chips:l.source_type?[l.source_type]:[],categoryName:n.formatMessage(d.Z.costModelsSourceType),deleteChip:Ke(r,Object.assign(Object.assign({},h),l),"source_type"),filterType:s,intl:n,query:l,router:r}}))((({deleteChip:e,deleteChipGroup:t,filterType:a,intl:r,chips:l,categoryName:o,query:i,router:c})=>{const[m,u]=s().useState(!1),p="source-type-filter",g=e=>c.navigate(E(Object.assign(Object.assign(Object.assign({},h),i),{source_type:e}))),f="sourceType"===a?s().createElement(n.Dropdown,{onSelect:et(p,u),isOpen:m,toggle:s().createElement(n.DropdownToggle,{onToggle:e=>{u(e)},id:p},r.formatMessage(d.Z.filterByPlaceholder,{value:"source_type"})),dropdownItems:[s().createElement(n.DropdownItem,{key:"aws",component:"button",onClick:()=>g("aws")},r.formatMessage(d.Z.aws)),s().createElement(n.DropdownItem,{key:"azure",component:"button",onClick:()=>g("azure")},r.formatMessage(d.Z.azure)),s().createElement(n.DropdownItem,{key:"ocp",component:"button",onClick:()=>g("ocp")},r.formatMessage(d.Z.openShift))]}):null;return s().createElement(n.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:l,categoryName:o},f)})),at=(0,p.ZP)((0,m.E)(tt)),nt=(0,m.E)((0,l.connect)((e=>({query:o.E6.query(e)})),void 0,((e,t,a)=>{const{children:n,router:r}=a,{query:s}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>r.navigate(E(Object.assign(Object.assign(Object.assign({},h),s),{description:null,source_type:null,name:null}))),children:n}}))(n.Toolbar)),rt=(0,l.connect)((e=>({filterType:o.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(o.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,a)=>{const{intl:n=u.N}=a,{filterType:r}=e;return{filterType:r,intl:n,updateFilterType:t.updateFilterType}}))((({filterType:e,intl:t,updateFilterType:a})=>{const[r,l]=s().useState(!1),o=[s().createElement(n.SelectOption,{key:"name",value:"name"},t.formatMessage(d.Z.names,{count:1})),s().createElement(n.SelectOption,{key:"description",value:"description"},t.formatMessage(d.Z.description)),s().createElement(n.SelectOption,{key:"sourceType",value:"sourceType"},t.formatMessage(d.Z.costModelsSourceType))];return s().createElement(n.Select,{isOpen:r,onSelect:(e,t)=>{a(t),l(!1)},onToggle:l,selections:e,toggleIcon:s().createElement(fe.k1,null),variant:n.SelectVariant.single},o)})),st=(0,p.ZP)((0,m.E)(rt)),lt=(0,m.E)((0,l.connect)((e=>{const{count:t,page:a,perPage:n}=o.E6.pagination(e);return{count:t,page:a,perPage:n,query:o.E6.query(e)}}),void 0,((e,t,a)=>{const{router:r}=a,{count:s,page:l,perPage:o,query:i}=e;return{isCompact:!0,itemCount:s,page:l,perPage:o,variant:n.PaginationVariant.top,onSetPage:(e,t,a)=>{r.navigate(E(Object.assign(Object.assign(Object.assign({},h),i),{offset:f(t,a)})))},onPerPageSelect:(e,t)=>{r.navigate(E(Object.assign(Object.assign(Object.assign({},h),i),{limit:t,offset:0})))}}}))(n.Pagination)),ot=()=>s().createElement(nt,null,s().createElement(n.ToolbarContent,null,s().createElement(n.ToolbarGroup,{variant:"filter-group"},s().createElement(n.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:s().createElement(fe.k1,null)},s().createElement(n.ToolbarItem,null,s().createElement(st,null)),s().createElement(n.ToolbarItem,null,s().createElement(Ye,null),s().createElement(Qe,null),s().createElement(at,null))),s().createElement(n.ToolbarItem,null,s().createElement(xe,null))),s().createElement(n.ToolbarItem,{variant:n.ToolbarItemVariant.pagination},s().createElement(lt,null))));class it extends s().Component{componentDidMount(){this.props.getCostModelsData(this.props.search.slice(1)),this.props.getRbacData(),this.props.getMetricsData()}componentDidUpdate(e){e.search!==this.props.search&&this.props.getCostModelsData(this.props.search.slice(1))}render(){return s().createElement(s().Fragment,null,s().createElement(n.PageSection,{variant:n.PageSectionVariants.light},s().createElement(je,null)),s().createElement(n.PageSection,{isFilled:!0},s().createElement(Oe,null),s().createElement(Le,null),s().createElement(ot,null),s().createElement(we,null),s().createElement(M,null)))}}const ct=(0,m.E)((0,l.connect)(((e,t)=>({search:t.router.location.search})),(e=>({getCostModelsData:t=>o.F0.fetchCostModels(t)(e),getRbacData:()=>c.O9.fetchRbac()(e),getMetricsData:()=>i.Wg.fetchMetrics()(e)})))(it))}}]);
//# sourceMappingURL=../sourcemaps/7602.96e57277d554a351f1d3d5aaea5d5c95.js.map