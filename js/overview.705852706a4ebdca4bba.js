"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{52636:(e,t,r)=>{r.d(t,{Xk:()=>o,rU:()=>a});var s=r(40400);const a={name:"CalculatorIcon",height:512,width:448,svgPath:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z",yOffset:0,xOffset:0},o=(0,s.IU)(a)},53086:(e,t,r)=>{r.d(t,{xX:()=>o,yK:()=>a});var s=r(40400);const a={name:"OkIcon",height:1024,width:1024,svgPath:"M668.3,361.4 L465.1,564.6 L352.2,451.7 C346.210177,445.698444 338.079189,442.325817 329.6,442.325817 C321.120811,442.325817 312.989823,445.698444 307,451.7 L261.8,496.9 C255.798444,502.889823 252.425817,511.020811 252.425817,519.5 C252.425817,527.979189 255.798444,536.110177 261.8,542.1 L442.4,722.7 C448.389823,728.701556 456.520811,732.074183 465,732.074183 C473.479189,732.074183 481.610177,728.701556 487.6,722.7 L758.6,451.7 C764.601556,445.710177 767.974183,437.579189 767.974183,429.1 C767.974183,420.620811 764.601556,412.489823 758.6,406.5 L713.4,361.3 C700.916226,348.87879 680.728569,348.923552 668.3,361.4 M512.1,127.9 C300.3,127.9 128.1,300.2 128.1,511.9 C128.1,723.8 300.3,895.9 512.1,895.9 C723.9,895.9 896.1,723.7 896.1,511.9 C896.1,300.1 723.8,127.9 512.1,127.9 M512.1,1024 C229.7,1024 0,794.3 0,512 C0,229.7 229.7,0 512.1,0 C794.3,0 1024,229.7 1024,512 C1024,794.3 794.3,1024 512.1,1024",yOffset:0,xOffset:0},o=(0,s.IU)(a)},37610:(e,t,r)=>{r.d(t,{T:()=>a});var s=r(80129);function a(e){return(0,s.stringify)(e,{encode:!1,indices:!1})}},91882:(e,t,r)=>{r.d(t,{W:()=>c});var s=r(49382),a=r(12289),o=r(40794),n=r(11331),i=r(43789);const c={costColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end",paddingRight:0},defaultLabel:{minWidth:"50px"},emptyState:{backgroundColor:s.ZP.value,display:"flex",justifyContent:"center",paddingTop:n.ZP.value,height:"35vh",width:"100%"},infoArrow:{position:"relative"},infoArrowDesc:{bottom:i.ZP.value},infoDescription:{color:a.ZP.value,fontSize:o.ZP.value},lastItem:{textAlign:"right",paddingRight:"3.8rem"},lastItemColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end"},managedColumn:{textAlign:"right"},nameColumn:{width:"1%"}}},86729:(e,t,r)=>{r.d(t,{w:()=>g});var s=r(90154),a=r(52636),o=r(40227),n=r(97027),i=r(92950),c=r.n(i),l=r(74806),p=r(42901),u=r(72483),m=r(5842),d=r(91882);class h extends c().Component{constructor(e){super(e),this.getEmptyState=()=>{const{filterBy:e,intl:t,isOptimizations:r}=this.props;if(e)for(const t of Object.values(e))if("*"!==t)return c().createElement(p.c,{filter:t,showMargin:!1});return r?c().createElement(u.Y,null):c().createElement(s.EmptyState,null,c().createElement(s.EmptyStateIcon,{icon:a.Xk}),c().createElement(s.EmptyStateBody,null,t.formatMessage(n.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,orderBy:r}=this.props,s=r&&r[t[e].orderBy];return s?{index:e,direction:s}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSelect=(e,t,r)=>{const{onSelected:s,rows:a}=this.props;let o,n=[];-1===r?o=a.map((e=>(e.selected=t,e))):(o=[...a],o[r].selected=t,n=[o[r].item]),this.setState({rows:a},(()=>{s&&s(n,t)}))},this.handleOnSort=(e,t,r)=>{const{columns:s,onSort:a}=this.props;a&&a(s[t].orderBy,r===o.SortByDirection.asc)},this.handleOnRowClick=(e,t)=>{const{onRowClick:r,rows:s}=this.props;s.map((e=>e.selected=!1)),s[t].selected=!0,this.setState({rows:s},(()=>{r&&r(e,t)}))},this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isActionsCell:r=!1,isLoading:a,isOptimizations:i,rows:l}=this.props;return c().createElement(c().Fragment,null,c().createElement(o.TableComposable,{"aria-label":t.formatMessage(n.Z.dataTableAriaLabel),className:"tableOverride",gridBreakPoint:"grid-2xl",hasSelectableRowCaption:i,variant:o.TableVariant.compact},c().createElement(o.Thead,null,c().createElement(o.Tr,null,e.map(((e,t)=>c().createElement(o.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),c().createElement(o.Tbody,null,a?c().createElement(o.Tr,null,c().createElement(o.Td,{colSpan:100},c().createElement(s.Bullseye,null,c().createElement("div",{style:{textAlign:"center"}},c().createElement(s.Spinner,{size:"xl"}))))):l.map(((t,s)=>c().createElement(o.Tr,{isSelectable:i,isHoverable:i,isRowSelected:i&&t.selected,onRowClick:i?e=>this.handleOnRowClick(e,s):void 0,key:`row-${s}`},t.cells.map(((a,n)=>0!==n||i?c().createElement(o.Td,{dataLabel:e[n].name,key:`cell-${s}-${n}`,modifier:"nowrap",isActionCell:r&&n===t.cells.length-1,style:a.style},a.value):c().createElement(o.Td,{dataLabel:e[n].name,key:`cell-${n}-${s}`,modifier:"nowrap",select:{disable:t.selectionDisabled,isSelected:t.selected,onSelect:(e,t)=>this.handleOnSelect(e,t,s),rowIndex:s},style:a.style})))))))),0===l.length&&c().createElement("div",{style:d.W.emptyState},this.getEmptyState()))}}const g=(0,l.ZP)((0,m.E)(h))},47812:(e,t,r)=>{r.r(t),r.d(t,{default:()=>pr});var s=r(90154),a=r(39333),o=r(97027),n=r(92950),i=r.n(n),c=r(74806),l=r(77760),p=r(6279),u=r(6450),m=r(1156),d=r(29379),h=r(15829),g=r(5842),y=r(49382),b=r(98499),f=r(32412),T=r(48196);const v={costType:{marginBottom:b.ZP.var,marginTop:b.ZP.var,width:"fit-content"},costTypeContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},currency:{marginTop:b.ZP.var,width:"fit-content"},currencyContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},resetContainer:{display:"inline-block",paddingLeft:f.ZP.var},title:{paddingBottom:T.ZP.var}};class E extends i().Component{constructor(){super(...arguments),this.defaultState={currentCostType:(0,h.uY)(),currentCurrency:(0,h.zC)()},this.state=Object.assign({},this.defaultState),this.getCostType=()=>{const{intl:e}=this.props,{currentCostType:t}=this.state;return i().createElement("div",{style:v.costTypeContainer},i().createElement(s.Title,{headingLevel:"h2",style:v.title,size:s.TitleSizes.md},e.formatMessage(o.Z.costTypeSettingsLabel)),e.formatMessage(o.Z.costTypeSettingsDesc),i().createElement("div",{style:v.costType},i().createElement(p.T,{costType:t,isLocalStorage:!1,onSelect:this.handleOnCostTypeSelected,showLabel:!1})))},this.getCurrency=()=>{const{intl:e}=this.props,{currentCurrency:t}=this.state;return i().createElement("div",{style:v.currencyContainer},i().createElement(s.Title,{headingLevel:"h2",style:v.title,size:s.TitleSizes.md},e.formatMessage(o.Z.currency)),e.formatMessage(o.Z.currencyDesc),i().createElement("div",{style:v.currency},i().createElement(u.F,{currency:t,isLocalStorage:!1,onSelect:this.handleOnCurrencySelected,showLabel:!1})))},this.handleOnCostTypeSelected=e=>{const{updateSettings:t}=this.props;this.setState({currentCostType:e},(()=>{(0,h.M1)(e),t({api:{settings:{cost_type:e}}})}))},this.handleOnCurrencySelected=e=>{const{updateSettings:t}=this.props;this.setState({currentCurrency:e},(()=>{(0,h.NW)(e),(0,h.Nc)(e),t({api:{settings:{currency:e}}})}))}}render(){return i().createElement(s.PageSection,{isFilled:!0},this.getCurrency(),this.getCostType())}}const S=(0,m.X1)((e=>({updateSettingsStatus:d.Hq.selectSettingsUpdateStatus(e)}))),P={updateSettings:d.ff.VP},C=(0,c.ZP)((0,g.E)((0,l.connect)(S,P)(E)));var Z=r(80129),M=r(58613),R=r(91800),O=r(73805),F=r(45868),I=r(40227);const k={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function D(e){return Object.keys(e).reduce(((t,r)=>null===e[r]?t:""===t?`?${r}=${e[r]}`:`${t}&${r}=${e[r]}`),"")}function j(e,t){return(e-1)*t}Object.keys(k);const A=(0,g.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:s}=M.E6.pagination(e);return{query:M.E6.query(e),count:t,page:r,perPage:s}}),void 0,((e,t,r)=>{const{router:a}=r,{count:o,page:n,perPage:i,query:c}=e;return{itemCount:o,page:n,perPage:i,variant:s.PaginationVariant.bottom,onSetPage:(e,t,r)=>{a.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{offset:j(t,r)})))},onPerPageSelect:(e,t)=>{a.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{limit:t,offset:0})))}}}))((0,c.ZP)((e=>{const{variant:t,intl:r=F.N,itemCount:a,page:n,perPage:c,onSetPage:l,onPerPageSelect:p}=e;return i().createElement(s.Toolbar,null,i().createElement(s.ToolbarContent,null,i().createElement(s.ToolbarItem,{variant:s.ToolbarItemVariant.pagination},i().createElement(s.Pagination,{onPerPageSelect:p,onSetPage:l,variant:t,itemCount:a,page:n,perPage:c,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsDetailsTitle),placement:"bottom"})}}))))})))),x={descContainer:{backgroundColor:y.ZP.value,padding:f.ZP.value}};var V=r(69425),w=r(69957),z=r(34327),L=r(44439),W=r(91778),B=r(1326);const N={apiError:null,checked:{},clearQuery:()=>null,createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,h.tk)(),dataFetched:!1,description:"",dirtyName:!1,distribution:"",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,fetchSources:(e,t,r,s)=>null,filterName:"",goToAddPL:e=>null,isDiscount:!1,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleDistributePlatformUnallocatedChange:(...e)=>null,handleDistributeWorkerUnallocatedChange:(...e)=>null,handleSignChange:(...e)=>null,loading:!1,markup:"",metricsHash:{},name:"",onClose:()=>null,onCurrencyChange:e=>null,onDescChange:e=>null,onFilterChange:e=>null,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,onTypeChange:e=>null,onNameChange:e=>null,onSourceSelect:(...e)=>null,page:1,perPage:10,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},query:{},step:1,setSources:e=>null,sources:[],submitTiers:e=>null,tiers:[],total:0,type:""},_=i().createContext(N);var U=r(68134);const K={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"},selector:{maxHeight:"350px"},titleWithLearnMore:{display:"inline-block",marginRight:"1em"}};class q extends i().Component{render(){const{intl:e}=this.props;return i().createElement(_.Consumer,null,(({handleDistributionChange:t,handleDistributePlatformUnallocatedChange:r,handleDistributeWorkerUnallocatedChange:a,distribution:n,distributePlatformUnallocated:c,distributeWorkerUnallocated:l})=>i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl,style:K.titleWithLearnMore},e.formatMessage(o.Z.costDistribution)),i().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsDistribution),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h3",size:s.TitleSizes.md},e.formatMessage(o.Z.distributionType)),i().createElement(s.TextContent,null,i().createElement(s.Text,{style:K.cardDescription},e.formatMessage(o.Z.distributionModelDesc)))),i().createElement(s.StackItem,{isFilled:!0},i().createElement(U.l,null,i().createElement(s.FormGroup,{isInline:!0,fieldId:"cost-distribution-type",isRequired:!0},i().createElement(s.Radio,{isChecked:"cpu"===n,name:"distributionType",label:e.formatMessage(o.Z.cpuTitle),"aria-label":e.formatMessage(o.Z.cpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),i().createElement(s.Radio,{isChecked:"memory"===n,name:"distributionType",label:e.formatMessage(o.Z.memoryTitle),"aria-label":e.formatMessage(o.Z.memoryTitle),id:"memoryDistribution",value:"memory",onChange:t})))),i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h3",size:s.TitleSizes.md},e.formatMessage(o.Z.platform)),i().createElement(s.TextContent,null,i().createElement(s.Text,{style:K.cardDescription},e.formatMessage(o.Z.platformDesc)))),i().createElement(s.StackItem,{isFilled:!0},i().createElement(U.l,null,i().createElement(s.FormGroup,{isInline:!0,fieldId:"cost-distribution-platform-unallocated",isRequired:!0},i().createElement(s.Radio,{isChecked:c,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributePlatformTrue",value:"true",onChange:r}),i().createElement(s.Radio,{isChecked:!c,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributePlatformFalse",value:"false",onChange:r})))),i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h3",size:s.TitleSizes.md},e.formatMessage(o.Z.workerUnallocated)),i().createElement(s.TextContent,null,i().createElement(s.Text,{style:K.cardDescription},e.formatMessage(o.Z.workerUnallocatedDesc)))),i().createElement(s.StackItem,{isFilled:!0},i().createElement(U.l,null,i().createElement(s.FormGroup,{isInline:!0,fieldId:"cost-distribution-worker-unallocated",isRequired:!0},i().createElement(s.Radio,{isChecked:l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributeWorkerTrue",value:"true",onChange:a}),i().createElement(s.Radio,{isChecked:!l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributeWorkerFalse",value:"false",onChange:a})))))))}}const G=(0,m.X1)((()=>({}))),H=(0,c.ZP)((0,l.connect)(G,{})(q));var $=r(34459);const X=e=>0===e.length?o.Z.costModelsRequiredField:e.length>100?o.Z.costModelsInfoTooLong:null,J=e=>e.length>500?o.Z.costModelsDescTooLong:null,Q=e=>""!==e.trim()&&(!!(0,W.WW)(e)&&!((0,W.cR)(e)>10)),Y={"":[()=>!1],AWS:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],Azure:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],GCP:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],OCP:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>Q(e.markup),()=>!0,()=>!0,()=>!0]};class ee extends i().Component{render(){const e=(e,r)=>{const s=r.find((t=>t.value===e));return s?t.formatMessage(s.label,{units:s.value}):e},{intl:t}=this.props,r=[{label:o.Z.costModelsWizardOnboardAws,value:"AWS"},{label:o.Z.azure,value:"Azure"},{label:o.Z.gcp,value:"GCP"},{label:o.Z.costModelsWizardOnboardOcp,value:"OCP"}];return i().createElement(_.Consumer,null,(({currencyUnits:a,dirtyName:n,description:c,name:l,type:p,onCurrencyChange:m,onNameChange:d,onDescChange:h,onTypeChange:g})=>i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl,style:K.titleWithLearnMore},t.formatMessage(o.Z.costModelsWizardGeneralInfoTitle)),i().createElement("a",{href:t.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},t.formatMessage(o.Z.learnMore))),i().createElement(s.StackItem,null,i().createElement(U.l,{style:K.form},i().createElement(s.FormGroup,{helperTextInvalid:X(l)&&t.formatMessage(X(l)),validated:null!==X(l)&&n?"error":"default",label:t.formatMessage(o.Z.names,{count:1}),isRequired:!0,fieldId:"name"},i().createElement(s.TextInput,{validated:null!==X(l)&&n?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:l,onChange:d})),i().createElement(s.FormGroup,{helperTextInvalid:J(c)&&t.formatMessage(J(c)),validated:null===J(c)?"default":"error",label:t.formatMessage(o.Z.description),fieldId:"description"},i().createElement(s.TextArea,{style:K.textArea,type:"text",id:"description",name:"description",value:c,validated:null===J(c)?"default":"error",onChange:h})),i().createElement($.Q,{isRequired:!0,id:"source-type-selector",direction:s.SelectDirection.up,appendMenuTo:"inline",maxHeight:K.selector.maxHeight,label:o.Z.sourceType,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),placeholderText:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),value:e(p,r),onChange:g,options:r}),i().createElement($.Q,{label:o.Z.currency,direction:s.SelectDirection.up,appendMenuTo:"inline",maxHeight:K.selector.maxHeight,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardCurrencyToggleLabel),value:e(a,u.m),onChange:m,id:"currency-units-selector",options:u.m.map((e=>({label:t.formatMessage(e.label,{units:e.value}),value:e.value})))}))))))}}const te=(0,m.X1)((()=>({}))),re=(0,c.ZP)((0,l.connect)(te,{})(ee));var se=r(47242);class ae extends i().Component{render(){const{intl:e}=this.props,t=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};return i().createElement(_.Consumer,null,(({handleSignChange:r,handleMarkupDiscountChange:a,markup:n,isDiscount:c})=>{const l=(p=n,(0,W.WW)(p)?(0,W.cR)(p)>10?o.Z.markupOrDiscountTooLong:void 0:o.Z.markupOrDiscountNumber);var p;const u=l?"error":"default";return i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl,style:K.titleWithLearnMore},e.formatMessage(o.Z.costCalculationsOptional)),i().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsMarkup),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h3",size:s.TitleSizes.md},e.formatMessage(o.Z.markupOrDiscount)),i().createElement(s.TextContent,null,i().createElement(s.Text,null,e.formatMessage(o.Z.markupOrDiscountModalDesc)))),i().createElement(s.StackItem,null,i().createElement(s.Flex,{style:se.W.markupRadioContainer},i().createElement(s.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},i().createElement(s.FlexItem,null,i().createElement(s.Radio,{isChecked:!c,name:"discount",label:e.formatMessage(o.Z.markupPlus),"aria-label":e.formatMessage(o.Z.markupPlus),id:"markup",value:"false",onChange:r,style:se.W.markupRadio}),i().createElement(s.Radio,{isChecked:c,name:"discount",label:e.formatMessage(o.Z.discountMinus),"aria-label":e.formatMessage(o.Z.discountMinus),id:"discount",value:"true",onChange:r}))),i().createElement(s.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},i().createElement(s.FlexItem,null,i().createElement(U.l,null,i().createElement(s.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:l?e.formatMessage(l):void 0,style:se.W.rateContainer,validated:u},i().createElement(s.InputGroup,null,i().createElement(s.InputGroupText,{style:se.W.sign},c?e.formatMessage(o.Z.discountMinus):e.formatMessage(o.Z.markupPlus)),i().createElement(s.TextInput,{"aria-label":e.formatMessage(o.Z.rate),id:"markup-input-box",isRequired:!0,onKeyDown:t,onChange:a,placeholder:"0",style:se.W.inputField,type:"text",validated:u,value:n}),i().createElement(s.InputGroupText,{style:se.W.percent},e.formatMessage(o.Z.percentSymbol))))))))),i().createElement(s.StackItem,null,i().createElement("div",{style:se.W.exampleMargin},i().createElement(s.TextContent,null,i().createElement(s.Text,{component:s.TextVariants.h3},e.formatMessage(o.Z.examplesTitle))),i().createElement(s.List,null,i().createElement(s.ListItem,null,e.formatMessage(o.Z.costModelsExamplesNoAdjust)),i().createElement(s.ListItem,null,e.formatMessage(o.Z.costModelsExamplesDoubleMarkup)),i().createElement(s.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceZero)),i().createElement(s.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceSeventyfive))))))}))}}const oe=(0,m.X1)((()=>({}))),ne=(0,c.ZP)((0,l.connect)(oe,{})(ae));var ie=r(11040),ce=r(50250);const le=(0,c.ZP)((({cancel:e,currencyUnits:t,intl:r=F.N,metricsHash:a,submitRate:n})=>{const{tiers:c}=i().useContext(_),l=(0,ce.bF)(a,void 0,c),p=i().useMemo((()=>(0,ce.Cw)(l)),[l.errors,l.rateKind]);return i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,{component:s.TextVariants.h3},r.formatMessage(o.Z.costModelsWizardPriceListMetric)))),i().createElement(s.StackItem,null,i().createElement(s.Form,null,i().createElement(ce.HJ,{currencyUnits:t,metricsHash:a,rateFormData:l}))),i().createElement(s.StackItem,null,i().createElement(s.ActionGroup,null,i().createElement(s.Button,{variant:s.ButtonVariant.primary,isDisabled:!p,onClick:()=>n(l)},r.formatMessage(o.Z.createRate)),i().createElement(s.Button,{variant:s.ButtonVariant.link,onClick:e},r.formatMessage(o.Z.cancel)))))}));var pe=r(7081),ue=r(42901),me=r(94985);const de=(0,c.ZP)((({id:e,intl:t,itemCount:r,perPage:a,page:n,variant:c,onPerPageSelect:l,onSetPage:p})=>i().createElement(s.Toolbar,{id:e},i().createElement(s.ToolbarContent,null,i().createElement(s.ToolbarItem,{variant:"pagination"},i().createElement(s.Pagination,{variant:c,itemCount:r,perPage:a,page:n,onSetPage:p,onPerPageSelect:l,titles:{paginationTitle:t.formatMessage(o.Z.paginationTitle,{title:t.formatMessage(o.Z.createCostModelTitle),placement:"bottom"})}}))))));var he=r(14106),ge=r(17031),ye=r(66094),be=r(66474),fe=r(23686);class Te extends i().Component{constructor(){super(...arguments),this.defaultState={metrics:[],measurements:[],sortBy:{index:0,direction:I.SortByDirection.asc}},this.state=Object.assign({},this.defaultState)}render(){const{addRateAction:e,deleteRateAction:t,intl:r,items:a,metricsHash:n}=this.props,c=e=>{const t=e.replace(/ /g,"_").toLowerCase();return r.formatMessage(o.Z.metricValues,{value:t})||e},l=e=>r.formatMessage(o.Z.measurementValues,{value:e.toLowerCase().replace("-","_"),count:1})||e,p=Object.keys(n).map((e=>({label:c(e),value:e}))),u=p.reduce(((e,t)=>{const r=Object.keys(n[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:l(e),value:e})));return[...e,...r]}),[]),m=()=>i().createElement(s.Bullseye,null,i().createElement(s.EmptyState,null,i().createElement(s.EmptyStateIcon,{icon:pe.wl}),i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},r.formatMessage(o.Z.costModelsWizardEmptyStateTitle)),i().createElement(s.EmptyStateBody,null,r.formatMessage(o.Z.costModelsWizardEmptyStateSkipStep,{value:i().createElement("strong",null,r.formatMessage(o.Z.next))}),i().createElement("br",null),r.formatMessage(o.Z.costModelsWizardEmptyStateOtherTime))));return i().createElement(_.Consumer,null,(({priceListPagination:n})=>i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,null,r.formatMessage(o.Z.costModelsWizardSubTitleTable)))),i().createElement(s.StackItem,null,i().createElement(me.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:c,setSearch:l,onRemove:d,onSelect:h,onClearAll:g})=>{const y=(n.page-1)*n.perPage,b=n.page*n.perPage,f=a.map(((e,t)=>Object.assign(Object.assign({},e),{stateIndex:t}))).filter((e=>0===c.metrics.length||c.metrics.includes(e.metric.label_metric))).filter((e=>0===c.measurements.length||c.measurements.includes(e.metric.label_measurement))).sort(((e,t)=>{const s=1===this.state.sortBy.index?e=>{return t=e.metric.label_metric,r.formatMessage(o.Z.metricValues,{value:t})||t;var t}:2===this.state.sortBy.index?e=>{return t=e.metric.label_measurement,s=e.metric.label_measurement_unit,s=r.formatMessage(o.Z.units,{units:(0,W.ZV)(s)})||s,r.formatMessage(o.Z.measurementValues,{value:t.toLowerCase().replace("-","_"),units:s,count:2});var t,s}:()=>"";return(0,ge.tT)(e,t,this.state.sortBy.direction,s)})),T=f.slice(y,b);return i().createElement(i().Fragment,null,i().createElement(he.Q,{primary:i().createElement(fe.J,{isDisabled:0===a.length,primary:c.primary,setPrimary:e=>l({primary:e}),options:[{label:r.formatMessage(o.Z.metric),value:"metrics"},{label:r.formatMessage(o.Z.measurement),value:"measurements"}]}),selected:c.primary,secondaries:[{component:i().createElement(be.n,{isDisabled:0===a.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMeasurementPlaceHolder),selections:c.measurements,setSelections:e=>h("measurements",e),options:u}),name:"measurements",onRemove:d,filters:c.measurements},{component:i().createElement(be.n,{isDisabled:0===a.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMetricPlaceHolder),selections:c.metrics,setSelections:e=>h("metrics",e),options:p}),name:"metrics",onRemove:d,filters:c.metrics}],button:i().createElement(s.Button,{onClick:e},r.formatMessage(o.Z.createRate)),onClear:g,pagination:i().createElement(s.Pagination,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"top"})}})}),0===T.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&i().createElement(s.Bullseye,null,i().createElement(ue.c,null)),0===T.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&i().createElement(m,null),T.length>0&&i().createElement(ye.y,{actions:[{title:r.formatMessage(o.Z.remove),onClick:(e,r,s)=>{t(s.data.stateIndex)}}],tiers:T,sortCallback:e=>{this.setState(Object.assign(Object.assign({},this.state),{sortBy:Object.assign({},e)}))}}),i().createElement(de,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}}))}))))))}}const ve=(0,l.connect)((0,m.X1)((e=>({metricsHash:R.qw.metrics(e)}))))((0,c.ZP)(Te)),Ee=()=>{const{currencyUnits:e,goToAddPL:t,metricsHash:r,tiers:s,submitTiers:a}=i().useContext(_),[o,n]=i().useState("table");return"table"===o?i().createElement(ve,{items:s,deleteRateAction:e=>{const r=[...s.slice(0,e),...s.slice(e+1)];a(r),0===r.length&&t(!0)},addRateAction:()=>{n("form"),t(!1)}}):"form"===o?i().createElement(le,{currencyUnits:e,metricsHash:r,submitRate:o=>{var i;i=(0,ce.Nl)(o,r,e),a([...s,i]),n("table"),t(!0)},cancel:()=>{n("table"),t(!0)}}):null};var Se=r(53086),Pe=r(64255);const Ce=(0,c.ZP)((({intl:e})=>i().createElement(_.Consumer,null,(({onClose:t,name:r})=>i().createElement(s.EmptyState,null,i().createElement(s.EmptyStateIcon,{icon:Se.xX,color:"green"}),i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},e.formatMessage(o.Z.costModelsWizardReviewStatusTitle)),i().createElement(s.EmptyStateBody,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubTitle,{value:r})),i().createElement(s.EmptyStateSecondaryActions,null,i().createElement(s.Button,{variant:"link",onClick:t},e.formatMessage(o.Z.close)))))))),Ze=(0,m.X1)((()=>({}))),Me=(0,c.ZP)((0,l.connect)(Ze,{})((({intl:e})=>i().createElement(_.Consumer,null,(({checked:t,createError:r,currencyUnits:a,description:n,distribution:c,distributePlatformUnallocated:l,distributeWorkerUnallocated:p,isDiscount:u,markup:m,name:d,tiers:h,type:g})=>{const y=Object.keys(t).filter((e=>t[e].selected)).map((e=>t[e].meta));return i().createElement(i().Fragment,null,r&&i().createElement(s.Alert,{variant:"danger",title:`${r}`}),i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardStepsReview))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubDetails,{create:i().createElement("strong",null,e.formatMessage(o.Z.create)),back:i().createElement("strong",null,e.formatMessage(o.Z.back))})))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.TextList,{component:s.TextListVariants.dl},i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.names,{count:1})),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},d),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.description)),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},n),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.currency)),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage(o.Z.currencyOptions,{units:a})),"OCP"===g&&i().createElement(i().Fragment,null,i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.priceList)),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},h.length>0?i().createElement(ye.y,{tiers:h}):e.formatMessage(o.Z.costModelsWizardNoRatesAdded))),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsWizardReviewMarkDiscount)),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage(o.Z.percent,{value:u?"-"+m:m})),"OCP"===g&&i().createElement(i().Fragment,null,i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.costDistribution)),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage(o.Z.distributionTypeDesc,{type:c})),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:l,type:"platform"})),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:p,type:"worker"}))),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsAssignSources,{count:2})," ",y.find((e=>Boolean(e.costmodel)))&&i().createElement(Pe.a,{text:e.formatMessage(o.Z.costModelsWizardWarningSources)})),i().createElement(s.TextListItem,{component:s.TextListItemVariants.dd},y.map((e=>e.name)).join(", ")))))))}))))),Re=()=>i().createElement(_.Consumer,null,(({createSuccess:e})=>e?i().createElement(Ce,null):i().createElement(Me,null)));var Oe=r(261),Fe=r(89291),Ie=r(40120),ke=r(76889),De=r(80810);const je=({id:e,placeholder:t="",value:r,onChange:a,onSearch:o})=>i().createElement(s.InputGroup,null,i().createElement(s.TextInput,{value:r,placeholder:t,id:e,onChange:a,onKeyPress:e=>{"Enter"===e.key&&""!==r&&o(e)}}),i().createElement(s.InputGroupText,{style:{borderLeft:"0"}},i().createElement(De.W1,null))),Ae=(0,c.ZP)((({intl:e,filterInputProps:t,paginationProps:r,filter:a})=>i().createElement(s.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:a.onClearAll},i().createElement(s.ToolbarContent,null,i().createElement(s.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:i().createElement(ke.k1,null)},i().createElement(s.ToolbarItem,{variant:"search-filter"},i().createElement(s.ToolbarFilter,{deleteChip:a.onRemove,chips:a.query.name,categoryName:"name"},i().createElement(je,Object.assign({placeholder:e.formatMessage(o.Z.costModelsFilterPlaceholder)},t))))),i().createElement(s.ToolbarItem,{variant:"pagination"},i().createElement(s.Pagination,{isCompact:r.isCompact,itemCount:r.itemCount,page:r.page,perPage:r.perPage,onSetPage:r.onSetPage,onPerPageSelect:r.onPerPageSelect,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}})))))),xe=(0,c.ZP)((({intl:e})=>i().createElement(_.Consumer,null,(({checked:t,loading:r,onSourceSelect:a,sources:n,perPage:c,page:l,type:p,query:u,fetchSources:m,filterName:d,onFilterChange:h})=>{const g="Azure"===p?"Azure":p,y=n.length>0?n[0].meta.count:0;return i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardSourceTitle))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,null,e.formatMessage(o.Z.costModelsWizardSourceSubtitle)))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,{component:s.TextVariants.h3},e.formatMessage(o.Z.costModelsWizardSourceCaption,{value:p.toLowerCase()})))),i().createElement(s.StackItem,null,i().createElement(Ae,{filter:{onRemove:(e,t)=>m(g,(0,Ie.fg)(u)(e,t),1,c),onClearAll:()=>m(g,{},1,c),query:u},filterInputProps:{id:"assign-source-search-input",value:d,onChange:h,onSearch:()=>{m(g,(0,Ie.xZ)(u)("name",d),1,c)}},paginationProps:{isCompact:!0,itemCount:y,perPage:c,page:l,onSetPage:(e,t)=>{m(g,u,t,c)},onPerPageSelect:(e,t)=>m(g,u,1,t)}}),r?i().createElement(Oe.G,null):i().createElement(I.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsWizardSourceTableAriaLabel),variant:I.TableVariant.compact},i().createElement(I.Thead,null,i().createElement(I.Tr,null,["",e.formatMessage(o.Z.names,{count:1}),e.formatMessage(o.Z.costModelsWizardSourceTableCostModel)].map(((e,t)=>i().createElement(I.Th,{key:t},e))))),i().createElement(I.Tbody,null,n.map(((r,n)=>i().createElement(I.Tr,{key:n},i().createElement(I.Td,null,i().createElement(s.Checkbox,{onChange:e=>{a(n,e)},id:r.name,key:r.name,"aria-label":e.formatMessage(o.Z.selectRow,{value:n}),isChecked:t[r.uuid]&&t[r.uuid].selected,isDisabled:Boolean(r.costmodel)})),i().createElement(I.Td,null,r.name," ",r.costmodel&&i().createElement(Pe.a,{key:`wrng-${r.name}`,text:e.formatMessage(o.Z.costModelsWizardSourceWarning,{costModel:r.costmodel})})),i().createElement(I.Td,null,r.costmodel?r.costmodel:"")))))),i().createElement(de,{itemCount:y,perPage:c,page:l,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.sources),placement:"bottom"})},onSetPage:(e,t)=>{m(g,u,t,c)},onPerPageSelect:(e,t)=>m(g,u,1,t)})))}))));class Ve extends i().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:r,perPage:s,fetchSources:a}=this.context;a("Azure"===e?"Azure":e,t,r,s)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?i().createElement(Oe.G,null):this.context.apiError?i().createElement(Fe.Bu,{onRefresh:this.fetchData}):i().createElement(xe,null)}render(){return this.renderContent()}}Ve.contextType=_;const we=Ve,ze=(e,t="USD")=>{const r=(0,L.cloneDeep)(e);return r.map((e=>{if(e.tiered_rates)for(const r of e.tiered_rates)r.unit=t,r.usage.unit=t;if(e.tag_rates)for(const r of e.tag_rates.tag_values)r.unit=t})),r},Le=(0,c.ZP)((({intl:e,isProcess:t,isSuccess:r,closeFnc:a,isOpen:n,onMove:c,validators:l,steps:p,current:u=1,context:m,setError:d,setSuccess:h,updateCostModel:g})=>{const y=p.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:u>t})));y[u-1].enableNext=l[u-1](m);const b="OCP"===m.type&&2===u&&!l[u-1](m);return u===p.length&&""!==m.type&&(y[u-1].nextButtonText=e.formatMessage(o.Z.create)),n?i().createElement(s.Wizard,{isOpen:!0,title:e.formatMessage(o.Z.createCostModelTitle),description:e.formatMessage(o.Z.createCostModelDesc),steps:y,startAtStep:u,onNext:c,onBack:c,onGoToStep:c,onClose:a,footer:r||t||b?i().createElement("div",null):null,onSave:()=>{const{currency:e,description:t,distribution:r,distributePlatformUnallocated:s,distributeWorkerUnallocated:a,isDiscount:o,markup:n,name:i,type:c,tiers:l,sources:p}=m;(0,z.Rl)({name:i,source_type:c,currency:e,description:t,distribution_info:{distribution_type:r,platform_cost:s,worker_cost:a},rates:l,markup:{value:`${o?"-":""}${(0,W.E3)(n)}`,unit:"percent"},source_uuids:p.map((e=>e.uuid))}).then((()=>{h(),g()})).catch((e=>d((0,ie.L)(e))))}}):null}));class We extends i().Component{constructor(){super(...arguments),this.defaultState={apiError:null,checked:{},createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,h.tk)(),dataFetched:!1,dirtyName:!1,description:"",distribution:"cpu",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,filterName:"",isDialogOpen:!1,isDiscount:!1,loading:!1,markup:"0",name:"",page:1,perPage:10,priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},query:{},sources:[],step:1,tiers:[],total:0,type:""},this.state=Object.assign({},this.defaultState)}render(){const{metricsHash:e,intl:t}=this.props,r=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},a=i().createElement(s.Button,{key:"cancel",variant:"link",onClick:r},t.formatMessage(o.Z.createCostModelNoContinue)),n=i().createElement(s.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},this.defaultState))},t.formatMessage(o.Z.createCostModelExitYes));return i().createElement(_.Provider,{value:{apiError:this.state.apiError,checked:this.state.checked,clearQuery:()=>this.setState({query:{}}),createError:this.state.createError,createProcess:this.state.createProcess,createSuccess:this.state.createSuccess,currencyUnits:this.state.currencyUnits,description:this.state.description,dataFetched:this.state.dataFetched,dirtyName:this.state.dirtyName,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,error:this.state.error,filterName:this.state.filterName,fetchSources:(e,t,r,s)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:r,query:s})=>{const a=(t-1)*r,o=r,n=Object.keys(s).reduce(((e,t)=>e?`${e}&${t}=${s[t]}`:`${t}=${s[t]}`),"");return(0,B.s)(`type=${e}&limit=${o}&offset=${a}&${n}`).then((e=>{const t=e.data;return t.data.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),meta:t.meta})))}))})({type:e,query:t,page:r,perPage:s}).then((e=>this.setState({sources:e,query:t,page:r,perPage:s,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),handleDistributionChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distribution:r})},handleDistributePlatformUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributePlatformUnallocated:"true"===r})},handleDistributeWorkerUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributeWorkerUnallocated:"true"===r})},handleMarkupDiscountChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({markup:r})},handleSignChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({isDiscount:"true"===r})},isDiscount:this.state.isDiscount,loading:this.state.loading,metricsHash:e,onClose:()=>this.setState(Object.assign({},this.defaultState),this.props.closeWizard),onCurrencyChange:e=>this.setState({currencyUnits:e,tiers:ze(this.state.tiers,e)}),onDescChange:e=>this.setState({description:e}),onFilterChange:e=>this.setState({filterName:e}),onNameChange:e=>this.setState({name:e,dirtyName:!0}),onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),onSourceSelect:(e,t)=>{if(-1===e){const e=this.state.sources.map((e=>({[e.uuid]:{selected:t,meta:e}}))),r=Object.assign(Object.assign({},this.state.checked),e);return this.setState({checked:r})}const r=Object.assign(Object.assign({},this.state.checked),{[this.state.sources[e].uuid]:{selected:t,meta:this.state.sources[e]}});return this.setState({checked:r})},onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),page:this.state.page,priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},markup:this.state.markup,name:this.state.name,perPage:this.state.perPage,query:this.state.query,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),sources:this.state.sources,step:this.state.step,submitTiers:e=>{this.setState({tiers:e})},tiers:this.state.tiers,total:this.state.total,type:this.state.type}},i().createElement(Le,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},this.defaultState),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)}],Azure:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Re,null)}],AWS:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Re,null)}],GCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Re,null)}],OCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:i().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.priceList),component:i().createElement(Ee,null)},{id:3,name:t.formatMessage(o.Z.costCalculations),component:i().createElement(ne,null)},{id:4,name:t.formatMessage(o.Z.costDistribution),component:i().createElement(H,null)},{id:5,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:i().createElement(we,null)},{id:6,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:i().createElement(Re,null)}]}[this.state.type],current:this.state.step,validators:Y[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,currency:this.state.currencyUnits,description:this.state.description,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,markup:`${this.state.isDiscount?"-":""}${this.state.markup}`,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:Object.keys(this.state.checked).map((e=>this.state.checked[e].meta))}}),i().createElement(s.Modal,{"aria-label":t.formatMessage(o.Z.createCostModelExit),isOpen:this.state.isDialogOpen,header:i().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes["2xl"]},i().createElement(w.LP,{color:"orange"})," ",t.formatMessage(o.Z.createCostModelExit)),onClose:r,actions:[n,a],variant:"small"},t.formatMessage(o.Z.createCostModelConfirmMsg)))}}const Be=(0,l.connect)((0,m.X1)((e=>({metricsHash:R.qw.metrics(e)}))),{fetch:M.F0.fetchCostModels})((0,c.ZP)(We)),Ne=(0,c.ZP)((0,l.connect)((e=>({canWrite:O.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,r)=>{const{intl:a=F.N}=r,{canWrite:n}=e,{openWizard:c}=t;return{isDisabled:!n,tooltip:a.formatMessage(o.Z.costModelsReadOnly),children:i().createElement(s.Button,{isDisabled:!n,onClick:c},a.formatMessage(o.Z.costModelsWizardCreateCostModel))}}))(V.j)),_e=(0,l.connect)((e=>({isOpen:M.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:r}=e,{openWizard:s,closeWizard:a}=t;return{isOpen:r,openWizard:s,closeWizard:a}}))(Be);function Ue({head:e,body:t,sources:r}){return i().createElement(s.Stack,{hasGutter:!0},i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,null,e))),i().createElement(s.StackItem,null,i().createElement(s.TextContent,null,i().createElement(s.Text,null,t),i().createElement(s.TextList,{component:s.TextListVariants.ol},r.map((e=>i().createElement(s.TextListItem,{key:e},e)))))))}const Ke=(0,c.ZP)((0,l.connect)((e=>({isOpen:M.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:M.E6.deleteProcessing(e),deleteError:M.E6.deleteError(e),dialogData:M.E6.dialogData(e)})),(e=>({closeDialog:()=>e(M.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>M.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,r)=>{const{intl:a=F.N}=r,n=(c=e.isLoading,l=e.isOpen,p=e.deleteError,l?c?"loading":p?"failure":"open":"close");var c,l,p;const u=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,m=u?u.name:"",d=u?u.sources.map((e=>e.name)):[],h=u?u.uuid:"",g=function({status:e,deleteText:t,deleteAction:r,cancelText:a,cancelAction:o,sourcesNo:n}){let c=[];return"loading"===e&&(c=[i().createElement(s.Button,{key:"pending_delete",variant:s.ButtonVariant.danger,isDisabled:!0},t),i().createElement(s.Button,{key:"pending_cancel",variant:s.ButtonVariant.link,isDisabled:!0},a)]),["failure","open"].includes(e)&&n>0&&(c=[i().createElement(s.Button,{key:"sources_cancel",variant:s.ButtonVariant.link,onClick:o},a)]),["failure","open"].includes(e)&&0===n&&(c=[i().createElement(s.Button,{key:"delete",variant:s.ButtonVariant.danger,onClick:r},t),i().createElement(s.Button,{key:"cancel",variant:s.ButtonVariant.link,onClick:o},a)]),c}({status:n,deleteText:a.formatMessage(o.Z.costModelsDelete),deleteAction:()=>t.deleteCostModel(h),cancelText:a.formatMessage(o.Z.cancel),cancelAction:t.closeDialog,sourcesNo:d.length}),y=function({status:e,sources:t,error:r,cannotDeleteTitle:a,cannotDeleteBody:o,canDeleteBody:n}){return"close"!==e&&t.length>0?i().createElement(Ue,{head:a,body:o,sources:t}):"close"!==e&&0===t.length?i().createElement(s.Stack,{hasGutter:!0},"failure"===e?i().createElement(s.StackItem,null,i().createElement(s.Alert,{variant:s.AlertVariant.danger,title:r})):null,i().createElement(s.StackItem,null,n)):void 0}({status:n,sources:d,error:e.deleteError,cannotDeleteTitle:a.formatMessage(o.Z.costModelsDeleteSource),cannotDeleteBody:a.formatMessage(o.Z.costModelsCanNotDelete,{name:m}),canDeleteBody:a.formatMessage(o.Z.costModelsCanDelete,{name:m})});return{actions:g,isOpen:"close"!==n,variant:s.ModalVariant.small,"aria-label":a.formatMessage(o.Z.costModelsDelete),title:a.formatMessage(o.Z.costModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:y}}))(s.Modal)),qe=Ke;var Ge=r(15984),He=r(39836),$e=r(91919);const Xe=function(e){return i().createElement(s.EmptyState,{className:"pf-m-redhat-font"},i().createElement(s.EmptyStateIcon,{icon:e.icon}),i().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},e.title),i().createElement(s.EmptyStateBody,null,e.description),e.actions?e.actions:null)},Je=(0,c.ZP)((({intl:e=F.N})=>i().createElement(Xe,{title:e.formatMessage(o.Z.costModelsEmptyState),description:e.formatMessage(o.Z.costModelsEmptyStateDesc),icon:pe.wl,actions:i().createElement(i().Fragment,null,i().createElement(Ne,null),i().createElement("br",null),i().createElement("br",null),i().createElement("a",{href:e.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.costModelsEmptyStateLearnMore)))})));var Qe=r(68025);class Ye extends i().Component{constructor(){super(...arguments),this.defaultState={dialogSource:null,activeSortDirection:"asc",activeSortIndex:0},this.state=Object.assign({},this.defaultState)}render(){const{intl:e=F.N,canWrite:t,costData:r,openDeleteDialog:a,query:n,router:c,stateName:l}=this.props,p=function(e,t){let r=null;return"loading"===e&&(r=i().createElement(Oe.G,null)),"empty"===e&&(r=i().createElement(Je,null)),"no-match"===e&&(r=i().createElement(ue.c,null)),"failure"===e&&(r=i().createElement(Ge.Z,null)),null!==r?[{heightAuto:!0,cells:[{props:{colSpan:6},title:i().createElement(s.Bullseye,null," ",r," ")}]}]:t.map((e=>{const t=F.N.formatDate(e.updated_timestamp,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"short",timeZone:"UTC",timeZoneName:"short",year:"numeric"});return{cells:[{title:i().createElement(He.Link,{to:`${(0,Qe.dI)($e._.costModel.basePath)}/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),t],data:{costModel:e}}}))}(l,r),u=[Object.assign({title:e.formatMessage(o.Z.names,{count:1}),data:{orderName:"name"}},p.length&&{transforms:[I.sortable]}),{title:e.formatMessage(o.Z.description)},Object.assign({title:e.formatMessage(o.Z.sourceType),data:{orderName:"source_type"}},p.length&&{transforms:[I.sortable]}),{title:e.formatMessage(o.Z.costModelsAssignedSources)},Object.assign({title:e.formatMessage(o.Z.costModelsLastChange),data:{orderName:"updated_timestamp"}},p.length&&{transforms:[I.sortable]}),{title:"",props:{"aria-label":e.formatMessage(o.Z.costModelsActions)}}],m=function(e,t,r){return"success"!==e?[]:r.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(l,t,[{title:e.formatMessage(o.Z.delete),tooltip:e.formatMessage(o.Z.costModelsReadOnly),onClick:(e,t,r)=>{a(r.data)}}]),d=function(e,t,r){return function(s,a,o){const n=e[a]&&e[a].data?e[a].data.orderName:null;null!==n&&(o!==I.SortByDirection.asc?r.navigate(D(Object.assign(Object.assign({},t),{ordering:`-${n}`}))):r.navigate(D(Object.assign(Object.assign({},t),{ordering:n}))))}}(u,n,c),h=e=>({sortBy:{index:this.state.activeSortIndex,direction:this.state.activeSortDirection,defaultDirection:"asc"},onSort:(e,t,r)=>{this.setState(Object.assign(Object.assign({},this.state),{activeSortDirection:r,activeSortIndex:t})),d(e,t,r)},columnIndex:e});return i().createElement(I.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsTableAriaLabel),gridBreakPoint:I.TableGridBreakpoint.grid2xl,variant:I.TableVariant.compact},i().createElement(I.Thead,null,i().createElement(I.Tr,null,u.map(((e,t)=>i().createElement(I.Th,{key:t,sort:e.transforms?h(t):void 0},e.title))),i().createElement(I.Th,null))),i().createElement(I.Tbody,null,p.map(((e,t)=>i().createElement(I.Tr,{key:t},e.cells.map(((e,t)=>i().createElement(I.Td,{colSpan:e.props?e.props.colSpan:void 0,key:t},e.title?e.title:e))),!e.heightAuto&&i().createElement(I.Td,{isActionCell:!0},i().createElement(I.ActionsColumn,{items:m.map((r=>Object.assign(Object.assign({},r),{onClick:s=>r.onClick(s,t,e,null)})))})))))))}}const et=(0,m.X1)((e=>({canWrite:O.c5.isCostModelWritePermission(e),query:M.E6.query(e),costData:M.E6.costModels(e),stateName:M.E6.stateName(e)}))),tt=(0,l.connect)(et,(e=>{const t=M.F0.setCostModelDialog;return{openDeleteDialog:r=>e(t({name:"deleteCostModel",isOpen:!0,meta:r}))}}))(Ye),rt=(0,c.ZP)((0,g.E)(tt)),st=({placeholder:e="",value:t,onChange:r,onKeyPress:a})=>i().createElement(s.InputGroup,null,i().createElement(s.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==t&&a(e)}}),i().createElement(s.InputGroupText,{style:{borderLeft:"0"}},i().createElement(De.W1,null))),at=(e,t,r,s)=>a=>{if("Enter"===a.key&&""!==s.value){const a=s.value;e.navigate(D(Object.assign(Object.assign({},r),{[t]:r[t]?`${r[t]},${a}`:a}))),s.setValue("")}},ot=(e,t,r)=>(s,a)=>{const o=r[t]?r[t].split(",").filter((e=>e!==a)):null;e.navigate(D(Object.assign(Object.assign({},r),{[t]:null===o||0===o.length?null:o.join(",")})))},nt=(e,t,r)=>()=>{e.navigate(D(Object.assign(Object.assign({},t),{[r]:null})))},it=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:s=F.N,router:a}=r,{filterType:n,query:i}=e,c=i.description?i.description.split(","):[];return{categoryName:s.formatMessage(o.Z.description),chips:c,deleteChip:ot(a,"description",Object.assign(Object.assign({},k),i)),deleteChipGroup:nt(a,Object.assign(Object.assign({},k),i),"description"),filterType:n,intl:s,query:i,router:a}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:a,chips:n,categoryName:c,query:l,router:p})=>{const[u,m]=i().useState(""),d="description"===r?i().createElement(st,{placeholder:a.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:at(p,"description",Object.assign(Object.assign({},k),l),{value:u,setValue:m})}):null;return i().createElement(s.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:c},d)})),ct=(0,c.ZP)((0,g.E)(it)),lt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:s=F.N,router:a}=r,{filterType:n,query:i}=e,c=i.name?i.name.split(","):[];return{deleteChip:ot(a,"name",Object.assign(Object.assign({},k),i)),deleteChipGroup:nt(a,Object.assign(Object.assign({},k),i),"name"),filterType:n,chips:c,categoryName:s.formatMessage(o.Z.names,{count:1}),intl:s,query:i,router:a}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:a,chips:n,categoryName:c,query:l,router:p})=>{const[u,m]=i().useState(""),d="name"===r?i().createElement(st,{placeholder:a.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:at(p,"name",Object.assign(Object.assign({},k),l),{value:u,setValue:m})}):null;return i().createElement(s.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:c},d)})),pt=(0,c.ZP)((0,g.E)(lt)),ut=(e,t)=>()=>{t(!1);const r=document.getElementById(e);r&&r.focus()},mt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:s=F.N,router:a}=r,{filterType:n,query:i}=e;return{chips:i.source_type?[i.source_type]:[],categoryName:s.formatMessage(o.Z.sourceType),deleteChip:nt(a,Object.assign(Object.assign({},k),i),"source_type"),filterType:n,intl:s,query:i,router:a}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:a,chips:n,categoryName:c,query:l,router:p})=>{const[u,m]=i().useState(!1),d="source-type-filter",h=e=>p.navigate(D(Object.assign(Object.assign(Object.assign({},k),l),{source_type:e}))),g="sourceType"===r?i().createElement(s.Dropdown,{onSelect:ut(d,m),isOpen:u,toggle:i().createElement(s.DropdownToggle,{onToggle:e=>{m(e)},id:d},a.formatMessage(o.Z.filterByPlaceholder,{value:"source_type"})),dropdownItems:[i().createElement(s.DropdownItem,{key:"aws",component:"button",onClick:()=>h("aws")},a.formatMessage(o.Z.aws)),i().createElement(s.DropdownItem,{key:"azure",component:"button",onClick:()=>h("azure")},a.formatMessage(o.Z.azure)),i().createElement(s.DropdownItem,{key:"ocp",component:"button",onClick:()=>h("ocp")},a.formatMessage(o.Z.openShift))]}):null;return i().createElement(s.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:c},g)})),dt=(0,c.ZP)((0,g.E)(mt)),ht=(0,g.E)((0,l.connect)((e=>({query:M.E6.query(e)})),void 0,((e,t,r)=>{const{children:s,router:a}=r,{query:o}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>a.navigate(D(Object.assign(Object.assign(Object.assign({},k),o),{description:null,source_type:null,name:null}))),children:s}}))(s.Toolbar)),gt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(M.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,r)=>{const{intl:s=F.N}=r,{filterType:a}=e;return{filterType:a,intl:s,updateFilterType:t.updateFilterType}}))((({filterType:e,intl:t,updateFilterType:r})=>{const[a,n]=i().useState(!1),c=[i().createElement(s.SelectOption,{key:"name",value:"name"},t.formatMessage(o.Z.names,{count:1})),i().createElement(s.SelectOption,{key:"description",value:"description"},t.formatMessage(o.Z.description)),i().createElement(s.SelectOption,{key:"sourceType",value:"sourceType"},t.formatMessage(o.Z.sourceType))];return i().createElement(s.Select,{isOpen:a,onSelect:(e,t)=>{r(t),n(!1)},onToggle:n,selections:e,toggleIcon:i().createElement(ke.k1,null),variant:s.SelectVariant.single},c)})),yt=(0,c.ZP)((0,g.E)(gt)),bt=(0,g.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:s}=M.E6.pagination(e);return{count:t,page:r,perPage:s,query:M.E6.query(e)}}),void 0,((e,t,r)=>{const{router:a}=r,{count:o,page:n,perPage:i,query:c}=e;return{isCompact:!0,itemCount:o,page:n,perPage:i,variant:s.PaginationVariant.top,onSetPage:(e,t,r)=>{a.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{offset:j(t,r)})))},onPerPageSelect:(e,t)=>{a.navigate(D(Object.assign(Object.assign(Object.assign({},k),c),{limit:t,offset:0})))}}}))(s.Pagination)),ft=()=>i().createElement(ht,null,i().createElement(s.ToolbarContent,null,i().createElement(s.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:i().createElement(ke.k1,null)},i().createElement(s.ToolbarGroup,{variant:"filter-group"},i().createElement(s.ToolbarItem,null,i().createElement(yt,null)),i().createElement(pt,null),i().createElement(ct,null),i().createElement(dt,null))),i().createElement(s.ToolbarGroup,null,i().createElement(Ne,null)),i().createElement(s.ToolbarItem,{variant:s.ToolbarItemVariant.pagination},i().createElement(bt,null))));class Tt extends i().Component{componentDidMount(){const{getCostModelsData:e,getMetricsData:t,getRbacData:r,search:s}=this.props;e(s),t(),r()}componentDidUpdate(e){const{getCostModelsData:t,search:r}=this.props;e.search!==r&&t(r)}render(){const{intl:e}=this.props;return i().createElement(s.PageSection,{isFilled:!0},i().createElement("div",{style:x.descContainer},e.formatMessage(o.Z.costModelsDesc,{learnMore:i().createElement("a",{href:e.formatMessage(o.Z.docsUsingCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))})),i().createElement(_e,null),i().createElement(qe,null),i().createElement(ft,null),i().createElement(rt,null),i().createElement(A,null))}}const vt=(0,g.E)((0,c.ZP)((0,l.connect)(((e,t)=>{const r=(0,Z.parse)(t.router.location.search,{ignoreQueryPrefix:!0}),s=Object.assign(Object.assign({},r),{tabKey:void 0});return{search:(0,Z.stringify)(s,{encode:!1,indices:!1})}}),(e=>({getCostModelsData:t=>M.F0.fetchCostModels(t)(e),getRbacData:()=>O.O9.fetchRbac()(e),getMetricsData:()=>R.Wg.fetchMetrics()(e)})))(Tt)));var Et=r(79112),St=r(6456),Pt=r(52471),Ct=r(47947),Zt=r(62634),Mt=r(68883),Rt=r(15920);const Ot={action:{marginLeft:f.ZP.var},descContainer:{backgroundColor:y.ZP.value,paddingLeft:f.ZP.value,paddingRight:f.ZP.value,paddingTop:f.ZP.value},pagination:{backgroundColor:y.ZP.value,paddingBottom:f.ZP.value,paddingTop:f.ZP.value}};var Ft=r(86729),It=r(91882);class kt extends i().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{intl:e,isAllSelected:t,report:r,selectedItems:a}=this.props;if(!r)return;const n=[],c=(0,Zt.c)({report:r,idKey:"project"}),l=[{name:""},Object.assign({orderBy:"project",name:e.formatMessage(o.Z.detailsResourceNames,{value:"name"})},c.length&&{isSortable:!0}),Object.assign({orderBy:"status",name:e.formatMessage(o.Z.detailsResourceNames,{value:"status"})},c.length&&{isSortable:!0}),Object.assign(Object.assign({orderBy:"source_type",name:e.formatMessage(o.Z.sourceType)},c.length&&{isSortable:!0}),{style:It.W.lastItemColumn})];c.map((r=>{const c=r&&null!==r.label?r.label:"";n.push({cells:[{},{value:c},{value:i().createElement(s.Label,{variant:"outline",color:"green"},e.formatMessage(o.Z.enabled))},{value:"source type",style:It.W.lastItem}],item:r,selected:t||a&&void 0!==a.find((e=>e.id===r.id))})}));const p=l.filter((e=>!e.hidden)),u=n.map((e=>{var t=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:p,rows:u})}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t,selectedItems:r}=this.props,s=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")===s&&e.selectedItems===r||this.initDatum()}render(){const{filterBy:e,isLoading:t,onSelected:r,onSort:s,orderBy:a,selectedItems:o}=this.props,{columns:n,rows:c}=this.state;return i().createElement(Ft.w,{columns:n,filterBy:e,isLoading:t,onSelected:r,onSort:s,orderBy:a,rows:c,selectedItems:o})}}const Dt=(0,c.ZP)((0,g.E)(kt));var jt=r(36116),At=r(11602);class xt extends i().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getTagActions=()=>{const{intl:e,onDisableTags:t,onEnableTags:r,selectedItems:a}=this.props;return i().createElement(i().Fragment,null,i().createElement(s.Button,{isDisabled:0===a.length,key:"save",onClick:r,variant:s.ButtonVariant.primary},e.formatMessage(o.Z.enableTags)),i().createElement(s.Button,{isDisabled:0===a.length,key:"reset",onClick:t,style:Ot.action,variant:s.ButtonVariant.secondary},e.formatMessage(o.Z.disableTags)))},this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(o.Z.filterByValues,{value:"name"}),key:"project"},{name:e.formatMessage(o.Z.filterByValues,{value:"status"}),key:"status"},{name:e.formatMessage(o.Z.filterByValues,{value:"source_type"}),key:"source_type"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:s,onBulkSelected:a,onFilterAdded:o,onFilterRemoved:n,pagination:c,query:l,selectedItems:p}=this.props,{categoryOptions:u}=this.state;return i().createElement(At.k,{categoryOptions:u,isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:s,onBulkSelected:a,onFilterAdded:o,onFilterRemoved:n,pagination:c,query:l,resourcePathsType:jt.C.ocp,selectedItems:p,showBulkSelect:!0,showFilter:!0,tagActions:this.getTagActions()})}}const Vt=(0,m.X1)(((e,t)=>({}))),wt=(0,l.connect)(Vt,{})(xt),zt=(0,c.ZP)(wt),Lt={filter:{limit:10,offset:0},filter_by:{},exclude:{},group_by:{project:"*"},order_by:{cost:"desc"}},Wt=St.C.cost,Bt=St.K.ocp;class Nt extends i().Component{constructor(e,t){super(e,t),this.defaultState={isAllSelected:!1,selectedItems:[]},this.state=Object.assign({},this.defaultState),this.getComputedItems=()=>{const{report:e}=this.props;return(0,Zt.c)({report:e,idKey:"project"})},this.getPagination=(e=!1,t=!1)=>{const{intl:r,query:a,report:n,router:c}=this.props,l=n&&n.meta?n.meta.count:0,p=n&&n.meta&&n.meta.filter&&n.meta.filter.limit?n.meta.filter.limit:Lt.filter.limit,u=n&&n.meta&&n.meta.filter&&n.meta.filter.offset?n.meta.filter.offset:Lt.filter.offset,m=Math.trunc(u/p+1);return i().createElement(s.Pagination,{isCompact:!t,isDisabled:e,itemCount:l,onPerPageSelect:(e,t)=>(0,Mt.Lk)(a,c,t),onSetPage:(e,t)=>(0,Mt.F4)(a,c,n,t),page:m,perPage:p,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.openShift),placement:t?"bottom":"top"})},variant:t?s.PaginationVariant.bottom:s.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},this.getTable=()=>{const{query:e,report:t,reportFetchStatus:r,reportQueryString:s,router:a}=this.props,{isAllSelected:o,selectedItems:n}=this.state;return i().createElement(Dt,{filterBy:e.filter_by,isAllSelected:o,isLoading:r===m.iF.inProgress,onSelected:this.handleSelected,onSort:(t,r)=>(0,Mt.K8)(e,a,t,r),orderBy:e.order_by,report:t,reportQueryString:s,selectedItems:n})},this.getToolbar=e=>{const{query:t,report:r,router:s}=this.props,{isAllSelected:a,selectedItems:o}=this.state,n=0===e.length,c=r&&r.meta?r.meta.count:0;return i().createElement(zt,{isAllSelected:a,isDisabled:n,itemsPerPage:e.length,itemsTotal:c,onBulkSelected:this.handleBulkSelected,onDisableTags:this.handleOnDisableTags,onEnableTags:this.handleOnEnableTags,onFilterAdded:e=>(0,Mt.JA)(t,s,e),onFilterRemoved:e=>(0,Mt.vI)(t,s,e),pagination:this.getPagination(n),query:t,selectedItems:o})},this.handleBulkSelected=e=>{const{isAllSelected:t}=this.state;"none"===e?this.setState({isAllSelected:!1,selectedItems:[]}):"page"===e?this.setState({isAllSelected:!1,selectedItems:this.getComputedItems()}):"all"===e&&this.setState({isAllSelected:!t,selectedItems:[]})},this.handleSelected=(e,t=!1)=>{const{isAllSelected:r,selectedItems:s}=this.state;let a=[...r?this.getComputedItems():s];e&&e.length>0&&(t?e.map((e=>a.push(e))):e.map((e=>{a=a.filter((t=>t.id!==e.id))}))),this.setState({isAllSelected:!1,selectedItems:a})},this.handleOnDisableTags=()=>{},this.handleOnEnableTags=()=>{},this.updateReport=()=>{const{fetchReport:e,reportQueryString:t}=this.props;e(Bt,Wt,t)},this.handleBulkSelected=this.handleBulkSelected.bind(this),this.handleSelected=this.handleSelected.bind(this)}componentDidMount(){this.updateReport()}componentDidUpdate(e,t){const{report:r,reportError:s,reportQueryString:a,router:o}=this.props,{selectedItems:n}=this.state,i=e.reportQueryString!==a,c=!r&&!s,l=!o.location.search,p=t.selectedItems!==n;(i||c||l||p)&&this.updateReport()}render(){const{intl:e,reportError:t,reportFetchStatus:r}=this.props,a=this.getComputedItems(),n=0===a.length,c=e.formatMessage(o.Z.tagLabelsTitle);return t?i().createElement(Ct.W,{title:c}):i().createElement(s.PageSection,{isFilled:!0},i().createElement("div",{style:Ot.descContainer},e.formatMessage(o.Z.tagDesc,{learnMore:i().createElement("a",{href:e.formatMessage(o.Z.docsConfigTags),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))})),this.getToolbar(a),r===m.iF.inProgress?i().createElement(Pt.g,null):i().createElement(i().Fragment,null,this.getTable(),i().createElement("div",{style:Ot.pagination},this.getPagination(n,!0))))}}const _t=(0,m.X1)(((e,{router:t})=>{const r=(0,Et.mB)(t.location.search),s=Object.assign(Object.assign({},Lt),r),a={filter:Object.assign(Object.assign({},s.filter),{resolution:"monthly",time_scope_units:"month",time_scope_value:-1}),filter_by:s.filter_by,group_by:s.group_by,order_by:s.order_by},o=(0,Et.pm)(a);return{query:s,report:Rt.ZV.selectReport(e,Bt,Wt,o),reportError:Rt.ZV.selectReportError(e,Bt,Wt,o),reportFetchStatus:Rt.ZV.selectReportFetchStatus(e,Bt,Wt,o),reportQueryString:o}})),Ut={fetchReport:Rt.nx.fetchReport},Kt=(0,c.ZP)((0,g.E)((0,l.connect)(_t,Ut)(Nt)));var qt=r(86896),Gt=r(58157);const Ht={action:{marginLeft:f.ZP.var},descContainer:{backgroundColor:y.ZP.value,paddingLeft:f.ZP.value,paddingRight:f.ZP.value,paddingTop:f.ZP.value},pagination:{backgroundColor:y.ZP.value,paddingBottom:f.ZP.value,paddingTop:f.ZP.value}};class $t extends i().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{intl:e,isAllSelected:t,report:r,selectedItems:a}=this.props;if(!r)return;const n=[],c=(0,Zt.c)({report:r,idKey:"project"}),l=[{name:""},Object.assign({orderBy:"project",name:e.formatMessage(o.Z.detailsResourceNames,{value:"name"})},c.length&&{isSortable:!0}),Object.assign({orderBy:"status",name:e.formatMessage(o.Z.detailsResourceNames,{value:"status"})},c.length&&{isSortable:!0})];c.map((r=>{const c=r&&null!==r.label?r.label:"";n.push({cells:[{},{value:c},{value:i().createElement(s.Label,{variant:"outline",color:"green"},e.formatMessage(o.Z.enabled))}],item:r,selected:t||a&&void 0!==a.find((e=>e.id===r.id))})}));const p=l.filter((e=>!e.hidden)),u=n.map((e=>{var t=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:p,rows:u})}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t,selectedItems:r}=this.props,s=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")===s&&e.selectedItems===r||this.initDatum()}render(){const{filterBy:e,isLoading:t,onSelected:r,onSort:s,orderBy:a,selectedItems:o}=this.props,{columns:n,rows:c}=this.state;return i().createElement(Ft.w,{columns:n,filterBy:e,isLoading:t,onSelected:r,onSort:s,orderBy:a,rows:c,selectedItems:o})}}const Xt=(0,c.ZP)((0,g.E)($t));class Jt extends i().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getTagActions=()=>{const{intl:e,onDisableTags:t,onEnableTags:r,selectedItems:a}=this.props;return i().createElement(i().Fragment,null,i().createElement(s.Button,{isDisabled:0===a.length,key:"save",onClick:r,variant:s.ButtonVariant.primary},e.formatMessage(o.Z.enableCategories)),i().createElement(s.Button,{isDisabled:0===a.length,key:"reset",onClick:t,style:Ht.action,variant:s.ButtonVariant.secondary},e.formatMessage(o.Z.disableCategories)))},this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(o.Z.filterByValues,{value:"name"}),key:"project"},{name:e.formatMessage(o.Z.filterByValues,{value:"status"}),key:"status"},{name:e.formatMessage(o.Z.filterByValues,{value:"source_type"}),key:"source_type"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:s,onBulkSelected:a,onFilterAdded:o,onFilterRemoved:n,pagination:c,query:l,selectedItems:p}=this.props,{categoryOptions:u}=this.state;return i().createElement(At.k,{categoryOptions:u,isAllSelected:e,isDisabled:t,itemsPerPage:r,itemsTotal:s,onBulkSelected:a,onFilterAdded:o,onFilterRemoved:n,pagination:c,query:l,resourcePathsType:jt.C.ocp,selectedItems:p,showBulkSelect:!0,showFilter:!0,tagActions:this.getTagActions()})}}const Qt=(0,m.X1)((()=>({}))),Yt=(0,l.connect)(Qt,{})(Jt),er=(0,c.ZP)(Yt),tr={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1,limit:10,offset:0},filter_by:{},group_by:{project:"*"},order_by:{cost:"desc"}},rr=St.C.cost,sr=St.K.ocp,ar=()=>{const[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(Object.assign({},tr)),[c,p]=(0,n.useState)([]),u=(0,qt.Z)(),{report:d,reportError:h,reportFetchStatus:g,reportQueryString:y}=(({query:e})=>{const t=(0,l.useDispatch)(),r=(0,Et.pm)(e),s=(0,l.useSelector)((e=>Rt.ZV.selectReport(e,sr,rr,r))),a=(0,l.useSelector)((e=>Rt.ZV.selectReportFetchStatus(e,sr,rr,r))),o=(0,l.useSelector)((e=>Rt.ZV.selectReportError(e,sr,rr,r)));return(0,n.useEffect)((()=>{o||a===m.iF.inProgress||t(Rt.nx.fetchReport(sr,rr,r))}),[e]),{report:s,reportError:o,reportFetchStatus:a,reportQueryString:r}})({query:r}),b=()=>(0,Zt.c)({report:d,idKey:"project"}),f=(e=!1,t=!1)=>{const r=d&&d.meta?d.meta.count:0,a=d&&d.meta&&d.meta.filter&&d.meta.filter.limit?d.meta.filter.limit:tr.filter.limit,n=d&&d.meta&&d.meta.filter&&d.meta.filter.offset?d.meta.filter.offset:tr.filter.offset,c=Math.trunc(n/a+1);return i().createElement(s.Pagination,{isCompact:!t,isDisabled:e,itemCount:r,onPerPageSelect:(e,t)=>S(t),onSetPage:(e,t)=>P(t),page:c,perPage:a,titles:{paginationTitle:u.formatMessage(o.Z.paginationTitle,{title:u.formatMessage(o.Z.openShift),placement:t?"bottom":"top"})},variant:t?s.PaginationVariant.bottom:s.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},T=r=>{"none"===r?(t(!1),p([])):"page"===r?(t(!1),p(b())):"all"===r&&(t(!e),p([]))},v=()=>{},E=()=>{},S=e=>{const t=Gt.Lk(r,e);a(t)},P=e=>{const t=Gt.F4(r,d,e);a(t)},C=b(),Z=0===C.length;if(h){const e=u.formatMessage(o.Z.tagLabelsTitle);return i().createElement(Ct.W,{title:e})}return i().createElement(s.PageSection,{isFilled:!0},i().createElement("div",{style:Ht.descContainer},u.formatMessage(o.Z.costCategoryDesc,{learnMore:i().createElement("a",{href:u.formatMessage(o.Z.docsConfigCostCategory),rel:"noreferrer",target:"_blank"},u.formatMessage(o.Z.learnMore))})),(t=>{const s=0===t.length,o=d&&d.meta?d.meta.count:0;return i().createElement(er,{isAllSelected:e,isDisabled:s,itemsPerPage:t.length,itemsTotal:o,onBulkSelected:T,onDisableTags:v,onEnableTags:E,onFilterAdded:e=>(e=>{const t=Gt.JA(r,e);a(t)})(e),onFilterRemoved:e=>(e=>{const t=Gt.vI(r,e);a(t)})(e),pagination:f(s),query:r,selectedItems:c})})(C),g===m.iF.inProgress?i().createElement(Pt.g,null):i().createElement(i().Fragment,null,i().createElement(Xt,{filterBy:r.filter_by,isAllSelected:e,isLoading:g===m.iF.inProgress,orderBy:r.order_by,onSelected:(r,s=!1)=>{let a=[...e?b():c];r&&r.length>0&&(s?r.map((e=>a.push(e))):r.map((e=>{a=a.filter((t=>t.id!==e.id))}))),t(!1),p(a)},onSort:(e,t)=>((e,t)=>{const s=Gt.K8(r,e,t);a(s)})(e,t),report:d,reportQueryString:y,selectedItems:c}),i().createElement("div",{style:Ht.pagination},f(Z,!0))))},or={header:{backgroundColor:y.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},tabs:{backgroundColor:y.ZP.var,paddingTop:b.ZP.var}};var nr;!function(e){e.costModels="cost_models",e.calculations="calculations",e.costCategory="cost_category",e.tags="tags"}(nr||(nr={}));const ir=e=>{switch(e){case nr.costModels:return"cost_models";case nr.calculations:return"calculations";case nr.costCategory:return"cost_category";case nr.tags:return"tags"}};class cr extends i().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:i().createRef(),tab:nr.costModels},{contentRef:i().createRef(),tab:nr.calculations},{contentRef:i().createRef(),tab:nr.tags},{contentRef:i().createRef(),tab:nr.costCategory}],this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${(0,a.IV)(e)}`},this.getTab=(e,t,r)=>i().createElement(s.Tab,{eventKey:r,key:`${ir(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:i().createElement(s.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>i().createElement(s.TabContent,{eventKey:t,key:`${ir(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{activeTabKey:r}=this.state,s=i().createElement(i().Fragment,null);if(r!==t)return s;const a=ir(e);return a===nr.costModels?i().createElement(vt,null):a===nr.calculations?i().createElement(C,null):a===nr.tags?i().createElement(Kt,null):a===nr.costCategory?i().createElement(ar,null):s},this.getTabs=e=>{const{activeTabKey:t}=this.state;return i().createElement(s.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return e===nr.costModels?t.formatMessage(o.Z.costModels):e===nr.calculations?t.formatMessage(o.Z.currencyCalcuationsTitle):e===nr.tags?t.formatMessage(o.Z.tagLabelsTitle):e===nr.costCategory?t.formatMessage(o.Z.costCategoryTitle):void 0},this.handleTabClick=(e,t)=>{const{query:r,router:s}=this.props,{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});s.navigate(this.getRouteForQuery(e),{replace:!0})}))}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e})}render(){const{intl:e}=this.props,t=this.getAvailableTabs(),r=e.formatMessage(o.Z.settingsTitle);return i().createElement("div",{className:"tabsOverride"},i().createElement("header",{style:or.header},i().createElement("div",{style:or.headerContent},i().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes["2xl"]},r)),i().createElement("div",{style:or.tabs},this.getTabs(t))),i().createElement("div",null,this.getTabContent(t)))}}const lr=(0,m.X1)(((e,{router:t})=>{const r=(0,a.mB)(t.location.search),s=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0;return{query:Object.assign({},r),tabKey:s}})),pr=(0,c.ZP)((0,g.E)((0,l.connect)(lr,{})(cr)))},72483:(e,t,r)=>{r.d(t,{Y:()=>u});var s=r(90154),a=r(97027),o=r(92950),n=r.n(o),i=r(74806);const c=r(80794),l=(0,i.ZP)((({className:e,intl:t})=>n().createElement("img",{className:`optimization-icon ${e}`,src:c,alt:t.formatMessage(a.Z.optimizations),"aria-hidden":"true"})));class p extends n().Component{render(){const{intl:e}=this.props;return n().createElement(s.EmptyState,{variant:s.EmptyStateVariant.large,className:"pf-m-redhat-font"},n().createElement(s.EmptyStateIcon,{icon:l}),n().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes.lg},e.formatMessage(a.Z.noOptimizationsTitle)),n().createElement(s.EmptyStateBody,null,e.formatMessage(a.Z.noOptimizationsDesc)))}}const u=(0,i.ZP)(p)},76930:(e,t,r)=>{r.d(t,{X:()=>v});var s=r(97027),a=r(92950),o=r.n(a),n=r(22807);const i=[{label:s.Z.perspectiveValues,value:"aws"}],c=[{label:s.Z.perspectiveValues,value:"aws_ocp"}],l=[{label:s.Z.perspectiveValues,value:"azure"}],p=[{label:s.Z.perspectiveValues,value:"oci"}],u=[{label:s.Z.perspectiveValues,value:"azure_ocp"}],m=[{label:s.Z.perspectiveValues,value:"gcp"}],d=[{label:s.Z.perspectiveValues,value:"gcp_ocp"}],h=[{label:s.Z.perspectiveValues,value:"ibm"}],g=[{label:s.Z.perspectiveValues,value:"ibm_ocp"}],y=[{label:s.Z.perspectiveValues,value:"ocp_cloud"}],b=[{label:s.Z.perspectiveValues,value:"ocp"}],f=[{label:s.Z.perspectiveValues,value:"rhel"}],T=({hasAws:e,hasAwsOcp:t,hasAzure:r,hasAzureOcp:s,hasGcp:a,hasGcpOcp:o,hasIbm:n,hasIbmOcp:y,hasOci:b,isIbmFeatureEnabled:f})=>{const T=[];return e&&T.push(...i),t&&T.push(...c),a&&T.push(...m),o&&T.push(...d),n&&T.push(...h),y&&f&&T.push(...g),r&&T.push(...l),s&&T.push(...u),b&&T.push(...p),T},v=({currentItem:e,hasAws:t,hasAwsOcp:r,hasAzure:s,hasAzureOcp:a,hasGcp:i,hasGcpOcp:c,hasIbm:l,hasIbmOcp:p,hasOci:u,hasOcp:m,hasOcpCloud:d,hasRhel:h,isDisabled:g,isIbmFeatureEnabled:v,isInfrastructureTab:E,isRhelTab:S,onSelected:P})=>{const C=[];return void 0!==E||void 0!==S?E?(d&&C.push(...y),C.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:s,hasAzureOcp:a,hasGcp:i,hasGcpOcp:c,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))):S?h&&C.push(...f):m&&C.push(...b):(m&&C.push(...b),d&&C.push(...y),h&&C.push(...f),C.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:s,hasAzureOcp:a,hasGcp:i,hasGcpOcp:c,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))),o().createElement(n.o,{currentItem:e||C[0].value,isDisabled:g,onSelected:P,options:C})}},15817:(e,t,r)=>{r.r(t),r.d(t,{default:()=>xt});var s=r(90154),a=r(91290),o=r(1326),n=r(39333),i=r(84717),c=r(37610),l=r(91577),p=r(97027),u=r(92950),m=r.n(u),d=r(74806),h=r(77760),g=r(6279),y=r(6450),b=r(52471),f=r(83819),T=r(2985),v=r(76930);const E=({costType:e,currency:t,DashboardWidget:r,selectWidgets:a,widgets:o})=>m().createElement("div",null,m().createElement(s.Grid,{hasGutter:!0},o.map((o=>{const n=a[o];return n.details&&n.details.showHorizontal?m().createElement(s.GridItem,{sm:12,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t}))):m().createElement(s.GridItem,{lg:12,xl:6,xl2:4,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t})))}))));var S=r(39836),P=r(4996),C=r(92184),Z=r(38470),M=r(91919),R=r(90137),O=r(1156),F=r(68025),I=r(17918);const k={infoIcon:{fontSize:I.ZP.value}},D=(0,d.ZP)((({intl:e,report:t,status:r,title:o})=>{const n=t&&t.meta?t.meta.count:0,i=e.formatMessage(p.Z.optimizationsDetails,{count:n});return m().createElement(s.Card,{className:"summary"},m().createElement(s.CardTitle,null,m().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},e.formatMessage(o),m().createElement("span",{style:k.infoIcon},m().createElement(s.Popover,{"aria-label":e.formatMessage(p.Z.optimizationsInfoArialLabel),enableFlip:!0,bodyContent:m().createElement("p",{style:k.infoTitle},e.formatMessage(p.Z.optimizationsInfo))},m().createElement(s.Button,{"aria-label":e.formatMessage(p.Z.optimizationsInfoButtonArialLabel),variant:s.ButtonVariant.plain},m().createElement(a.iC,null)))))),m().createElement(s.CardBody,null,r===O.iF.inProgress?m().createElement(m().Fragment,null,m().createElement(s.Skeleton,{width:"16%"}),m().createElement(s.Skeleton,{className:"skeleton",width:R.N.md})):n>0?m().createElement(S.Link,{to:(0,F.dI)(M._.optimizations.path)},i):i))}));var j=r(30564),A=r(91778);class x extends m().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:r}=this.state,a=this.getSelectOptions(),o=a.find((e=>e.value===t));return m().createElement(s.Select,{id:"comparisonSelect",isDisabled:e,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:s.SelectVariant.single},a.map((e=>m().createElement(s.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:r}=this.props;r&&r(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const V=x;var w=r(91707),z=r(32412),L=r(57640);const W={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},B={comparison:{marginBottom:z.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:w.ZP.value},tabItems:{marginTop:L.ZP.value}};var N;!function(e){e.cumulative="cumulative",e.daily="daily"}(N||(N={}));class _ extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,currentComparison:N.cumulative},this.state=Object.assign({},this.defaultState),this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,s=r(e);return`${t.viewAllPath}?${(0,n.pm)({group_by:{[s]:"*"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:s,trend:a}=this.props;return s===j.i.dailyTrend?this.getDailyTrendChart(e,t,r,a.showSupplementaryLabel):s===j.i.dailyCost?this.getDailyCostChart(e,t,r):s===j.i.trend?this.getTrendChart(e,t,r,a.showSupplementaryLabel):s===j.i.usage?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:r}=this.state,s=this.getFormattedUnits(),a=e.formatMessage(t.titleKey,{units:s}),o=[{label:e.formatMessage(t.dailyTitleKey,{units:s}),value:N.daily},{label:a,value:N.cumulative,default:!0}];return m().createElement(V,{currentItem:r||o[0].value,onItemClicked:this.handleComparisonClick,options:o})},this.getDailyCostChart=(e,t,r=!1)=>{const{chartFormatter:s,currentReport:a,previousReport:o,trend:n}=this.props,{currentComparison:i}=this.state,c=n.computedReportItem,l=n.computedReportItemValue,p=i===N.daily,u=p?P.yZ.rolling:n.datumType,d=(0,P.zJ)(a,u,"date",c,l),h=(0,P.zJ)(o,u,"date",c,l),g=this.getForecastData(a,n.computedForecastItem),y=p?Z.V3:Z.me;return m().createElement(m().Fragment,null,m().createElement("div",{style:B.comparisonContainer},m().createElement("div",{style:B.comparison},this.getChartComparison())),m().createElement(y,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,forecastConeData:g.forecastConeData,forecastData:g.forecastData,formatOptions:n.formatOptions,formatter:s||A.xG,height:t,previousCostData:h,showForecast:void 0!==n.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,s=!1)=>{const{chartFormatter:a,chartName:o,currentReport:n,details:i,previousReport:c,trend:l}=this.props,{currentComparison:p}=this.state,u=l.computedReportItem,d=l.computedReportItemValue,h=p===N.daily,g=h?P.yZ.rolling:l.datumType,y=(0,P.zJ)(n,g,"date",u,d),b=(0,P.zJ)(c,g,"date",u,d),{forecastData:f,forecastConeData:T}=this.getForecastData(n,l.computedForecastItem),v=h?Z.Y0:Z.Nd;return m().createElement(m().Fragment,null,m().createElement("div",{style:B.comparisonContainer},m().createElement("div",{style:B.comparison},this.getChartComparison())),m().createElement(v,{adjustContainerHeight:r,chartName:o,containerHeight:e,currentData:y,forecastData:f,forecastConeData:T,formatOptions:l.formatOptions,formatter:a||A.bM,height:t,previousData:b,showForecast:void 0!==l.computedForecastItem,showSupplementaryLabel:s,showUsageLegendLabel:i.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:s}=this.props,{currentComparison:a}=this.state,o=a===N.daily?P.yZ.rolling:s.datumType,n=(0,C.x1)(r,e,t,o);return{forecastData:(0,C.nB)(n,o,t),forecastConeData:(0,C.Qw)(n,o,t)}},this.getTrendChart=(e,t,r=!1,s=!1)=>{const{chartFormatter:a,chartName:o,currentReport:n,details:i,intl:c,previousReport:l,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,h=c.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),g=(0,P.zJ)(n,p.datumType,"date",u,d),y=(0,P.zJ)(l,p.datumType,"date",u,d),{forecastData:b,forecastConeData:f}=this.getForecastData(n,p.computedForecastItem);return m().createElement(Z.Nd,{adjustContainerHeight:r,containerHeight:e,chartName:o,currentData:g,forecastData:b,forecastConeData:f,formatOptions:p.formatOptions,formatter:a||A.bM,height:t,previousData:y,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:s,showUsageLegendLabel:i.showUsageLegendLabel,title:h,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:r,chartName:s,currentReport:a,intl:o,previousReport:n,trend:i}=this.props,c=o.formatMessage(i.titleKey,{units:this.getFormattedUnits()}),l=(0,P.zJ)(a,i.datumType,"date","request"),p=(0,P.zJ)(n,i.datumType,"date","request"),u=(0,P.zJ)(a,i.datumType,"date","usage"),d=(0,P.zJ)(n,i.datumType,"date","usage");return m().createElement(Z.I0,{adjustContainerHeight:t,chartName:s,containerHeight:W.containerUsageHeight,currentRequestData:l,currentUsageData:u,formatOptions:i.formatOptions,formatter:r||A.bM,height:e,previousRequestData:p,previousUsageData:d,title:c})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:s,trend:a}=this.props,o=a.computedReportItem||"cost",n=a.computedReportItemValue||"total";return m().createElement(Z.rN,{chartType:e,computedReportItem:o,computedReportItemValue:n,costLabel:this.getDetailsLabel(r.costKey),formatOptions:r.formatOptions,report:t,reportType:s,requestLabel:this.getDetailsLabel(r.requestKey),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:this.getUnits(),usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?m().createElement(S.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,s=t(e)||"";return r.formatMessage(p.Z.groupByAll,{value:s,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,r=t.computedReportItem||"cost",s=this.getUnits();return r===P.LI.usage?e.formatMessage(p.Z.units,{units:(0,A.ZV)(s)}):e.formatMessage(p.Z.currencyUnits,{units:s})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=W.containerAltHeight,chartAltHeight:t=W.chartAltHeight,currentReportFetchStatus:r,details:s}=this.props;return m().createElement(Z.j0,{detailsLink:this.getDetailsLink(),status:r,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,s.adjustContainerHeight))},this.getOptimizationsSummary=()=>{const{rosReportFetchStatus:e,rosReport:t,titleKey:r}=this.props;return m().createElement(D,{status:e,report:t,title:r})},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:a,tabsReportFetchStatus:o}=this.props,n=r(e);return m().createElement(s.Tab,{eventKey:t,key:`${r(e)}-tab`,title:m().createElement(s.TabTitleText,null,this.getTabTitle(e))},m().createElement("div",{style:B.tabItems},m().createElement(Z.mZ,{idKey:n,key:`${n}-items`,report:a,status:o},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,getIdKeyForTab:s,tabsReport:a,topItems:o,trend:n}=this.props,{activeTabKey:i}=this.state,c=s(e),l=s(r[i]),p=n.computedReportItem||"cost",u=n.computedReportItemValue||"total";let d;const h=a&&a.meta&&a.meta.total;return p===P.LI.usage?h&&a.meta.total.usage&&(d=a.meta.total.usage.value):h&&a.meta.total[p]&&a.meta.total[p][u]&&(d=a.meta.total[p][u].value),l===c?m().createElement(Z.EH,{formatOptions:o?o.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return m().createElement(s.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,s=t(e)||"";return r.formatMessage(p.Z.groupByTop,{value:s,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,s=r.computedReportItem||"cost",a=r.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const o=e&&e.meta&&e.meta.total;return s===P.LI.usage?o&&e.meta.total.usage?e.meta.total.usage.units:void 0:o&&e.meta.total[s]&&e.meta.total[s][a]?e.meta.total[s][a].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return m().createElement(Z.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(W.containerTrendHeight,W.chartHeight,r.adjustContainerHeight),e&&m().createElement("div",{style:B.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:s,updateTab:a}=this.props;a(s,r[t]),this.setState({activeTabKey:t})},this.updateForecasts=()=>{const{fetchForecasts:e,widgetId:t}=this.props;e&&e(t)},this.updateReports=()=>{const{fetchReports:e,widgetId:t}=this.props;e&&e(t)},this.updateRosReports=()=>{const{fetchRosReports:e,isRosFeatureEnabled:t,widgetId:r}=this.props;e&&t&&e(r)}}componentDidMount(){const{availableTabs:e,details:t,id:r,trend:s,updateTab:a}=this.props;e&&a(r,e[0]),s&&void 0!==s.computedForecastItem&&this.updateForecasts(),t.showOptimizations||this.updateReports(),t.showOptimizations&&this.updateRosReports()}componentDidUpdate(e){const{costType:t,currency:r,trend:s}=this.props;e.costType===t&&e.currency===r||(this.updateReports(),s&&void 0!==s.computedForecastItem&&this.updateForecasts())}render(){const{details:e,isRosFeatureEnabled:t}=this.props;return e.showOptimizations?t?this.getOptimizationsSummary():null:e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const U=_;var K=r(81628),q=r(79277),G=r(15920),H=r(15829);const $=e=>{switch(e){case K.IC.services:return"service";case K.IC.accounts:return"account";case K.IC.regions:return"region"}},X=(0,O.X1)(((e,{widgetId:t})=>{const r=K.Cv.selectWidget(e,t),s=K.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:$}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),J={fetchForecasts:K.Kf.v4,fetchReports:K.Kf.a4,updateTab:K.Kf.as},Q=(0,d.ZP)((0,h.connect)(X,J)(U)),Y=(0,O.X1)(((e,t)=>({DashboardWidget:Q,selectWidgets:K.Cv.selectWidgets(e),widgets:K.Cv.selectCurrentWidgets(e)}))),ee=(0,h.connect)(Y,{})(E);var te=r(25566);const re=e=>{switch(e){case te.e1.services:return"service";case te.e1.accounts:return"account";case te.e1.regions:return"region"}},se=(0,O.X1)(((e,{widgetId:t})=>{const r=te.Hc.selectWidget(e,t),s=te.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:re}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),ae={fetchForecasts:te.NA.v4,fetchReports:te.NA.a4,updateTab:te.NA.as},oe=(0,d.ZP)((0,h.connect)(se,ae)(U)),ne=(0,O.X1)(((e,t)=>({DashboardWidget:oe,selectWidgets:te.Hc.selectWidgets(e),widgets:te.Hc.selectCurrentWidgets(e)}))),ie=(0,h.connect)(ne,{})(E);var ce=r(25976);const le=e=>{switch(e){case ce.vY.service_names:return"service_name";case ce.vY.subscription_guids:return"subscription_guid";case ce.vY.resource_locations:return"resource_location"}},pe=(0,O.X1)(((e,{widgetId:t})=>{const r=ce.rj.selectWidget(e,t),s=ce.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:le}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),ue={fetchForecasts:ce.oc.v4,fetchReports:ce.oc.a4,updateTab:ce.oc.as},me=(0,d.ZP)((0,h.connect)(pe,ue)(U)),de=(0,O.X1)(((e,t)=>({DashboardWidget:me,selectWidgets:ce.rj.selectWidgets(e),widgets:ce.rj.selectCurrentWidgets(e)}))),he=(0,h.connect)(de,{})(E);var ge=r(76764);const ye=e=>{switch(e){case ge.Vp.service_names:return"service_name";case ge.Vp.subscription_guids:return"subscription_guid";case ge.Vp.resource_locations:return"resource_location"}},be=(0,O.X1)(((e,{widgetId:t})=>{const r=ge.MW.selectWidget(e,t),s=ge.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:ye}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),fe={fetchForecasts:ge._V.v4,fetchReports:ge._V.a4,updateTab:ge._V.as},Te=(0,d.ZP)((0,h.connect)(be,fe)(U)),ve=(0,O.X1)(((e,t)=>({DashboardWidget:Te,selectWidgets:ge.MW.selectWidgets(e),widgets:ge.MW.selectCurrentWidgets(e)}))),Ee=(0,h.connect)(ve,{})(E);var Se=r(67776);const Pe=e=>{switch(e){case Se.BP.gcpProjects:return"gcp_project";case Se.BP.regions:return"region";case Se.BP.services:return"service"}},Ce=(0,O.X1)(((e,{widgetId:t})=>{const r=Se.oS.selectWidget(e,t),s=Se.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Pe}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Ze={fetchForecasts:Se.n5.v4,fetchReports:Se.n5.a4,updateTab:Se.n5.as},Me=(0,d.ZP)((0,h.connect)(Ce,Ze)(U)),Re=(0,O.X1)(((e,t)=>({DashboardWidget:Me,selectWidgets:Se.oS.selectWidgets(e),widgets:Se.oS.selectCurrentWidgets(e)}))),Oe=(0,h.connect)(Re,{})(E);var Fe=r(99900);const Ie=e=>{switch(e){case Fe.VN.gcpProjects:return"gcp_project";case Fe.VN.regions:return"region";case Fe.VN.services:return"service"}},ke=(0,O.X1)(((e,{widgetId:t})=>{const r=Fe.FF.selectWidget(e,t),s=Fe.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ie}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),De={fetchForecasts:Fe.uM.v4,fetchReports:Fe.uM.a4,updateTab:Fe.uM.as},je=(0,d.ZP)((0,h.connect)(ke,De)(U)),Ae=(0,O.X1)(((e,t)=>({DashboardWidget:je,selectWidgets:Fe.FF.selectWidgets(e),widgets:Fe.FF.selectCurrentWidgets(e)}))),xe=(0,h.connect)(Ae,{})(E);var Ve=r(48788);const we=e=>{switch(e){case Ve.DA.services:return"service";case Ve.DA.projects:return"project";case Ve.DA.regions:return"region"}},ze=(0,O.X1)(((e,{widgetId:t})=>{const r=Ve.Pi.selectWidget(e,t),s=Ve.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:we}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Le={fetchForecasts:Ve.lj.v4,fetchReports:Ve.lj.a4,updateTab:Ve.lj.as},We=(0,d.ZP)((0,h.connect)(ze,Le)(U)),Be=(0,O.X1)(((e,t)=>({DashboardWidget:We,selectWidgets:Ve.Pi.selectWidgets(e),widgets:Ve.Pi.selectCurrentWidgets(e)}))),Ne=(0,h.connect)(Be,{})(E);var _e=r(17568);const Ue=e=>{switch(e){case _e.Qr.accounts:return"account";case _e.Qr.regions:return"region";case _e.Qr.services:return"service"}},Ke=(0,O.X1)(((e,{widgetId:t})=>{const r=_e.qN.selectWidget(e,t),s=_e.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ue}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),qe={fetchForecasts:_e.BV.v4,fetchReports:_e.BV.a4,updateTab:_e.BV.as},Ge=(0,d.ZP)((0,h.connect)(Ke,qe)(U)),He=(0,O.X1)(((e,t)=>({DashboardWidget:Ge,selectWidgets:_e.qN.selectWidgets(e),widgets:_e.qN.selectCurrentWidgets(e)}))),$e=(0,h.connect)(He,{})(E);var Xe=r(60329),Je=r(22369),Qe=r(2136);const Ye=e=>{switch(e){case Xe.V7.clusters:return"cluster";case Xe.V7.nodes:return"node";case Xe.V7.projects:return"project"}},et=(0,O.X1)(((e,{widgetId:t})=>{const r=Xe.nH.selectWidget(e,t),s=Xe.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ye,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)}),r.rosPathsType&&r.rosType&&{isRosFeatureEnabled:Je.iJ.selectIsRosFeatureEnabled(e),rosReport:Qe.R0.selectRos(e,r.rosPathsType,r.rosType,s.optimizations),rosReportError:Qe.R0.selectRosError(e,r.rosPathsType,r.rosType,s.optimizations),rosReportFetchStatus:Qe.R0.selectRosFetchStatus(e,r.rosPathsType,r.rosType,s.optimizations)})})),tt={fetchForecasts:Xe.U6.v4,fetchReports:Xe.U6.a4,fetchRosReports:Xe.U6.XE,updateTab:Xe.U6.as},rt=(0,d.ZP)((0,h.connect)(et,tt)(U)),st=(0,O.X1)(((e,t)=>({DashboardWidget:rt,selectWidgets:Xe.nH.selectWidgets(e),widgets:Xe.nH.selectCurrentWidgets(e)}))),at=(0,h.connect)(st,{})(E);var ot=r(67522);const nt=e=>{switch(e){case ot.is.clusters:return"cluster";case ot.is.nodes:return"node";case ot.is.projects:return"project"}},it=(0,O.X1)(((e,{widgetId:t})=>{const r=ot.fO.selectWidget(e,t),s=ot.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:nt,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),ct={fetchForecasts:ot.BV.v4,fetchReports:ot.BV.a4,updateTab:ot.BV.as},lt=(0,d.ZP)((0,h.connect)(it,ct)(U)),pt=(0,O.X1)(((e,t)=>({DashboardWidget:lt,selectWidgets:ot.fO.selectWidgets(e),widgets:ot.fO.selectCurrentWidgets(e)}))),ut=(0,h.connect)(pt,{})(E);var mt=r(86482),dt=r(62331),ht=r(46919),gt=r(45087),yt=r(5842),bt=r(96351),ft=r(77392);const Tt=e=>{switch(e){case ft.FY.product_services:return"product_service";case ft.FY.payer_tenant_ids:return"payer_tenant_id";case ft.FY.regions:return"region"}},vt=(0,O.X1)(((e,{widgetId:t})=>{const r=ft.$h.selectWidget(e,t),s=ft.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Tt}),r.forecastPathsType&&r.forecastType&&{forecast:q.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),forecastError:q.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,s.forecast),forecastFetchStatus:q.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,s.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),previousReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.previous),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.previous),tabsReport:G.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportError:G.ZV.selectReportError(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:G.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Et={fetchForecasts:ft.eb.v4,fetchReports:ft.eb.a4,updateTab:ft.eb.as},St=(0,d.ZP)((0,h.connect)(vt,Et)(U)),Pt=(0,O.X1)(((e,t)=>({DashboardWidget:St,selectWidgets:ft.$h.selectWidgets(e),widgets:ft.$h.selectCurrentWidgets(e)}))),Ct=(0,h.connect)(Pt,{})(E);var Zt=r(49382),Mt=r(98499);const Rt={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:z.ZP.var},header:{backgroundColor:Zt.ZP.var,padding:Mt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:I.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:Mt.ZP.value},tabs:{backgroundColor:Zt.ZP.var,paddingBottom:Mt.ZP.var,paddingTop:Mt.ZP.var}};var Ot,Ft,It,kt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(Ot||(Ot={})),function(e){e.ocp="ocp"}(Ft||(Ft={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(It||(It={})),function(e){e.rhel="rhel"}(kt||(kt={}));const Dt=e=>{switch(e){case It.infrastructure:return"infrastructure";case It.ocp:return"ocp";case It.rhel:return"rhel"}};class jt extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFinsightsFeatureEnabled:e}=this.props,t=[],r=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:m().createRef(),tab:It.infrastructure}]:void 0,s=this.isOcpAvailable()?[{contentRef:m().createRef(),tab:It.ocp}]:void 0,a=this.isRhelAvailable()?[{contentRef:m().createRef(),tab:It.rhel}]:void 0;return e?(r&&t.push(...r),a&&t.push(...a),s&&t.push(...s)):(s&&t.push(...s),r&&t.push(...r)),t},this.getCostType=()=>{const{costType:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r}=this.state,s=this.getCurrentTab()===It.infrastructure?t:r;return s===Ot.aws||s===Ot.awsOcp?m().createElement("div",{style:Rt.costType},m().createElement(g.T,{costType:e,onSelect:this.handleOnCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return m().createElement(y.F,{onSelect:this.handleOnCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFinsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,r=this.isAwsAvailable(),s=this.isAzureAvailable(),a=this.isOciAvailable(),o=this.isGcpAvailable(),n=this.isIbmAvailable(),i=this.isOcpAvailable(),c=this.isOcpCloudAvailable(),l=this.isRhelAvailable(),p=r||s||a||o||n||c,u=p&&!i&&!l,m=l&&!p&&!i;if(i&&!p&&!l)return It.ocp;if(u)return It.infrastructure;if(m)return It.rhel;if(e)switch(t){case 0:return It.infrastructure;case 1:return It.rhel;case 2:return It.ocp}switch(t){case 0:return It.ocp;case 1:return It.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case Ot.aws:case Ot.awsOcp:case Ot.azure:case Ot.oci:case Ot.azureOcp:case Ot.gcp:case Ot.gcpOcp:case Ot.ibm:case Ot.ibmOcp:case Ot.ocpCloud:return e}return this.isOcpCloudAvailable()?Ot.ocpCloud:this.isAwsAvailable()?Ot.aws:this.isAzureAvailable()?Ot.azure:this.isOciAvailable()?Ot.oci:this.isGcpAvailable()?Ot.gcp:this.isIbmAvailable()?Ot.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:r}=this.props;return t===Ft.ocp?t:(0,bt.mn)(r,e)?Ft.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:r}=this.props;return e===kt.rhel?e:(0,bt.ZC)(r,t)?kt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r,currentRhelPerspective:s}=this.state,a=this.isAwsAvailable(),o=this.isAzureAvailable(),n=this.isGcpAvailable(),i=this.isIbmAvailable(),c=this.isOciAvailable(),l=this.isOcpAvailable(),p=this.isRhelAvailable();if(!(a||o||n||i||c||l||p))return null;let u;const d=this.getCurrentTab();switch(d){case It.infrastructure:u=t;break;case It.ocp:u=r;break;case It.rhel:u=s}return m().createElement(v.X,{currentItem:u,hasAws:a,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:o,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:n,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:i,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:c,hasOcp:l,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:p,isIbmFeatureEnabled:e,isInfrastructureTab:It.infrastructure===d,isRhelTab:It.rhel===d,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return n.IV(e)}(e)}`},this.getTab=(e,t,r)=>m().createElement(s.Tab,{eventKey:r,key:`${Dt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:m().createElement(s.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>m().createElement(s.TabContent,{eventKey:t,key:`${Dt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:s,ociProviders:a,costType:o,currency:n,gcpProviders:i,ibmProviders:c,ocpProviders:l,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:h,currentRhelPerspective:g}=this.state,y=m().createElement(m().Fragment,null),b=m().createElement(f.Z,{showReload:!1});if(u!==t)return y;const T=Dt(e);if(T===It.infrastructure)return d===Ot.ocpCloud?(0,mt.Bj)(r,l)||(0,mt.Bj)(s,l)||(0,mt.Bj)(i,l)||(0,mt.Bj)(c,l)?m().createElement($e,{currency:n}):b:d===Ot.aws?(0,mt.g8)(r)||(0,mt.rL)(r)?m().createElement(ee,{costType:o}):b:d===Ot.awsOcp?(0,mt.at)(r,l)||(0,mt.D2)(r,l)?m().createElement(ie,{currency:n}):b:d===Ot.azure?(0,mt.g8)(s)||(0,mt.rL)(s)?m().createElement(he,{currency:n}):b:d===Ot.azureOcp?(0,mt.at)(s,l)||(0,mt.D2)(s,l)?m().createElement(Ee,{currency:n}):b:d===Ot.gcp?(0,mt.g8)(i)||(0,mt.rL)(i)?m().createElement(Oe,{currency:n}):b:d===Ot.gcpOcp?(0,mt.at)(i,l)||(0,mt.D2)(i,l)?m().createElement(xe,{currency:n}):b:d===Ot.ibm?(0,mt.g8)(c)||(0,mt.rL)(c)?m().createElement(Ne,{currency:n}):b:d===Ot.oci&&((0,mt.g8)(a)||(0,mt.rL)(a))?m().createElement(Ct,{currency:n}):b;if(T===It.ocp){const e=(0,mt.g8)(l)||(0,mt.rL)(l);return h===Ft.ocp&&e?m().createElement(at,{currency:n}):b}if(T===It.rhel){const e=(0,mt.g8)(p)||(0,mt.rL)(p);return g===kt.rhel&&e?m().createElement(ut,{currency:n}):b}return y},this.getTabs=e=>{const{activeTabKey:t}=this.state;return m().createElement(s.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFinsightsFeatureEnabled:r}=this.props;return e===It.infrastructure?r?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===It.ocp?t.formatMessage(p.Z.openShift):e===It.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleOnCostTypeSelected=()=>{const{query:e,router:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(r),{replace:!0})},this.handleOnCurrencySelected=()=>{const{router:e,query:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(r),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:r}=this.props,s=this.getCurrentTab();this.setState(Object.assign(Object.assign({},s===It.infrastructure&&{currentInfrastructurePerspective:e}),s===It.ocp&&{currentOcpPerspective:e}),(()=>{const s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});r.navigate(this.getRouteForQuery(s),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:r,router:s}=this.props,{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});s.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,bt.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.KT)(r)&&(0,mt.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,bt.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.FW)(r)&&(0,mt.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,bt.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.Sv)(r)&&(0,mt.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,bt.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.tt)(r)&&(0,mt.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,bt.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,bt.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),r=this.isGcpOcpAvailable(),s=this.isIbmOcpAvailable();return e||t||r||s},this.isRhelAvailable=()=>{const{isFinsightsFeatureEnabled:e,rhelProviders:t,userAccess:r}=this.props;return e&&(0,bt.ZC)(r,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:r,userAccess:s}=this.props;e.userAccess===s&&e.providers===t||this.setState({activeTabKey:r,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isFinsightsFeatureEnabled:r,isIbmFeatureEnabled:o,userAccessFetchStatus:n}=this.props,i=!(e!==O.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),c=e===O.iF.inProgress||n===O.iF.inProgress,l=this.getAvailableTabs(),u=t.formatMessage(p.Z.overviewTitle);return c?m().createElement(b.g,{title:u}):i?m().createElement(T.L,{title:u}):m().createElement(m().Fragment,null,m().createElement("header",{style:Rt.header},m().createElement("div",{style:Rt.headerContent},m().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes["2xl"]},u,m().createElement("span",{style:Rt.infoIcon},m().createElement(s.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:m().createElement(m().Fragment,null,m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),m().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.openShift)),m().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),m().createElement("br",null),r&&m().createElement(m().Fragment,null,m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.rhel)),m().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),m().createElement("br",null)),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.aws)),m().createElement("p",null,t.formatMessage(p.Z.awsDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.gcp)),m().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),o&&m().createElement(m().Fragment,null,m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.ibm)),m().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.azure)),m().createElement("p",null,t.formatMessage(p.Z.azureDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.oci)),m().createElement("p",null,t.formatMessage(p.Z.ociDesc)))},m().createElement(s.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:s.ButtonVariant.plain},m().createElement(a.iC,null))))),m().createElement("div",{style:Rt.headerContentRight},this.getCurrency())),m().createElement("div",{style:Rt.tabs},this.getTabs(l)),m().createElement("div",{style:Rt.headerContent},m().createElement("div",{style:Rt.headerContentLeft},this.getPerspective(),this.getCostType()),m().createElement("div",{style:Rt.date},(0,gt.J4)()))),m().createElement("div",{style:Rt.main},this.getTabContent(l)))}}const At=(0,O.X1)(((e,{router:t})=>{const r=function(e){return n.mB(e)}(t.location.search),s=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0,a=r.perspective,p=(0,H.zC)(),u=a===Ot.aws||a===Ot.awsOcp?(0,H.uY)():void 0,m=Object.assign({},r),d=(0,i.H)(dt.NT),h=dt.aX.selectProviders(e,o.l.all,d),g=dt.aX.selectProvidersError(e,o.l.all,d),y=dt.aX.selectProvidersFetchStatus(e,o.l.all,d),b=(0,c.T)(ht.QR),f=ht.JO.selectUserAccess(e,l.n.all,b),T=ht.JO.selectUserAccessError(e,l.n.all,b),v=ht.JO.selectUserAccessFetchStatus(e,l.n.all,b);return{awsProviders:(0,mt.BV)(h,o.l.aws),azureProviders:(0,mt.BV)(h,o.l.azure),costType:u,currency:p,gcpProviders:(0,mt.BV)(h,o.l.gcp),ibmProviders:(0,mt.BV)(h,o.l.ibm),isFinsightsFeatureEnabled:Je.iJ.selectIsFinsightsFeatureEnabled(e),isIbmFeatureEnabled:Je.iJ.selectIsIbmFeatureEnabled(e),ociProviders:(0,mt.BV)(h,o.l.oci),ocpProviders:(0,mt.BV)(h,o.l.ocp),providers:h,providersError:g,providersFetchStatus:y,perspective:a,query:m,rhelProviders:(0,mt.BV)(h,o.l.rhel),tabKey:s,userAccess:f,userAccessError:T,userAccessFetchStatus:v,userAccessQueryString:b}})),xt=(0,d.ZP)((0,yt.E)((0,h.connect)(At,{})(jt)))},96351:(e,t,r)=>{r.d(t,{Es:()=>y,F4:()=>E,FE:()=>h,FW:()=>c,HC:()=>u,KT:()=>n,Rt:()=>b,Sv:()=>d,Xd:()=>p,ZC:()=>v,hn:()=>l,mn:()=>f,n9:()=>i,ot:()=>m,tt:()=>g,yY:()=>T});var s=r(91577);const a=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const s=e.data.find((e=>e.type===t));r=s&&s.access}else r=e&&!0===e.data;return r},o=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},n=e=>a(e,s.n.aws),i=(e,t)=>n(e)&&o(t),c=e=>a(e,s.n.azure),l=(e,t)=>c(e)&&o(t),p=e=>a(e,s.n.oci),u=(e,t)=>p(e)&&o(t),m=e=>a(e,s.n.cost_model),d=e=>a(e,s.n.gcp),h=(e,t)=>a(e,s.n.gcp)&&o(t),g=e=>d(e),y=(e,t)=>g(e)&&o(t),b=e=>a(e,s.n.ocp),f=(e,t)=>b(e)&&o(t),T=e=>a(e,s.n.rhel),v=(e,t)=>T(e)&&o(t),E=e=>a(e,s.n.ros)},80794:(e,t,r)=>{e.exports=r.p+"fonts/Red_Hat-IT_Optimization-Gray.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.b51ba2b668471fc52312192e1761f38b.js.map