"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{84717:(e,t,r)=>{r.d(t,{H:()=>a});var s=r(80129);function a(e){return(0,s.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,r)=>{r.d(t,{T:()=>a});var s=r(80129);function a(e){return(0,s.stringify)(e,{encode:!1,indices:!1})}},6450:(e,t,r)=>{r.d(t,{F:()=>b,m:()=>h});var s=r(54785),a=r(97027),c=r(92950),i=r.n(c),o=r(74806),n=r(77760),l=r(1156),p=r(64703);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"}},h=[{label:a.Z.currencyOptions,value:"AUD"},{label:a.Z.currencyOptions,value:"CAD"},{label:a.Z.currencyOptions,value:"CHF"},{label:a.Z.currencyOptions,value:"CNY"},{label:a.Z.currencyOptions,value:"DKK"},{label:a.Z.currencyOptions,value:"EUR"},{label:a.Z.currencyOptions,value:"GBP"},{label:a.Z.currencyOptions,value:"HKD"},{label:a.Z.currencyOptions,value:"JPY"},{label:a.Z.currencyOptions,value:"NOK"},{label:a.Z.currencyOptions,value:"NZD"},{label:a.Z.currencyOptions,value:"SEK"},{label:a.Z.currencyOptions,value:"SGD"},{label:a.Z.currencyOptions,value:"USD"},{label:a.Z.currencyOptions,value:"ZAR"}];class d extends i().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t}=this.props,{isSelectOpen:r}=this.state,a=this.getSelectOptions(),c=a.find((t=>t.value===e));return i().createElement(s.Select,{className:"currencyOverride",id:"currencySelect",isDisabled:t,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:c,variant:s.SelectVariant.single},a.map((e=>i().createElement(s.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return h.map((r=>{t.push({toString:()=>e.formatMessage(r.label,{units:r.value}),value:r.value})})),t},this.handleSelect=(e,t)=>{const{onSelect:r}=this.props;(0,p.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{r&&r(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return(0,p.eu)(),i().createElement("div",{style:u.currencySelector},i().createElement(s.Title,{headingLevel:"h2",size:"md",style:u.currencyLabel},e.formatMessage(a.Z.currency)),this.getSelect())}}const g=(0,l.X1)((()=>({}))),m=(0,n.connect)(g,{})(d),b=(0,o.ZP)(m)},83819:(e,t,r)=>{r.d(t,{Z:()=>g});var s=r(14748),a=r(80123),c=r(39173),i=r(92950),o=r.n(i),n=r(54785),l=r(7081),p=r(97027),u=r(74806);class h extends o().Component{render(){const{intl:e,showReload:t=!0}=this.props;return o().createElement(n.EmptyState,{variant:n.EmptyStateVariant.large,className:"pf-m-redhat-font"},o().createElement(n.EmptyStateIcon,{icon:l.wl}),o().createElement(n.Title,{headingLevel:"h5",size:"lg"},e.formatMessage(p.Z.noDataStateTitle)),o().createElement(n.EmptyStateBody,null,e.formatMessage(p.Z.noDataStateDesc)),t&&o().createElement(n.Button,{variant:"primary",onClick:()=>window.location.reload()},e.formatMessage(p.Z.noDataStateRefresh)))}}const d=(0,u.ZP)(h),g=({showReload:e,title:t})=>o().createElement(o().Fragment,null,t&&o().createElement(a.Z,null,o().createElement(c.Z,{title:t})),o().createElement(s.Z,null,o().createElement(d,{showReload:e})))},2985:(e,t,r)=>{r.d(t,{L:()=>O});var s=r(14748),a=r(80123),c=r(39173),i=r(92950),o=r.n(i),n=r(54785),l=r(15265),p=r(7081),u=r(1326),h=r(97027),d=r(74806);const g=r(84735),m=(0,d.ZP)((({className:e,intl:t})=>o().createElement("img",{className:`cost-icon ${e}`,src:g,alt:t.formatMessage(h.Z.costManagement),"aria-hidden":"true"})));var b=r(68025),v=r(98499);const y={iconSpacer:{marginLeft:r(43789).ZP.value},viewSources:{marginTop:v.ZP.value}};class f extends o().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{intl:r}=this.props;return o().createElement("a",{href:r.formatMessage(t),rel:"noreferrer",target:"_blank"},r.formatMessage(e),o().createElement("span",{style:y.iconSpacer},o().createElement(l.LA,null)))},this.getRouteToSources=()=>`${(0,b.I)()}/settings/sources`}render(){const{intl:e,providerType:t}=this.props;let r,s,a,c=h.Z.noProvidersStateOverviewDesc,i=h.Z.noProvidersStateOverviewTitle;switch(t){case u.l.aws:c=h.Z.noProvidersStateAwsDesc,i=h.Z.noProvidersStateAwsTitle;break;case u.l.azure:c=h.Z.noProvidersStateAzureDesc,i=h.Z.noProvidersStateAzureTitle;break;case u.l.gcp:c=h.Z.noProvidersStateGcpDesc,i=h.Z.noProvidersStateGcpTitle;break;case u.l.ibm:c=h.Z.noProvidersStateIbmDesc,i=h.Z.noProvidersStateIbmTitle;break;case u.l.ocp:c=h.Z.noProvidersStateOcpDesc,r=h.Z.docsAddOcpSources,a=h.Z.noProvidersStateOcpAddSources,i=h.Z.noProvidersStateOcpTitle;break;default:s=m}return o().createElement(n.EmptyState,{variant:n.EmptyStateVariant.large,className:"pf-m-redhat-font"},o().createElement(n.EmptyStateIcon,{icon:s||p.wl}),o().createElement(n.Title,{headingLevel:"h1",size:"lg"},e.formatMessage(i)),o().createElement(n.EmptyStateBody,null,e.formatMessage(c)),r&&a?o().createElement("div",{style:y.viewSources},this.getDocLink(a,r)):o().createElement(n.Button,{variant:"primary",component:"a",href:this.getRouteToSources()},e.formatMessage(h.Z.noProvidersStateGetStarted)))}}const T=(0,d.ZP)(f),O=({providerType:e,title:t})=>o().createElement(o().Fragment,null,t&&o().createElement(a.Z,null,o().createElement(c.Z,{title:t})),o().createElement(s.Z,null,o().createElement(T,{providerType:e})))},1903:(e,t,r)=>{r.d(t,{X:()=>R});var s=r(97027),a=r(92950),c=r.n(a),i=r(54785),o=r(74806);const n={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"},perspectiveOptionLabel:{marginBottom:6,marginLeft:8,marginTop:6}};class l extends c().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelectOptions=()=>{const{intl:e,options:t}=this.props,r=[];return t.map((t=>{r.push({toString:()=>e.formatMessage(t.label,{value:t.value}),value:t.value})})),r},this.getSelect=()=>{const{currentItem:e,intl:t,isDisabled:r,options:s}=this.props,{isSelectOpen:a}=this.state;if(1===s.length)return c().createElement("div",{style:n.perspectiveOptionLabel},t.formatMessage(s[0].label,{value:s[0].value}));const o=this.getSelectOptions(),l=o.find((t=>t.value===e));return c().createElement(i.Select,{id:"perspectiveSelect",isDisabled:r,isOpen:a,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:l,variant:i.SelectVariant.single},o.map((e=>c().createElement(i.SelectOption,{key:e.value,value:e}))))},this.handleSelect=(e,t)=>{const{onSelected:r}=this.props;r&&r(t.value),this.setState({isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return c().createElement("div",{style:n.perspectiveSelector},c().createElement(i.Title,{headingLevel:"h3",size:"md",style:n.perspectiveLabel},e.formatMessage(s.Z.perspective)),this.getSelect())}}const p=(0,o.ZP)(l),u=[{label:s.Z.perspectiveValues,value:"aws"}],h=[{label:s.Z.perspectiveValues,value:"aws_ocp"}],d=[{label:s.Z.perspectiveValues,value:"azure"}],g=[{label:s.Z.perspectiveValues,value:"oci"}],m=[{label:s.Z.perspectiveValues,value:"azure_ocp"}],b=[{label:s.Z.perspectiveValues,value:"gcp"}],v=[{label:s.Z.perspectiveValues,value:"gcp_ocp"}],y=[{label:s.Z.perspectiveValues,value:"ibm"}],f=[{label:s.Z.perspectiveValues,value:"ibm_ocp"}],T=[{label:s.Z.perspectiveValues,value:"ocp_cloud"}],O=[{label:s.Z.perspectiveValues,value:"ocp"}],S=[{label:s.Z.perspectiveValues,value:"rhel"}],F=({hasAws:e,hasAwsOcp:t,hasAzure:r,hasAzureOcp:s,hasGcp:a,hasGcpOcp:c,hasIbm:i,hasIbmOcp:o,hasOci:n,isIbmFeatureEnabled:l,isOciFeatureEnabled:p})=>{const T=[];return e&&T.push(...u),t&&T.push(...h),a&&T.push(...b),c&&T.push(...v),i&&T.push(...y),o&&l&&T.push(...f),r&&T.push(...d),s&&T.push(...m),n&&p&&T.push(...g),T},R=({currentItem:e,hasAws:t,hasAwsOcp:r,hasAzure:s,hasAzureOcp:a,hasGcp:i,hasGcpOcp:o,hasIbm:n,hasIbmOcp:l,hasOci:u,hasOcp:h,hasOcpCloud:d,hasRhel:g,isDisabled:m,isIbmFeatureEnabled:b,isInfrastructureTab:v,isOciFeatureEnabled:y,isRhelTab:f,onSelected:R})=>{const E=[];return void 0!==v||void 0!==f?v?(d&&E.push(...T),E.push(...F({hasAws:t,hasAwsOcp:r,hasAzure:s,hasAzureOcp:a,hasGcp:i,hasGcpOcp:o,hasIbm:n,hasIbmOcp:l,hasOci:u,isIbmFeatureEnabled:b,isOciFeatureEnabled:y}))):f?g&&E.push(...S):h&&E.push(...O):(h&&E.push(...O),d&&E.push(...T),g&&E.push(...S),E.push(...F({hasAws:t,hasAwsOcp:r,hasAzure:s,hasAzureOcp:a,hasGcp:i,hasGcpOcp:o,hasIbm:n,hasIbmOcp:l,hasOci:u,isIbmFeatureEnabled:b,isOciFeatureEnabled:y}))),c().createElement(p,{currentItem:e||E[0].value,isDisabled:m,onSelected:R,options:E})}},72249:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Dt});var s=r(54785),a=r(91290),c=r(1326),i=r(39333),o=r(84717),n=r(37610),l=r(91577),p=r(97027),u=r(92950),h=r.n(u),d=r(74806),g=r(77760),m=r(6450),b=r(52471),v=r(83819),y=r(2985),f=r(11058),T=r(1903);const O=({costType:e,currency:t,DashboardWidget:r,selectWidgets:a,widgets:c})=>h().createElement("div",null,h().createElement(s.Grid,{hasGutter:!0},c.map((c=>a[c].details.showHorizontal?h().createElement(s.GridItem,{sm:12,key:c},h().createElement(r,Object.assign({widgetId:c},e&&{costType:e},t&&{currency:t}))):h().createElement(s.GridItem,{lg:12,xl:6,xl2:4,key:c},h().createElement(r,Object.assign({widgetId:c},e&&{costType:e},t&&{currency:t})))))));var S=r(76966),F=r(44439),R=r(79655),E=r(60553),P=r(38470),Z=r(30564),C=r(91778);class I extends h().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:r}=this.state,a=this.getSelectOptions(),c=a.find((e=>e.value===t));return h().createElement(s.Select,{id:"comparisonSelect",isDisabled:e,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:c,variant:s.SelectVariant.single},a.map((e=>h().createElement(s.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:r}=this.props;r&&r(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const A=I;var D=r(91707),w=r(32412),V=r(57640);const j={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},M={comparison:{marginBottom:w.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:D.ZP.value},tabItems:{marginTop:V.ZP.value}};var W;!function(e){e.cumulative="cumulative",e.daily="daily"}(W||(W={}));class z extends h().Component{constructor(){super(...arguments),this.state={activeTabKey:0,currentComparison:W.cumulative},this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,s=r(e);return`${t.viewAllPath}?${(0,S.pm)({group_by:{[s]:"*"},order_by:{cost:"desc"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:s,trend:a}=this.props;return s===Z.i.dailyTrend?this.getDailyTrendChart(e,t,r,a.showSupplementaryLabel):s===Z.i.dailyCost?this.getDailyCostChart(e,t,r):s===Z.i.trend?this.getTrendChart(e,t,r,a.showSupplementaryLabel):s===Z.i.usage?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:r}=this.state,s=this.getFormattedUnits(),a=e.formatMessage(t.titleKey,{units:s}),c=[{label:e.formatMessage(t.dailyTitleKey,{units:s}),value:W.daily},{label:a,value:W.cumulative,default:!0}];return h().createElement(A,{currentItem:r||c[0].value,onItemClicked:this.handleComparisonClick,options:c})},this.getDailyCostChart=(e,t,r=!1)=>{const{chartFormatter:s,currentReport:a,previousReport:c,trend:i}=this.props,{currentComparison:o}=this.state,n=i.computedReportItem,l=i.computedReportItemValue,p=o===W.daily,u=p?E.yZ.rolling:i.datumType,d=(0,E.zJ)(a,u,"date",n,l),g=(0,E.zJ)(c,u,"date",n,l),m=this.getForecastData(a,i.computedForecastItem),b=p?P.V3:P.me;return h().createElement(h().Fragment,null,h().createElement("div",{style:M.comparisonContainer},h().createElement("div",{style:M.comparison},this.getChartComparison())),h().createElement(b,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,forecastConeData:m.forecastConeData,forecastData:m.forecastData,formatOptions:i.formatOptions,formatter:s||C.xG,height:t,previousCostData:g,showForecast:void 0!==i.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,s=!1)=>{const{chartFormatter:a,chartName:c,currentReport:i,details:o,previousReport:n,trend:l}=this.props,{currentComparison:p}=this.state,u=l.computedReportItem,d=l.computedReportItemValue,g=p===W.daily,m=g?E.yZ.rolling:l.datumType,b=(0,E.zJ)(i,m,"date",u,d),v=(0,E.zJ)(n,m,"date",u,d),{forecastData:y,forecastConeData:f}=this.getForecastData(i,l.computedForecastItem),T=g?P.Y0:P.Nd;return h().createElement(h().Fragment,null,h().createElement("div",{style:M.comparisonContainer},h().createElement("div",{style:M.comparison},this.getChartComparison())),h().createElement(T,{adjustContainerHeight:r,chartName:c,containerHeight:e,currentData:b,forecastData:y,forecastConeData:f,formatOptions:l.formatOptions,formatter:a||C.bM,height:t,previousData:v,showForecast:void 0!==l.computedForecastItem,showSupplementaryLabel:s,showUsageLegendLabel:o.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:s}=this.props,{currentComparison:a}=this.state,c=a===W.daily?E.yZ.rolling:s.datumType;let i,o;if(t){const s=(0,F.cloneDeep)(r);if(s&&(s.data=[]),r&&e&&e.data){const a=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.value:0,i=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.units:"USD",o=e.data.filter((e=>e.values.length)),n=o[o.length-1]?o[o.length-1].date:void 0;if(r&&r.data&&r.data.length>0){const e=new Date(n),t=e.getMonth()+1;for(const a of r.data){const r=new Date(a.date),c=r.getMonth()+1;r>e&&t===c&&s.data.push(a)}if(c===E.yZ.cumulative){const e=r.data[0].values&&r.data[0].values.length>0?r.data[0].values[0].date:void 0,t=1===this.getNumberOfDays(n,e)?n:e;s.data.unshift({date:t,values:[{date:t,cost:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:i}},infrastructure:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:i}},supplementary:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:i}}}]})}}}i=(0,E.nB)(s,c,t),o=(0,E.Qw)(s,c,t)}return{forecastData:i,forecastConeData:o}},this.getNumberOfDays=(e,t)=>{const r=new Date(e),s=new Date(t).getTime()-r.getTime();return Math.round(s/864e5)},this.getTrendChart=(e,t,r=!1,s=!1)=>{const{chartFormatter:a,chartName:c,currentReport:i,details:o,intl:n,previousReport:l,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,g=n.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),m=(0,E.zJ)(i,p.datumType,"date",u,d),b=(0,E.zJ)(l,p.datumType,"date",u,d),{forecastData:v,forecastConeData:y}=this.getForecastData(i,p.computedForecastItem);return h().createElement(P.Nd,{adjustContainerHeight:r,containerHeight:e,chartName:c,currentData:m,forecastData:v,forecastConeData:y,formatOptions:p.formatOptions,formatter:a||C.bM,height:t,previousData:b,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:s,showUsageLegendLabel:o.showUsageLegendLabel,title:g,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:r,chartName:s,currentReport:a,intl:c,previousReport:i,trend:o}=this.props,n=c.formatMessage(o.titleKey,{units:this.getFormattedUnits()}),l=(0,E.zJ)(a,o.datumType,"date","request"),p=(0,E.zJ)(i,o.datumType,"date","request"),u=(0,E.zJ)(a,o.datumType,"date","usage"),d=(0,E.zJ)(i,o.datumType,"date","usage");return h().createElement(P.I0,{adjustContainerHeight:t,chartName:s,containerHeight:j.containerUsageHeight,currentRequestData:l,currentUsageData:u,formatOptions:o.formatOptions,formatter:r||C.bM,height:e,previousRequestData:p,previousUsageData:d,title:n})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:s,trend:a}=this.props,c=a.computedReportItem||"cost",i=a.computedReportItemValue||"total";return h().createElement(P.rN,{chartType:e,computedReportItem:c,computedReportItemValue:i,costLabel:this.getDetailsLabel(r.costKey),formatOptions:r.formatOptions,report:t,reportType:s,requestLabel:this.getDetailsLabel(r.requestKey),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:this.getUnits(),usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?h().createElement(R.rU,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,s=t(e)||"";return r.formatMessage(p.Z.groupByAll,{value:s,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,r=t.computedReportItem||"cost",s=this.getUnits();return r===E.LI.usage?e.formatMessage(p.Z.units,{units:(0,C.ZV)(s)}):e.formatMessage(p.Z.currencyUnits,{units:s})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=j.containerAltHeight,chartAltHeight:t=j.chartAltHeight,currentReportFetchStatus:r,details:s}=this.props;return h().createElement(P.j0,{detailsLink:this.getDetailsLink(),status:r,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,s.adjustContainerHeight))},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:a,tabsReportFetchStatus:c}=this.props,i=r(e);return h().createElement(s.Tab,{eventKey:t,key:`${r(e)}-tab`,title:h().createElement(s.TabTitleText,null,this.getTabTitle(e))},h().createElement("div",{style:M.tabItems},h().createElement(P.mZ,{idKey:i,key:`${i}-items`,report:a,status:c},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,getIdKeyForTab:s,tabsReport:a,topItems:c,trend:i}=this.props,{activeTabKey:o}=this.state,n=s(e),l=s(r[o]),p=i.computedReportItem||"cost",u=i.computedReportItemValue||"total";let d;const g=a&&a.meta&&a.meta.total;return p===E.LI.usage?g&&a.meta.total.usage&&(d=a.meta.total.usage.value):g&&a.meta.total[p]&&a.meta.total[p][u]&&(d=a.meta.total[p][u].value),l===n?h().createElement(P.EH,{formatOptions:c?c.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return h().createElement(s.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,s=t(e)||"";return r.formatMessage(p.Z.groupByTop,{value:s,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,s=r.computedReportItem||"cost",a=r.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const c=e&&e.meta&&e.meta.total;return s===E.LI.usage?c&&e.meta.total.usage?e.meta.total.usage.units:void 0:c&&e.meta.total[s]&&e.meta.total[s][a]?e.meta.total[s][a].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return h().createElement(P.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(j.containerTrendHeight,j.chartHeight,r.adjustContainerHeight),Boolean(e)&&h().createElement("div",{style:M.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:s,updateTab:a}=this.props;a(s,r[t]),this.setState({activeTabKey:t})}}componentDidMount(){const{availableTabs:e,fetchForecasts:t,fetchReports:r,id:s,trend:a,updateTab:c,widgetId:i}=this.props;e&&c(s,e[0]),r&&r(i),void 0!==a.computedForecastItem&&t(i)}componentDidUpdate(e){const{costType:t,currency:r,fetchReports:s,fetchForecasts:a,trend:c,widgetId:i}=this.props;e.costType===t&&e.currency===r||(s(i),void 0!==c.computedForecastItem&&a(i))}render(){const{details:e}=this.props;return e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const L=z;var Q=r(1156),K=r(81628),N=r(78898),k=r(79277),_=r(15920),H=r(22928),J=r(64703);const B=e=>{switch(e){case K.IC.services:return"service";case K.IC.accounts:return"account";case K.IC.regions:return"region"}},U=(0,Q.X1)(((e,{widgetId:t})=>{const r=K.Cv.selectWidget(e,t),s=K.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{costType:(0,H.u)(),getIdKeyForTab:B,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),G={fetchForecasts:K.Kf.v4,fetchReports:K.Kf.a4,updateTab:K.Kf.as},X=(0,d.ZP)((0,g.connect)(U,G)(L)),x=(0,Q.X1)(((e,t)=>({DashboardWidget:X,selectWidgets:K.Cv.selectWidgets(e),widgets:K.Cv.selectCurrentWidgets(e)}))),$=(0,g.connect)(x,{})(O);var Y=r(25566);const q=e=>{switch(e){case Y.e1.services:return"service";case Y.e1.accounts:return"account";case Y.e1.regions:return"region"}},ee=(0,Q.X1)(((e,{widgetId:t})=>{const r=Y.Hc.selectWidget(e,t),s=Y.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),N.iJ.selectIsCostTypeFeatureEnabled(e)&&{costType:(0,H.u)()}),{getIdKeyForTab:q,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),te={fetchForecasts:Y.NA.v4,fetchReports:Y.NA.a4,updateTab:Y.NA.as},re=(0,d.ZP)((0,g.connect)(ee,te)(L)),se=(0,Q.X1)(((e,t)=>({DashboardWidget:re,selectWidgets:Y.Hc.selectWidgets(e),widgets:Y.Hc.selectCurrentWidgets(e)}))),ae=(0,g.connect)(se,{})(O);var ce=r(25976);const ie=e=>{switch(e){case ce.vY.service_names:return"service_name";case ce.vY.subscription_guids:return"subscription_guid";case ce.vY.resource_locations:return"resource_location"}},oe=(0,Q.X1)(((e,{widgetId:t})=>{const r=ce.rj.selectWidget(e,t),s=ce.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:ie,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),ne={fetchForecasts:ce.oc.v4,fetchReports:ce.oc.a4,updateTab:ce.oc.as},le=(0,d.ZP)((0,g.connect)(oe,ne)(L)),pe=(0,Q.X1)(((e,t)=>({DashboardWidget:le,selectWidgets:ce.rj.selectWidgets(e),widgets:ce.rj.selectCurrentWidgets(e)}))),ue=(0,g.connect)(pe,{})(O);var he=r(76764);const de=e=>{switch(e){case he.Vp.service_names:return"service_name";case he.Vp.subscription_guids:return"subscription_guid";case he.Vp.resource_locations:return"resource_location"}},ge=(0,Q.X1)(((e,{widgetId:t})=>{const r=he.MW.selectWidget(e,t),s=he.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:de,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),me={fetchForecasts:he._V.v4,fetchReports:he._V.a4,updateTab:he._V.as},be=(0,d.ZP)((0,g.connect)(ge,me)(L)),ve=(0,Q.X1)(((e,t)=>({DashboardWidget:be,selectWidgets:he.MW.selectWidgets(e),widgets:he.MW.selectCurrentWidgets(e)}))),ye=(0,g.connect)(ve,{})(O);var fe=r(67776);const Te=e=>{switch(e){case fe.BP.gcpProjects:return"gcp_project";case fe.BP.regions:return"region";case fe.BP.services:return"service"}},Oe=(0,Q.X1)(((e,{widgetId:t})=>{const r=fe.oS.selectWidget(e,t),s=fe.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:Te,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Se={fetchForecasts:fe.n5.v4,fetchReports:fe.n5.a4,updateTab:fe.n5.as},Fe=(0,d.ZP)((0,g.connect)(Oe,Se)(L)),Re=(0,Q.X1)(((e,t)=>({DashboardWidget:Fe,selectWidgets:fe.oS.selectWidgets(e),widgets:fe.oS.selectCurrentWidgets(e)}))),Ee=(0,g.connect)(Re,{})(O);var Pe=r(99900);const Ze=e=>{switch(e){case Pe.VN.gcpProjects:return"gcp_project";case Pe.VN.regions:return"region";case Pe.VN.services:return"service"}},Ce=(0,Q.X1)(((e,{widgetId:t})=>{const r=Pe.FF.selectWidget(e,t),s=Pe.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:Ze,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Ie={fetchForecasts:Pe.uM.v4,fetchReports:Pe.uM.a4,updateTab:Pe.uM.as},Ae=(0,d.ZP)((0,g.connect)(Ce,Ie)(L)),De=(0,Q.X1)(((e,t)=>({DashboardWidget:Ae,selectWidgets:Pe.FF.selectWidgets(e),widgets:Pe.FF.selectCurrentWidgets(e)}))),we=(0,g.connect)(De,{})(O);var Ve=r(48788);const je=e=>{switch(e){case Ve.DA.services:return"service";case Ve.DA.projects:return"project";case Ve.DA.regions:return"region"}},Me=(0,Q.X1)(((e,{widgetId:t})=>{const r=Ve.Pi.selectWidget(e,t),s=Ve.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:je,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),We={fetchForecasts:Ve.lj.v4,fetchReports:Ve.lj.a4,updateTab:Ve.lj.as},ze=(0,d.ZP)((0,g.connect)(Me,We)(L)),Le=(0,Q.X1)(((e,t)=>({DashboardWidget:ze,selectWidgets:Ve.Pi.selectWidgets(e),widgets:Ve.Pi.selectCurrentWidgets(e)}))),Qe=(0,g.connect)(Le,{})(O);var Ke=r(17568);const Ne=e=>{switch(e){case Ke.Qr.accounts:return"account";case Ke.Qr.regions:return"region";case Ke.Qr.services:return"service"}},ke=(0,Q.X1)(((e,{widgetId:t})=>{const r=Ke.qN.selectWidget(e,t),s=Ke.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:Ne,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),_e={fetchForecasts:Ke.BV.v4,fetchReports:Ke.BV.a4,updateTab:Ke.BV.as},He=(0,d.ZP)((0,g.connect)(ke,_e)(L)),Je=(0,Q.X1)(((e,t)=>({DashboardWidget:He,selectWidgets:Ke.qN.selectWidgets(e),widgets:Ke.qN.selectCurrentWidgets(e)}))),Be=(0,g.connect)(Je,{})(O);var Ue=r(60329);const Ge=e=>{switch(e){case Ue.V7.clusters:return"cluster";case Ue.V7.nodes:return"node";case Ue.V7.projects:return"project"}},Xe=(0,Q.X1)(((e,{widgetId:t})=>{const r=Ue.nH.selectWidget(e,t),s=Ue.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:Ge,chartAltHeight:250,containerAltHeight:250,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),xe={fetchForecasts:Ue.U6.v4,fetchReports:Ue.U6.a4,updateTab:Ue.U6.as},$e=(0,d.ZP)((0,g.connect)(Xe,xe)(L)),Ye=(0,Q.X1)(((e,t)=>({DashboardWidget:$e,selectWidgets:Ue.nH.selectWidgets(e),widgets:Ue.nH.selectCurrentWidgets(e)}))),qe=(0,g.connect)(Ye,{})(O);var et=r(67522);const tt=e=>{switch(e){case et.is.clusters:return"cluster";case et.is.nodes:return"node";case et.is.projects:return"project"}},rt=(0,Q.X1)(((e,{widgetId:t})=>{const r=et.fO.selectWidget(e,t),s=et.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:tt,chartAltHeight:250,containerAltHeight:250,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),st={fetchForecasts:et.BV.v4,fetchReports:et.BV.a4,updateTab:et.BV.as},at=(0,d.ZP)((0,g.connect)(rt,st)(L)),ct=(0,Q.X1)(((e,t)=>({DashboardWidget:at,selectWidgets:et.fO.selectWidgets(e),widgets:et.fO.selectCurrentWidgets(e)}))),it=(0,g.connect)(ct,{})(O);var ot=r(86482),nt=r(62331),lt=r(46919),pt=r(45087),ut=r(5842),ht=r(96351),dt=r(77392);const gt=e=>{switch(e){case dt.FY.product_services:return"product_service";case dt.FY.payer_tenant_ids:return"payer_tenant_id";case dt.FY.regions:return"region"}},mt=(0,Q.X1)(((e,{widgetId:t})=>{const r=dt.$h.selectWidget(e,t),s=dt.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},r),N.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,J.zC)()}),{getIdKeyForTab:gt,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:k.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:_.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:_.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),bt={fetchForecasts:dt.eb.v4,fetchReports:dt.eb.a4,updateTab:dt.eb.as},vt=(0,d.ZP)((0,g.connect)(mt,bt)(L)),yt=(0,Q.X1)(((e,t)=>({DashboardWidget:vt,selectWidgets:dt.$h.selectWidgets(e),widgets:dt.$h.selectCurrentWidgets(e)}))),ft=(0,g.connect)(yt,{})(O);var Tt=r(49382),Ot=r(17918),St=r(98499);const Ft={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:w.ZP.var},header:{backgroundColor:Tt.ZP.var,padding:St.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:Ot.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:St.ZP.value},tabs:{backgroundColor:Tt.ZP.var,paddingBottom:St.ZP.var,paddingTop:St.ZP.var}};var Rt,Et,Pt,Zt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(Rt||(Rt={})),function(e){e.ocp="ocp"}(Et||(Et={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(Pt||(Pt={})),function(e){e.rhel="rhel"}(Zt||(Zt={}));const Ct=e=>{switch(e){case Pt.infrastructure:return"infrastructure";case Pt.ocp:return"ocp";case Pt.rhel:return"rhel"}};class It extends h().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFINsightsFeatureEnabled:e}=this.props,t=[],r=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:h().createRef(),tab:Pt.infrastructure}]:void 0,s=this.isOcpAvailable()?[{contentRef:h().createRef(),tab:Pt.ocp}]:void 0,a=this.isRhelAvailable()?[{contentRef:h().createRef(),tab:Pt.rhel}]:void 0;return e?(r&&t.push(...r),a&&t.push(...a),s&&t.push(...s)):(s&&t.push(...s),r&&t.push(...r)),t},this.getCostType=()=>{const{costType:e,isCostTypeFeatureEnabled:t}=this.props,{currentInfrastructurePerspective:r,currentOcpPerspective:s}=this.state,a=this.getCurrentTab()===Pt.infrastructure?r:s;return a===Rt.aws||a===Rt.awsOcp&&t?h().createElement("div",{style:Ft.costType},h().createElement(f.T,{costType:e,onSelect:this.handleCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return h().createElement(m.F,{onSelect:this.handleCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFINsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,r=this.isAwsAvailable(),s=this.isAzureAvailable(),a=this.isOciAvailable(),c=this.isGcpAvailable(),i=this.isIbmAvailable(),o=this.isOcpAvailable(),n=this.isOcpCloudAvailable(),l=this.isRhelAvailable(),p=r||s||a||c||i||n,u=p&&!o&&!l,h=l&&!p&&!o;if(o&&!p&&!l)return Pt.ocp;if(u)return Pt.infrastructure;if(h)return Pt.rhel;if(e)switch(t){case 0:return Pt.infrastructure;case 1:return Pt.rhel;case 2:return Pt.ocp}switch(t){case 0:return Pt.ocp;case 1:return Pt.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case Rt.aws:case Rt.awsOcp:case Rt.azure:case Rt.oci:case Rt.azureOcp:case Rt.gcp:case Rt.gcpOcp:case Rt.ibm:case Rt.ibmOcp:case Rt.ocpCloud:return e}return this.isOcpCloudAvailable()?Rt.ocpCloud:this.isAwsAvailable()?Rt.aws:this.isAzureAvailable()?Rt.azure:this.isOciAvailable()?Rt.oci:this.isGcpAvailable()?Rt.gcp:this.isIbmAvailable()?Rt.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:r}=this.props;return t===Et.ocp?t:(0,ht.mn)(r,e)?Et.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:r}=this.props;return e===Zt.rhel?e:(0,ht.ZC)(r,t)?Zt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e,isOciFeatureEnabled:t}=this.props,{currentInfrastructurePerspective:r,currentOcpPerspective:s,currentRhelPerspective:a}=this.state,c=this.isAwsAvailable(),i=this.isAzureAvailable(),o=this.isGcpAvailable(),n=this.isIbmAvailable(),l=this.isOciAvailable(),p=this.isOcpAvailable(),u=this.isRhelAvailable();if(!(c||i||o||n||l||p||u))return null;let d;const g=this.getCurrentTab();switch(g){case Pt.infrastructure:d=r;break;case Pt.ocp:d=s;break;case Pt.rhel:d=a}return h().createElement(T.X,{currentItem:d,hasAws:c,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:i,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:o,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:n,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:l,hasOcp:p,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:u,isIbmFeatureEnabled:e,isInfrastructureTab:Pt.infrastructure===g,isOciFeatureEnabled:t,isRhelTab:Pt.rhel===g,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return i.IV(e)}(e)}`},this.getTab=(e,t,r)=>h().createElement(s.Tab,{eventKey:r,key:`${Ct(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:h().createElement(s.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>h().createElement(s.TabContent,{eventKey:t,key:`${Ct(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:s,ociProviders:a,costType:c,currency:i,gcpProviders:o,ibmProviders:n,ocpProviders:l,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:g,currentRhelPerspective:m}=this.state,b=h().createElement(h().Fragment,null),y=h().createElement(v.Z,{showReload:!1});if(u!==t)return b;const f=Ct(e);if(f===Pt.infrastructure)return d===Rt.ocpCloud?(0,ot.Bj)(r,l)||(0,ot.Bj)(s,l)||(0,ot.Bj)(o,l)||(0,ot.Bj)(n,l)?h().createElement(Be,{currency:i}):y:d===Rt.aws?(0,ot.g8)(r)||(0,ot.rL)(r)?h().createElement($,{costType:c}):y:d===Rt.awsOcp?(0,ot.at)(r,l)||(0,ot.D2)(r,l)?h().createElement(ae,{currency:i}):y:d===Rt.azure?(0,ot.g8)(s)||(0,ot.rL)(s)?h().createElement(ue,{currency:i}):y:d===Rt.azureOcp?(0,ot.at)(s,l)||(0,ot.D2)(s,l)?h().createElement(ye,{currency:i}):y:d===Rt.gcp?(0,ot.g8)(o)||(0,ot.rL)(o)?h().createElement(Ee,{currency:i}):y:d===Rt.gcpOcp?(0,ot.at)(o,l)||(0,ot.D2)(o,l)?h().createElement(we,{currency:i}):y:d===Rt.ibm?(0,ot.g8)(n)||(0,ot.rL)(n)?h().createElement(Qe,{currency:i}):y:d===Rt.oci&&((0,ot.g8)(a)||(0,ot.rL)(a))?h().createElement(ft,{currency:i}):y;if(f===Pt.ocp){const e=(0,ot.g8)(l)||(0,ot.rL)(l);return g===Et.ocp&&e?h().createElement(qe,{currency:i}):y}if(f===Pt.rhel){const e=(0,ot.g8)(p)||(0,ot.rL)(p);return m===Zt.rhel&&e?h().createElement(it,{currency:i}):y}return b},this.getTabs=e=>{const{activeTabKey:t}=this.state;return h().createElement(s.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFINsightsFeatureEnabled:r}=this.props;return e===Pt.infrastructure?r?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===Pt.ocp?t.formatMessage(p.Z.openShift):e===Pt.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleCostTypeSelected=()=>{const{query:e,router:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(r),{replace:!0})},this.handleCurrencySelected=()=>{const{router:e,query:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(r),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:r}=this.props,s=this.getCurrentTab();this.setState(Object.assign(Object.assign({},s===Pt.infrastructure&&{currentInfrastructurePerspective:e}),s===Pt.ocp&&{currentOcpPerspective:e}),(()=>{const s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});r.navigate(this.getRouteForQuery(s),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:r,router:s}=this.props,{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});s.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,ht.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ht.KT)(r)&&(0,ot.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,ht.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ht.FW)(r)&&(0,ot.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,ht.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ht.Sv)(r)&&(0,ot.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,ht.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,ht.tt)(r)&&(0,ot.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,ht.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,ht.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),r=this.isGcpOcpAvailable(),s=this.isIbmOcpAvailable();return e||t||r||s},this.isRhelAvailable=()=>{const{isFINsightsFeatureEnabled:e,rhelProviders:t,userAccess:r}=this.props;return e&&(0,ht.ZC)(r,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:r,userAccess:s}=this.props;e.userAccess===s&&e.providers===t||this.setState({activeTabKey:r,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isCurrencyFeatureEnabled:r,isFINsightsFeatureEnabled:c,isIbmFeatureEnabled:i,isOciFeatureEnabled:o,userAccessFetchStatus:n}=this.props,l=!(e!==Q.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),u=e===Q.iF.inProgress||n===Q.iF.inProgress,d=this.getAvailableTabs(),g=t.formatMessage(p.Z.overviewTitle);return u?h().createElement(b.g,{title:g}):l?h().createElement(y.L,{title:g}):h().createElement(h().Fragment,null,h().createElement("header",{style:Ft.header},h().createElement("div",{style:Ft.headerContent},h().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes["2xl"]},g,h().createElement("span",{style:Ft.infoIcon},h().createElement(s.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:h().createElement(h().Fragment,null,h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),h().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),h().createElement("br",null),h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.openShift)),h().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),h().createElement("br",null),c&&h().createElement(h().Fragment,null,h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.rhel)),h().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),h().createElement("br",null)),h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.aws)),h().createElement("p",null,t.formatMessage(p.Z.awsDesc)),h().createElement("br",null),h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.gcp)),h().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),i&&h().createElement(h().Fragment,null,h().createElement("br",null),h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.ibm)),h().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),h().createElement("br",null),h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.azure)),h().createElement("p",null,t.formatMessage(p.Z.azureDesc)),o&&h().createElement(h().Fragment,null,h().createElement("br",null),h().createElement("p",{style:Ft.infoTitle},t.formatMessage(p.Z.oci)),h().createElement("p",null,t.formatMessage(p.Z.ociDesc))))},h().createElement(s.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:s.ButtonVariant.plain},h().createElement(a.iC,null))))),h().createElement("div",{style:Ft.headerContentRight},r&&this.getCurrency())),h().createElement("div",{style:Ft.tabs},this.getTabs(d)),h().createElement("div",{style:Ft.headerContent},h().createElement("div",{style:Ft.headerContentLeft},this.getPerspective(),this.getCostType()),h().createElement("div",{style:Ft.date},(0,pt.J4)()))),h().createElement("div",{style:Ft.main},this.getTabContent(d)))}}const At=(0,Q.X1)(((e,{router:t})=>{const r=function(e){return i.mB(e)}(t.location.search),s=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0,a=r.perspective,p=N.iJ.selectIsCurrencyFeatureEnabled(e),u=p?(0,J.zC)():void 0,h=N.iJ.selectIsCostTypeFeatureEnabled(e),d=a===Rt.aws||a===Rt.awsOcp&&h?(0,H.u)():void 0,g=Object.assign({tabKey:s},a&&{perspective:a}),m=(0,o.H)(nt.NT),b=nt.aX.selectProviders(e,c.l.all,m),v=nt.aX.selectProvidersError(e,c.l.all,m),y=nt.aX.selectProvidersFetchStatus(e,c.l.all,m),f=(0,n.T)(lt.QR),T=lt.JO.selectUserAccess(e,l.n.all,f),O=lt.JO.selectUserAccessError(e,l.n.all,f),S=lt.JO.selectUserAccessFetchStatus(e,l.n.all,f);return{awsProviders:(0,ot.BV)(b,c.l.aws),azureProviders:(0,ot.BV)(b,c.l.azure),costType:d,currency:u,gcpProviders:(0,ot.BV)(b,c.l.gcp),ibmProviders:(0,ot.BV)(b,c.l.ibm),isCostTypeFeatureEnabled:h,isCurrencyFeatureEnabled:p,isFINsightsFeatureEnabled:N.iJ.selectIsFINsightsFeatureEnabled(e),isIbmFeatureEnabled:N.iJ.selectIsIbmFeatureEnabled(e),isOciFeatureEnabled:N.iJ.selectIsOciFeatureEnabled(e),ociProviders:(0,ot.BV)(b,c.l.oci),ocpProviders:(0,ot.BV)(b,c.l.ocp),providers:b,providersError:v,providersFetchStatus:y,perspective:a,query:g,rhelProviders:(0,ot.BV)(b,c.l.rhel),tabKey:s,userAccess:T,userAccessError:O,userAccessFetchStatus:S,userAccessQueryString:f}})),Dt=(0,d.ZP)((0,ut.E)((0,g.connect)(At,{})(It)))},86482:(e,t,r)=>{var s;r.d(t,{BV:()=>c,Bj:()=>l,D2:()=>p,JY:()=>u,Mg:()=>d,at:()=>n,g8:()=>h,rL:()=>g}),function(e){e.currentMonthData="current_month_data",e.hasData="has_data",e.previousMonthData="previous_month_data"}(s||(s={}));const a=(e,t)=>{let r;if(e&&e.data)for(const s of e.data)if(s.infrastructure&&s.infrastructure.uuid===t){r=s;break}return r},c=(e,t)=>{if(!e)return e;const r=e.data.filter((e=>e.source_type.toLowerCase()===t)),s=Object.assign(Object.assign({},e.meta),{count:r.length});return Object.assign(Object.assign({},e),{meta:s,data:r})},i=(e,t)=>{let r=!1;if(e&&e.data)for(const s of e.data)if(s[t]){r=!0;break}return r},o=(e,t,r)=>{let s=!1;if(e&&e.data)for(const c of e.data){const e=a(t,c.uuid);if(e&&e[r]){s=!0;break}}return s},n=(e,t)=>o(e,t,s.currentMonthData),l=(e,t)=>o(e,t,s.hasData),p=(e,t)=>o(e,t,s.previousMonthData),u=(e,t)=>((e,t)=>{let r=!1;if(e&&e.data)for(const s of e.data)if(a(t,s.uuid)){r=!0;break}return r})(e,t),h=e=>i(e,s.currentMonthData),d=e=>i(e,s.hasData),g=e=>i(e,s.previousMonthData)},45087:(e,t,r)=>{r.d(t,{$M:()=>l,Gg:()=>v,J4:()=>d,Tf:()=>u,Y:()=>h,Y$:()=>g,mI:()=>f,p6:()=>n,tw:()=>m,vI:()=>y,x2:()=>p});var s=r(45868),a=r(95147),c=r(43703),i=r(4135),o=r(97027);const n=(e,t=!0)=>e&&t?(0,a.Z)(e,"yyyy-MM-dd"):e,l=(e,t,r=!0)=>({end_date:n(t,r),start_date:n(e,r)}),p=(e=0,t=0,r=0,s=0)=>{const a=new Date;return a.setHours(e),a.setMinutes(t),a.setSeconds(r),a.setMilliseconds(s),a},u=(e=o.Z.noDataForDate,t=1)=>{const r=p(),a=p();a.setDate(1),t&&(a.setMonth(a.getMonth()-t),r.setMonth(r.getMonth()-t));const c=s.N.formatDateTimeRange(a,r,{day:"numeric",month:"long"});return s.N.formatMessage(e,{dateRange:c})},h=(e,t=o.Z.forDate,r=1)=>{const a=p(),c=p();c.setDate(1),r&&(c.setMonth(c.getMonth()-r),a.setMonth(a.getMonth()-r));const i=s.N.formatDateTimeRange(c,a,{day:"numeric",month:"long"});return s.N.formatMessage(t,{dateRange:i,value:e})},d=(e=o.Z.sinceDate)=>{const t=p(),r=p();r.setDate(1);const a=s.N.formatDateTimeRange(r,t,{day:"numeric",month:"long"});return s.N.formatMessage(e,{dateRange:a})},g=(e,t=o.Z.breakdownTotalCostDate)=>{const r=p(),a=p();a.setDate(1);const c=s.N.formatDateTimeRange(a,r,{day:"numeric",month:"long"});return s.N.formatMessage(t,{dateRange:c,value:e})},m=(e=!0)=>((e,t=!0)=>{const r=p();return e&&(r.setDate(1),r.setMonth(r.getMonth()-e)),l((0,c.Z)(r),e?(0,i.Z)(r):r,t)})(0,e),b=(e,t=!0)=>{const r=p(),s=p();return s.setDate(s.getDate()-e),l(s,r,t)},v=(e=!0)=>b(30,e),y=(e=!0)=>b(60,e),f=(e=!0)=>b(90,e)},96351:(e,t,r)=>{r.d(t,{Es:()=>b,FE:()=>g,FW:()=>n,HC:()=>u,KT:()=>i,Rt:()=>v,Sv:()=>d,Xd:()=>p,ZC:()=>T,hn:()=>l,mn:()=>y,n9:()=>o,ot:()=>h,tt:()=>m,yY:()=>f});var s=r(91577);const a=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const s=e.data.find((e=>e.type===t));r=s&&s.access}else r=e&&!0===e.data;return r},c=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},i=e=>a(e,s.n.aws),o=(e,t)=>i(e)&&c(t),n=e=>a(e,s.n.azure),l=(e,t)=>n(e)&&c(t),p=e=>a(e,s.n.oci),u=(e,t)=>p(e)&&c(t),h=e=>a(e,s.n.cost_model),d=e=>a(e,s.n.gcp),g=(e,t)=>a(e,s.n.gcp)&&c(t),m=e=>d(e),b=(e,t)=>m(e)&&c(t),v=e=>a(e,s.n.ocp),y=(e,t)=>v(e)&&c(t),f=e=>a(e,s.n.rhel),T=(e,t)=>f(e)&&c(t)},84735:(e,t,r)=>{e.exports=r.p+"fonts/Cost-icon.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.410e45dbdb790290d35713673d5c96b8.js.map