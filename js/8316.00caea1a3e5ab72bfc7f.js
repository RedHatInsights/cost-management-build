"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[8316],{98485:(e,t,a)=>{a.d(t,{L:()=>r});var s=a(80965),n=a(92950),o=a.n(n);const r=()=>o().createElement("span",{className:"emptyValueContainer"},o().createElement(s.V_,null))},58395:(e,t,a)=>{a.d(t,{Z:()=>i});var s=a(48891),n=a(30950);const o={padding:8},r={area:Object.assign({},o),axis:Object.assign({},o),bar:Object.assign({},o),boxplot:Object.assign({},o),candlestick:Object.assign({},o),chart:Object.assign({},o),errorbar:Object.assign({},o),group:Object.assign({},o),legend:{},line:Object.assign({},o),pie:Object.assign({},o),scatter:Object.assign({},o),stack:Object.assign({},o),tooltip:{},voronoi:Object.assign({},o)},i=(0,s.hr)(n.nz.default,r)},45351:(e,t,a)=>{a.d(t,{E0:()=>p,TW:()=>u,Yt:()=>g,bC:()=>i,ge:()=>l,nV:()=>m,oX:()=>c,pP:()=>d,zj:()=>h});var s=a(84154),n=a(45868),o=a(97027),r=a(60553);const i=e=>{const t=[];return e&&e.map((e=>{t.push(e.childName)})),t},l=(e,t)=>{const a={x:[1,31]};let s=-1,n=-1;e&&e.forEach(((e,a)=>{if(!g(t,a)&&e.data&&0!==e.data.length){const{max:t,min:a}=(0,r.Dd)(e.data);s=Math.max(s,t),n=-1===n?a:Math.min(n,a)}}));const o=.1*s,i=s>0?Math.ceil(s+o):0,l=n>0?Math.max(0,Math.floor(n-o)):0,c=l>0?l:0;return i>0&&(a.y=[c,i]),a},c=(e,t,a=!1)=>{if(e)return e.map(((e,n)=>Object.assign(Object.assign(Object.assign({childName:e.childName},e.legendItem),a&&{name:e.legendItem.tooltip}),(0,s.X)(t.has(n)))))},h=(e,t,a)=>{const s=(0,r.pZ)(t),i=void 0!==e.y&&null!==e.y?s(e.y,e.units,a):void 0,l=void 0!==e.y0&&null!==e.y0?s(e.y0,e.units,a):void 0;return void 0!==i&&void 0!==l?n.N.formatMessage(o.Z.chartCostForecastConeTooltip,{value0:l,value1:i}):void 0!==i?i:n.N.formatMessage(o.Z.chartNoData)},d=(e,t)=>{const a=e,{ResizeObserver:s}=window;let n,o;if(a&&s){const e=new s((e=>{window.requestAnimationFrame((()=>{Array.isArray(e)&&e.length&&t()}))}));e.observe(a),o=()=>e.unobserve(a)}else t(),window.addEventListener("resize",t),o=()=>window.removeEventListener("resize",t),n=insights.chrome.on("NAVIGATION_TOGGLE",setTimeout(t,500));return()=>{o&&o(),n&&n()}},m=(e,t,a)=>{const s=new Set(t);return s.delete(a)||s.add(a),s},u=(e,t)=>{const a=[];return e&&e.forEach(((e,s)=>{(g(t,s)||e.data&&0===e.data.length)&&a.push(s)})),a.length!==(e?e.length:0)},p=(e,t,a)=>{if(a&&a.length)for(let s,n=t.keys();!(s=n.next()).done;){let t,n;for(const e of a)if(e.childName){t=e.childName;break}for(const t of e[s.value].data)if(t.childName){n=t.childName;break}if(n&&t&&n===t)return!0}return!1},g=(e,t)=>e.has(t)},11058:(e,t,a)=>{a.d(t,{T:()=>f});var s=a(54785),n=a(97027),o=a(92950),r=a.n(o),i=a(74806),l=a(77760),c=a(1156),h=a(22928),d=a(64703);const m={costSelector:{display:"flex",alignItems:"center"},costLabel:{marginBottom:0,marginRight:a(32412).ZP.var,whiteSpace:"nowrap"}},u=[{desc:n.Z.costTypeAmortizedDesc,label:n.Z.costTypeAmortized,value:h.M.amortized},{desc:n.Z.costTypeBlendedDesc,label:n.Z.costTypeBlended,value:h.M.blended},{desc:n.Z.costTypeUnblendedDesc,label:n.Z.costTypeUnblended,value:h.M.unblended}];class p extends r().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{costType:e,isDisabled:t}=this.props,{isSelectOpen:a}=this.state,n=this.getSelectOptions(),o=n.find((t=>t.value===e));return r().createElement(s.Select,{className:"selectOverride",id:"costTypeSelect",isDisabled:t,isOpen:a,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:s.SelectVariant.single},n.map((e=>r().createElement(s.SelectOption,{description:e.desc,key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return u.map((a=>{t.push({desc:e.formatMessage(a.desc),toString:()=>e.formatMessage(a.label),value:a.value})})),t},this.handleSelect=(e,t)=>{const{onSelect:a}=this.props;(0,d.M1)(t.value),this.setState({isSelectOpen:!1},(()=>{a&&a(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return(0,d.eu)(),r().createElement("div",{style:m.costSelector},r().createElement(s.Title,{headingLevel:"h3",size:"md",style:m.costLabel},e.formatMessage(n.Z.costTypeLabel)),this.getSelect())}}const g=(0,c.X1)((()=>({}))),C=(0,l.connect)(g,{})(p),f=(0,i.ZP)(C)},38470:(e,t,a)=>{a.d(t,{iu:()=>c,j0:()=>h,me:()=>X,V3:()=>ae,Y0:()=>re,rN:()=>f,EH:()=>b,mZ:()=>S,Nd:()=>he,I0:()=>pe});var s=a(54785),n=a(92950),o=a.n(n),r=a(74806),i=a(1156),l=a(20513);const c=(0,r.ZP)((({children:e,detailsLink:t,title:a,subTitle:n,status:r})=>o().createElement(s.Card,{className:"reportSummary"},o().createElement(s.CardTitle,null,o().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},a),Boolean(n)&&o().createElement("p",{className:"subtitle"},n)),o().createElement(s.CardBody,null,r===i.iF.inProgress?o().createElement(o().Fragment,null,o().createElement(s.Skeleton,{width:"16%"}),o().createElement(s.Skeleton,{className:"chartSkeleton",width:l.N.md}),o().createElement(s.Skeleton,{width:"33%"}),o().createElement(s.Skeleton,{className:"legendSkeleton",width:l.N.xs})):e),Boolean(t)&&o().createElement(s.CardFooter,null,t)))),h=(0,r.ZP)((({children:e,detailsLink:t,status:a,subTitle:n,tabs:r,title:c})=>o().createElement(s.Card,{className:"reportSummary"},o().createElement(s.Grid,{hasGutter:!0},o().createElement(s.GridItem,{xl:8},o().createElement("div",{className:"cost"},o().createElement(s.CardTitle,null,o().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},c),Boolean(n)&&o().createElement("p",{className:"subtitle"},n)),o().createElement(s.CardBody,null,a===i.iF.inProgress?o().createElement(o().Fragment,null,o().createElement(s.Skeleton,{width:"16%"}),o().createElement(s.Skeleton,{className:"chartSkeleton",width:l.N.md}),o().createElement(s.Skeleton,{width:"33%"}),o().createElement(s.Skeleton,{className:"legendSkeleton",width:l.N.xs})):e))),o().createElement(s.GridItem,{xl:4},o().createElement("div",{className:"tops"},a!==i.iF.inProgress&&o().createElement(o().Fragment,null,Boolean(r)&&o().createElement(s.CardBody,null,r),Boolean(t)&&o().createElement(s.CardFooter,null,t))))))));var d=a(6456),m=a(97027),u=a(98485),p=a(60553),g=a(30564),C=a(91778);const f=(0,r.ZP)((({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:n,formatOptions:r,intl:i,report:l,requestFormatOptions:c,requestLabel:h,reportType:f,showTooltip:v=!1,showUnits:b=!1,showUsageFirst:D=!1,units:y,usageFormatOptions:S,usageLabel:L})=>{let E=o().createElement(u.L,null),N=o().createElement(u.L,null),Z=o().createElement(u.L,null),k=o().createElement(u.L,null),O=o().createElement(u.L,null);const w=l&&l.meta&&l.meta.total,x=w&&l.meta.total.cost&&l.meta.total.cost.total,F=w&&l.meta.total.count,P=w&&l.meta.total.supplementary&&l.meta.total.supplementary.total&&l.meta.total.supplementary.total.value,j=w&&l.meta.total.infrastructure&&l.meta.total.infrastructure[a]&&l.meta.total.infrastructure[a].value,T=w&&l.meta.total.request,R=w&&l.meta.total.usage;w&&(E=(0,C.xG)(x?l.meta.total.cost.total.value:0,x?l.meta.total.cost.total.units:"USD",r),N=(0,C.xG)(P?l.meta.total.supplementary.total.value:0,P?l.meta.total.supplementary.total.units:"USD",r),Z=(0,C.xG)(j?l.meta.total.infrastructure[a].value:0,j?l.meta.total.infrastructure[a].units:"USD",r),k=(0,C.bM)(T?l.meta.total.request.value:0,T?l.meta.total.request.units:void 0,c),O=R&&l.meta.total.usage.value>=0?(0,C.bM)(R?l.meta.total.usage.value:0,R?l.meta.total.usage.units:void 0,S):(0,C.bM)(R?l.meta.total.usage:0,F?l.meta.total.count.units:void 0,S));const M=(e=!1)=>{let a=E;t===p.LI.infrastructure?a=Z:t===p.LI.supplementary&&(a=N);const r=e?"Alt":"";return o().createElement("div",{className:"valueContainer"},v?o().createElement(s.Tooltip,{content:i.formatMessage(m.Z.dashboardTotalCostTooltip,{infrastructureCost:Z,supplementaryCost:N}),enableFlip:!0},o().createElement("div",{className:`value${r}`},a)):o().createElement("div",{className:`value${r}`},a),o().createElement("div",{className:"text"},o().createElement("div",null,n)))},I=()=>{if(!L)return null;const e=T?l.meta.total.request.units:void 0,t=i.formatMessage(m.Z.units,{units:(0,C.ZV)(e)});return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},k),Boolean(b&&(y||T&&l.meta.total.request.value>=0))&&o().createElement("span",{className:"units"},t),o().createElement("div",{className:"text"},o().createElement("div",null,h)))},A=()=>{if(!L)return null;const e=R?l.meta.total.usage.units:void 0,t=(0,C.ZV)(y||e),a=i.formatMessage(m.Z.units,{units:t});return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},O),Boolean(b&&(y||R&&l.meta.total.usage.value>=0))&&o().createElement("span",{className:"units"},a),o().createElement("div",{className:"text"},o().createElement("div",null,L)))};return e===g.i.dailyCost||e===g.i.dailyTrend||e===g.i.cost?o().createElement(o().Fragment,null,M(f===d.C.cost)):e===g.i.trend?D?o().createElement(o().Fragment,null,A(),M(f===d.C.cost)):o().createElement(o().Fragment,null,M(f===d.C.cost),A()):e===g.i.usage?D?o().createElement(o().Fragment,null,A(),I()):o().createElement(o().Fragment,null,I(),A()):null}));var v=a(45868);const b=(0,r.ZP)((({intl:e=v.N,label:t,totalValue:a,units:n,value:r,formatOptions:i})=>{const l=e.formatMessage(m.Z.units,{units:(0,C.ZV)(n)}),c=a?r/a*100:0,h=(0,C.rl)(c),d=e.formatMessage(m.Z.percentTotalCost,{percent:h,units:l,value:(0,C.xG)(r,n,i)});return o().createElement("li",{className:"reportSummaryItem"},o().createElement(s.Progress,{label:d,value:Number(h),title:t,size:s.ProgressSize.sm}))}));var D=a(69511);class y extends o().Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=(0,D.R)({report:t,idKey:e}),s=a.findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}));return-1!==s?[...a.slice(0,s),...a.slice(s+1),a[s]]:a}render(){const{children:e,status:t}=this.props;if(t===i.iF.inProgress)return o().createElement(o().Fragment,null,o().createElement(s.Skeleton,{width:l.N.md}),o().createElement(s.Skeleton,{className:"skeleton",width:l.N.md}),o().createElement(s.Skeleton,{className:"skeleton",width:l.N.md}),o().createElement(s.Skeleton,{className:"skeleton",width:l.N.md}));{const t=this.getItems();return o().createElement("ul",null,e({items:t}))}}}const S=(0,r.ZP)(y);var L=a(21094),E=a(2311),N=a(80469),Z=a(84154),k=a(48629),O=a(52109),w=a(2370),x=a(55855),F=a(58395),P=a(45351),j=a(43902),T=a(21535),R=a(27765),M=a(19960),I=a(84076),A=a(18131),U=a(24656),z=a(84615),V=a(70698),B=a(72021),H=a(21768),q=a(41534);const Y={currentColorScale:[H.CH.value,B.R0.value,V.t6.value,z.S7.value,q.iM.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[A.cQ.value,I.iY.value,M.OS.value,R.O6.value,U.DD.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:z.S7.value,strokeWidth:0},forecastConeDataColorScale:[z.S7.value],forecastData:{fill:"none"},forecastDataColorScale:[V.t6.value],forecastInfrastructureConeData:{fill:R.O6.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[R.O6.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[M.OS.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[T.tN.value,T.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class W extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=j.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentCostData:e,forecastConeData:t,forecastData:a,previousCostData:s,showForecast:n}=this.props,o=m.Z.chartCostLegendLabel,r=m.Z.chartCostLegendTooltip,i=[{childName:"previousCost",data:s,legendItem:{name:(0,p.uL)(s,o,!0,!0,1,m.Z.chartCostLegendNoDataLabel),symbol:{fill:Y.previousColorScale[0],type:"minus"},tooltip:(0,p.ml)(s,r,!1,!1,1)},style:{data:Object.assign(Object.assign({},Y.previousCostData),{stroke:Y.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,p.uL)(e,o,!0,!1,0,m.Z.chartCostLegendNoDataLabel),symbol:{fill:Y.currentColorScale[0],type:"minus"},tooltip:(0,p.ml)(e,r,!1,!1)},style:{data:Object.assign(Object.assign({},Y.currentCostData),{stroke:Y.currentColorScale[0]})}}];n&&(i.push({childName:"forecast",data:a,legendItem:{name:(0,p.uL)(a,m.Z.chartCostForecastLegendLabel,!1,!1,0,m.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:Y.forecastDataColorScale[0],type:"minus"},tooltip:(0,p.ml)(a,m.Z.chartCostForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},Y.forecastData),{stroke:Y.forecastDataColorScale[0]})}}),i.push({childName:"forecastCone",data:t,legendItem:{name:(0,p.uL)(t,m.Z.chartCostForecastConeLegendLabel,!1,!1,0,m.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:Y.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,p.ml)(t,m.Z.chartCostForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},Y.forecastConeData),{stroke:Y.forecastConeDataColorScale[0]})}}));const l=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:l,series:i})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:n}=this.state;let o=a;return e&&(s?n>675&&n<1175?o+=25:n>450&&n<675?o+=50:n<=450&&(o+=75):n>450&&n<725?o+=25:n<=450&&(o+=50)),o},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(L.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,E.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return o().createElement(N.Qk,{data:(0,P.oX)(a,t),height:25,gutter:20,name:`${e}-legend`,responsive:!1})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,Z.u)({chartNames:(0,P.bC)(a),isHidden:e=>(0,P.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}getEndDate(){const{currentCostData:e,forecastData:t,previousCostData:a}=this.props,s=e?(0,x.Z)((0,p.Y_)(e,!0,!0)[1]):0,n=t?(0,x.Z)((0,p.Y_)(t,!0,!0)[1]):0,o=a?(0,x.Z)((0,p.Y_)(a,!0,!0)[1]):0;return s>0||o>0?Math.max(s,n,o):31}render(){const{height:e,intl:t,name:a,padding:n={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,P.ge)(c,l),u=this.getEndDate(),p=Math.floor(u/2),g=1+Math.floor(p/2),C=1+p,f=u-Math.floor(p/2),v=i?o().cloneElement(i,{disable:!(0,P.TW)(c,l),labelComponent:o().createElement(k.M,{legendData:(0,P.oX)(c,l,!0),title:e=>t.formatMessage(m.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,r&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h}},o().createElement(O.k,{containerComponent:v,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(c,l),legendPosition:"bottom-left",name:a,padding:n,theme:F.Z,width:h},c&&c.map(((e,t)=>this.getChart(e,t))),o().createElement(w.C,{style:Y.xAxis,tickValues:[1,g,C,f,u]}),o().createElement(w.C,{dependentAxis:!0,style:Y.yAxis})))))}}const _=(0,r.ZP)(W);const X=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(_,Object.assign({name:t},a)))};var G=a(39727),$=a(74174),Q=a(26383),K=a(82874);const J={currentColorScale:[H.CH.value,B.R0.value,V.t6.value,z.S7.value,q.iM.value],currentInfrastructureColorScale:[A.cQ.value,I.iY.value,M.OS.value,R.O6.value,U.DD.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[K.g9.value],forecastDataColorScale:[V.t6.value],forecastInfrastructureConeDataColorScale:[K.g9.value],forecastInfrastructureDataColorScale:[M.OS.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[T.tN.value,T.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ee extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=j.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentCostData:e,forecastConeData:t,forecastData:a,previousCostData:s,showForecast:n}=this.props,o=m.Z.chartCostLegendLabel,r=m.Z.chartCostLegendTooltip,i=[{childName:"previousCost",data:this.initDatumChildName(s,"previousCost"),legendItem:{name:(0,p.uL)(s,o,!0,!0,1,m.Z.chartCostLegendNoDataLabel),symbol:{fill:J.previousColorScale[0],type:"minus"},tooltip:(0,p.ml)(s,r,!1,!1,1)},isLine:!0,style:{data:{stroke:J.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:(0,p.uL)(e,o,!0,!1,0,m.Z.chartCostLegendNoDataLabel),symbol:{fill:J.currentColorScale[0],type:"minus"},tooltip:(0,p.ml)(e,r,!1,!1)},isBar:!0,style:{data:{fill:J.currentColorScale[0]}}}];n&&(i.push({childName:"forecast",data:this.initDatumChildName(a,"forecast"),legendItem:{name:(0,p.uL)(a,m.Z.chartCostForecastLegendLabel,!1,!1,0,m.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:J.forecastDataColorScale[0],type:"minus"},tooltip:(0,p.ml)(a,m.Z.chartCostForecastLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:J.forecastDataColorScale[0]}}}),i.push({childName:"forecastCone",data:this.initDatumChildName(t,"forecastCone"),legendItem:{name:(0,p.uL)(t,m.Z.chartCostForecastConeLegendLabel,!1,!1,0,m.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:J.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,p.ml)(t,m.Z.chartCostForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:J.forecastConeDataColorScale[0]}}}));const l=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:l,series:i})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:n}=this.state;let o=a;return e&&(s?n>675&&n<1175?o+=25:n>450&&n<675?o+=50:n<=450&&(o+=75):n>450&&n<725?o+=25:n<=450&&(o+=50)),o},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(G.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement($.m,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(G.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(G.B,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,E.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return o().createElement(N.Qk,{data:(0,P.oX)(a,t),height:25,gutter:20,name:`${e}-legend`,responsive:!1})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentCostData:e,forecastData:t,previousCostData:a}=this.props,s=e?(0,x.Z)((0,p.Y_)(e,!0,!0)[1]):0,n=t?(0,x.Z)((0,p.Y_)(t,!0,!0)[1]):0,o=a?(0,x.Z)((0,p.Y_)(a,!0,!0)[1]):0;return s>0||o>0?Math.max(s,n,o):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,Z.u)({chartNames:(0,P.bC)(a),isDataHidden:e=>(0,P.E0)(a,t,e),isHidden:e=>(0,P.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:n={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,P.ge)(c,l),u=this.getEndDate(),p=Math.floor(u/2),g=1+Math.floor(p/2),C=1+p,f=u-Math.floor(p/2),v=i?o().cloneElement(i,{disable:!(0,P.TW)(c,l),labelComponent:o().createElement(k.M,{legendData:(0,P.oX)(c,l,!0),title:e=>t.formatMessage(m.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,r&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h}},o().createElement(O.k,{containerComponent:v,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(c,l),legendPosition:"bottom-left",name:a,padding:n,theme:F.Z,width:h},c&&c.length>0&&o().createElement(Q.G,{offset:5.5},c.map(((e,t)=>this.getChart(e,t)))),c&&c.length>0&&o().createElement(Q.G,{offset:5.5},c.map(((e,t)=>this.getForecastBarChart(e,t)))),c&&c.length>0&&o().createElement(Q.G,{offset:5.5},c.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(w.C,{style:J.xAxis,tickValues:[1,g,C,f,u]}),o().createElement(w.C,{dependentAxis:!0,style:J.yAxis})))))}}const te=(0,r.ZP)(ee);const ae=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(te,Object.assign({name:t},a)))},se={currentColorScale:[H.CH.value,B.R0.value,V.t6.value,z.S7.value,q.iM.value],forecastConeDataColorScale:[K.g9.value],forecastDataColorScale:[V.t6.value],itemsPerRow:4,previousColorScale:[T.tN.value,T.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ne extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=j.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:n,showSupplementaryLabel:o=!1,showUsageLegendLabel:r=!1}=this.props,i=r?m.Z.chartUsageLegendLabel:o?m.Z.chartCostSupplementaryLegendLabel:m.Z.chartCostLegendLabel,l=r?m.Z.chartUsageLegendTooltip:o?m.Z.chartCostSupplementaryLegendTooltip:m.Z.chartCostLegendTooltip,c=r?m.Z.chartUsageLegendNoDataLabel:o?m.Z.chartCostSupplementaryLegendNoDataLabel:m.Z.chartCostLegendNoDataLabel,h=[{childName:"previousCost",data:this.initDatumChildName(s,"previousCost"),legendItem:{name:(0,p.uL)(s,i,!0,!0,1,c),symbol:{fill:se.previousColorScale[0],type:"minus"},tooltip:(0,p.ml)(s,l,!1,!1,1)},isBar:!0,style:{data:{fill:se.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:(0,p.uL)(e,i,!0,!1,0,c),symbol:{fill:se.currentColorScale[0],type:"minus"},tooltip:(0,p.ml)(e,l,!1,!1)},isBar:!0,style:{data:{fill:se.currentColorScale[0]}}}];n&&(h.push({childName:"forecast",data:this.initDatumChildName(t,"forecast"),legendItem:{name:(0,p.uL)(t,m.Z.chartCostForecastLegendLabel,!1,!1,0,m.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:se.forecastDataColorScale[0],type:"minus"},tooltip:(0,p.ml)(t,m.Z.chartCostForecastLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:se.forecastDataColorScale[0]}}}),h.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,p.uL)(a,m.Z.chartCostForecastConeLegendLabel,!1,!1,0,m.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:se.forecastConeDataColorScale[0],type:"minus"},tooltip:(0,p.ml)(a,m.Z.chartCostForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:se.forecastConeDataColorScale[0]}}}));const d=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:d,series:h})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s,showSupplementaryLabel:n}=this.props,{width:o}=this.state;let r=a;return e&&s&&o<(n?850:725)&&(r+=25),r},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(G.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement($.m,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(G.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(G.B,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,E.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e,name:t=""}=this.props,{hiddenSeries:a,series:s,width:n}=this.state;return o().createElement(N.Qk,{data:(0,P.oX)(s,a),gutter:20,height:25,itemsPerRow:e,name:`${t}-legend`,orientation:n>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?(0,x.Z)((0,p.Y_)(a,!0,!0)[1]):0,n=e?(0,x.Z)((0,p.Y_)(e,!0,!0)[1]):0,o=t?(0,x.Z)((0,p.Y_)(t,!0,!0)[1]):0;return n>0||s>0?Math.max(n,o,s):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,Z.u)({chartNames:(0,P.bC)(a),isDataHidden:e=>(0,P.E0)(a,t,e),isHidden:e=>(0,P.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:n={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,P.ge)(c,l),u=this.getEndDate(),p=Math.floor(u/2),g=1+Math.floor(p/2),C=1+p,f=u-Math.floor(p/2),v=i?o().cloneElement(i,{disable:!(0,P.TW)(c,l),labelComponent:o().createElement(k.M,{legendData:(0,P.oX)(c,l,!0),title:e=>t.formatMessage(m.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,r&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h}},o().createElement(O.k,{containerComponent:v,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(c,l),legendPosition:"bottom-left",name:a,padding:n,theme:F.Z,width:h},c&&c.length>0&&o().createElement(Q.G,{offset:11},c.map(((e,t)=>this.getChart(e,t)))),c&&c.length>0&&o().createElement(Q.G,{offset:11},o().createElement(G.B,{data:[{y:null}],name:"forcast_spacer"}),c.map(((e,t)=>this.getForecastBarChart(e,t)))),c&&c.length>0&&o().createElement(Q.G,{offset:11},o().createElement(G.B,{data:[{y:null}],name:"forcast_cone_spacer"}),c.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(w.C,{style:se.xAxis,tickValues:[1,g,C,f,u]}),o().createElement(w.C,{dependentAxis:!0,style:se.yAxis})))))}}const oe=(0,r.ZP)(ne);const re=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(oe,Object.assign({name:t},a)))},ie={currentColorScale:[H.ZP.value,B.ZP.value,V.ZP.value,z.ZP.value,q.ZP.value],currentMonthData:{fill:"none"},forecastConeData:{fill:z.ZP.value,strokeWidth:0},forecastConeDataColorScale:[z.ZP.value],forecastData:{fill:"none"},forecastDataColorScale:[V.ZP.value],itemsPerRow:4,previousColorScale:[T.ZP.value,T.ZP.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class le extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=j.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:n,showSupplementaryLabel:o=!1,showUsageLegendLabel:r=!1}=this.props,i=r?m.Z.chartUsageLegendLabel:o?m.Z.chartCostSupplementaryLegendLabel:m.Z.chartCostLegendLabel,l=r?m.Z.chartUsageLegendTooltip:o?m.Z.chartCostSupplementaryLegendTooltip:m.Z.chartCostLegendTooltip,c=r?m.Z.chartUsageLegendNoDataLabel:o?m.Z.chartCostSupplementaryLegendNoDataLabel:m.Z.chartCostLegendNoDataLabel,h=[{childName:"previousCost",data:s,legendItem:{name:(0,p.uL)(s,i,!0,!0,1,c),symbol:{fill:ie.previousColorScale[0],type:"minus"},tooltip:(0,p.ml)(s,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},ie.previousMonthData),{stroke:ie.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,p.uL)(e,i,!0,!1,0,c),symbol:{fill:ie.currentColorScale[0],type:"minus"},tooltip:(0,p.ml)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},ie.currentMonthData),{stroke:ie.currentColorScale[0]})}}];n&&(h.push({childName:"forecast",data:t,legendItem:{name:(0,p.uL)(t,m.Z.chartCostForecastLegendLabel,!1,!1,0,m.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:ie.forecastDataColorScale[0],type:"minus"},tooltip:(0,p.ml)(t,m.Z.chartCostForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},ie.forecastData),{stroke:ie.forecastDataColorScale[0]})}}),h.push({childName:"forecastCone",data:a,legendItem:{name:(0,p.uL)(a,m.Z.chartCostForecastConeLegendLabel,!1,!1,0,m.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:ie.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,p.ml)(a,m.Z.chartCostForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},ie.forecastConeData),{stroke:ie.forecastConeDataColorScale[0]})}}));const d=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:d,series:h})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s,showSupplementaryLabel:n}=this.props,{width:o}=this.state;let r=a;return e&&s&&o<(n?900:725)&&(r+=25),r},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(L.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,E.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e="",legendItemsPerRow:t}=this.props,{hiddenSeries:a,series:s,width:n}=this.state;return o().createElement(N.Qk,{data:(0,P.oX)(s,a),gutter:20,height:25,itemsPerRow:t,name:`${e}-legend`,orientation:n>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,forecastConeData:a,previousData:s}=this.props,n=s?(0,x.Z)((0,p.Y_)(s,!0,!0)[1]):0,o=e?(0,x.Z)((0,p.Y_)(e,!0,!0)[1]):0,r=t?(0,x.Z)((0,p.Y_)(t,!0,!0)[1]):0,i=a?(0,x.Z)((0,p.Y_)(a,!0,!0)[1]):0;return o>0||n>0?Math.max(o,r,i,n):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,Z.u)({chartNames:(0,P.bC)(a),isHidden:e=>(0,P.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:n={bottom:50,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,P.ge)(c,l),u=this.getEndDate(),p=Math.floor(u/2),g=i?o().cloneElement(i,{disable:!(0,P.TW)(c,l),labelComponent:o().createElement(k.M,{legendData:(0,P.oX)(c,l,!0),title:e=>t.formatMessage(m.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,(null==r?void 0:r.length)&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h},"data-testid":"trend-chart-wrapper"},o().createElement(O.k,{containerComponent:g,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(c,l),legendPosition:"bottom-left",name:a,padding:n,theme:F.Z,title:r||"Trend Chart",width:h},c&&c.map(((e,t)=>this.getChart(e,t))),o().createElement(w.C,{style:ie.xAxis,tickValues:[1,p,u]}),o().createElement(w.C,{dependentAxis:!0,style:ie.yAxis})))))}}const ce=(0,r.ZP)(le);const he=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(ce,Object.assign({name:t},a)))},de={chartContainer:{marginTop:a(98499).ZP.value},currentRequestData:{data:{fill:"none",stroke:B.ZP.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:H.ZP.value}},itemsPerRow:2,legendColorScale:[T.ZP.value,H.ZP.value,T.ZP.value,B.ZP.value],previousRequestData:{data:{fill:"none",stroke:T.ZP.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:T.ZP.value}},currentColorScale:[H.ZP.value,B.ZP.value,V.ZP.value,z.ZP.value,q.ZP.value],previousColorScale:[T.ZP.value,T.ZP.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class me extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=j.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,n=m.Z.chartUsageLegendLabel,o=m.Z.chartUsageLegendTooltip,r=m.Z.chartRequestsLegendLabel,i=m.Z.chartRequestsLegendTooltip,l=[{childName:"previousUsage",data:s,legendItem:{name:(0,p.Fs)(s,n,!0,!0,1,m.Z.chartUsageLegendNoDataLabel),symbol:{fill:de.legendColorScale[0],type:"minus"},tooltip:(0,p.I6)(s,o,!1,!1,1)},style:de.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:(0,p.Fs)(t,n,!0,!1,0,m.Z.chartUsageLegendNoDataLabel),symbol:{fill:de.legendColorScale[1],type:"minus"},tooltip:(0,p.I6)(t,o,!1,!1)},style:de.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:(0,p.Fs)(a,r,!0,!0,1,m.Z.chartRequestsLegendNoDataLabel),symbol:{fill:de.legendColorScale[2],type:"dash"},tooltip:(0,p.I6)(a,i,!1,!1,1)},style:de.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:(0,p.Fs)(e,r,!0,!1,0,m.Z.chartRequestsLegendNoDataLabel),symbol:{fill:de.legendColorScale[3],type:"dash"},tooltip:(0,p.I6)(e,i,!1,!1)},style:de.currentRequestData}],c=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:c,series:l})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:s}=this.state;let n=a;return e&&s<480&&(n+=20),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(L.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,E.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e="",legendItemsPerRow:t}=this.props,{hiddenSeries:a,series:s,width:n}=this.state,r=t||(n>300?de.itemsPerRow:1);return o().createElement(N.Qk,{data:(0,P.oX)(s,a),height:25,gutter:20,itemsPerRow:r,name:`${e}-legend`})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,n=e?(0,x.Z)((0,p.Y_)(e,!0,!0)[1]):0,o=t?(0,x.Z)((0,p.Y_)(t,!0,!0)[1]):0,r=a?(0,x.Z)((0,p.Y_)(a,!0,!0)[1]):0,i=s?(0,x.Z)((0,p.Y_)(s,!0,!0)[1]):0;return n>0||o>0||r>0||i>0?Math.max(n,o,r,i):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,Z.u)({chartNames:(0,P.bC)(a),isHidden:e=>(0,P.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:n={bottom:75,left:8,right:8,top:8},title:r}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,P.ge)(c,l),u=this.getEndDate(),p=Math.floor(u/2),g=i?o().cloneElement(i,{disable:!(0,P.TW)(c,l),labelComponent:o().createElement(k.M,{legendData:(0,P.oX)(c,l,!0),title:e=>t.formatMessage(m.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,(null==r?void 0:r.length)&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},r),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h},"data-testid":"usage-chart-wrapper"},o().createElement(O.k,{containerComponent:g,domain:d,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,P.oX)(c,l),legendPosition:"bottom-left",name:a,padding:n,theme:F.Z,title:r||"Usage Chart",width:h},c&&c.map(((e,t)=>this.getChart(e,t))),o().createElement(w.C,{style:de.xAxis,tickValues:[1,p,u]}),o().createElement(w.C,{dependentAxis:!0,style:de.yAxis})))))}}const ue=(0,r.ZP)(me);const pe=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(ue,Object.assign({name:t},a)))}},20513:(e,t,a)=>{a.d(t,{N:()=>s});const s={xs:"16%",sm:"33%",md:"66%",lg:"100%"}}}]);
//# sourceMappingURL=../sourcemaps/8316.f58cebf5ae3a1143bd7fbf92d471f1db.js.map