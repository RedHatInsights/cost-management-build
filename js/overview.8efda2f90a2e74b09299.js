"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{53086:(e,t,r)=>{r.d(t,{xX:()=>o,yK:()=>s});var a=r(40400);const s={name:"OkIcon",height:1024,width:1024,svgPath:"M668.3,361.4 L465.1,564.6 L352.2,451.7 C346.210177,445.698444 338.079189,442.325817 329.6,442.325817 C321.120811,442.325817 312.989823,445.698444 307,451.7 L261.8,496.9 C255.798444,502.889823 252.425817,511.020811 252.425817,519.5 C252.425817,527.979189 255.798444,536.110177 261.8,542.1 L442.4,722.7 C448.389823,728.701556 456.520811,732.074183 465,732.074183 C473.479189,732.074183 481.610177,728.701556 487.6,722.7 L758.6,451.7 C764.601556,445.710177 767.974183,437.579189 767.974183,429.1 C767.974183,420.620811 764.601556,412.489823 758.6,406.5 L713.4,361.3 C700.916226,348.87879 680.728569,348.923552 668.3,361.4 M512.1,127.9 C300.3,127.9 128.1,300.2 128.1,511.9 C128.1,723.8 300.3,895.9 512.1,895.9 C723.9,895.9 896.1,723.7 896.1,511.9 C896.1,300.1 723.8,127.9 512.1,127.9 M512.1,1024 C229.7,1024 0,794.3 0,512 C0,229.7 229.7,0 512.1,0 C794.3,0 1024,229.7 1024,512 C1024,794.3 794.3,1024 512.1,1024",yOffset:0,xOffset:0},o=(0,a.IU)(s)},84717:(e,t,r)=>{r.d(t,{H:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,r)=>{r.d(t,{T:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},6450:(e,t,r)=>{r.d(t,{F:()=>y,m:()=>m});var a=r(90154),s=r(97027),o=r(92950),n=r.n(o),c=r(74806),i=r(77760),l=r(1156),p=r(15829);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"}},m=[{label:s.Z.currencyOptions,value:"AUD"},{label:s.Z.currencyOptions,value:"CAD"},{label:s.Z.currencyOptions,value:"CHF"},{label:s.Z.currencyOptions,value:"CNY"},{label:s.Z.currencyOptions,value:"DKK"},{label:s.Z.currencyOptions,value:"EUR"},{label:s.Z.currencyOptions,value:"GBP"},{label:s.Z.currencyOptions,value:"HKD"},{label:s.Z.currencyOptions,value:"JPY"},{label:s.Z.currencyOptions,value:"NOK"},{label:s.Z.currencyOptions,value:"NZD"},{label:s.Z.currencyOptions,value:"SEK"},{label:s.Z.currencyOptions,value:"SGD"},{label:s.Z.currencyOptions,value:"USD"},{label:s.Z.currencyOptions,value:"ZAR"}];class d extends n().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t}=this.props,{isSelectOpen:r}=this.state,s=this.getSelectOptions(),o=s.find((t=>t.value===e));return n().createElement(a.Select,{className:"currencyOverride",id:"currencySelect",isDisabled:t,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:a.SelectVariant.single},s.map((e=>n().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return m.map((r=>{t.push({toString:()=>e.formatMessage(r.label,{units:r.value}),value:r.value})})),t},this.handleSelect=(e,t)=>{const{onSelect:r}=this.props;(0,p.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{r&&r(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return n().createElement("div",{style:u.currencySelector},n().createElement(a.Title,{headingLevel:"h2",size:"md",style:u.currencyLabel},e.formatMessage(s.Z.currency)),this.getSelect())}}const h=(0,l.X1)((()=>({}))),g=(0,i.connect)(h,{})(d),y=(0,c.ZP)(g)},80824:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ft});var a=r(90154),s=r(39333),o=r(97027),n=r(92950),c=r.n(n),i=r(74806),l=r(77760),p=r(80129),u=r(58613),m=r(91800),d=r(73805),h=r(5842),g=r(45868),y=r(40227);const b={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function f(e){return Object.keys(e).reduce(((t,r)=>null===e[r]?t:""===t?`?${r}=${e[r]}`:`${t}&${r}=${e[r]}`),"")}function T(e,t){return(e-1)*t}Object.keys(b);const v=(0,h.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:a}=u.E6.pagination(e);return{query:u.E6.query(e),count:t,page:r,perPage:a}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:c,query:i}=e;return{itemCount:o,page:n,perPage:c,variant:a.PaginationVariant.bottom,onSetPage:(e,t,r)=>{s.navigate(f(Object.assign(Object.assign(Object.assign({},b),i),{offset:T(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(f(Object.assign(Object.assign(Object.assign({},b),i),{limit:t,offset:0})))}}}))((0,i.ZP)((e=>{const{variant:t,intl:r=g.N,itemCount:s,page:n,perPage:i,onSetPage:l,onPerPageSelect:p}=e;return c().createElement(a.Toolbar,null,c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},c().createElement(a.Pagination,{onPerPageSelect:p,onSetPage:l,variant:t,itemCount:s,page:n,perPage:i,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsDetailsTitle),placement:"bottom"})}}))))}))));var E=r(49382),S=r(32412);const P={descContainer:{backgroundColor:E.ZP.value,padding:S.ZP.value}};var Z=r(45958),C=r(69957),M=r(34327),R=r(44439),O=r(1156),F=r(91778),I=r(15829),k=r(1326);const D={apiError:null,checked:{},clearQuery:()=>null,createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,I.tk)(),dataFetched:!1,description:"",dirtyName:!1,distribution:"",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,fetchSources:(e,t,r,a)=>null,filterName:"",goToAddPL:e=>null,isDiscount:!1,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleDistributePlatformUnallocatedChange:(...e)=>null,handleDistributeWorkerUnallocatedChange:(...e)=>null,handleSignChange:(...e)=>null,loading:!1,markup:"",metricsHash:{},name:"",onClose:()=>null,onCurrencyChange:e=>null,onDescChange:e=>null,onFilterChange:e=>null,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,onTypeChange:e=>null,onNameChange:e=>null,onSourceSelect:(...e)=>null,page:1,perPage:10,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},query:{},step:1,setSources:e=>null,sources:[],submitTiers:e=>null,tiers:[],total:0,type:""},j=c().createContext(D);var A=r(28056);const V={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"},selector:{maxHeight:"350px"},titleWithLearnMore:{display:"inline-block",marginRight:"1em"}};class x extends c().Component{render(){const{intl:e}=this.props;return c().createElement(j.Consumer,null,(({handleDistributionChange:t,handleDistributePlatformUnallocatedChange:r,handleDistributeWorkerUnallocatedChange:s,distribution:n,distributePlatformUnallocated:i,distributeWorkerUnallocated:l})=>c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:"xl",style:V.titleWithLearnMore},e.formatMessage(o.Z.costDistribution)),c().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsDistribution),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:"md"},e.formatMessage(o.Z.distributionType)),c().createElement(a.TextContent,null,c().createElement(a.Text,{style:V.cardDescription},e.formatMessage(o.Z.distributionModelDesc)))),c().createElement(a.StackItem,{isFilled:!0},c().createElement(A.l,null,c().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-type",isRequired:!0},c().createElement(a.Radio,{isChecked:"cpu"===n,name:"distributionType",label:e.formatMessage(o.Z.cpuTitle),"aria-label":e.formatMessage(o.Z.cpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),c().createElement(a.Radio,{isChecked:"memory"===n,name:"distributionType",label:e.formatMessage(o.Z.memoryTitle),"aria-label":e.formatMessage(o.Z.memoryTitle),id:"memoryDistribution",value:"memory",onChange:t})))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:"md"},e.formatMessage(o.Z.platform)),c().createElement(a.TextContent,null,c().createElement(a.Text,{style:V.cardDescription},e.formatMessage(o.Z.platformDesc)))),c().createElement(a.StackItem,{isFilled:!0},c().createElement(A.l,null,c().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-platform-unallocated",isRequired:!0},c().createElement(a.Radio,{isChecked:i,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributePlatformTrue",value:"true",onChange:r}),c().createElement(a.Radio,{isChecked:!i,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributePlatformFalse",value:"false",onChange:r})))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:"md"},e.formatMessage(o.Z.workerUnallocated)),c().createElement(a.TextContent,null,c().createElement(a.Text,{style:V.cardDescription},e.formatMessage(o.Z.workerUnallocatedDesc)))),c().createElement(a.StackItem,{isFilled:!0},c().createElement(A.l,null,c().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-worker-unallocated",isRequired:!0},c().createElement(a.Radio,{isChecked:l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributeWorkerTrue",value:"true",onChange:s}),c().createElement(a.Radio,{isChecked:!l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributeWorkerFalse",value:"false",onChange:s})))))))}}const z=(0,O.X1)((()=>({}))),L=(0,i.ZP)((0,l.connect)(z,{})(x));var W=r(6450),w=r(972);const N=e=>0===e.length?o.Z.costModelsRequiredField:e.length>100?o.Z.costModelsInfoTooLong:null,B=e=>e.length>500?o.Z.costModelsDescTooLong:null,U=e=>""!==e.trim()&&(!!(0,F.WW)(e)&&!((0,F.cR)(e)>10)),_={"":[()=>!1],AWS:[e=>null===N(e.name)&&null===B(e.description)&&""!==e.type,e=>U(e.markup),()=>!0,()=>!0],Azure:[e=>null===N(e.name)&&null===B(e.description)&&""!==e.type,e=>U(e.markup),()=>!0,()=>!0],GCP:[e=>null===N(e.name)&&null===B(e.description)&&""!==e.type,e=>U(e.markup),()=>!0,()=>!0],OCP:[e=>null===N(e.name)&&null===B(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>U(e.markup),()=>!0,()=>!0,()=>!0]};class K extends c().Component{render(){const e=(e,r)=>{const a=r.find((t=>t.value===e));return a?t.formatMessage(a.label,{units:a.value}):e},{intl:t}=this.props,r=[{label:o.Z.costModelsWizardOnboardAws,value:"AWS"},{label:o.Z.azure,value:"Azure"},{label:o.Z.gcp,value:"GCP"},{label:o.Z.costModelsWizardOnboardOcp,value:"OCP"}];return c().createElement(j.Consumer,null,(({currencyUnits:s,dirtyName:n,description:i,name:l,type:p,onCurrencyChange:u,onNameChange:m,onDescChange:d,onTypeChange:h})=>c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:V.titleWithLearnMore},t.formatMessage(o.Z.costModelsWizardGeneralInfoTitle)),c().createElement("a",{href:t.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},t.formatMessage(o.Z.learnMore))),c().createElement(a.StackItem,null,c().createElement(A.l,{style:V.form},c().createElement(a.FormGroup,{helperTextInvalid:N(l)&&t.formatMessage(N(l)),validated:null!==N(l)&&n?"error":"default",label:t.formatMessage(o.Z.names,{count:1}),isRequired:!0,fieldId:"name"},c().createElement(a.TextInput,{validated:null!==N(l)&&n?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:l,onChange:m})),c().createElement(a.FormGroup,{helperTextInvalid:B(i)&&t.formatMessage(B(i)),validated:null===B(i)?"default":"error",label:t.formatMessage(o.Z.description),fieldId:"description"},c().createElement(a.TextArea,{style:V.textArea,type:"text",id:"description",name:"description",value:i,validated:null===B(i)?"default":"error",onChange:d})),c().createElement(w.Q,{isRequired:!0,id:"source-type-selector",direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:V.selector.maxHeight,label:o.Z.costModelsSourceType,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),placeholderText:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),value:e(p,r),onChange:h,options:r}),c().createElement(w.Q,{label:o.Z.currency,direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:V.selector.maxHeight,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardCurrencyToggleLabel),value:e(s,W.m),onChange:u,id:"currency-units-selector",options:W.m.map((e=>({label:t.formatMessage(e.label,{units:e.value}),value:e.value})))}))))))}}const G=(0,O.X1)((()=>({}))),q=(0,i.ZP)((0,l.connect)(G,{})(K));var H=r(65159);class $ extends c().Component{render(){const{intl:e}=this.props,t=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};return c().createElement(j.Consumer,null,(({handleSignChange:r,handleMarkupDiscountChange:s,markup:n,isDiscount:i})=>{const l=(p=n,(0,F.WW)(p)?(0,F.cR)(p)>10?o.Z.markupOrDiscountTooLong:void 0:o.Z.markupOrDiscountNumber);var p;const u=l?"error":"default";return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:V.titleWithLearnMore},e.formatMessage(o.Z.costCalculationsOptional)),c().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsMarkup),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:"md"},e.formatMessage(o.Z.markupOrDiscount)),c().createElement(a.TextContent,null,c().createElement(a.Text,null,e.formatMessage(o.Z.markupOrDiscountModalDesc)))),c().createElement(a.StackItem,null,c().createElement(a.Flex,{style:H.W.markupRadioContainer},c().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},c().createElement(a.FlexItem,null,c().createElement(a.Radio,{isChecked:!i,name:"discount",label:e.formatMessage(o.Z.markupPlus),"aria-label":e.formatMessage(o.Z.markupPlus),id:"markup",value:"false",onChange:r,style:H.W.markupRadio}),c().createElement(a.Radio,{isChecked:i,name:"discount",label:e.formatMessage(o.Z.discountMinus),"aria-label":e.formatMessage(o.Z.discountMinus),id:"discount",value:"true",onChange:r}))),c().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},c().createElement(a.FlexItem,null,c().createElement(A.l,null,c().createElement(a.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:l?e.formatMessage(l):void 0,style:H.W.rateContainer,validated:u},c().createElement(a.InputGroup,null,c().createElement(a.InputGroupText,{style:H.W.sign},i?e.formatMessage(o.Z.discountMinus):e.formatMessage(o.Z.markupPlus)),c().createElement(a.TextInput,{"aria-label":e.formatMessage(o.Z.rate),id:"markup-input-box",isRequired:!0,onKeyDown:t,onChange:s,placeholder:"0",style:H.W.inputField,type:"text",validated:u,value:n}),c().createElement(a.InputGroupText,{style:H.W.percent},e.formatMessage(o.Z.percentSymbol))))))))),c().createElement(a.StackItem,null,c().createElement("div",{style:H.W.exampleMargin},c().createElement(a.TextContent,null,c().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(o.Z.examplesTitle))),c().createElement(a.List,null,c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesNoAdjust)),c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesDoubleMarkup)),c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceZero)),c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceSeventyfive))))))}))}}const X=(0,O.X1)((()=>({}))),J=(0,i.ZP)((0,l.connect)(X,{})($));var Q=r(59046),Y=r(63359);const ee=(0,i.ZP)((({cancel:e,currencyUnits:t,intl:r=g.N,metricsHash:s,submitRate:n})=>{const{tiers:i}=c().useContext(j),l=(0,Y.bF)(s,void 0,i),p=c().useMemo((()=>(0,Y.Cw)(l)),[l.errors,l.rateKind]);return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,{component:a.TextVariants.h3},r.formatMessage(o.Z.costModelsWizardPriceListMetric)))),c().createElement(a.StackItem,null,c().createElement(a.Form,null,c().createElement(Y.HJ,{currencyUnits:t,metricsHash:s,rateFormData:l}))),c().createElement(a.StackItem,null,c().createElement(a.ActionGroup,null,c().createElement(a.Button,{variant:a.ButtonVariant.primary,isDisabled:!p,onClick:()=>n(l)},r.formatMessage(o.Z.createRate)),c().createElement(a.Button,{variant:a.ButtonVariant.link,onClick:e},r.formatMessage(o.Z.cancel)))))}));var te=r(7081),re=r(42901),ae=r(44742);const se=(0,i.ZP)((({id:e,intl:t,itemCount:r,perPage:s,page:n,variant:i,onPerPageSelect:l,onSetPage:p})=>c().createElement(a.Toolbar,{id:e},c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarItem,{variant:"pagination"},c().createElement(a.Pagination,{variant:i,itemCount:r,perPage:s,page:n,onSetPage:p,onPerPageSelect:l,titles:{paginationTitle:t.formatMessage(o.Z.paginationTitle,{title:t.formatMessage(o.Z.createCostModelTitle),placement:"bottom"})}}))))));var oe=r(59212),ne=r(62852),ce=r(49169),ie=r(53904),le=r(22962);class pe extends c().Component{constructor(){super(...arguments),this.defaultState={metrics:[],measurements:[],sortBy:{index:0,direction:y.SortByDirection.asc}},this.state=Object.assign({},this.defaultState)}render(){const{addRateAction:e,deleteRateAction:t,intl:r,items:s,metricsHash:n}=this.props,i=e=>{const t=e.replace(/ /g,"_").toLowerCase();return r.formatMessage(o.Z.metricValues,{value:t})||e},l=e=>r.formatMessage(o.Z.measurementValues,{value:e.toLowerCase().replace("-","_"),count:1})||e,p=Object.keys(n).map((e=>({label:i(e),value:e}))),u=p.reduce(((e,t)=>{const r=Object.keys(n[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:l(e),value:e})));return[...e,...r]}),[]),m=()=>c().createElement(a.Bullseye,null,c().createElement(a.EmptyState,null,c().createElement(a.EmptyStateIcon,{icon:te.wl}),c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(o.Z.costModelsWizardEmptyStateTitle)),c().createElement(a.EmptyStateBody,null,r.formatMessage(o.Z.costModelsWizardEmptyStateSkipStep,{value:c().createElement("strong",null,r.formatMessage(o.Z.next))}),c().createElement("br",null),r.formatMessage(o.Z.costModelsWizardEmptyStateOtherTime))));return c().createElement(j.Consumer,null,(({priceListPagination:n})=>c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,r.formatMessage(o.Z.costModelsWizardSubTitleTable)))),c().createElement(a.StackItem,null,c().createElement(ae.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:i,setSearch:l,onRemove:d,onSelect:h,onClearAll:g})=>{const y=(n.page-1)*n.perPage,b=n.page*n.perPage,f=s.map(((e,t)=>Object.assign(Object.assign({},e),{stateIndex:t}))).filter((e=>0===i.metrics.length||i.metrics.includes(e.metric.label_metric))).filter((e=>0===i.measurements.length||i.measurements.includes(e.metric.label_measurement))).sort(((e,t)=>{const a=1===this.state.sortBy.index?e=>{return t=e.metric.label_metric,r.formatMessage(o.Z.metricValues,{value:t})||t;var t}:2===this.state.sortBy.index?e=>{return t=e.metric.label_measurement,a=e.metric.label_measurement_unit,a=r.formatMessage(o.Z.units,{units:(0,F.ZV)(a)})||a,r.formatMessage(o.Z.measurementValues,{value:t.toLowerCase().replace("-","_"),units:a,count:2});var t,a}:()=>"";return(0,ne.tT)(e,t,this.state.sortBy.direction,a)})),T=f.slice(y,b);return c().createElement(c().Fragment,null,c().createElement(oe.Q,{primary:c().createElement(le.J,{isDisabled:0===s.length,primary:i.primary,setPrimary:e=>l({primary:e}),options:[{label:r.formatMessage(o.Z.metric),value:"metrics"},{label:r.formatMessage(o.Z.measurement),value:"measurements"}]}),selected:i.primary,secondaries:[{component:c().createElement(ie.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMeasurementPlaceHolder),selections:i.measurements,setSelections:e=>h("measurements",e),options:u}),name:"measurements",onRemove:d,filters:i.measurements},{component:c().createElement(ie.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMetricPlaceHolder),selections:i.metrics,setSelections:e=>h("metrics",e),options:p}),name:"metrics",onRemove:d,filters:i.metrics}],button:c().createElement(a.Button,{onClick:e},r.formatMessage(o.Z.createRate)),onClear:g,pagination:c().createElement(a.Pagination,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"top"})}})}),0===T.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&c().createElement(a.Bullseye,null,c().createElement(re.c,null)),0===T.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&c().createElement(m,null),T.length>0&&c().createElement(ce.y,{actions:[{title:r.formatMessage(o.Z.remove),onClick:(e,r,a)=>{t(a.data.stateIndex)}}],tiers:T,sortCallback:e=>{this.setState(Object.assign(Object.assign({},this.state),{sortBy:Object.assign({},e)}))}}),c().createElement(se,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}}))}))))))}}const ue=(0,l.connect)((0,O.X1)((e=>({metricsHash:m.qw.metrics(e)}))))((0,i.ZP)(pe)),me=()=>{const{currencyUnits:e,goToAddPL:t,metricsHash:r,tiers:a,submitTiers:s}=c().useContext(j),[o,n]=c().useState("table");return"table"===o?c().createElement(ue,{items:a,deleteRateAction:e=>{const r=[...a.slice(0,e),...a.slice(e+1)];s(r),0===r.length&&t(!0)},addRateAction:()=>{n("form"),t(!1)}}):"form"===o?c().createElement(ee,{currencyUnits:e,metricsHash:r,submitRate:o=>{var c;c=(0,Y.Nl)(o,r,e),s([...a,c]),n("table"),t(!0)},cancel:()=>{n("table"),t(!0)}}):null};var de=r(53086),he=r(43029);const ge=(0,i.ZP)((({intl:e})=>c().createElement(j.Consumer,null,(({onClose:t,name:r})=>c().createElement(a.EmptyState,null,c().createElement(a.EmptyStateIcon,{icon:de.xX,color:"green"}),c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o.Z.costModelsWizardReviewStatusTitle)),c().createElement(a.EmptyStateBody,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubTitle,{value:r})),c().createElement(a.EmptyStateSecondaryActions,null,c().createElement(a.Button,{variant:"link",onClick:t},e.formatMessage(o.Z.close)))))))),ye=(0,O.X1)((()=>({}))),be=(0,i.ZP)((0,l.connect)(ye,{})((({intl:e})=>c().createElement(j.Consumer,null,(({checked:t,createError:r,currencyUnits:s,description:n,distribution:i,distributePlatformUnallocated:l,distributeWorkerUnallocated:p,isDiscount:u,markup:m,name:d,tiers:h,type:g})=>{const y=Object.keys(t).filter((e=>t[e].selected)).map((e=>t[e].meta));return c().createElement(c().Fragment,null,r&&c().createElement(a.Alert,{variant:"danger",title:`${r}`}),c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardStepsReview))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubDetails,{create:c().createElement("strong",null,e.formatMessage(o.Z.create)),back:c().createElement("strong",null,e.formatMessage(o.Z.back))})))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.TextList,{component:a.TextListVariants.dl},c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.names,{count:1})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},d),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.description)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},n),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.currency)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.currencyOptions,{units:s})),"OCP"===g&&c().createElement(c().Fragment,null,c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.priceList)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},h.length>0?c().createElement(ce.y,{tiers:h}):e.formatMessage(o.Z.costModelsWizardNoRatesAdded))),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsWizardReviewMarkDiscount)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.percent,{value:u?"-"+m:m})),"OCP"===g&&c().createElement(c().Fragment,null,c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costDistribution)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributionTypeDesc,{type:i})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:l,type:"platform"})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:p,type:"worker"}))),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsAssignSources,{count:2})," ",y.find((e=>Boolean(e.costmodel)))&&c().createElement(he.a,{text:e.formatMessage(o.Z.costModelsWizardWarningSources)})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},y.map((e=>e.name)).join(", ")))))))}))))),fe=()=>c().createElement(j.Consumer,null,(({createSuccess:e})=>e?c().createElement(ge,null):c().createElement(be,null)));var Te=r(261),ve=r(80405),Ee=r(54425),Se=r(76889),Pe=r(80810);const Ze=({id:e,placeholder:t="",value:r,onChange:s,onSearch:o})=>c().createElement(a.InputGroup,null,c().createElement(a.TextInput,{value:r,placeholder:t,id:e,onChange:s,onKeyPress:e=>{"Enter"===e.key&&""!==r&&o(e)}}),c().createElement(a.InputGroupText,{style:{borderLeft:"0"}},c().createElement(Pe.W1,null))),Ce=(0,i.ZP)((({intl:e,filterInputProps:t,paginationProps:r,filter:s})=>c().createElement(a.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:s.onClearAll},c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:c().createElement(Se.k1,null)},c().createElement(a.ToolbarItem,{variant:"search-filter"},c().createElement(a.ToolbarFilter,{deleteChip:s.onRemove,chips:s.query.name,categoryName:"name"},c().createElement(Ze,Object.assign({placeholder:e.formatMessage(o.Z.costModelsFilterPlaceholder)},t))))),c().createElement(a.ToolbarItem,{variant:"pagination"},c().createElement(a.Pagination,{isCompact:r.isCompact,itemCount:r.itemCount,page:r.page,perPage:r.perPage,onSetPage:r.onSetPage,onPerPageSelect:r.onPerPageSelect,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}})))))),Me=(0,i.ZP)((({intl:e})=>c().createElement(j.Consumer,null,(({checked:t,loading:r,onSourceSelect:s,sources:n,perPage:i,page:l,type:p,query:u,fetchSources:m,filterName:d,onFilterChange:h})=>{const g="Azure"===p?"Azure":p,b=n.length>0?n[0].meta.count:0;return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardSourceTitle))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,e.formatMessage(o.Z.costModelsWizardSourceSubtitle)))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(o.Z.costModelsWizardSourceCaption,{value:p.toLowerCase()})))),c().createElement(a.StackItem,null,c().createElement(Ce,{filter:{onRemove:(e,t)=>m(g,(0,Ee.fg)(u)(e,t),1,i),onClearAll:()=>m(g,{},1,i),query:u},filterInputProps:{id:"assign-source-search-input",value:d,onChange:h,onSearch:()=>{m(g,(0,Ee.xZ)(u)("name",d),1,i)}},paginationProps:{isCompact:!0,itemCount:b,perPage:i,page:l,onSetPage:(e,t)=>{m(g,u,t,i)},onPerPageSelect:(e,t)=>m(g,u,1,t)}}),r?c().createElement(Te.G,null):c().createElement(y.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsWizardSourceTableAriaLabel),variant:y.TableVariant.compact},c().createElement(y.Thead,null,c().createElement(y.Tr,null,["",e.formatMessage(o.Z.names,{count:1}),e.formatMessage(o.Z.costModelsWizardSourceTableCostModel)].map(((e,t)=>c().createElement(y.Th,{key:t},e))))),c().createElement(y.Tbody,null,n.map(((r,n)=>c().createElement(y.Tr,{key:n},c().createElement(y.Td,null,c().createElement(a.Checkbox,{onChange:e=>{s(n,e)},id:r.name,key:r.name,"aria-label":e.formatMessage(o.Z.selectRow,{value:n}),isChecked:t[r.uuid]&&t[r.uuid].selected,isDisabled:Boolean(r.costmodel)})),c().createElement(y.Td,null,r.name," ",r.costmodel&&c().createElement(he.a,{key:`wrng-${r.name}`,text:e.formatMessage(o.Z.costModelsWizardSourceWarning,{costModel:r.costmodel})})),c().createElement(y.Td,null,r.costmodel?r.costmodel:"")))))),c().createElement(se,{itemCount:b,perPage:i,page:l,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.sources),placement:"bottom"})},onSetPage:(e,t)=>{m(g,u,t,i)},onPerPageSelect:(e,t)=>m(g,u,1,t)})))}))));class Re extends c().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:r,perPage:a,fetchSources:s}=this.context;s("Azure"===e?"Azure":e,t,r,a)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?c().createElement(Te.G,null):this.context.apiError?c().createElement(ve.Bu,{onRefresh:this.fetchData}):c().createElement(Me,null)}render(){return this.renderContent()}}Re.contextType=j;const Oe=Re,Fe=(e,t="USD")=>{const r=(0,R.cloneDeep)(e);return r.map((e=>{if(e.tiered_rates)for(const r of e.tiered_rates)r.unit=t,r.usage.unit=t;if(e.tag_rates)for(const r of e.tag_rates.tag_values)r.unit=t})),r},Ie=(0,i.ZP)((({intl:e,isProcess:t,isSuccess:r,closeFnc:s,isOpen:n,onMove:i,validators:l,steps:p,current:u=1,context:m,setError:d,setSuccess:h,updateCostModel:g})=>{const y=p.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:u>t})));y[u-1].enableNext=l[u-1](m);const b="OCP"===m.type&&2===u&&!l[u-1](m);return u===p.length&&""!==m.type&&(y[u-1].nextButtonText=e.formatMessage(o.Z.create)),n?c().createElement(a.Wizard,{isOpen:!0,title:e.formatMessage(o.Z.createCostModelTitle),description:e.formatMessage(o.Z.createCostModelDesc),steps:y,startAtStep:u,onNext:i,onBack:i,onGoToStep:i,onClose:s,footer:r||t||b?c().createElement("div",null):null,onSave:()=>{const{currency:e,description:t,distribution:r,distributePlatformUnallocated:a,distributeWorkerUnallocated:s,isDiscount:o,markup:n,name:c,type:i,tiers:l,sources:p}=m;(0,M.Rl)({name:c,source_type:i,currency:e,description:t,distribution_info:{distribution_type:r,platform_cost:a,worker_cost:s},rates:l,markup:{value:`${o?"-":""}${(0,F.E3)(n)}`,unit:"percent"},source_uuids:p.map((e=>e.uuid))}).then((()=>{h(),g()})).catch((e=>d((0,Q.L)(e))))}}):null}));class ke extends c().Component{constructor(){super(...arguments),this.defaultState={apiError:null,checked:{},createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,I.tk)(),dataFetched:!1,dirtyName:!1,description:"",distribution:"cpu",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,filterName:"",isDialogOpen:!1,isDiscount:!1,loading:!1,markup:"0",name:"",page:1,perPage:10,priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},query:{},sources:[],step:1,tiers:[],total:0,type:""},this.state=Object.assign({},this.defaultState)}render(){const{metricsHash:e,intl:t}=this.props,r=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},s=c().createElement(a.Button,{key:"cancel",variant:"link",onClick:r},t.formatMessage(o.Z.createCostModelNoContinue)),n=c().createElement(a.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},this.defaultState))},t.formatMessage(o.Z.createCostModelExitYes));return c().createElement(j.Provider,{value:{apiError:this.state.apiError,checked:this.state.checked,clearQuery:()=>this.setState({query:{}}),createError:this.state.createError,createProcess:this.state.createProcess,createSuccess:this.state.createSuccess,currencyUnits:this.state.currencyUnits,description:this.state.description,dataFetched:this.state.dataFetched,dirtyName:this.state.dirtyName,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,error:this.state.error,filterName:this.state.filterName,fetchSources:(e,t,r,a)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:r,query:a})=>{const s=(t-1)*r,o=r,n=Object.keys(a).reduce(((e,t)=>e?`${e}&${t}=${a[t]}`:`${t}=${a[t]}`),"");return(0,k.s)(`type=${e}&limit=${o}&offset=${s}&${n}`).then((e=>{const t=e.data;return t.data.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),meta:t.meta})))}))})({type:e,query:t,page:r,perPage:a}).then((e=>this.setState({sources:e,query:t,page:r,perPage:a,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),handleDistributionChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distribution:r})},handleDistributePlatformUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributePlatformUnallocated:"true"===r})},handleDistributeWorkerUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributeWorkerUnallocated:"true"===r})},handleMarkupDiscountChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({markup:r})},handleSignChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({isDiscount:"true"===r})},isDiscount:this.state.isDiscount,loading:this.state.loading,metricsHash:e,onClose:()=>this.setState(Object.assign({},this.defaultState),this.props.closeWizard),onCurrencyChange:e=>this.setState({currencyUnits:e,tiers:Fe(this.state.tiers,e)}),onDescChange:e=>this.setState({description:e}),onFilterChange:e=>this.setState({filterName:e}),onNameChange:e=>this.setState({name:e,dirtyName:!0}),onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),onSourceSelect:(e,t)=>{if(-1===e){const e=this.state.sources.map((e=>({[e.uuid]:{selected:t,meta:e}}))),r=Object.assign(Object.assign({},this.state.checked),e);return this.setState({checked:r})}const r=Object.assign(Object.assign({},this.state.checked),{[this.state.sources[e].uuid]:{selected:t,meta:this.state.sources[e]}});return this.setState({checked:r})},onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),page:this.state.page,priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},markup:this.state.markup,name:this.state.name,perPage:this.state.perPage,query:this.state.query,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),sources:this.state.sources,step:this.state.step,submitTiers:e=>{this.setState({tiers:e})},tiers:this.state.tiers,total:this.state.total,type:this.state.type}},c().createElement(Ie,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},this.defaultState),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(q,null)}],Azure:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(q,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(J,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Oe,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(fe,null)}],AWS:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(q,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(J,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Oe,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(fe,null)}],GCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(q,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(J,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Oe,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(fe,null)}],OCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(q,null)},{id:2,name:t.formatMessage(o.Z.priceList),component:c().createElement(me,null)},{id:3,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(J,null)},{id:4,name:t.formatMessage(o.Z.costDistribution),component:c().createElement(L,null)},{id:5,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Oe,null)},{id:6,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(fe,null)}]}[this.state.type],current:this.state.step,validators:_[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,currency:this.state.currencyUnits,description:this.state.description,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,markup:`${this.state.isDiscount?"-":""}${this.state.markup}`,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:Object.keys(this.state.checked).map((e=>this.state.checked[e].meta))}}),c().createElement(a.Modal,{"aria-label":t.formatMessage(o.Z.createCostModelExit),isOpen:this.state.isDialogOpen,header:c().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},c().createElement(C.LP,{color:"orange"})," ",t.formatMessage(o.Z.createCostModelExit)),onClose:r,actions:[n,s],variant:"small"},t.formatMessage(o.Z.createCostModelConfirmMsg)))}}const De=(0,l.connect)((0,O.X1)((e=>({metricsHash:m.qw.metrics(e)}))),{fetch:u.F0.fetchCostModels})((0,i.ZP)(ke)),je=(0,i.ZP)((0,l.connect)((e=>({canWrite:d.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(u.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(u.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,r)=>{const{intl:s=g.N}=r,{canWrite:n}=e,{openWizard:i}=t;return{isDisabled:!n,tooltip:s.formatMessage(o.Z.costModelsReadOnly),children:c().createElement(a.Button,{isDisabled:!n,onClick:i},s.formatMessage(o.Z.costModelsWizardCreateCostModel))}}))(Z.j)),Ae=(0,l.connect)((e=>({isOpen:u.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(u.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(u.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:r}=e,{openWizard:a,closeWizard:s}=t;return{isOpen:r,openWizard:a,closeWizard:s}}))(De);function Ve({head:e,body:t,sources:r}){return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,e))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,t),c().createElement(a.TextList,{component:a.TextListVariants.ol},r.map((e=>c().createElement(a.TextListItem,{key:e},e)))))))}const xe=(0,i.ZP)((0,l.connect)((e=>({isOpen:u.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:u.E6.deleteProcessing(e),deleteError:u.E6.deleteError(e),dialogData:u.E6.dialogData(e)})),(e=>({closeDialog:()=>e(u.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>u.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,r)=>{const{intl:s=g.N}=r,n=(i=e.isLoading,l=e.isOpen,p=e.deleteError,l?i?"loading":p?"failure":"open":"close");var i,l,p;const u=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,m=u?u.name:"",d=u?u.sources.map((e=>e.name)):[],h=u?u.uuid:"",y=function({status:e,deleteText:t,deleteAction:r,cancelText:s,cancelAction:o,sourcesNo:n}){let i=[];return"loading"===e&&(i=[c().createElement(a.Button,{key:"pending_delete",variant:a.ButtonVariant.danger,isDisabled:!0},t),c().createElement(a.Button,{key:"pending_cancel",variant:a.ButtonVariant.link,isDisabled:!0},s)]),["failure","open"].includes(e)&&n>0&&(i=[c().createElement(a.Button,{key:"sources_cancel",variant:a.ButtonVariant.link,onClick:o},s)]),["failure","open"].includes(e)&&0===n&&(i=[c().createElement(a.Button,{key:"delete",variant:a.ButtonVariant.danger,onClick:r},t),c().createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:o},s)]),i}({status:n,deleteText:s.formatMessage(o.Z.costModelsDelete),deleteAction:()=>t.deleteCostModel(h),cancelText:s.formatMessage(o.Z.cancel),cancelAction:t.closeDialog,sourcesNo:d.length}),b=function({status:e,sources:t,error:r,cannotDeleteTitle:s,cannotDeleteBody:o,canDeleteBody:n}){return"close"!==e&&t.length>0?c().createElement(Ve,{head:s,body:o,sources:t}):"close"!==e&&0===t.length?c().createElement(a.Stack,{hasGutter:!0},"failure"===e?c().createElement(a.StackItem,null,c().createElement(a.Alert,{variant:a.AlertVariant.danger,title:r})):null,c().createElement(a.StackItem,null,n)):void 0}({status:n,sources:d,error:e.deleteError,cannotDeleteTitle:s.formatMessage(o.Z.costModelsDeleteSource),cannotDeleteBody:s.formatMessage(o.Z.costModelsCanNotDelete,{name:m}),canDeleteBody:s.formatMessage(o.Z.costModelsCanDelete,{name:m})});return{actions:y,isOpen:"close"!==n,variant:a.ModalVariant.small,"aria-label":s.formatMessage(o.Z.costModelsDelete),title:s.formatMessage(o.Z.costModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:b}}))(a.Modal)),ze=xe;var Le=r(15984),We=r(39836),we=r(91919);const Ne=function(e){return c().createElement(a.EmptyState,{className:"pf-m-redhat-font"},c().createElement(a.EmptyStateIcon,{icon:e.icon}),c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.title),c().createElement(a.EmptyStateBody,null,e.description),e.actions?e.actions:null)},Be=(0,i.ZP)((({intl:e=g.N})=>c().createElement(Ne,{title:e.formatMessage(o.Z.costModelsEmptyState),description:e.formatMessage(o.Z.costModelsEmptyStateDesc),icon:te.wl,actions:c().createElement(c().Fragment,null,c().createElement(je,null),c().createElement("br",null),c().createElement("br",null),c().createElement("a",{href:e.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.costModelsEmptyStateLearnMore)))})));var Ue=r(68025);class _e extends c().Component{constructor(){super(...arguments),this.defaultState={dialogSource:null,activeSortDirection:"asc",activeSortIndex:0},this.state=Object.assign({},this.defaultState)}render(){const{intl:e=g.N,canWrite:t,costData:r,openDeleteDialog:s,query:n,router:i,stateName:l}=this.props,p=function(e,t){let r=null;return"loading"===e&&(r=c().createElement(Te.G,null)),"empty"===e&&(r=c().createElement(Be,null)),"no-match"===e&&(r=c().createElement(re.c,null)),"failure"===e&&(r=c().createElement(Le.Z,null)),null!==r?[{heightAuto:!0,cells:[{props:{colSpan:5},title:c().createElement(a.Bullseye,null," ",r," ")}]}]:t.map((e=>{const t=g.N.formatDate(e.updated_timestamp,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"short",timeZone:"UTC",timeZoneName:"short",year:"numeric"});return{cells:[{title:c().createElement(We.Link,{to:`${(0,Ue.dI)(we._.costModel.basePath)}/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),t],data:{costModel:e}}}))}(l,r),u=[Object.assign({title:e.formatMessage(o.Z.names,{count:1}),data:{orderName:"name"}},p.length&&{transforms:[y.sortable]}),{title:e.formatMessage(o.Z.description)},Object.assign({title:e.formatMessage(o.Z.costModelsSourceType),data:{orderName:"source_type"}},p.length&&{transforms:[y.sortable]}),{title:e.formatMessage(o.Z.costModelsAssignedSources)},Object.assign({title:e.formatMessage(o.Z.costModelsLastChange),data:{orderName:"updated_timestamp"}},p.length&&{transforms:[y.sortable]}),{title:"",props:{"aria-label":e.formatMessage(o.Z.costModelsActions)}}],m=function(e,t,r){return"success"!==e?[]:r.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(l,t,[{title:e.formatMessage(o.Z.delete),tooltip:e.formatMessage(o.Z.costModelsReadOnly),onClick:(e,t,r)=>{s(r.data)}}]),d=function(e,t,r){return function(a,s,o){const n=e[s]&&e[s].data?e[s].data.orderName:null;null!==n&&(o!==y.SortByDirection.asc?r.navigate(f(Object.assign(Object.assign({},t),{ordering:`-${n}`}))):r.navigate(f(Object.assign(Object.assign({},t),{ordering:n}))))}}(u,n,i),h=e=>({sortBy:{index:this.state.activeSortIndex,direction:this.state.activeSortDirection,defaultDirection:"asc"},onSort:(e,t,r)=>{this.setState(Object.assign(Object.assign({},this.state),{activeSortDirection:r,activeSortIndex:t})),d(e,t,r)},columnIndex:e});return c().createElement(y.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsTableAriaLabel),gridBreakPoint:y.TableGridBreakpoint.grid2xl,variant:y.TableVariant.compact},c().createElement(y.Thead,null,c().createElement(y.Tr,null,u.map(((e,t)=>c().createElement(y.Th,{key:t,sort:e.transforms?h(t):void 0},e.title))),c().createElement(y.Th,null))),c().createElement(y.Tbody,null,p.map(((e,t)=>c().createElement(y.Tr,{key:t},e.cells.map(((e,t)=>c().createElement(y.Td,{key:t},e.title?e.title:e))),c().createElement(y.Td,{isActionCell:!0},c().createElement(y.ActionsColumn,{items:m.map((r=>Object.assign(Object.assign({},r),{onClick:a=>r.onClick(a,t,e,null)})))})))))))}}const Ke=(0,O.X1)((e=>({canWrite:d.c5.isCostModelWritePermission(e),query:u.E6.query(e),costData:u.E6.costModels(e),stateName:u.E6.stateName(e)}))),Ge=(0,l.connect)(Ke,(e=>{const t=u.F0.setCostModelDialog;return{openDeleteDialog:r=>e(t({name:"deleteCostModel",isOpen:!0,meta:r}))}}))(_e),qe=(0,i.ZP)((0,h.E)(Ge)),He=({placeholder:e="",value:t,onChange:r,onKeyPress:s})=>c().createElement(a.InputGroup,null,c().createElement(a.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==t&&s(e)}}),c().createElement(a.InputGroupText,{style:{borderLeft:"0"}},c().createElement(Pe.W1,null))),$e=(e,t,r,a)=>s=>{if("Enter"===s.key&&""!==a.value){const s=a.value;e.navigate(f(Object.assign(Object.assign({},r),{[t]:r[t]?`${r[t]},${s}`:s}))),a.setValue("")}},Xe=(e,t,r)=>(a,s)=>{const o=r[t]?r[t].split(",").filter((e=>e!==s)):null;e.navigate(f(Object.assign(Object.assign({},r),{[t]:null===o||0===o.length?null:o.join(",")})))},Je=(e,t,r)=>()=>{e.navigate(f(Object.assign(Object.assign({},t),{[r]:null})))},Qe=(0,l.connect)((e=>({filterType:u.E6.currentFilterType(e),query:u.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=g.N,router:s}=r,{filterType:n,query:c}=e,i=c.description?c.description.split(","):[];return{categoryName:a.formatMessage(o.Z.description),chips:i,deleteChip:Xe(s,"description",Object.assign(Object.assign({},b),c)),deleteChipGroup:Je(s,Object.assign(Object.assign({},b),c),"description"),filterType:n,intl:a,query:c,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:i,query:l,router:p})=>{const[u,m]=c().useState(""),d="description"===r?c().createElement(He,{placeholder:s.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:$e(p,"description",Object.assign(Object.assign({},b),l),{value:u,setValue:m})}):null;return c().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:i},d)})),Ye=(0,i.ZP)((0,h.E)(Qe)),et=(0,l.connect)((e=>({filterType:u.E6.currentFilterType(e),query:u.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=g.N,router:s}=r,{filterType:n,query:c}=e,i=c.name?c.name.split(","):[];return{deleteChip:Xe(s,"name",Object.assign(Object.assign({},b),c)),deleteChipGroup:Je(s,Object.assign(Object.assign({},b),c),"name"),filterType:n,chips:i,categoryName:a.formatMessage(o.Z.names,{count:1}),intl:a,query:c,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:i,query:l,router:p})=>{const[u,m]=c().useState(""),d="name"===r?c().createElement(He,{placeholder:s.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:$e(p,"name",Object.assign(Object.assign({},b),l),{value:u,setValue:m})}):null;return c().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:i},d)})),tt=(0,i.ZP)((0,h.E)(et)),rt=(e,t)=>()=>{t(!1);const r=document.getElementById(e);r&&r.focus()},at=(0,l.connect)((e=>({filterType:u.E6.currentFilterType(e),query:u.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=g.N,router:s}=r,{filterType:n,query:c}=e;return{chips:c.source_type?[c.source_type]:[],categoryName:a.formatMessage(o.Z.costModelsSourceType),deleteChip:Je(s,Object.assign(Object.assign({},b),c),"source_type"),filterType:n,intl:a,query:c,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:i,query:l,router:p})=>{const[u,m]=c().useState(!1),d="source-type-filter",h=e=>p.navigate(f(Object.assign(Object.assign(Object.assign({},b),l),{source_type:e}))),g="sourceType"===r?c().createElement(a.Dropdown,{onSelect:rt(d,m),isOpen:u,toggle:c().createElement(a.DropdownToggle,{onToggle:e=>{m(e)},id:d},s.formatMessage(o.Z.filterByPlaceholder,{value:"source_type"})),dropdownItems:[c().createElement(a.DropdownItem,{key:"aws",component:"button",onClick:()=>h("aws")},s.formatMessage(o.Z.aws)),c().createElement(a.DropdownItem,{key:"azure",component:"button",onClick:()=>h("azure")},s.formatMessage(o.Z.azure)),c().createElement(a.DropdownItem,{key:"ocp",component:"button",onClick:()=>h("ocp")},s.formatMessage(o.Z.openShift))]}):null;return c().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:i},g)})),st=(0,i.ZP)((0,h.E)(at)),ot=(0,h.E)((0,l.connect)((e=>({query:u.E6.query(e)})),void 0,((e,t,r)=>{const{children:a,router:s}=r,{query:o}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>s.navigate(f(Object.assign(Object.assign(Object.assign({},b),o),{description:null,source_type:null,name:null}))),children:a}}))(a.Toolbar)),nt=(0,l.connect)((e=>({filterType:u.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(u.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,r)=>{const{intl:a=g.N}=r,{filterType:s}=e;return{filterType:s,intl:a,updateFilterType:t.updateFilterType}}))((({filterType:e,intl:t,updateFilterType:r})=>{const[s,n]=c().useState(!1),i=[c().createElement(a.SelectOption,{key:"name",value:"name"},t.formatMessage(o.Z.names,{count:1})),c().createElement(a.SelectOption,{key:"description",value:"description"},t.formatMessage(o.Z.description)),c().createElement(a.SelectOption,{key:"sourceType",value:"sourceType"},t.formatMessage(o.Z.costModelsSourceType))];return c().createElement(a.Select,{isOpen:s,onSelect:(e,t)=>{r(t),n(!1)},onToggle:n,selections:e,toggleIcon:c().createElement(Se.k1,null),variant:a.SelectVariant.single},i)})),ct=(0,i.ZP)((0,h.E)(nt)),it=(0,h.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:a}=u.E6.pagination(e);return{count:t,page:r,perPage:a,query:u.E6.query(e)}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:c,query:i}=e;return{isCompact:!0,itemCount:o,page:n,perPage:c,variant:a.PaginationVariant.top,onSetPage:(e,t,r)=>{s.navigate(f(Object.assign(Object.assign(Object.assign({},b),i),{offset:T(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(f(Object.assign(Object.assign(Object.assign({},b),i),{limit:t,offset:0})))}}}))(a.Pagination)),lt=()=>c().createElement(ot,null,c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarGroup,{variant:"filter-group"},c().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:c().createElement(Se.k1,null)},c().createElement(a.ToolbarItem,null,c().createElement(ct,null)),c().createElement(a.ToolbarItem,null,c().createElement(tt,null),c().createElement(Ye,null),c().createElement(st,null))),c().createElement(a.ToolbarItem,null,c().createElement(je,null))),c().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},c().createElement(it,null))));class pt extends c().Component{componentDidMount(){const{getCostModelsData:e,getMetricsData:t,getRbacData:r,search:a}=this.props;e(a),t(),r()}componentDidUpdate(e){const{getCostModelsData:t,search:r}=this.props;e.search!==r&&t(r)}render(){const{intl:e}=this.props;return c().createElement(a.PageSection,{isFilled:!0},c().createElement("div",{style:P.descContainer},e.formatMessage(o.Z.costModelsDesc,{learnMore:c().createElement("a",{href:e.formatMessage(o.Z.docsUsingCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))})),c().createElement(Ae,null),c().createElement(ze,null),c().createElement(lt,null),c().createElement(qe,null),c().createElement(v,null))}}const ut=(0,h.E)((0,i.ZP)((0,l.connect)(((e,t)=>{const r=(0,p.parse)(t.router.location.search,{ignoreQueryPrefix:!0}),a=Object.assign(Object.assign({},r),{tabKey:void 0});return{search:(0,p.stringify)(a,{encode:!1,indices:!1})}}),(e=>({getCostModelsData:t=>u.F0.fetchCostModels(t)(e),getRbacData:()=>d.O9.fetchRbac()(e),getMetricsData:()=>m.Wg.fetchMetrics()(e)})))(pt)));var mt=r(98499);const dt={header:{backgroundColor:E.ZP.var,paddingLeft:mt.ZP.var,paddingRight:mt.ZP.var,paddingTop:mt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},tabs:{backgroundColor:E.ZP.var,paddingTop:mt.ZP.var}};var ht;!function(e){e.costModels="cost-models",e.calculations="calculations",e.tags="tags"}(ht||(ht={}));const gt=e=>{switch(e){case ht.costModels:return"cost-models";case ht.calculations:return"calculations";case ht.tags:return"tags"}};class yt extends c().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:c().createRef(),tab:ht.costModels},{contentRef:c().createRef(),tab:ht.calculations},{contentRef:c().createRef(),tab:ht.tags}],this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${(0,s.IV)(e)}`},this.getTab=(e,t,r)=>c().createElement(a.Tab,{eventKey:r,key:`${gt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:c().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>c().createElement(a.TabContent,{eventKey:t,key:`${gt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{activeTabKey:r}=this.state,a=c().createElement(c().Fragment,null);if(r!==t)return a;const s=gt(e);return s===ht.costModels?c().createElement(ut,null):s===ht.calculations?"calculations":s===ht.tags?"tags":a},this.getTabs=e=>{const{activeTabKey:t}=this.state;return c().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return e===ht.costModels?t.formatMessage(o.Z.costModels):e===ht.calculations?t.formatMessage(o.Z.currencyCalcuations):e===ht.tags?t.formatMessage(o.Z.tagLabels):void 0},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e})}render(){const{intl:e}=this.props,t=this.getAvailableTabs(),r=e.formatMessage(o.Z.settingsTitle);return c().createElement("div",{className:"tabsOverride"},c().createElement("header",{style:dt.header},c().createElement("div",{style:dt.headerContent},c().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},r)),c().createElement("div",{style:dt.tabs},this.getTabs(t))),c().createElement("div",null,this.getTabContent(t)))}}const bt=(0,O.X1)(((e,{router:t})=>{const r=(0,s.mB)(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0;return{query:Object.assign({},r),tabKey:a}})),ft=(0,i.ZP)((0,h.E)((0,l.connect)(bt,{})(yt)))},83819:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),c=r.n(n),i=r(7081),l=r(97027),p=r(74806);class u extends c().Component{render(){const{intl:e,showReload:t=!0}=this.props;return c().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},c().createElement(a.EmptyStateIcon,{icon:i.wl}),c().createElement(a.Title,{headingLevel:"h5",size:"lg"},e.formatMessage(l.Z.noDataStateTitle)),c().createElement(a.EmptyStateBody,null,e.formatMessage(l.Z.noDataStateDesc)),t&&c().createElement(a.Button,{variant:"primary",onClick:()=>window.location.reload()},e.formatMessage(l.Z.noDataStateRefresh)))}}const m=(0,p.ZP)(u),d=({showReload:e,title:t})=>c().createElement(c().Fragment,null,t&&c().createElement(s.Z,null,c().createElement(o.Z,{title:t})),c().createElement(a.PageSection,null,c().createElement(m,{showReload:e})))},2985:(e,t,r)=>{r.d(t,{L:()=>v});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),c=r.n(n),i=r(15265),l=r(7081),p=r(1326),u=r(97027),m=r(74806);const d=r(84735),h=(0,m.ZP)((({className:e,intl:t})=>c().createElement("img",{className:`cost-icon ${e}`,src:d,alt:t.formatMessage(u.Z.costManagement),"aria-hidden":"true"})));var g=r(68025),y=r(98499);const b={iconSpacer:{marginLeft:r(43789).ZP.value},viewSources:{marginTop:y.ZP.value}};class f extends c().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{intl:r}=this.props;return c().createElement("a",{href:r.formatMessage(t),rel:"noreferrer",target:"_blank"},r.formatMessage(e),c().createElement("span",{style:b.iconSpacer},c().createElement(i.LA,null)))},this.getRouteToSources=()=>`${(0,g.IG)()}/settings/sources`}render(){const{intl:e,providerType:t}=this.props;let r,s,o,n=u.Z.noProvidersStateOverviewDesc,i=u.Z.noProvidersStateOverviewTitle;switch(t){case p.l.aws:n=u.Z.noProvidersStateAwsDesc,i=u.Z.noProvidersStateAwsTitle;break;case p.l.azure:n=u.Z.noProvidersStateAzureDesc,i=u.Z.noProvidersStateAzureTitle;break;case p.l.gcp:n=u.Z.noProvidersStateGcpDesc,i=u.Z.noProvidersStateGcpTitle;break;case p.l.ibm:n=u.Z.noProvidersStateIbmDesc,i=u.Z.noProvidersStateIbmTitle;break;case p.l.ocp:n=u.Z.noProvidersStateOcpDesc,r=u.Z.docsAddOcpSources,o=u.Z.noProvidersStateOcpAddSources,i=u.Z.noProvidersStateOcpTitle;break;default:s=h}return c().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},c().createElement(a.EmptyStateIcon,{icon:s||l.wl}),c().createElement(a.Title,{headingLevel:"h1",size:"lg"},e.formatMessage(i)),c().createElement(a.EmptyStateBody,null,e.formatMessage(n)),r&&o?c().createElement("div",{style:b.viewSources},this.getDocLink(o,r)):c().createElement(a.Button,{variant:"primary",component:"a",href:this.getRouteToSources()},e.formatMessage(u.Z.noProvidersStateGetStarted)))}}const T=(0,m.ZP)(f),v=({providerType:e,title:t})=>c().createElement(c().Fragment,null,t&&c().createElement(s.Z,null,c().createElement(o.Z,{title:t})),c().createElement(a.PageSection,null,c().createElement(T,{providerType:e})))},76930:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(97027),s=r(92950),o=r.n(s),n=r(22807);const c=[{label:a.Z.perspectiveValues,value:"aws"}],i=[{label:a.Z.perspectiveValues,value:"aws_ocp"}],l=[{label:a.Z.perspectiveValues,value:"azure"}],p=[{label:a.Z.perspectiveValues,value:"oci"}],u=[{label:a.Z.perspectiveValues,value:"azure_ocp"}],m=[{label:a.Z.perspectiveValues,value:"gcp"}],d=[{label:a.Z.perspectiveValues,value:"gcp_ocp"}],h=[{label:a.Z.perspectiveValues,value:"ibm"}],g=[{label:a.Z.perspectiveValues,value:"ibm_ocp"}],y=[{label:a.Z.perspectiveValues,value:"ocp_cloud"}],b=[{label:a.Z.perspectiveValues,value:"ocp"}],f=[{label:a.Z.perspectiveValues,value:"rhel"}],T=({hasAws:e,hasAwsOcp:t,hasAzure:r,hasAzureOcp:a,hasGcp:s,hasGcpOcp:o,hasIbm:n,hasIbmOcp:y,hasOci:b,isIbmFeatureEnabled:f})=>{const T=[];return e&&T.push(...c),t&&T.push(...i),s&&T.push(...m),o&&T.push(...d),n&&T.push(...h),y&&f&&T.push(...g),r&&T.push(...l),a&&T.push(...u),b&&T.push(...p),T},v=({currentItem:e,hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:c,hasGcpOcp:i,hasIbm:l,hasIbmOcp:p,hasOci:u,hasOcp:m,hasOcpCloud:d,hasRhel:h,isDisabled:g,isIbmFeatureEnabled:v,isInfrastructureTab:E,isRhelTab:S,onSelected:P})=>{const Z=[];return void 0!==E||void 0!==S?E?(d&&Z.push(...y),Z.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:c,hasGcpOcp:i,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))):S?h&&Z.push(...f):m&&Z.push(...b):(m&&Z.push(...b),d&&Z.push(...y),h&&Z.push(...f),Z.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:c,hasGcpOcp:i,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))),o().createElement(n.o,{currentItem:e||Z[0].value,isDisabled:g,onSelected:P,options:Z})}},15817:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Vt});var a=r(90154),s=r(91290),o=r(1326),n=r(39333),c=r(84717),i=r(37610),l=r(91577),p=r(97027),u=r(92950),m=r.n(u),d=r(74806),h=r(77760),g=r(6450),y=r(52471),b=r(83819),f=r(2985),T=r(13764),v=r(76930);const E=({costType:e,currency:t,DashboardWidget:r,selectWidgets:s,widgets:o})=>m().createElement("div",null,m().createElement(a.Grid,{hasGutter:!0},o.map((o=>{const n=s[o];return n.details&&n.details.showHorizontal?m().createElement(a.GridItem,{sm:12,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t}))):m().createElement(a.GridItem,{lg:12,xl:6,xl2:4,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t})))}))));var S=r(39836),P=r(4996),Z=r(16044),C=r(38470),M=r(91919),R=r(1156),O=r(68025),F=r(20513),I=r(17918);const k={infoIcon:{fontSize:I.ZP.value}},D=(0,d.ZP)((({intl:e,report:t,status:r,title:o})=>{const n=t&&t.meta?t.meta.count:0,c=e.formatMessage(p.Z.optimizationsDetails,{count:n});return m().createElement(a.Card,{className:"summary"},m().createElement(a.CardTitle,null,m().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o),m().createElement("span",{style:k.infoIcon},m().createElement(a.Popover,{"aria-label":e.formatMessage(p.Z.optimizationsInfoArialLabel),enableFlip:!0,bodyContent:m().createElement("p",{style:k.infoTitle},e.formatMessage(p.Z.optimizationsInfo))},m().createElement(a.Button,{"aria-label":e.formatMessage(p.Z.optimizationsInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null)))))),m().createElement(a.CardBody,null,r===R.iF.inProgress?m().createElement(m().Fragment,null,m().createElement(a.Skeleton,{width:"16%"}),m().createElement(a.Skeleton,{className:"skeleton",width:F.N.md})):n>0?m().createElement(S.Link,{to:(0,O.dI)(M._.optimizations.path)},c):c))}));var j=r(30564),A=r(91778);class V extends m().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:r}=this.state,s=this.getSelectOptions(),o=s.find((e=>e.value===t));return m().createElement(a.Select,{id:"comparisonSelect",isDisabled:e,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:a.SelectVariant.single},s.map((e=>m().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:r}=this.props;r&&r(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const x=V;var z=r(91707),L=r(32412),W=r(57640);const w={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},N={comparison:{marginBottom:L.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:z.ZP.value},tabItems:{marginTop:W.ZP.value}};var B;!function(e){e.cumulative="cumulative",e.daily="daily"}(B||(B={}));class U extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,currentComparison:B.cumulative},this.state=Object.assign({},this.defaultState),this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,a=r(e);return`${t.viewAllPath}?${(0,n.pm)({group_by:{[a]:"*"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:a,trend:s}=this.props;return a===j.i.dailyTrend?this.getDailyTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.dailyCost?this.getDailyCostChart(e,t,r):a===j.i.trend?this.getTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.usage?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:r}=this.state,a=this.getFormattedUnits(),s=e.formatMessage(t.titleKey,{units:a}),o=[{label:e.formatMessage(t.dailyTitleKey,{units:a}),value:B.daily},{label:s,value:B.cumulative,default:!0}];return m().createElement(x,{currentItem:r||o[0].value,onItemClicked:this.handleComparisonClick,options:o})},this.getDailyCostChart=(e,t,r=!1)=>{const{chartFormatter:a,currentReport:s,previousReport:o,trend:n}=this.props,{currentComparison:c}=this.state,i=n.computedReportItem,l=n.computedReportItemValue,p=c===B.daily,u=p?P.yZ.rolling:n.datumType,d=(0,P.zJ)(s,u,"date",i,l),h=(0,P.zJ)(o,u,"date",i,l),g=this.getForecastData(s,n.computedForecastItem),y=p?C.V3:C.me;return m().createElement(m().Fragment,null,m().createElement("div",{style:N.comparisonContainer},m().createElement("div",{style:N.comparison},this.getChartComparison())),m().createElement(y,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,forecastConeData:g.forecastConeData,forecastData:g.forecastData,formatOptions:n.formatOptions,formatter:a||A.xG,height:t,previousCostData:h,showForecast:void 0!==n.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:c,previousReport:i,trend:l}=this.props,{currentComparison:p}=this.state,u=l.computedReportItem,d=l.computedReportItemValue,h=p===B.daily,g=h?P.yZ.rolling:l.datumType,y=(0,P.zJ)(n,g,"date",u,d),b=(0,P.zJ)(i,g,"date",u,d),{forecastData:f,forecastConeData:T}=this.getForecastData(n,l.computedForecastItem),v=h?C.Y0:C.Nd;return m().createElement(m().Fragment,null,m().createElement("div",{style:N.comparisonContainer},m().createElement("div",{style:N.comparison},this.getChartComparison())),m().createElement(v,{adjustContainerHeight:r,chartName:o,containerHeight:e,currentData:y,forecastData:f,forecastConeData:T,formatOptions:l.formatOptions,formatter:s||A.bM,height:t,previousData:b,showForecast:void 0!==l.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:c.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:a}=this.props,{currentComparison:s}=this.state,o=s===B.daily?P.yZ.rolling:a.datumType,n=(0,Z.x1)(r,e,t,o);return{forecastData:(0,Z.nB)(n,o,t),forecastConeData:(0,Z.Qw)(n,o,t)}},this.getTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:c,intl:i,previousReport:l,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,h=i.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),g=(0,P.zJ)(n,p.datumType,"date",u,d),y=(0,P.zJ)(l,p.datumType,"date",u,d),{forecastData:b,forecastConeData:f}=this.getForecastData(n,p.computedForecastItem);return m().createElement(C.Nd,{adjustContainerHeight:r,containerHeight:e,chartName:o,currentData:g,forecastData:b,forecastConeData:f,formatOptions:p.formatOptions,formatter:s||A.bM,height:t,previousData:y,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:c.showUsageLegendLabel,title:h,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:r,chartName:a,currentReport:s,intl:o,previousReport:n,trend:c}=this.props,i=o.formatMessage(c.titleKey,{units:this.getFormattedUnits()}),l=(0,P.zJ)(s,c.datumType,"date","request"),p=(0,P.zJ)(n,c.datumType,"date","request"),u=(0,P.zJ)(s,c.datumType,"date","usage"),d=(0,P.zJ)(n,c.datumType,"date","usage");return m().createElement(C.I0,{adjustContainerHeight:t,chartName:a,containerHeight:w.containerUsageHeight,currentRequestData:l,currentUsageData:u,formatOptions:c.formatOptions,formatter:r||A.bM,height:e,previousRequestData:p,previousUsageData:d,title:i})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:a,trend:s}=this.props,o=s.computedReportItem||"cost",n=s.computedReportItemValue||"total";return m().createElement(C.rN,{chartType:e,computedReportItem:o,computedReportItemValue:n,costLabel:this.getDetailsLabel(r.costKey),formatOptions:r.formatOptions,report:t,reportType:a,requestLabel:this.getDetailsLabel(r.requestKey),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:this.getUnits(),usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?m().createElement(S.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByAll,{value:a,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,r=t.computedReportItem||"cost",a=this.getUnits();return r===P.LI.usage?e.formatMessage(p.Z.units,{units:(0,A.ZV)(a)}):e.formatMessage(p.Z.currencyUnits,{units:a})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=w.containerAltHeight,chartAltHeight:t=w.chartAltHeight,currentReportFetchStatus:r,details:a}=this.props;return m().createElement(C.j0,{detailsLink:this.getDetailsLink(),status:r,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,a.adjustContainerHeight))},this.getOptimizationsSummary=()=>{const{rosReportFetchStatus:e,rosReport:t,titleKey:r}=this.props;return m().createElement(D,{status:e,report:t,title:r})},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:s,tabsReportFetchStatus:o}=this.props,n=r(e);return m().createElement(a.Tab,{eventKey:t,key:`${r(e)}-tab`,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))},m().createElement("div",{style:N.tabItems},m().createElement(C.mZ,{idKey:n,key:`${n}-items`,report:s,status:o},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,getIdKeyForTab:a,tabsReport:s,topItems:o,trend:n}=this.props,{activeTabKey:c}=this.state,i=a(e),l=a(r[c]),p=n.computedReportItem||"cost",u=n.computedReportItemValue||"total";let d;const h=s&&s.meta&&s.meta.total;return p===P.LI.usage?h&&s.meta.total.usage&&(d=s.meta.total.usage.value):h&&s.meta.total[p]&&s.meta.total[p][u]&&(d=s.meta.total[p][u].value),l===i?m().createElement(C.EH,{formatOptions:o?o.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return m().createElement(a.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByTop,{value:a,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,a=r.computedReportItem||"cost",s=r.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const o=e&&e.meta&&e.meta.total;return a===P.LI.usage?o&&e.meta.total.usage?e.meta.total.usage.units:void 0:o&&e.meta.total[a]&&e.meta.total[a][s]?e.meta.total[a][s].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return m().createElement(C.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(w.containerTrendHeight,w.chartHeight,r.adjustContainerHeight),e&&m().createElement("div",{style:N.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:a,updateTab:s}=this.props;s(a,r[t]),this.setState({activeTabKey:t})},this.updateForecasts=()=>{const{fetchForecasts:e,widgetId:t}=this.props;e&&e(t)},this.updateReports=()=>{const{fetchReports:e,widgetId:t}=this.props;e&&e(t)},this.updateRosReports=()=>{const{fetchRosReports:e,isRosFeatureEnabled:t,widgetId:r}=this.props;e&&t&&e(r)}}componentDidMount(){const{availableTabs:e,details:t,id:r,trend:a,updateTab:s}=this.props;e&&s(r,e[0]),a&&void 0!==a.computedForecastItem&&this.updateForecasts(),t.showOptimizations||this.updateReports(),t.showOptimizations&&this.updateRosReports()}componentDidUpdate(e){const{costType:t,currency:r,trend:a}=this.props;e.costType===t&&e.currency===r||(this.updateReports(),a&&void 0!==a.computedForecastItem&&this.updateForecasts())}render(){const{details:e,isRosFeatureEnabled:t}=this.props;return e.showOptimizations?t?this.getOptimizationsSummary():null:e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const _=U;var K=r(81628),G=r(79277),q=r(15920),H=r(15829);const $=e=>{switch(e){case K.IC.services:return"service";case K.IC.accounts:return"account";case K.IC.regions:return"region"}},X=(0,R.X1)(((e,{widgetId:t})=>{const r=K.Cv.selectWidget(e,t),a=K.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:$}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),J={fetchForecasts:K.Kf.v4,fetchReports:K.Kf.a4,updateTab:K.Kf.as},Q=(0,d.ZP)((0,h.connect)(X,J)(_)),Y=(0,R.X1)(((e,t)=>({DashboardWidget:Q,selectWidgets:K.Cv.selectWidgets(e),widgets:K.Cv.selectCurrentWidgets(e)}))),ee=(0,h.connect)(Y,{})(E);var te=r(25566);const re=e=>{switch(e){case te.e1.services:return"service";case te.e1.accounts:return"account";case te.e1.regions:return"region"}},ae=(0,R.X1)(((e,{widgetId:t})=>{const r=te.Hc.selectWidget(e,t),a=te.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:re}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),se={fetchForecasts:te.NA.v4,fetchReports:te.NA.a4,updateTab:te.NA.as},oe=(0,d.ZP)((0,h.connect)(ae,se)(_)),ne=(0,R.X1)(((e,t)=>({DashboardWidget:oe,selectWidgets:te.Hc.selectWidgets(e),widgets:te.Hc.selectCurrentWidgets(e)}))),ce=(0,h.connect)(ne,{})(E);var ie=r(25976);const le=e=>{switch(e){case ie.vY.service_names:return"service_name";case ie.vY.subscription_guids:return"subscription_guid";case ie.vY.resource_locations:return"resource_location"}},pe=(0,R.X1)(((e,{widgetId:t})=>{const r=ie.rj.selectWidget(e,t),a=ie.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:le}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),ue={fetchForecasts:ie.oc.v4,fetchReports:ie.oc.a4,updateTab:ie.oc.as},me=(0,d.ZP)((0,h.connect)(pe,ue)(_)),de=(0,R.X1)(((e,t)=>({DashboardWidget:me,selectWidgets:ie.rj.selectWidgets(e),widgets:ie.rj.selectCurrentWidgets(e)}))),he=(0,h.connect)(de,{})(E);var ge=r(76764);const ye=e=>{switch(e){case ge.Vp.service_names:return"service_name";case ge.Vp.subscription_guids:return"subscription_guid";case ge.Vp.resource_locations:return"resource_location"}},be=(0,R.X1)(((e,{widgetId:t})=>{const r=ge.MW.selectWidget(e,t),a=ge.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:ye}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),fe={fetchForecasts:ge._V.v4,fetchReports:ge._V.a4,updateTab:ge._V.as},Te=(0,d.ZP)((0,h.connect)(be,fe)(_)),ve=(0,R.X1)(((e,t)=>({DashboardWidget:Te,selectWidgets:ge.MW.selectWidgets(e),widgets:ge.MW.selectCurrentWidgets(e)}))),Ee=(0,h.connect)(ve,{})(E);var Se=r(67776);const Pe=e=>{switch(e){case Se.BP.gcpProjects:return"gcp_project";case Se.BP.regions:return"region";case Se.BP.services:return"service"}},Ze=(0,R.X1)(((e,{widgetId:t})=>{const r=Se.oS.selectWidget(e,t),a=Se.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Pe}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Ce={fetchForecasts:Se.n5.v4,fetchReports:Se.n5.a4,updateTab:Se.n5.as},Me=(0,d.ZP)((0,h.connect)(Ze,Ce)(_)),Re=(0,R.X1)(((e,t)=>({DashboardWidget:Me,selectWidgets:Se.oS.selectWidgets(e),widgets:Se.oS.selectCurrentWidgets(e)}))),Oe=(0,h.connect)(Re,{})(E);var Fe=r(99900);const Ie=e=>{switch(e){case Fe.VN.gcpProjects:return"gcp_project";case Fe.VN.regions:return"region";case Fe.VN.services:return"service"}},ke=(0,R.X1)(((e,{widgetId:t})=>{const r=Fe.FF.selectWidget(e,t),a=Fe.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ie}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),De={fetchForecasts:Fe.uM.v4,fetchReports:Fe.uM.a4,updateTab:Fe.uM.as},je=(0,d.ZP)((0,h.connect)(ke,De)(_)),Ae=(0,R.X1)(((e,t)=>({DashboardWidget:je,selectWidgets:Fe.FF.selectWidgets(e),widgets:Fe.FF.selectCurrentWidgets(e)}))),Ve=(0,h.connect)(Ae,{})(E);var xe=r(48788);const ze=e=>{switch(e){case xe.DA.services:return"service";case xe.DA.projects:return"project";case xe.DA.regions:return"region"}},Le=(0,R.X1)(((e,{widgetId:t})=>{const r=xe.Pi.selectWidget(e,t),a=xe.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:ze}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),We={fetchForecasts:xe.lj.v4,fetchReports:xe.lj.a4,updateTab:xe.lj.as},we=(0,d.ZP)((0,h.connect)(Le,We)(_)),Ne=(0,R.X1)(((e,t)=>({DashboardWidget:we,selectWidgets:xe.Pi.selectWidgets(e),widgets:xe.Pi.selectCurrentWidgets(e)}))),Be=(0,h.connect)(Ne,{})(E);var Ue=r(17568);const _e=e=>{switch(e){case Ue.Qr.accounts:return"account";case Ue.Qr.regions:return"region";case Ue.Qr.services:return"service"}},Ke=(0,R.X1)(((e,{widgetId:t})=>{const r=Ue.qN.selectWidget(e,t),a=Ue.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:_e}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Ge={fetchForecasts:Ue.BV.v4,fetchReports:Ue.BV.a4,updateTab:Ue.BV.as},qe=(0,d.ZP)((0,h.connect)(Ke,Ge)(_)),He=(0,R.X1)(((e,t)=>({DashboardWidget:qe,selectWidgets:Ue.qN.selectWidgets(e),widgets:Ue.qN.selectCurrentWidgets(e)}))),$e=(0,h.connect)(He,{})(E);var Xe=r(60329),Je=r(22369),Qe=r(2136);const Ye=e=>{switch(e){case Xe.V7.clusters:return"cluster";case Xe.V7.nodes:return"node";case Xe.V7.projects:return"project"}},et=(0,R.X1)(((e,{widgetId:t})=>{const r=Xe.nH.selectWidget(e,t),a=Xe.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ye,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)}),r.rosPathsType&&r.rosType&&{isRosFeatureEnabled:Je.iJ.selectIsRosFeatureEnabled(e),rosReport:Qe.R0.selectRos(e,r.rosPathsType,r.rosType,a.optimizations),rosReportError:Qe.R0.selectRosError(e,r.rosPathsType,r.rosType,a.optimizations),rosReportFetchStatus:Qe.R0.selectRosFetchStatus(e,r.rosPathsType,r.rosType,a.optimizations)})})),tt={fetchForecasts:Xe.U6.v4,fetchReports:Xe.U6.a4,fetchRosReports:Xe.U6.XE,updateTab:Xe.U6.as},rt=(0,d.ZP)((0,h.connect)(et,tt)(_)),at=(0,R.X1)(((e,t)=>({DashboardWidget:rt,selectWidgets:Xe.nH.selectWidgets(e),widgets:Xe.nH.selectCurrentWidgets(e)}))),st=(0,h.connect)(at,{})(E);var ot=r(67522);const nt=e=>{switch(e){case ot.is.clusters:return"cluster";case ot.is.nodes:return"node";case ot.is.projects:return"project"}},ct=(0,R.X1)(((e,{widgetId:t})=>{const r=ot.fO.selectWidget(e,t),a=ot.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:nt,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),it={fetchForecasts:ot.BV.v4,fetchReports:ot.BV.a4,updateTab:ot.BV.as},lt=(0,d.ZP)((0,h.connect)(ct,it)(_)),pt=(0,R.X1)(((e,t)=>({DashboardWidget:lt,selectWidgets:ot.fO.selectWidgets(e),widgets:ot.fO.selectCurrentWidgets(e)}))),ut=(0,h.connect)(pt,{})(E);var mt=r(86482),dt=r(62331),ht=r(46919),gt=r(45087),yt=r(5842),bt=r(96351),ft=r(77392);const Tt=e=>{switch(e){case ft.FY.product_services:return"product_service";case ft.FY.payer_tenant_ids:return"payer_tenant_id";case ft.FY.regions:return"region"}},vt=(0,R.X1)(((e,{widgetId:t})=>{const r=ft.$h.selectWidget(e,t),a=ft.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Tt}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Et={fetchForecasts:ft.eb.v4,fetchReports:ft.eb.a4,updateTab:ft.eb.as},St=(0,d.ZP)((0,h.connect)(vt,Et)(_)),Pt=(0,R.X1)(((e,t)=>({DashboardWidget:St,selectWidgets:ft.$h.selectWidgets(e),widgets:ft.$h.selectCurrentWidgets(e)}))),Zt=(0,h.connect)(Pt,{})(E);var Ct=r(49382),Mt=r(98499);const Rt={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:L.ZP.var},header:{backgroundColor:Ct.ZP.var,padding:Mt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:I.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:Mt.ZP.value},tabs:{backgroundColor:Ct.ZP.var,paddingBottom:Mt.ZP.var,paddingTop:Mt.ZP.var}};var Ot,Ft,It,kt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(Ot||(Ot={})),function(e){e.ocp="ocp"}(Ft||(Ft={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(It||(It={})),function(e){e.rhel="rhel"}(kt||(kt={}));const Dt=e=>{switch(e){case It.infrastructure:return"infrastructure";case It.ocp:return"ocp";case It.rhel:return"rhel"}};class jt extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFinsightsFeatureEnabled:e}=this.props,t=[],r=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:m().createRef(),tab:It.infrastructure}]:void 0,a=this.isOcpAvailable()?[{contentRef:m().createRef(),tab:It.ocp}]:void 0,s=this.isRhelAvailable()?[{contentRef:m().createRef(),tab:It.rhel}]:void 0;return e?(r&&t.push(...r),s&&t.push(...s),a&&t.push(...a)):(a&&t.push(...a),r&&t.push(...r)),t},this.getCostType=()=>{const{costType:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r}=this.state,a=this.getCurrentTab()===It.infrastructure?t:r;return a===Ot.aws||a===Ot.awsOcp?m().createElement("div",{style:Rt.costType},m().createElement(T.T,{costType:e,onSelect:this.handleCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return m().createElement(g.F,{onSelect:this.handleCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFinsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,r=this.isAwsAvailable(),a=this.isAzureAvailable(),s=this.isOciAvailable(),o=this.isGcpAvailable(),n=this.isIbmAvailable(),c=this.isOcpAvailable(),i=this.isOcpCloudAvailable(),l=this.isRhelAvailable(),p=r||a||s||o||n||i,u=p&&!c&&!l,m=l&&!p&&!c;if(c&&!p&&!l)return It.ocp;if(u)return It.infrastructure;if(m)return It.rhel;if(e)switch(t){case 0:return It.infrastructure;case 1:return It.rhel;case 2:return It.ocp}switch(t){case 0:return It.ocp;case 1:return It.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case Ot.aws:case Ot.awsOcp:case Ot.azure:case Ot.oci:case Ot.azureOcp:case Ot.gcp:case Ot.gcpOcp:case Ot.ibm:case Ot.ibmOcp:case Ot.ocpCloud:return e}return this.isOcpCloudAvailable()?Ot.ocpCloud:this.isAwsAvailable()?Ot.aws:this.isAzureAvailable()?Ot.azure:this.isOciAvailable()?Ot.oci:this.isGcpAvailable()?Ot.gcp:this.isIbmAvailable()?Ot.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:r}=this.props;return t===Ft.ocp?t:(0,bt.mn)(r,e)?Ft.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:r}=this.props;return e===kt.rhel?e:(0,bt.ZC)(r,t)?kt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r,currentRhelPerspective:a}=this.state,s=this.isAwsAvailable(),o=this.isAzureAvailable(),n=this.isGcpAvailable(),c=this.isIbmAvailable(),i=this.isOciAvailable(),l=this.isOcpAvailable(),p=this.isRhelAvailable();if(!(s||o||n||c||i||l||p))return null;let u;const d=this.getCurrentTab();switch(d){case It.infrastructure:u=t;break;case It.ocp:u=r;break;case It.rhel:u=a}return m().createElement(v.X,{currentItem:u,hasAws:s,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:o,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:n,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:c,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:i,hasOcp:l,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:p,isIbmFeatureEnabled:e,isInfrastructureTab:It.infrastructure===d,isRhelTab:It.rhel===d,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return n.IV(e)}(e)}`},this.getTab=(e,t,r)=>m().createElement(a.Tab,{eventKey:r,key:`${Dt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>m().createElement(a.TabContent,{eventKey:t,key:`${Dt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:a,ociProviders:s,costType:o,currency:n,gcpProviders:c,ibmProviders:i,ocpProviders:l,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:h,currentRhelPerspective:g}=this.state,y=m().createElement(m().Fragment,null),f=m().createElement(b.Z,{showReload:!1});if(u!==t)return y;const T=Dt(e);if(T===It.infrastructure)return d===Ot.ocpCloud?(0,mt.Bj)(r,l)||(0,mt.Bj)(a,l)||(0,mt.Bj)(c,l)||(0,mt.Bj)(i,l)?m().createElement($e,{currency:n}):f:d===Ot.aws?(0,mt.g8)(r)||(0,mt.rL)(r)?m().createElement(ee,{costType:o}):f:d===Ot.awsOcp?(0,mt.at)(r,l)||(0,mt.D2)(r,l)?m().createElement(ce,{currency:n}):f:d===Ot.azure?(0,mt.g8)(a)||(0,mt.rL)(a)?m().createElement(he,{currency:n}):f:d===Ot.azureOcp?(0,mt.at)(a,l)||(0,mt.D2)(a,l)?m().createElement(Ee,{currency:n}):f:d===Ot.gcp?(0,mt.g8)(c)||(0,mt.rL)(c)?m().createElement(Oe,{currency:n}):f:d===Ot.gcpOcp?(0,mt.at)(c,l)||(0,mt.D2)(c,l)?m().createElement(Ve,{currency:n}):f:d===Ot.ibm?(0,mt.g8)(i)||(0,mt.rL)(i)?m().createElement(Be,{currency:n}):f:d===Ot.oci&&((0,mt.g8)(s)||(0,mt.rL)(s))?m().createElement(Zt,{currency:n}):f;if(T===It.ocp){const e=(0,mt.g8)(l)||(0,mt.rL)(l);return h===Ft.ocp&&e?m().createElement(st,{currency:n}):f}if(T===It.rhel){const e=(0,mt.g8)(p)||(0,mt.rL)(p);return g===kt.rhel&&e?m().createElement(ut,{currency:n}):f}return y},this.getTabs=e=>{const{activeTabKey:t}=this.state;return m().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFinsightsFeatureEnabled:r}=this.props;return e===It.infrastructure?r?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===It.ocp?t.formatMessage(p.Z.openShift):e===It.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleCostTypeSelected=()=>{const{query:e,router:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(r),{replace:!0})},this.handleCurrencySelected=()=>{const{router:e,query:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(r),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:r}=this.props,a=this.getCurrentTab();this.setState(Object.assign(Object.assign({},a===It.infrastructure&&{currentInfrastructurePerspective:e}),a===It.ocp&&{currentOcpPerspective:e}),(()=>{const a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});r.navigate(this.getRouteForQuery(a),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,bt.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.KT)(r)&&(0,mt.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,bt.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.FW)(r)&&(0,mt.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,bt.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.Sv)(r)&&(0,mt.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,bt.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.tt)(r)&&(0,mt.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,bt.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,bt.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),r=this.isGcpOcpAvailable(),a=this.isIbmOcpAvailable();return e||t||r||a},this.isRhelAvailable=()=>{const{isFinsightsFeatureEnabled:e,rhelProviders:t,userAccess:r}=this.props;return e&&(0,bt.ZC)(r,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:r,userAccess:a}=this.props;e.userAccess===a&&e.providers===t||this.setState({activeTabKey:r,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isFinsightsFeatureEnabled:r,isIbmFeatureEnabled:o,userAccessFetchStatus:n}=this.props,c=!(e!==R.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),i=e===R.iF.inProgress||n===R.iF.inProgress,l=this.getAvailableTabs(),u=t.formatMessage(p.Z.overviewTitle);return i?m().createElement(y.g,{title:u}):c?m().createElement(f.L,{title:u}):m().createElement(m().Fragment,null,m().createElement("header",{style:Rt.header},m().createElement("div",{style:Rt.headerContent},m().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},u,m().createElement("span",{style:Rt.infoIcon},m().createElement(a.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:m().createElement(m().Fragment,null,m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),m().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.openShift)),m().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),m().createElement("br",null),r&&m().createElement(m().Fragment,null,m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.rhel)),m().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),m().createElement("br",null)),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.aws)),m().createElement("p",null,t.formatMessage(p.Z.awsDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.gcp)),m().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),o&&m().createElement(m().Fragment,null,m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.ibm)),m().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.azure)),m().createElement("p",null,t.formatMessage(p.Z.azureDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.oci)),m().createElement("p",null,t.formatMessage(p.Z.ociDesc)))},m().createElement(a.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null))))),m().createElement("div",{style:Rt.headerContentRight},this.getCurrency())),m().createElement("div",{style:Rt.tabs},this.getTabs(l)),m().createElement("div",{style:Rt.headerContent},m().createElement("div",{style:Rt.headerContentLeft},this.getPerspective(),this.getCostType()),m().createElement("div",{style:Rt.date},(0,gt.J4)()))),m().createElement("div",{style:Rt.main},this.getTabContent(l)))}}const At=(0,R.X1)(((e,{router:t})=>{const r=function(e){return n.mB(e)}(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0,s=r.perspective,p=(0,H.zC)(),u=s===Ot.aws||s===Ot.awsOcp?(0,H.uY)():void 0,m=Object.assign({},r),d=(0,c.H)(dt.NT),h=dt.aX.selectProviders(e,o.l.all,d),g=dt.aX.selectProvidersError(e,o.l.all,d),y=dt.aX.selectProvidersFetchStatus(e,o.l.all,d),b=(0,i.T)(ht.QR),f=ht.JO.selectUserAccess(e,l.n.all,b),T=ht.JO.selectUserAccessError(e,l.n.all,b),v=ht.JO.selectUserAccessFetchStatus(e,l.n.all,b);return{awsProviders:(0,mt.BV)(h,o.l.aws),azureProviders:(0,mt.BV)(h,o.l.azure),costType:u,currency:p,gcpProviders:(0,mt.BV)(h,o.l.gcp),ibmProviders:(0,mt.BV)(h,o.l.ibm),isFinsightsFeatureEnabled:Je.iJ.selectIsFinsightsFeatureEnabled(e),isIbmFeatureEnabled:Je.iJ.selectIsIbmFeatureEnabled(e),ociProviders:(0,mt.BV)(h,o.l.oci),ocpProviders:(0,mt.BV)(h,o.l.ocp),providers:h,providersError:g,providersFetchStatus:y,perspective:s,query:m,rhelProviders:(0,mt.BV)(h,o.l.rhel),tabKey:a,userAccess:f,userAccessError:T,userAccessFetchStatus:v,userAccessQueryString:b}})),Vt=(0,d.ZP)((0,yt.E)((0,h.connect)(At,{})(jt)))},86482:(e,t,r)=>{var a;r.d(t,{BV:()=>o,Bj:()=>l,D2:()=>p,JY:()=>u,Mg:()=>d,at:()=>i,g8:()=>m,rL:()=>h}),function(e){e.currentMonthData="current_month_data",e.hasData="has_data",e.previousMonthData="previous_month_data"}(a||(a={}));const s=(e,t)=>{let r;if(e&&e.data)for(const a of e.data)if(a.infrastructure&&a.infrastructure.uuid===t){r=a;break}return r},o=(e,t)=>{if(!e)return e;const r=e.data.filter((e=>e.source_type.toLowerCase()===t)),a=Object.assign(Object.assign({},e.meta),{count:r.length});return Object.assign(Object.assign({},e),{meta:a,data:r})},n=(e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(a[t]){r=!0;break}return r},c=(e,t,r)=>{let a=!1;if(e&&e.data)for(const o of e.data){const e=s(t,o.uuid);if(e&&e[r]){a=!0;break}}return a},i=(e,t)=>c(e,t,a.currentMonthData),l=(e,t)=>c(e,t,a.hasData),p=(e,t)=>c(e,t,a.previousMonthData),u=(e,t)=>((e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(s(t,a.uuid)){r=!0;break}return r})(e,t),m=e=>n(e,a.currentMonthData),d=e=>n(e,a.hasData),h=e=>n(e,a.previousMonthData)},96351:(e,t,r)=>{r.d(t,{Es:()=>y,F4:()=>E,FE:()=>h,FW:()=>i,HC:()=>u,KT:()=>n,Rt:()=>b,Sv:()=>d,Xd:()=>p,ZC:()=>v,hn:()=>l,mn:()=>f,n9:()=>c,ot:()=>m,tt:()=>g,yY:()=>T});var a=r(91577);const s=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const a=e.data.find((e=>e.type===t));r=a&&a.access}else r=e&&!0===e.data;return r},o=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},n=e=>s(e,a.n.aws),c=(e,t)=>n(e)&&o(t),i=e=>s(e,a.n.azure),l=(e,t)=>i(e)&&o(t),p=e=>s(e,a.n.oci),u=(e,t)=>p(e)&&o(t),m=e=>s(e,a.n.cost_model),d=e=>s(e,a.n.gcp),h=(e,t)=>s(e,a.n.gcp)&&o(t),g=e=>d(e),y=(e,t)=>g(e)&&o(t),b=e=>s(e,a.n.ocp),f=(e,t)=>b(e)&&o(t),T=e=>s(e,a.n.rhel),v=(e,t)=>T(e)&&o(t),E=e=>s(e,a.n.ros)},84735:(e,t,r)=>{e.exports=r.p+"fonts/Cost-icon.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.b572bc922b288d879ba4cde65e16aa08.js.map