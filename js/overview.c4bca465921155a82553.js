"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{84717:(e,t,s)=>{s.d(t,{H:()=>a});var r=s(80129);function a(e){return(0,r.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,s)=>{s.d(t,{T:()=>a});var r=s(80129);function a(e){return(0,r.stringify)(e,{encode:!1,indices:!1})}},6450:(e,t,s)=>{s.d(t,{F:()=>b,m:()=>h});var r=s(76481),a=s(97027),c=s(92950),o=s.n(c),i=s(74806),n=s(77760),l=s(1156),p=s(15829);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:s(32412).ZP.var,whiteSpace:"nowrap"}},h=[{label:a.Z.currencyOptions,value:"AUD"},{label:a.Z.currencyOptions,value:"CAD"},{label:a.Z.currencyOptions,value:"CHF"},{label:a.Z.currencyOptions,value:"CNY"},{label:a.Z.currencyOptions,value:"DKK"},{label:a.Z.currencyOptions,value:"EUR"},{label:a.Z.currencyOptions,value:"GBP"},{label:a.Z.currencyOptions,value:"HKD"},{label:a.Z.currencyOptions,value:"JPY"},{label:a.Z.currencyOptions,value:"NOK"},{label:a.Z.currencyOptions,value:"NZD"},{label:a.Z.currencyOptions,value:"SEK"},{label:a.Z.currencyOptions,value:"SGD"},{label:a.Z.currencyOptions,value:"USD"},{label:a.Z.currencyOptions,value:"ZAR"}];class d extends o().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t}=this.props,{isSelectOpen:s}=this.state,a=this.getSelectOptions(),c=a.find((t=>t.value===e));return o().createElement(r.Select,{className:"currencyOverride",id:"currencySelect",isDisabled:t,isOpen:s,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:c,variant:r.SelectVariant.single},a.map((e=>o().createElement(r.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return h.map((s=>{t.push({toString:()=>e.formatMessage(s.label,{units:s.value}),value:s.value})})),t},this.handleSelect=(e,t)=>{const{onSelect:s}=this.props;(0,p.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{s&&s(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return(0,p.eu)(),o().createElement("div",{style:u.currencySelector},o().createElement(r.Title,{headingLevel:"h2",size:"md",style:u.currencyLabel},e.formatMessage(a.Z.currency)),this.getSelect())}}const g=(0,l.X1)((()=>({}))),m=(0,n.connect)(g,{})(d),b=(0,i.ZP)(m)},83819:(e,t,s)=>{s.d(t,{Z:()=>d});var r=s(76481),a=s(89376),c=s(39173),o=s(92950),i=s.n(o),n=s(7081),l=s(97027),p=s(74806);class u extends i().Component{render(){const{intl:e,showReload:t=!0}=this.props;return i().createElement(r.EmptyState,{variant:r.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(r.EmptyStateIcon,{icon:n.wl}),i().createElement(r.Title,{headingLevel:"h5",size:"lg"},e.formatMessage(l.Z.noDataStateTitle)),i().createElement(r.EmptyStateBody,null,e.formatMessage(l.Z.noDataStateDesc)),t&&i().createElement(r.Button,{variant:"primary",onClick:()=>window.location.reload()},e.formatMessage(l.Z.noDataStateRefresh)))}}const h=(0,p.ZP)(u),d=({showReload:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(a.Z,null,i().createElement(c.Z,{title:t})),i().createElement(r.PageSection,null,i().createElement(h,{showReload:e})))},2985:(e,t,s)=>{s.d(t,{L:()=>T});var r=s(76481),a=s(89376),c=s(39173),o=s(92950),i=s.n(o),n=s(15265),l=s(7081),p=s(1326),u=s(97027),h=s(74806);const d=s(84735),g=(0,h.ZP)((({className:e,intl:t})=>i().createElement("img",{className:`cost-icon ${e}`,src:d,alt:t.formatMessage(u.Z.costManagement),"aria-hidden":"true"})));var m=s(68025),b=s(98499);const v={iconSpacer:{marginLeft:s(43789).ZP.value},viewSources:{marginTop:b.ZP.value}};class y extends i().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{intl:s}=this.props;return i().createElement("a",{href:s.formatMessage(t),rel:"noreferrer",target:"_blank"},s.formatMessage(e),i().createElement("span",{style:v.iconSpacer},i().createElement(n.LA,null)))},this.getRouteToSources=()=>`${(0,m.IG)()}/settings/sources`}render(){const{intl:e,providerType:t}=this.props;let s,a,c,o=u.Z.noProvidersStateOverviewDesc,n=u.Z.noProvidersStateOverviewTitle;switch(t){case p.l.aws:o=u.Z.noProvidersStateAwsDesc,n=u.Z.noProvidersStateAwsTitle;break;case p.l.azure:o=u.Z.noProvidersStateAzureDesc,n=u.Z.noProvidersStateAzureTitle;break;case p.l.gcp:o=u.Z.noProvidersStateGcpDesc,n=u.Z.noProvidersStateGcpTitle;break;case p.l.ibm:o=u.Z.noProvidersStateIbmDesc,n=u.Z.noProvidersStateIbmTitle;break;case p.l.ocp:o=u.Z.noProvidersStateOcpDesc,s=u.Z.docsAddOcpSources,c=u.Z.noProvidersStateOcpAddSources,n=u.Z.noProvidersStateOcpTitle;break;default:a=g}return i().createElement(r.EmptyState,{variant:r.EmptyStateVariant.large,className:"pf-m-redhat-font"},i().createElement(r.EmptyStateIcon,{icon:a||l.wl}),i().createElement(r.Title,{headingLevel:"h1",size:"lg"},e.formatMessage(n)),i().createElement(r.EmptyStateBody,null,e.formatMessage(o)),s&&c?i().createElement("div",{style:v.viewSources},this.getDocLink(c,s)):i().createElement(r.Button,{variant:"primary",component:"a",href:this.getRouteToSources()},e.formatMessage(u.Z.noProvidersStateGetStarted)))}}const f=(0,h.ZP)(y),T=({providerType:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(a.Z,null,i().createElement(c.Z,{title:t})),i().createElement(r.PageSection,null,i().createElement(f,{providerType:e})))},1903:(e,t,s)=>{s.d(t,{X:()=>S});var r=s(97027),a=s(92950),c=s.n(a),o=s(76481),i=s(74806);const n={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:s(32412).ZP.var,whiteSpace:"nowrap"},perspectiveOptionLabel:{marginBottom:6,marginLeft:8,marginTop:6}};class l extends c().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelectOptions=()=>{const{intl:e,options:t}=this.props,s=[];return t.map((t=>{s.push({toString:()=>e.formatMessage(t.label,{value:t.value}),value:t.value})})),s},this.getSelect=()=>{const{currentItem:e,intl:t,isDisabled:s,options:r}=this.props,{isSelectOpen:a}=this.state;if(1===r.length)return c().createElement("div",{style:n.perspectiveOptionLabel},t.formatMessage(r[0].label,{value:r[0].value}));const i=this.getSelectOptions(),l=i.find((t=>t.value===e));return c().createElement(o.Select,{id:"perspectiveSelect",isDisabled:s,isOpen:a,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:l,variant:o.SelectVariant.single},i.map((e=>c().createElement(o.SelectOption,{key:e.value,value:e}))))},this.handleSelect=(e,t)=>{const{onSelected:s}=this.props;s&&s(t.value),this.setState({isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e}=this.props;return c().createElement("div",{style:n.perspectiveSelector},c().createElement(o.Title,{headingLevel:"h3",size:"md",style:n.perspectiveLabel},e.formatMessage(r.Z.perspective)),this.getSelect())}}const p=(0,i.ZP)(l),u=[{label:r.Z.perspectiveValues,value:"aws"}],h=[{label:r.Z.perspectiveValues,value:"aws_ocp"}],d=[{label:r.Z.perspectiveValues,value:"azure"}],g=[{label:r.Z.perspectiveValues,value:"oci"}],m=[{label:r.Z.perspectiveValues,value:"azure_ocp"}],b=[{label:r.Z.perspectiveValues,value:"gcp"}],v=[{label:r.Z.perspectiveValues,value:"gcp_ocp"}],y=[{label:r.Z.perspectiveValues,value:"ibm"}],f=[{label:r.Z.perspectiveValues,value:"ibm_ocp"}],T=[{label:r.Z.perspectiveValues,value:"ocp_cloud"}],R=[{label:r.Z.perspectiveValues,value:"ocp"}],F=[{label:r.Z.perspectiveValues,value:"rhel"}],O=({hasAws:e,hasAwsOcp:t,hasAzure:s,hasAzureOcp:r,hasGcp:a,hasGcpOcp:c,hasIbm:o,hasIbmOcp:i,hasOci:n,isIbmFeatureEnabled:l,isOciFeatureEnabled:p})=>{const T=[];return e&&T.push(...u),t&&T.push(...h),a&&T.push(...b),c&&T.push(...v),o&&T.push(...y),i&&l&&T.push(...f),s&&T.push(...d),r&&T.push(...m),n&&p&&T.push(...g),T},S=({currentItem:e,hasAws:t,hasAwsOcp:s,hasAzure:r,hasAzureOcp:a,hasGcp:o,hasGcpOcp:i,hasIbm:n,hasIbmOcp:l,hasOci:u,hasOcp:h,hasOcpCloud:d,hasRhel:g,isDisabled:m,isIbmFeatureEnabled:b,isInfrastructureTab:v,isOciFeatureEnabled:y,isRhelTab:f,onSelected:S})=>{const E=[];return void 0!==v||void 0!==f?v?(d&&E.push(...T),E.push(...O({hasAws:t,hasAwsOcp:s,hasAzure:r,hasAzureOcp:a,hasGcp:o,hasGcpOcp:i,hasIbm:n,hasIbmOcp:l,hasOci:u,isIbmFeatureEnabled:b,isOciFeatureEnabled:y}))):f?g&&E.push(...F):h&&E.push(...R):(h&&E.push(...R),d&&E.push(...T),g&&E.push(...F),E.push(...O({hasAws:t,hasAwsOcp:s,hasAzure:r,hasAzureOcp:a,hasGcp:o,hasGcpOcp:i,hasIbm:n,hasIbmOcp:l,hasOci:u,isIbmFeatureEnabled:b,isOciFeatureEnabled:y}))),c().createElement(p,{currentItem:e||E[0].value,isDisabled:m,onSelected:S,options:E})}},93925:(e,t,s)=>{s.r(t),s.d(t,{default:()=>zt});var r=s(76481),a=s(91290),c=s(1326),o=s(39333),i=s(84717),n=s(37610),l=s(91577),p=s(97027),u=s(92950),h=s.n(u),d=s(74806),g=s(77760),m=s(6450),b=s(52471),v=s(83819),y=s(2985),f=s(11058),T=s(1903);const R=({costType:e,currency:t,DashboardWidget:s,selectWidgets:a,widgets:c})=>h().createElement("div",null,h().createElement(r.Grid,{hasGutter:!0},c.map((c=>{const o=a[c];return o.details&&o.details.showHorizontal?h().createElement(r.GridItem,{sm:12,key:c},h().createElement(s,Object.assign({widgetId:c},e&&{costType:e},t&&{currency:t}))):h().createElement(r.GridItem,{lg:12,xl:6,xl2:4,key:c},h().createElement(s,Object.assign({widgetId:c},e&&{costType:e},t&&{currency:t})))}))));var F=s(76966),O=s(44439),S=s(39836),E=s(60553),P=s(38470),Z=s(91919),C=s(1156),I=s(68025),A=s(20513);const D=(0,d.ZP)((({intl:e,title:t,status:s})=>{const a=e.formatMessage(p.Z.rosRecommendationsDetails,{count:3});return h().createElement(r.Card,{className:"summary"},h().createElement(r.CardTitle,null,h().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},e.formatMessage(t))),h().createElement(r.CardBody,null,s===C.iF.inProgress?h().createElement(h().Fragment,null,h().createElement(r.Skeleton,{width:"16%"}),h().createElement(r.Skeleton,{className:"skeleton",width:A.N.md})):h().createElement(S.Link,{to:(0,I.dI)(Z._.recommendations.path)},a)))}));var w=s(30564),V=s(91778);class j extends h().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:s}=this.state,a=this.getSelectOptions(),c=a.find((e=>e.value===t));return h().createElement(r.Select,{id:"comparisonSelect",isDisabled:e,isOpen:s,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:c,variant:r.SelectVariant.single},a.map((e=>h().createElement(r.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:s}=this.props;s&&s(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const M=j;var z=s(91707),W=s(32412),L=s(57640);const Q={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},K={comparison:{marginBottom:W.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:z.ZP.value},tabItems:{marginTop:L.ZP.value}};var k;!function(e){e.cumulative="cumulative",e.daily="daily"}(k||(k={}));class N extends h().Component{constructor(){super(...arguments),this.state={activeTabKey:0,currentComparison:k.cumulative},this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:s}=this.props,r=s(e);return`${t.viewAllPath}?${(0,F.pm)({group_by:{[r]:"*"},order_by:{cost:"desc"}})}`},this.getChart=(e,t,s=!1)=>{const{chartType:r,trend:a}=this.props;return r===w.i.dailyTrend?this.getDailyTrendChart(e,t,s,a.showSupplementaryLabel):r===w.i.dailyCost?this.getDailyCostChart(e,t,s):r===w.i.trend?this.getTrendChart(e,t,s,a.showSupplementaryLabel):r===w.i.usage?this.getUsageChart(t,s):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:s}=this.state,r=this.getFormattedUnits(),a=e.formatMessage(t.titleKey,{units:r}),c=[{label:e.formatMessage(t.dailyTitleKey,{units:r}),value:k.daily},{label:a,value:k.cumulative,default:!0}];return h().createElement(M,{currentItem:s||c[0].value,onItemClicked:this.handleComparisonClick,options:c})},this.getDailyCostChart=(e,t,s=!1)=>{const{chartFormatter:r,currentReport:a,previousReport:c,trend:o}=this.props,{currentComparison:i}=this.state,n=o.computedReportItem,l=o.computedReportItemValue,p=i===k.daily,u=p?E.yZ.rolling:o.datumType,d=(0,E.zJ)(a,u,"date",n,l),g=(0,E.zJ)(c,u,"date",n,l),m=this.getForecastData(a,o.computedForecastItem),b=p?P.V3:P.me;return h().createElement(h().Fragment,null,h().createElement("div",{style:K.comparisonContainer},h().createElement("div",{style:K.comparison},this.getChartComparison())),h().createElement(b,{adjustContainerHeight:s,containerHeight:e,currentCostData:d,forecastConeData:m.forecastConeData,forecastData:m.forecastData,formatOptions:o.formatOptions,formatter:r||V.xG,height:t,previousCostData:g,showForecast:void 0!==o.computedForecastItem}))},this.getDailyTrendChart=(e,t,s=!1,r=!1)=>{const{chartFormatter:a,chartName:c,currentReport:o,details:i,previousReport:n,trend:l}=this.props,{currentComparison:p}=this.state,u=l.computedReportItem,d=l.computedReportItemValue,g=p===k.daily,m=g?E.yZ.rolling:l.datumType,b=(0,E.zJ)(o,m,"date",u,d),v=(0,E.zJ)(n,m,"date",u,d),{forecastData:y,forecastConeData:f}=this.getForecastData(o,l.computedForecastItem),T=g?P.Y0:P.Nd;return h().createElement(h().Fragment,null,h().createElement("div",{style:K.comparisonContainer},h().createElement("div",{style:K.comparison},this.getChartComparison())),h().createElement(T,{adjustContainerHeight:s,chartName:c,containerHeight:e,currentData:b,forecastData:y,forecastConeData:f,formatOptions:l.formatOptions,formatter:a||V.bM,height:t,previousData:v,showForecast:void 0!==l.computedForecastItem,showSupplementaryLabel:r,showUsageLegendLabel:i.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:s,trend:r}=this.props,{currentComparison:a}=this.state,c=a===k.daily?E.yZ.rolling:r.datumType;let o,i;if(t){const r=(0,O.cloneDeep)(s);if(r&&(r.data=[]),s&&e&&e.data){const a=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.value:0,o=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.units:"USD",i=e.data.filter((e=>e.values.length)),n=i[i.length-1]?i[i.length-1].date:void 0;if(s&&s.data&&s.data.length>0){const e=new Date(n),t=e.getMonth()+1;for(const a of s.data){const s=new Date(a.date),c=s.getMonth()+1;s>e&&t===c&&r.data.push(a)}if(c===E.yZ.cumulative){const e=s.data[0].values&&s.data[0].values.length>0?s.data[0].values[0].date:void 0,t=1===this.getNumberOfDays(n,e)?n:e;r.data.unshift({date:t,values:[{date:t,cost:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:o}},infrastructure:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:o}},supplementary:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:o}}}]})}}}o=(0,E.nB)(r,c,t),i=(0,E.Qw)(r,c,t)}return{forecastData:o,forecastConeData:i}},this.getNumberOfDays=(e,t)=>{const s=new Date(e),r=new Date(t).getTime()-s.getTime();return Math.round(r/864e5)},this.getTrendChart=(e,t,s=!1,r=!1)=>{const{chartFormatter:a,chartName:c,currentReport:o,details:i,intl:n,previousReport:l,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,g=n.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),m=(0,E.zJ)(o,p.datumType,"date",u,d),b=(0,E.zJ)(l,p.datumType,"date",u,d),{forecastData:v,forecastConeData:y}=this.getForecastData(o,p.computedForecastItem);return h().createElement(P.Nd,{adjustContainerHeight:s,containerHeight:e,chartName:c,currentData:m,forecastData:v,forecastConeData:y,formatOptions:p.formatOptions,formatter:a||V.bM,height:t,previousData:b,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:r,showUsageLegendLabel:i.showUsageLegendLabel,title:g,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:s,chartName:r,currentReport:a,intl:c,previousReport:o,trend:i}=this.props,n=c.formatMessage(i.titleKey,{units:this.getFormattedUnits()}),l=(0,E.zJ)(a,i.datumType,"date","request"),p=(0,E.zJ)(o,i.datumType,"date","request"),u=(0,E.zJ)(a,i.datumType,"date","usage"),d=(0,E.zJ)(o,i.datumType,"date","usage");return h().createElement(P.I0,{adjustContainerHeight:t,chartName:r,containerHeight:Q.containerUsageHeight,currentRequestData:l,currentUsageData:u,formatOptions:i.formatOptions,formatter:s||V.bM,height:e,previousRequestData:p,previousUsageData:d,title:n})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:s,reportType:r,trend:a}=this.props,c=a.computedReportItem||"cost",o=a.computedReportItemValue||"total";return h().createElement(P.rN,{chartType:e,computedReportItem:c,computedReportItemValue:o,costLabel:this.getDetailsLabel(s.costKey),formatOptions:s.formatOptions,report:t,reportType:r,requestLabel:this.getDetailsLabel(s.requestKey),showTooltip:s.showTooltip,showUnits:s.showUnits,showUsageFirst:s.showUsageFirst,units:this.getUnits(),usageFormatOptions:s.usageFormatOptions,usageLabel:this.getDetailsLabel(s.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?h().createElement(S.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:s}=this.props,r=t(e)||"";return s.formatMessage(p.Z.groupByAll,{value:r,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,s=t.computedReportItem||"cost",r=this.getUnits();return s===E.LI.usage?e.formatMessage(p.Z.units,{units:(0,V.ZV)(r)}):e.formatMessage(p.Z.currencyUnits,{units:r})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=Q.containerAltHeight,chartAltHeight:t=Q.chartAltHeight,currentReportFetchStatus:s,details:r}=this.props;return h().createElement(P.j0,{detailsLink:this.getDetailsLink(),status:s,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,r.adjustContainerHeight))},this.getRosSummary=()=>{const{ros:e,rosFetchStatus:t,titleKey:s}=this.props;return h().createElement(D,{status:t,ros:e,title:s})},this.getTab=(e,t)=>{const{getIdKeyForTab:s,tabsReport:a,tabsReportFetchStatus:c}=this.props,o=s(e);return h().createElement(r.Tab,{eventKey:t,key:`${s(e)}-tab`,title:h().createElement(r.TabTitleText,null,this.getTabTitle(e))},h().createElement("div",{style:K.tabItems},h().createElement(P.mZ,{idKey:o,key:`${o}-items`,report:a,status:c},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:s,getIdKeyForTab:r,tabsReport:a,topItems:c,trend:o}=this.props,{activeTabKey:i}=this.state,n=r(e),l=r(s[i]),p=o.computedReportItem||"cost",u=o.computedReportItemValue||"total";let d;const g=a&&a.meta&&a.meta.total;return p===E.LI.usage?g&&a.meta.total.usage&&(d=a.meta.total.usage.value):g&&a.meta.total[p]&&a.meta.total[p][u]&&(d=a.meta.total[p][u].value),l===n?h().createElement(P.EH,{formatOptions:c?c.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return h().createElement(r.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:s}=this.props,r=t(e)||"";return s.formatMessage(p.Z.groupByTop,{value:r,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:s}=this.props,r=s.computedReportItem||"cost",a=s.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const c=e&&e.meta&&e.meta.total;return r===E.LI.usage?c&&e.meta.total.usage?e.meta.total.usage.units:void 0:c&&e.meta.total[r]&&e.meta.total[r][a]?e.meta.total[r][a].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:s}=this.props;return h().createElement(P.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(Q.containerTrendHeight,Q.chartHeight,s.adjustContainerHeight),Boolean(e)&&h().createElement("div",{style:K.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:s,id:r,updateTab:a}=this.props;a(r,s[t]),this.setState({activeTabKey:t})}}componentDidMount(){const{availableTabs:e,details:t,fetchForecasts:s,fetchReports:r,fetchRos:a,id:c,isRosFeatureEnabled:o,trend:i,updateTab:n,widgetId:l}=this.props;e&&n(c,e[0]),i&&void 0!==i.computedForecastItem&&s(l),!t.showRos&&r&&r(l),t.showRos&&a&&o&&a(l)}componentDidUpdate(e){const{costType:t,currency:s,fetchReports:r,fetchForecasts:a,trend:c,widgetId:o}=this.props;e.costType===t&&e.currency===s||(r(o),void 0!==c.computedForecastItem&&a(o))}render(){const{details:e,isRosFeatureEnabled:t}=this.props;return e.showRos?t?this.getRosSummary():null:e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const _=N;var J=s(81628),H=s(78898),B=s(79277),U=s(15920),G=s(22928),X=s(15829);const x=e=>{switch(e){case J.IC.services:return"service";case J.IC.accounts:return"account";case J.IC.regions:return"region"}},$=(0,C.X1)(((e,{widgetId:t})=>{const s=J.Cv.selectWidget(e,t),r=J.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{costType:(0,G.u)(),getIdKeyForTab:x,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Y={fetchForecasts:J.Kf.v4,fetchReports:J.Kf.a4,updateTab:J.Kf.as},q=(0,d.ZP)((0,g.connect)($,Y)(_)),ee=(0,C.X1)(((e,t)=>({DashboardWidget:q,selectWidgets:J.Cv.selectWidgets(e),widgets:J.Cv.selectCurrentWidgets(e)}))),te=(0,g.connect)(ee,{})(R);var se=s(25566);const re=e=>{switch(e){case se.e1.services:return"service";case se.e1.accounts:return"account";case se.e1.regions:return"region"}},ae=(0,C.X1)(((e,{widgetId:t})=>{const s=se.Hc.selectWidget(e,t),r=se.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),H.iJ.selectIsCostTypeFeatureEnabled(e)&&{costType:(0,G.u)()}),{getIdKeyForTab:re,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),ce={fetchForecasts:se.NA.v4,fetchReports:se.NA.a4,updateTab:se.NA.as},oe=(0,d.ZP)((0,g.connect)(ae,ce)(_)),ie=(0,C.X1)(((e,t)=>({DashboardWidget:oe,selectWidgets:se.Hc.selectWidgets(e),widgets:se.Hc.selectCurrentWidgets(e)}))),ne=(0,g.connect)(ie,{})(R);var le=s(25976);const pe=e=>{switch(e){case le.vY.service_names:return"service_name";case le.vY.subscription_guids:return"subscription_guid";case le.vY.resource_locations:return"resource_location"}},ue=(0,C.X1)(((e,{widgetId:t})=>{const s=le.rj.selectWidget(e,t),r=le.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:pe,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),he={fetchForecasts:le.oc.v4,fetchReports:le.oc.a4,updateTab:le.oc.as},de=(0,d.ZP)((0,g.connect)(ue,he)(_)),ge=(0,C.X1)(((e,t)=>({DashboardWidget:de,selectWidgets:le.rj.selectWidgets(e),widgets:le.rj.selectCurrentWidgets(e)}))),me=(0,g.connect)(ge,{})(R);var be=s(76764);const ve=e=>{switch(e){case be.Vp.service_names:return"service_name";case be.Vp.subscription_guids:return"subscription_guid";case be.Vp.resource_locations:return"resource_location"}},ye=(0,C.X1)(((e,{widgetId:t})=>{const s=be.MW.selectWidget(e,t),r=be.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:ve,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),fe={fetchForecasts:be._V.v4,fetchReports:be._V.a4,updateTab:be._V.as},Te=(0,d.ZP)((0,g.connect)(ye,fe)(_)),Re=(0,C.X1)(((e,t)=>({DashboardWidget:Te,selectWidgets:be.MW.selectWidgets(e),widgets:be.MW.selectCurrentWidgets(e)}))),Fe=(0,g.connect)(Re,{})(R);var Oe=s(67776);const Se=e=>{switch(e){case Oe.BP.gcpProjects:return"gcp_project";case Oe.BP.regions:return"region";case Oe.BP.services:return"service"}},Ee=(0,C.X1)(((e,{widgetId:t})=>{const s=Oe.oS.selectWidget(e,t),r=Oe.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:Se,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Pe={fetchForecasts:Oe.n5.v4,fetchReports:Oe.n5.a4,updateTab:Oe.n5.as},Ze=(0,d.ZP)((0,g.connect)(Ee,Pe)(_)),Ce=(0,C.X1)(((e,t)=>({DashboardWidget:Ze,selectWidgets:Oe.oS.selectWidgets(e),widgets:Oe.oS.selectCurrentWidgets(e)}))),Ie=(0,g.connect)(Ce,{})(R);var Ae=s(99900);const De=e=>{switch(e){case Ae.VN.gcpProjects:return"gcp_project";case Ae.VN.regions:return"region";case Ae.VN.services:return"service"}},we=(0,C.X1)(((e,{widgetId:t})=>{const s=Ae.FF.selectWidget(e,t),r=Ae.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:De,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Ve={fetchForecasts:Ae.uM.v4,fetchReports:Ae.uM.a4,updateTab:Ae.uM.as},je=(0,d.ZP)((0,g.connect)(we,Ve)(_)),Me=(0,C.X1)(((e,t)=>({DashboardWidget:je,selectWidgets:Ae.FF.selectWidgets(e),widgets:Ae.FF.selectCurrentWidgets(e)}))),ze=(0,g.connect)(Me,{})(R);var We=s(48788);const Le=e=>{switch(e){case We.DA.services:return"service";case We.DA.projects:return"project";case We.DA.regions:return"region"}},Qe=(0,C.X1)(((e,{widgetId:t})=>{const s=We.Pi.selectWidget(e,t),r=We.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:Le,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Ke={fetchForecasts:We.lj.v4,fetchReports:We.lj.a4,updateTab:We.lj.as},ke=(0,d.ZP)((0,g.connect)(Qe,Ke)(_)),Ne=(0,C.X1)(((e,t)=>({DashboardWidget:ke,selectWidgets:We.Pi.selectWidgets(e),widgets:We.Pi.selectCurrentWidgets(e)}))),_e=(0,g.connect)(Ne,{})(R);var Je=s(17568);const He=e=>{switch(e){case Je.Qr.accounts:return"account";case Je.Qr.regions:return"region";case Je.Qr.services:return"service"}},Be=(0,C.X1)(((e,{widgetId:t})=>{const s=Je.qN.selectWidget(e,t),r=Je.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:He,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Ue={fetchForecasts:Je.BV.v4,fetchReports:Je.BV.a4,updateTab:Je.BV.as},Ge=(0,d.ZP)((0,g.connect)(Be,Ue)(_)),Xe=(0,C.X1)(((e,t)=>({DashboardWidget:Ge,selectWidgets:Je.qN.selectWidgets(e),widgets:Je.qN.selectCurrentWidgets(e)}))),xe=(0,g.connect)(Xe,{})(R);var $e=s(60329),Ye=s(2136);const qe=e=>{switch(e){case $e.V7.clusters:return"cluster";case $e.V7.nodes:return"node";case $e.V7.projects:return"project"}},et=(0,C.X1)(((e,{widgetId:t})=>{const s=$e.nH.selectWidget(e,t),r=$e.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:qe,chartAltHeight:250,containerAltHeight:250,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs}),s.forecastPathsType&&s.forecastType&&{forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),forecastFetchStatus:B.mj.selectForecastFetchStatus(e,s.forecastPathsType,s.forecastType,r.forecast)}),s.reportPathsType&&s.reportType&&{currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),previousReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)}),s.rosPathsType&&s.rosType&&{isRosFeatureEnabled:H.iJ.selectIsRosFeatureEnabled(e),ros:Ye.R0.selectRos(e,s.rosPathsType,s.rosType,r.ros),rosFetchStatus:Ye.R0.selectRosFetchStatus(e,s.rosPathsType,s.rosType,r.ros)})})),tt={fetchForecasts:$e.U6.v4,fetchReports:$e.U6.a4,fetchRos:$e.U6.gh,updateTab:$e.U6.as},st=(0,d.ZP)((0,g.connect)(et,tt)(_)),rt=(0,C.X1)(((e,t)=>({DashboardWidget:st,selectWidgets:$e.nH.selectWidgets(e),widgets:$e.nH.selectCurrentWidgets(e)}))),at=(0,g.connect)(rt,{})(R);var ct=s(67522);const ot=e=>{switch(e){case ct.is.clusters:return"cluster";case ct.is.nodes:return"node";case ct.is.projects:return"project"}},it=(0,C.X1)(((e,{widgetId:t})=>{const s=ct.fO.selectWidget(e,t),r=ct.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:ot,chartAltHeight:250,containerAltHeight:250,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),nt={fetchForecasts:ct.BV.v4,fetchReports:ct.BV.a4,updateTab:ct.BV.as},lt=(0,d.ZP)((0,g.connect)(it,nt)(_)),pt=(0,C.X1)(((e,t)=>({DashboardWidget:lt,selectWidgets:ct.fO.selectWidgets(e),widgets:ct.fO.selectCurrentWidgets(e)}))),ut=(0,g.connect)(pt,{})(R);var ht=s(86482),dt=s(62331),gt=s(46919),mt=s(45087),bt=s(5842),vt=s(96351),yt=s(77392);const ft=e=>{switch(e){case yt.FY.product_services:return"product_service";case yt.FY.payer_tenant_ids:return"payer_tenant_id";case yt.FY.regions:return"region"}},Tt=(0,C.X1)(((e,{widgetId:t})=>{const s=yt.$h.selectWidget(e,t),r=yt.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign({},s),H.iJ.selectIsCurrencyFeatureEnabled(e)&&{currency:(0,X.zC)()}),{getIdKeyForTab:ft,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.current),currentReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.current),forecast:B.mj.selectForecast(e,s.forecastPathsType,s.forecastType,r.forecast),previousReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.previous),tabsReport:U.ZV.selectReport(e,s.reportPathsType,s.reportType,r.tabs),tabsReportFetchStatus:U.ZV.selectReportFetchStatus(e,s.reportPathsType,s.reportType,r.tabs)})})),Rt={fetchForecasts:yt.eb.v4,fetchReports:yt.eb.a4,updateTab:yt.eb.as},Ft=(0,d.ZP)((0,g.connect)(Tt,Rt)(_)),Ot=(0,C.X1)(((e,t)=>({DashboardWidget:Ft,selectWidgets:yt.$h.selectWidgets(e),widgets:yt.$h.selectCurrentWidgets(e)}))),St=(0,g.connect)(Ot,{})(R);var Et=s(49382),Pt=s(17918),Zt=s(98499);const Ct={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:W.ZP.var},header:{backgroundColor:Et.ZP.var,padding:Zt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:Pt.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:Zt.ZP.value},tabs:{backgroundColor:Et.ZP.var,paddingBottom:Zt.ZP.var,paddingTop:Zt.ZP.var}};var It,At,Dt,wt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(It||(It={})),function(e){e.ocp="ocp"}(At||(At={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(Dt||(Dt={})),function(e){e.rhel="rhel"}(wt||(wt={}));const Vt=e=>{switch(e){case Dt.infrastructure:return"infrastructure";case Dt.ocp:return"ocp";case Dt.rhel:return"rhel"}};class jt extends h().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFinsightsFeatureEnabled:e}=this.props,t=[],s=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:h().createRef(),tab:Dt.infrastructure}]:void 0,r=this.isOcpAvailable()?[{contentRef:h().createRef(),tab:Dt.ocp}]:void 0,a=this.isRhelAvailable()?[{contentRef:h().createRef(),tab:Dt.rhel}]:void 0;return e?(s&&t.push(...s),a&&t.push(...a),r&&t.push(...r)):(r&&t.push(...r),s&&t.push(...s)),t},this.getCostType=()=>{const{costType:e,isCostTypeFeatureEnabled:t}=this.props,{currentInfrastructurePerspective:s,currentOcpPerspective:r}=this.state,a=this.getCurrentTab()===Dt.infrastructure?s:r;return a===It.aws||a===It.awsOcp&&t?h().createElement("div",{style:Ct.costType},h().createElement(f.T,{costType:e,onSelect:this.handleCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return h().createElement(m.F,{onSelect:this.handleCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFinsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,s=this.isAwsAvailable(),r=this.isAzureAvailable(),a=this.isOciAvailable(),c=this.isGcpAvailable(),o=this.isIbmAvailable(),i=this.isOcpAvailable(),n=this.isOcpCloudAvailable(),l=this.isRhelAvailable(),p=s||r||a||c||o||n,u=p&&!i&&!l,h=l&&!p&&!i;if(i&&!p&&!l)return Dt.ocp;if(u)return Dt.infrastructure;if(h)return Dt.rhel;if(e)switch(t){case 0:return Dt.infrastructure;case 1:return Dt.rhel;case 2:return Dt.ocp}switch(t){case 0:return Dt.ocp;case 1:return Dt.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case It.aws:case It.awsOcp:case It.azure:case It.oci:case It.azureOcp:case It.gcp:case It.gcpOcp:case It.ibm:case It.ibmOcp:case It.ocpCloud:return e}return this.isOcpCloudAvailable()?It.ocpCloud:this.isAwsAvailable()?It.aws:this.isAzureAvailable()?It.azure:this.isOciAvailable()?It.oci:this.isGcpAvailable()?It.gcp:this.isIbmAvailable()?It.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:s}=this.props;return t===At.ocp?t:(0,vt.mn)(s,e)?At.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:s}=this.props;return e===wt.rhel?e:(0,vt.ZC)(s,t)?wt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e,isOciFeatureEnabled:t}=this.props,{currentInfrastructurePerspective:s,currentOcpPerspective:r,currentRhelPerspective:a}=this.state,c=this.isAwsAvailable(),o=this.isAzureAvailable(),i=this.isGcpAvailable(),n=this.isIbmAvailable(),l=this.isOciAvailable(),p=this.isOcpAvailable(),u=this.isRhelAvailable();if(!(c||o||i||n||l||p||u))return null;let d;const g=this.getCurrentTab();switch(g){case Dt.infrastructure:d=s;break;case Dt.ocp:d=r;break;case Dt.rhel:d=a}return h().createElement(T.X,{currentItem:d,hasAws:c,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:o,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:i,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:n,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:l,hasOcp:p,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:u,isIbmFeatureEnabled:e,isInfrastructureTab:Dt.infrastructure===g,isOciFeatureEnabled:t,isRhelTab:Dt.rhel===g,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return o.IV(e)}(e)}`},this.getTab=(e,t,s)=>h().createElement(r.Tab,{eventKey:s,key:`${Vt(e)}-tab`,tabContentId:`tab-${s}`,tabContentRef:t,title:h().createElement(r.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>h().createElement(r.TabContent,{eventKey:t,key:`${Vt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:s,azureProviders:r,ociProviders:a,costType:c,currency:o,gcpProviders:i,ibmProviders:n,ocpProviders:l,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:g,currentRhelPerspective:m}=this.state,b=h().createElement(h().Fragment,null),y=h().createElement(v.Z,{showReload:!1});if(u!==t)return b;const f=Vt(e);if(f===Dt.infrastructure)return d===It.ocpCloud?(0,ht.Bj)(s,l)||(0,ht.Bj)(r,l)||(0,ht.Bj)(i,l)||(0,ht.Bj)(n,l)?h().createElement(xe,{currency:o}):y:d===It.aws?(0,ht.g8)(s)||(0,ht.rL)(s)?h().createElement(te,{costType:c}):y:d===It.awsOcp?(0,ht.at)(s,l)||(0,ht.D2)(s,l)?h().createElement(ne,{currency:o}):y:d===It.azure?(0,ht.g8)(r)||(0,ht.rL)(r)?h().createElement(me,{currency:o}):y:d===It.azureOcp?(0,ht.at)(r,l)||(0,ht.D2)(r,l)?h().createElement(Fe,{currency:o}):y:d===It.gcp?(0,ht.g8)(i)||(0,ht.rL)(i)?h().createElement(Ie,{currency:o}):y:d===It.gcpOcp?(0,ht.at)(i,l)||(0,ht.D2)(i,l)?h().createElement(ze,{currency:o}):y:d===It.ibm?(0,ht.g8)(n)||(0,ht.rL)(n)?h().createElement(_e,{currency:o}):y:d===It.oci&&((0,ht.g8)(a)||(0,ht.rL)(a))?h().createElement(St,{currency:o}):y;if(f===Dt.ocp){const e=(0,ht.g8)(l)||(0,ht.rL)(l);return g===At.ocp&&e?h().createElement(at,{currency:o}):y}if(f===Dt.rhel){const e=(0,ht.g8)(p)||(0,ht.rL)(p);return m===wt.rhel&&e?h().createElement(ut,{currency:o}):y}return b},this.getTabs=e=>{const{activeTabKey:t}=this.state;return h().createElement(r.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFinsightsFeatureEnabled:s}=this.props;return e===Dt.infrastructure?s?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===Dt.ocp?t.formatMessage(p.Z.openShift):e===Dt.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleCostTypeSelected=()=>{const{query:e,router:t}=this.props,s=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(s),{replace:!0})},this.handleCurrencySelected=()=>{const{router:e,query:t}=this.props,s=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(s),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:s}=this.props,r=this.getCurrentTab();this.setState(Object.assign(Object.assign({},r===Dt.infrastructure&&{currentInfrastructurePerspective:e}),r===Dt.ocp&&{currentOcpPerspective:e}),(()=>{const r=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});s.navigate(this.getRouteForQuery(r),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:s,router:r}=this.props,{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(s))),{tabKey:t});r.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,vt.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:s}=this.props;return(0,vt.KT)(s)&&(0,ht.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,vt.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:s}=this.props;return(0,vt.FW)(s)&&(0,ht.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,vt.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:s}=this.props;return(0,vt.Sv)(s)&&(0,ht.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,vt.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:s}=this.props;return(0,vt.tt)(s)&&(0,ht.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,vt.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,vt.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),s=this.isGcpOcpAvailable(),r=this.isIbmOcpAvailable();return e||t||s||r},this.isRhelAvailable=()=>{const{isFinsightsFeatureEnabled:e,rhelProviders:t,userAccess:s}=this.props;return e&&(0,vt.ZC)(s,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:s,userAccess:r}=this.props;e.userAccess===r&&e.providers===t||this.setState({activeTabKey:s,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isCurrencyFeatureEnabled:s,isFinsightsFeatureEnabled:c,isIbmFeatureEnabled:o,isOciFeatureEnabled:i,userAccessFetchStatus:n}=this.props,l=!(e!==C.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),u=e===C.iF.inProgress||n===C.iF.inProgress,d=this.getAvailableTabs(),g=t.formatMessage(p.Z.overviewTitle);return u?h().createElement(b.g,{title:g}):l?h().createElement(y.L,{title:g}):h().createElement(h().Fragment,null,h().createElement("header",{style:Ct.header},h().createElement("div",{style:Ct.headerContent},h().createElement(r.Title,{headingLevel:"h1",size:r.TitleSizes["2xl"]},g,h().createElement("span",{style:Ct.infoIcon},h().createElement(r.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:h().createElement(h().Fragment,null,h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),h().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),h().createElement("br",null),h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.openShift)),h().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),h().createElement("br",null),c&&h().createElement(h().Fragment,null,h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.rhel)),h().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),h().createElement("br",null)),h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.aws)),h().createElement("p",null,t.formatMessage(p.Z.awsDesc)),h().createElement("br",null),h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.gcp)),h().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),o&&h().createElement(h().Fragment,null,h().createElement("br",null),h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.ibm)),h().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),h().createElement("br",null),h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.azure)),h().createElement("p",null,t.formatMessage(p.Z.azureDesc)),i&&h().createElement(h().Fragment,null,h().createElement("br",null),h().createElement("p",{style:Ct.infoTitle},t.formatMessage(p.Z.oci)),h().createElement("p",null,t.formatMessage(p.Z.ociDesc))))},h().createElement(r.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:r.ButtonVariant.plain},h().createElement(a.iC,null))))),h().createElement("div",{style:Ct.headerContentRight},s&&this.getCurrency())),h().createElement("div",{style:Ct.tabs},this.getTabs(d)),h().createElement("div",{style:Ct.headerContent},h().createElement("div",{style:Ct.headerContentLeft},this.getPerspective(),this.getCostType()),h().createElement("div",{style:Ct.date},(0,mt.J4)()))),h().createElement("div",{style:Ct.main},this.getTabContent(d)))}}const Mt=(0,C.X1)(((e,{router:t})=>{const s=function(e){return o.mB(e)}(t.location.search),r=s.tabKey&&!Number.isNaN(s.tabKey)?Number(s.tabKey):0,a=s.perspective,p=H.iJ.selectIsCurrencyFeatureEnabled(e),u=p?(0,X.zC)():void 0,h=H.iJ.selectIsCostTypeFeatureEnabled(e),d=a===It.aws||a===It.awsOcp&&h?(0,G.u)():void 0,g=Object.assign({tabKey:r},a&&{perspective:a}),m=(0,i.H)(dt.NT),b=dt.aX.selectProviders(e,c.l.all,m),v=dt.aX.selectProvidersError(e,c.l.all,m),y=dt.aX.selectProvidersFetchStatus(e,c.l.all,m),f=(0,n.T)(gt.QR),T=gt.JO.selectUserAccess(e,l.n.all,f),R=gt.JO.selectUserAccessError(e,l.n.all,f),F=gt.JO.selectUserAccessFetchStatus(e,l.n.all,f);return{awsProviders:(0,ht.BV)(b,c.l.aws),azureProviders:(0,ht.BV)(b,c.l.azure),costType:d,currency:u,gcpProviders:(0,ht.BV)(b,c.l.gcp),ibmProviders:(0,ht.BV)(b,c.l.ibm),isCostTypeFeatureEnabled:h,isCurrencyFeatureEnabled:p,isFinsightsFeatureEnabled:H.iJ.selectIsFinsightsFeatureEnabled(e),isIbmFeatureEnabled:H.iJ.selectIsIbmFeatureEnabled(e),isOciFeatureEnabled:H.iJ.selectIsOciFeatureEnabled(e),ociProviders:(0,ht.BV)(b,c.l.oci),ocpProviders:(0,ht.BV)(b,c.l.ocp),providers:b,providersError:v,providersFetchStatus:y,perspective:a,query:g,rhelProviders:(0,ht.BV)(b,c.l.rhel),tabKey:r,userAccess:T,userAccessError:R,userAccessFetchStatus:F,userAccessQueryString:f}})),zt=(0,d.ZP)((0,bt.E)((0,g.connect)(Mt,{})(jt)))},86482:(e,t,s)=>{var r;s.d(t,{BV:()=>c,Bj:()=>l,D2:()=>p,JY:()=>u,Mg:()=>d,at:()=>n,g8:()=>h,rL:()=>g}),function(e){e.currentMonthData="current_month_data",e.hasData="has_data",e.previousMonthData="previous_month_data"}(r||(r={}));const a=(e,t)=>{let s;if(e&&e.data)for(const r of e.data)if(r.infrastructure&&r.infrastructure.uuid===t){s=r;break}return s},c=(e,t)=>{if(!e)return e;const s=e.data.filter((e=>e.source_type.toLowerCase()===t)),r=Object.assign(Object.assign({},e.meta),{count:s.length});return Object.assign(Object.assign({},e),{meta:r,data:s})},o=(e,t)=>{let s=!1;if(e&&e.data)for(const r of e.data)if(r[t]){s=!0;break}return s},i=(e,t,s)=>{let r=!1;if(e&&e.data)for(const c of e.data){const e=a(t,c.uuid);if(e&&e[s]){r=!0;break}}return r},n=(e,t)=>i(e,t,r.currentMonthData),l=(e,t)=>i(e,t,r.hasData),p=(e,t)=>i(e,t,r.previousMonthData),u=(e,t)=>((e,t)=>{let s=!1;if(e&&e.data)for(const r of e.data)if(a(t,r.uuid)){s=!0;break}return s})(e,t),h=e=>o(e,r.currentMonthData),d=e=>o(e,r.hasData),g=e=>o(e,r.previousMonthData)},45087:(e,t,s)=>{s.d(t,{$M:()=>l,Gg:()=>v,J4:()=>d,Tf:()=>u,Y:()=>h,Y$:()=>g,mI:()=>f,p6:()=>n,tw:()=>m,vI:()=>y,x2:()=>p});var r=s(45868),a=s(95147),c=s(43703),o=s(4135),i=s(97027);const n=(e,t=!0)=>e&&t?(0,a.Z)(e,"yyyy-MM-dd"):e,l=(e,t,s=!0)=>({end_date:n(t,s),start_date:n(e,s)}),p=(e=0,t=0,s=0,r=0)=>{const a=new Date;return a.setHours(e),a.setMinutes(t),a.setSeconds(s),a.setMilliseconds(r),a},u=(e=i.Z.noDataForDate,t=1)=>{const s=p(),a=p();a.setDate(1),t&&(a.setMonth(a.getMonth()-t),s.setMonth(s.getMonth()-t));const c=r.N.formatDateTimeRange(a,s,{day:"numeric",month:"long"});return r.N.formatMessage(e,{dateRange:c})},h=(e,t=i.Z.forDate,s=1)=>{const a=p(),c=p();c.setDate(1),s&&(c.setMonth(c.getMonth()-s),a.setMonth(a.getMonth()-s));const o=r.N.formatDateTimeRange(c,a,{day:"numeric",month:"long"});return r.N.formatMessage(t,{dateRange:o,value:e})},d=(e=i.Z.sinceDate)=>{const t=p(),s=p();s.setDate(1);const a=r.N.formatDateTimeRange(s,t,{day:"numeric",month:"long"});return r.N.formatMessage(e,{dateRange:a})},g=(e,t=i.Z.breakdownTotalCostDate)=>{const s=p(),a=p();a.setDate(1);const c=r.N.formatDateTimeRange(a,s,{day:"numeric",month:"long"});return r.N.formatMessage(t,{dateRange:c,value:e})},m=(e=!0)=>((e,t=!0)=>{const s=p();return e&&(s.setDate(1),s.setMonth(s.getMonth()-e)),l((0,c.Z)(s),e?(0,o.Z)(s):s,t)})(0,e),b=(e,t=!0)=>{const s=p(),r=p();return r.setDate(r.getDate()-e),l(r,s,t)},v=(e=!0)=>b(30,e),y=(e=!0)=>b(60,e),f=(e=!0)=>b(90,e)},96351:(e,t,s)=>{s.d(t,{Es:()=>b,F4:()=>R,FE:()=>g,FW:()=>n,HC:()=>u,KT:()=>o,Rt:()=>v,Sv:()=>d,Xd:()=>p,ZC:()=>T,hn:()=>l,mn:()=>y,n9:()=>i,ot:()=>h,tt:()=>m,yY:()=>f});var r=s(91577);const a=(e,t)=>{let s=!1;if(e&&Array.isArray(e.data)){const r=e.data.find((e=>e.type===t));s=r&&r.access}else s=e&&!0===e.data;return s},c=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},o=e=>a(e,r.n.aws),i=(e,t)=>o(e)&&c(t),n=e=>a(e,r.n.azure),l=(e,t)=>n(e)&&c(t),p=e=>a(e,r.n.oci),u=(e,t)=>p(e)&&c(t),h=e=>a(e,r.n.cost_model),d=e=>a(e,r.n.gcp),g=(e,t)=>a(e,r.n.gcp)&&c(t),m=e=>d(e),b=(e,t)=>m(e)&&c(t),v=e=>a(e,r.n.ocp),y=(e,t)=>v(e)&&c(t),f=e=>a(e,r.n.rhel),T=(e,t)=>f(e)&&c(t),R=e=>a(e,r.n.ros)},84735:(e,t,s)=>{e.exports=s.p+"fonts/Cost-icon.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.cee274475b22fc8b6777d0792065a262.js.map