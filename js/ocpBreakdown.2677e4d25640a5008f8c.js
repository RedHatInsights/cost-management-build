"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[8141],{68919:(t,e,r)=>{r.r(e),r.d(e,{default:()=>lt});var o=r(1326),s=r(84717),i=r(39333),n=r(6456),a=r(50081),c=r(97027),l=r(92950),p=r.n(l),u=r(74806),m=r(77760),g=r(91919),d=r(7110),b=r(45402),f=r(1032),y=r(1156),h=r(22369),R=r(62331),E=r(15920),S=r(20997),v=r(15829),F=r(68025),P=r(14483),C=r(5842),_=r(69735),D=r(73903);const j=(0,y.X1)(((t,{title:e})=>({selectWidgets:D.cm.selectWidgets(t),widgets:D.cm.selectCurrentWidgets(t),title:e}))),O=(0,m.connect)(j,{})(_.X);var Z=r(16577),w=r(70982);const T=(0,y.X1)(((t,e)=>({selectWidgets:w.P2.selectWidgets(t),widgets:w.P2.selectCurrentWidgets(t)}))),B=(0,m.connect)(T,{})(Z.f);var z=r(90154),V=r(52016),k=r(89256),x=r(2136);const L=k.v.recommendations,W=k.N.ros;class I extends p().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.updateReport=()=>{const{fetchReport:t,reportQueryString:e}=this.props;t(L,W,e)}}componentDidMount(){this.updateReport()}render(){const{intl:t,report:e}=this.props,r=e&&e.meta?e.meta.count:0;return p().createElement(z.Badge,{screenReaderText:t.formatMessage(c.Z.optimizationsDetails,{count:r})},r)}}const M=(0,y.X1)(((t,{router:e})=>{const r=(0,V.mB)(e.location.search),o=(0,b.VL)(r),s=(0,b.pe)(r),n=Object.assign({},o&&{[o]:s}),a=(0,i.pm)(n);return{report:x.R0.selectRos(t,L,W,a),reportError:x.R0.selectRosError(t,L,W,a),reportFetchStatus:x.R0.selectRosFetchStatus(t,L,W,a),reportQueryString:a}})),X={fetchReport:x.Ze.fetchRosReport},Q=(0,u.ZP)((0,C.E)((0,m.connect)(M,X)(I)));var H=r(86896),q=r(39836),A=r(41882),J=r(38274),G=r(479),N=r(46955),K=r(54467),U=r(25391),Y=r(32924);const $={limit:10,offset:0,order_by:{last_reported:"desc"}},tt=k.N.ros,et=k.v.recommendations,rt=()=>{const[t,e]=(0,l.useState)(Object.assign({},$)),r=(0,H.Z)(),{closeOptimizationsDrawer:o,report:s,reportError:i,reportFetchStatus:n,reportQueryString:a}=ot({query:t}),u=(t=!1,e=!1)=>{const o=s&&s.meta?s.meta.count:0,i=s&&s.meta?s.meta.limit:$.limit,n=s&&s.meta?s.meta.offset:$.offset,a=Math.trunc(n/i+1);return p().createElement(z.Pagination,{isCompact:!e,isDisabled:t,itemCount:o,onPerPageSelect:(t,e)=>m(e),onSetPage:(t,e)=>g(e),page:a,perPage:i,titles:{paginationTitle:r.formatMessage(c.Z.paginationTitle,{title:r.formatMessage(c.Z.openShift),placement:e?"bottom":"top"})},variant:e?z.PaginationVariant.bottom:z.PaginationVariant.top,widgetId:"exports-pagination"+(e?"-bottom":"")})},m=r=>{const s=Y.Lk(t,r,!0);e(s),o()},g=r=>{const i=Y.F4(t,s,r,!0);e(i),o()},d=0===(s&&s.meta?s.meta.count:0),b=r.formatMessage(c.Z.optimizations),f=s&&s.meta&&s.meta.count>0;return i?p().createElement(N.W,{title:b}):t.filter_by||f||n!==y.iF.complete?p().createElement(p().Fragment,null,(()=>{const r=s&&s.meta?s.meta.limit:0,i=s&&s.meta?s.meta.count:0,n=0===i;return p().createElement(A.IH,{isDisabled:n,itemsPerPage:r,itemsTotal:i,onFilterAdded:r=>(r=>{const s=Y.JA(t,r);e(s),o()})(r),onFilterRemoved:r=>(r=>{const s=Y.vI(t,r);e(s),o()})(r),pagination:u(n),query:t})})(),n===y.iF.inProgress?p().createElement(J.g,null):p().createElement(p().Fragment,null,p().createElement(A.Hy,{filterBy:t.filter_by,isLoading:n===y.iF.inProgress,onSort:(r,s)=>((r,s)=>{const i=Y.K8(t,r,s);e(i),o()})(r,s),orderBy:t.order_by,report:s,reportQueryString:a}),p().createElement("div",{style:K.W.pagination},u(d,!0)))):p().createElement(G.Y,null)},ot=({query:t})=>{const e=(0,m.useDispatch)(),r=(()=>{const t=(0,q.useLocation)();return(0,i.mB)(t.search)})(),o=(0,b.VL)(r),s=(0,b.pe)(r),n=(0,U.H)(t)||(0,U.H)($),a=(0,U.j)(t)||(0,U.j)($),c=Object.assign(Object.assign(Object.assign({},o&&{[o]:s}),t.filter_by),{limit:t.limit,offset:t.offset,order_by:n,order_how:a}),p=(0,i.pm)(c),u=(0,m.useSelector)((t=>x.R0.selectRos(t,et,tt,p))),g=(0,m.useSelector)((t=>x.R0.selectRosFetchStatus(t,et,tt,p))),d=(0,m.useSelector)((t=>x.R0.selectRosError(t,et,tt,p)));return(0,l.useEffect)((()=>{d||g===y.iF.inProgress||e(x.Ze.fetchRosReport(et,tt,p))}),[t]),{closeOptimizationsDrawer:S.Aw.Zv,report:u,reportError:d,reportFetchStatus:g,reportQueryString:p}},st=(0,F.dI)(g._.ocpDetails.path),it=n.C.cost,nt=n.K.ocp,at=(0,y.X1)(((t,{intl:e,router:r})=>{const n=(0,i.mB)(r.location.search),l=(0,i.fU)(n),u=(0,b.VL)(n),m=(0,b.pe)(n),g=h.iJ.selectIsCostDistributionFeatureEnabled(t),d="project"===u&&g?(0,v.vn)():void 0,y=(0,v.zC)(),S=Object.assign({},n),F={currency:y,filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},l&&l.filter_by&&l.filter_by),n&&n.isPlatformCosts&&{category:P.rx}),u&&"*"!==m&&{[u]:void 0}),exclude:Object.assign({},l&&l.exclude&&l.exclude),group_by:Object.assign({},u&&{[u]:m})},C=(0,i.pm)(F),_=E.ZV.selectReport(t,nt,it,C),D=E.ZV.selectReportError(t,nt,it,C),j=E.ZV.selectReportFetchStatus(t,nt,it,C),Z=(0,s.H)(R.NT),w=R.aX.selectProviders(t,o.l.all,Z),T=R.aX.selectProvidersFetchStatus(t,o.l.all,Z),z=n[P.yG]?n[P.yG]:m;return{costDistribution:d,costOverviewComponent:p().createElement(O,{costDistribution:d,currency:y,groupBy:u,isCostDistributionFeatureEnabled:h.iJ.selectIsCostDistributionFeatureEnabled(t),isPlatformCosts:n&&n.isPlatformCosts,report:_,title:z}),currency:y,description:n[P.eG],detailsURL:st,emptyStateTitle:e.formatMessage(c.Z.ocpDetailsTitle),groupBy:u,groupByValue:m,historicalDataComponent:p().createElement(B,{costDistribution:d,currency:y}),isOptimizationsTab:void 0!==n.optimizationsTab,isRosFeatureEnabled:h.iJ.selectIsRosFeatureEnabled(t),optimizationsBadgeComponent:p().createElement(Q,null),optimizationsComponent:"project"===u&&"*"!==m?p().createElement(rt,null):void 0,providers:(0,f.BV)(w,o.l.ocp),providersFetchStatus:T,providerType:o.l.ocp,query:S,report:_,reportError:D,reportFetchStatus:j,reportType:it,reportPathsType:nt,reportQueryString:C,showCostDistribution:"project"===u,tagPathsType:a.L.ocp,title:z}})),ct={closeOptimizationsDrawer:S.Aw.Zv,fetchReport:E.nx.fetchReport},lt=(0,u.ZP)((0,C.E)((0,m.connect)(at,ct)(d.C)))}}]);
//# sourceMappingURL=../sourcemaps/ocpBreakdown.977aef943bfd352a6355653ffbeeea10.js.map