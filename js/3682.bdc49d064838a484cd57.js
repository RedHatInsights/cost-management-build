"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[3682],{52636:(e,t,o)=>{o.d(t,{Xk:()=>a,rU:()=>n});var r=o(40400);const n={name:"CalculatorIcon",height:512,width:448,svgPath:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z",yOffset:0,xOffset:0},a=(0,r.IU)(n)},90302:(e,t,o)=>{o.d(t,{W:()=>l});var r=o(49382),n=o(12289),a=o(40794),i=o(11331),s=o(43789);const l={costColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end",paddingRight:0},defaultLabel:{minWidth:"63px"},emptyState:{backgroundColor:r.ZP.value,display:"flex",justifyContent:"center",paddingTop:i.ZP.value,height:"35vh",width:"100%"},infoArrow:{position:"relative"},infoArrowDesc:{bottom:s.ZP.value},infoDescription:{color:n.ZP.value,fontSize:a.ZP.value},lastReported:{textAlign:"right",paddingRight:"40px"},lastReportedColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end"},managedColumn:{textAlign:"right"},nameColumn:{width:"1%"}}},90569:(e,t,o)=>{o.d(t,{w:()=>g});var r=o(76481),n=o(52636),a=o(25441),i=o(79112),s=o(97027),l=o(92950),c=o.n(l),m=o(74806),d=o(42901),u=o(5842),p=o(90302);class h extends c().Component{constructor(e){super(e),this.getEmptyState=()=>{const{intl:e,router:t}=this.props,o=(0,i.mB)(t.location.search);if(o.filter_by)for(const e of Object.values(o.filter_by))if("*"!==e)return c().createElement(d.c,{filter:e,showMargin:!1});return c().createElement(r.EmptyState,null,c().createElement(r.EmptyStateIcon,{icon:n.Xk}),c().createElement(r.EmptyStateBody,null,e.formatMessage(s.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,router:o}=this.props,r=t[e].orderBy,n=(0,i.mB)(o.location.search),a=n&&n.order_by&&n.order_by[r];return a?{index:e,direction:a}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSelect=(e,t,o)=>{const{onSelected:r,rows:n}=this.props;let a,i=[];-1===o?a=n.map((e=>(e.selected=t,e))):(a=[...n],a[o].selected=t,i=[a[o].item]),this.setState({rows:n},(()=>{r&&r(i,t)}))},this.handleOnSort=(e,t,o)=>{const{columns:r,onSort:n}=this.props;n&&n(r[t].orderBy,o===a.SortByDirection.asc)},this.handleOnRowClick=(e,t)=>{const{onRowClick:o,rows:r}=this.props;r.map((e=>e.selected=!1)),r[t].selected=!0,this.setState({rows:r},(()=>{o&&o(e,t)}))},this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isLoading:o,isRecommendations:n,rows:i}=this.props;return c().createElement(c().Fragment,null,c().createElement(a.TableComposable,{"aria-label":t.formatMessage(s.Z.dataTableAriaLabel),gridBreakPoint:"grid-2xl",hasSelectableRowCaption:n},c().createElement(a.Thead,null,c().createElement(a.Tr,null,e.map(((e,t)=>c().createElement(a.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),c().createElement(a.Tbody,null,o?c().createElement(a.Tr,null,c().createElement(a.Td,{colSpan:100},c().createElement(r.Bullseye,null,c().createElement("div",{style:{textAlign:"center"}},c().createElement(r.Spinner,{size:"xl"}))))):i.map(((t,o)=>c().createElement(a.Tr,{isSelectable:n,isHoverable:n,isRowSelected:n&&t.selected,onRowClick:e=>this.handleOnRowClick(e,o),key:`row-${o}`},t.cells.map(((r,i)=>0!==i||n?c().createElement(a.Td,{dataLabel:e[i].name,key:`cell-${o}-${i}`,modifier:"nowrap",isActionCell:!n&&i===t.cells.length-1,style:r.style},r.value):c().createElement(a.Td,{dataLabel:e[i].name,key:`cell-${i}-${o}`,modifier:"nowrap",select:{disable:t.selectionDisabled,isSelected:t.selected,onSelect:(e,t)=>this.handleOnSelect(e,t,o),rowIndex:o},style:r.style})))))))),Boolean(0===i.length)&&c().createElement("div",{style:p.W.emptyState},this.getEmptyState()))}}const g=(0,m.ZP)((0,u.E)(h))},43682:(e,t,o)=>{o.d(t,{Z:()=>Y});var r=o(76481),n=o(1326),a=o(84717),i=o(39333),s=o(89256),l=o(97027),c=o(92950),m=o.n(c),d=o(74806),u=o(77760),p=o(52471),h=o(55672),g=o(2985),y=o(47947),f=o(37269),v=o(19727),b=o(86482),S=o(1156),E=o(78898),w=o(62331),C=o(2136),P=o(69511),O=o(15829),R=o(5842),k=o(49382),Z=o(98499),j=o(32412);const x={content:{paddingBottom:Z.ZP.value,paddingTop:Z.ZP.value},header:{backgroundColor:k.ZP.var,padding:Z.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},paginationContainer:{marginLeft:Z.ZP.value,marginRight:Z.ZP.value},pagination:{backgroundColor:k.ZP.value,paddingBottom:j.ZP.value,paddingTop:j.ZP.value},recommendationsContainer:{minHeight:"100vh"},tableContainer:{marginLeft:Z.ZP.value,marginRight:Z.ZP.value},toolbarContainer:{marginLeft:Z.ZP.value,marginRight:Z.ZP.value}};class B extends m().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState)}render(){const{intl:e}=this.props;return m().createElement("header",{style:x.header},m().createElement("div",{style:x.headerContent},m().createElement(r.Title,{headingLevel:"h1",style:x.title,size:r.TitleSizes["2xl"]},e.formatMessage(l.Z.recommendations))))}}const T=(0,S.X1)((()=>({}))),_=(0,d.ZP)((0,u.connect)(T,{})(B));var M=o(90569),D=o(90302),F=o(20997);class L extends m().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{groupBy:e,intl:t,report:o}=this.props;if(!o)return;const r=[],n=(0,P.c)({report:o,idKey:"project"}),a=[Object.assign({name:t.formatMessage(l.Z.recommendationsNames,{value:"container"}),orderBy:"container"},n.length&&{isSortable:!0}),Object.assign({hidden:"project"===e,name:t.formatMessage(l.Z.recommendationsNames,{value:"project"}),orderBy:"project"},n.length&&{isSortable:!0}),Object.assign({name:t.formatMessage(l.Z.recommendationsNames,{value:"workload"}),orderBy:"workload"},n.length&&{isSortable:!0}),Object.assign({name:t.formatMessage(l.Z.recommendationsNames,{value:"workload_type"}),orderBy:"workload_type"},n.length&&{isSortable:!0}),Object.assign({hidden:"cluster"===e,name:t.formatMessage(l.Z.recommendationsNames,{value:"cluster"}),orderBy:"cluster"},n.length&&{isSortable:!0}),Object.assign({name:t.formatMessage(l.Z.recommendationsNames,{value:"last_reported"}),orderBy:"last_reported",style:D.W.lastReportedColumn},n.length&&{isSortable:!0})];n.map(((t,o)=>{const n=t&&null!==t.clusters?t.clusters[0]:"",a=`Container${o}`,i="6 hours ago",s=t&&null!==t.label?t.label:"",l=`Workload${o}`,c=`Workload type${o}`;r.push({cells:[{value:m().createElement("div",null,a)},{value:m().createElement("div",null,s),hidden:"project"===e},{value:m().createElement("div",null,l)},{value:m().createElement("div",null,c)},{value:m().createElement("div",null,n),hidden:"cluster"===e},{value:m().createElement("div",null,i),style:D.W.lastReported}],item:{cluster:n,container:a,lastReported:i,project:s,workload:l,workloadType:c}})}));const i=a.filter((e=>!e.hidden)),s=r.map((e=>{var t=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:i,rows:s})},this.handleOnRowClick=(e,t)=>{const{openRecommendationsDrawer:o}=this.props,{rows:r}=this.state;o(r[t].item)}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t}=this.props,o=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")!==o&&this.initDatum()}render(){const{isLoading:e,onSort:t}=this.props,{columns:o,rows:r}=this.state;return m().createElement(M.w,{columns:o,isLoading:e,isRecommendations:!0,onSort:t,rows:r,onRowClick:this.handleOnRowClick})}}const A=(0,S.X1)(((e,{router:t})=>{const o=(0,i.mB)(t.location.search);return{groupBy:(0,f.VL)(o),isOpen:F.lU.selectIsRecommendationsDrawerOpen(e)}})),V={closeRecommendationsDrawer:F.Aw.R7,openRecommendationsDrawer:F.Aw.JI},z=(0,d.ZP)((0,R.E)((0,u.connect)(A,V)(L)));var I=o(36116),$=o(70539);class q extends m().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(l.Z.filterByValues,{value:"cluster"}),key:"cluster"},{name:e.formatMessage(l.Z.filterByValues,{value:"project"}),key:"project"},{name:e.formatMessage(l.Z.filterByValues,{value:"workload_type"}),key:"workload_type"},{name:e.formatMessage(l.Z.filterByValues,{value:"workload"}),key:"workload"},{name:e.formatMessage(l.Z.filterByValues,{value:"container"}),key:"container"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isDisabled:e,itemsPerPage:t,itemsTotal:o,onFilterAdded:r,onFilterRemoved:n,pagination:a,query:i}=this.props,{categoryOptions:s}=this.state;return m().createElement($.k,{categoryOptions:s,isDisabled:e,itemsPerPage:t,itemsTotal:o,onFilterAdded:r,onFilterRemoved:n,pagination:a,query:i,resourcePathsType:I.C.ocp,showFilter:!0})}}const N=(0,S.X1)((()=>({}))),W=(0,u.connect)(N,{})(q),X=(0,d.ZP)(W),H={delta:"cost",filter:{limit:10,offset:0,resolution:"monthly",time_scope_units:"month",time_scope_value:-1},exclude:{},filter_by:{},group_by:{project:"*"},order_by:{cost:"desc"}},Q=s.N.cost,J=s.v.recommendation;class U extends m().Component{constructor(){super(...arguments),this.defaultState={columns:[],rows:[]},this.state=Object.assign({},this.defaultState),this.getComputedItems=()=>{const{query:e,recommendation:t}=this.props,o=function(e={}){return e.project?"project":e.cluster?"cluster":e.node?"node":"date"}(e.group_by),r=(0,f.qV)(e);return(0,P.c)({report:t,idKey:r||o})},this.getPagination=(e=!1,t=!1)=>{const{intl:o,query:n,recommendation:a,router:i}=this.props,s=a&&a.meta?a.meta.count:0,c=a&&a.meta&&a.meta.filter&&a.meta.filter.limit?a.meta.filter.limit:H.filter.limit,d=(a&&a.meta&&a.meta.filter&&a.meta.filter.offset?a.meta.filter.offset:H.filter.offset)/c+1;return m().createElement(r.Pagination,{isCompact:!t,isDisabled:e,itemCount:s,onPerPageSelect:(e,t)=>(0,v.xh)(n,i,t),onSetPage:(e,t)=>(0,v.$9)(n,i,a,t),page:d,perPage:c,titles:{paginationTitle:o.formatMessage(l.Z.paginationTitle,{title:o.formatMessage(l.Z.openShift),placement:t?"bottom":"top"})},variant:t?r.PaginationVariant.bottom:r.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},this.getTable=()=>{const{query:e,recommendation:t,recommendationFetchStatus:o,recommendationQueryString:r,router:n}=this.props;return m().createElement(z,{isLoading:o===S.iF.inProgress,onSort:(t,o)=>(0,v.yB)(e,n,t,o),report:t,reportQueryString:r})},this.getToolbar=e=>{const{query:t,recommendation:o,router:r}=this.props,n=0===e.length,a=o&&o.meta?o.meta.count:0;return m().createElement(X,{isDisabled:n,itemsPerPage:e.length,itemsTotal:a,onFilterAdded:e=>(0,v.$3)(t,r,e),onFilterRemoved:e=>(0,v.q7)(t,r,e),pagination:this.getPagination(n),query:t})},this.updateRecommendation=()=>{const{fetchRosReport:e,recommendationQueryString:t}=this.props;e(J,Q,t)}}componentDidMount(){this.updateRecommendation()}componentDidUpdate(e){const{recommendation:t,recommendationError:o,recommendationQueryString:r,router:n}=this.props,a=e.recommendationQueryString!==r,i=!t&&!o,s=!n.location.search;(a||i||s)&&this.updateRecommendation()}render(){const{groupBy:e,intl:t,providers:o,providersFetchStatus:r,recommendationError:a,recommendationFetchStatus:i}=this.props,s=this.getComputedItems(),c=0===s.length,d=void 0===e,u=t.formatMessage(l.Z.ocpDetailsTitle);if(a)return m().createElement(y.W,{title:u});if(r===S.iF.inProgress)return m().createElement(p.g,{title:u});if(r===S.iF.complete){if(o&&o.meta&&0===o.meta.count)return m().createElement(g.L,{providerType:n.l.ros,title:u});if(!(0,b.g8)(o))return m().createElement(h.J,{title:u})}return m().createElement("div",{style:x.recommendationsContainer},d&&m().createElement(_,null),m().createElement("div",{style:d?x.content:void 0},m().createElement("div",{style:d?x.toolbarContainer:void 0},this.getToolbar(s)),i===S.iF.inProgress?m().createElement(p.g,null):m().createElement(m().Fragment,null,m().createElement("div",{style:d?x.tableContainer:void 0},this.getTable()),m().createElement("div",{style:d?x.paginationContainer:void 0},m().createElement("div",{style:x.pagination},this.getPagination(c,!0))))))}}const K=(0,S.X1)(((e,{router:t})=>{const o=function(e){return i.mB(e)}(t.location.search),r=(0,f.VL)(o),s=E.iJ.selectIsCurrencyFeatureEnabled(e)?(0,O.zC)():void 0,l={delta:"cost",filter:Object.assign(Object.assign({},H.filter),o.filter),filter_by:o.filter_by||H.filter_by,exclude:o.exclude||H.exclude,order_by:o.order_by||H.order_by},c=function(e){return i.pm(e)}(Object.assign(Object.assign({},l),{group_by:o.group_by||H.group_by,currency:s})),m=C.R0.selectRos(e,J,Q,c),d=C.R0.selectRosError(e,J,Q,c),u=C.R0.selectRosFetchStatus(e,J,Q,c),p=(0,a.H)(w.NT),h=w.aX.selectProviders(e,n.l.all,p),g=w.aX.selectProvidersFetchStatus(e,n.l.all,p);return{currency:s,groupBy:r,providers:(0,b.BV)(h,n.l.ocp),providersFetchStatus:g,query:l,recommendation:m,recommendationError:d,recommendationFetchStatus:u,recommendationQueryString:c}})),G={fetchRosReport:C.Ze.fetchRosReport},Y=(0,d.ZP)((0,R.E)((0,u.connect)(K,G)(U)))}}]);
//# sourceMappingURL=../sourcemaps/3682.b021efa319ada220915a4191c8517982.js.map