"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[5590],{80965:(e,t,r)=>{r.d(t,{V_:()=>s,ZP:()=>l,jm:()=>a});var n=r(40400);const a={name:"MinusIcon",height:512,width:448,svgPath:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",yOffset:0,xOffset:0},s=(0,n.IU)(a),l=s},43789:(e,t)=>{t.Q8={name:"--pf-global--spacer--xs",value:"0.25rem",var:"var(--pf-global--spacer--xs)"},t.ZP=t.Q8},84717:(e,t,r)=>{r.d(t,{H:()=>a});var n=r(80129);function a(e){return(0,n.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,r)=>{r.d(t,{T:()=>a});var n=r(80129);function a(e){return(0,n.stringify)(e,{encode:!1,indices:!1})}},78961:(e,t,r)=>{r.r(t),r.d(t,{default:()=>se});var n=r(1326),a=r(84717),s=r(37610),l=r(91577),o=r(11887),c=r(76481),i=r(70239),m=r(92950),u=r.n(m),d=r(74806),p=r(77760),h=r(1156),g=r(20997),E=r(25441),f=r(39333),T=r(6456),v=r(97027),b=r(39836),y=r(91919),S=r(98485),w=r(52471),x=r(54583),C=r(15920),Z=r(68025),O=r(5842),L=r(49382),P=r(98499);const _={firstColumn:{width:"250px"},infoArrow:{top:r(43789).ZP.value,position:"relative"},tableContainer:{marginTop:P.ZP.value},toolbarContainer:{backgroundColor:L.ZP.value,paddingBottom:P.ZP.value,paddingTop:P.ZP.value},viewAllContainer:{marginTop:P.ZP.value}};var V,A=r(22807);!function(e){e.last_24_hrs="last_24_hrs",e.last_7_days="last_7_days",e.last_15_days="last_15_days"}(V||(V={}));class D extends u().Component{constructor(){super(...arguments),this.defaultState={currentItem:void 0},this.state=Object.assign({},this.defaultState),this.getOptions=()=>[{label:v.Z.recommendationsLast24hrs,value:V.last_24_hrs},{label:v.Z.recommendationsLast7Days,value:V.last_7_days},{label:v.Z.recommendationsLast15Days,value:V.last_15_days}]}render(){const{isDisabled:e,onSelected:t}=this.props,{currentItem:r}=this.state,n=this.getOptions();return u().createElement(A.o,{currentItem:r||n[0].value,isDisabled:e,onSelected:t,options:n,title:v.Z.recommendationsPerspective})}}const I=(0,h.X1)(((e,t)=>({}))),M=(0,p.connect)(I,{})(D),R=(0,d.ZP)(M),F={filter:{limit:10,offset:0},order_by:{name:"desc"}};class j extends u().Component{constructor(){super(...arguments),this.defaultState={query:F},this.state=Object.assign({},this.defaultState),this.getDescription=()=>{const{intl:e,payload:t}=this.props;return u().createElement(c.TextContent,null,u().createElement(c.TextList,{component:c.TextListVariants.dl},u().createElement(c.TextListItem,{component:c.TextListItemVariants.dt},e.formatMessage(v.Z.recommendationsValues,{value:"last_reported"})),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dd},t.lastReported),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dt},e.formatMessage(v.Z.recommendationsValues,{value:"cluster"})),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dd},t.cluster),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dt},e.formatMessage(v.Z.recommendationsValues,{value:"project"})),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dd},t.project),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dt},e.formatMessage(v.Z.recommendationsValues,{value:"workload_type"})),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dd},t.workloadType),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dt},e.formatMessage(v.Z.recommendationsValues,{value:"workload"})),u().createElement(c.TextListItem,{component:c.TextListItemVariants.dd},t.workload)))},this.getChangeValue=e=>{if(0===e)return u().createElement(S.L,null);let t="iconOverride";return null!==e&&e<0?t+=" decrease":null!==e&&e>0&&(t+=" increase"),u().createElement("div",{className:"monthOverMonthOverride"},u().createElement("div",{className:t},e<0?u().createElement(u().Fragment,null,e,u().createElement("span",{className:"fa fa-sort-down",style:_.infoArrow})):u().createElement(u().Fragment,null,e,u().createElement("span",{className:"fa fa-sort-up",style:Object.assign(Object.assign({},_.infoArrow),_.infoArrowDesc)}))))},this.getLimitsTable=()=>{const{intl:e}=this.props;return u().createElement(E.TableComposable,{"aria-label":e.formatMessage(v.Z.recommendationsTableAriaLabel),borders:!1,hasSelectableRowCaption:!0,variant:E.TableVariant.compact},u().createElement(E.Thead,null,u().createElement(E.Tr,null,u().createElement(E.Th,null,e.formatMessage(v.Z.limits)),u().createElement(E.Th,null,e.formatMessage(v.Z.current)),u().createElement(E.Th,null,e.formatMessage(v.Z.recommended)),u().createElement(E.Th,null,e.formatMessage(v.Z.change)))),u().createElement(E.Tbody,null,u().createElement(E.Tr,null,u().createElement(E.Td,{style:_.firstColumn},e.formatMessage(v.Z.cpuUnits)),u().createElement(E.Td,null,"500"),u().createElement(E.Td,{hasRightBorder:!0},"500"),u().createElement(E.Td,null,this.getChangeValue(0))),u().createElement(E.Tr,null,u().createElement(E.Td,{style:_.firstColumn},e.formatMessage(v.Z.memoryUnits)),u().createElement(E.Td,null,"1000"),u().createElement(E.Td,{hasRightBorder:!0},"1100"),u().createElement(E.Td,null,this.getChangeValue(100)))))},this.getRequestsTable=()=>{const{intl:e}=this.props;return u().createElement(E.TableComposable,{"aria-label":e.formatMessage(v.Z.recommendationsTableAriaLabel),borders:!1,hasSelectableRowCaption:!0,variant:E.TableVariant.compact},u().createElement(E.Thead,null,u().createElement(E.Tr,null,u().createElement(E.Th,null,e.formatMessage(v.Z.requests)),u().createElement(E.Th,null,e.formatMessage(v.Z.current)),u().createElement(E.Th,null,e.formatMessage(v.Z.recommended)),u().createElement(E.Th,null,e.formatMessage(v.Z.change)))),u().createElement(E.Tbody,null,u().createElement(E.Tr,null,u().createElement(E.Td,{style:_.firstColumn},e.formatMessage(v.Z.cpuUnits)),u().createElement(E.Td,null,"300"),u().createElement(E.Td,{hasRightBorder:!0},"400"),u().createElement(E.Td,null,this.getChangeValue(100))),u().createElement(E.Tr,null,u().createElement(E.Td,{style:_.firstColumn},e.formatMessage(v.Z.memoryUnits)),u().createElement(E.Td,null,"100"),u().createElement(E.Td,{hasRightBorder:!0},"110"),u().createElement(E.Td,null,this.getChangeValue(10)))))},this.getUsageTable=()=>{const{intl:e}=this.props;return u().createElement(E.TableComposable,{"aria-label":e.formatMessage(v.Z.recommendationsTableAriaLabel),borders:!1,hasSelectableRowCaption:!0,variant:E.TableVariant.compact},u().createElement(E.Thead,null,u().createElement(E.Tr,null,u().createElement(E.Th,null,e.formatMessage(v.Z.usage)),u().createElement(E.Th,null,e.formatMessage(v.Z.current)))),u().createElement(E.Tbody,null,u().createElement(E.Tr,null,u().createElement(E.Td,{style:_.firstColumn},e.formatMessage(v.Z.cpuUtilizationUnits)),u().createElement(E.Td,{style:_.alignLeft},"300")),u().createElement(E.Tr,null,u().createElement(E.Td,{style:_.firstColumn},e.formatMessage(v.Z.memoryUtilizationUnits)),u().createElement(E.Td,null,"100"))))},this.getViewAllLink=()=>{const{intl:e,payload:t,router:r}=this.props;return u().createElement(b.Link,{to:(0,x.Tm)({basePath:(0,Z.dI)(y._.ocpDetailsBreakdown.path),groupBy:"project",id:t.project,router:r,title:t.project})},e.formatMessage(v.Z.recommendationsViewAll))}}render(){const{reportFetchStatus:e}=this.props;return u().createElement("div",{style:_.content},u().createElement("div",null,this.getDescription()),u().createElement("div",{style:_.toolbarContainer},u().createElement(R,null)),e===h.iF.inProgress?u().createElement(w.g,null):u().createElement(u().Fragment,null,u().createElement("div",null,this.getUsageTable()),u().createElement("div",{style:_.tableContainer},this.getRequestsTable()),u().createElement("div",{style:_.tableContainer},this.getLimitsTable())),u().createElement("div",{style:_.viewAllContainer},this.getViewAllLink()))}}const U=(0,h.X1)((e=>{const t={filter:Object.assign({},F.filter),filter_by:F.filter_by,order_by:F.order_by},r=T.C.cost,n=T.K.ocp,a=(0,f.pm)(t),s=C.ZV.selectReportError(e,n,r,a),l=C.ZV.selectReportFetchStatus(e,n,r,a);return{payload:g.lU.selectRecommendationsDrawerPayload(e),report:{meta:{count:11,filter:{limit:10,offset:0},order_by:{cost_total:"desc"}},data:[{name:"OpenShift grouped by Project",created:"2022-01-17 13:25:07",expires:"2022-01-24",status:"pending"},{name:"Amazon Web Services grouped by Account",created:"2022-01-17 13:24:23",expires:"2022-01-24",status:"running"},{name:"OpenShift grouped by Cluster",created:"2022-01-16 13:23:08",expires:"2022-01-23",status:"completed"},{name:"Microsoft Azure grouped by Account",created:"2022-01-16 13:18:22",expires:"2022-01-23",status:"failed"},{name:"Google Cloud Platform grouped by Service",created:"2022-01-14 09:05:23",expires:"2022-01-23",status:"completed"},{name:"Explorer - OpenShift grouped by Cluster",created:"2022-01-14 08:38:42",expires:"2022-01-23",status:"completed"}]},reportError:s,reportFetchStatus:l,reportQueryString:a}})),k={fetchReport:C.nx.fetchReport},B=(0,d.ZP)((0,O.E)((0,p.connect)(U,k)(j)));class z extends u().Component{constructor(){super(...arguments),this.drawerRef=u().createRef(),this.handleClose=()=>{const{closeRecommendationsDrawer:e}=this.props;e()}}render(){const{isOpen:e,payload:t}=this.props;return u().createElement(u().Fragment,null,u().createElement(c.DrawerHead,null,u().createElement("span",{tabIndex:e?0:-1,ref:this.drawerRef},u().createElement(c.Title,{headingLevel:"h1",size:c.TitleSizes.xl},t?t.container:void 0)),u().createElement(c.DrawerActions,null,u().createElement(c.DrawerCloseButton,{onClick:this.handleClose}))),u().createElement(c.DrawerContentBody,null,u().createElement(B,{onClose:this.handleClose})))}}const Q=(0,h.X1)((e=>({isOpen:g.lU.selectIsRecommendationsDrawerOpen(e),payload:g.lU.selectRecommendationsDrawerPayload(e)}))),X={closeRecommendationsDrawer:g.Aw.R7},N=(0,d.ZP)((0,p.connect)(Q,X)(z));class G extends u().Component{constructor(){super(...arguments),this.drawerRef=u().createRef(),this.getPanelContent=()=>{const{isExportsDrawerOpen:e,isRecommendationsDrawerOpen:t}=this.props;return e?u().createElement(c.DrawerPanelContent,{id:"exportsDrawer",minSize:"1000px"},u().createElement(i.Z,null)):t?u().createElement(c.DrawerPanelContent,{id:"recommendationsDrawer",minSize:"750px"},u().createElement(N,null)):null},this.handleExpand=()=>{this.drawerRef.current&&this.drawerRef.current.focus()}}render(){const{children:e,isExportsDrawerOpen:t,isRecommendationsDrawerOpen:r}=this.props;return u().createElement(c.Drawer,{className:"drawerOverride",isExpanded:t||r,onExpand:this.handleExpand},u().createElement(c.DrawerContent,{panelContent:this.getPanelContent()},u().createElement(c.DrawerContentBody,null,e)))}}const q=(0,h.X1)((e=>({isExportsDrawerOpen:g.lU.selectIsExportsDrawerOpen(e),isRecommendationsDrawerOpen:g.lU.selectIsRecommendationsDrawerOpen(e)}))),H=(0,d.ZP)((0,p.connect)(q,{})(G)),J=(0,d.ZP)((({children:e=null,intl:t})=>(document.title=t.formatMessage((()=>{switch((0,Z.jD)()){case(0,Z.dI)(y._.explorer.path):return v.Z.pageTitleExplorer;case(0,Z.dI)(y._.overview.path):return v.Z.pageTitleOverview;default:return v.Z.pageTitleDefault}})()),u().createElement(u().Fragment,null,e))));var $=r(225),W=r(62331),K=r(46919);const Y=(0,o.B)((()=>r.e(4449).then(r.bind(r,38090)))),ee=(0,o.B)((()=>r.e(4449).then(r.bind(r,98923))));class te extends u().Component{componentDidMount(){const{accountSettingsFetchStatus:e,fetchAccountSettings:t,fetchProviders:r,fetchUserAccess:a,providersFetchStatus:s,providersQueryString:o,resetState:c,userAccessFetchStatus:i,userAccessQueryString:m}=this.props;c(),i!==h.iF.inProgress&&a(l.n.all,m),s!==h.iF.inProgress&&r(n.l.all,o),e!==h.iF.inProgress&&t()}render(){const{accountSettingsFetchStatus:e,children:t,providersFetchStatus:r,userAccessFetchStatus:n}=this.props;return u().createElement(J,null,n===h.iF.complete&&u().createElement(ee,null,r===h.iF.complete&&u().createElement(H,null,u().createElement(Y,null),e===h.iF.complete&&t)))}}const re=(0,h.X1)((e=>{const t=$.sy.selectAccountSettings(e),r=$.sy.selectAccountSettingsError(e),o=$.sy.selectAccountSettingsFetchStatus(e),c=(0,a.H)(W.NT),i=W.aX.selectProviders(e,n.l.all,c),m=W.aX.selectProvidersError(e,n.l.all,c),u=W.aX.selectProvidersFetchStatus(e,n.l.all,c),d=(0,s.T)(K.QR);return{accountSettings:t,accountSettingsError:r,accountSettingsFetchStatus:o,providers:i,providersError:m,providersFetchStatus:u,providersQueryString:c,userAccess:K.JO.selectUserAccess(e,l.n.all,d),userAccessError:K.JO.selectUserAccessError(e,l.n.all,d),userAccessFetchStatus:K.JO.selectUserAccessFetchStatus(e,l.n.all,d),userAccessQueryString:d}})),ne={fetchAccountSettings:$.vc.Mm,fetchProviders:W.JZ.lm,fetchUserAccess:K.On.yM,resetState:g.Aw.oA},ae=(0,p.connect)(re,ne)(te),se=(0,d.ZP)(ae)},98485:(e,t,r)=>{r.d(t,{L:()=>l});var n=r(80965),a=r(92950),s=r.n(a);const l=()=>s().createElement("span",{className:"emptyValueContainer"},s().createElement(n.V_,null))},22807:(e,t,r)=>{r.d(t,{o:()=>m});var n=r(76481),a=r(97027),s=r(92950),l=r.n(s),o=r(74806);const c={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"},perspectiveOptionLabel:{marginBottom:6,marginLeft:8,marginTop:6}};class i extends l().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelectOptions=()=>{const{intl:e,options:t}=this.props,r=[];return t.map((t=>{r.push({toString:()=>e.formatMessage(t.label,{value:t.value}),value:t.value})})),r},this.getSelect=()=>{const{currentItem:e,intl:t,isDisabled:r,options:a}=this.props,{isSelectOpen:s}=this.state;if(1===a.length)return l().createElement("div",{style:c.perspectiveOptionLabel},t.formatMessage(a[0].label,{value:a[0].value}));const o=this.getSelectOptions(),i=o.find((t=>t.value===e));return l().createElement(n.Select,{id:"perspectiveSelect",isDisabled:r,isOpen:s,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:i,variant:n.SelectVariant.single},o.map((e=>l().createElement(n.SelectOption,{key:e.value,value:e}))))},this.handleSelect=(e,t)=>{const{onSelected:r}=this.props;r&&r(t.value),this.setState({isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e,title:t}=this.props;return l().createElement("div",{style:c.perspectiveSelector},l().createElement(n.Title,{headingLevel:"h3",size:"md",style:c.perspectiveLabel},e.formatMessage(t||a.Z.perspective)),this.getSelect())}}const m=(0,o.ZP)(i)},54583:(e,t,r)=>{r.d(t,{Tm:()=>s,Zc:()=>l,yW:()=>o});var n=r(39333),a=r(14483);const s=({basePath:e,description:t,groupBy:r,id:s,isPlatformCosts:l,router:o,title:c})=>{const i=(0,n.mB)(o.location.search),m=Object.assign(Object.assign(Object.assign(Object.assign({},i),t&&t!==c&&{[a.eG]:t}),c&&{[a.yG]:c}),{group_by:{[r]:l?"*":s}});return l&&(m.filter||(m.filter={}),m.filter.category=a.rx),`${e}?${(0,n.IV)(m)}`},l=({basePath:e,description:t,groupBy:r,groupByOrg:s,id:l,router:o,title:c,type:i})=>{const m=(0,n.mB)(o.location.search),u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m),t&&t!==c&&{[a.eG]:t}),c&&{[a.yG]:c}),s&&{[a.dV]:s}),{group_by:{[r]:l}});return"account"===i?(u.filter||(u.filter={}),u.filter.account=l,u.group_by={[a.dV]:s}):"organizational_unit"===i&&(u.group_by={[a.dV]:l}),`${e}?${(0,n.IV)(u)}`},o=e=>e&&e.filter&&e.filter.category===a.rx}}]);
//# sourceMappingURL=../sourcemaps/permissionsWrapper.ab3745b1ff92e2ec4a46b2bebdb90186.js.map