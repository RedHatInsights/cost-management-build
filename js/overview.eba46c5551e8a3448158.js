"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{53086:(e,t,r)=>{r.d(t,{xX:()=>o,yK:()=>s});var a=r(40400);const s={name:"OkIcon",height:1024,width:1024,svgPath:"M668.3,361.4 L465.1,564.6 L352.2,451.7 C346.210177,445.698444 338.079189,442.325817 329.6,442.325817 C321.120811,442.325817 312.989823,445.698444 307,451.7 L261.8,496.9 C255.798444,502.889823 252.425817,511.020811 252.425817,519.5 C252.425817,527.979189 255.798444,536.110177 261.8,542.1 L442.4,722.7 C448.389823,728.701556 456.520811,732.074183 465,732.074183 C473.479189,732.074183 481.610177,728.701556 487.6,722.7 L758.6,451.7 C764.601556,445.710177 767.974183,437.579189 767.974183,429.1 C767.974183,420.620811 764.601556,412.489823 758.6,406.5 L713.4,361.3 C700.916226,348.87879 680.728569,348.923552 668.3,361.4 M512.1,127.9 C300.3,127.9 128.1,300.2 128.1,511.9 C128.1,723.8 300.3,895.9 512.1,895.9 C723.9,895.9 896.1,723.7 896.1,511.9 C896.1,300.1 723.8,127.9 512.1,127.9 M512.1,1024 C229.7,1024 0,794.3 0,512 C0,229.7 229.7,0 512.1,0 C794.3,0 1024,229.7 1024,512 C1024,794.3 794.3,1024 512.1,1024",yOffset:0,xOffset:0},o=(0,a.IU)(s)},84717:(e,t,r)=>{r.d(t,{H:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},37610:(e,t,r)=>{r.d(t,{T:()=>s});var a=r(80129);function s(e){return(0,a.stringify)(e,{encode:!1,indices:!1})}},6450:(e,t,r)=>{r.d(t,{F:()=>y,m:()=>m});var a=r(90154),s=r(97027),o=r(92950),n=r.n(o),c=r(74806),i=r(77760),l=r(1156),p=r(15829);const u={currencySelector:{display:"flex",alignItems:"center"},currencyLabel:{marginBottom:0,marginRight:r(32412).ZP.var,whiteSpace:"nowrap"}},m=[{label:s.Z.currencyOptions,value:"AUD"},{label:s.Z.currencyOptions,value:"CAD"},{label:s.Z.currencyOptions,value:"CHF"},{label:s.Z.currencyOptions,value:"CNY"},{label:s.Z.currencyOptions,value:"DKK"},{label:s.Z.currencyOptions,value:"EUR"},{label:s.Z.currencyOptions,value:"GBP"},{label:s.Z.currencyOptions,value:"HKD"},{label:s.Z.currencyOptions,value:"JPY"},{label:s.Z.currencyOptions,value:"NOK"},{label:s.Z.currencyOptions,value:"NZD"},{label:s.Z.currencyOptions,value:"SEK"},{label:s.Z.currencyOptions,value:"SGD"},{label:s.Z.currencyOptions,value:"USD"},{label:s.Z.currencyOptions,value:"ZAR"}];class d extends n().Component{constructor(){super(...arguments),this.defaultState={isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{currency:e,isDisabled:t,showLabel:r=!0}=this.props,{isSelectOpen:s}=this.state,o=this.getSelectOptions(),c=o.find((t=>t.value===e));return n().createElement(a.Select,{className:r?"currencyOverride":void 0,id:"currencySelect",isDisabled:t,isOpen:s,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:c,variant:a.SelectVariant.single},o.map((e=>n().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{intl:e}=this.props,t=[];return m.map((r=>{t.push({toString:()=>e.formatMessage(r.label,{units:r.value}),value:r.value})})),t},this.handleSelect=(e,t)=>{const{isLocalStorage:r=!0,onSelect:a}=this.props;r&&(0,p.NW)(t.value),this.setState({isSelectOpen:!1},(()=>{a&&a(t.value)}))},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){const{intl:e,showLabel:t=!0}=this.props;return n().createElement("div",{style:u.currencySelector},t&&n().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.md,style:u.currencyLabel},e.formatMessage(s.Z.currency)),this.getSelect())}}const h=(0,l.X1)((()=>({}))),g=(0,i.connect)(h,{})(d),y=(0,c.ZP)(g)},29774:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Mt});var a=r(90154),s=r(39333),o=r(97027),n=r(92950),c=r.n(n),i=r(74806),l=r(77760),p=r(6279),u=r(6450),m=r(1156),d=r(29379),h=r(15829),g=r(5842),y=r(49382),b=r(98499),f=r(32412),T=r(48196);const v={actionsContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var},costType:{marginBottom:b.ZP.var,marginTop:b.ZP.var,width:"fit-content"},costTypeContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},currency:{marginTop:b.ZP.var,width:"fit-content"},currencyContainer:{backgroundColor:y.ZP.var,paddingBottom:b.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},resetContainer:{display:"inline-block",paddingLeft:f.ZP.var},title:{paddingBottom:T.ZP.var}};class E extends c().Component{constructor(){super(...arguments),this.defaultState={currentCostType:(0,h.uY)(),currentCurrency:(0,h.zC)()},this.state=Object.assign({},this.defaultState),this.getActions=()=>{const{intl:e}=this.props,{currentCostType:t,currentCurrency:r}=this.state,s=t===(0,h.uY)()&&r===(0,h.zC)();return c().createElement("div",{style:v.actionsContainer},c().createElement(a.Button,{isDisabled:s,key:"save",onClick:this.handleOnSave,variant:a.ButtonVariant.primary},e.formatMessage(o.Z.save)),c().createElement("div",{style:v.resetContainer},c().createElement(a.Button,{isDisabled:s,key:"reset",onClick:this.handleOnReset,variant:a.ButtonVariant.secondary},e.formatMessage(o.Z.reset))))},this.getCostType=()=>{const{intl:e}=this.props,{currentCostType:t}=this.state;return c().createElement("div",{style:v.costTypeContainer},c().createElement(a.Title,{headingLevel:"h2",style:v.title,size:a.TitleSizes.md},e.formatMessage(o.Z.costTypeSettingsLabel)),e.formatMessage(o.Z.costTypeSettingsDesc),c().createElement("div",{style:v.costType},c().createElement(p.T,{costType:t,isLocalStorage:!1,onSelect:this.handleOnCostTypeSelected,showLabel:!1})))},this.getCurrency=()=>{const{intl:e}=this.props,{currentCurrency:t}=this.state;return c().createElement("div",{style:v.currencyContainer},c().createElement(a.Title,{headingLevel:"h2",style:v.title,size:a.TitleSizes.md},e.formatMessage(o.Z.currency)),e.formatMessage(o.Z.currencyDesc),c().createElement("div",{style:v.currency},c().createElement(u.F,{currency:t,isLocalStorage:!1,onSelect:this.handleOnCurrencySelected,showLabel:!1})))},this.handleOnCostTypeSelected=e=>{this.setState({currentCostType:e})},this.handleOnCurrencySelected=e=>{this.setState({currentCurrency:e})},this.handleOnReset=()=>{this.setState({currentCostType:(0,h.uY)(),currentCurrency:(0,h.zC)()})},this.handleOnSave=()=>{const{updateSettings:e}=this.props,{currentCostType:t,currentCurrency:r}=this.state;(0,h.M1)(t),(0,h.NW)(r),(0,h.Nc)(r),e({api:{settings:{cost_type:t,currency:r}}})}}render(){return c().createElement(a.PageSection,{isFilled:!0},this.getCurrency(),this.getCostType(),this.getActions())}}const S=(0,m.X1)((e=>({updateSettingsStatus:d.Hq.selectSettingsUpdateStatus(e)}))),P={updateSettings:d.ff.VP},C=(0,i.ZP)((0,g.E)((0,l.connect)(S,P)(E)));var Z=r(80129),M=r(58613),R=r(91800),O=r(73805),F=r(45868),I=r(40227);const k={limit:10,offset:0,ordering:null,name:null,source_type:null,description:null};function D(e){return Object.keys(e).reduce(((t,r)=>null===e[r]?t:""===t?`?${r}=${e[r]}`:`${t}&${r}=${e[r]}`),"")}function j(e,t){return(e-1)*t}Object.keys(k);const A=(0,g.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:a}=M.E6.pagination(e);return{query:M.E6.query(e),count:t,page:r,perPage:a}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:c,query:i}=e;return{itemCount:o,page:n,perPage:c,variant:a.PaginationVariant.bottom,onSetPage:(e,t,r)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),i),{offset:j(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),i),{limit:t,offset:0})))}}}))((0,i.ZP)((e=>{const{variant:t,intl:r=F.N,itemCount:s,page:n,perPage:i,onSetPage:l,onPerPageSelect:p}=e;return c().createElement(a.Toolbar,null,c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},c().createElement(a.Pagination,{onPerPageSelect:p,onSetPage:l,variant:t,itemCount:s,page:n,perPage:i,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsDetailsTitle),placement:"bottom"})}}))))})))),V={descContainer:{backgroundColor:y.ZP.value,padding:f.ZP.value}};var z=r(45958),L=r(69957),x=r(34327),w=r(44439),W=r(91778),N=r(1326);const B={apiError:null,checked:{},clearQuery:()=>null,createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,h.tk)(),dataFetched:!1,description:"",dirtyName:!1,distribution:"",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,fetchSources:(e,t,r,a)=>null,filterName:"",goToAddPL:e=>null,isDiscount:!1,handleMarkupDiscountChange:(...e)=>null,handleDistributionChange:(...e)=>null,handleDistributePlatformUnallocatedChange:(...e)=>null,handleDistributeWorkerUnallocatedChange:(...e)=>null,handleSignChange:(...e)=>null,loading:!1,markup:"",metricsHash:{},name:"",onClose:()=>null,onCurrencyChange:e=>null,onDescChange:e=>null,onFilterChange:e=>null,onPageChange:(e,t)=>null,onPerPageChange:(e,t)=>null,onTypeChange:e=>null,onNameChange:e=>null,onSourceSelect:(...e)=>null,page:1,perPage:10,priceListPagination:{page:1,perPage:4,onPerPageSet:(e,t)=>null,onPageSet:(e,t)=>null},query:{},step:1,setSources:e=>null,sources:[],submitTiers:e=>null,tiers:[],total:0,type:""},U=c().createContext(B);var _=r(28056);const K={form:{width:"350px"},textArea:{maxWidth:"450px",minWidth:"350px",minHeight:"75px",maxHeight:"150px"},selector:{maxHeight:"350px"},titleWithLearnMore:{display:"inline-block",marginRight:"1em"}};class G extends c().Component{render(){const{intl:e}=this.props;return c().createElement(U.Consumer,null,(({handleDistributionChange:t,handleDistributePlatformUnallocatedChange:r,handleDistributeWorkerUnallocatedChange:s,distribution:n,distributePlatformUnallocated:i,distributeWorkerUnallocated:l})=>c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:K.titleWithLearnMore},e.formatMessage(o.Z.costDistribution)),c().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsDistribution),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.distributionType)),c().createElement(a.TextContent,null,c().createElement(a.Text,{style:K.cardDescription},e.formatMessage(o.Z.distributionModelDesc)))),c().createElement(a.StackItem,{isFilled:!0},c().createElement(_.l,null,c().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-type",isRequired:!0},c().createElement(a.Radio,{isChecked:"cpu"===n,name:"distributionType",label:e.formatMessage(o.Z.cpuTitle),"aria-label":e.formatMessage(o.Z.cpuTitle),id:"cpuDistribution",value:"cpu",onChange:t}),c().createElement(a.Radio,{isChecked:"memory"===n,name:"distributionType",label:e.formatMessage(o.Z.memoryTitle),"aria-label":e.formatMessage(o.Z.memoryTitle),id:"memoryDistribution",value:"memory",onChange:t})))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.platform)),c().createElement(a.TextContent,null,c().createElement(a.Text,{style:K.cardDescription},e.formatMessage(o.Z.platformDesc)))),c().createElement(a.StackItem,{isFilled:!0},c().createElement(_.l,null,c().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-platform-unallocated",isRequired:!0},c().createElement(a.Radio,{isChecked:i,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributePlatformTrue",value:"true",onChange:r}),c().createElement(a.Radio,{isChecked:!i,name:"distributePlatformUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributePlatformFalse",value:"false",onChange:r})))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.workerUnallocated)),c().createElement(a.TextContent,null,c().createElement(a.Text,{style:K.cardDescription},e.formatMessage(o.Z.workerUnallocatedDesc)))),c().createElement(a.StackItem,{isFilled:!0},c().createElement(_.l,null,c().createElement(a.FormGroup,{isInline:!0,fieldId:"cost-distribution-worker-unallocated",isRequired:!0},c().createElement(a.Radio,{isChecked:l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.distribute),"aria-label":e.formatMessage(o.Z.distribute),id:"distributeWorkerTrue",value:"true",onChange:s}),c().createElement(a.Radio,{isChecked:!l,name:"distributeWorkerUnallocated",label:e.formatMessage(o.Z.doNotDistribute),"aria-label":e.formatMessage(o.Z.doNotDistribute),id:"distributeWorkerFalse",value:"false",onChange:s})))))))}}const q=(0,m.X1)((()=>({}))),H=(0,i.ZP)((0,l.connect)(q,{})(G));var $=r(972);const X=e=>0===e.length?o.Z.costModelsRequiredField:e.length>100?o.Z.costModelsInfoTooLong:null,J=e=>e.length>500?o.Z.costModelsDescTooLong:null,Q=e=>""!==e.trim()&&(!!(0,W.WW)(e)&&!((0,W.cR)(e)>10)),Y={"":[()=>!1],AWS:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],Azure:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],GCP:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>Q(e.markup),()=>!0,()=>!0],OCP:[e=>null===X(e.name)&&null===J(e.description)&&""!==e.type,e=>e.priceListCurrent.justSaved,e=>Q(e.markup),()=>!0,()=>!0,()=>!0]};class ee extends c().Component{render(){const e=(e,r)=>{const a=r.find((t=>t.value===e));return a?t.formatMessage(a.label,{units:a.value}):e},{intl:t}=this.props,r=[{label:o.Z.costModelsWizardOnboardAws,value:"AWS"},{label:o.Z.azure,value:"Azure"},{label:o.Z.gcp,value:"GCP"},{label:o.Z.costModelsWizardOnboardOcp,value:"OCP"}];return c().createElement(U.Consumer,null,(({currencyUnits:s,dirtyName:n,description:i,name:l,type:p,onCurrencyChange:m,onNameChange:d,onDescChange:h,onTypeChange:g})=>c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:K.titleWithLearnMore},t.formatMessage(o.Z.costModelsWizardGeneralInfoTitle)),c().createElement("a",{href:t.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},t.formatMessage(o.Z.learnMore))),c().createElement(a.StackItem,null,c().createElement(_.l,{style:K.form},c().createElement(a.FormGroup,{helperTextInvalid:X(l)&&t.formatMessage(X(l)),validated:null!==X(l)&&n?"error":"default",label:t.formatMessage(o.Z.names,{count:1}),isRequired:!0,fieldId:"name"},c().createElement(a.TextInput,{validated:null!==X(l)&&n?"error":"default",isRequired:!0,type:"text",id:"name",name:"name",value:l,onChange:d})),c().createElement(a.FormGroup,{helperTextInvalid:J(i)&&t.formatMessage(J(i)),validated:null===J(i)?"default":"error",label:t.formatMessage(o.Z.description),fieldId:"description"},c().createElement(a.TextArea,{style:K.textArea,type:"text",id:"description",name:"description",value:i,validated:null===J(i)?"default":"error",onChange:h})),c().createElement($.Q,{isRequired:!0,id:"source-type-selector",direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:K.selector.maxHeight,label:o.Z.costModelsSourceType,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),placeholderText:t.formatMessage(o.Z.costModelsWizardEmptySourceTypeLabel),value:e(p,r),onChange:g,options:r}),c().createElement($.Q,{label:o.Z.currency,direction:a.SelectDirection.up,appendMenuTo:"inline",maxHeight:K.selector.maxHeight,toggleAriaLabel:t.formatMessage(o.Z.costModelsWizardCurrencyToggleLabel),value:e(s,u.m),onChange:m,id:"currency-units-selector",options:u.m.map((e=>({label:t.formatMessage(e.label,{units:e.value}),value:e.value})))}))))))}}const te=(0,m.X1)((()=>({}))),re=(0,i.ZP)((0,l.connect)(te,{})(ee));var ae=r(65159);class se extends c().Component{render(){const{intl:e}=this.props,t=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};return c().createElement(U.Consumer,null,(({handleSignChange:r,handleMarkupDiscountChange:s,markup:n,isDiscount:i})=>{const l=(p=n,(0,W.WW)(p)?(0,W.cR)(p)>10?o.Z.markupOrDiscountTooLong:void 0:o.Z.markupOrDiscountNumber);var p;const u=l?"error":"default";return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl,style:K.titleWithLearnMore},e.formatMessage(o.Z.costCalculationsOptional)),c().createElement("a",{href:e.formatMessage(o.Z.docsCostModelsMarkup),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))),c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h3",size:a.TitleSizes.md},e.formatMessage(o.Z.markupOrDiscount)),c().createElement(a.TextContent,null,c().createElement(a.Text,null,e.formatMessage(o.Z.markupOrDiscountModalDesc)))),c().createElement(a.StackItem,null,c().createElement(a.Flex,{style:ae.W.markupRadioContainer},c().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},c().createElement(a.FlexItem,null,c().createElement(a.Radio,{isChecked:!i,name:"discount",label:e.formatMessage(o.Z.markupPlus),"aria-label":e.formatMessage(o.Z.markupPlus),id:"markup",value:"false",onChange:r,style:ae.W.markupRadio}),c().createElement(a.Radio,{isChecked:i,name:"discount",label:e.formatMessage(o.Z.discountMinus),"aria-label":e.formatMessage(o.Z.discountMinus),id:"discount",value:"true",onChange:r}))),c().createElement(a.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},c().createElement(a.FlexItem,null,c().createElement(_.l,null,c().createElement(a.FormGroup,{fieldId:"markup-input-box",helperTextInvalid:l?e.formatMessage(l):void 0,style:ae.W.rateContainer,validated:u},c().createElement(a.InputGroup,null,c().createElement(a.InputGroupText,{style:ae.W.sign},i?e.formatMessage(o.Z.discountMinus):e.formatMessage(o.Z.markupPlus)),c().createElement(a.TextInput,{"aria-label":e.formatMessage(o.Z.rate),id:"markup-input-box",isRequired:!0,onKeyDown:t,onChange:s,placeholder:"0",style:ae.W.inputField,type:"text",validated:u,value:n}),c().createElement(a.InputGroupText,{style:ae.W.percent},e.formatMessage(o.Z.percentSymbol))))))))),c().createElement(a.StackItem,null,c().createElement("div",{style:ae.W.exampleMargin},c().createElement(a.TextContent,null,c().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(o.Z.examplesTitle))),c().createElement(a.List,null,c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesNoAdjust)),c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesDoubleMarkup)),c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceZero)),c().createElement(a.ListItem,null,e.formatMessage(o.Z.costModelsExamplesReduceSeventyfive))))))}))}}const oe=(0,m.X1)((()=>({}))),ne=(0,i.ZP)((0,l.connect)(oe,{})(se));var ce=r(59046),ie=r(63359);const le=(0,i.ZP)((({cancel:e,currencyUnits:t,intl:r=F.N,metricsHash:s,submitRate:n})=>{const{tiers:i}=c().useContext(U),l=(0,ie.bF)(s,void 0,i),p=c().useMemo((()=>(0,ie.Cw)(l)),[l.errors,l.rateKind]);return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,{component:a.TextVariants.h3},r.formatMessage(o.Z.costModelsWizardPriceListMetric)))),c().createElement(a.StackItem,null,c().createElement(a.Form,null,c().createElement(ie.HJ,{currencyUnits:t,metricsHash:s,rateFormData:l}))),c().createElement(a.StackItem,null,c().createElement(a.ActionGroup,null,c().createElement(a.Button,{variant:a.ButtonVariant.primary,isDisabled:!p,onClick:()=>n(l)},r.formatMessage(o.Z.createRate)),c().createElement(a.Button,{variant:a.ButtonVariant.link,onClick:e},r.formatMessage(o.Z.cancel)))))}));var pe=r(7081),ue=r(42901),me=r(44742);const de=(0,i.ZP)((({id:e,intl:t,itemCount:r,perPage:s,page:n,variant:i,onPerPageSelect:l,onSetPage:p})=>c().createElement(a.Toolbar,{id:e},c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarItem,{variant:"pagination"},c().createElement(a.Pagination,{variant:i,itemCount:r,perPage:s,page:n,onSetPage:p,onPerPageSelect:l,titles:{paginationTitle:t.formatMessage(o.Z.paginationTitle,{title:t.formatMessage(o.Z.createCostModelTitle),placement:"bottom"})}}))))));var he=r(59212),ge=r(62852),ye=r(49169),be=r(53904),fe=r(22962);class Te extends c().Component{constructor(){super(...arguments),this.defaultState={metrics:[],measurements:[],sortBy:{index:0,direction:I.SortByDirection.asc}},this.state=Object.assign({},this.defaultState)}render(){const{addRateAction:e,deleteRateAction:t,intl:r,items:s,metricsHash:n}=this.props,i=e=>{const t=e.replace(/ /g,"_").toLowerCase();return r.formatMessage(o.Z.metricValues,{value:t})||e},l=e=>r.formatMessage(o.Z.measurementValues,{value:e.toLowerCase().replace("-","_"),count:1})||e,p=Object.keys(n).map((e=>({label:i(e),value:e}))),u=p.reduce(((e,t)=>{const r=Object.keys(n[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:l(e),value:e})));return[...e,...r]}),[]),m=()=>c().createElement(a.Bullseye,null,c().createElement(a.EmptyState,null,c().createElement(a.EmptyStateIcon,{icon:pe.wl}),c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},r.formatMessage(o.Z.costModelsWizardEmptyStateTitle)),c().createElement(a.EmptyStateBody,null,r.formatMessage(o.Z.costModelsWizardEmptyStateSkipStep,{value:c().createElement("strong",null,r.formatMessage(o.Z.next))}),c().createElement("br",null),r.formatMessage(o.Z.costModelsWizardEmptyStateOtherTime))));return c().createElement(U.Consumer,null,(({priceListPagination:n})=>c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},r.formatMessage(o.Z.costModelsWizardCreatePriceList))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,r.formatMessage(o.Z.costModelsWizardSubTitleTable)))),c().createElement(a.StackItem,null,c().createElement(me.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:i,setSearch:l,onRemove:d,onSelect:h,onClearAll:g})=>{const y=(n.page-1)*n.perPage,b=n.page*n.perPage,f=s.map(((e,t)=>Object.assign(Object.assign({},e),{stateIndex:t}))).filter((e=>0===i.metrics.length||i.metrics.includes(e.metric.label_metric))).filter((e=>0===i.measurements.length||i.measurements.includes(e.metric.label_measurement))).sort(((e,t)=>{const a=1===this.state.sortBy.index?e=>{return t=e.metric.label_metric,r.formatMessage(o.Z.metricValues,{value:t})||t;var t}:2===this.state.sortBy.index?e=>{return t=e.metric.label_measurement,a=e.metric.label_measurement_unit,a=r.formatMessage(o.Z.units,{units:(0,W.ZV)(a)})||a,r.formatMessage(o.Z.measurementValues,{value:t.toLowerCase().replace("-","_"),units:a,count:2});var t,a}:()=>"";return(0,ge.tT)(e,t,this.state.sortBy.direction,a)})),T=f.slice(y,b);return c().createElement(c().Fragment,null,c().createElement(he.Q,{primary:c().createElement(fe.J,{isDisabled:0===s.length,primary:i.primary,setPrimary:e=>l({primary:e}),options:[{label:r.formatMessage(o.Z.metric),value:"metrics"},{label:r.formatMessage(o.Z.measurement),value:"measurements"}]}),selected:i.primary,secondaries:[{component:c().createElement(be.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMeasurementPlaceHolder),selections:i.measurements,setSelections:e=>h("measurements",e),options:u}),name:"measurements",onRemove:d,filters:i.measurements},{component:c().createElement(be.n,{isDisabled:0===s.length,placeholderText:r.formatMessage(o.Z.toolBarPriceListMetricPlaceHolder),selections:i.metrics,setSelections:e=>h("metrics",e),options:p}),name:"metrics",onRemove:d,filters:i.metrics}],button:c().createElement(a.Button,{onClick:e},r.formatMessage(o.Z.createRate)),onClear:g,pagination:c().createElement(a.Pagination,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"top"})}})}),0===T.length&&(0!==this.state.metrics.length||0!==this.state.measurements.length)&&c().createElement(a.Bullseye,null,c().createElement(ue.c,null)),0===T.length&&0===this.state.metrics.length&&0===this.state.measurements.length&&c().createElement(m,null),T.length>0&&c().createElement(ye.y,{actions:[{title:r.formatMessage(o.Z.remove),onClick:(e,r,a)=>{t(a.data.stateIndex)}}],tiers:T,sortCallback:e=>{this.setState(Object.assign(Object.assign({},this.state),{sortBy:Object.assign({},e)}))}}),c().createElement(de,{isCompact:!0,itemCount:f.length,perPage:n.perPage,page:n.page,onSetPage:n.onPageSet,onPerPageSelect:n.onPerPageSet,titles:{paginationTitle:r.formatMessage(o.Z.paginationTitle,{title:r.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}}))}))))))}}const ve=(0,l.connect)((0,m.X1)((e=>({metricsHash:R.qw.metrics(e)}))))((0,i.ZP)(Te)),Ee=()=>{const{currencyUnits:e,goToAddPL:t,metricsHash:r,tiers:a,submitTiers:s}=c().useContext(U),[o,n]=c().useState("table");return"table"===o?c().createElement(ve,{items:a,deleteRateAction:e=>{const r=[...a.slice(0,e),...a.slice(e+1)];s(r),0===r.length&&t(!0)},addRateAction:()=>{n("form"),t(!1)}}):"form"===o?c().createElement(le,{currencyUnits:e,metricsHash:r,submitRate:o=>{var c;c=(0,ie.Nl)(o,r,e),s([...a,c]),n("table"),t(!0)},cancel:()=>{n("table"),t(!0)}}):null};var Se=r(53086),Pe=r(43029);const Ce=(0,i.ZP)((({intl:e})=>c().createElement(U.Consumer,null,(({onClose:t,name:r})=>c().createElement(a.EmptyState,null,c().createElement(a.EmptyStateIcon,{icon:Se.xX,color:"green"}),c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o.Z.costModelsWizardReviewStatusTitle)),c().createElement(a.EmptyStateBody,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubTitle,{value:r})),c().createElement(a.EmptyStateSecondaryActions,null,c().createElement(a.Button,{variant:"link",onClick:t},e.formatMessage(o.Z.close)))))))),Ze=(0,m.X1)((()=>({}))),Me=(0,i.ZP)((0,l.connect)(Ze,{})((({intl:e})=>c().createElement(U.Consumer,null,(({checked:t,createError:r,currencyUnits:s,description:n,distribution:i,distributePlatformUnallocated:l,distributeWorkerUnallocated:p,isDiscount:u,markup:m,name:d,tiers:h,type:g})=>{const y=Object.keys(t).filter((e=>t[e].selected)).map((e=>t[e].meta));return c().createElement(c().Fragment,null,r&&c().createElement(a.Alert,{variant:"danger",title:`${r}`}),c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardStepsReview))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,e.formatMessage(o.Z.costModelsWizardReviewStatusSubDetails,{create:c().createElement("strong",null,e.formatMessage(o.Z.create)),back:c().createElement("strong",null,e.formatMessage(o.Z.back))})))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.TextList,{component:a.TextListVariants.dl},c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.names,{count:1})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},d),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.description)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},n),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.currency)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.currencyOptions,{units:s})),"OCP"===g&&c().createElement(c().Fragment,null,c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.priceList)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},h.length>0?c().createElement(ye.y,{tiers:h}):e.formatMessage(o.Z.costModelsWizardNoRatesAdded))),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsWizardReviewMarkDiscount)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.percent,{value:u?"-"+m:m})),"OCP"===g&&c().createElement(c().Fragment,null,c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costDistribution)),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributionTypeDesc,{type:i})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:l,type:"platform"})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},e.formatMessage(o.Z.distributeCosts,{value:p,type:"worker"}))),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dt},e.formatMessage(o.Z.costModelsAssignSources,{count:2})," ",y.find((e=>Boolean(e.costmodel)))&&c().createElement(Pe.a,{text:e.formatMessage(o.Z.costModelsWizardWarningSources)})),c().createElement(a.TextListItem,{component:a.TextListItemVariants.dd},y.map((e=>e.name)).join(", ")))))))}))))),Re=()=>c().createElement(U.Consumer,null,(({createSuccess:e})=>e?c().createElement(Ce,null):c().createElement(Me,null)));var Oe=r(261),Fe=r(80405),Ie=r(54425),ke=r(76889),De=r(80810);const je=({id:e,placeholder:t="",value:r,onChange:s,onSearch:o})=>c().createElement(a.InputGroup,null,c().createElement(a.TextInput,{value:r,placeholder:t,id:e,onChange:s,onKeyPress:e=>{"Enter"===e.key&&""!==r&&o(e)}}),c().createElement(a.InputGroupText,{style:{borderLeft:"0"}},c().createElement(De.W1,null))),Ae=(0,i.ZP)((({intl:e,filterInputProps:t,paginationProps:r,filter:s})=>c().createElement(a.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:s.onClearAll},c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:c().createElement(ke.k1,null)},c().createElement(a.ToolbarItem,{variant:"search-filter"},c().createElement(a.ToolbarFilter,{deleteChip:s.onRemove,chips:s.query.name,categoryName:"name"},c().createElement(je,Object.assign({placeholder:e.formatMessage(o.Z.costModelsFilterPlaceholder)},t))))),c().createElement(a.ToolbarItem,{variant:"pagination"},c().createElement(a.Pagination,{isCompact:r.isCompact,itemCount:r.itemCount,page:r.page,perPage:r.perPage,onSetPage:r.onSetPage,onPerPageSelect:r.onPerPageSelect,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.costModelsAssignSourcesParen),placement:"bottom"})}})))))),Ve=(0,i.ZP)((({intl:e})=>c().createElement(U.Consumer,null,(({checked:t,loading:r,onSourceSelect:s,sources:n,perPage:i,page:l,type:p,query:u,fetchSources:m,filterName:d,onFilterChange:h})=>{const g="Azure"===p?"Azure":p,y=n.length>0?n[0].meta.count:0;return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.xl},e.formatMessage(o.Z.costModelsWizardSourceTitle))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,e.formatMessage(o.Z.costModelsWizardSourceSubtitle)))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,{component:a.TextVariants.h3},e.formatMessage(o.Z.costModelsWizardSourceCaption,{value:p.toLowerCase()})))),c().createElement(a.StackItem,null,c().createElement(Ae,{filter:{onRemove:(e,t)=>m(g,(0,Ie.fg)(u)(e,t),1,i),onClearAll:()=>m(g,{},1,i),query:u},filterInputProps:{id:"assign-source-search-input",value:d,onChange:h,onSearch:()=>{m(g,(0,Ie.xZ)(u)("name",d),1,i)}},paginationProps:{isCompact:!0,itemCount:y,perPage:i,page:l,onSetPage:(e,t)=>{m(g,u,t,i)},onPerPageSelect:(e,t)=>m(g,u,1,t)}}),r?c().createElement(Oe.G,null):c().createElement(I.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsWizardSourceTableAriaLabel),variant:I.TableVariant.compact},c().createElement(I.Thead,null,c().createElement(I.Tr,null,["",e.formatMessage(o.Z.names,{count:1}),e.formatMessage(o.Z.costModelsWizardSourceTableCostModel)].map(((e,t)=>c().createElement(I.Th,{key:t},e))))),c().createElement(I.Tbody,null,n.map(((r,n)=>c().createElement(I.Tr,{key:n},c().createElement(I.Td,null,c().createElement(a.Checkbox,{onChange:e=>{s(n,e)},id:r.name,key:r.name,"aria-label":e.formatMessage(o.Z.selectRow,{value:n}),isChecked:t[r.uuid]&&t[r.uuid].selected,isDisabled:Boolean(r.costmodel)})),c().createElement(I.Td,null,r.name," ",r.costmodel&&c().createElement(Pe.a,{key:`wrng-${r.name}`,text:e.formatMessage(o.Z.costModelsWizardSourceWarning,{costModel:r.costmodel})})),c().createElement(I.Td,null,r.costmodel?r.costmodel:"")))))),c().createElement(de,{itemCount:y,perPage:i,page:l,titles:{paginationTitle:e.formatMessage(o.Z.paginationTitle,{title:e.formatMessage(o.Z.sources),placement:"bottom"})},onSetPage:(e,t)=>{m(g,u,t,i)},onPerPageSelect:(e,t)=>m(g,u,1,t)})))}))));class ze extends c().Component{constructor(e){super(e),this.fetchData=()=>null,this.fetchData=()=>{const{type:e,query:t,page:r,perPage:a,fetchSources:s}=this.context;s("Azure"===e?"Azure":e,t,r,a)}}componentDidMount(){const{dataFetched:e}=this.context;e||this.fetchData()}renderContent(){return this.context.loading?c().createElement(Oe.G,null):this.context.apiError?c().createElement(Fe.Bu,{onRefresh:this.fetchData}):c().createElement(Ve,null)}render(){return this.renderContent()}}ze.contextType=U;const Le=ze,xe=(e,t="USD")=>{const r=(0,w.cloneDeep)(e);return r.map((e=>{if(e.tiered_rates)for(const r of e.tiered_rates)r.unit=t,r.usage.unit=t;if(e.tag_rates)for(const r of e.tag_rates.tag_values)r.unit=t})),r},we=(0,i.ZP)((({intl:e,isProcess:t,isSuccess:r,closeFnc:s,isOpen:n,onMove:i,validators:l,steps:p,current:u=1,context:m,setError:d,setSuccess:h,updateCostModel:g})=>{const y=p.map(((e,t)=>Object.assign(Object.assign({},e),{canJumpTo:u>t})));y[u-1].enableNext=l[u-1](m);const b="OCP"===m.type&&2===u&&!l[u-1](m);return u===p.length&&""!==m.type&&(y[u-1].nextButtonText=e.formatMessage(o.Z.create)),n?c().createElement(a.Wizard,{isOpen:!0,title:e.formatMessage(o.Z.createCostModelTitle),description:e.formatMessage(o.Z.createCostModelDesc),steps:y,startAtStep:u,onNext:i,onBack:i,onGoToStep:i,onClose:s,footer:r||t||b?c().createElement("div",null):null,onSave:()=>{const{currency:e,description:t,distribution:r,distributePlatformUnallocated:a,distributeWorkerUnallocated:s,isDiscount:o,markup:n,name:c,type:i,tiers:l,sources:p}=m;(0,x.Rl)({name:c,source_type:i,currency:e,description:t,distribution_info:{distribution_type:r,platform_cost:a,worker_cost:s},rates:l,markup:{value:`${o?"-":""}${(0,W.E3)(n)}`,unit:"percent"},source_uuids:p.map((e=>e.uuid))}).then((()=>{h(),g()})).catch((e=>d((0,ce.L)(e))))}}):null}));class We extends c().Component{constructor(){super(...arguments),this.defaultState={apiError:null,checked:{},createError:null,createProcess:!1,createSuccess:!1,currencyUnits:(0,h.tk)(),dataFetched:!1,dirtyName:!1,description:"",distribution:"cpu",distributePlatformUnallocated:!0,distributeWorkerUnallocated:!0,error:null,filterName:"",isDialogOpen:!1,isDiscount:!1,loading:!1,markup:"0",name:"",page:1,perPage:10,priceListCurrent:{metric:"",measurement:"",rate:"",justSaved:!0},priceListPagination:{page:1,perPage:10},query:{},sources:[],step:1,tiers:[],total:0,type:""},this.state=Object.assign({},this.defaultState)}render(){const{metricsHash:e,intl:t}=this.props,r=()=>{this.setState({isDialogOpen:!1},this.props.openWizard)},s=c().createElement(a.Button,{key:"cancel",variant:"link",onClick:r},t.formatMessage(o.Z.createCostModelNoContinue)),n=c().createElement(a.Button,{key:"ok",variant:"primary",onClick:()=>this.setState(Object.assign({},this.defaultState))},t.formatMessage(o.Z.createCostModelExitYes));return c().createElement(U.Provider,{value:{apiError:this.state.apiError,checked:this.state.checked,clearQuery:()=>this.setState({query:{}}),createError:this.state.createError,createProcess:this.state.createProcess,createSuccess:this.state.createSuccess,currencyUnits:this.state.currencyUnits,description:this.state.description,dataFetched:this.state.dataFetched,dirtyName:this.state.dirtyName,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,error:this.state.error,filterName:this.state.filterName,fetchSources:(e,t,r,a)=>{this.setState({loading:!0,apiError:null,filterName:""},(()=>(({type:e,page:t,perPage:r,query:a})=>{const s=(t-1)*r,o=r,n=Object.keys(a).reduce(((e,t)=>e?`${e}&${t}=${a[t]}`:`${t}=${a[t]}`),"");return(0,N.s)(`type=${e}&limit=${o}&offset=${s}&${n}`).then((e=>{const t=e.data;return t.data.map((e=>({name:e.name,uuid:e.uuid,costmodel:e.cost_models.map((e=>e.name)).join(","),meta:t.meta})))}))})({type:e,query:t,page:r,perPage:a}).then((e=>this.setState({sources:e,query:t,page:r,perPage:a,loading:!1,dataFetched:!0,filterName:""}))).catch((e=>this.setState({apiError:e,loading:!1,dataFetched:!0,filterName:""})))))},goToAddPL:e=>this.setState({priceListCurrent:Object.assign(Object.assign({},this.state.priceListCurrent),{justSaved:e||!1})}),handleDistributionChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distribution:r})},handleDistributePlatformUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributePlatformUnallocated:"true"===r})},handleDistributeWorkerUnallocatedChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({distributeWorkerUnallocated:"true"===r})},handleMarkupDiscountChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({markup:r})},handleSignChange:(e,t)=>{const{value:r}=t.currentTarget;this.setState({isDiscount:"true"===r})},isDiscount:this.state.isDiscount,loading:this.state.loading,metricsHash:e,onClose:()=>this.setState(Object.assign({},this.defaultState),this.props.closeWizard),onCurrencyChange:e=>this.setState({currencyUnits:e,tiers:xe(this.state.tiers,e)}),onDescChange:e=>this.setState({description:e}),onFilterChange:e=>this.setState({filterName:e}),onNameChange:e=>this.setState({name:e,dirtyName:!0}),onPageChange:(e,t)=>this.setState({page:t}),onPerPageChange:(e,t)=>this.setState({page:1,perPage:t}),onSourceSelect:(e,t)=>{if(-1===e){const e=this.state.sources.map((e=>({[e.uuid]:{selected:t,meta:e}}))),r=Object.assign(Object.assign({},this.state.checked),e);return this.setState({checked:r})}const r=Object.assign(Object.assign({},this.state.checked),{[this.state.sources[e].uuid]:{selected:t,meta:this.state.sources[e]}});return this.setState({checked:r})},onTypeChange:e=>this.setState({type:e,dataFetched:!1,loading:!1}),page:this.state.page,priceListPagination:{page:this.state.priceListPagination.page,perPage:this.state.priceListPagination.perPage,onPageSet:(e,t)=>this.setState({priceListPagination:Object.assign(Object.assign({},this.state.priceListPagination),{page:t})}),onPerPageSet:(e,t)=>this.setState({priceListPagination:{page:1,perPage:t}})},markup:this.state.markup,name:this.state.name,perPage:this.state.perPage,query:this.state.query,setSources:e=>this.setState({sources:e,dataFetched:!0,loading:!1}),sources:this.state.sources,step:this.state.step,submitTiers:e=>{this.setState({tiers:e})},tiers:this.state.tiers,total:this.state.total,type:this.state.type}},c().createElement(we,{metricsHash:e,isProcess:this.state.createProcess,isSuccess:this.state.createSuccess,closeFnc:()=>{"OCP"===this.state.type&&this.state.step>1&&this.state.tiers.length>0||"OCP"!==this.state.type&&this.state.step>2?this.setState({isDialogOpen:!0},this.props.closeWizard):this.setState(Object.assign({},this.defaultState),this.props.closeWizard)},isOpen:this.props.isOpen,onMove:e=>this.setState({step:Number(e.id)}),steps:{"":[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(re,null)}],Azure:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Le,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(Re,null)}],AWS:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Le,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(Re,null)}],GCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(ne,null)},{id:3,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Le,null)},{id:4,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(Re,null)}],OCP:[{id:1,name:t.formatMessage(o.Z.costModelsWizardStepsGenInfo),component:c().createElement(re,null)},{id:2,name:t.formatMessage(o.Z.priceList),component:c().createElement(Ee,null)},{id:3,name:t.formatMessage(o.Z.costCalculations),component:c().createElement(ne,null)},{id:4,name:t.formatMessage(o.Z.costDistribution),component:c().createElement(H,null)},{id:5,name:t.formatMessage(o.Z.costModelsWizardStepsSources),component:c().createElement(Le,null)},{id:6,name:t.formatMessage(o.Z.costModelsWizardStepsReview),component:c().createElement(Re,null)}]}[this.state.type],current:this.state.step,validators:Y[this.state.type],setError:e=>this.setState({createError:e}),setSuccess:()=>this.setState({createError:null,createSuccess:!0}),updateCostModel:()=>this.props.fetch(),context:{name:this.state.name,type:this.state.type,currency:this.state.currencyUnits,description:this.state.description,distribution:this.state.distribution,distributePlatformUnallocated:this.state.distributePlatformUnallocated,distributeWorkerUnallocated:this.state.distributeWorkerUnallocated,markup:`${this.state.isDiscount?"-":""}${this.state.markup}`,tiers:this.state.tiers,priceListCurrent:this.state.priceListCurrent,sources:Object.keys(this.state.checked).map((e=>this.state.checked[e].meta))}}),c().createElement(a.Modal,{"aria-label":t.formatMessage(o.Z.createCostModelExit),isOpen:this.state.isDialogOpen,header:c().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},c().createElement(L.LP,{color:"orange"})," ",t.formatMessage(o.Z.createCostModelExit)),onClose:r,actions:[n,s],variant:"small"},t.formatMessage(o.Z.createCostModelConfirmMsg)))}}const Ne=(0,l.connect)((0,m.X1)((e=>({metricsHash:R.qw.metrics(e)}))),{fetch:M.F0.fetchCostModels})((0,i.ZP)(We)),Be=(0,i.ZP)((0,l.connect)((e=>({canWrite:O.c5.isCostModelWritePermission(e)})),(e=>({openWizard:()=>e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!0})),closeWizard:()=>e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))})),((e,t,r)=>{const{intl:s=F.N}=r,{canWrite:n}=e,{openWizard:i}=t;return{isDisabled:!n,tooltip:s.formatMessage(o.Z.costModelsReadOnly),children:c().createElement(a.Button,{isDisabled:!n,onClick:i},s.formatMessage(o.Z.costModelsWizardCreateCostModel))}}))(z.j)),Ue=(0,l.connect)((e=>({isOpen:M.E6.isDialogOpen(e)("costmodel").createWizard})),(e=>({openWizard:()=>{e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!0}))},closeWizard:()=>{e(M.F0.setCostModelDialog({name:"createWizard",isOpen:!1}))}})),((e,t)=>{const{isOpen:r}=e,{openWizard:a,closeWizard:s}=t;return{isOpen:r,openWizard:a,closeWizard:s}}))(Ne);function _e({head:e,body:t,sources:r}){return c().createElement(a.Stack,{hasGutter:!0},c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,e))),c().createElement(a.StackItem,null,c().createElement(a.TextContent,null,c().createElement(a.Text,null,t),c().createElement(a.TextList,{component:a.TextListVariants.ol},r.map((e=>c().createElement(a.TextListItem,{key:e},e)))))))}const Ke=(0,i.ZP)((0,l.connect)((e=>({isOpen:M.E6.isDialogOpen(e)("costmodel").deleteCostModel,isLoading:M.E6.deleteProcessing(e),deleteError:M.E6.deleteError(e),dialogData:M.E6.dialogData(e)})),(e=>({closeDialog:()=>e(M.F0.setCostModelDialog({name:"deleteCostModel",isOpen:!1})),deleteCostModel:t=>M.F0.deleteCostModel(t,"deleteCostModel")(e)})),((e,t,r)=>{const{intl:s=F.N}=r,n=(i=e.isLoading,l=e.isOpen,p=e.deleteError,l?i?"loading":p?"failure":"open":"close");var i,l,p;const u=e.dialogData&&e.dialogData.costModel?e.dialogData.costModel:null,m=u?u.name:"",d=u?u.sources.map((e=>e.name)):[],h=u?u.uuid:"",g=function({status:e,deleteText:t,deleteAction:r,cancelText:s,cancelAction:o,sourcesNo:n}){let i=[];return"loading"===e&&(i=[c().createElement(a.Button,{key:"pending_delete",variant:a.ButtonVariant.danger,isDisabled:!0},t),c().createElement(a.Button,{key:"pending_cancel",variant:a.ButtonVariant.link,isDisabled:!0},s)]),["failure","open"].includes(e)&&n>0&&(i=[c().createElement(a.Button,{key:"sources_cancel",variant:a.ButtonVariant.link,onClick:o},s)]),["failure","open"].includes(e)&&0===n&&(i=[c().createElement(a.Button,{key:"delete",variant:a.ButtonVariant.danger,onClick:r},t),c().createElement(a.Button,{key:"cancel",variant:a.ButtonVariant.link,onClick:o},s)]),i}({status:n,deleteText:s.formatMessage(o.Z.costModelsDelete),deleteAction:()=>t.deleteCostModel(h),cancelText:s.formatMessage(o.Z.cancel),cancelAction:t.closeDialog,sourcesNo:d.length}),y=function({status:e,sources:t,error:r,cannotDeleteTitle:s,cannotDeleteBody:o,canDeleteBody:n}){return"close"!==e&&t.length>0?c().createElement(_e,{head:s,body:o,sources:t}):"close"!==e&&0===t.length?c().createElement(a.Stack,{hasGutter:!0},"failure"===e?c().createElement(a.StackItem,null,c().createElement(a.Alert,{variant:a.AlertVariant.danger,title:r})):null,c().createElement(a.StackItem,null,n)):void 0}({status:n,sources:d,error:e.deleteError,cannotDeleteTitle:s.formatMessage(o.Z.costModelsDeleteSource),cannotDeleteBody:s.formatMessage(o.Z.costModelsCanNotDelete,{name:m}),canDeleteBody:s.formatMessage(o.Z.costModelsCanDelete,{name:m})});return{actions:g,isOpen:"close"!==n,variant:a.ModalVariant.small,"aria-label":s.formatMessage(o.Z.costModelsDelete),title:s.formatMessage(o.Z.costModelsDelete),titleIconVariant:"warning",onClose:t.closeDialog,children:y}}))(a.Modal)),Ge=Ke;var qe=r(15984),He=r(39836),$e=r(91919);const Xe=function(e){return c().createElement(a.EmptyState,{className:"pf-m-redhat-font"},c().createElement(a.EmptyStateIcon,{icon:e.icon}),c().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.title),c().createElement(a.EmptyStateBody,null,e.description),e.actions?e.actions:null)},Je=(0,i.ZP)((({intl:e=F.N})=>c().createElement(Xe,{title:e.formatMessage(o.Z.costModelsEmptyState),description:e.formatMessage(o.Z.costModelsEmptyStateDesc),icon:pe.wl,actions:c().createElement(c().Fragment,null,c().createElement(Be,null),c().createElement("br",null),c().createElement("br",null),c().createElement("a",{href:e.formatMessage(o.Z.docsConfigCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.costModelsEmptyStateLearnMore)))})));var Qe=r(68025);class Ye extends c().Component{constructor(){super(...arguments),this.defaultState={dialogSource:null,activeSortDirection:"asc",activeSortIndex:0},this.state=Object.assign({},this.defaultState)}render(){const{intl:e=F.N,canWrite:t,costData:r,openDeleteDialog:s,query:n,router:i,stateName:l}=this.props,p=function(e,t){let r=null;return"loading"===e&&(r=c().createElement(Oe.G,null)),"empty"===e&&(r=c().createElement(Je,null)),"no-match"===e&&(r=c().createElement(ue.c,null)),"failure"===e&&(r=c().createElement(qe.Z,null)),null!==r?[{heightAuto:!0,cells:[{props:{colSpan:6},title:c().createElement(a.Bullseye,null," ",r," ")}]}]:t.map((e=>{const t=F.N.formatDate(e.updated_timestamp,{day:"numeric",hour:"numeric",hour12:!1,minute:"numeric",month:"short",timeZone:"UTC",timeZoneName:"short",year:"numeric"});return{cells:[{title:c().createElement(He.Link,{to:`${(0,Qe.dI)($e._.costModel.basePath)}/${e.uuid}`},e.name)},e.description,e.source_type,e.sources.length.toString(),t],data:{costModel:e}}}))}(l,r),u=[Object.assign({title:e.formatMessage(o.Z.names,{count:1}),data:{orderName:"name"}},p.length&&{transforms:[I.sortable]}),{title:e.formatMessage(o.Z.description)},Object.assign({title:e.formatMessage(o.Z.costModelsSourceType),data:{orderName:"source_type"}},p.length&&{transforms:[I.sortable]}),{title:e.formatMessage(o.Z.costModelsAssignedSources)},Object.assign({title:e.formatMessage(o.Z.costModelsLastChange),data:{orderName:"updated_timestamp"}},p.length&&{transforms:[I.sortable]}),{title:"",props:{"aria-label":e.formatMessage(o.Z.costModelsActions)}}],m=function(e,t,r){return"success"!==e?[]:r.map((e=>Object.assign(Object.assign({},e),{isDisabled:!t,style:t?void 0:{pointerEvents:"auto"},tooltip:t?void 0:e.tooltip})))}(l,t,[{title:e.formatMessage(o.Z.delete),tooltip:e.formatMessage(o.Z.costModelsReadOnly),onClick:(e,t,r)=>{s(r.data)}}]),d=function(e,t,r){return function(a,s,o){const n=e[s]&&e[s].data?e[s].data.orderName:null;null!==n&&(o!==I.SortByDirection.asc?r.navigate(D(Object.assign(Object.assign({},t),{ordering:`-${n}`}))):r.navigate(D(Object.assign(Object.assign({},t),{ordering:n}))))}}(u,n,i),h=e=>({sortBy:{index:this.state.activeSortIndex,direction:this.state.activeSortDirection,defaultDirection:"asc"},onSort:(e,t,r)=>{this.setState(Object.assign(Object.assign({},this.state),{activeSortDirection:r,activeSortIndex:t})),d(e,t,r)},columnIndex:e});return c().createElement(I.TableComposable,{"aria-label":e.formatMessage(o.Z.costModelsTableAriaLabel),gridBreakPoint:I.TableGridBreakpoint.grid2xl,variant:I.TableVariant.compact},c().createElement(I.Thead,null,c().createElement(I.Tr,null,u.map(((e,t)=>c().createElement(I.Th,{key:t,sort:e.transforms?h(t):void 0},e.title))),c().createElement(I.Th,null))),c().createElement(I.Tbody,null,p.map(((e,t)=>c().createElement(I.Tr,{key:t},e.cells.map(((e,t)=>c().createElement(I.Td,{colSpan:e.props?e.props.colSpan:void 0,key:t},e.title?e.title:e))),!e.heightAuto&&c().createElement(I.Td,{isActionCell:!0},c().createElement(I.ActionsColumn,{items:m.map((r=>Object.assign(Object.assign({},r),{onClick:a=>r.onClick(a,t,e,null)})))})))))))}}const et=(0,m.X1)((e=>({canWrite:O.c5.isCostModelWritePermission(e),query:M.E6.query(e),costData:M.E6.costModels(e),stateName:M.E6.stateName(e)}))),tt=(0,l.connect)(et,(e=>{const t=M.F0.setCostModelDialog;return{openDeleteDialog:r=>e(t({name:"deleteCostModel",isOpen:!0,meta:r}))}}))(Ye),rt=(0,i.ZP)((0,g.E)(tt)),at=({placeholder:e="",value:t,onChange:r,onKeyPress:s})=>c().createElement(a.InputGroup,null,c().createElement(a.TextInput,{"aria-label":e,value:t,placeholder:e,onChange:r,onKeyPress:e=>{"Enter"===e.key&&""!==t&&s(e)}}),c().createElement(a.InputGroupText,{style:{borderLeft:"0"}},c().createElement(De.W1,null))),st=(e,t,r,a)=>s=>{if("Enter"===s.key&&""!==a.value){const s=a.value;e.navigate(D(Object.assign(Object.assign({},r),{[t]:r[t]?`${r[t]},${s}`:s}))),a.setValue("")}},ot=(e,t,r)=>(a,s)=>{const o=r[t]?r[t].split(",").filter((e=>e!==s)):null;e.navigate(D(Object.assign(Object.assign({},r),{[t]:null===o||0===o.length?null:o.join(",")})))},nt=(e,t,r)=>()=>{e.navigate(D(Object.assign(Object.assign({},t),{[r]:null})))},ct=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=F.N,router:s}=r,{filterType:n,query:c}=e,i=c.description?c.description.split(","):[];return{categoryName:a.formatMessage(o.Z.description),chips:i,deleteChip:ot(s,"description",Object.assign(Object.assign({},k),c)),deleteChipGroup:nt(s,Object.assign(Object.assign({},k),c),"description"),filterType:n,intl:a,query:c,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:i,query:l,router:p})=>{const[u,m]=c().useState(""),d="description"===r?c().createElement(at,{placeholder:s.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:st(p,"description",Object.assign(Object.assign({},k),l),{value:u,setValue:m})}):null;return c().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:i},d)})),it=(0,i.ZP)((0,g.E)(ct)),lt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=F.N,router:s}=r,{filterType:n,query:c}=e,i=c.name?c.name.split(","):[];return{deleteChip:ot(s,"name",Object.assign(Object.assign({},k),c)),deleteChipGroup:nt(s,Object.assign(Object.assign({},k),c),"name"),filterType:n,chips:i,categoryName:a.formatMessage(o.Z.names,{count:1}),intl:a,query:c,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:i,query:l,router:p})=>{const[u,m]=c().useState(""),d="name"===r?c().createElement(at,{placeholder:s.formatMessage(o.Z.filterByPlaceholder,{value:r}),value:u,onChange:e=>m(e),onKeyPress:st(p,"name",Object.assign(Object.assign({},k),l),{value:u,setValue:m})}):null;return c().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:i},d)})),pt=(0,i.ZP)((0,g.E)(lt)),ut=(e,t)=>()=>{t(!1);const r=document.getElementById(e);r&&r.focus()},mt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e),query:M.E6.query(e)})),void 0,((e,t,r)=>{const{intl:a=F.N,router:s}=r,{filterType:n,query:c}=e;return{chips:c.source_type?[c.source_type]:[],categoryName:a.formatMessage(o.Z.costModelsSourceType),deleteChip:nt(s,Object.assign(Object.assign({},k),c),"source_type"),filterType:n,intl:a,query:c,router:s}}))((({deleteChip:e,deleteChipGroup:t,filterType:r,intl:s,chips:n,categoryName:i,query:l,router:p})=>{const[u,m]=c().useState(!1),d="source-type-filter",h=e=>p.navigate(D(Object.assign(Object.assign(Object.assign({},k),l),{source_type:e}))),g="sourceType"===r?c().createElement(a.Dropdown,{onSelect:ut(d,m),isOpen:u,toggle:c().createElement(a.DropdownToggle,{onToggle:e=>{m(e)},id:d},s.formatMessage(o.Z.filterByPlaceholder,{value:"source_type"})),dropdownItems:[c().createElement(a.DropdownItem,{key:"aws",component:"button",onClick:()=>h("aws")},s.formatMessage(o.Z.aws)),c().createElement(a.DropdownItem,{key:"azure",component:"button",onClick:()=>h("azure")},s.formatMessage(o.Z.azure)),c().createElement(a.DropdownItem,{key:"ocp",component:"button",onClick:()=>h("ocp")},s.formatMessage(o.Z.openShift))]}):null;return c().createElement(a.ToolbarFilter,{deleteChip:e,deleteChipGroup:t,chips:n,categoryName:i},g)})),dt=(0,i.ZP)((0,g.E)(mt)),ht=(0,g.E)((0,l.connect)((e=>({query:M.E6.query(e)})),void 0,((e,t,r)=>{const{children:a,router:s}=r,{query:o}=e;return{id:"cost-models-toolbar",clearAllFilters:()=>s.navigate(D(Object.assign(Object.assign(Object.assign({},k),o),{description:null,source_type:null,name:null}))),children:a}}))(a.Toolbar)),gt=(0,l.connect)((e=>({filterType:M.E6.currentFilterType(e)})),(e=>({updateFilterType:t=>{e(M.F0.updateFilterToolbar({currentFilterType:t}))}})),((e,t,r)=>{const{intl:a=F.N}=r,{filterType:s}=e;return{filterType:s,intl:a,updateFilterType:t.updateFilterType}}))((({filterType:e,intl:t,updateFilterType:r})=>{const[s,n]=c().useState(!1),i=[c().createElement(a.SelectOption,{key:"name",value:"name"},t.formatMessage(o.Z.names,{count:1})),c().createElement(a.SelectOption,{key:"description",value:"description"},t.formatMessage(o.Z.description)),c().createElement(a.SelectOption,{key:"sourceType",value:"sourceType"},t.formatMessage(o.Z.costModelsSourceType))];return c().createElement(a.Select,{isOpen:s,onSelect:(e,t)=>{r(t),n(!1)},onToggle:n,selections:e,toggleIcon:c().createElement(ke.k1,null),variant:a.SelectVariant.single},i)})),yt=(0,i.ZP)((0,g.E)(gt)),bt=(0,g.E)((0,l.connect)((e=>{const{count:t,page:r,perPage:a}=M.E6.pagination(e);return{count:t,page:r,perPage:a,query:M.E6.query(e)}}),void 0,((e,t,r)=>{const{router:s}=r,{count:o,page:n,perPage:c,query:i}=e;return{isCompact:!0,itemCount:o,page:n,perPage:c,variant:a.PaginationVariant.top,onSetPage:(e,t,r)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),i),{offset:j(t,r)})))},onPerPageSelect:(e,t)=>{s.navigate(D(Object.assign(Object.assign(Object.assign({},k),i),{limit:t,offset:0})))}}}))(a.Pagination)),ft=()=>c().createElement(ht,null,c().createElement(a.ToolbarContent,null,c().createElement(a.ToolbarGroup,{variant:"filter-group"},c().createElement(a.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:c().createElement(ke.k1,null)},c().createElement(a.ToolbarItem,null,c().createElement(yt,null)),c().createElement(a.ToolbarItem,null,c().createElement(pt,null),c().createElement(it,null),c().createElement(dt,null))),c().createElement(a.ToolbarItem,null,c().createElement(Be,null))),c().createElement(a.ToolbarItem,{variant:a.ToolbarItemVariant.pagination},c().createElement(bt,null))));class Tt extends c().Component{componentDidMount(){const{getCostModelsData:e,getMetricsData:t,getRbacData:r,search:a}=this.props;e(a),t(),r()}componentDidUpdate(e){const{getCostModelsData:t,search:r}=this.props;e.search!==r&&t(r)}render(){const{intl:e}=this.props;return c().createElement(a.PageSection,{isFilled:!0},c().createElement("div",{style:V.descContainer},e.formatMessage(o.Z.costModelsDesc,{learnMore:c().createElement("a",{href:e.formatMessage(o.Z.docsUsingCostModels),rel:"noreferrer",target:"_blank"},e.formatMessage(o.Z.learnMore))})),c().createElement(Ue,null),c().createElement(Ge,null),c().createElement(ft,null),c().createElement(rt,null),c().createElement(A,null))}}const vt=(0,g.E)((0,i.ZP)((0,l.connect)(((e,t)=>{const r=(0,Z.parse)(t.router.location.search,{ignoreQueryPrefix:!0}),a=Object.assign(Object.assign({},r),{tabKey:void 0});return{search:(0,Z.stringify)(a,{encode:!1,indices:!1})}}),(e=>({getCostModelsData:t=>M.F0.fetchCostModels(t)(e),getRbacData:()=>O.O9.fetchRbac()(e),getMetricsData:()=>R.Wg.fetchMetrics()(e)})))(Tt))),Et={header:{backgroundColor:y.ZP.var,paddingLeft:b.ZP.var,paddingRight:b.ZP.var,paddingTop:b.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},tabs:{backgroundColor:y.ZP.var,paddingTop:b.ZP.var}};var St;!function(e){e.costModels="cost-models",e.calculations="calculations",e.tags="tags"}(St||(St={}));const Pt=e=>{switch(e){case St.costModels:return"cost-models";case St.calculations:return"calculations";case St.tags:return"tags"}};class Ct extends c().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:c().createRef(),tab:St.costModels},{contentRef:c().createRef(),tab:St.calculations},{contentRef:c().createRef(),tab:St.tags}],this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${(0,s.IV)(e)}`},this.getTab=(e,t,r)=>c().createElement(a.Tab,{eventKey:r,key:`${Pt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:c().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>c().createElement(a.TabContent,{eventKey:t,key:`${Pt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{activeTabKey:r}=this.state,a=c().createElement(c().Fragment,null);if(r!==t)return a;const s=Pt(e);return s===St.costModels?c().createElement(vt,null):s===St.calculations?c().createElement(C,null):s===St.tags?null:a},this.getTabs=e=>{const{activeTabKey:t}=this.state;return c().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return e===St.costModels?t.formatMessage(o.Z.costModels):e===St.calculations?t.formatMessage(o.Z.currencyCalcuations):e===St.tags?t.formatMessage(o.Z.tagLabels):void 0},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e})}render(){const{intl:e}=this.props,t=this.getAvailableTabs(),r=e.formatMessage(o.Z.settingsTitle);return c().createElement("div",{className:"tabsOverride"},c().createElement("header",{style:Et.header},c().createElement("div",{style:Et.headerContent},c().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},r)),c().createElement("div",{style:Et.tabs},this.getTabs(t))),c().createElement("div",null,this.getTabContent(t)))}}const Zt=(0,m.X1)(((e,{router:t})=>{const r=(0,s.mB)(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0;return{query:Object.assign({},r),tabKey:a}})),Mt=(0,i.ZP)((0,g.E)((0,l.connect)(Zt,{})(Ct)))},83819:(e,t,r)=>{r.d(t,{Z:()=>d});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),c=r.n(n),i=r(7081),l=r(97027),p=r(74806);class u extends c().Component{render(){const{intl:e,showReload:t=!0}=this.props;return c().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},c().createElement(a.EmptyStateIcon,{icon:i.wl}),c().createElement(a.Title,{headingLevel:"h5",size:a.TitleSizes.lg},e.formatMessage(l.Z.noDataStateTitle)),c().createElement(a.EmptyStateBody,null,e.formatMessage(l.Z.noDataStateDesc)),t&&c().createElement(a.Button,{variant:"primary",onClick:()=>window.location.reload()},e.formatMessage(l.Z.noDataStateRefresh)))}}const m=(0,p.ZP)(u),d=({showReload:e,title:t})=>c().createElement(c().Fragment,null,t&&c().createElement(s.Z,null,c().createElement(o.Z,{title:t})),c().createElement(a.PageSection,null,c().createElement(m,{showReload:e})))},2985:(e,t,r)=>{r.d(t,{L:()=>v});var a=r(90154),s=r(89376),o=r(39173),n=r(92950),c=r.n(n),i=r(15265),l=r(7081),p=r(1326),u=r(97027),m=r(74806);const d=r(84735),h=(0,m.ZP)((({className:e,intl:t})=>c().createElement("img",{className:`cost-icon ${e}`,src:d,alt:t.formatMessage(u.Z.costManagement),"aria-hidden":"true"})));var g=r(68025),y=r(98499);const b={iconSpacer:{marginLeft:r(43789).ZP.value},viewSources:{marginTop:y.ZP.value}};class f extends c().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{intl:r}=this.props;return c().createElement("a",{href:r.formatMessage(t),rel:"noreferrer",target:"_blank"},r.formatMessage(e),c().createElement("span",{style:b.iconSpacer},c().createElement(i.LA,null)))},this.getRouteToSources=()=>`${(0,g.IG)()}/settings/sources`}render(){const{intl:e,providerType:t}=this.props;let r,s,o,n=u.Z.noProvidersStateOverviewDesc,i=u.Z.noProvidersStateOverviewTitle;switch(t){case p.l.aws:n=u.Z.noProvidersStateAwsDesc,i=u.Z.noProvidersStateAwsTitle;break;case p.l.azure:n=u.Z.noProvidersStateAzureDesc,i=u.Z.noProvidersStateAzureTitle;break;case p.l.gcp:n=u.Z.noProvidersStateGcpDesc,i=u.Z.noProvidersStateGcpTitle;break;case p.l.ibm:n=u.Z.noProvidersStateIbmDesc,i=u.Z.noProvidersStateIbmTitle;break;case p.l.ocp:n=u.Z.noProvidersStateOcpDesc,r=u.Z.docsAddOcpSources,o=u.Z.noProvidersStateOcpAddSources,i=u.Z.noProvidersStateOcpTitle;break;default:s=h}return c().createElement(a.EmptyState,{variant:a.EmptyStateVariant.large,className:"pf-m-redhat-font"},c().createElement(a.EmptyStateIcon,{icon:s||l.wl}),c().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes.lg},e.formatMessage(i)),c().createElement(a.EmptyStateBody,null,e.formatMessage(n)),r&&o?c().createElement("div",{style:b.viewSources},this.getDocLink(o,r)):c().createElement(a.Button,{variant:"primary",component:"a",href:this.getRouteToSources()},e.formatMessage(u.Z.noProvidersStateGetStarted)))}}const T=(0,m.ZP)(f),v=({providerType:e,title:t})=>c().createElement(c().Fragment,null,t&&c().createElement(s.Z,null,c().createElement(o.Z,{title:t})),c().createElement(a.PageSection,null,c().createElement(T,{providerType:e})))},76930:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(97027),s=r(92950),o=r.n(s),n=r(22807);const c=[{label:a.Z.perspectiveValues,value:"aws"}],i=[{label:a.Z.perspectiveValues,value:"aws_ocp"}],l=[{label:a.Z.perspectiveValues,value:"azure"}],p=[{label:a.Z.perspectiveValues,value:"oci"}],u=[{label:a.Z.perspectiveValues,value:"azure_ocp"}],m=[{label:a.Z.perspectiveValues,value:"gcp"}],d=[{label:a.Z.perspectiveValues,value:"gcp_ocp"}],h=[{label:a.Z.perspectiveValues,value:"ibm"}],g=[{label:a.Z.perspectiveValues,value:"ibm_ocp"}],y=[{label:a.Z.perspectiveValues,value:"ocp_cloud"}],b=[{label:a.Z.perspectiveValues,value:"ocp"}],f=[{label:a.Z.perspectiveValues,value:"rhel"}],T=({hasAws:e,hasAwsOcp:t,hasAzure:r,hasAzureOcp:a,hasGcp:s,hasGcpOcp:o,hasIbm:n,hasIbmOcp:y,hasOci:b,isIbmFeatureEnabled:f})=>{const T=[];return e&&T.push(...c),t&&T.push(...i),s&&T.push(...m),o&&T.push(...d),n&&T.push(...h),y&&f&&T.push(...g),r&&T.push(...l),a&&T.push(...u),b&&T.push(...p),T},v=({currentItem:e,hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:c,hasGcpOcp:i,hasIbm:l,hasIbmOcp:p,hasOci:u,hasOcp:m,hasOcpCloud:d,hasRhel:h,isDisabled:g,isIbmFeatureEnabled:v,isInfrastructureTab:E,isRhelTab:S,onSelected:P})=>{const C=[];return void 0!==E||void 0!==S?E?(d&&C.push(...y),C.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:c,hasGcpOcp:i,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))):S?h&&C.push(...f):m&&C.push(...b):(m&&C.push(...b),d&&C.push(...y),h&&C.push(...f),C.push(...T({hasAws:t,hasAwsOcp:r,hasAzure:a,hasAzureOcp:s,hasGcp:c,hasGcpOcp:i,hasIbm:l,hasIbmOcp:p,hasOci:u,isIbmFeatureEnabled:v}))),o().createElement(n.o,{currentItem:e||C[0].value,isDisabled:g,onSelected:P,options:C})}},15817:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Vt});var a=r(90154),s=r(91290),o=r(1326),n=r(39333),c=r(84717),i=r(37610),l=r(91577),p=r(97027),u=r(92950),m=r.n(u),d=r(74806),h=r(77760),g=r(6279),y=r(6450),b=r(52471),f=r(83819),T=r(2985),v=r(76930);const E=({costType:e,currency:t,DashboardWidget:r,selectWidgets:s,widgets:o})=>m().createElement("div",null,m().createElement(a.Grid,{hasGutter:!0},o.map((o=>{const n=s[o];return n.details&&n.details.showHorizontal?m().createElement(a.GridItem,{sm:12,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t}))):m().createElement(a.GridItem,{lg:12,xl:6,xl2:4,key:o},m().createElement(r,Object.assign({widgetId:o},e&&{costType:e},t&&{currency:t})))}))));var S=r(39836),P=r(4996),C=r(16044),Z=r(38470),M=r(91919),R=r(1156),O=r(68025),F=r(20513),I=r(17918);const k={infoIcon:{fontSize:I.ZP.value}},D=(0,d.ZP)((({intl:e,report:t,status:r,title:o})=>{const n=t&&t.meta?t.meta.count:0,c=e.formatMessage(p.Z.optimizationsDetails,{count:n});return m().createElement(a.Card,{className:"summary"},m().createElement(a.CardTitle,null,m().createElement(a.Title,{headingLevel:"h2",size:a.TitleSizes.lg},e.formatMessage(o),m().createElement("span",{style:k.infoIcon},m().createElement(a.Popover,{"aria-label":e.formatMessage(p.Z.optimizationsInfoArialLabel),enableFlip:!0,bodyContent:m().createElement("p",{style:k.infoTitle},e.formatMessage(p.Z.optimizationsInfo))},m().createElement(a.Button,{"aria-label":e.formatMessage(p.Z.optimizationsInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null)))))),m().createElement(a.CardBody,null,r===R.iF.inProgress?m().createElement(m().Fragment,null,m().createElement(a.Skeleton,{width:"16%"}),m().createElement(a.Skeleton,{className:"skeleton",width:F.N.md})):n>0?m().createElement(S.Link,{to:(0,O.dI)(M._.optimizations.path)},c):c))}));var j=r(30564),A=r(91778);class V extends m().Component{constructor(){super(...arguments),this.defaultState={currentItem:this.props.options?this.props.options.find((e=>e.default)).value:void 0,isSelectOpen:!1},this.state=Object.assign({},this.defaultState),this.getSelect=()=>{const{isDisabled:e}=this.props,{currentItem:t,isSelectOpen:r}=this.state,s=this.getSelectOptions(),o=s.find((e=>e.value===t));return m().createElement(a.Select,{id:"comparisonSelect",isDisabled:e,isOpen:r,onSelect:this.handleSelect,onToggle:this.handleToggle,selections:o,variant:a.SelectVariant.single},s.map((e=>m().createElement(a.SelectOption,{key:e.value,value:e}))))},this.getSelectOptions=()=>{const{options:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.label,value:e.value})})),t},this.handleSelect=(e,t)=>{const{onItemClicked:r}=this.props;r&&r(t.value),this.setState({currentItem:t.value,isSelectOpen:!1})},this.handleToggle=e=>{this.setState({isSelectOpen:e})}}render(){return this.getSelect()}}const z=V;var L=r(91707),x=r(32412),w=r(57640);const W={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},N={comparison:{marginBottom:x.ZP.value},comparisonContainer:{display:"flex"},tabs:{marginTop:L.ZP.value},tabItems:{marginTop:w.ZP.value}};var B;!function(e){e.cumulative="cumulative",e.daily="daily"}(B||(B={}));class U extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,currentComparison:B.cumulative},this.state=Object.assign({},this.defaultState),this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,a=r(e);return`${t.viewAllPath}?${(0,n.pm)({group_by:{[a]:"*"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:a,trend:s}=this.props;return a===j.i.dailyTrend?this.getDailyTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.dailyCost?this.getDailyCostChart(e,t,r):a===j.i.trend?this.getTrendChart(e,t,r,s.showSupplementaryLabel):a===j.i.usage?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{intl:e,trend:t}=this.props,{currentComparison:r}=this.state,a=this.getFormattedUnits(),s=e.formatMessage(t.titleKey,{units:a}),o=[{label:e.formatMessage(t.dailyTitleKey,{units:a}),value:B.daily},{label:s,value:B.cumulative,default:!0}];return m().createElement(z,{currentItem:r||o[0].value,onItemClicked:this.handleComparisonClick,options:o})},this.getDailyCostChart=(e,t,r=!1)=>{const{chartFormatter:a,currentReport:s,previousReport:o,trend:n}=this.props,{currentComparison:c}=this.state,i=n.computedReportItem,l=n.computedReportItemValue,p=c===B.daily,u=p?P.yZ.rolling:n.datumType,d=(0,P.zJ)(s,u,"date",i,l),h=(0,P.zJ)(o,u,"date",i,l),g=this.getForecastData(s,n.computedForecastItem),y=p?Z.V3:Z.me;return m().createElement(m().Fragment,null,m().createElement("div",{style:N.comparisonContainer},m().createElement("div",{style:N.comparison},this.getChartComparison())),m().createElement(y,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,forecastConeData:g.forecastConeData,forecastData:g.forecastData,formatOptions:n.formatOptions,formatter:a||A.xG,height:t,previousCostData:h,showForecast:void 0!==n.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:c,previousReport:i,trend:l}=this.props,{currentComparison:p}=this.state,u=l.computedReportItem,d=l.computedReportItemValue,h=p===B.daily,g=h?P.yZ.rolling:l.datumType,y=(0,P.zJ)(n,g,"date",u,d),b=(0,P.zJ)(i,g,"date",u,d),{forecastData:f,forecastConeData:T}=this.getForecastData(n,l.computedForecastItem),v=h?Z.Y0:Z.Nd;return m().createElement(m().Fragment,null,m().createElement("div",{style:N.comparisonContainer},m().createElement("div",{style:N.comparison},this.getChartComparison())),m().createElement(v,{adjustContainerHeight:r,chartName:o,containerHeight:e,currentData:y,forecastData:f,forecastConeData:T,formatOptions:l.formatOptions,formatter:s||A.bM,height:t,previousData:b,showForecast:void 0!==l.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:c.showUsageLegendLabel,units:this.getUnits()}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:a}=this.props,{currentComparison:s}=this.state,o=s===B.daily?P.yZ.rolling:a.datumType,n=(0,C.x1)(r,e,t,o);return{forecastData:(0,C.nB)(n,o,t),forecastConeData:(0,C.Qw)(n,o,t)}},this.getTrendChart=(e,t,r=!1,a=!1)=>{const{chartFormatter:s,chartName:o,currentReport:n,details:c,intl:i,previousReport:l,trend:p}=this.props,u=p.computedReportItem||"cost",d=p.computedReportItemValue,h=i.formatMessage(p.titleKey,{units:this.getFormattedUnits()}),g=(0,P.zJ)(n,p.datumType,"date",u,d),y=(0,P.zJ)(l,p.datumType,"date",u,d),{forecastData:b,forecastConeData:f}=this.getForecastData(n,p.computedForecastItem);return m().createElement(Z.Nd,{adjustContainerHeight:r,containerHeight:e,chartName:o,currentData:g,forecastData:b,forecastConeData:f,formatOptions:p.formatOptions,formatter:s||A.bM,height:t,previousData:y,showForecast:void 0!==p.computedForecastItem,showSupplementaryLabel:a,showUsageLegendLabel:c.showUsageLegendLabel,title:h,units:this.getUnits()})},this.getUsageChart=(e,t=!1)=>{const{chartFormatter:r,chartName:a,currentReport:s,intl:o,previousReport:n,trend:c}=this.props,i=o.formatMessage(c.titleKey,{units:this.getFormattedUnits()}),l=(0,P.zJ)(s,c.datumType,"date","request"),p=(0,P.zJ)(n,c.datumType,"date","request"),u=(0,P.zJ)(s,c.datumType,"date","usage"),d=(0,P.zJ)(n,c.datumType,"date","usage");return m().createElement(Z.I0,{adjustContainerHeight:t,chartName:a,containerHeight:W.containerUsageHeight,currentRequestData:l,currentUsageData:u,formatOptions:c.formatOptions,formatter:r||A.bM,height:e,previousRequestData:p,previousUsageData:d,title:i})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:a,trend:s}=this.props,o=s.computedReportItem||"cost",n=s.computedReportItemValue||"total";return m().createElement(Z.rN,{chartType:e,computedReportItem:o,computedReportItemValue:n,costLabel:this.getDetailsLabel(r.costKey),formatOptions:r.formatOptions,report:t,reportType:a,requestLabel:this.getDetailsLabel(r.requestKey),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:this.getUnits(),usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey)})},this.getDetailsLabel=e=>{const{intl:t}=this.props;return e?t.formatMessage(e):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?m().createElement(S.Link,{to:this.buildDetailsLink(e)},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByAll,{value:a,count:2})},this.getFormattedUnits=()=>{const{intl:e,trend:t}=this.props,r=t.computedReportItem||"cost",a=this.getUnits();return r===P.LI.usage?e.formatMessage(p.Z.units,{units:(0,A.ZV)(a)}):e.formatMessage(p.Z.currencyUnits,{units:a})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=W.containerAltHeight,chartAltHeight:t=W.chartAltHeight,currentReportFetchStatus:r,details:a}=this.props;return m().createElement(Z.j0,{detailsLink:this.getDetailsLink(),status:r,tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,a.adjustContainerHeight))},this.getOptimizationsSummary=()=>{const{rosReportFetchStatus:e,rosReport:t,titleKey:r}=this.props;return m().createElement(D,{status:e,report:t,title:r})},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:s,tabsReportFetchStatus:o}=this.props,n=r(e);return m().createElement(a.Tab,{eventKey:t,key:`${r(e)}-tab`,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))},m().createElement("div",{style:N.tabItems},m().createElement(Z.mZ,{idKey:n,key:`${n}-items`,report:s,status:o},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,getIdKeyForTab:a,tabsReport:s,topItems:o,trend:n}=this.props,{activeTabKey:c}=this.state,i=a(e),l=a(r[c]),p=n.computedReportItem||"cost",u=n.computedReportItemValue||"total";let d;const h=s&&s.meta&&s.meta.total;return p===P.LI.usage?h&&s.meta.total.usage&&(d=s.meta.total.usage.value):h&&s.meta.total[p]&&s.meta.total[p][u]&&(d=s.meta.total[p][u].value),l===i?m().createElement(Z.EH,{formatOptions:o?o.formatOptions:void 0,key:`${t.id}-item`,label:t.label?t.label.toString():"",totalValue:d,units:this.getUnits(),value:t[p][u].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return m().createElement(a.Tabs,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,intl:r}=this.props,a=t(e)||"";return r.formatMessage(p.Z.groupByTop,{value:a,count:2})},this.getTitle=()=>{const{intl:e,titleKey:t}=this.props;return e.formatMessage(t)},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,a=r.computedReportItem||"cost",s=r.computedReportItemValue||"total";if(t.units)return t.units;if(!e)return"";const o=e&&e.meta&&e.meta.total;return a===P.LI.usage?o&&e.meta.total.usage?e.meta.total.usage.units:void 0:o&&e.meta.total[a]&&e.meta.total[a][s]?e.meta.total[a][s].units:"USD"},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return m().createElement(Z.iu,{detailsLink:this.getDetailsLink(),status:t,title:this.getTitle()},this.getDetails(),this.getChart(W.containerTrendHeight,W.chartHeight,r.adjustContainerHeight),e&&m().createElement("div",{style:N.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:a,updateTab:s}=this.props;s(a,r[t]),this.setState({activeTabKey:t})},this.updateForecasts=()=>{const{fetchForecasts:e,widgetId:t}=this.props;e&&e(t)},this.updateReports=()=>{const{fetchReports:e,widgetId:t}=this.props;e&&e(t)},this.updateRosReports=()=>{const{fetchRosReports:e,isRosFeatureEnabled:t,widgetId:r}=this.props;e&&t&&e(r)}}componentDidMount(){const{availableTabs:e,details:t,id:r,trend:a,updateTab:s}=this.props;e&&s(r,e[0]),a&&void 0!==a.computedForecastItem&&this.updateForecasts(),t.showOptimizations||this.updateReports(),t.showOptimizations&&this.updateRosReports()}componentDidUpdate(e){const{costType:t,currency:r,trend:a}=this.props;e.costType===t&&e.currency===r||(this.updateReports(),a&&void 0!==a.computedForecastItem&&this.updateForecasts())}render(){const{details:e,isRosFeatureEnabled:t}=this.props;return e.showOptimizations?t?this.getOptimizationsSummary():null:e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}const _=U;var K=r(81628),G=r(79277),q=r(15920),H=r(15829);const $=e=>{switch(e){case K.IC.services:return"service";case K.IC.accounts:return"account";case K.IC.regions:return"region"}},X=(0,R.X1)(((e,{widgetId:t})=>{const r=K.Cv.selectWidget(e,t),a=K.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:$}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),J={fetchForecasts:K.Kf.v4,fetchReports:K.Kf.a4,updateTab:K.Kf.as},Q=(0,d.ZP)((0,h.connect)(X,J)(_)),Y=(0,R.X1)(((e,t)=>({DashboardWidget:Q,selectWidgets:K.Cv.selectWidgets(e),widgets:K.Cv.selectCurrentWidgets(e)}))),ee=(0,h.connect)(Y,{})(E);var te=r(25566);const re=e=>{switch(e){case te.e1.services:return"service";case te.e1.accounts:return"account";case te.e1.regions:return"region"}},ae=(0,R.X1)(((e,{widgetId:t})=>{const r=te.Hc.selectWidget(e,t),a=te.Hc.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),costType:(0,H.uY)(),getIdKeyForTab:re}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),se={fetchForecasts:te.NA.v4,fetchReports:te.NA.a4,updateTab:te.NA.as},oe=(0,d.ZP)((0,h.connect)(ae,se)(_)),ne=(0,R.X1)(((e,t)=>({DashboardWidget:oe,selectWidgets:te.Hc.selectWidgets(e),widgets:te.Hc.selectCurrentWidgets(e)}))),ce=(0,h.connect)(ne,{})(E);var ie=r(25976);const le=e=>{switch(e){case ie.vY.service_names:return"service_name";case ie.vY.subscription_guids:return"subscription_guid";case ie.vY.resource_locations:return"resource_location"}},pe=(0,R.X1)(((e,{widgetId:t})=>{const r=ie.rj.selectWidget(e,t),a=ie.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:le}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),ue={fetchForecasts:ie.oc.v4,fetchReports:ie.oc.a4,updateTab:ie.oc.as},me=(0,d.ZP)((0,h.connect)(pe,ue)(_)),de=(0,R.X1)(((e,t)=>({DashboardWidget:me,selectWidgets:ie.rj.selectWidgets(e),widgets:ie.rj.selectCurrentWidgets(e)}))),he=(0,h.connect)(de,{})(E);var ge=r(76764);const ye=e=>{switch(e){case ge.Vp.service_names:return"service_name";case ge.Vp.subscription_guids:return"subscription_guid";case ge.Vp.resource_locations:return"resource_location"}},be=(0,R.X1)(((e,{widgetId:t})=>{const r=ge.MW.selectWidget(e,t),a=ge.MW.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:ye}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),fe={fetchForecasts:ge._V.v4,fetchReports:ge._V.a4,updateTab:ge._V.as},Te=(0,d.ZP)((0,h.connect)(be,fe)(_)),ve=(0,R.X1)(((e,t)=>({DashboardWidget:Te,selectWidgets:ge.MW.selectWidgets(e),widgets:ge.MW.selectCurrentWidgets(e)}))),Ee=(0,h.connect)(ve,{})(E);var Se=r(67776);const Pe=e=>{switch(e){case Se.BP.gcpProjects:return"gcp_project";case Se.BP.regions:return"region";case Se.BP.services:return"service"}},Ce=(0,R.X1)(((e,{widgetId:t})=>{const r=Se.oS.selectWidget(e,t),a=Se.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Pe}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Ze={fetchForecasts:Se.n5.v4,fetchReports:Se.n5.a4,updateTab:Se.n5.as},Me=(0,d.ZP)((0,h.connect)(Ce,Ze)(_)),Re=(0,R.X1)(((e,t)=>({DashboardWidget:Me,selectWidgets:Se.oS.selectWidgets(e),widgets:Se.oS.selectCurrentWidgets(e)}))),Oe=(0,h.connect)(Re,{})(E);var Fe=r(99900);const Ie=e=>{switch(e){case Fe.VN.gcpProjects:return"gcp_project";case Fe.VN.regions:return"region";case Fe.VN.services:return"service"}},ke=(0,R.X1)(((e,{widgetId:t})=>{const r=Fe.FF.selectWidget(e,t),a=Fe.FF.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ie}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),De={fetchForecasts:Fe.uM.v4,fetchReports:Fe.uM.a4,updateTab:Fe.uM.as},je=(0,d.ZP)((0,h.connect)(ke,De)(_)),Ae=(0,R.X1)(((e,t)=>({DashboardWidget:je,selectWidgets:Fe.FF.selectWidgets(e),widgets:Fe.FF.selectCurrentWidgets(e)}))),Ve=(0,h.connect)(Ae,{})(E);var ze=r(48788);const Le=e=>{switch(e){case ze.DA.services:return"service";case ze.DA.projects:return"project";case ze.DA.regions:return"region"}},xe=(0,R.X1)(((e,{widgetId:t})=>{const r=ze.Pi.selectWidget(e,t),a=ze.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Le}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),we={fetchForecasts:ze.lj.v4,fetchReports:ze.lj.a4,updateTab:ze.lj.as},We=(0,d.ZP)((0,h.connect)(xe,we)(_)),Ne=(0,R.X1)(((e,t)=>({DashboardWidget:We,selectWidgets:ze.Pi.selectWidgets(e),widgets:ze.Pi.selectCurrentWidgets(e)}))),Be=(0,h.connect)(Ne,{})(E);var Ue=r(17568);const _e=e=>{switch(e){case Ue.Qr.accounts:return"account";case Ue.Qr.regions:return"region";case Ue.Qr.services:return"service"}},Ke=(0,R.X1)(((e,{widgetId:t})=>{const r=Ue.qN.selectWidget(e,t),a=Ue.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:_e}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Ge={fetchForecasts:Ue.BV.v4,fetchReports:Ue.BV.a4,updateTab:Ue.BV.as},qe=(0,d.ZP)((0,h.connect)(Ke,Ge)(_)),He=(0,R.X1)(((e,t)=>({DashboardWidget:qe,selectWidgets:Ue.qN.selectWidgets(e),widgets:Ue.qN.selectCurrentWidgets(e)}))),$e=(0,h.connect)(He,{})(E);var Xe=r(60329),Je=r(22369),Qe=r(2136);const Ye=e=>{switch(e){case Xe.V7.clusters:return"cluster";case Xe.V7.nodes:return"node";case Xe.V7.projects:return"project"}},et=(0,R.X1)(((e,{widgetId:t})=>{const r=Xe.nH.selectWidget(e,t),a=Xe.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Ye,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)}),r.rosPathsType&&r.rosType&&{isRosFeatureEnabled:Je.iJ.selectIsRosFeatureEnabled(e),rosReport:Qe.R0.selectRos(e,r.rosPathsType,r.rosType,a.optimizations),rosReportError:Qe.R0.selectRosError(e,r.rosPathsType,r.rosType,a.optimizations),rosReportFetchStatus:Qe.R0.selectRosFetchStatus(e,r.rosPathsType,r.rosType,a.optimizations)})})),tt={fetchForecasts:Xe.U6.v4,fetchReports:Xe.U6.a4,fetchRosReports:Xe.U6.XE,updateTab:Xe.U6.as},rt=(0,d.ZP)((0,h.connect)(et,tt)(_)),at=(0,R.X1)(((e,t)=>({DashboardWidget:rt,selectWidgets:Xe.nH.selectWidgets(e),widgets:Xe.nH.selectCurrentWidgets(e)}))),st=(0,h.connect)(at,{})(E);var ot=r(67522);const nt=e=>{switch(e){case ot.is.clusters:return"cluster";case ot.is.nodes:return"node";case ot.is.projects:return"project"}},ct=(0,R.X1)(((e,{widgetId:t})=>{const r=ot.fO.selectWidget(e,t),a=ot.fO.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:nt,chartAltHeight:250,containerAltHeight:250}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),it={fetchForecasts:ot.BV.v4,fetchReports:ot.BV.a4,updateTab:ot.BV.as},lt=(0,d.ZP)((0,h.connect)(ct,it)(_)),pt=(0,R.X1)(((e,t)=>({DashboardWidget:lt,selectWidgets:ot.fO.selectWidgets(e),widgets:ot.fO.selectCurrentWidgets(e)}))),ut=(0,h.connect)(pt,{})(E);var mt=r(86482),dt=r(62331),ht=r(46919),gt=r(45087),yt=r(5842),bt=r(96351),ft=r(77392);const Tt=e=>{switch(e){case ft.FY.product_services:return"product_service";case ft.FY.payer_tenant_ids:return"payer_tenant_id";case ft.FY.regions:return"region"}},vt=(0,R.X1)(((e,{widgetId:t})=>{const r=ft.$h.selectWidget(e,t),a=ft.$h.selectWidgetQueries(e,t);return Object.assign(Object.assign(Object.assign(Object.assign({},r),{currency:(0,H.zC)(),getIdKeyForTab:Tt}),r.forecastPathsType&&r.forecastType&&{forecast:G.mj.selectForecast(e,r.forecastPathsType,r.forecastType,a.forecast),forecastError:G.mj.selectForecastError(e,r.forecastPathsType,r.forecastType,a.forecast),forecastFetchStatus:G.mj.selectForecastFetchStatus(e,r.forecastPathsType,r.forecastType,a.forecast)}),r.reportPathsType&&r.reportType&&{currentReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.current),currentReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.current),currentReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.current),previousReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.previous),previousReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.previous),previousReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.previous),tabsReport:q.ZV.selectReport(e,r.reportPathsType,r.reportType,a.tabs),tabsReportError:q.ZV.selectReportError(e,r.reportPathsType,r.reportType,a.tabs),tabsReportFetchStatus:q.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,a.tabs)})})),Et={fetchForecasts:ft.eb.v4,fetchReports:ft.eb.a4,updateTab:ft.eb.as},St=(0,d.ZP)((0,h.connect)(vt,Et)(_)),Pt=(0,R.X1)(((e,t)=>({DashboardWidget:St,selectWidgets:ft.$h.selectWidgets(e),widgets:ft.$h.selectCurrentWidgets(e)}))),Ct=(0,h.connect)(Pt,{})(E);var Zt=r(49382),Mt=r(98499);const Rt={date:{alignSelf:"center",flexGrow:1,textAlign:"end"},costType:{marginLeft:x.ZP.var},header:{backgroundColor:Zt.ZP.var,padding:Mt.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex"},headerContentRight:{display:"flex"},infoIcon:{fontSize:I.ZP.value},infoTitle:{fontWeight:"bold"},main:{padding:Mt.ZP.value},tabs:{backgroundColor:Zt.ZP.var,paddingBottom:Mt.ZP.var,paddingTop:Mt.ZP.var}};var Ot,Ft,It,kt;!function(e){e.aws="aws",e.awsOcp="aws_ocp",e.azure="azure",e.azureOcp="azure_ocp",e.gcp="gcp",e.gcpOcp="gcp_ocp",e.ibm="ibm",e.ibmOcp="ibm_ocp",e.oci="oci",e.ocpCloud="ocp_cloud"}(Ot||(Ot={})),function(e){e.ocp="ocp"}(Ft||(Ft={})),function(e){e.infrastructure="infrastructure",e.ocp="ocp",e.rhel="rhel"}(It||(It={})),function(e){e.rhel="rhel"}(kt||(kt={}));const Dt=e=>{switch(e){case It.infrastructure:return"infrastructure";case It.ocp:return"ocp";case It.rhel:return"rhel"}};class jt extends m().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const{isFinsightsFeatureEnabled:e}=this.props,t=[],r=this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpCloudAvailable()?[{contentRef:m().createRef(),tab:It.infrastructure}]:void 0,a=this.isOcpAvailable()?[{contentRef:m().createRef(),tab:It.ocp}]:void 0,s=this.isRhelAvailable()?[{contentRef:m().createRef(),tab:It.rhel}]:void 0;return e?(r&&t.push(...r),s&&t.push(...s),a&&t.push(...a)):(a&&t.push(...a),r&&t.push(...r)),t},this.getCostType=()=>{const{costType:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r}=this.state,a=this.getCurrentTab()===It.infrastructure?t:r;return a===Ot.aws||a===Ot.awsOcp?m().createElement("div",{style:Rt.costType},m().createElement(g.T,{costType:e,onSelect:this.handleOnCostTypeSelected})):null},this.getCurrency=()=>{const{currency:e}=this.props;return m().createElement(y.F,{onSelect:this.handleOnCurrencySelected,currency:e})},this.getCurrentTab=()=>{const{isFinsightsFeatureEnabled:e}=this.props,{activeTabKey:t}=this.state,r=this.isAwsAvailable(),a=this.isAzureAvailable(),s=this.isOciAvailable(),o=this.isGcpAvailable(),n=this.isIbmAvailable(),c=this.isOcpAvailable(),i=this.isOcpCloudAvailable(),l=this.isRhelAvailable(),p=r||a||s||o||n||i,u=p&&!c&&!l,m=l&&!p&&!c;if(c&&!p&&!l)return It.ocp;if(u)return It.infrastructure;if(m)return It.rhel;if(e)switch(t){case 0:return It.infrastructure;case 1:return It.rhel;case 2:return It.ocp}switch(t){case 0:return It.ocp;case 1:return It.infrastructure}},this.getDefaultInfrastructurePerspective=()=>{const{perspective:e}=this.props;switch(e){case Ot.aws:case Ot.awsOcp:case Ot.azure:case Ot.oci:case Ot.azureOcp:case Ot.gcp:case Ot.gcpOcp:case Ot.ibm:case Ot.ibmOcp:case Ot.ocpCloud:return e}return this.isOcpCloudAvailable()?Ot.ocpCloud:this.isAwsAvailable()?Ot.aws:this.isAzureAvailable()?Ot.azure:this.isOciAvailable()?Ot.oci:this.isGcpAvailable()?Ot.gcp:this.isIbmAvailable()?Ot.ibm:void 0},this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,perspective:t,userAccess:r}=this.props;return t===Ft.ocp?t:(0,bt.mn)(r,e)?Ft.ocp:void 0},this.getDefaultRhelPerspective=()=>{const{perspective:e,rhelProviders:t,userAccess:r}=this.props;return e===kt.rhel?e:(0,bt.ZC)(r,t)?kt.rhel:void 0},this.getPerspective=()=>{const{isIbmFeatureEnabled:e}=this.props,{currentInfrastructurePerspective:t,currentOcpPerspective:r,currentRhelPerspective:a}=this.state,s=this.isAwsAvailable(),o=this.isAzureAvailable(),n=this.isGcpAvailable(),c=this.isIbmAvailable(),i=this.isOciAvailable(),l=this.isOcpAvailable(),p=this.isRhelAvailable();if(!(s||o||n||c||i||l||p))return null;let u;const d=this.getCurrentTab();switch(d){case It.infrastructure:u=t;break;case It.ocp:u=r;break;case It.rhel:u=a}return m().createElement(v.X,{currentItem:u,hasAws:s,hasAwsOcp:this.isAwsOcpAvailable(),hasAzure:o,hasAzureOcp:this.isAzureOcpAvailable(),hasGcp:n,hasGcpOcp:this.isGcpOcpAvailable(),hasIbm:c,hasIbmOcp:this.isIbmOcpAvailable(),hasOci:i,hasOcp:l,hasOcpCloud:this.isOcpCloudAvailable(),hasRhel:p,isIbmFeatureEnabled:e,isInfrastructureTab:It.infrastructure===d,isRhelTab:It.rhel===d,onSelected:this.handlePerspectiveSelected})},this.getRouteForQuery=e=>{const{router:t}=this.props;return`${t.location.pathname}?${function(e){return n.IV(e)}(e)}`},this.getTab=(e,t,r)=>m().createElement(a.Tab,{eventKey:r,key:`${Dt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:m().createElement(a.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>m().createElement(a.TabContent,{eventKey:t,key:`${Dt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:a,ociProviders:s,costType:o,currency:n,gcpProviders:c,ibmProviders:i,ocpProviders:l,rhelProviders:p}=this.props,{activeTabKey:u,currentInfrastructurePerspective:d,currentOcpPerspective:h,currentRhelPerspective:g}=this.state,y=m().createElement(m().Fragment,null),b=m().createElement(f.Z,{showReload:!1});if(u!==t)return y;const T=Dt(e);if(T===It.infrastructure)return d===Ot.ocpCloud?(0,mt.Bj)(r,l)||(0,mt.Bj)(a,l)||(0,mt.Bj)(c,l)||(0,mt.Bj)(i,l)?m().createElement($e,{currency:n}):b:d===Ot.aws?(0,mt.g8)(r)||(0,mt.rL)(r)?m().createElement(ee,{costType:o}):b:d===Ot.awsOcp?(0,mt.at)(r,l)||(0,mt.D2)(r,l)?m().createElement(ce,{currency:n}):b:d===Ot.azure?(0,mt.g8)(a)||(0,mt.rL)(a)?m().createElement(he,{currency:n}):b:d===Ot.azureOcp?(0,mt.at)(a,l)||(0,mt.D2)(a,l)?m().createElement(Ee,{currency:n}):b:d===Ot.gcp?(0,mt.g8)(c)||(0,mt.rL)(c)?m().createElement(Oe,{currency:n}):b:d===Ot.gcpOcp?(0,mt.at)(c,l)||(0,mt.D2)(c,l)?m().createElement(Ve,{currency:n}):b:d===Ot.ibm?(0,mt.g8)(i)||(0,mt.rL)(i)?m().createElement(Be,{currency:n}):b:d===Ot.oci&&((0,mt.g8)(s)||(0,mt.rL)(s))?m().createElement(Ct,{currency:n}):b;if(T===It.ocp){const e=(0,mt.g8)(l)||(0,mt.rL)(l);return h===Ft.ocp&&e?m().createElement(st,{currency:n}):b}if(T===It.rhel){const e=(0,mt.g8)(p)||(0,mt.rL)(p);return g===kt.rhel&&e?m().createElement(ut,{currency:n}):b}return y},this.getTabs=e=>{const{activeTabKey:t}=this.state;return m().createElement(a.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t,isFinsightsFeatureEnabled:r}=this.props;return e===It.infrastructure?r?t.formatMessage(p.Z.summary):t.formatMessage(p.Z.infrastructure):e===It.ocp?t.formatMessage(p.Z.openShift):e===It.rhel?t.formatMessage(p.Z.rhel):void 0},this.handleOnCostTypeSelected=()=>{const{query:e,router:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(e)));t.navigate(this.getRouteForQuery(r),{replace:!0})},this.handleOnCurrencySelected=()=>{const{router:e,query:t}=this.props,r=Object.assign({},JSON.parse(JSON.stringify(t)));e.navigate(this.getRouteForQuery(r),{replace:!0})},this.handlePerspectiveSelected=e=>{const{query:t,router:r}=this.props,a=this.getCurrentTab();this.setState(Object.assign(Object.assign({},a===It.infrastructure&&{currentInfrastructurePerspective:e}),a===It.ocp&&{currentOcpPerspective:e}),(()=>{const a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t))),{perspective:e});r.navigate(this.getRouteForQuery(a),{replace:!0})}))},this.handleTabClick=(e,t)=>{const{query:r,router:a}=this.props,{activeTabKey:s}=this.state;s!==t&&this.setState({activeTabKey:t},(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{tabKey:t});a.navigate(this.getRouteForQuery(e),{replace:!0})}))},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props;return(0,bt.n9)(t,e)},this.isAwsOcpAvailable=()=>{const{awsProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.KT)(r)&&(0,mt.JY)(e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props;return(0,bt.hn)(t,e)},this.isAzureOcpAvailable=()=>{const{azureProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.FW)(r)&&(0,mt.JY)(e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props;return(0,bt.FE)(t,e)},this.isGcpOcpAvailable=()=>{const{gcpProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.Sv)(r)&&(0,mt.JY)(e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,userAccess:t}=this.props;return(0,bt.Es)(t,e)},this.isIbmOcpAvailable=()=>{const{ibmProviders:e,ocpProviders:t,userAccess:r}=this.props;return(0,bt.tt)(r)&&(0,mt.JY)(e,t)},this.isOciAvailable=()=>{const{ociProviders:e,userAccess:t}=this.props;return(0,bt.HC)(t,e)},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props;return(0,bt.mn)(t,e)},this.isOcpCloudAvailable=()=>{const e=this.isAwsOcpAvailable(),t=this.isAzureOcpAvailable(),r=this.isGcpOcpAvailable(),a=this.isIbmOcpAvailable();return e||t||r||a},this.isRhelAvailable=()=>{const{isFinsightsFeatureEnabled:e,rhelProviders:t,userAccess:r}=this.props;return e&&(0,bt.ZC)(r,t)}}componentDidMount(){const{tabKey:e}=this.props;this.setState({activeTabKey:e,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}componentDidUpdate(e){const{providers:t,tabKey:r,userAccess:a}=this.props;e.userAccess===a&&e.providers===t||this.setState({activeTabKey:r,currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),currentRhelPerspective:this.getDefaultRhelPerspective()})}render(){const{providersFetchStatus:e,intl:t,isFinsightsFeatureEnabled:r,isIbmFeatureEnabled:o,userAccessFetchStatus:n}=this.props,c=!(e!==R.iF.complete||this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOciAvailable()||this.isOcpAvailable()||this.isRhelAvailable()),i=e===R.iF.inProgress||n===R.iF.inProgress,l=this.getAvailableTabs(),u=t.formatMessage(p.Z.overviewTitle);return i?m().createElement(b.g,{title:u}):c?m().createElement(T.L,{title:u}):m().createElement(m().Fragment,null,m().createElement("header",{style:Rt.header},m().createElement("div",{style:Rt.headerContent},m().createElement(a.Title,{headingLevel:"h1",size:a.TitleSizes["2xl"]},u,m().createElement("span",{style:Rt.infoIcon},m().createElement(a.Popover,{"aria-label":t.formatMessage(p.Z.overviewInfoArialLabel),enableFlip:!0,bodyContent:m().createElement(m().Fragment,null,m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.openShiftCloudInfrastructure)),m().createElement("p",null,t.formatMessage(p.Z.openShiftCloudInfrastructureDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.openShift)),m().createElement("p",null,t.formatMessage(p.Z.openShiftDesc)),m().createElement("br",null),r&&m().createElement(m().Fragment,null,m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.rhel)),m().createElement("p",null,t.formatMessage(p.Z.rhelDesc)),m().createElement("br",null)),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.aws)),m().createElement("p",null,t.formatMessage(p.Z.awsDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.gcp)),m().createElement("p",null,t.formatMessage(p.Z.gcpDesc)),o&&m().createElement(m().Fragment,null,m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.ibm)),m().createElement("p",null,t.formatMessage(p.Z.ibmDesc))),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.azure)),m().createElement("p",null,t.formatMessage(p.Z.azureDesc)),m().createElement("br",null),m().createElement("p",{style:Rt.infoTitle},t.formatMessage(p.Z.oci)),m().createElement("p",null,t.formatMessage(p.Z.ociDesc)))},m().createElement(a.Button,{"aria-label":t.formatMessage(p.Z.overviewInfoButtonArialLabel),variant:a.ButtonVariant.plain},m().createElement(s.iC,null))))),m().createElement("div",{style:Rt.headerContentRight},this.getCurrency())),m().createElement("div",{style:Rt.tabs},this.getTabs(l)),m().createElement("div",{style:Rt.headerContent},m().createElement("div",{style:Rt.headerContentLeft},this.getPerspective(),this.getCostType()),m().createElement("div",{style:Rt.date},(0,gt.J4)()))),m().createElement("div",{style:Rt.main},this.getTabContent(l)))}}const At=(0,R.X1)(((e,{router:t})=>{const r=function(e){return n.mB(e)}(t.location.search),a=r.tabKey&&!Number.isNaN(r.tabKey)?Number(r.tabKey):0,s=r.perspective,p=(0,H.zC)(),u=s===Ot.aws||s===Ot.awsOcp?(0,H.uY)():void 0,m=Object.assign({},r),d=(0,c.H)(dt.NT),h=dt.aX.selectProviders(e,o.l.all,d),g=dt.aX.selectProvidersError(e,o.l.all,d),y=dt.aX.selectProvidersFetchStatus(e,o.l.all,d),b=(0,i.T)(ht.QR),f=ht.JO.selectUserAccess(e,l.n.all,b),T=ht.JO.selectUserAccessError(e,l.n.all,b),v=ht.JO.selectUserAccessFetchStatus(e,l.n.all,b);return{awsProviders:(0,mt.BV)(h,o.l.aws),azureProviders:(0,mt.BV)(h,o.l.azure),costType:u,currency:p,gcpProviders:(0,mt.BV)(h,o.l.gcp),ibmProviders:(0,mt.BV)(h,o.l.ibm),isFinsightsFeatureEnabled:Je.iJ.selectIsFinsightsFeatureEnabled(e),isIbmFeatureEnabled:Je.iJ.selectIsIbmFeatureEnabled(e),ociProviders:(0,mt.BV)(h,o.l.oci),ocpProviders:(0,mt.BV)(h,o.l.ocp),providers:h,providersError:g,providersFetchStatus:y,perspective:s,query:m,rhelProviders:(0,mt.BV)(h,o.l.rhel),tabKey:a,userAccess:f,userAccessError:T,userAccessFetchStatus:v,userAccessQueryString:b}})),Vt=(0,d.ZP)((0,yt.E)((0,h.connect)(At,{})(jt)))},86482:(e,t,r)=>{var a;r.d(t,{BV:()=>o,Bj:()=>l,D2:()=>p,JY:()=>u,Mg:()=>d,at:()=>i,g8:()=>m,rL:()=>h}),function(e){e.currentMonthData="current_month_data",e.hasData="has_data",e.previousMonthData="previous_month_data"}(a||(a={}));const s=(e,t)=>{let r;if(e&&e.data)for(const a of e.data)if(a.infrastructure&&a.infrastructure.uuid===t){r=a;break}return r},o=(e,t)=>{if(!e)return e;const r=e.data.filter((e=>e.source_type.toLowerCase()===t)),a=Object.assign(Object.assign({},e.meta),{count:r.length});return Object.assign(Object.assign({},e),{meta:a,data:r})},n=(e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(a[t]){r=!0;break}return r},c=(e,t,r)=>{let a=!1;if(e&&e.data)for(const o of e.data){const e=s(t,o.uuid);if(e&&e[r]){a=!0;break}}return a},i=(e,t)=>c(e,t,a.currentMonthData),l=(e,t)=>c(e,t,a.hasData),p=(e,t)=>c(e,t,a.previousMonthData),u=(e,t)=>((e,t)=>{let r=!1;if(e&&e.data)for(const a of e.data)if(s(t,a.uuid)){r=!0;break}return r})(e,t),m=e=>n(e,a.currentMonthData),d=e=>n(e,a.hasData),h=e=>n(e,a.previousMonthData)},96351:(e,t,r)=>{r.d(t,{Es:()=>y,F4:()=>E,FE:()=>h,FW:()=>i,HC:()=>u,KT:()=>n,Rt:()=>b,Sv:()=>d,Xd:()=>p,ZC:()=>v,hn:()=>l,mn:()=>f,n9:()=>c,ot:()=>m,tt:()=>g,yY:()=>T});var a=r(91577);const s=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const a=e.data.find((e=>e.type===t));r=a&&a.access}else r=e&&!0===e.data;return r},o=e=>{let t=!1;return e&&e.meta&&(t=e.meta.count>0),t},n=e=>s(e,a.n.aws),c=(e,t)=>n(e)&&o(t),i=e=>s(e,a.n.azure),l=(e,t)=>i(e)&&o(t),p=e=>s(e,a.n.oci),u=(e,t)=>p(e)&&o(t),m=e=>s(e,a.n.cost_model),d=e=>s(e,a.n.gcp),h=(e,t)=>s(e,a.n.gcp)&&o(t),g=e=>d(e),y=(e,t)=>g(e)&&o(t),b=e=>s(e,a.n.ocp),f=(e,t)=>b(e)&&o(t),T=e=>s(e,a.n.rhel),v=(e,t)=>T(e)&&o(t),E=e=>s(e,a.n.ros)},84735:(e,t,r)=>{e.exports=r.p+"fonts/Cost-icon.svg"}}]);
//# sourceMappingURL=../sourcemaps/overview.6446d9176769600f90f37f75f3376937.js.map