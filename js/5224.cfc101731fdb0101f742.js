"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[5224],{52636:(e,t,r)=>{r.d(t,{Xk:()=>a,rU:()=>n});var o=r(40400);const n={name:"CalculatorIcon",height:512,width:448,svgPath:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z",yOffset:0,xOffset:0},a=(0,o.IU)(n)},90302:(e,t,r)=>{r.d(t,{W:()=>l});var o=r(49382),n=r(12289),a=r(40794),s=r(11331),i=r(43789);const l={costColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end",paddingRight:0},defaultLabel:{minWidth:"63px"},emptyState:{backgroundColor:o.ZP.value,display:"flex",justifyContent:"center",paddingTop:s.ZP.value,height:"35vh",width:"100%"},infoArrow:{position:"relative"},infoArrowDesc:{bottom:i.ZP.value},infoDescription:{color:n.ZP.value,fontSize:a.ZP.value},lastReported:{textAlign:"right",paddingRight:"40px"},lastReportedColumn:{textAlign:"right",display:"flex",justifyContent:"flex-end"},managedColumn:{textAlign:"right"},nameColumn:{width:"1%"}}},90569:(e,t,r)=>{r.d(t,{w:()=>g});var o=r(90154),n=r(52636),a=r(40227),s=r(79112),i=r(97027),l=r(92950),c=r.n(l),m=r(74806),d=r(42901),p=r(5842),u=r(90302);class h extends c().Component{constructor(e){super(e),this.getEmptyState=()=>{const{intl:e,router:t}=this.props,r=(0,s.mB)(t.location.search);if(r.filter_by)for(const e of Object.values(r.filter_by))if("*"!==e)return c().createElement(d.c,{filter:e,showMargin:!1});return c().createElement(o.EmptyState,null,c().createElement(o.EmptyStateIcon,{icon:n.Xk}),c().createElement(o.EmptyStateBody,null,e.formatMessage(i.Z.detailsEmptyState)))},this.getSortBy=e=>{const{columns:t,router:r}=this.props,o=t[e].orderBy,n=(0,s.mB)(r.location.search),a=n&&n.order_by&&n.order_by[o];return a?{index:e,direction:a}:{}},this.getSortParams=e=>({sortBy:this.getSortBy(e),onSort:this.handleOnSort,columnIndex:e}),this.handleOnSelect=(e,t,r)=>{const{onSelected:o,rows:n}=this.props;let a,s=[];-1===r?a=n.map((e=>(e.selected=t,e))):(a=[...n],a[r].selected=t,s=[a[r].item]),this.setState({rows:n},(()=>{o&&o(s,t)}))},this.handleOnSort=(e,t,r)=>{const{columns:o,onSort:n}=this.props;n&&n(o[t].orderBy,r===a.SortByDirection.asc)},this.handleOnRowClick=(e,t)=>{const{onRowClick:r,rows:o}=this.props;o.map((e=>e.selected=!1)),o[t].selected=!0,this.setState({rows:o},(()=>{r&&r(e,t)}))},this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnSort=this.handleOnSort.bind(this)}render(){const{columns:e,intl:t,isLoading:r,isRecommendations:n,rows:s}=this.props;return c().createElement(c().Fragment,null,c().createElement(a.TableComposable,{"aria-label":t.formatMessage(i.Z.dataTableAriaLabel),className:"tableOverride",gridBreakPoint:"grid-2xl",hasSelectableRowCaption:n},c().createElement(a.Thead,null,c().createElement(a.Tr,null,e.map(((e,t)=>c().createElement(a.Th,{key:`col-${t}-${e.value}`,modifier:"nowrap",sort:e.isSortable?this.getSortParams(t):void 0,style:e.style},e.name))))),c().createElement(a.Tbody,null,r?c().createElement(a.Tr,null,c().createElement(a.Td,{colSpan:100},c().createElement(o.Bullseye,null,c().createElement("div",{style:{textAlign:"center"}},c().createElement(o.Spinner,{size:"xl"}))))):s.map(((t,r)=>c().createElement(a.Tr,{isSelectable:n,isHoverable:n,isRowSelected:n&&t.selected,onRowClick:n?e=>this.handleOnRowClick(e,r):void 0,key:`row-${r}`},t.cells.map(((o,s)=>0!==s||n?c().createElement(a.Td,{dataLabel:e[s].name,key:`cell-${r}-${s}`,modifier:"nowrap",isActionCell:!n&&s===t.cells.length-1,style:o.style},o.value):c().createElement(a.Td,{dataLabel:e[s].name,key:`cell-${s}-${r}`,modifier:"nowrap",select:{disable:t.selectionDisabled,isSelected:t.selected,onSelect:(e,t)=>this.handleOnSelect(e,t,r),rowIndex:r},style:o.style})))))))),Boolean(0===s.length)&&c().createElement("div",{style:u.W.emptyState},this.getEmptyState()))}}const g=(0,m.ZP)((0,p.E)(h))},25224:(e,t,r)=>{r.d(t,{Z:()=>H});var o=r(90154),n=r(39333),a=r(89256),s=r(97027),i=r(92950),l=r.n(i),c=r(74806),m=r(77760),d=r(52471),p=r(47947),u=r(37269),h=r(19727),g=r(1156),y=r(2136),f=r(5842),v=r(49382),b=r(98499),S=r(32412);const E={content:{paddingBottom:b.ZP.value,paddingTop:b.ZP.value},header:{backgroundColor:v.ZP.var,padding:b.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},paginationContainer:{marginLeft:b.ZP.value,marginRight:b.ZP.value},pagination:{backgroundColor:v.ZP.value,paddingBottom:S.ZP.value,paddingTop:S.ZP.value},recommendationsContainer:{minHeight:"100vh"},tableContainer:{marginLeft:b.ZP.value,marginRight:b.ZP.value},toolbarContainer:{marginLeft:b.ZP.value,marginRight:b.ZP.value}};class w extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState)}render(){const{intl:e}=this.props;return l().createElement("header",{style:E.header},l().createElement("div",{style:E.headerContent},l().createElement(o.Title,{headingLevel:"h1",style:E.title,size:o.TitleSizes["2xl"]},e.formatMessage(s.Z.recommendations))))}}const P=(0,g.X1)((()=>({}))),C=(0,c.ZP)((0,m.connect)(P,{})(w));var O=r(90569),k=r(90302),R=r(20997),Z=r(45087);class B extends l().Component{constructor(){super(...arguments),this.state={columns:[],rows:[]},this.initDatum=()=>{const{groupBy:e,intl:t,report:r}=this.props;if(!r)return;const o=r&&r.data&&r.data.length>0,n=[],a=[Object.assign({name:t.formatMessage(s.Z.recommendationsNames,{value:"container"}),orderBy:"container"},o&&{isSortable:!0}),Object.assign({hidden:"project"===e,name:t.formatMessage(s.Z.recommendationsNames,{value:"project"}),orderBy:"project"},o&&{isSortable:!0}),Object.assign({name:t.formatMessage(s.Z.recommendationsNames,{value:"workload"}),orderBy:"workload"},o&&{isSortable:!0}),Object.assign({name:t.formatMessage(s.Z.recommendationsNames,{value:"workload_type"}),orderBy:"workload_type"},o&&{isSortable:!0}),Object.assign({hidden:"cluster"===e,name:t.formatMessage(s.Z.recommendationsNames,{value:"cluster"}),orderBy:"cluster"},o&&{isSortable:!0}),Object.assign({name:t.formatMessage(s.Z.recommendationsNames,{value:"last_reported"}),orderBy:"last_reported",style:k.W.lastReportedColumn},o&&{isSortable:!0})];o&&r.data.map((t=>{const r=t.cluster_alias?t.cluster_alias:t.cluster_uuid?t.cluster_uuid:"",o=t.container?t.container:"",a=(0,Z.i0)(t.last_reported),s=t.project?t.project:"",i=t.workload?t.workload:"",c=t.workload_type?t.workload_type:"";n.push({cells:[{value:l().createElement("div",null,o)},{value:l().createElement("div",null,s),hidden:"project"===e},{value:l().createElement("div",null,i)},{value:l().createElement("div",null,c)},{value:l().createElement("div",null,r),hidden:"cluster"===e},{value:l().createElement("div",null,a),style:k.W.lastReported}],item:t})}));const i=a.filter((e=>!e.hidden)),c=n.map((e=>{var t=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,[]);return t.cells=t.cells.filter((e=>!e.hidden)),t}));this.setState({columns:i,rows:c})},this.handleOnRowClick=(e,t)=>{const{openRecommendationsDrawer:r}=this.props,{rows:o}=this.state;r(o[t].item)}}componentDidMount(){this.initDatum()}componentDidUpdate(e){const{report:t}=this.props,r=t&&t.data?JSON.stringify(t.data):"";(e.report&&e.report.data?JSON.stringify(e.report.data):"")!==r&&this.initDatum()}render(){const{isLoading:e,onSort:t}=this.props,{columns:r,rows:o}=this.state;return l().createElement(O.w,{columns:r,isLoading:e,isRecommendations:!0,onSort:t,rows:o,onRowClick:this.handleOnRowClick})}}const x=(0,g.X1)(((e,{router:t})=>{const r=(0,n.mB)(t.location.search);return{groupBy:(0,u.VL)(r),isOpen:R.lU.selectIsRecommendationsDrawerOpen(e)}})),j={closeRecommendationsDrawer:R.Aw.R7,openRecommendationsDrawer:R.Aw.JI},T=(0,c.ZP)((0,f.E)((0,m.connect)(x,j)(B)));var _=r(36116),M=r(70539);class D extends l().Component{constructor(){super(...arguments),this.defaultState={},this.state=Object.assign({},this.defaultState),this.getCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(s.Z.filterByValues,{value:"cluster"}),key:"cluster"},{name:e.formatMessage(s.Z.filterByValues,{value:"project"}),key:"project"},{name:e.formatMessage(s.Z.filterByValues,{value:"workload_type"}),key:"workload_type"},{name:e.formatMessage(s.Z.filterByValues,{value:"workload"}),key:"workload"},{name:e.formatMessage(s.Z.filterByValues,{value:"container"}),key:"container"}]}}componentDidMount(){this.setState({categoryOptions:this.getCategoryOptions()})}render(){const{isDisabled:e,itemsPerPage:t,itemsTotal:r,onFilterAdded:o,onFilterRemoved:n,pagination:a,query:s}=this.props,{categoryOptions:i}=this.state;return l().createElement(M.k,{categoryOptions:i,isDisabled:e,itemsPerPage:t,itemsTotal:r,onFilterAdded:o,onFilterRemoved:n,pagination:a,query:s,resourcePathsType:_.C.ocp,showFilter:!0})}}const F=(0,g.X1)((()=>({}))),A=(0,m.connect)(F,{})(D),L=(0,c.ZP)(A),V={exclude:{},filter:{},filter_by:{},limit:10,offset:0,order_by:{cost:"desc"}},z=a.N.ros,N=a.v.recommendation;class I extends l().Component{constructor(){super(...arguments),this.defaultState={columns:[],rows:[]},this.state=Object.assign({},this.defaultState),this.getPagination=(e=!1,t=!1)=>{const{intl:r,query:n,report:a,router:i}=this.props,c=a&&a.meta?a.meta.count:0,m=a&&a.meta?a.meta.limit:V.limit,d=(a&&a.meta?a.meta.offset:V.offset)/m+1;return l().createElement(o.Pagination,{isCompact:!t,isDisabled:e,itemCount:c,onPerPageSelect:(e,t)=>(0,h.xh)(n,i,t),onSetPage:(e,t)=>(0,h.$9)(n,i,a,t),page:d,perPage:m,titles:{paginationTitle:r.formatMessage(s.Z.paginationTitle,{title:r.formatMessage(s.Z.openShift),placement:t?"bottom":"top"})},variant:t?o.PaginationVariant.bottom:o.PaginationVariant.top,widgetId:"exports-pagination"+(t?"-bottom":"")})},this.getTable=()=>{const{query:e,report:t,reportFetchStatus:r,reportQueryString:o,router:n}=this.props;return l().createElement(T,{isLoading:r===g.iF.inProgress,onSort:(t,r)=>(0,h.yB)(e,n,t,r),report:t,reportQueryString:o})},this.getToolbar=()=>{const{query:e,report:t,router:r}=this.props,o=t&&t.meta?t.meta.limit:0,n=t&&t.meta?t.meta.count:0,a=0===n;return l().createElement(L,{isDisabled:a,itemsPerPage:o,itemsTotal:n,onFilterAdded:t=>(0,h.$3)(e,r,t),onFilterRemoved:t=>(0,h.q7)(e,r,t),pagination:this.getPagination(a),query:e})},this.updateReport=()=>{const{fetchRosReport:e,reportQueryString:t}=this.props;e(N,z,t)}}componentDidMount(){this.updateReport()}componentDidUpdate(e){const{report:t,reportError:r,reportQueryString:o,router:n}=this.props,a=e.reportQueryString!==o,s=!t&&!r,i=!n.location.search;(a||s||i)&&this.updateReport()}render(){const{groupBy:e,intl:t,report:r,reportError:o,reportFetchStatus:n}=this.props,a=0===(r&&r.meta?r.meta.count:0),i=void 0===e,c=t.formatMessage(s.Z.ocpDetailsTitle);return o?l().createElement(p.W,{title:c}):l().createElement("div",{style:E.recommendationsContainer},i?l().createElement(l().Fragment,null,l().createElement(C,null),l().createElement("div",{style:E.content},l().createElement("div",{style:E.toolbarContainer},this.getToolbar()),n===g.iF.inProgress?l().createElement(d.g,null):l().createElement(l().Fragment,null,l().createElement("div",{style:E.tableContainer},this.getTable()),l().createElement("div",{style:E.paginationContainer},l().createElement("div",{style:E.pagination},this.getPagination(a,!0)))))):l().createElement(l().Fragment,null,this.getToolbar(),n===g.iF.inProgress?l().createElement(d.g,null):l().createElement(l().Fragment,null,this.getTable(),l().createElement("div",{style:E.pagination},this.getPagination(a,!0)))))}}const $=(0,g.X1)(((e,{router:t})=>{const r=function(e){return n.mB(e)}(t.location.search),o=(0,u.VL)(r),a=(0,u.pe)(r),s=Object.assign(Object.assign({},o&&{[o]:a}),{filter_by:r.filter_by||V.filter_by,limit:r.limit||V.limit,offset:r.offset||V.offset}),i=function(e){return n.pm(e)}(Object.assign({},s)),l=y.R0.selectRos(e,N,z,i),c=y.R0.selectRosError(e,N,z,i),m=y.R0.selectRosFetchStatus(e,N,z,i);return{groupBy:r.group_by,query:s,report:l,reportError:c,reportFetchStatus:m,reportQueryString:i}})),q={fetchRosReport:y.Ze.fetchRosReport},H=(0,c.ZP)((0,f.E)((0,m.connect)($,q)(I)))}}]);
//# sourceMappingURL=../sourcemaps/5224.3e58a387dcf08f9834a95e2b4bf96366.js.map