(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[758],{48716:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(22122),n=a(96156),r=a(81253),o=a(97522),i=a.n(o),l=a(45697),c=a.n(l),d=a(94184),m=a.n(d),p=a(72466),u=function(e){var t=e.className,a=e.children,o=(0,r.Z)(e,["className","children"]),l=m()(t,"pf-l-page-header","pf-c-page-header","pf-l-page__main-section","pf-c-page__main-section");return i().createElement(p.Z.Consumer,null,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=m()((0,n.Z)({},"pf-m-".concat(e,"-200"),"dark"===e),(0,n.Z)({},"pf-m-light","light"===e));return i().createElement("section",(0,s.Z)({},o,{className:"".concat(l," ").concat(t),"widget-type":"InsightsPageHeader"}),a)}))};const g=u;u.propTypes={children:c().any.isRequired,className:c().string}},39173:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var s=a(97522),n=a.n(s),r=a(45697),o=a.n(r),i=a(94184),l=a.n(i),c=a(60485),d=function(e){var t=e.className,a=e.title,s=l()(t);return n().createElement(c.D,{headingLevel:"h1",size:"2xl",className:s,"widget-type":"InsightsPageHeaderTitle"}," ",a," ")};const m=d;d.propTypes={title:o().node.isRequired,className:o().string}},94605:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ie});var s=a(97066),n=a(3235),r=a(16177),o=a(48716),i=a(39173),l=a(20546),c=a(97522),d=a.n(c),m=a(91768),p=a(43476),u=a(94377),g=a(87932),h=a(46462),E=a(4705);class _ extends d().Component{constructor(e){super(e),this.handleDistributionChange=(e,t)=>{const{value:a}=t.currentTarget;this.setState({distribution:a})},this.state={distribution:this.props.current.distribution}}render(){const{error:e,current:t,onClose:a,updateCostModel:n,isLoading:r,t:o}=this.props;return d().createElement(s.Modal,{title:o("cost_models_details.distribution_type"),isOpen:!0,onClose:()=>a({name:"updateDistribution",isOpen:!1}),variant:s.ModalVariant.small,actions:[d().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const e=Object.assign(Object.assign({},t),{source_uuids:t.sources.map((e=>e.uuid)),source_type:"OCP",distribution:this.state.distribution});n(t.uuid,e,"updateDistribution")}},o("save")),d().createElement(s.Button,{key:"cancel",variant:"link",onClick:()=>a({name:"updateDistribution",isOpen:!1}),isDisabled:r},o("cancel"))]},d().createElement(s.Stack,{hasGutter:!0},d().createElement(s.StackItem,null,e&&d().createElement(s.Alert,{variant:"danger",title:`${e}`})),d().createElement(s.StackItem,null,d().createElement(s.TextContent,null,d().createElement(s.Text,{style:E.W.cardDescription},o("cost_models_details.description_distribution_model")))),d().createElement(s.StackItem,null,d().createElement(s.Form,null,d().createElement(s.FormGroup,{isInline:!0,fieldId:"cost-distribution",isRequired:!0},d().createElement(s.Radio,{isChecked:"cpu"===this.state.distribution,name:"distribution",label:o("cpu_title"),"aria-label":o("cpu_title"),id:"cpuDistribution",value:"cpu",onChange:this.handleDistributionChange}),d().createElement(s.Radio,{isChecked:"memory"===this.state.distribution,name:"distribution",label:o("memory_title"),"aria-label":o("memory_title"),id:"memoryDistribution",value:"memory",onChange:this.handleDistributionChange}))))))}}const b=(0,p.connect)((0,u.X1)((e=>({isLoading:g.E6.updateProcessing(e),error:g.E6.updateError(e)}))),{onClose:g.F0.setCostModelDialog,updateCostModel:g.F0.updateCostModel},((e,t,a)=>Object.assign(Object.assign(Object.assign({},e),t),a)))((0,m.Z)()(_)),C=(0,p.connect)((0,u.X1)((e=>{const{updateDistribution:t}=g.E6.isDialogOpen(e)("distribution");return{isUpdateDialogOpen:t,costModelDialog:g.E6.isDialogOpen(e)("distribution"),isWritePermission:h.c5.isCostModelWritePermission(e)}})),{setCostModelDialog:g.F0.setCostModelDialog})((0,m.Z)()((({isWritePermission:e,setCostModelDialog:t,current:a,isUpdateDialogOpen:n,t:r})=>{const[o,i]=d().useState(!1),c="cpu"===a.distribution?r("cpu_title"):r("memory_title");return d().createElement(d().Fragment,null,n&&d().createElement(b,{current:a}),d().createElement(s.Card,{style:E.W.card},d().createElement(s.CardHeader,null,d().createElement(s.CardHeaderMain,null,d().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.md},r("cost_models_details.distribution_type"))),d().createElement(s.CardActions,null,d().createElement(s.Dropdown,{toggle:d().createElement(s.KebabToggle,{onToggle:i}),isOpen:o,onSelect:()=>i(!1),position:s.DropdownPosition.right,isPlain:!0,dropdownItems:[d().createElement(l.j,{key:"edit",isDisabled:!e},d().createElement(s.DropdownItem,{isDisabled:!e,onClick:()=>t({isOpen:!0,name:"updateDistribution"}),component:"button"},r("cost_models_details.edit_distribution")))]}))),d().createElement(s.CardBody,{style:E.W.cardDescription},r("cost_models_details.description_distribution")),d().createElement(s.CardBody,{isFilled:!0}),d().createElement(s.CardBody,{style:E.W.cardBody},c),d().createElement(s.CardBody,{isFilled:!0})))})));var y=a(901);class v extends d().Component{constructor(e){super(e),this.handleSignChange=(e,t)=>{const{value:a}=t.currentTarget;this.setState({isDiscount:"true"===a})},this.handleMarkupDiscountChange=(e,t)=>{const{value:a}=t.currentTarget;/^[0-9.]*$/.test(a)&&this.setState({markup:a})},this.markupValidator=()=>/^\d*(\.?\d{1,2})?$/.test(this.state.markup)?"default":"error",this.handleOnKeyDown=e=>{13!==e.keyCode&&187!==e.keyCode&&189!==e.keyCode||e.preventDefault()};const t=this.props.current.markup.value,a=Number(t)<0,s=a?t.substring(1):t;this.state={markup:(0,y.Bw)(Number(s),"markup",{fractionDigits:2})||"0.00",origIsDiscount:a,isDiscount:a}}render(){const{error:e,current:t,onClose:a,updateCostModel:n,isLoading:r,t:o}=this.props,{isDiscount:i}=this.state;return d().createElement(s.Modal,{title:o("cost_models_details.edit_markup_or_discount"),isOpen:!0,onClose:()=>a({name:"updateMarkup",isOpen:!1}),variant:s.ModalVariant.medium,actions:[d().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const e=Object.assign(Object.assign({},t),{source_uuids:t.sources.map((e=>e.uuid)),source_type:"OpenShift Container Platform"===t.source_type?"OCP":"AWS",markup:{value:this.state.isDiscount?"-"+this.state.markup:this.state.markup,unit:"percent"}});n(t.uuid,e,"updateMarkup")},isDisabled:isNaN(Number(this.state.markup))||Number(this.state.markup)===Number(this.state.origIsDiscount?t.markup.value.substring(1):t.markup.value||0)&&this.state.isDiscount===this.state.origIsDiscount||r},o("save")),d().createElement(s.Button,{key:"cancel",variant:"link",onClick:()=>a({name:"updateMarkup",isOpen:!1}),isDisabled:r},o("cancel"))]},d().createElement(s.Stack,{hasGutter:!0},d().createElement(s.StackItem,null,e&&d().createElement(s.Alert,{variant:"danger",title:`${e}`})),d().createElement(s.StackItem,null,d().createElement(s.TextContent,null,d().createElement(s.Text,{style:E.W.cardDescription},o("cost_models_details.description_markup_or_discount_model")))),d().createElement(s.StackItem,null,d().createElement(s.TextContent,null,d().createElement(s.Title,{headingLevel:"h2",size:"md"},o("cost_models_details.markup_or_discount"))),d().createElement(s.Flex,{style:E.W.markupRadioContainer},d().createElement(s.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},d().createElement(s.FlexItem,null,d().createElement(s.Radio,{isChecked:!i,name:"discount",label:o("cost_models_details.markup_plus"),"aria-label":o("cost_models_details.markup_plus"),id:"markup",value:"false",onChange:this.handleSignChange,style:E.W.markupRadio}),d().createElement(s.Radio,{isChecked:i,name:"discount",label:o("cost_models_details.discount_minus"),"aria-label":o("cost_models_details.discount_minus"),id:"discount",value:"true",onChange:this.handleSignChange}))),d().createElement(s.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfCenter"}},d().createElement(s.FlexItem,null,d().createElement(s.InputGroup,{style:E.W.rateContainer},d().createElement(s.InputGroupText,{style:E.W.sign},i?"-":"+"),d().createElement(s.TextInput,{style:E.W.inputField,type:"text","aria-label":o("rate"),id:"markup-input-box",value:this.state.markup,onKeyDown:this.handleOnKeyDown,onChange:this.handleMarkupDiscountChange,validated:this.markupValidator()}),d().createElement(s.InputGroupText,{style:E.W.percent},"%")))))),d().createElement(s.StackItem,null),d().createElement(s.StackItem,null,d().createElement(s.TextContent,null,d().createElement(s.Title,{headingLevel:"h3",size:"md"},o("cost_models_details.examples.title"))),d().createElement(s.List,null,d().createElement(s.ListItem,null,o("cost_models_details.examples.noAdjustment")),d().createElement(s.ListItem,null,o("cost_models_details.examples.doubleMarkup")),d().createElement(s.ListItem,null,o("cost_models_details.examples.reduceBaseToZero")),d().createElement(s.ListItem,null,o("cost_models_details.examples.reduceBaseToSeventyFive"))))))}}const P=(0,p.connect)((0,u.X1)((e=>({isLoading:g.E6.updateProcessing(e),error:g.E6.updateError(e)}))),{onClose:g.F0.setCostModelDialog,updateCostModel:g.F0.updateCostModel},((e,t,a)=>Object.assign(Object.assign(Object.assign({},e),t),a)))((0,m.Z)()(v)),f=(0,p.connect)((0,u.X1)((e=>{const{updateMarkup:t}=g.E6.isDialogOpen(e)("markup");return{isUpdateDialogOpen:t,costModelDialog:g.E6.isDialogOpen(e)("markup"),isWritePermission:h.c5.isCostModelWritePermission(e)}})),{setCostModelDialog:g.F0.setCostModelDialog})((0,m.Z)()((({isWritePermission:e,setCostModelDialog:t,current:a,isUpdateDialogOpen:n,t:r})=>{const[o,i]=d().useState(!1),c=a&&a.markup&&a.markup.value?(0,y.Bw)(Number(a.markup.value),"markup",{fractionDigits:2}):"0.0";return d().createElement(d().Fragment,null,n&&d().createElement(P,{current:a}),d().createElement(s.Card,{style:E.W.card},d().createElement(s.CardHeader,null,d().createElement(s.CardHeaderMain,null,d().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.md},r("cost_models_details.markup_or_discount"))),d().createElement(s.CardActions,null,d().createElement(s.Dropdown,{toggle:d().createElement(s.KebabToggle,{onToggle:i}),isOpen:o,onSelect:()=>i(!1),position:s.DropdownPosition.right,isPlain:!0,dropdownItems:[d().createElement(l.j,{key:"edit",isDisabled:!e},d().createElement(s.DropdownItem,{isDisabled:!e,onClick:()=>t({isOpen:!0,name:"updateMarkup"}),component:"button"},r("cost_models_details.edit_markup_action")))]}))),d().createElement(s.CardBody,{style:E.W.cardDescription},r("cost_models_details.description_markup")),d().createElement(s.CardBody,{isFilled:!0}),d().createElement(s.CardBody,{style:E.W.cardBody},c,"%"),d().createElement(s.CardBody,{isFilled:!0})))})));var S=a(59867),k=a(20167),O=a(55483),D=a(52413),T=a(77656),M=a(66555),x=a(39574),I=a(85218),F=a(60477),Z=a(89116),R=a(99627),w=a(52591),j=a(96085),B=a(69222);const L=(0,p.connect)((e=>{const t=g.E6.costModels(e);let a=null;return t.length>0&&(a=t[0]),{costModel:a,isOpen:g.E6.isDialogOpen(e)("rate").addRate,updateError:g.E6.updateError(e),isProcessing:g.E6.updateProcessing(e),metricsHash:R.qw.metrics(e)}}),(e=>({onClose:()=>{e(g.F0.setCostModelDialog({name:"addRate",isOpen:!1}))},updateCostModel:(t,a)=>g.F0.updateCostModel(t,a,"addRate")(e)})),((e,t)=>{const{uuid:a,rates:s}=e.costModel;return{isOpen:e.isOpen,metricsHash:e.metricsHash,rates:s,updateError:e.updateError,isProcessing:e.isProcessing,onClose:t.onClose,onProceed:s=>{const n=(0,w.L3)(e.metricsHash,e.costModel,s);t.updateCostModel(a,n)}}}))((({isOpen:e,isProcessing:t,onProceed:a,onClose:n,updateError:r,metricsHash:o,rates:i})=>{const l=(0,w.bF)(o),c=d().useMemo((()=>(0,w.Cw)(l)),[l.errors,l.rateKind]);return d().useEffect((()=>{l.reset(Object.assign(Object.assign({},j.Pv),{otherTiers:i}))}),[e]),d().createElement(B.W,null,(i=>d().createElement(s.Modal,{title:i("cost_models_details.add_rate_modal.title"),isOpen:e,onClose:n,variant:"large",actions:[d().createElement(s.Button,{key:"add-rate",variant:s.ButtonVariant.primary,isDisabled:!c||t,onClick:()=>{a(l)}},i("cost_models_details.add_rate")),d().createElement(s.Button,{key:"cancel",variant:s.ButtonVariant.link,isDisabled:t,onClick:n},i("cost_models_details.add_rate_modal.cancel"))]},d().createElement(s.Form,null,r&&d().createElement(s.Alert,{variant:"danger",title:`${r}`}),d().createElement(w.HJ,{metricsHash:o,rateFormData:l})))))}));var W=a(19694);const q=(0,m.Z)()((({t:e,onClose:t,onProceed:a,title:n,body:r,actionText:o,isProcessing:i=!1,isOpen:l=!1,isSmall:c=!1,error:m=""})=>{const p=d().createElement(s.Button,{key:"cancel",variant:"link",onClick:t,isDisabled:i},e("dialog.cancel")),u=d().createElement(s.Button,{key:"proceed",variant:"danger",onClick:a,isDisabled:i},o),g=d().createElement(s.Button,{key:"close",variant:"primary",onClick:t,isDisabled:i},e("dialog.close")),h=""!==o?[u,p]:[g];return d().createElement(s.Modal,{"aria-label":n,header:d().createElement(s.Title,{headingLevel:"h1",size:s.TitleSizes["2xl"]},d().createElement(W.LP,{color:"orange"})," ",n),isOpen:l,onClose:t,actions:h,variant:c?"small":"default"},m&&d().createElement(s.Alert,{variant:"danger",title:`${m}`}),r)}));var $=a(51508),A=a(26793);const z=(0,p.connect)((e=>{const t=g.E6.costModels(e);let a=null;return t.length>0&&(a=t[0]),{costModel:a,isOpen:g.E6.isDialogOpen(e)("rate").updateRate,updateError:g.E6.updateError(e),isProcessing:g.E6.updateProcessing(e),metricsHash:R.qw.metrics(e)}}),(e=>({onClose:()=>{e(g.F0.setCostModelDialog({name:"updateRate",isOpen:!1}))},updateCostModel:(t,a)=>{g.F0.updateCostModel(t,a,"updateRate")(e)}})),((e,t,a)=>{const{uuid:s,rates:n}=e.costModel;return{rate:e.costModel&&e.costModel.rates&&e.costModel.rates[a.index]?e.costModel.rates[a.index]:null,otherRates:n,metricsHash:e.metricsHash,onClose:t.onClose,isOpen:e.isOpen,isProcessing:e.isProcessing,updateError:e.updateError,onProceed:n=>{const r=(0,w.L3)(e.metricsHash,e.costModel,n,a.index);t.updateCostModel(s,r)}}}))((({rate:e,otherRates:t,metricsHash:a,onClose:n,isOpen:r,isProcessing:o,updateError:i,onProceed:l})=>{const{t:c}=(0,A.$)(),m=(0,w.bF)(a,e,t),p=d().useMemo((()=>(0,w.Cw)(m)),[m]),u=d().useMemo((()=>(0,w.uD)(e,m)),[m]);return d().useEffect((()=>{m.reset((0,w.Pz)(e,void 0,e&&e.tag_rates?t.filter((t=>t.metric.name!==e.metric.name||t.cost_type!==e.cost_type||t.tag_rates.tag_key!==e.tag_rates.tag_key)):t))}),[r]),d().createElement(s.Modal,{title:c("cost_models_details.edit_rate"),isOpen:r,onClose:n,variant:"large",actions:[d().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{l(m)},isDisabled:!p||o||!u},c("cost_models_details.add_rate_modal.save")),d().createElement(s.Button,{key:"cancel",variant:"link",onClick:n,isDisabled:o},c("cost_models_details.add_rate_modal.cancel"))]},d().createElement(s.Stack,{hasGutter:!0},i&&d().createElement(s.StackItem,null,d().createElement(s.Alert,{variant:"danger",title:`${i}`})),d().createElement(s.StackItem,null,d().createElement($.l,null,d().createElement(w.HJ,{metricsHash:a,rateFormData:m})))))}));class G extends d().Component{constructor(){super(...arguments),this.state={deleteRate:null,index:-1,pagination:{perPage:10,page:1}}}render(){const{t:e,fetchStatus:t,fetchError:a,isDialogOpen:n,metricsHash:r,isWritePermission:o}=this.props,i=Object.keys(r).map((e=>({label:e,value:e}))),l=i.reduce(((e,t)=>{const a=Object.keys(r[t.value]).filter((t=>!e.map((e=>e.value)).includes(t))).map((e=>({label:e,value:e})));return[...e,...a]}),[]),c=d().createElement("b",null,"dummyChild"),m=this.props.costModel,p=this.state.deleteRate?`${this.state.deleteRate.metric.label_metric}-${this.state.deleteRate.metric.label_measurement} (${this.state.deleteRate.metric.label_measurement_unit})`:"";return d().createElement(d().Fragment,null,d().createElement(L,null),d().createElement(z,{index:this.state.index}),d().createElement(q,{isSmall:!0,isOpen:n.deleteRate,title:e("dialog.rate.title"),onClose:()=>{this.props.setDialogOpen({name:"deleteRate",isOpen:!1}),this.setState({deleteRate:null})},isProcessing:this.props.isLoading,onProceed:()=>{const{index:e}=this.state,{current:t}=this.props,a=Object.assign(Object.assign({},t),{source_uuids:t.sources.map((e=>e.uuid)),source_type:"OCP",rates:[...t.rates.slice(0,e),...t.rates.slice(e+1)]});this.props.updateCostModel(t.uuid,a,"deleteRate")},body:d().createElement(d().Fragment,null,d().createElement(Z.c,{i18nKey:"dialog.rate.body",components:[c,c],values:{metric:p,cm:m}}),this.props.assignees&&this.props.assignees.length>0&&d().createElement(d().Fragment,null,e("dialog.rate.assigned"),d().createElement(s.List,null,this.props.assignees.map((e=>d().createElement(s.ListItem,{key:e},e)))))),actionText:e("dialog.deleteRate")}),d().createElement(T.j,{initialFilters:{primary:"metrics",metrics:[],measurements:[]}},(({search:n,setSearch:r,onRemove:c,onSelect:m,onClearAll:p})=>{const u=(this.state.pagination.page-1)*this.state.pagination.perPage,g=this.state.pagination.page*this.state.pagination.perPage,h=this.props.current.rates.filter((e=>0===n.metrics.length||n.metrics.includes(e.metric.label_metric))).filter((e=>0===n.measurements.length||n.measurements.includes(e.metric.label_measurement))),E=h.slice(u,g);return d().createElement(d().Fragment,null,d().createElement(M.Q,{primary:d().createElement(F.J,{isDisabled:0===this.props.current.rates.length,primary:n.primary,setPrimary:e=>r({primary:e}),options:[{label:e("toolbar.pricelist.metric"),value:"metrics"},{label:e("toolbar.pricelist.measurement"),value:"measurements"}]}),selected:n.primary,secondaries:[{component:d().createElement(I.n,{isDisabled:0===this.props.current.rates.length,placeholderText:e("toolbar.pricelist.measurement_placeholder"),selections:n.measurements,setSelections:e=>m("measurements",e),options:l}),name:"measurements",onRemove:c,filters:n.measurements},{component:d().createElement(I.n,{isDisabled:0===this.props.current.rates.length,placeholderText:e("toolbar.pricelist.metric_placeholder"),selections:n.metrics,setSelections:e=>m("metrics",e),options:i}),name:"metrics",onRemove:c,filters:n.metrics}],button:d().createElement(s.Button,{isDisabled:!o,onClick:()=>this.props.setDialogOpen({name:"addRate",isOpen:!0})},e("toolbar.pricelist.add_rate")),onClear:p,pagination:d().createElement(s.Pagination,{isCompact:!0,itemCount:h.length,perPage:this.state.pagination.perPage,page:this.state.pagination.page,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}})})}),2!==t&&d().createElement(D.G,null),2===t&&Boolean(a)&&d().createElement(k.Z,null),2===t&&0===E.length&&(0!==n.metrics.length||0!==n.measurements.length)&&d().createElement(O.c,{filter:e("cost_models_wizard.price_list.toolbar_top_results_aria_label")}),2===t&&0===E.length&&0===n.measurements.length&&0===n.metrics.length&&d().createElement(s.Bullseye,null,d().createElement(s.EmptyState,null,d().createElement(s.EmptyStateIcon,{icon:S.Yw}),d().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},e("cost_models_details.empty_state_rate.title")),d().createElement(s.EmptyStateBody,null,e("cost_models_details.empty_state_rate.description")))),2===t&&E.length>0&&d().createElement(d().Fragment,null,d().createElement(x.y,{t:e,tiers:E,actions:[{title:e("cost_models_wizard.price_list.update_button"),isDisabled:!o,style:o?void 0:{pointerEvents:"auto"},tooltip:o?void 0:d().createElement("div",null,e("cost_models.read_only_tooltip")),onClick:(e,t,a)=>{this.setState({deleteRate:null,index:a.data.index+u}),this.props.setDialogOpen({name:"updateRate",isOpen:!0})}},{title:e("cost_models_wizard.price_list.delete_button"),isDisabled:!o,style:o?{}:{pointerEvents:"auto"},tooltip:o?void 0:d().createElement("div",null,e("cost_models.read_only_tooltip")),onClick:(e,t,a)=>{const s=a.data.index;this.setState({deleteRate:E[s],index:s+u}),this.props.setDialogOpen({name:"deleteRate",isOpen:!0})}}]}),d().createElement(s.Toolbar,{id:"price-list-toolbar-bottom"},d().createElement(s.ToolbarContent,null,d().createElement(s.ToolbarItem,{variant:s.ToolbarItemVariant.pagination},d().createElement(s.Pagination,{itemCount:h.length,perPage:this.state.pagination.perPage,page:this.state.pagination.page,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}}),variant:"bottom"}))))))})))}}const H=(0,p.connect)((0,u.X1)((e=>({isLoading:g.E6.updateProcessing(e),error:g.E6.updateError(e),isDialogOpen:g.E6.isDialogOpen(e)("rate"),fetchError:g.E6.error(e),fetchStatus:g.E6.status(e),metricsHash:R.qw.metrics(e),costTypes:R.qw.costTypes(e),isWritePermission:h.c5.isCostModelWritePermission(e)}))),{updateCostModel:g.F0.updateCostModel,setDialogOpen:g.F0.setCostModelDialog})((0,m.Z)()(G));var K=a(88485),N=a(62226),V=a(6877),X=a(27916),U=a(10209),J=a(39887),Q=a(48794);const Y=({id:e,placeholder:t="",value:a,onChange:n,onSearch:r})=>d().createElement(s.InputGroup,null,d().createElement(s.TextInput,{value:a,placeholder:t,id:e,onChange:n,onKeyPress:e=>{"Enter"===e.key&&""!==a&&r(e)}}),d().createElement(s.InputGroupText,{style:{borderLeft:"0"}},d().createElement(Q.W1,null))),ee=(0,m.Z)()((({t:e,filterInputProps:t,paginationProps:a,filter:n})=>d().createElement(s.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:n.onClearAll},d().createElement(s.ToolbarContent,null,d().createElement(s.ToolbarItem,{variant:"search-filter"},d().createElement(s.ToolbarFilter,{deleteChip:n.onRemove,chips:n.query.name,categoryName:"name"},d().createElement(Y,Object.assign({placeholder:e("cost_models_wizard.source_table.filter_placeholder")},t)))),d().createElement(s.ToolbarItem,{variant:"pagination"},d().createElement(s.Pagination,{isCompact:a.isCompact,itemCount:a.itemCount,page:a.page,perPage:a.perPage,onSetPage:a.onSetPage,onPerPageSelect:a.onPerPageSelect}))))));class te extends d().Component{render(){const{costModel:e}=this.props;if(this.props.isLoadingSources)return d().createElement(D.G,null);if(this.props.fetchingSourcesError)return d().createElement(X.fv,null);const t=this.props.providers.map((t=>{const a=!!this.props.checked[t.uuid]&&this.props.checked[t.uuid].selected,s=void 0===t.cost_models?this.props.t("cost_models_wizard.source_table.default_cost_model"):t.cost_models.map((e=>e.name)).join(","),n=t.cost_models.length&&void 0===t.cost_models.find((t=>t.name===e.name))?d().createElement(J.a,{key:t.uuid,text:this.props.t("cost_models_wizard.warning_source",{cost_model:s})}):null;return{cells:[d().createElement("div",{key:t.uuid},t.name," ",n),s||""],selected:a,disableSelection:t.cost_models.length>0}})),a={"OpenShift Container Platform":"OCP","Microsoft Azure":"AZURE","Amazon Web Services":"AWS"}[e.source_type];return d().createElement(d().Fragment,null,d().createElement(ee,{filter:{onClearAll:()=>this.props.fetch(`source_type=${a}&limit=${this.props.pagination.perPage}`),onRemove:(e,t)=>{const s=(0,U.fg)({name:this.props.query.name?this.props.query.name.split(","):[]})(e,t);this.props.fetch(`source_type=${a}${s.name?`&name=${s.name.join(",")}`:""}&offset=0&limit=${this.props.pagination.perPage}`)},query:{name:this.props.query.name?this.props.query.name.split(","):[]}},filterInputProps:{id:"assign-sources-modal-toolbar",onChange:e=>this.props.updateFilter({currentFilterType:"name",currentFilterValue:e}),value:this.props.currentFilter.value,onSearch:()=>{const e=this.props.query.name?this.props.query.name.split(","):[],t=(0,U.xZ)({name:e})("name",this.props.currentFilter.value);this.props.fetch(`source_type=${a}&name=${t.name.join(",")}&limit=${this.props.pagination.perPage}&offset=0`)}},paginationProps:{isCompact:!0,itemCount:this.props.pagination.count,perPage:this.props.pagination.perPage,page:this.props.pagination.page,onPerPageSelect:(e,t)=>{this.props.fetch(`source_type=${a}&limit=${t}&offset=0&${this.props.query.name?`name=${this.props.query.name}`:""}`)},onSetPage:(e,t)=>{this.props.fetch(`source_type=${a}&limit=${this.props.pagination.perPage}&offset=${this.props.pagination.perPage*(t-1)}&${this.props.query.name?`name=${this.props.query.name}`:""}`)}}}),t.length>0&&d().createElement(V.Table,{"aria-label":this.props.t("cost_models_details.add_source"),cells:[this.props.t("name"),this.props.t("cost_models_wizard.source_table.column_cost_model")],rows:t,onSelect:(e,t,a)=>{if(-1!==a)this.props.setState(Object.assign(Object.assign({},this.props.checked),{[this.props.providers[a].uuid]:{selected:t,meta:this.props.providers[a]}}));else{const e=this.props.providers.reduce(((e,a)=>{const s=!!this.props.checked[a.uuid]&&this.props.checked[a.uuid].selected,n=a.cost_models.length>0;return Object.assign(Object.assign({},e),{[a.uuid]:{selected:n?s:t,meta:a}})}),{});this.props.setState(e)}}},d().createElement(V.TableHeader,null),d().createElement(V.TableBody,null)),0===t.length&&d().createElement(O.c,{subTitle:this.props.t("no_match_found_state.desc")}),d().createElement(s.Toolbar,{id:"costmodels_details.sources_pagination_datatoolbar"},d().createElement(s.ToolbarContent,{style:{flexDirection:"row-reverse"},"aria-label":this.props.t("cost_models_details.sources_pagination_bottom")},d().createElement(s.ToolbarItem,{variant:"pagination"},d().createElement(s.Pagination,{itemCount:this.props.pagination.count,isDisabled:this.props.isLoadingSources,perPage:this.props.pagination.perPage,page:this.props.pagination.page,onPerPageSelect:(e,t)=>{this.props.fetch(`limit=${t}&offset=0&${this.props.query.name?`name=${this.props.query.name}`:""}`)},onSetPage:(e,t)=>{this.props.fetch(`limit=${this.props.pagination.perPage}&offset=${this.props.pagination.perPage*(t-1)}&${this.props.query.name?`name=${this.props.query.name}`:""}`)}})))))}}const ae=(0,p.connect)((0,u.X1)((e=>({currentFilter:{name:N.vc.currentFilterType(e),value:N.vc.currentFilterValue(e)}}))),{updateFilter:N.lk.updateFilterToolbar})((0,m.Z)()(te)),se={"OpenShift Container Platform":"OCP","Microsoft Azure":"AZURE","Amazon Web Services":"AWS"};class ne extends d().Component{constructor(){super(...arguments),this.state={checked:{}}}componentDidMount(){const{costModel:{source_type:e},fetch:t}=this.props;t(`type=${se[e]}&limit=10&offset=0`)}componentDidUpdate(e){if(!0===e.isLoadingSources&&!1===this.props.isLoadingSources){const e=this.props.providers.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.uuid]:{selected:this.props.costModel.sources.some((e=>e.uuid===t.uuid)),meta:t}})),{});this.setState({checked:e})}}render(){const{isUpdateInProgress:e,onClose:t,isOpen:a,onSave:n,t:r,costModel:o,updateApiError:i}=this.props;return d().createElement(s.Modal,{isOpen:a,title:r("cost_models_details.assign_sources"),onClose:t,variant:"large",actions:[d().createElement(s.Button,{key:"save",isDisabled:e||this.props.isLoadingSources||null!==this.props.fetchingSourcesError,onClick:()=>{n(Object.keys(this.state.checked).filter((e=>this.state.checked[e].selected)))}},r("cost_models_details.action_assign")),d().createElement(s.Button,{key:"cancel",variant:"link",isDisabled:e,onClick:t},r("cost_models_wizard.cancel_button"))]},d().createElement(s.Stack,null,d().createElement(s.StackItem,null,Boolean(i)&&d().createElement(s.Alert,{variant:"danger",title:`${i}`})),d().createElement(s.StackItem,null,d().createElement(s.Grid,null,d().createElement(s.GridItem,{span:2},d().createElement(s.TextContent,null,d().createElement(s.Text,{component:s.TextVariants.h6},r("name")))),d().createElement(s.GridItem,{span:10},d().createElement(s.TextContent,null,d().createElement(s.Text,{component:s.TextVariants.p},this.props.costModel.name))),d().createElement(s.GridItem,{span:2},d().createElement(s.TextContent,null,d().createElement(s.Text,{component:s.TextVariants.h6},r("cost_models_wizard.general_info.source_type_label")))),d().createElement(s.GridItem,{span:10},d().createElement(s.TextContent,null,d().createElement(s.Text,{component:s.TextVariants.p},this.props.costModel.source_type))))),d().createElement(s.StackItem,null,d().createElement(ae,{fetch:this.props.fetch,fetchingSourcesError:this.props.fetchingSourcesError,isLoadingSources:this.props.isLoadingSources,providers:this.props.providers,pagination:this.props.pagination,query:this.props.query,costModel:o,checked:this.state.checked,setState:e=>{this.setState({checked:e})}}))))}}const re=(0,p.connect)((0,u.X1)((e=>({pagination:N.vc.pagination(e),query:N.vc.query(e),providers:N.vc.sources(e),isLoadingSources:1===N.vc.status(e),isUpdateInProgress:g.E6.updateProcessing(e),updateApiError:g.E6.updateError(e),fetchingSourcesError:N.vc.error(e)?(0,K.L)(N.vc.error(e)):null}))),{fetch:N.lk.fetchSources})((0,m.Z)()(ne));var oe=a(85111),ie=a(80963),le=a(84273);const ce=(0,p.connect)((e=>({canWrite:h.c5.isCostModelWritePermission(e),costModels:g.E6.costModels(e)})),void 0,((e,t,a)=>{const s=(n=e.canWrite,r=a.showDeleteDialog,n?[{title:"cost_models_details.action_unassign",onClick:(e,t)=>r(t)}]:[{style:{pointerEvents:"auto"},tooltip:"cost_models.read_only_tooltip",isDisabled:!0,title:"cost_models_details.action_unassign"}]);var n,r;return{"aria-label":"sources-table",cells:["name"],rows:e.costModels.length>0?e.costModels[0].sources.map((e=>[e.name])):[],actions:s}}))(le.T),de=({id:e,placeholder:t="",value:a,onChange:n,onSearch:r})=>d().createElement(s.InputGroup,null,d().createElement(s.TextInput,{value:a,placeholder:t,id:e,onChange:n,onKeyPress:e=>{"Enter"===e.key&&""!==a&&r(e)}}),d().createElement(s.InputGroupText,{style:{borderLeft:"0"}},d().createElement(Q.W1,null))),me=({filterInputProps:e,paginationProps:t,filter:a,actionButtonProps:n})=>d().createElement(s.Toolbar,{id:"assign-sources-toolbar",clearAllFilters:a.onClearAll},d().createElement(s.ToolbarContent,null,d().createElement(s.ToolbarItem,{variant:"search-filter"},d().createElement(s.ToolbarFilter,{deleteChip:a.onRemove,chips:a.query.name,categoryName:a.categoryNames.name},d().createElement(de,Object.assign({},e)))),d().createElement(s.ToolbarItem,null,d().createElement(l.j,{isDisabled:n.isDisabled},d().createElement(s.Button,Object.assign({},n)))),d().createElement(s.ToolbarItem,{variant:"pagination"},d().createElement(s.Pagination,{isCompact:t.isCompact,itemCount:t.itemCount,page:t.page,perPage:t.perPage,onSetPage:t.onSetPage,onPerPageSelect:t.onPerPageSelect})))),pe={emptyState:{display:"flex",flexDirection:"row",justifyContent:"center"},sourceTypeTitle:{marginLeft:20,marginTop:8,marginBottom:8}};class ue extends d().Component{constructor(){super(...arguments),this.state={query:{name:[]},currentFilter:"",pagination:{page:1,perPage:10}}}render(){const{pagination:{page:e,perPage:t}}=this.state,{current:a,onAdd:n,t:r,rows:o,isWritePermission:i}=this.props,l=o.filter((e=>!this.state.query.name||this.state.query.name.every((t=>e.includes(t))))).map((e=>[e])),c=l.slice((e-1)*t,e*t);return d().createElement(d().Fragment,null,d().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.md,style:pe.sourceTypeTitle},r("cost_models_details.cost_model.source_type"),": ",a.source_type),d().createElement(me,{actionButtonProps:{isDisabled:!i,onClick:n,children:r("toolbar.sources.assign_sources")},filter:{onClearAll:()=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:1}),query:{name:[]}}),onRemove:(e,t)=>{this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:1}),query:(0,U.fg)(this.state.query)("name",t)})},query:this.state.query,categoryNames:{name:r("name")}},paginationProps:{isCompact:!0,itemCount:l.length,perPage:t,page:e,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}})},filterInputProps:{id:"sources-tab-toolbar",onChange:e=>this.setState({currentFilter:e}),onSearch:()=>{this.setState({query:(0,U.xZ)(this.state.query)("name",this.state.currentFilter),currentFilter:"",pagination:Object.assign(Object.assign({},this.state.pagination),{page:1})})},value:this.state.currentFilter,placeholder:r("toolbar.sources.filter_placeholder")}}),c.length>0&&d().createElement(ce,{showDeleteDialog:e=>{this.props.onDelete(c[e])}}),0===o.length&&d().createElement("div",{style:pe.emptyState},d().createElement(s.EmptyState,null,d().createElement(s.EmptyStateIcon,{icon:oe.bk}),d().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},r("cost_models_details.empty_state_source.title")),d().createElement(s.EmptyStateBody,null,r("cost_models_details.empty_state_source.description")))),0===l.length&&o.length>0&&d().createElement(O.c,{filter:this.state.currentFilter,subTitle:r("no_match_found_state.desc")}),d().createElement(ie.N,{id:"costmodels_details_filter_datatoolbar","aria-label":"cost_models_details.sources_filter_controller",variant:"bottom",itemCount:l.length,perPage:t,page:e,onSetPage:(e,t)=>this.setState({pagination:Object.assign(Object.assign({},this.state.pagination),{page:t})}),onPerPageSelect:(e,t)=>this.setState({pagination:{page:1,perPage:t}})}))}}const ge=(0,p.connect)((0,u.X1)((e=>({isWritePermission:h.c5.isCostModelWritePermission(e)}))))((0,m.Z)()(ue));class he extends d().Component{constructor(){super(...arguments),this.state={dialogSource:null}}render(){const{setDialogOpen:e,isLoading:t,sources:a,costModel:s,t:n,isDialogOpen:r}=this.props;return d().createElement(d().Fragment,null,r.addSource&&d().createElement(re,{costModel:s,isOpen:!0,onClose:()=>e({name:"addSource",isOpen:!1}),onSave:e=>{this.props.updateCostModel(s.uuid,Object.assign(Object.assign({},s),{source_type:"OpenShift Container Platform"===s.source_type?"OCP":"AWS",source_uuids:e}),"addSource")}}),d().createElement(q,{isSmall:!0,isOpen:r.deleteSource,title:n("dialog.delete_source_from_cost_model_title",{source:this.state.dialogSource,cost_model:s.name}),onClose:()=>{e({name:"deleteSource",isOpen:!1}),this.setState({dialogSource:null})},isProcessing:t,onProceed:()=>{const e=Object.assign(Object.assign({},s),{source_type:"OpenShift Container Platform"===s.source_type?"OCP":"AWS",source_uuids:a.filter((e=>e.name!==this.state.dialogSource)).map((e=>e.uuid))});this.props.updateCostModel(s.uuid,e,"deleteSource")},body:n("dialog.delete_source_from_cost_model_body",{source:this.state.dialogSource,cost_model:s.name}),actionText:n("dialog.deleteSource")}),d().createElement(ge,{onDeleteText:n("cost_models_details.action_unassign"),onDelete:t=>{this.setState({dialogSource:t[0]}),e({name:"deleteSource",isOpen:!0})},onAdd:()=>e({name:"addSource",isOpen:!0}),rows:a.map((e=>e.name)),current:s}))}}const Ee=(0,p.connect)((0,u.X1)((e=>({isLoading:g.E6.updateProcessing(e),isDialogOpen:g.E6.isDialogOpen(e)("sources")}))),{setDialogOpen:g.F0.setCostModelDialog,updateCostModel:g.F0.updateCostModel})((0,m.Z)()(he));var _e=a(73466),be=a(81787),Ce=a(49382),ye=a(98499),ve=a(32412),Pe=a(48196);const fe={headerDescription:{width:"97%",wordWrap:"break-word"},content:{paddingTop:ye.ZP.value,height:"182vh"},costCalculation:{marginLeft:ye.ZP.value,marginRight:ye.ZP.value},costmodelsContainer:{marginLeft:ye.ZP.value,marginRight:ye.ZP.value,backgroundColor:Ce.ZP.value,paddingBottom:ve.ZP.value,paddingTop:ve.ZP.value},headerCostModel:{padding:ye.ZP.var,paddingBottom:0,backgroundColor:Ce.ZP.value},title:{paddingBottom:Pe.ZP.var}},Se={headerDescription:{width:"97%",wordWrap:"break-word"},content:{paddingTop:ye.ZP.value,height:"182vh"},costmodelsContainer:{marginLeft:ye.ZP.value,marginRight:ye.ZP.value,paddingBottom:ve.ZP.value,paddingTop:ve.ZP.value,paddingLeft:ye.ZP.value,paddingRight:ye.ZP.value},tableContainer:{marginLeft:ye.ZP.value,marginRight:ye.ZP.value},paginationContainer:{paddingBottom:ve.ZP.value,paddingTop:ve.ZP.value,paddingLeft:ye.ZP.value,paddingRight:ye.ZP.value,marginLeft:ye.ZP.value,marginRight:ye.ZP.value,marginBottom:ye.ZP.value,backgroundColor:Ce.ZP.value},toolbarContainer:{paddingBottom:ve.ZP.value,paddingTop:ve.ZP.value,marginLeft:ye.ZP.value,marginRight:ye.ZP.value,backgroundColor:Ce.ZP.value},header:{padding:ye.ZP.var,backgroundColor:Ce.ZP.var},headerCostModel:{padding:ye.ZP.value,paddingBottom:0,backgroundColor:Ce.ZP.var},breadcrumb:{paddingBottom:ve.ZP.var},title:{paddingBottom:Pe.ZP.var},sourceTypeTitle:{paddingBottom:ve.ZP.var}};class ke extends d().Component{constructor(e){super(e);const t=this.props.costModel[0];this.state={name:t.name,description:t.description}}render(){const{updateCostModel:e,updateError:t,costModel:a,isProcessing:n,setDialogOpen:r,t:o}=this.props,i=a[0];return d().createElement(s.Modal,{title:o("cost_models_details.edit_cost_model"),isOpen:!0,onClose:()=>r({name:"updateCostModel",isOpen:!1}),variant:"small",actions:[d().createElement(s.Button,{key:"proceed",variant:"primary",onClick:()=>{const{uuid:t,sources:a}=i,s=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a}(i,["uuid","sources"]);e(t,Object.assign(Object.assign({},s),{source_uuids:a.map((e=>e.uuid)),name:this.state.name,description:this.state.description,source_type:"OpenShift Container Platform"===i.source_type?"OCP":"AWS"}),"updateCostModel")},isDisabled:n||this.state.name===i.name&&this.state.description===i.description},o("cost_models_details.save_button")),d().createElement(s.Button,{key:"cancel",variant:"secondary",onClick:()=>r({name:"updateCostModel",isOpen:!1}),isDisabled:n},o("dialog.cancel"))]},d().createElement(d().Fragment,null,t&&d().createElement(s.Alert,{variant:"danger",title:`${t}`}),d().createElement(s.Form,null,d().createElement(s.FormGroup,{label:o("name"),isRequired:!0,fieldId:"name"},d().createElement(s.TextInput,{isRequired:!0,type:"text",id:"name",name:"name",value:this.state.name,onChange:e=>this.setState({name:e})})),d().createElement(s.FormGroup,{label:o("description"),fieldId:"description"},d().createElement(s.TextArea,{type:"text",id:"description",name:"description",value:this.state.description,onChange:e=>this.setState({description:e})})))))}}const Oe=(0,m.Z)()((0,p.connect)((0,u.X1)((e=>({costModel:g.E6.costModels(e),isProcessing:g.E6.updateProcessing(e),updateError:g.E6.updateError(e)}))),{setDialogOpen:g.F0.setCostModelDialog,updateCostModel:g.F0.updateCostModel})(ke));var De=a(57954),Te=a(97828);const Me=(0,p.connect)((0,u.X1)((e=>({isDialogOpen:g.E6.isDialogOpen(e)("costmodel"),isDeleteProcessing:g.E6.deleteProcessing(e),deleteError:g.E6.deleteError(e),isWritePermission:h.c5.isCostModelWritePermission(e)}))),{setDialogOpen:g.F0.setCostModelDialog,deleteCostModel:g.F0.deleteCostModel})((0,m.Z)()((({t:e,tabRefs:t,tabIndex:a,onSelectTab:n,setDialogOpen:r,isDialogOpen:o,deleteError:i,isDeleteProcessing:c,deleteCostModel:m,current:p,isWritePermission:u,historyObject:g})=>{const[h,E]=d().useState(!1),_=(0,Te.e)(window.location.pathname);return d().createElement(d().Fragment,null,o.updateCostModel&&d().createElement(Oe,null),d().createElement(q,{isSmall:!0,isOpen:o.deleteCostModel,title:e("dialog.delete_cost_model_title"),onClose:()=>r({name:"deleteCostModel",isOpen:!1}),error:i,isProcessing:c,onProceed:()=>{m(p.uuid,"deleteCostModel",g)},body:d().createElement(d().Fragment,null,0===p.sources.length&&e("dialog.delete_cost_model_body_green",{cost_model:p.name}),p.sources.length>0&&d().createElement(d().Fragment,null,e("dialog.delete_cost_model_body_red",{cost_model:p.name}),d().createElement("br",null),d().createElement("br",null),e("dialog.delete_cost_model_body_red_costmodel_delete"),d().createElement("br",null),d().createElement(s.List,null,p.sources.map((e=>d().createElement(s.ListItem,{key:`${e.uuid}`},e.name)))))),actionText:0===p.sources.length?e("dialog.deleteCostModel"):""}),d().createElement("header",{style:Se.headerCostModel},d().createElement(s.Breadcrumb,{style:Se.breadcrumb},d().createElement(s.BreadcrumbItem,{to:`${_}${De.Hb.costModels}`},e("cost_models_details.cost_model.cost_models")),d().createElement(s.BreadcrumbItem,{isActive:!0},p.name)),d().createElement(s.Split,null,d().createElement(s.SplitItem,{style:Se.headerDescription},d().createElement(s.Title,{headingLevel:"h1",style:Se.title,size:s.TitleSizes["2xl"]},p.name),p.description),d().createElement(s.SplitItem,null,d().createElement(s.Dropdown,{toggle:d().createElement(s.KebabToggle,{onToggle:E}),isOpen:h,onSelect:()=>E(!1),isPlain:!0,position:"right",dropdownItems:[d().createElement(l.j,{key:"edit",isDisabled:!u},d().createElement(s.DropdownItem,{isDisabled:!u,onClick:()=>r({isOpen:!0,name:"updateCostModel"})},e("cost_models_details.action_edit"))),d().createElement(l.j,{key:"delete",isDisabled:!u},d().createElement(s.DropdownItem,{isDisabled:!u,onClick:()=>r({isOpen:!0,name:"deleteCostModel"})},e("cost_models_details.action_delete")))]}))),"OpenShift Container Platform"===p.source_type?d().createElement(s.Tabs,{activeKey:a,onSelect:(e,t)=>n(t)},d().createElement(s.Tab,{eventKey:0,title:d().createElement(s.TabTitleText,null,e("price_list")),tabContentId:"refPriceList",tabContentRef:t[0]}),d().createElement(s.Tab,{eventKey:1,title:d().createElement(s.TabTitleText,null,e("cost_calculations")),tabContentId:"refMarkup",tabContentRef:t[1]}),d().createElement(s.Tab,{eventKey:2,title:d().createElement(s.TabTitleText,null,e("sources")),tabContentId:"refSources",tabContentRef:t[2]})):d().createElement(s.Tabs,{activeKey:a,onSelect:(e,t)=>n(t)},d().createElement(s.Tab,{eventKey:0,title:d().createElement(s.TabTitleText,null,e("cost_calculations")),tabContentId:"refMarkup",tabContentRef:t[0]}),d().createElement(s.Tab,{eventKey:1,title:d().createElement(s.TabTitleText,null,e("sources")),tabContentId:"refSources",tabContentRef:t[1]}))))})));class xe extends d().Component{constructor(e){super(e),this.tabRefs=[d().createRef(),d().createRef(),d().createRef()],this.state={tabIndex:0}}componentDidMount(){this.props.fetchRbac(),this.props.fetchMetrics(),this.props.fetchCostModels(`uuid=${this.props.match.params.uuid}`)}render(){const{costModels:e,metricsStatus:t,rbacStatus:a,costModelStatus:l,rbacError:c,costModelError:m,metricsError:p}=this.props;if(2!==t||2!==a||2!==l)return d().createElement(B.W,null,(e=>d().createElement(_e.Z,{title:e("cost_models_details.header.title")})));if(p||c||m)return null!==m&&"detail: Invalid provider uuid"===(0,K.L)(m)?d().createElement(B.W,null,(e=>d().createElement(d().Fragment,null,d().createElement(o.Z,null,d().createElement(i.Z,{title:e("cost_models_details.header.title")})),d().createElement(r.Z,null,d().createElement(s.EmptyState,null,d().createElement(s.EmptyStateIcon,{icon:n.g_}),d().createElement(s.Title,{headingLevel:"h2",size:s.TitleSizes.lg},e("cost_models_details.empty_state_bad_uuid.title")),d().createElement(s.EmptyStateBody,null,e("cost_models_details.empty_state_bad_uuid.description",{uuid:this.props.match.params.uuid}))))))):d().createElement(B.W,null,(e=>d().createElement(be.Z,{title:e("cost_models_details.header.title")})));const u=e[0],g=u.sources;return d().createElement("div",null,d().createElement(Me,{historyObject:this.props.history,current:u,tabRefs:this.tabRefs,tabIndex:this.state.tabIndex,onSelectTab:e=>this.setState({tabIndex:e})}),d().createElement("div",{style:fe.content},"OpenShift Container Platform"===u.source_type?d().createElement(d().Fragment,null,d().createElement(s.TabContent,{eventKey:0,id:"refPriceList",ref:this.tabRefs[0],hidden:0!==this.state.tabIndex},d().createElement("div",{style:fe.costmodelsContainer},d().createElement(H,{costModel:u.name,assignees:g.map((e=>e.name)),current:u}))),d().createElement(s.TabContent,{eventKey:1,id:"refCostCalculations",ref:this.tabRefs[1],hidden:1!==this.state.tabIndex},d().createElement("div",{style:fe.costCalculation},d().createElement(s.Grid,{hasGutter:!0},d().createElement(s.GridItem,{lg:6,id:"refMarkup"},d().createElement(f,{current:u})),d().createElement(s.GridItem,{lg:6,id:"refDistribution"},d().createElement(C,{current:u}))))),d().createElement(s.TabContent,{eventKey:3,id:"refSources",ref:this.tabRefs[2],hidden:2!==this.state.tabIndex},d().createElement("div",{style:fe.costmodelsContainer},d().createElement(Ee,{costModel:u,sources:g})))):d().createElement(d().Fragment,null,d().createElement(s.TabContent,{eventKey:0,id:"refMarkup",ref:this.tabRefs[0],hidden:0!==this.state.tabIndex},d().createElement("div",{style:fe.costCalculation},d().createElement(f,{current:u}))),d().createElement(s.TabContent,{eventKey:1,id:"refSources",ref:this.tabRefs[1],hidden:1!==this.state.tabIndex},d().createElement("div",{style:fe.costmodelsContainer},d().createElement(Ee,{costModel:u,sources:g}))))))}}const Ie=(0,p.connect)((0,u.X1)((e=>({costModels:g.E6.costModels(e),costModelError:g.E6.error(e),costModelStatus:g.E6.status(e),metricsHash:R.qw.metrics(e),maxRate:R.qw.maxRate(e),costTypes:R.qw.costTypes(e),metricsError:R.qw.metricsState(e).error,metricsStatus:R.qw.status(e),rbacError:h.c5.selectRbacState(e).error,rbacStatus:h.c5.selectRbacState(e).status}))),{fetchMetrics:R.Wg.fetchMetrics,fetchRbac:h.O9.fetchRbac,fetchCostModels:g.F0.fetchCostModels})(xe)},73466:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(16177),n=a(48716),r=a(39173),o=a(52413),i=a(97522),l=a.n(i);const c=(0,a(16530).withRouter)((({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(n.Z,null,l().createElement(r.Z,{title:e})),l().createElement(s.Z,null,l().createElement(o.G,null)))))},81787:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(16177),n=a(48716),r=a(39173),o=a(20167),i=a(97522),l=a.n(i);const c=(0,a(16530).withRouter)((({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(n.Z,null,l().createElement(r.Z,{title:e})),l().createElement(s.Z,null,l().createElement(o.Z,null)))))}}]);
//# sourceMappingURL=77b92ee74396dfb23e9b.bundle.js.map