"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[912],{16679:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a(64146).Z},81787:(e,t,a)=>{a.d(t,{Z:()=>c});var r=a(7273),s=a(48716),n=a(39173),o=a(20167),i=a(97522),l=a.n(i);const c=(0,a(5977).EN)((({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(s.Z,null,l().createElement(n.Z,{title:e})),l().createElement(r.Z,null,l().createElement(o.Z,null)))))},20679:(e,t,a)=>{a.d(t,{k:()=>F});var r=a(56976),s=a(74978),n=a(76889),o=a(80810),i=a(45997),l=a(62264),c=a(93952),u=a(7064),p=a(97522),h=a.n(p),g=a(63211),d=a(74806),m=a(43476),y=a(94377),f=a(70433);class b extends h().Component{constructor(e){super(e),this.defaultState={createdOptions:[],isSelectExpanded:!1},this.state=Object.assign({},this.defaultState),this.getOptions=()=>{const{resource:e,resourceFetchStatus:t,search:a}=this.props,{createdOptions:r}=this.state;let s=[];if(e&&e.data&&e.data.length>0&&1!==t&&(s=e.data.map((e=>{const t=isNaN(a)&&(e.account_alias||e.cluster_alias)||e.value;return{key:t,name:t}}))),r&&r.length){const e=r.map((e=>({key:e,name:e})));s=[...s,...e]}return s},this.getSelectOptions=()=>this.getOptions().map((e=>h().createElement(r.SelectOption,{key:e.key,value:e.key}))),this.handleOnCreateOption=e=>{const{createdOptions:t}=this.state;if(""===e.trim())return;let a=[...t];a.length>4&&(a=a.slice(1,a.length)),a.push(e),this.setState({createdOptions:a})},this.handleOnClear=()=>{const{onSearchChanged:e}=this.props;e&&e(void 0),this.setState({isSelectExpanded:!1})},this.handleOnFilter=e=>null===e?null:this.getSelectOptions(),this.handleOnSelect=(e,t)=>{const{onSelect:a}=this.props;""!==t.trim()&&(a&&a(t),this.setState({isSelectExpanded:!this.state.isSelectExpanded}))},this.handleOnToggle=e=>{this.setState({isSelectExpanded:e})},this.handleOnTypeaheadInputChanged=e=>{const{onSearchChanged:t}=this.props;t(e)},this.handleOnClear=this.handleOnClear.bind(this),this.handleOnCreateOption=this.handleOnCreateOption.bind(this),this.handleOnFilter=this.handleOnFilter.bind(this),this.handleOnSelect=this.handleOnSelect.bind(this),this.handleOnToggle=this.handleOnToggle.bind(this),this.handleOnTypeaheadInputChanged=this.handleOnTypeaheadInputChanged.bind(this)}componentDidUpdate(e){const{fetchResource:t,resourceFetchStatus:a,resourcePathsType:r,resourceType:s,search:n}=this.props;if(n&&e.search!==n&&1!==a){const e={search:n};t(r,s,(0,i.pm)(e))}}render(){const{intl:e,isDisabled:t,resourceType:a}=this.props,{isSelectExpanded:s}=this.state,n=this.getSelectOptions();return h().createElement(r.Select,{isCreatable:!0,isDisabled:t,isInputValuePersisted:!1,isOpen:s,onCreateOption:this.handleOnCreateOption,onClear:this.handleOnClear,onFilter:this.handleOnFilter,onSelect:this.handleOnSelect,onToggle:this.handleOnToggle,onTypeaheadInputChanged:this.handleOnTypeaheadInputChanged,placeholderText:e.formatMessage(c.Z.FilterByPlaceholder,{value:a}),typeAheadAriaLabel:e.formatMessage(c.Z.FilterByInputAriaLabel,{value:a}),variant:r.SelectVariant.typeahead},n)}}const v=(0,y.X1)(((e,{resourcePathsType:t,resourceType:a,search:r})=>{const s={search:r},n=(0,i.pm)(s);return{resource:f.CM.selectResource(e,t,a,n),resourceFetchStatus:f.CM.selectResourceFetchStatus(e,t,a,n)}})),S={fetchResource:f.Px.PG},C=(0,d.ZP)((0,m.connect)(v,S)(b));class T extends h().Component{constructor(e){super(e),this.searchTimeout=g.Z,this.defaultState={},this.state=Object.assign({},this.defaultState),this.handleOnSearch=e=>{clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.setState({currentSearch:e})}),625)},this.handleOnSelect=e=>{const{onSelect:t}=this.props;t&&t(e),this.setState({currentSearch:void 0})},this.handleOnSearch=this.handleOnSearch.bind(this),this.handleOnSelect=this.handleOnSelect.bind(this)}render(){const{isDisabled:e,resourcePathsType:t,resourceType:a}=this.props,{currentSearch:r}=this.state;return h().createElement(C,{isDisabled:e,onSearchChanged:this.handleOnSearch,onSelect:this.handleOnSelect,resourcePathsType:t,resourceType:a,search:r})}}var O=a(19853),E=a(49382),k=a(98499),D=a(32412);const B={export:{marginRight:D.ZP.value},toolbarContainer:{backgroundColor:E.ZP.value,paddingBottom:D.ZP.value,paddingTop:D.ZP.value,marginLeft:k.ZP.value,marginRight:k.ZP.value}};var Z=a(32004),x=a(23246),M=a(28631);const P="tag";class R extends h().Component{constructor(){super(...arguments),this.defaultState={isTagValueExpanded:!1},this.state=Object.assign({},this.defaultState),this.onTagValueChange=e=>{const{onTagValueInputChange:t}=this.props;this.setState({tagKeyValueInput:e},(()=>{t&&t(e)}))},this.onTagValueToggle=e=>{this.setState({isTagValueExpanded:e})}}componentDidMount(){const{fetchTag:e,tagQueryString:t,tagReportFetchStatus:a,tagReportPathsType:r}=this.props;1!==a&&e(r,P,t)}componentDidUpdate(e){const{fetchTag:t,tagQueryString:a,tagReportFetchStatus:r,tagReportPathsType:s}=this.props;e.tagQueryString===a&&e.tagReportPathsType===s||1===r||t(s,P,a)}getTagValueOptions(){const{tagKey:e,tagReport:t}=this.props;let a=[];t&&t.data&&(a=[...new Set([...t.data])]);let r=[];if(a.length>0)for(const t of a)if(e===t.key&&t.values){r=t.values.map((e=>({key:e,name:e})));break}return r}render(){const{isDisabled:e,onTagValueInput:t,onTagValueSelect:a,selections:s,tagKeyValue:n}=this.props,{isTagValueExpanded:i}=this.state,l=this.getTagValueOptions().map((e=>h().createElement(r.SelectOption,{key:e.key,value:e.key})));return l.length>50?h().createElement(r.InputGroup,null,h().createElement(r.TextInput,{isDisabled:e,name:"tagkeyvalue-input",id:"tagkeyvalue-input",type:"search","aria-label":Z.N.formatMessage(c.Z.FilterByTagValueAriaLabel),onChange:this.onTagValueChange,value:n,placeholder:Z.N.formatMessage(c.Z.FilterByTagValueInputPlaceholder),onKeyDown:e=>t(e)}),h().createElement(r.Button,{isDisabled:e,variant:r.ButtonVariant.control,"aria-label":Z.N.formatMessage(c.Z.FilterByTagValueButtonAriaLabel),onClick:e=>t(e)},h().createElement(o.W1,null))):h().createElement(r.Select,{isDisabled:e,variant:r.SelectVariant.checkbox,"aria-label":Z.N.formatMessage(c.Z.FilterByTagValueAriaLabel),onToggle:this.onTagValueToggle,onSelect:a,selections:s,isOpen:i,placeholderText:Z.N.formatMessage(c.Z.FilterByTagValuePlaceholder)},l)}}const _=(0,y.X1)(((e,{tagKey:t,tagReportPathsType:a})=>{const r=(0,i.mB)(location.search),s=r.end_date,n=r.start_date,o=(0,x.OA)(r),l=o?i.dV:(0,x.VL)(r),c=o||(0,x.pe)(r),u=t?{key:t}:{},p=s&&n?{start_date:n,end_date:s,filter:Object.assign({},u)}:{filter:Object.assign({resolution:"monthly",time_scope_units:"month",time_scope_value:-1},u)},h=(0,i.pm)(Object.assign({},p));return{endDate:s,groupBy:l,groupByValue:c,startDate:n,tagQueryString:h,tagReport:M.ux.selectTag(e,a,P,h),tagReportFetchStatus:M.ux.selectTagFetchStatus(e,a,P,h)}})),V={fetchTag:M.xr.Xt},L=(0,m.connect)(_,V)(R),w=(0,d.ZP)(L);const j={tag:{}};class I extends h().Component{constructor(){super(...arguments),this.defaultState={categoryInput:"",filters:(0,u.cloneDeep)(j),isBulkSelectOpen:!1,isCategorySelectOpen:!1,isOrgUnitSelectExpanded:!1,isTagValueDropdownOpen:!1,isTagKeySelectExpanded:!1,isTagValueSelectExpanded:!1,tagKeyValueInput:""},this.state=Object.assign({},this.defaultState),this.getDefaultCategory=()=>{const{categoryOptions:e,groupBy:t,query:a}=this.props;if(!e)return"name";if(a&&a.group_by&&a.group_by[i.dV])return i.dV;for(const a of e)if(t===a.key||t&&-1!==t.indexOf(i.P)&&a.key===i.up)return a.key;return e[0].key},this.getActiveFilters=e=>{const t=(0,u.cloneDeep)(j);return e&&e.filter_by&&Object.keys(e.filter_by).forEach((a=>{const r=Array.isArray(e.filter_by[a])?[...e.filter_by[a]]:[e.filter_by[a]];-1!==a.indexOf(i.P)?t.tag[a.substring(i.P.length)]=r:t[a]=r})),t},this.onDelete=(e,t)=>{const a=e&&e.key?e.key:e,r=t&&t.key?t.key:t;a?this.setState((e=>(e.filters.tag[a]?e.filters.tag[a]=e.filters.tag[a].filter((e=>e!==r)):e.filters[a]&&(e.filters[a]=e.filters[a].filter((e=>e!==r))),{filters:e.filters})),(()=>{const{filters:e}=this.state,t=e.tag[a]?`${i.P}${a}`:a;this.props.onFilterRemoved(t,r)})):this.setState({filters:(0,u.cloneDeep)(j)},(()=>{this.props.onFilterRemoved(null)}))},this.getBulkSelect=()=>{const{intl:e,isAllSelected:t,isBulkSelectDisabled:a,isDisabled:s,itemsPerPage:n,itemsTotal:o,selectedItems:i}=this.props,{isBulkSelectOpen:l}=this.state,u=t?o:i?i.length:0,p=u>0,g=!(!t&&u!==o||!(o>0))||!!p&&null,d=[h().createElement(r.DropdownItem,{key:"item-1",onClick:()=>this.handleOnBulkSelectClicked("none")},e.formatMessage(c.Z.ToolBarBulkSelectNone)),h().createElement(r.DropdownItem,{key:"item-2",onClick:()=>this.handleOnBulkSelectClicked("page")},e.formatMessage(c.Z.ToolBarBulkSelectPage,{value:n})),h().createElement(r.DropdownItem,{key:"item-3",onClick:()=>this.handleOnBulkSelectClicked("all")},e.formatMessage(c.Z.ToolBarBulkSelectAll,{value:o}))];return h().createElement(r.Dropdown,{onSelect:this.handleOnBulkSelect,position:r.DropdownPosition.left,toggle:h().createElement(r.DropdownToggle,{isDisabled:s||a,splitButtonItems:[h().createElement(r.DropdownToggleCheckbox,{id:"bulk-select",key:"bulk-select","aria-label":e.formatMessage(p?c.Z.ToolBarBulkSelectAriaDeselect:c.Z.ToolBarBulkSelectAriaSelect),isChecked:g,onClick:()=>{p?this.handleOnBulkSelectClicked("none"):this.handleOnBulkSelectClicked("all")}})],onToggle:this.handleOnBulkSelectToggle},0!==u&&h().createElement(h().Fragment,null,e.formatMessage(c.Z.Selected,{value:u}))),isOpen:l,dropdownItems:d})},this.handleOnBulkSelectClicked=e=>{const{onBulkSelected:t}=this.props;t&&t(e)},this.handleOnBulkSelect=()=>{this.setState({isBulkSelectOpen:!this.state.isBulkSelectOpen})},this.handleOnBulkSelectToggle=e=>{this.setState({isBulkSelectOpen:e})},this.getCategorySelectOptions=()=>{const{categoryOptions:e}=this.props,t=[];return e.map((e=>{t.push({toString:()=>e.name,value:e.key})})),t},this.handleOnCategorySelect=(e,t)=>{this.setState({categoryInput:"",currentCategory:t.value,currentTagKey:void 0,isCategorySelectOpen:!this.state.isCategorySelectOpen})},this.handleOnCategoryToggle=e=>{this.setState({isCategorySelectOpen:e})},this.getCategoryInput=e=>{const{intl:t,isDisabled:a,resourcePathsType:s}=this.props,{currentCategory:n,filters:i,categoryInput:u}=this.state;return h().createElement(r.ToolbarFilter,{categoryName:e,chips:i[e.key],deleteChip:this.onDelete,key:e.key,showToolbarItem:n===e.key},h().createElement(r.InputGroup,null,(0,l.k)(s,e.key)?h().createElement(T,{isDisabled:a,onSelect:t=>this.onCategoryInputSelect(t,e.key),resourcePathsType:s,resourceType:e.key}):h().createElement(h().Fragment,null,h().createElement(r.TextInput,{isDisabled:a,name:`category-input-${e.key}`,id:`category-input-${e.key}`,type:"search","aria-label":t.formatMessage(c.Z.FilterByInputAriaLabel,{value:e.key}),onChange:this.handleOnCategoryInputChange,value:u,placeholder:t.formatMessage(c.Z.FilterByPlaceholder,{value:e.key}),onKeyDown:t=>this.onCategoryInput(t,e.key)}),h().createElement(r.Button,{isDisabled:a,variant:r.ButtonVariant.control,"aria-label":t.formatMessage(c.Z.FilterByButtonAriaLabel,{value:e.key}),onClick:t=>this.onCategoryInput(t,e.key)},h().createElement(o.W1,null)))))},this.getDefaultCategoryOptions=()=>{const{intl:e}=this.props;return[{name:e.formatMessage(c.Z.Names,{count:1}),key:"name"}]},this.handleOnCategoryInputChange=e=>{this.setState({categoryInput:e})},this.onCategoryInput=(e,t)=>{const{categoryInput:a,currentCategory:r}=this.state;e&&e.key&&"Enter"!==e.key||""===a.trim()||this.setState((e=>{const s=e.filters[t];return{filters:Object.assign(Object.assign({},e.filters),{[r]:s&&s.includes(a)?s:s?[...s,a]:[a]}),categoryInput:""}}),(()=>{this.props.onFilterAdded(r,a)}))},this.onCategoryInputSelect=(e,t)=>{const{currentCategory:a}=this.state;this.setState((r=>{const s=r.filters[t];return{filters:Object.assign(Object.assign({},r.filters),{[a]:s&&s.includes(e)?s:s?[...s,e]:[e]}),categoryInput:""}}),(()=>{this.props.onFilterAdded(a,e)}))},this.getOrgUnitSelect=()=>{const{intl:e,isDisabled:t}=this.props,{currentCategory:a,filters:s,isOrgUnitSelectExpanded:n}=this.state,o=this.getOrgUnitOptions().map((e=>({id:e.key,toString:()=>e.name,compareTo:e=>!!s[i.dV]&&s[i.dV].find((t=>t===e.id))}))),l=[],u=[];return s[i.dV]&&Array.isArray(s[i.dV])&&s[i.dV].map((e=>{const t=o.find((t=>t.id===e));t&&(u.push(t),l.push({key:t.id,node:t.toString()}))})),h().createElement(r.ToolbarFilter,{categoryName:{key:i.dV,name:e.formatMessage(c.Z.FilterByValues,{value:"org_unit_id"})},chips:l,deleteChip:this.onDelete,key:i.dV,showToolbarItem:a===i.dV},h().createElement(r.Select,{isDisabled:t,className:"selectOverride",variant:r.SelectVariant.checkbox,"aria-label":e.formatMessage(c.Z.FilterByOrgUnitAriaLabel),onToggle:this.handleOnOrgUnitToggle,onSelect:this.handleOnOrgUnitSelect,selections:u,isOpen:n,placeholderText:e.formatMessage(c.Z.FilterByOrgUnitPlaceholder)},o.map((e=>h().createElement(r.SelectOption,{description:e.id,key:e.id,value:e})))))},this.handleOnOrgUnitSelect=(e,t)=>{const a=e.target.checked;this.setState((e=>{const r=e.filters[i.dV]?e.filters[i.dV]:[];return{filters:Object.assign(Object.assign({},e.filters),{tag:Object.assign({},e.filters.tag),[i.dV]:a?[...r,t.id]:r.filter((e=>e!==t.id))})}}),(()=>{a?this.props.onFilterAdded(i.dV,t.id):this.onDelete(i.dV,t.id)}))},this.handleOnOrgUnitToggle=e=>{this.setState({isOrgUnitSelectExpanded:e})},this.getTagKeySelect=()=>{const{intl:e,isDisabled:t}=this.props,{currentCategory:a,currentTagKey:s,isTagKeySelectExpanded:n}=this.state;if(a!==i.up)return null;const o=this.getTagKeyOptions().map((e=>h().createElement(r.SelectOption,{key:e.key,value:e.key})));return h().createElement(r.ToolbarItem,null,h().createElement(r.Select,{isDisabled:t,variant:r.SelectVariant.typeahead,typeAheadAriaLabel:e.formatMessage(c.Z.FilterByTagKeyAriaLabel),onClear:this.handleOnTagKeyClear,onToggle:this.handleOnTagKeyToggle,onSelect:this.handleOnTagKeySelect,isOpen:n,placeholderText:e.formatMessage(c.Z.FilterByTagKeyPlaceholder),selections:s},o))},this.handleOnTagKeyClear=()=>{this.setState({currentTagKey:void 0,isTagKeySelectExpanded:!1})},this.handleOnTagKeySelect=(e,t)=>{this.setState({currentTagKey:t,isTagKeySelectExpanded:!this.state.isTagKeySelectExpanded})},this.handleOnTagKeyToggle=e=>{this.setState({isTagKeySelectExpanded:e})},this.getTagValueSelect=e=>{const{tagReportPathsType:t}=this.props,{currentCategory:a,currentTagKey:s,filters:n,tagKeyValueInput:o}=this.state,l={name:e.name,key:`${i.P}${e.key}`};return h().createElement(r.ToolbarFilter,{categoryName:l,chips:n.tag[e.key],deleteChip:this.onDelete,key:e.key,showToolbarItem:a===i.up&&s===e.key},h().createElement(w,{onTagValueSelect:this.onTagValueSelect,onTagValueInput:this.onTagValueInput,onTagValueInputChange:this.onTagValueInputChange,selections:n.tag[e.key]?n.tag[e.key]:[],tagKey:s,tagKeyValue:o,tagReportPathsType:t}))},this.onTagValueInputChange=e=>{this.setState({tagKeyValueInput:e})},this.onTagValueInput=e=>{const{currentTagKey:t,tagKeyValueInput:a}=this.state;e.key&&"Enter"!==e.key||""===a.trim()||this.setState((e=>{const r=e.filters.tag[t]?e.filters.tag[t]:[];for(const t of r)if(t===a)return Object.assign(Object.assign({},e.filters),{tagKeyValueInput:""});return{filters:Object.assign(Object.assign({},e.filters),{tag:Object.assign(Object.assign({},e.filters.tag),{[t]:[...r,a]})}),tagKeyValueInput:""}}),(()=>{this.props.onFilterAdded(`${i.P}${t}`,a)}))},this.onTagValueSelect=(e,t)=>{const{currentTagKey:a}=this.state,r=e.target.checked;this.setState((e=>{const s=e.filters.tag[a]?e.filters.tag[a]:[];return{filters:Object.assign(Object.assign({},e.filters),{tag:Object.assign(Object.assign({},e.filters.tag),{[a]:r?[...s,t]:s.filter((e=>e!==t))})})}}),(()=>{r?this.props.onFilterAdded(`${i.P}${a}`,t):this.onDelete(a,t)}))},this.getColumnManagement=()=>{const{intl:e}=this.props;return h().createElement(r.ToolbarItem,null,h().createElement(r.Button,{onClick:this.handleColumnManagementClicked,variant:r.ButtonVariant.link},e.formatMessage(c.Z.DetailsColumnManagementTitle)))},this.getExportButton=()=>{const{isDisabled:e,isExportDisabled:t}=this.props;return h().createElement(r.ToolbarItem,{spacer:{default:"spacerNone"}},h().createElement(r.Button,{isDisabled:e||t,onClick:this.handleExportClicked,variant:r.ButtonVariant.plain},h().createElement(s.Hy,null)))},this.handleColumnManagementClicked=()=>{this.props.onColumnManagementClicked()},this.handleExportClicked=()=>{this.props.onExportClicked()}}componentDidMount(){this.setState({currentCategory:this.getDefaultCategory()})}componentDidUpdate(e){const{categoryOptions:t,groupBy:a,orgReport:r,query:s,tagReport:n}=this.props;(t!==e.categoryOptions||a!==e.groupBy||s&&!(0,O.X)(s,e.query)||r&&!(0,O.X)(r,e.orgReport)||n&&!(0,O.X)(n,e.tagReport))&&this.setState((()=>{const r=this.getActiveFilters(s);return t!==e.categoryOptions||e.groupBy!==a?{categoryInput:"",currentCategory:this.getDefaultCategory(),currentOrgUnit:"",currentTagKey:"",tagKeyValueInput:"",filters:r}:{filters:r}}))}getCategorySelect(){const{categoryOptions:e,isDisabled:t}=this.props,{currentCategory:a,isCategorySelectOpen:s}=this.state;if(!e)return null;const o=this.getCategorySelectOptions(),i=o.find((e=>e.value===a));return h().createElement(r.ToolbarItem,null,h().createElement(r.Select,{id:"category-select",isDisabled:t,isOpen:s,onSelect:this.handleOnCategorySelect,onToggle:this.handleOnCategoryToggle,selections:i,toggleIcon:h().createElement(n.k1,null),variant:r.SelectVariant.single},o.map((e=>h().createElement(r.SelectOption,{key:e.value,value:e})))))}getOrgUnitOptions(){const{orgReport:e}=this.props;let t=[];if(!e||!e.data)return t;const a=e.data.sort(((e,t)=>e[i.iP]<t[i.iP]?-1:e[i.iP]>t[i.iP]?1:0)),r=a.filter((e=>0===e.level)),s=a.filter((e=>0!==e.level));return r.map((e=>{const t=a.find((t=>t[i.dV]===e[i.dV]));s.unshift(t)})),s.length>0&&(t=s.map((e=>({key:e[i.dV],name:e[i.iP]})))),t}getTagKeyOptions(){const{tagReport:e}=this.props;let t=[],a=[];if(!e||!e.data)return a;let r=!1;for(const t of e.data)if(t.hasOwnProperty("key")){r=!0;break}if(r){const a=e.data.map((e=>{var{type:t}=e;return function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["type"])}));t=(0,u.uniqBy)(a,"key")}else t=(0,u.uniq)(e.data);return t.length>0&&(a=t.map((e=>{const t=r?e.key:e;return{key:t,name:t}}))),a}render(){const{categoryOptions:e,dateRange:t,pagination:a,showBulkSelect:s,showColumnManagement:o,showExport:l,showFilter:c,style:u}=this.props,p=e||this.getDefaultCategoryOptions();return h().createElement("div",{style:u||B.toolbarContainer},h().createElement(r.Toolbar,{id:"details-toolbar",clearAllFilters:this.onDelete,collapseListedFiltersBreakpoint:"xl"},h().createElement(r.ToolbarContent,null,s&&h().createElement(r.ToolbarItem,{variant:"bulk-select"},this.getBulkSelect()),c&&h().createElement(r.ToolbarToggleGroup,{breakpoint:"xl",toggleIcon:h().createElement(n.k1,null)},h().createElement(r.ToolbarGroup,{variant:"filter-group"},this.getCategorySelect(),this.getTagKeySelect(),this.getTagKeyOptions().map((e=>this.getTagValueSelect(e))),this.getOrgUnitSelect(),p&&p.filter((e=>e.key!==i.up&&e.key!==i.dV)).map((e=>this.getCategoryInput(e))))),(Boolean(l)||Boolean(o))&&h().createElement(r.ToolbarGroup,null,Boolean(l)&&this.getExportButton(),Boolean(o)&&this.getColumnManagement()),t&&h().createElement(r.ToolbarGroup,null,t),h().createElement(r.ToolbarItem,{alignment:{default:"alignRight"},variant:"pagination"},a))))}}const F=(0,d.ZP)(I)},46774:(e,t,a)=>{a.d(t,{X:()=>w});var r=a(56976),s=a(45997),n=a(13604),o=a(93952),i=a(7064),l=a(97522),c=a.n(l),u=a(74806),p=a(43476),h=a(94377),g=a(57465),d=a(76821),m=a(32412),y=a(48196),f=a(73861);const b={alert:{marginBottom:m.ZP.var},form:{marginLeft:y.ZP.var},modal:{input:{marginRight:f.ZP.var},ul:{marginLeft:y.ZP.var}},title:{marginBottom:m.ZP.var}};var v=a(17844),S=a(43703),C=a(35823),T=a.n(C),O=a(33307);const E="cost";class k extends c().Component{constructor(e,t){super(e,t),this.defaultState={fetchReportClicked:!1},this.state=Object.assign({},this.defaultState),this.getExport=()=>{const{report:e,reportFetchStatus:t}=this.props;e&&2===t&&(T()(e.data,this.getFileName(),"text/csv"),this.handleClose())},this.getFileName=()=>{const{endDate:e,groupBy:t,intl:a,reportPathsType:r,resolution:n,startDate:i}=this.props;return`${a.formatMessage(o.Z.ExportFileName,{endDate:e,provider:r,groupBy:-1!==t.indexOf(s.P)?"tag":t,resolution:n,startDate:i})}.csv`},this.handleClose=()=>{const{reportError:e}=this.props;this.setState(Object.assign({},this.defaultState),(()=>{e||this.props.onClose(!1)}))},this.handleFetchReport=()=>{const{exportReport:e,queryString:t,reportPathsType:a}=this.props;e(a,E,t),this.setState({fetchReportClicked:!0},(()=>{this.getExport()}))}}componentDidUpdate(e){const{report:t,reportError:a}=this.props,{fetchReportClicked:r}=this.state;e.report!==t&&r&&this.getExport(),a&&this.props.onError(a)}render(){const{intl:e,reportFetchStatus:t}=this.props;return c().createElement(r.Button,Object.assign({},(0,d.g_)(d._q.export.submit_btn),{isDisabled:1===t,key:"confirm",onClick:this.handleFetchReport,variant:r.ButtonVariant.primary}),e.formatMessage(o.Z.ExportDownload))}}const D=(0,h.X1)(((e,t)=>{const{groupBy:a,isAllItems:r,items:o,query:i,reportPathsType:l,resolution:c,timeScope:u}=t;let p=i.end_date,h=i.start_date;const d=(()=>{const e=Object.assign(Object.assign({},JSON.parse(JSON.stringify(i))),{filter:Object.assign({limit:void 0,offset:void 0,resolution:c||void 0},!(h&&p)&&{time_scope_value:"previous"===u?-2:-1}),filter_by:{},limit:0,order_by:void 0,perspective:void 0,dateRange:void 0,delta:void 0});if(i.filter_by)for(const t of Object.keys(i.filter_by))void 0===e.filter_by[t]&&(e.filter_by[t]=[]),e.filter_by[t].push(i.filter_by[t]);if(r)a===s.dV&&(void 0===e.filter_by[s.dV]&&(e.filter_by[s.dV]=[]),e.filter_by[s.dV].push(i.group_by[s.dV]));else if(a===s.dV)for(const t of o){const a="organizational_unit"===t.type?s.dV:t.type;void 0===e.filter_by[a]&&(e.filter_by[a]=[]),e.filter_by[a].push(t.id)}else for(const t of o)void 0===e.filter_by[a]&&(e.filter_by[a]=[]),e.filter_by[a].push(t.id);return(0,s.pm)(e)})(),m=g.$S.selectExport(e,l,E,d),y=g.$S.selectExportError(e,l,E,d),f=g.$S.selectExportFetchStatus(e,l,E,d);if(!h||!p){const e="previous"===u,t=(0,O.x2)();e&&t.setMonth(t.getMonth()-1),p=(0,n.Z)(e?(0,v.Z)(t):t,"yyyy-MM-dd"),h=(0,n.Z)((0,S.Z)(t),"yyyy-MM-dd")}return{endDate:p,queryString:d,report:m,reportError:y,reportFetchStatus:f,startDate:h}})),B={exportReport:g.HY.Hy},Z=(0,p.connect)(D,B)(k),x=(0,u.ZP)(Z),M=[{label:o.Z.ExportResolution,value:"daily"},{label:o.Z.ExportResolution,value:"monthly"}],P=[{label:o.Z.ExportTimeScope,value:"current"},{label:o.Z.ExportTimeScope,value:"previous"}];class R extends c().Component{constructor(e,t){super(e,t),this.defaultState={error:void 0,timeScope:"current",resolution:this.props.resolution||"monthly"},this.state=Object.assign({},this.defaultState),this.handleClose=()=>{this.setState(Object.assign({},this.defaultState),(()=>{this.props.onClose(!1)}))},this.handleError=e=>{this.setState({error:e})},this.handleMonthChange=(e,t)=>{this.setState({timeScope:t.currentTarget.value})},this.handleResolutionChange=(e,t)=>{this.setState({resolution:t.currentTarget.value})},this.handleMonthChange=this.handleMonthChange.bind(this),this.handleResolutionChange=this.handleResolutionChange.bind(this)}render(){const{groupBy:e,intl:t,isAllItems:a,items:l,query:u,reportPathsType:p,showAggregateType:h=!0,showTimeScope:g=!0}=this.props,{error:m,resolution:y,timeScope:f}=this.state;let v=[...l];this.props.isOpen&&(v=l&&0===l.length&&a?[{label:t.formatMessage(o.Z.ExportAll)}]:(0,i.orderBy)(v,["label"],["asc"]));let S=t.formatMessage(o.Z.ExportSelected,{groupBy:e});-1!==e.indexOf(s.P)&&(S=t.formatMessage(o.Z.ExportSelected,{groupBy:"tag"}));const C=new Date,T=(new Date).setMonth(C.getMonth()-1),O=(0,n.Z)(C,"MMMM yyyy"),E=(0,n.Z)(T-1,"MMMM yyyy");return c().createElement(r.Modal,{style:b.modal,isOpen:this.props.isOpen,onClose:this.handleClose,title:t.formatMessage(o.Z.ExportTitle),variant:"small",actions:[c().createElement(x,{groupBy:e,isAllItems:a,items:l,key:"confirm",timeScope:g?f:void 0,onClose:this.handleClose,onError:this.handleError,query:u,reportPathsType:p,resolution:y}),c().createElement(r.Button,Object.assign({},(0,d.g_)(d._q.export.cancel_btn),{key:"cancel",onClick:this.handleClose,variant:r.ButtonVariant.link}),t.formatMessage(o.Z.Cancel))]},m&&c().createElement(r.Alert,{variant:"danger",style:b.alert,title:t.formatMessage(o.Z.ExportError)}),c().createElement("div",{style:b.title},c().createElement("span",null,t.formatMessage(o.Z.ExportHeading,{groupBy:e}))),c().createElement(r.Form,{style:b.form},h&&c().createElement(r.FormGroup,{label:t.formatMessage(o.Z.ExportAggregateType),fieldId:"aggregate-type"},c().createElement(c().Fragment,null,M.map(((e,a)=>c().createElement(r.Radio,{key:a,id:`resolution-${a}`,isValid:void 0!==e.value,label:t.formatMessage(e.label,{value:e.value}),value:e.value,checked:y===e.value,name:"resolution",onChange:this.handleResolutionChange,"aria-label":t.formatMessage(e.label,{value:e.value})}))))),g&&c().createElement(r.FormGroup,{label:t.formatMessage(o.Z.ExportTimeScopeTitle),fieldId:"timeScope"},c().createElement(c().Fragment,null,P.map(((e,a)=>c().createElement(r.Radio,{key:a,id:`timeScope-${a}`,isValid:void 0!==e.value,label:t.formatMessage(e.label,{date:"previous"===e.value?E:O,value:e.value}),value:e.value,checked:f===e.value,name:"timeScope",onChange:this.handleMonthChange,"aria-label":t.formatMessage(e.label,{date:"previous"===e.value?E:O,value:e.value})}))))),c().createElement(r.FormGroup,{label:S,fieldId:"selected-labels"},c().createElement("ul",null,v.map(((e,t)=>c().createElement("li",{key:t},e.label)))))))}}const _=(0,h.X1)((()=>({}))),V={exportReport:g.HY.Hy},L=(0,p.connect)(_,V)(R),w=(0,u.ZP)(L)},2088:(e,t,a)=>{a.d(t,{X:()=>B});var r=a(56976),s=a(45997),n=a(93952),o=a(97522),i=a.n(o),l=a(74806),c=a(43476),u=a(94377),p=a(38434),h=a(28631);const g={groupBySelector:{display:"flex",alignItems:"center"},groupBySelectorLabel:{marginBottom:0,marginRight:a(32412).ZP.var,whiteSpace:"nowrap"}};class d extends i().Component{constructor(e){super(e),this.defaultState={defaultItem:this.props.groupBy||this.props.options[0].value,isGroupByOpen:!1},this.state=Object.assign({},this.defaultState),this.getCurrentGroupBy=()=>{const{getIdKeyForGroupBy:e}=this.props,t=(0,s.mB)(location.search),a=t&&t.group_by?Object.keys(t.group_by):[];let r=e(t.group_by);for(const e of a)if(-1!==e.indexOf(s.dV)){r=t.group_by[s.dV];break}return r},this.getGroupByItems=()=>{const{orgReport:e}=this.props;if(!e||!e.data)return[];const t=e.data.sort(((e,t)=>e[s.iP]<t[s.iP]?-1:e[s.iP]>t[s.iP]?1:0)),a=t.filter((e=>0===e.level)),r=t.filter((e=>0!==e.level));return a.map((e=>{const a=t.find((t=>t[s.dV]===e[s.dV]));r.unshift(a)})),r.map((e=>({id:e[s.dV],toString:()=>e[s.iP]})))},this.handleGroupByClear=()=>{this.setState({currentItem:void 0})},this.handleGroupBySelected=(e,t)=>{const{onSelected:a}=this.props;this.setState({currentItem:t.id,isGroupByOpen:!1}),a&&a(`${s.dV}${t.id}`)},this.handleGroupByToggle=e=>{this.setState({isGroupByOpen:e})},this.handleGroupByClear=this.handleGroupByClear.bind(this),this.handleGroupBySelected=this.handleGroupBySelected.bind(this),this.handleGroupByToggle=this.handleGroupByToggle.bind(this)}componentDidMount(){this.setState({currentItem:this.getCurrentGroupBy()})}componentDidUpdate(e){const{groupBy:t}=this.props;e.groupBy!==t&&this.setState({currentItem:this.getCurrentGroupBy()})}render(){const{isDisabled:e=!1,intl:t}=this.props,{currentItem:a,isGroupByOpen:s}=this.state,o=this.getGroupByItems(),l=o.find((e=>e.id===a));return i().createElement("div",{style:g.groupBySelector},i().createElement(r.Select,{"aria-label":t.formatMessage(n.Z.FilterByOrgUnitAriaLabel),isDisabled:e,onClear:this.handleGroupByClear,onToggle:this.handleGroupByToggle,onSelect:this.handleGroupBySelected,isOpen:s,placeholderText:t.formatMessage(n.Z.FilterByOrgUnitPlaceholder),selections:l,variant:r.SelectVariant.typeahead},o.map((e=>i().createElement(r.SelectOption,{description:e.id,key:e.id,value:e})))))}}const m=(0,l.ZP)(d);var y=a(7064);class f extends i().Component{constructor(e){super(e),this.defaultState={isGroupByOpen:!1},this.state=Object.assign({},this.defaultState),this.getGroupByItems=()=>{const{tagReport:e}=this.props;if(!e||!e.data)return[];let t=!1;for(const a of e.data)if(a.hasOwnProperty("key")){t=!0;break}let a=[];if(t){const t=e.data.map((e=>{var{type:t}=e;return function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["type"])}));a=(0,y.uniqBy)(t,"key")}else a=(0,y.uniq)(e.data);return a.map((e=>{const a=t?e.key:e;return i().createElement(r.SelectOption,{key:e.key,value:a})}))},this.getCurrentGroupBy=()=>{const e=(0,s.mB)(location.search),t=e&&e.group_by?Object.keys(e.group_by):[];let a;for(const e of t)if(-1!==e.indexOf(s.P)){a=e.slice(s.P.length);break}return a},this.handleGroupByClear=()=>{this.setState({currentItem:void 0})},this.handleGroupBySelected=(e,t)=>{const{onSelected:a}=this.props;this.setState({currentItem:t,isGroupByOpen:!1}),a&&a(`${s.P}${t}`)},this.handleGroupByToggle=e=>{this.setState({isGroupByOpen:e})},this.handleGroupByClear=this.handleGroupByClear.bind(this),this.handleGroupBySelected=this.handleGroupBySelected.bind(this),this.handleGroupByToggle=this.handleGroupByToggle.bind(this)}componentDidMount(){this.setState({currentItem:this.getCurrentGroupBy()})}componentDidUpdate(e){const{groupBy:t}=this.props;e.groupBy!==t&&this.setState({currentItem:this.getCurrentGroupBy()})}render(){const{isDisabled:e,intl:t}=this.props,{currentItem:a,isGroupByOpen:s}=this.state;return i().createElement("div",{style:g.groupBySelector},i().createElement(r.Select,{"aria-label":t.formatMessage(n.Z.FilterByTagKeyAriaLabel),isDisabled:e,onClear:this.handleGroupByClear,onToggle:this.handleGroupByToggle,onSelect:this.handleGroupBySelected,isOpen:s,placeholderText:t.formatMessage(n.Z.FilterByTagKeyPlaceholder),selections:a,variant:r.SelectVariant.typeahead},this.getGroupByItems()))}}const b=(0,l.ZP)(f),v=[{label:s.dV,value:s.dV}],S=[{label:s.up,value:s.up}],C="org",T="tag";class O extends i().Component{constructor(e,t){super(e,t),this.defaultState={defaultItem:this.props.groupBy||this.props.options[0].value,isGroupByOpen:!1,isGroupByOrgVisible:!1,isGroupByTagVisible:!1},this.state=Object.assign({},this.defaultState),this.getCurrentGroupBy=()=>{const{getIdKeyForGroupBy:e}=this.props,{defaultItem:t}=this.state,a=(0,s.mB)(location.search);if(!a||!a.group_by)return t;let r=e(a.group_by);const n=a&&a.group_by?Object.keys(a.group_by):[];for(const e of n){let t=e.indexOf(s.P);if(-1!==t){r=s.up,this.setState({isGroupByTagVisible:!0});break}if(t=e.indexOf(s.dV),-1!==t){r=s.dV,this.setState({isGroupByOrgVisible:!0});break}}return"date"!==r?r:t},this.getGroupBy=()=>{const{isDisabled:e}=this.props,{currentItem:t,isGroupByOpen:a}=this.state,s=this.getGroupByOptions(),n=s.find((e=>e.value===t));return i().createElement(r.Select,{id:"groupBySelect",isDisabled:e,isOpen:a,onSelect:this.handleGroupBySelected,onToggle:this.handleGroupByToggle,selections:n,variant:r.SelectVariant.single},s.map((e=>i().createElement(r.SelectOption,{key:e.value,value:e}))))},this.getGroupByOptions=()=>{const{options:e,orgReport:t,tagReport:a,intl:r}=this.props,s=[...e];return t&&t.data&&t.data.length>0&&s.push(...v),a&&a.data&&a.data.length>0&&s.push(...S),s.map((e=>({toString:()=>r.formatMessage(n.Z.GroupByValuesTitleCase,{value:e.label,count:1}),value:e.value})))},this.handleGroupBySelected=(e,t)=>{const{onSelected:a}=this.props;t.value===s.dV||t.value===s.up?this.setState({currentItem:t.value,isGroupByOpen:!1,isGroupByOrgVisible:t.value===s.dV,isGroupByTagVisible:t.value===s.up}):this.setState({currentItem:t.value,isGroupByOpen:!1,isGroupByOrgVisible:!1,isGroupByTagVisible:!1},(()=>{a&&a(t.value)}))},this.handleGroupByToggle=e=>{this.setState({isGroupByOpen:e})},this.handleGroupBySelected=this.handleGroupBySelected.bind(this),this.handleGroupByToggle=this.handleGroupByToggle.bind(this)}componentDidMount(){const{fetchOrg:e,fetchTag:t,orgQueryString:a,orgReportFetchStatus:r,orgReportPathsType:s,showOrgs:n,showTags:o,tagQueryString:i,tagReportFetchStatus:l,tagReportPathsType:c}=this.props;this.setState({currentItem:this.getCurrentGroupBy()},(()=>{n&&1!==r&&e(s,C,a),o&&1!==l&&t(c,T,i)}))}componentDidUpdate(e){const{fetchOrg:t,fetchTag:a,groupBy:r,orgQueryString:s,orgReportFetchStatus:n,orgReportPathsType:o,perspective:i,showOrgs:l,showTags:c,tagQueryString:u,tagReportFetchStatus:p,tagReportPathsType:h}=this.props;if(e.groupBy!==r||e.perspective!==i){let r;e.perspective!==i&&(r={isGroupByOrgVisible:!1,isGroupByTagVisible:!1}),this.setState(Object.assign({currentItem:this.getCurrentGroupBy()},r||{}),(()=>{l&&1!==n&&t(o,C,s),c&&1!==p&&a(h,T,u)}))}}render(){const{getIdKeyForGroupBy:e,groupBy:t,isDisabled:a=!1,onSelected:s,orgReport:o,intl:l,tagReport:c}=this.props,{isGroupByOrgVisible:u,isGroupByTagVisible:p}=this.state;return i().createElement("div",{style:g.groupBySelector},i().createElement(r.Title,{headingLevel:"h3",size:"md",style:g.groupBySelectorLabel},l.formatMessage(n.Z.GroupByLabel)),this.getGroupBy(),Boolean(u)&&i().createElement(m,{getIdKeyForGroupBy:e,groupBy:t,isDisabled:a,onSelected:s,options:v,orgReport:o}),Boolean(p)&&i().createElement(b,{groupBy:t,isDisabled:a,onSelected:s,options:S,tagReport:c}))}}const E=(0,u.X1)(((e,{endDate:t,startDate:a,orgReportPathsType:r,tagReportPathsType:n})=>{const o=t&&a?{start_date:a,end_date:t}:{filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1}},i=(0,s.pm)(Object.assign(Object.assign({},o),{key_only:!0})),l=h.ux.selectTag(e,n,T,i),c=h.ux.selectTagFetchStatus(e,n,T,i),u=(0,s.pm)({});return{orgQueryString:u,orgReport:p.zE.selectOrg(e,r,C,u),orgReportFetchStatus:p.zE.selectOrgFetchStatus(e,r,C,u),tagQueryString:i,tagReport:l,tagReportFetchStatus:c}})),k={fetchOrg:p.Lp.T7,fetchTag:h.xr.Xt},D=(0,c.connect)(E,k)(O),B=(0,l.ZP)(D)},80878:(e,t,a)=>{a.d(t,{e:()=>b});var r=a(56976),s=a(45997),n=a(93952),o=a(46774),i=a(97522),l=a.n(i),c=a(74806),u=a(43476),p=a(5977),h=a(94377),g=a(87932);class d extends l().Component{constructor(e,t){super(e,t),this.defaultState={isDropdownOpen:!1,isExportModalOpen:!1},this.state=Object.assign({},this.defaultState),this.getExportModal=()=>{const{groupBy:e,item:t,query:a,reportPathsType:r}=this.props,{isExportModalOpen:s}=this.state;return l().createElement(o.X,{groupBy:e,isOpen:s,items:[t],onClose:this.handleExportModalClose,query:a,reportPathsType:r})},this.handleExportModalClose=e=>{this.setState({isExportModalOpen:e})},this.handleExportModalOpen=()=>{this.setState({isExportModalOpen:!0})},this.handleOnSelect=()=>{const{isDropdownOpen:e}=this.state;this.setState({isDropdownOpen:!e})},this.handleOnToggle=e=>{this.setState({isDropdownOpen:e})},this.handleExportModalClose=this.handleExportModalClose.bind(this),this.handleExportModalOpen=this.handleExportModalOpen.bind(this),this.handleOnToggle=this.handleOnToggle.bind(this),this.handleOnSelect=this.handleOnSelect.bind(this)}render(){const{groupBy:e,isDisabled:t,showPriceListOption:a,intl:o,redirectToCostModel:i,history:c,item:{source_uuid:u}}=this.props,p=[l().createElement(r.DropdownItem,{component:"button",isDisabled:t,key:"export-action",onClick:this.handleExportModalOpen},o.formatMessage(n.Z.DetailsActionsExport))];return a&&p.unshift(l().createElement(r.DropdownItem,{component:"button",key:"price-list-action",isDisabled:t||e.includes(s.P)||0===u.length,onClick:()=>i(u[0],c)},o.formatMessage(n.Z.DetailsActionsPriceList))),l().createElement(l().Fragment,null,l().createElement(r.Dropdown,{onSelect:this.handleOnSelect,toggle:l().createElement(r.KebabToggle,{onToggle:this.handleOnToggle}),isOpen:this.state.isDropdownOpen,isPlain:!0,position:"right",dropdownItems:p}),this.getExportModal())}}const m=(0,h.X1)(((e,t)=>({}))),y={redirectToCostModel:g.F0.redirectToCostModelFromSourceUuid},f=(0,u.connect)(m,y)(d),b=(0,c.ZP)((0,p.EN)(f))},19078:(e,t,a)=>{a.d(t,{Z:()=>ae});var r=a(56976),s=a(45997),n=a(93952),o=a(73466),i=a(16679),l=a(13883),c=a(81787),u=a(94329),p=a(97522),h=a.n(p),g=a(74806),d=a(98499);const m={content:{paddingBottom:d.ZP.value,paddingLeft:d.ZP.value,paddingRight:d.ZP.value,paddingTop:d.ZP.value}};var y=a(71973),f=a(97137),b=a(51381),v=a(55785),S=a(23246),C=a(43476),T=a(94377),O=a(28631),E=a(76821),k=a(23992),D=a(11331),B=a(48196);const Z={dataListHeading:{fontWeight:k.ZP.value},groupByHeading:{marginBottom:d.ZP.value},tagLink:{marginLeft:B.ZP.value},tagsContainer:{marginRight:D.ZP.value,marginTop:B.ZP.value}};class x extends h().Component{constructor(){super(...arguments),this.getDataListItems=()=>{const{tagReport:e}=this.props,t=[];if(e)for(const a of e.data)for(const e of a.values){const s=`${a.key}:${e}`;t.push(h().createElement(r.DataListItem,{"aria-labelledby":s,key:`${s}-item`},h().createElement(r.DataListItemRow,null,h().createElement(r.DataListItemCells,{dataListCells:[h().createElement(r.DataListCell,{key:`${s}-cell1`},h().createElement("span",{id:s},a.key)),h().createElement(r.DataListCell,{key:`${s}-cell2`},e)]}))))}return t}}render(){const{groupBy:e,groupByValue:t,intl:a}=this.props,s=this.getDataListItems();return h().createElement(h().Fragment,null,h().createElement("div",null,h().createElement("span",{style:Z.dataListHeading},a.formatMessage(n.Z.GroupByValues,{value:e,count:1}))),h().createElement("div",{style:Z.groupByHeading},h().createElement("span",null,t)),h().createElement(r.DataList,{"aria-label":a.formatMessage(n.Z.TagNames),isCompact:!0},h().createElement(r.DataListItem,{"aria-labelledby":"heading1"},h().createElement(r.DataListItemRow,null,h().createElement(r.DataListItemCells,{dataListCells:[h().createElement(r.DataListCell,{key:"primary content"},h().createElement("span",{id:"heading1",style:Z.dataListHeading},a.formatMessage(n.Z.TagHeadingKey))),h().createElement(r.DataListCell,{key:"secondary content"},h().createElement("span",{id:"heading2",style:Z.dataListHeading},a.formatMessage(n.Z.TagHeadingValue)))]}))),s.map((e=>e))))}}const M=(0,g.ZP)((0,C.connect)()(x)),P="tag";class R extends h().Component{constructor(e){super(e),this.getTagValueCount=()=>{const{tagReport:e}=this.props;let t=0;if(e)for(const a of e.data)a.values&&(t+=a.values.length);return t},this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}componentDidMount(){const{fetchTag:e,queryString:t,tagReportPathsType:a}=this.props;e(a,P,t)}componentDidUpdate(e){const{fetchTag:t,queryString:a,tagReportPathsType:r}=this.props;e.queryString!==a&&t(r,P,a)}shouldComponentUpdate(e){const{groupByValue:t,isOpen:a}=this.props;return e.groupByValue!==t||e.isOpen!==a}render(){const{groupBy:e,isOpen:t,query:a,tagReport:s,intl:o}=this.props,i=a&&a.filter&&a.filter.account?a.filter.account:this.props.groupByValue;return h().createElement(r.Modal,{isOpen:t,onClose:this.handleClose,title:o.formatMessage(n.Z.TagHeadingTitle,{value:this.getTagValueCount()}),width:"50%"},h().createElement(M,{groupBy:e,groupByValue:i,tagReport:s}))}}const _=(0,T.X1)(((e,{tagReportPathsType:t})=>{const a=(0,s.mB)(location.search),r=(0,S.OA)(a),n=r?s.dV:(0,S.VL)(a),o=r||(0,S.pe)(a),i=a&&a.filter_by?a.filter_by:{};for(const e of Object.keys(i))-1!==e.indexOf(s.P)&&(i[e]=void 0);const l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},i),a&&a.filter&&a.filter.account&&{[`${s.Sq}account`]:a.filter.account}),n&&-1===n.indexOf(s.P)&&{[n]:o})},c=(0,s.pm)(l);return{groupBy:n,groupByValue:o,query:a,queryString:c,tagReport:O.ux.selectTag(e,t,P,c),tagReportFetchStatus:O.ux.selectTagFetchStatus(e,t,P,c)}})),V={fetchTag:O.xr.Xt},L=(0,g.ZP)((0,C.connect)(_,V)(R)),w="tag";class j extends h().Component{constructor(e){super(e),this.defaultState={isOpen:!1},this.state=Object.assign({},this.defaultState),this.handleClose=e=>{this.setState({isOpen:e})},this.handleOpen=e=>(this.setState({isOpen:!0}),e.preventDefault(),!1),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this)}componentDidMount(){const{fetchTag:e,queryString:t,tagReportPathsType:a}=this.props;e(a,w,t)}componentDidUpdate(e){const{fetchTag:t,queryString:a,tagReportPathsType:r}=this.props;e.queryString!==a&&t(r,w,a)}render(){const{id:e,tagReport:t,tagReportPathsType:a}=this.props,{isOpen:r}=this.state;let s=0;if(t)for(const e of t.data)e.values&&(s+=e.values.length);return h().createElement("div",{style:Z.tagsContainer,id:e},Boolean(s>0)&&h().createElement(h().Fragment,null,h().createElement(v.lO,null),h().createElement("a",Object.assign({},(0,E.g_)(E._q.details.tag_lnk),{href:"#/",onClick:this.handleOpen,style:Z.tagLink}),s)),h().createElement(L,{isOpen:r,onClose:this.handleClose,tagReportPathsType:a}))}}const I=(0,T.X1)(((e,{tagReportPathsType:t})=>{const a=(0,s.mB)(location.search),r=(0,S.OA)(a),n=r?s.dV:(0,S.VL)(a),o=r||(0,S.pe)(a),i=a&&a.filter_by?a.filter_by:{};for(const e of Object.keys(i))-1!==e.indexOf(s.P)&&(i[e]=void 0);const l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},i),a&&a.filter&&a.filter.account&&{[`${s.Sq}account`]:a.filter.account}),n&&-1===n.indexOf(s.P)&&{[n]:o})},c=(0,s.pm)(l);return{groupBy:n,groupByValue:o,query:a,queryString:c,tagReport:O.ux.selectTag(e,t,w,c),tagReportFetchStatus:O.ux.selectTagFetchStatus(e,t,w,c)}})),F={fetchTag:O.xr.Xt},G=(0,g.ZP)((0,C.connect)(I,F)(j));var U=a(73727),q=a(33307),A=a(41251),N=a(99291),z=a(72892),K=a(12289),$=a(40794),H=a(32412),Q=a(57640),W=a(73861);const X={cost:{marginTop:Q.ZP.var},costLabel:{marginTop:W.ZP.var},costValue:{marginTop:0,marginBottom:0,textAlign:"right"},costLabelDate:{textAlign:"right"},costType:{marginTop:H.ZP.var},header:{backgroundColor:z.ZP.var,paddingLeft:d.ZP.var,paddingRight:d.ZP.var,paddingTop:d.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},infoDescription:{color:K.ZP.value,fontSize:$.ZP.value},tabs:{display:"flex"},tag:{marginLeft:d.ZP.var},title:{paddingBottom:d.ZP.var,paddingTop:H.ZP.var}};class J extends h().Component{constructor(){super(...arguments),this.buildDetailsLink=()=>{const{detailsURL:e,groupBy:t,query:a}=this.props;let r=t,n="*";a[s.dV]&&(r=s.dV,n=a[s.dV]);const o=Object.assign(Object.assign({},JSON.parse(JSON.stringify(a))),{group_by:{[r]:n}});return o.filter&&(o.filter.account=void 0,o[s.eG]=void 0,o[s.dV]=void 0,o[s.yG]=void 0),`${e}?${(0,s.IV)(o)}`},this.getTotalCost=()=>{const{report:e}=this.props,t=e&&e.meta&&e.meta.total&&e.meta.total.cost&&e.meta.total.cost.total;return(0,N.xG)(t?e.meta.total.cost.total.value:0,t?e.meta.total.cost.total.units:"USD")},this.handleCostTypeSelected=e=>{const{onCostTypeSelected:t}=this.props;t&&t(e)}}render(){const{description:e,groupBy:t,query:a,intl:o,showCostType:i=!1,tabs:l,tagReportPathsType:c,title:u}=this.props,p=a&&a.filter?a.filter.account:void 0,g=(0,S.OA)(a),d=(0,S.qV)(a),m=p||"account"===t||"project"===t||"gcp_project"===t||"subscription_guid"===t,v=p?"account":d?"tag":g?s.dV:t;return h().createElement("header",{style:X.header},h().createElement("div",{style:X.headerContent},h().createElement("nav",{"aria-label":o.formatMessage(n.Z.BreakdownBackToDetailsAriaLabel),className:"breadcrumbOverride"},h().createElement("ol",{className:"pf-c-breadcrumb__list"},h().createElement("li",{className:"pf-c-breadcrumb__item"},h().createElement("span",{className:"pf-c-breadcrumb__item-divider"},h().createElement(y.fP,null)),h().createElement(U.rU,{to:this.buildDetailsLink()},o.formatMessage(n.Z.BreakdownBackToDetails,{value:o.formatMessage(n.Z.BreakdownBackToTitles,{value:c}),groupBy:v}))))),(0,A.S)()&&h().createElement(b.F,null)),h().createElement("div",{style:X.headerContent},h().createElement(r.Title,{headingLevel:"h1",style:X.title,size:r.TitleSizes["2xl"]},o.formatMessage(n.Z.BreakdownTitle,{value:u}),e&&h().createElement("div",{style:X.infoDescription},e),(0,A.S)()&&i&&h().createElement("div",{style:X.costType},h().createElement(f.T,{onSelect:this.handleCostTypeSelected}))),h().createElement("div",{style:X.cost},h().createElement("div",{style:X.costLabel},h().createElement(r.Title,{headingLevel:"h2",style:X.costValue,size:r.TitleSizes["4xl"]},h().createElement("span",null,this.getTotalCost()))),h().createElement("div",{style:X.costLabelDate},(0,q.Y)(o.formatMessage(n.Z.GroupByValuesTitleCase,{value:v,count:2}),n.Z.BreakdownTotalCostDate,0)))),h().createElement("div",null,h().createElement("div",{style:X.tabs},l,h().createElement("div",{style:X.tag},Boolean(m)&&h().createElement(G,{id:"tags",tagReportPathsType:c})))))}}const Y=(0,g.ZP)(J),ee=e=>{switch(e){case"cost-overview":return"cost-overview";case"historical-data":return"historical-data"}};class te extends h().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:h().createRef(),tab:"cost-overview"},{contentRef:h().createRef(),tab:"historical-data"}],this.getRouteForQuery=e=>{const{history:t}=this.props;return`${t.location.pathname}?${(0,s.IV)(e)}`},this.getTab=(e,t,a)=>h().createElement(r.Tab,{eventKey:a,key:`${ee(e)}-tab`,tabContentId:`tab-${a}`,tabContentRef:t,title:h().createElement(r.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>h().createElement(r.TabContent,{eventKey:t,key:`${ee(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{costOverviewComponent:a,historicalDataComponent:r}=this.props,{activeTabKey:s}=this.state,n=h().createElement(h().Fragment,null);if(s!==t)return n;const o=ee(e);return"cost-overview"===o?a:"historical-data"===o?r:n},this.getTabs=e=>{const{activeTabKey:t}=this.state;return h().createElement(r.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return"cost-overview"===e?t.formatMessage(n.Z.BreakdownCostOverviewTitle):"historical-data"===e?t.formatMessage(n.Z.BreakdownHistoricalDataTitle):void 0},this.handleCostTypeSelected=e=>{const{history:t,query:a}=this.props,r=Object.assign(Object.assign({},JSON.parse(JSON.stringify(a))),{cost_type:e});t.replace(this.getRouteForQuery(r))},this.handleTabClick=(e,t)=>{const{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t})},this.updateReport=()=>{const{location:e,fetchReport:t,queryString:a,reportPathsType:r,reportType:s}=this.props;e.search&&t(r,s,a)}}componentDidMount(){this.updateReport()}componentDidUpdate(e){const{location:t,report:a,reportError:r,queryString:s}=this.props,n=e.queryString!==s,o=!a&&!r,i=!t.search;(n||o||i)&&this.updateReport()}render(){const{description:e,detailsURL:t,emptyStateTitle:a,groupBy:r,providers:s,providersFetchStatus:n,providerType:p,query:g,report:d,reportError:y,reportFetchStatus:f,showCostType:b,tagReportPathsType:v,title:S}=this.props,C=this.getAvailableTabs();if(y)return h().createElement(c.Z,{title:a});if(1===n&&1===f)return h().createElement(o.Z,{title:a});if(2===n&&2===f){if(s&&s.meta&&0===s.meta.count&&2===n)return h().createElement(l.Z,{providerType:p,title:a});if(!(0,u.g8)(s))return h().createElement(i.Z,{title:S})}return h().createElement(h().Fragment,null,h().createElement(Y,{description:e,detailsURL:t,groupBy:r,onCostTypeSelected:this.handleCostTypeSelected,query:g,report:d,showCostType:b,tabs:this.getTabs(C),tagReportPathsType:v,title:S}),h().createElement("div",{style:m.content},this.getTabContent(C)))}}const ae=(0,g.ZP)(te)},44696:(e,t,a)=>{a.d(t,{X:()=>ue});var r=a(56976),s=a(91290),n=a(45997),o=a(93952),i=a(97522),l=a.n(i),c=a(74806),u=a(76821),p=a(31447),h=a(11331),g=a(48196);const d={clustersContainer:{marginRight:h.ZP.value,marginTop:g.ZP.value}},m={modal:{height:"700px",width:"600px"},subTitle:{marginTop:a(91707).ZP.value,textAlign:"right"}};class y extends l().Component{render(){const{item:e}=this.props;return e.clusters?e.clusters.map(((e,t)=>l().createElement("div",{key:`cluster-${t}`},e))):null}}const f=(0,c.ZP)(y);class b extends l().Component{constructor(e){super(e),this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}shouldComponentUpdate(e){const{isOpen:t,item:a}=this.props;return e.item!==a||e.isOpen!==t}render(){const{groupBy:e,isOpen:t,item:a,intl:s}=this.props;return l().createElement(r.Modal,{className:"modalOverride",style:m.modal,isOpen:t,onClose:this.handleClose,title:s.formatMessage(o.Z.DetailsClustersModalTitle,{groupBy:e,name:a.label}),width:"50%"},l().createElement(f,{item:a}))}}const v=(0,c.ZP)(b);class S extends l().Component{constructor(e){super(e),this.defaultState={isOpen:!1,showAll:!1},this.state=Object.assign({},this.defaultState),this.handleClose=e=>{this.setState({isOpen:e})},this.handleOpen=e=>(this.setState({isOpen:!0}),e.preventDefault(),!1),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this)}render(){const{groupBy:e,report:t,intl:a}=this.props,{isOpen:r,showAll:s}=this.state;let n=0;const i=[],c=[],h=(0,p.R)({report:t,idKey:e}),g=h&&h.length?h[0]:void 0;if(!g)return null;for(const e of g.clusters){const t=`${i.length>0?", ":""}${e}`;s?i.push(t):n<=50&&(n+t.length>50?i.push(t.slice(0,50-n).trim().concat("...")):i.push(t)),n+=t.length,c.push(e)}return l().createElement("div",{style:d.clustersContainer},Boolean(i)&&i.map(((e,t)=>l().createElement("span",{key:t},e))),Boolean(i.length<c.length)&&l().createElement("a",Object.assign({},(0,u.g_)(u._q.details.cluster_lnk),{href:"#/",onClick:this.handleOpen}),a.formatMessage(o.Z.DetailsMoreClusters,{value:c.length-i.length})),l().createElement(v,{groupBy:e,isOpen:r,item:g,onClose:this.handleClose}))}}const C=(0,c.ZP)(S);var T=a(10310),O=a(80469),E=a(42085),k=a(61352),D=a(99291),B=a(57279),Z=a(23992),x=a(32412);const M={chartHeight:150,chartWidth:400,subTitle:{fontWeight:Z.ZP.value}},P={chartSkeleton:{height:"125px",marginBottom:x.ZP.value,marginTop:h.ZP.value}};class R extends l().Component{constructor(){super(...arguments),this.getLegendLabel=()=>e=>{var{values:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["values"]);return l().createElement(T.Df,Object.assign({},a,{style:[{fontWeight:M.subTitle.fontWeight},{}],text:[t[a.index],a.text]}))},this.getSkeleton=()=>l().createElement(l().Fragment,null,l().createElement(r.Skeleton,{style:P.chartSkeleton,width:B.N.md}))}render(){const{report:e,reportFetchStatus:t,intl:a}=this.props,r=e&&e.meta&&e.meta.total&&e.meta.total.cost,s=r&&e.meta.total.cost.markup,n=r&&e.meta.total.cost.raw,i=r&&e.meta.total.cost.usage,c=s?e.meta.total.cost.markup.units:"USD",u=n?e.meta.total.cost.raw.units:"USD",p=i?e.meta.total.cost.usage.units:"USD",h=s?e.meta.total.cost.markup.value:0,g=n?e.meta.total.cost.raw.value:0,d=i?e.meta.total.cost.usage.value:0,m=(0,D.xG)(s?e.meta.total.cost.markup.value:0,c),y=(0,D.xG)(n?e.meta.total.cost.raw.value:0,u),f=(0,D.xG)(i?e.meta.total.cost.usage.value:0,p),b=a.formatMessage(o.Z.MarkupTitle),v=a.formatMessage(o.Z.RawCostTitle),S=a.formatMessage(o.Z.UsageCostTitle),C=this.getLegendLabel(),T=l().createElement(O.Qk,{gutter:25,itemsPerRow:2,labelComponent:l().createElement(C,{dy:10,lineHeight:1.5,values:[y,m,f]}),rowGutter:20});return l().createElement("div",{style:{height:M.chartHeight,width:M.chartWidth}},1===t?this.getSkeleton():l().createElement(E.Td,{ariaDesc:a.formatMessage(o.Z.BreakdownCostChartAriaDesc),ariaTitle:a.formatMessage(o.Z.BreakdownCostBreakdownTitle),constrainToVisibleArea:!0,data:[{x:v,y:g,units:u},{x:b,y:h,units:c},{x:S,y:d,units:p}],height:M.chartHeight,labels:({datum:e})=>a.formatMessage(o.Z.BreakdownCostChartTooltip,{name:e.x,value:(0,D.xG)(e.y,e.units)}),legendComponent:T,legendData:[{name:v},{name:b},{name:S}],legendOrientation:"vertical",legendPosition:"right",padding:{bottom:20,left:0,right:275,top:20},themeColor:k.nz.green,width:M.chartWidth}))}}const _=(0,c.ZP)(R);var V=a(35956),L=a(23246),w=a(43476),j=a(94377),I=a(42581);const F={mainContent:{marginTop:a(57640).ZP.value},subTitle:{textAlign:"right"}},G="cost";class U extends l().Component{constructor(e){super(e)}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:a}=this.props;e(a,G,t)}componentDidUpdate(e){const{fetchReport:t,queryString:a,reportPathsType:r}=this.props;e.queryString!==a&&t(r,G,a)}render(){const{intl:e,report:t,reportGroupBy:a,reportFetchStatus:s}=this.props,n=t&&t.meta&&t.meta.total,i=(0,D.xG)(n?t.meta.total.cost.total.value:0,n?t.meta.total.cost.total.units:"USD");return l().createElement(l().Fragment,null,l().createElement("div",{style:F.subTitle},l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.xl},e.formatMessage(o.Z.DetailsCostValue,{value:i}))),l().createElement("div",{style:F.mainContent},l().createElement(V.mZ,{idKey:a,report:t,status:s},(({items:e})=>e.map((e=>l().createElement(V.EH,{key:e.id,formatOptions:{},label:e.label?e.label.toString():"",totalValue:t.meta.total.cost.total.value,units:t.meta.total.cost.total.units,value:e.cost.total.value})))))))}}const q=(0,j.X1)(((e,{reportGroupBy:t,reportPathsType:a})=>{const r=(0,n.mB)(location.search),s=(0,L.OA)(r),o=s?n.dV:(0,L.VL)(r),i=s||(0,L.pe)(r),l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),r&&r.filter&&r.filter.account&&{[`${n.Sq}account`]:r.filter.account}),o&&{[o]:void 0}),o&&{[o]:i}),group_by:Object.assign({},t&&{[t]:"*"})},c=(0,n.pm)(l);return{queryString:c,report:I.ZV.selectReport(e,a,G,c),reportFetchStatus:I.ZV.selectReportFetchStatus(e,a,G,c)}})),A={fetchReport:I.nx.fetchReport},N=(0,c.ZP)((0,w.connect)(q,A)(U));class z extends l().Component{constructor(e){super(e),this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}shouldComponentUpdate(e){const{groupByValue:t,isOpen:a}=this.props;return e.groupByValue!==t||e.isOpen!==a}render(){const{groupByValue:e,intl:t,isOpen:a,reportGroupBy:s,reportPathsType:n}=this.props;return l().createElement(r.Modal,{className:"modalOverride",isOpen:a,onClose:this.handleClose,title:t.formatMessage(o.Z.DetailsSummaryModalTitle,{groupBy:s,name:e}),variant:"large"},l().createElement(N,{reportGroupBy:s,reportPathsType:n}))}}const K=(0,c.ZP)(z),$={card:{},skeleton:{marginTop:x.ZP.value},viewAllContainer:{marginLeft:"-15px"}};class H extends l().Component{constructor(){super(...arguments),this.state={isBulletChartModalOpen:!1},this.getItems=()=>{const{report:e,reportGroupBy:t}=this.props;return(0,p.R)({report:e,idKey:t})},this.getSummary=()=>{const{report:e,reportGroupBy:t,reportFetchStatus:a}=this.props;return l().createElement(V.mZ,{idKey:t,report:e,status:a},(({items:t})=>t.map((t=>l().createElement(V.EH,{formatOptions:{},key:`${t.id}-item`,label:t.label?t.label.toString():void 0,totalValue:e.meta.total.cost.total.value,units:e.meta.total.cost.total.units,value:t.cost.total.value})))))},this.getViewAll=()=>{const{groupBy:e,query:t,reportGroupBy:a,reportPathsType:s,intl:n}=this.props,{isBulletChartModalOpen:i}=this.state;if(-1!==this.getItems().findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}))){const c=t&&t.filter&&t.filter.account?t.filter.account:this.props.groupByValue;return l().createElement("div",{style:$.viewAllContainer},l().createElement(r.Button,Object.assign({},(0,u.g_)(u._q.details.view_all_btn),{onClick:this.handleBulletChartModalOpen,type:r.ButtonType.button,variant:r.ButtonVariant.link}),n.formatMessage(o.Z.DetailsViewAll,{value:a})),l().createElement(K,{groupBy:e,groupByValue:c,isOpen:i,onClose:this.handleBulletChartModalClose,query:t,reportGroupBy:a,reportPathsType:s}))}return null},this.handleBulletChartModalClose=e=>{this.setState({isBulletChartModalOpen:e})},this.handleBulletChartModalOpen=e=>{this.setState({isBulletChartModalOpen:!0}),e.preventDefault()}}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:a,reportType:r}=this.props;e(a,r,t)}componentDidUpdate(e){const{costType:t,fetchReport:a,queryString:r,reportPathsType:s,reportType:n}=this.props;e.queryString===r&&e.costType===t||a(s,n,r)}render(){const{reportGroupBy:e,reportFetchStatus:t,intl:a}=this.props;return l().createElement(r.Card,{style:$.card},l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},a.formatMessage(o.Z.BreakdownSummaryTitle,{value:e}))),l().createElement(r.CardBody,null,1===t?l().createElement(l().Fragment,null,l().createElement(r.Skeleton,{width:B.N.md}),l().createElement(r.Skeleton,{style:$.skeleton,width:B.N.md}),l().createElement(r.Skeleton,{style:$.skeleton,width:B.N.md}),l().createElement(r.Skeleton,{style:$.skeleton,width:B.N.md})):this.getSummary()),l().createElement(r.CardFooter,null,this.getViewAll()))}}const Q=(0,j.X1)(((e,{reportGroupBy:t,reportPathsType:a,reportType:r})=>{const s=(0,n.mB)(location.search),o=(0,L.OA)(s),i=o?n.dV:(0,L.VL)(s),l=o||(0,L.pe)(s),c={filter:{limit:3,resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},s&&s.filter_by&&s.filter_by),s&&s.filter&&s.filter.account&&{[`${n.Sq}account`]:s.filter.account}),i&&{[i]:void 0}),i&&{[i]:l}),group_by:Object.assign({},t&&{[t]:"*"})},u=(0,n.pm)(c);return{groupBy:i,groupByValue:l,query:s,queryString:u,report:I.ZV.selectReport(e,a,r,u),reportFetchStatus:I.ZV.selectReportFetchStatus(e,a,r,u),reportPathsType:a,reportType:r}})),W={fetchReport:I.nx.fetchReport},X=(0,c.ZP)((0,w.connect)(Q,W)(H));a(5118);var J=a(63754),Y=a(90392),ee=a(63802),te=a(63211);const ae={chartSkeleton:{marginBottom:x.ZP.value},capacity:{fontWeight:Z.ZP.value},legendSkeleton:{marginTop:x.ZP.value}};class re extends l().Component{constructor(){super(...arguments),this.containerRef=l().createRef(),this.observer=te.Z,this.state={width:0},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})},this.getChart=()=>{const{groupBy:e,reportFetchStatus:t,report:a}=this.props,{width:r}=this.state,s="cluster"===e?this.getChartDatumWithCapacity():this.getChartDatum();return a&&0!==s.usage.length?l().createElement("div",{className:"chartOverride"},1===t?this.getSkeleton():l().createElement(l().Fragment,null,Boolean("cluster"===e)&&this.getFreeSpace(),l().createElement(J.n,{comparativeErrorMeasureData:s.limit.value?[{tooltip:s.limit.tooltip,y:s.limit.value}]:[],comparativeErrorMeasureLegendData:s.limit.value?[{name:s.limit.legend}]:[],height:this.getChartHeight(),labels:({datum:e})=>`${e.tooltip}`,legendPosition:"bottom-left",legendItemsPerRow:this.getItemsPerRow(),maxDomain:this.isDatumEmpty(s)?100:void 0,minDomain:0,padding:{bottom:75,left:10,right:50,top:0},primarySegmentedMeasureData:s.usage.length?s.usage.map((e=>({tooltip:e.tooltip,y:e.value}))):[],primarySegmentedMeasureLegendData:s.usage.length?s.usage.map((e=>({name:e.legend}))):[],qualitativeRangeData:s.ranges.length?[{tooltip:s.ranges[0].tooltip,y:s.ranges[0].value}]:[],qualitativeRangeLegendData:s.ranges.length?[{name:s.ranges[0].legend}]:[],width:r}))):null},this.getChartHeight=()=>{const{groupBy:e}=this.props,{width:t}=this.state;return"cluster"===e?t>950?115:t>450?150:210:t>700?115:t>450?150:180},this.getItemsPerRow=()=>{const{width:e}=this.state;return e>950?4:e>700?3:e>450?2:1},this.getSkeleton=()=>l().createElement(l().Fragment,null,l().createElement(r.Skeleton,{style:ae.chartSkeleton,width:B.N.md}),l().createElement(r.Skeleton,{style:ae.legendSkeleton,width:B.N.xs})),this.isDatumEmpty=e=>{let t=!1;for(const a of e.ranges)if(a.value){t=!0;break}let a=!1;for(const t of e.usage)if(t.value){a=!0;break}return!(e.limit.value||t||a)}}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:a,reportType:r}=this.props;e(a,r,t),this.observer=(0,ee.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){const{fetchReport:t,queryString:a,reportPathsType:r,reportType:s}=this.props;e.queryString!==this.props.queryString&&t(r,s,a)}componentWillUnmount(){this.observer&&this.observer()}getChartDatum(){const{report:e,intl:t}=this.props,a={limit:{},ranges:[],usage:[]},r=e&&e.meta&&e.meta.total,s=r&&e.meta.total.limit&&null!==e.meta.total.limit,n=Math.trunc(s?e.meta.total.limit.value:0),i=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(s?e.meta.total.limit.units:void 0)});a.limit={legend:t.formatMessage(o.Z.DetailsUsageLimit,{value:n,units:i}),tooltip:t.formatMessage(o.Z.DetailsUsageLimit,{value:n,units:i}),value:Math.trunc(n)};const l=r&&e.meta.total.request&&null!==e.meta.total.request,c=Math.trunc(l?e.meta.total.request.value:0),u=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(l?e.meta.total.request.units:void 0)});a.ranges=[{legend:t.formatMessage(o.Z.DetailsUsageRequests,{value:c,units:u}),tooltip:t.formatMessage(o.Z.DetailsUsageRequests,{value:c,units:u}),value:Math.trunc(c)}];const p=r&&e.meta.total.usage&&null!==e.meta.total.usage,h=Math.trunc(p?e.meta.total.usage.value:0),g=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(p?e.meta.total.usage.units:void 0)});return a.usage=[{legend:t.formatMessage(o.Z.DetailsUsageUsage,{value:h,units:g}),tooltip:t.formatMessage(o.Z.DetailsUsageUsage,{value:h,units:g}),value:Math.trunc(h)}],a}getChartDatumWithCapacity(){const{report:e,intl:t}=this.props,a={limit:{},ranges:[],usage:[]},r=e&&e.meta&&e.meta.total,s=r&&e.meta.total.limit&&null!==e.meta.total.limit,n=Math.trunc(s?e.meta.total.limit.value:0),i=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(s?e.meta.total.limit.units:void 0)});a.limit={legend:t.formatMessage(o.Z.DetailsUsageLimit,{value:n,units:i}),tooltip:t.formatMessage(o.Z.DetailsUsageLimit,{value:n,units:i}),value:Math.trunc(n)};const l=r&&e.meta.total.request&&null!==e.meta.total.request,c=Math.trunc(l?e.meta.total.capacity.value:0),u=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(l?e.meta.total.capacity.units:void 0)});a.ranges=[{legend:t.formatMessage(o.Z.DetailsUsageCapacity,{value:c,units:u}),tooltip:t.formatMessage(o.Z.DetailsUsageCapacity,{value:c,units:u}),value:Math.trunc(c)}];const p=r&&e.meta.total.request&&null!==e.meta.total.request,h=r&&e.meta.total.usage&&null!==e.meta.total.usage,g=Math.trunc(p?e.meta.total.request.value:0),d=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(p?e.meta.total.request.units:void 0)}),m=Math.trunc(h?e.meta.total.usage.value:0),y=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(h?e.meta.total.usage.units:void 0)});return a.usage=[{legend:t.formatMessage(o.Z.DetailsUsageUsage,{value:m,units:y}),tooltip:t.formatMessage(o.Z.DetailsUsageUsage,{value:m,units:y}),value:Math.trunc(m)},{legend:t.formatMessage(o.Z.DetailsUsageRequests,{value:g,units:d}),tooltip:t.formatMessage(o.Z.DetailsUsageRequests,{value:g,units:d}),value:Math.trunc(g)}],a}getFreeSpace(){const{report:e,intl:t}=this.props,a=e&&e.meta&&e.meta.total,s=a&&e.meta.total.request&&null!==e.meta.total.request,n=a&&e.meta.total.request&&null!==e.meta.total.request,i=a&&e.meta.total.usage&&null!==e.meta.total.usage,c=Math.trunc(s?e.meta.total.capacity.value:0),u=Math.trunc(n?e.meta.total.request.value:0),p=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(n?e.meta.total.request.units:void 0)}),h=Math.trunc(i?e.meta.total.usage.value:0),g=t.formatMessage(o.Z.Units,{units:(0,D.ZV)(i?e.meta.total.usage.units:void 0)}),d=c-u,m=c-h;let y=u>0?u/c*100:0;y>100&&(y=100-y);let f=c>h?h/c*100:0;return f>100&&(f=100-f),l().createElement(r.Grid,{hasGutter:!0},l().createElement(r.GridItem,{md:12,lg:6},l().createElement("div",null,t.formatMessage(o.Z.DetailsUnusedUsageLabel)),l().createElement("div",{style:ae.capacity},(0,D.bM)(m,g)),l().createElement("div",null,t.formatMessage(o.Z.DetailsUnusedUnits,{percentage:(0,D.rl)(f,{minimumFractionDigits:0,maximumFractionDigits:0}),units:g}))),l().createElement(r.GridItem,{md:12,lg:6},l().createElement("div",null,t.formatMessage(o.Z.DetailsUnusedRequestsLabel)),l().createElement("div",{style:ae.capacity},(0,D.bM)(d,p)),l().createElement("div",null,t.formatMessage(o.Z.DetailsUnusedUnits,{percentage:(0,D.rl)(y,{minimumFractionDigits:0,maximumFractionDigits:0}),units:p}))))}render(){return l().createElement("div",{className:"chartOverride",ref:this.containerRef},this.getChart())}}const se=(0,j.X1)(((e,{reportPathsType:t,reportType:a})=>{const r=(0,Y.mB)(location.search),s=(0,L.VL)(r),o=(0,L.pe)(r),i={filter:{time_scope_units:"month",time_scope_value:-1,resolution:"monthly"},filter_by:Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),s&&{[s]:void 0}),group_by:Object.assign({},s&&{[s]:o})},l=(0,n.pm)(i);return{groupBy:s,report:I.ZV.selectReport(e,t,a,l),reportFetchStatus:I.ZV.selectReportFetchStatus(e,t,a,l),queryString:l}})),ne={fetchReport:I.nx.fetchReport},oe=(0,c.ZP)((0,w.connect)(se,ne)(re));var ie=a(57116);const le="placeholder";class ce extends l().Component{constructor(){super(...arguments),this.getClusterChart=e=>{const{groupBy:t,report:a,intl:s}=this.props;let i=!1;for(const a of e.cluster.showWidgetOnGroupBy)if(a===t||a===n.P&&-1!==t.indexOf(n.P)){i=!0;break}return i?l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},s.formatMessage(o.Z.Clusters))),l().createElement(r.CardBody,null,l().createElement(C,{groupBy:e.cluster.reportGroupBy,report:a}))):null},this.getCostChart=()=>{const{report:e,intl:t}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(o.Z.BreakdownCostBreakdownTitle),l().createElement(r.Popover,{"aria-label":t.formatMessage(o.Z.BreakdownCostBreakdownAriaLabel),enableFlip:!0,bodyContent:l().createElement(l().Fragment,null,l().createElement("p",{style:ie.W.infoTitle},t.formatMessage(o.Z.RawCostTitle)),l().createElement("p",null,t.formatMessage(o.Z.RawCostDescription)),l().createElement("br",null),l().createElement("p",{style:ie.W.infoTitle},t.formatMessage(o.Z.UsageCostTitle)),l().createElement("p",null,t.formatMessage(o.Z.UsageCostDescription)),l().createElement("br",null),l().createElement("p",{style:ie.W.infoTitle},t.formatMessage(o.Z.MarkupTitle)),l().createElement("p",null,t.formatMessage(o.Z.MarkupDescription)),l().createElement("br",null),l().createElement("a",{href:t.formatMessage(o.Z.DocsCostModelTerminology),rel:"noreferrer",target:"_blank"},t.formatMessage(o.Z.LearnMore)))},l().createElement(r.Button,{variant:r.ButtonVariant.plain},l().createElement(s.iC,{style:ie.W.info}))))),l().createElement(r.CardBody,null,l().createElement(_,{report:e})))},this.getCpuUsageChart=e=>{const{intl:t}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(o.Z.CpuTitle))),l().createElement(r.CardBody,null,l().createElement(oe,{reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getMemoryUsageChart=e=>{const{intl:t}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(o.Z.MemoryTitle))),l().createElement(r.CardBody,null,l().createElement(oe,{reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getSummaryCard=e=>{const{costType:t,groupBy:a,query:r}=this.props;let s=!1;for(const t of e.reportSummary.showWidgetOnGroupBy)if(t===a||r&&r.group_by&&r.group_by[n.dV]||t===n.P&&a&&-1!==a.indexOf(n.P)){s=!0;break}return s?l().createElement(X,{costType:t,reportGroupBy:e.reportSummary.reportGroupBy,reportPathsType:e.reportPathsType,reportType:e.reportType}):e.reportSummary.usePlaceholder?le:null},this.getWidgetsColumns=()=>{const{selectWidgets:e,widgets:t}=this.props,a=[];t.map((t=>{const r=e[t],s=this.renderWidget(r);null!==s&&a.push(s)}));const r=Math.floor(a.length/2)+a.length%2,s=[],n=[];for(let e=0;e<r;e++)a[e]!==le&&s.push(a[e]),e+r<a.length&&a[e+r]!==le&&n.push(a[e+r]);return{leftColumnWidgets:s,rightColumnWidgets:n}}}renderWidget(e){switch(e.type){case"cluster":return this.getClusterChart(e);case"cost":return this.getCostChart();case"cpuUsage":return this.getCpuUsageChart(e);case"memoryUsage":return this.getMemoryUsageChart(e);case"summary":return this.getSummaryCard(e);default:return null}}render(){const{leftColumnWidgets:e,rightColumnWidgets:t}=this.getWidgetsColumns();return l().createElement(r.Grid,{hasGutter:!0},l().createElement(r.GridItem,{lg:12,xl:6},l().createElement(r.Grid,{hasGutter:!0},e.map(((e,t)=>l().createElement(r.GridItem,{key:`widget-${t}`},e))))),l().createElement(r.GridItem,{lg:12,xl:6},l().createElement(r.Grid,{hasGutter:!0},t.map(((e,t)=>l().createElement(r.GridItem,{key:`widget-${t}`},e))))))}}const ue=(0,c.ZP)(ce)},45572:(e,t,a)=>{a.d(t,{f:()=>ge});var r=a(56976),s=a(93952),n=a(97522),o=a.n(n),i=a(74806),l=a(45997),c=a(60232),u=(a(5118),a(94812)),p=a(29296),h=a(80469),g=a(84154),d=a(48629),m=a(52109),y=a(2370),f=a(40125),b=a(63802),v=a(55855),S=a(63211),C=a(27765),T=a(19960),O=a(84076),E=a(18131),k=a(24656),D=a(84615),B=a(70698),Z=a(72021),x=a(21768),M=a(41534),P=a(98499),R=a(48196);const _={currentCapacityData:{fill:"none"},currentColorScale:[x.CH.value,Z.R0.value,B.t6.value,D.S7.value,M.iM.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},currentCostData:{fill:"none"},itemsPerRow:0,previousCapacityData:{fill:"none"},previousColorScale:[C.O6.value,T.OS.value,O.iY.value,E.cQ.value,k.DD.value],previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousCostData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},V={chart:{marginTop:R.S1.value},title:{marginLeft:"-"+P.Js.value}};class L extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=S.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentCostData:e,currentInfrastructureCostData:t,previousCostData:a,previousInfrastructureCostData:r}=this.props,n=s.Z.ChartCostLegendLabel,o=s.Z.ChartCostInfrastructureLegendLabel,i=s.Z.ChartCostInfrastructureLegendTooltip,l=s.Z.ChartCostLegendTooltip,u=[{childName:"previousCost",data:a,legendItem:{name:(0,c.uL)(a,n,!0,!0,1,s.Z.ChartCostLegendNoDataLabel),symbol:{fill:_.previousColorScale[0],type:"minus"},tooltip:(0,c.uL)(a,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},_.previousCostData),{stroke:_.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,c.uL)(e,n,!0,!1,0,s.Z.ChartCostLegendNoDataLabel),symbol:{fill:_.currentColorScale[0],type:"minus"},tooltip:(0,c.uL)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},_.currentCostData),{stroke:_.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:r,legendItem:{name:(0,c.uL)(r,o,!0,!0,1,s.Z.ChartCostInfrastructureLegendNoDataLabel),symbol:{fill:_.previousColorScale[1],type:"dash"},tooltip:(0,c.uL)(r,i,!1,!1,1)},style:{data:Object.assign(Object.assign({},_.previousInfrastructureCostData),{stroke:_.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:t,legendItem:{name:(0,c.uL)(t,o,!0,!1,0,s.Z.ChartCostInfrastructureLegendNoDataLabel),symbol:{fill:_.currentColorScale[1],type:"dash"},tooltip:(0,c.uL)(t,i,!1,!1)},style:{data:Object.assign(Object.assign({},_.currentInfrastructureCostData),{stroke:_.currentColorScale[1]})}}],p=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:p,series:u})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(u.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,p.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,b.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:120,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:r}=this.state,s=e||(r>700?_.itemsPerRow:2);return o().createElement(h.Qk,{data:(0,b.oX)(a,t),height:25,gutter:20,itemsPerRow:s,name:"legend"})},this.handleLegendClick=e=>{const t=(0,b.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,b.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentCostData===this.props.currentCostData&&e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.previousCostData===this.props.previousCostData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentInfrastructureCostData:e,previousInfrastructureCostData:t}=this.props,a=e?(0,v.Z)((0,c.Y_)(e,!0,!0)[1]):0,r=t?(0,v.Z)((0,c.Y_)(t,!0,!0)[1]):0;return a>0||r>0?Math.max(a,r):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,g.u)({chartNames:(0,b.bC)(t),isHidden:t=>(0,b.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{adjustContainerHeight:e,height:t,intl:a,containerHeight:n=t,padding:i={bottom:120,left:8,right:8,top:8},title:l,xAxisLabel:c,yAxisLabel:u}=this.props,{cursorVoronoiContainer:p,hiddenSeries:h,series:g,width:v}=this.state,S=(0,b.ge)(g,h),C=this.getEndDate(),T=Math.floor(C/2),O=e&&v>700?n-25:n,E=p?o().cloneElement(p,{disable:!(0,b.TW)(g,h),labelComponent:o().createElement(d.M,{legendData:(0,b.oX)(g,h,!0),title:e=>a.formatMessage(s.Z.ChartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement("div",{className:"chartOverride",ref:this.containerRef},o().createElement(r.Title,{headingLevel:"h2",style:V.title,size:r.TitleSizes.xl},l),o().createElement("div",{style:Object.assign(Object.assign({},V.chart),{height:O})},o().createElement("div",{style:{height:t,width:v}},o().createElement(m.k,{containerComponent:E,domain:S,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:(0,b.oX)(g,h),legendPosition:"bottom",padding:i,theme:f.Z,width:v},g&&g.map(((e,t)=>this.getChart(e,t))),o().createElement(y.C,{label:c,style:_.xAxis,tickValues:[1,T,C]}),o().createElement(y.C,{dependentAxis:!0,label:u,style:_.yAxis})))))}}const w=(0,i.ZP)(L);var j=a(23246),I=a(43476),F=a(94377),G=a(42581),U=a(99291),q=a(57279),A=a(11331),N=a(32412);const z={chartContainer:{marginLeft:P.ZP.value},chartSkeleton:{height:"125px",marginBottom:N.ZP.value,marginTop:A.ZP.value},costChart:{marginBottom:R.ZP.value,marginTop:R.ZP.value},legendSkeleton:{marginTop:N.ZP.value},trendChart:{marginBottom:R.ZP.value,marginTop:R.ZP.value},usageChart:{marginTop:R.ZP.value}};class K extends o().Component{constructor(){super(...arguments),this.getSkeleton=()=>o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{style:z.chartSkeleton,width:q.N.md}),o().createElement(r.Skeleton,{style:z.legendSkeleton,width:q.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:a,reportPathsType:r,reportType:s}=this.props;e(r,s,t),e(r,s,a)}componentDidUpdate(e){const{fetchReport:t,costType:a,currentQueryString:r,previousQueryString:s,reportPathsType:n,reportType:o}=this.props;e.currentQueryString===r&&e.costType===a||t(n,o,r),e.previousQueryString===s&&e.costType===a||t(n,o,s)}render(){const{currentReport:e,currentReportFetchStatus:t,previousReport:a,previousReportFetchStatus:r,intl:n}=this.props,i=(0,c.zJ)(e,0,"date","cost"),l=(0,c.zJ)(e,0,"date","infrastructure"),u=(0,c.zJ)(a,0,"date","cost"),p=(0,c.zJ)(a,0,"date","infrastructure"),h=e&&e.meta&&e.meta.total&&e.meta.total.cost?e.meta.total.cost.total.units:"USD",g=n.formatMessage(s.Z.CurrencyUnits,{units:h});return o().createElement("div",{style:z.chartContainer},o().createElement("div",{style:z.costChart},1===t&&1===r?this.getSkeleton():o().createElement(w,{adjustContainerHeight:!0,containerHeight:275,currentCostData:i,currentInfrastructureCostData:l,formatOptions:{},formatter:U.bM,height:300,previousCostData:u,previousInfrastructureCostData:p,xAxisLabel:n.formatMessage(s.Z.HistoricalChartDayOfMonthLabel),yAxisLabel:n.formatMessage(s.Z.HistoricalChartCostLabel,{units:g})})))}}const $=(0,F.X1)(((e,{reportPathsType:t,reportType:a})=>{const r=(0,l.mB)(location.search),s=(0,j.VL)(r),n=(0,j.pe)(r),o={filter_by:Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),s&&{[s]:void 0}),group_by:Object.assign({},s&&{[s]:n})},i=Object.assign(Object.assign({},o),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),c=(0,l.pm)(i),u=Object.assign(Object.assign({},o),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),p=(0,l.pm)(u);return{currentQuery:i,currentQueryString:c,currentReport:G.ZV.selectReport(e,t,a,c),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,t,a,c),previousQuery:u,previousQueryString:p,previousReport:G.ZV.selectReport(e,t,a,p),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,t,a,p)}})),H={fetchReport:G.nx.fetchReport},Q=(0,i.ZP)((0,I.connect)($,H)(K)),W={currentColorScale:[x.CH.value,Z.R0.value,B.t6.value,D.S7.value,M.iM.value],currentMonthData:{fill:"none"},itemsPerRow:0,previousColorScale:[C.O6.value,T.OS.value,O.iY.value,E.cQ.value,k.DD.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},X={chart:{marginTop:R.S1.value},title:{marginLeft:"-"+P.Js.value}};class J extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=S.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,previousData:t,showUsageLegendLabel:a=!1}=this.props,r=a?s.Z.ChartUsageLegendLabel:s.Z.ChartCostLegendLabel,n=a?s.Z.ChartUsageLegendTooltip:s.Z.ChartCostLegendTooltip,o=[{childName:"previousCost",data:t,legendItem:{name:(0,c.uL)(t,r,!0,!0,1,s.Z.ChartUsageLegendNoDataLabel),symbol:{fill:W.previousColorScale[0],type:"minus"},tooltip:(0,c.uL)(t,n,!1,!1,1)},style:{data:Object.assign(Object.assign({},W.previousMonthData),{stroke:W.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,c.uL)(e,r,!0,!1,0,s.Z.ChartUsageLegendNoDataLabel),symbol:{fill:W.currentColorScale[1],type:"minus"},tooltip:(0,c.uL)(e,n,!1,!1)},style:{data:Object.assign(Object.assign({},W.currentMonthData),{stroke:W.currentColorScale[1]})}}],i=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:i,series:o})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(u.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,p.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,b.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:120,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a}=this.state;return o().createElement(h.Qk,{data:(0,b.oX)(a,t),height:25,gutter:20,itemsPerRow:e,name:"legend"})},this.handleLegendClick=e=>{const t=(0,b.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,b.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,previousData:t}=this.props,a=t?(0,v.Z)((0,c.Y_)(t,!0,!0)[1]):0,r=e?(0,v.Z)((0,c.Y_)(e,!0,!0)[1]):0;return r>0||a>0?Math.max(r,a):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,g.u)({chartNames:(0,b.bC)(t),isHidden:t=>(0,b.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,containerHeight:a=e,padding:n={bottom:120,left:8,right:8,top:8},title:i,xAxisLabel:l,yAxisLabel:c}=this.props,{cursorVoronoiContainer:u,hiddenSeries:p,series:h,width:g}=this.state,v=(0,b.ge)(h,p),S=this.getEndDate(),C=Math.floor(S/2),T=u?o().cloneElement(u,{disable:!(0,b.TW)(h,p),labelComponent:o().createElement(d.M,{legendData:(0,b.oX)(h,p,!0),title:e=>t.formatMessage(s.Z.ChartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement("div",{className:"chartOverride",ref:this.containerRef},o().createElement(r.Title,{headingLevel:"h2",style:X.title,size:r.TitleSizes.xl},i),o().createElement("div",{style:Object.assign(Object.assign({},X.chart),{height:a})},o().createElement("div",{style:{height:e,width:g}},o().createElement(m.k,{containerComponent:T,domain:v,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,b.oX)(h,p),legendPosition:"bottom",padding:n,theme:f.Z,width:g},h&&h.map(((e,t)=>this.getChart(e,t))),o().createElement(y.C,{label:l,style:W.xAxis,tickValues:[1,C,S]}),o().createElement(y.C,{dependentAxis:!0,label:c,style:W.yAxis})))))}}const Y=(0,i.ZP)(J);class ee extends o().Component{constructor(){super(...arguments),this.getSkeleton=()=>o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{style:z.chartSkeleton,width:q.N.md}),o().createElement(r.Skeleton,{style:z.legendSkeleton,width:q.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:a,reportPathsType:r,reportType:s}=this.props;e(r,s,t),e(r,s,a)}componentDidUpdate(e){const{fetchReport:t,costType:a,currentQueryString:r,previousQueryString:s,reportPathsType:n,reportType:o}=this.props;e.currentQueryString===r&&e.costType===a||t(n,o,r),e.previousQueryString===s&&e.costType===a||t(n,o,s)}render(){const{currentReport:e,currentReportFetchStatus:t,previousReport:a,previousReportFetchStatus:r,reportType:n,intl:i}=this.props,l="cost"===n,u=(0,c.zJ)(e,l?0:1,"date",l?"cost":"usage"),p=(0,c.zJ)(a,l?0:1,"date",l?"cost":"usage"),h=e&&e.meta&&e.meta.total&&e.meta.total.cost?e.meta.total.cost.total.units:"USD",g=e&&e.meta&&e.meta.total&&e.meta.total.usage?e.meta.total.usage.units:void 0;let d;if(l){const e=i.formatMessage(s.Z.CurrencyUnits,{units:h});d=i.formatMessage(s.Z.HistoricalChartCostLabel,{units:e})}else if(g&&Number.isNaN(Number(e.meta.total.usage.units)))d=i.formatMessage(s.Z.Units,{units:(0,U.ZV)(g)});else{const e=i.formatMessage(s.Z.HistoricalChartUsageLabel,{value:n});d=i.formatMessage(s.Z.Units,{units:(0,U.ZV)(e)})}return o().createElement("div",{style:z.chartContainer},o().createElement("div",{style:z.trendChart},1===t&&1===r?this.getSkeleton():o().createElement(Y,{containerHeight:250,currentData:u,formatOptions:{},formatter:U.bM,height:300,previousData:p,units:l?h:g,xAxisLabel:i.formatMessage(s.Z.HistoricalChartDayOfMonthLabel),yAxisLabel:d})))}}const te=(0,F.X1)(((e,{reportPathsType:t,reportType:a})=>{const r=(0,l.mB)(location.search),s=(0,j.OA)(r),n=s?l.dV:(0,j.VL)(r),o=s||(0,j.pe)(r),i={filter_by:Object.assign(Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),r&&r.filter&&r.filter.account&&{[`${l.Sq}account`]:r.filter.account}),n&&{[n]:void 0}),group_by:Object.assign({},n&&{[n]:o})},c=Object.assign(Object.assign({},i),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),u=(0,l.pm)(c),p=Object.assign(Object.assign({},i),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),h=(0,l.pm)(p);return{currentQuery:c,currentQueryString:u,currentReport:G.ZV.selectReport(e,t,a,u),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,t,a,u),previousQuery:p,previousQueryString:h,previousReport:G.ZV.selectReport(e,t,a,h),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,t,a,h)}})),ae={fetchReport:G.nx.fetchReport},re=(0,i.ZP)((0,I.connect)(te,ae)(ee)),se={currentCapacityData:{fill:"none"},currentColorScale:[x.CH.value,Z.R0.value,B.t6.value,D.S7.value,M.iM.value],currentLimitData:{fill:"none"},currentRequestData:{fill:"none",strokeDasharray:"3,3"},currentUsageData:{fill:"none"},itemsPerRow:0,previousCapacityData:{fill:"none"},previousColorScale:[C.O6.value,T.OS.value,O.iY.value,E.cQ.value,k.DD.value],previousLimitData:{fill:"none"},previousRequestData:{fill:"none",strokeDasharray:"3,3"},previousUsageData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},ne={chart:{marginTop:R.S1.value},title:{marginLeft:"-"+P.Js.value}};class oe extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=S.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentLimitData:e,currentRequestData:t,currentUsageData:a,previousLimitData:r,previousRequestData:n,previousUsageData:o}=this.props,i=s.Z.ChartLimitLegendLabel,l=s.Z.ChartLimitLegendTooltip,u=s.Z.ChartRequestsLegendLabel,p=s.Z.ChartRequestsLegendTooltip,h=s.Z.ChartUsageLegendLabel,g=s.Z.ChartUsageLegendTooltip,d=[{childName:"previousUsage",data:o,legendItem:{name:(0,c.Fs)(o,h,!0,!0,1,s.Z.ChartUsageLegendNoDataLabel),symbol:{fill:se.previousColorScale[0],type:"minus"},tooltip:(0,c.Fs)(o,g,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousUsageData),{stroke:se.previousColorScale[0]})}},{childName:"currentUsage",data:a,legendItem:{name:(0,c.Fs)(a,h,!0,!1,0,s.Z.ChartUsageLegendNoDataLabel),symbol:{fill:se.currentColorScale[0],type:"minus"},tooltip:(0,c.Fs)(a,g,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentUsageData),{stroke:se.currentColorScale[0]})}},{childName:"previousRequest",data:n,legendItem:{name:(0,c.Fs)(n,u,!0,!0,1,s.Z.ChartRequestsLegendNoDataLabel),symbol:{fill:se.previousColorScale[1],type:"dash"},tooltip:(0,c.Fs)(n,p,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousRequestData),{stroke:se.previousColorScale[1]})}},{childName:"currentRequest",data:t,legendItem:{name:(0,c.Fs)(t,u,!0,!1,0,s.Z.ChartRequestsLegendNoDataLabel),symbol:{fill:se.currentColorScale[1],type:"dash"},tooltip:(0,c.Fs)(t,p,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentRequestData),{stroke:se.currentColorScale[1]})}},{childName:"previousLimit",data:r,legendItem:{name:(0,c.Fs)(r,i,!0,!0,1,s.Z.ChartLimitLegendNoDataLabel),symbol:{fill:se.previousColorScale[2],type:"minus"},tooltip:(0,c.Fs)(r,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousLimitData),{stroke:se.previousColorScale[2]})}},{childName:"currentLimit",data:e,legendItem:{name:(0,c.Fs)(e,i,!0,!1,0,s.Z.ChartLimitLegendNoDataLabel),symbol:{fill:se.currentColorScale[2],type:"minus"},tooltip:(0,c.Fs)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentLimitData),{stroke:se.currentColorScale[2]})}}],m=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:m,series:d})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(u.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,p.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,b.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:130,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:r}=this.state,s=e||(r>900?se.itemsPerRow:2);return o().createElement(h.Qk,{data:(0,b.oX)(a,t),height:25,gutter:20,itemsPerRow:s,name:"legend"})},this.handleLegendClick=e=>{const t=(0,b.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,b.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentLimitData===this.props.currentLimitData&&e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousLimitData===this.props.previousLimitData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:r}=this.props,s=e?(0,v.Z)((0,c.Y_)(e,!0,!0)[1]):0,n=t?(0,v.Z)((0,c.Y_)(t,!0,!0)[1]):0,o=a?(0,v.Z)((0,c.Y_)(a,!0,!0)[1]):0,i=r?(0,v.Z)((0,c.Y_)(r,!0,!0)[1]):0;return s>0||n>0||o>0||i>0?Math.max(s,n,o,i):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,g.u)({chartNames:(0,b.bC)(t),isHidden:t=>(0,b.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{adjustContainerHeight:e,height:t,intl:a,containerHeight:n=t,padding:i={bottom:130,left:8,right:8,top:8},title:l,xAxisLabel:c,yAxisLabel:u}=this.props,{cursorVoronoiContainer:p,hiddenSeries:h,series:g,width:v}=this.state,S=(0,b.ge)(g,h),C=this.getEndDate(),T=Math.floor(C/2),O=e&&v>900?n-50:n,E=p?o().cloneElement(p,{disable:!(0,b.TW)(g,h),labelComponent:o().createElement(d.M,{legendData:(0,b.oX)(g,h,!0),title:e=>a.formatMessage(s.Z.ChartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement("div",{className:"chartOverride",ref:this.containerRef},o().createElement(r.Title,{headingLevel:"h2",style:ne.title,size:r.TitleSizes.xl},l),o().createElement("div",{style:Object.assign(Object.assign({},ne.chart),{height:O})},o().createElement("div",{style:{height:t,width:v}},o().createElement(m.k,{containerComponent:E,domain:S,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:(0,b.oX)(g,h),legendPosition:"bottom",padding:i,theme:f.Z,width:v},g&&g.map(((e,t)=>this.getChart(e,t))),o().createElement(y.C,{label:c,style:se.xAxis,tickValues:[1,T,C]}),o().createElement(y.C,{dependentAxis:!0,label:u,style:se.yAxis})))))}}const ie=(0,i.ZP)(oe);class le extends o().Component{constructor(){super(...arguments),this.getSkeleton=()=>o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{style:z.chartSkeleton,width:q.N.md}),o().createElement(r.Skeleton,{style:z.legendSkeleton,width:q.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:a,reportPathsType:r,reportType:s}=this.props;e(r,s,t),e(r,s,a)}componentDidUpdate(e){const{fetchReport:t,currentQueryString:a,previousQueryString:r,reportPathsType:s,reportType:n}=this.props;e.currentQueryString!==a&&t(s,n,a),e.previousQueryString!==r&&t(s,n,r)}render(){const{currentReport:e,currentReportFetchStatus:t,previousReport:a,previousReportFetchStatus:r,intl:n}=this.props,i=(0,c.zJ)(e,1,"date","limit"),l=(0,c.zJ)(e,1,"date","request"),u=(0,c.zJ)(e,1,"date","usage"),p=(0,c.zJ)(a,1,"date","limit"),h=(0,c.zJ)(a,1,"date","request"),g=(0,c.zJ)(a,1,"date","usage"),d=e&&e.meta&&e.meta.total&&e.meta.total.usage?e.meta.total.usage.units:"";return o().createElement("div",{style:z.chartContainer},o().createElement("div",{style:z.usageChart},1===t&&1===r?this.getSkeleton():o().createElement(ie,{adjustContainerHeight:!0,containerHeight:300,currentLimitData:i,currentRequestData:l,currentUsageData:u,formatter:U.bM,formatOptions:{},height:300,previousLimitData:p,previousRequestData:h,previousUsageData:g,xAxisLabel:n.formatMessage(s.Z.HistoricalChartDayOfMonthLabel),yAxisLabel:n.formatMessage(s.Z.Units,{units:(0,U.ZV)(d)})})))}}const ce=(0,F.X1)(((e,{reportPathsType:t,reportType:a})=>{const r=(0,l.mB)(location.search),s=(0,j.OA)(r),n=(0,j.VL)(r),o=(0,j.pe)(r),i="instance_type"===a||"storage"===a,c={filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),r&&r.filter&&r.filter.account&&{[`${l.Sq}account`]:r.filter.account}),n&&{[n]:void 0}),s&&i&&{[l.dV]:s}),group_by:Object.assign(Object.assign({},s&&!i&&{[l.dV]:s}),n&&!s&&{[n]:o})},u=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),p=(0,l.pm)(u),h=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),g=(0,l.pm)(h);return{currentQuery:u,currentQueryString:p,currentReport:G.ZV.selectReport(e,t,a,p),currentReportFetchStatus:G.ZV.selectReportFetchStatus(e,t,a,p),previousQuery:h,previousQueryString:g,previousReport:G.ZV.selectReport(e,t,a,g),previousReportFetchStatus:G.ZV.selectReportFetchStatus(e,t,a,g)}})),ue={fetchReport:G.nx.fetchReport},pe=(0,i.ZP)((0,I.connect)(ce,ue)(le));class he extends o().Component{constructor(){super(...arguments),this.getCostChart=e=>{const{costType:t,intl:a}=this.props;return o().createElement(r.Card,null,o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},a.formatMessage(s.Z.HistoricalChartTitle,{value:e.reportType}))),o().createElement(r.CardBody,null,o().createElement(Q,{costType:t,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getTrendChart=e=>{const{costType:t,intl:a}=this.props;return o().createElement(r.Card,null,o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},a.formatMessage(s.Z.HistoricalChartTitle,{value:e.reportType}))),o().createElement(r.CardBody,null,o().createElement(re,{costType:t,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getUsageChart=e=>{const{intl:t}=this.props;return o().createElement(r.Card,null,o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(s.Z.HistoricalChartTitle,{value:e.reportType}))),o().createElement(r.CardBody,null,o().createElement(pe,{reportPathsType:e.reportPathsType,reportType:e.reportType})))}}renderWidget(e){switch(e.type){case"cost":return this.getCostChart(e);case"trend":return this.getTrendChart(e);case"usage":return this.getUsageChart(e);default:return null}}render(){const{selectWidgets:e,widgets:t}=this.props;return o().createElement(r.Grid,{hasGutter:!0},t.map((t=>{const a=e[t];return o().createElement(r.GridItem,{key:`widget-${t}`},this.renderWidget(a))})))}}const ge=(0,i.ZP)(he)},57116:(e,t,a)=>{a.d(t,{W:()=>c});var r=a(49382),s=a(33605),n=a(17918),o=a(54881),i=a(98499),l=a(48196);const c={costValue:{marginTop:i.ZP.var,marginBottom:0},costLabelUnit:{fontSize:o.ZP.value,color:s.ZP.var},dateTitle:{textAlign:"end"},header:{backgroundColor:r.ZP.var,padding:i.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex",minHeight:"90px"},info:{verticalAlign:"middle"},infoIcon:{fontSize:n.ZP.value},infoTitle:{fontWeight:"bold"},title:{paddingBottom:l.ZP.var}}},23246:(e,t,a)=>{a.d(t,{VL:()=>s,pe:()=>n,OA:()=>o,qV:()=>i});var r=a(45997);const s=e=>(e&&e.group_by?Object.keys(e.group_by):[]).find((e=>e!==r.dV)),n=e=>{const t=s(e);return t?e.group_by[t]:void 0},o=e=>{let t;if(e&&e.group_by)for(const a of Object.keys(e.group_by))if(a===r.dV){t=e.group_by[r.dV];break}return t},i=e=>{let t;if(e&&e.group_by)for(const a of Object.keys(e.group_by)){const e=a.indexOf(r.P);if(-1!==e){t=a.substring(e+r.P.length);break}}return t}},88268:(e,t,a)=>{a.d(t,{T:()=>s,Z:()=>n});var r=a(45997);const s=({basePath:e,label:t,description:a,groupBy:s,query:n})=>{const o=Object.assign(Object.assign(Object.assign({},n),a&&a!==t&&{[r.eG]:a}),{group_by:{[s]:t}});return`${e}?${(0,r.IV)(o)}`},n=({basePath:e,description:t,groupBy:a,groupByOrg:s,id:n,orgUnitId:o,query:i,title:l,type:c})=>{const u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},JSON.parse(JSON.stringify(i))),t&&t!==l&&{[r.eG]:t}),l&&{[r.yG]:l}),s&&o&&{[r.dV]:o}),{group_by:{[a]:n}});return u.filter||(u.filter={}),"account"===c?(u.filter.account=n,u.group_by={[r.dV]:s}):"organizational_unit"===c&&(u.group_by={[r.dV]:n}),`${e}?${(0,r.IV)(u)}`}},8091:(e,t,a)=>{a.d(t,{W:()=>r,U:()=>s});const r=(e,t,a)=>{const r=Object.assign({},JSON.parse(JSON.stringify(e)));if("*"!==a||"*"!==r.group_by[t]){if(r.filter_by[t]){let e=!1;const s=r.filter_by[t];if(Array.isArray(s)){for(const t of s)if(t===a){e=!0;break}}else e=a===r.filter_by[t];e||(r.filter_by[t]=[r.filter_by[t],a])}else r.filter_by[t]=[a];return r}},s=(e,t,a)=>{const r=Object.assign({},JSON.parse(JSON.stringify(e)));if(null===t)r.filter_by=void 0;else if(null===a)r.filter_by[t]=void 0;else if(Array.isArray(r.filter_by[t])){const s=r.filter_by[t].indexOf(a);s>-1&&(r.filter_by[t]=[...e.filter_by[t].slice(0,s),...e.filter_by[t].slice(s+1)])}else r.filter_by[t]=void 0;return r}},76821:(e,t,a)=>{a.d(t,{g_:()=>r,_q:()=>s});const r=e=>({"data-testid":e}),s={details:{cluster_lnk:"cluster-lnk",historical_data_btn:"historical-data-btn",show_more_btn:"show-more-btn",tag_lnk:"tag-lnk",view_all_btn:"view-all-btn"},export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},onboarding:{btn_cancel:"btn-cancel",btn_back:"btn-back",btn_continue:"btn-continue",btn_close:"btn-close",type_selector:"type-selector",type_opt_aws:"type-option-aws",type_opt_ocp:"type-option-ocp",type_opt_non:"type-option-non",name_input:"name-input",check_box_1:"check-box-1",check_box_2:"check-box-2",s3_input:"s3-input",clusterid_input:"clusterid-input",arn_input:"arn-input"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},19853:(e,t,a)=>{function r(e,t){let a=JSON.stringify(e),r=JSON.stringify(t);return a||(a=""),r||(r=""),a.split("").sort().join("")===r.split("").sort().join("")}a.d(t,{X:()=>r})}}]);
//# sourceMappingURL=50e0870ab1c747206597.bundle.js.map