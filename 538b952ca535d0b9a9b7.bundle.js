(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{156:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"b",function(){return n}),a.d(t,"a",function(){return o});const r=e=>e?e.split("-")[0].toLowerCase():"",n=(e,t,a={})=>{const n=r(t),l=e||0;switch(n){case"usd":return o(l,n,a);case"gb":return i(l,n,a);default:return s(l,n,a)}},s=(e,t,{fractionDigits:a}={})=>e.toFixed(a),o=(e,t,{fractionDigits:a=2}={})=>{let r=e;return e||(r=0),r.toLocaleString("en",{style:"currency",currency:"USD",minimumFractionDigits:a,maximumFractionDigits:a})},i=(e,t,{fractionDigits:a=2}={})=>e.toFixed(a)},167:function(e,t,a){"use strict";function r(e,t){if("string"==typeof e)return e;return e[t.key]}function n(e,t){const{direction:a=0}=t||{};return[...e].sort((e,n)=>{const s=r(0===a?e:n,t),o=r(0===a?n:e,t);return s>o?-1:s<o?1:0})}a.d(t,"a",function(){return n})},181:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n});const r=e=>({"data-testid":e}),n={export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},185:function(e,t,a){"use strict";a.d(t,"d",function(){return m}),a.d(t,"e",function(){return b}),a.d(t,"a",function(){return g}),a.d(t,"b",function(){return v}),a.d(t,"c",function(){return f});var r=a(262),n=a.n(r),s=a(261),o=a.n(s),i=a(260),l=a.n(i),c=a(45),u=a(156),d=a(217),p=a(216);function m(e,t=1,a="date"){if(!e)return[];const r={report:e,idKey:a,sortKey:"id",sortDirection:1},n=Object(d.a)(r);return 1===t?n.map(e=>h(e.total,e,a)):2===t?n.map(e=>h(e.total,e,a)):n.reduce((e,t)=>{const r=e.length?e[e.length-1].y:0;return[...e,h(r+t.total,t,a)]},[])}function b(e,t=1,a="date",r="charge"){if(!e)return[];const n={report:e,idKey:a,sortKey:"id",sortDirection:1},s=Object(p.a)(n);return 1===t?s.map(e=>h(e[r],e,a)):2===t?s.map(e=>h(e[r],e,a)):s.reduce((e,t)=>{const n=e.length?e[e.length-1].y:0;return[...e,h(n+t[r],t,a)]},[])}function h(e,t,a="date"){var r;return{x:"date"===a?o()(t.id):t.label,y:(r=e,Number(r)===r&&r%1!=0?parseFloat(e.toFixed(2)):function(e){return Number(e)===e&&e%1==0}(e)?e:0),key:t.id,name:t.id,units:t.units}}function g(e,t=!0){const[a,r]=function(e){if(!e||!e.length){const e=new Date;return[l()(e),e]}return[new Date(e[0].key+"T00:00:00"),new Date(e[e.length-1].key+"T00:00:00")]}(e);t&&a.setDate&&a.setDate(1);const s=n()(a,"MMM"),i=o()(a),c=o()(r);return`${s} ${o()(a)}${i!==c?` - ${c}`:""}`}function v(e){return function(t,a=null,r={}){const n=Object(u.c)(a);switch(n){case"hrs":case"gb":return c.a.t(`units.${n}`,{value:`${e(t,a,r)}`});default:return`${e(t,a,r)}`}}}function f(e,t,a,r="date"){if(!e.key)return"";if("date"===r){return`${n()(e.key,"MMM D YYYY")}: ${t(e.y,e.units,a)}`}return e.key.toString()}},216:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"b",function(){return i});var r=a(167);const n=["clusters","nodes","projects"];function s({report:e,idKey:t,labelKey:a=t,sortKey:n="charge",sortDirection:s=0}){return Object(r.a)(o({report:e,idKey:t,labelKey:a,sortDirection:s,sortKey:n}),{key:n,direction:s})}function o({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const r={},s=e=>{e.values&&e.values.forEach(e=>{const n=e.capacity,s=e.charge,o=e[t],i=e[a],l=e.limit,c=e.request,u=e.usage;r[o]?r[o]=Object.assign({},r[o],{capacity:r[o].capacity+n,charge:r[o].charge+s,limit:r[o].limit+l,request:r[o].request+c,usage:r[o].usage+u}):r[o]={capacity:n,charge:s,deltaPercent:e.delta_percent,deltaValue:e.delta_value,id:o,label:i,limit:l,request:c,units:e.units||u?"GB":"USD",usage:u}}),n.forEach(t=>{if(e[t])return e[t].forEach(s)})};return e.data.forEach(s),Object.values(r)}function i(e={}){return e.project?"project":e.cluster?"cluster":e.node?"node":"date"}},217:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"b",function(){return i});var r=a(167);const n=["services","accounts","instance_types","regions"];function s({report:e,idKey:t,labelKey:a=t,sortKey:n="total",sortDirection:s=0}){return Object(r.a)(o({report:e,idKey:t,labelKey:a,sortDirection:s,sortKey:n}),{key:n,direction:s})}function o({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const r={},s=e=>{e.values&&e.values.forEach(e=>{const n=e.total,s=e[t];let o=e[a];"account"===a&&e.account_alias&&(o=e.account_alias),r[s]?r[s]=Object.assign({},r[s],{total:r[s].total+n}):r[s]={deltaPercent:e.delta_percent,deltaValue:e.delta_value,id:s,total:n,label:o,units:e.units}}),n.forEach(t=>{if(e[t])return e[t].forEach(s)})};return e.data.forEach(s),Object.values(r)}function i(e={}){return e.account?"account":e.instance_type?"instance_type":e.region?"region":e.service?"service":"date"}},277:function(e,t,a){"use strict";var r=a(0),n=a.n(r);const s=({data:e})=>{const t="function"==typeof e.content?e.content(e):e.content;return n.a.createElement("div",{role:"tabpanel"},t)};var o=a(646),i=a(132);const l=o.a.create({tabItem:{position:"relative",flexGrow:1,textAlign:"center",fontSize:i.o.value,padding:i.I.value,cursor:"pointer",marginBottom:i.H.value,marginTop:i.H.value},tabItemShrink:{flexGrow:"0",flexShrink:"2",marginRight:"20px"},selected:{backgroundImage:`linear-gradient(to top, ${i.B.value} 2px, transparent 2px)`}});class c extends n.a.Component{constructor(){super(...arguments),this.handleClick=(()=>{const{onSelect:e,data:t}=this.props;e(t.id)})}render(){const{data:e,isSelected:t,isShrink:a}=this.props;return n.a.createElement("div",{role:"tab",onClick:this.handleClick,"aria-selected":t,tabIndex:t?0:-1,className:Object(o.b)(l.tabItem,t&&l.selected,a&&l.tabItemShrink)},e.label)}}const u=o.a.create({tabNavigation:{display:"flex",alignItems:"flex-end",marginBottom:i.H.value}});class d extends n.a.Component{constructor(){super(...arguments),this.handleKeyDown=(e=>{if(!["ArrowRight","ArrowLeft"].includes(e.key))return;const{selected:t,tabs:a,onChange:r}=this.props,n="ArrowRight"===e.key?1:-1,s=a.findIndex(e=>e.id===t.id)+n;s<0||s>a.length-1||r(a[s].id)})}render(){const{isShrink:e,tabs:t,selected:a,onChange:r}=this.props;return n.a.createElement("div",{role:"tablist",className:Object(o.b)(u.tabNavigation),onKeyDown:this.handleKeyDown},t.map(t=>n.a.createElement(c,{isShrink:e,onSelect:r,key:t.id,data:t,isSelected:t.id===a.id})))}}const p=({isShrink:e,selected:t,tabs:a,onChange:r})=>{const o=a.find(e=>e.id===t);return n.a.createElement("div",null,n.a.createElement(d,{isShrink:e,tabs:a,selected:o,onChange:r}),n.a.createElement(s,{data:o}))};a.d(t,"a",function(){return p})},394:function(e,t,a){"use strict";var r=a(621),n=a(0),s=a.n(n),o=a(650);const i=r.c,l=e=>s.a.createElement(i,Object.assign({component:o.a,variant:"link"},e));a.d(t,"a",function(){return l})},396:function(e,t,a){"use strict";var r=a(13),n=a(627),s=a(628),o=a(626),i=a(631),l=a(646),c=a(185),u=a(0),d=a.n(u),p=a(132);const m={colorScale:[p.L.value,p.B.value],previousMonth:{data:{fill:p.M.value,stroke:p.L.value}},currentMonth:{data:{fill:p.B.value,stroke:p.C.value}}},b=l.a.create({reportSummaryTrend:{":not(foo) svg":{overflow:"visible"}}});class h extends d.a.Component{constructor(){super(...arguments),this.containerRef=d.a.createRef(),this.state={width:0},this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props;return Object(c.c)(e,Object(c.b)(t),a,"date")}),this.handleResize=(()=>{this.setState({width:this.containerRef.current.clientWidth})})}shouldComponentUpdate(e){return!(!e.currentData||!e.previousData)}componentDidMount(){setTimeout(()=>{this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)})}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const{title:e,currentData:t,previousData:a,height:u}=this.props,p=[];a&&a.length&&p.push({name:Object(c.a)(a)}),t&&t.length&&p.push({name:Object(c.a)(t)});const h=d.a.createElement(i.a,{labels:this.getTooltipLabel});return d.a.createElement("div",{className:Object(l.b)(b.reportSummaryTrend),ref:this.containerRef},d.a.createElement("div",null,d.a.createElement(o.a,{containerComponent:h,height:u,width:this.state.width},Boolean(a&&a.length)&&d.a.createElement(s.a,{style:m.previousMonth,data:a}),Boolean(t&&t.length)&&d.a.createElement(s.a,{style:m.currentMonth,data:t}))),d.a.createElement(n.a,{title:e,theme:r.a.dark.blue,colorScale:m.colorScale,data:p,height:50,width:this.state.width}))}}a.d(t,"a",function(){return h})},457:function(e,t,a){"use strict";var r=a(621),n=a(606),s=a(448),o=a(451),i=a(277),l=a(0),c=a.n(l),u=a(33),d=a(26),p=a(39),m=a(12),b=a(24),h=a(181),g=a(469),v=a(468),f=a(644),y=a(649),E=a(646),O=a(132);const j=E.a.create({card:{display:"flex",alignItems:"center",justifyContent:"center",height:"75vh",marginTop:"30px"},cardBody:{textAlign:"center"},primaryAction:{marginTop:"60px"},subtitle:{color:O.j.var,marginTop:"30px"},title:{marginTop:"30px"}}),D=({primaryAction:e,subTitle:t,title:a})=>c.a.createElement("div",null,c.a.createElement(f.a,{className:Object(E.b)(j.card)},c.a.createElement("div",{className:Object(E.b)(j.cardBody)},c.a.createElement(s.a,{gutter:"lg"},c.a.createElement(n.a,{md:1,lg:2}),c.a.createElement(n.a,{md:10,lg:8},c.a.createElement(y.a,{size:"xl"}),c.a.createElement(o.b,{className:Object(E.b)(j.title),size:"lg"},a),Boolean(t)&&c.a.createElement("p",{className:Object(E.b)(j.subtitle)},t),Boolean(e)&&c.a.createElement("div",{className:Object(E.b)(j.primaryAction)},e)),c.a.createElement(n.a,{md:1,lg:2})))));const w=Object(p.a)(e=>{const t=[],a=m.c.selectProviders(e);if(a&&a.results){let e=!1,r=!1;for(const t of a.results)"AWS"===t.type?e=!0:"OCP"===t.type&&(r=!0);e&&t.push("aws"),r&&t.push("ocp")}return{availableTabs:t,providers:a,providersFetchStatus:m.c.selectProvidersFetchStatus(e)}}),T=Object(u.c)()(Object(d.b)(w,{openProvidersModal:b.a.openProvidersModal})(class extends c.a.Component{constructor(){super(...arguments),this.state={currentTab:"aws"},this.getTabTitle=(e=>{const{t:t}=this.props;return"aws"===e?t("overview.aws"):"ocp"===e?t("overview.ocp"):void 0}),this.renderTab=(e=>"aws"===e.id?c.a.createElement(g.a,null):c.a.createElement(v.a,null)),this.handleTabChange=(e=>{this.setState({currentTab:e})})}render(){const{availableTabs:e,openProvidersModal:t,providers:a,providersFetchStatus:l,t:u}=this.props,{currentTab:d}=this.state,p=c.a.createElement(r.c,Object.assign({},Object(h.a)(h.b.providers.add_btn),{onClick:t,type:r.a.submit,variant:r.b.secondary}),u("providers.add_source"));return c.a.createElement("div",{className:"pf-m-dark-100 pf-l-page__main-section pf-u-pb-xl pf-u-px-xl"},c.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},c.a.createElement(o.b,{size:o.a.lg},u("overview.title")),p),c.a.createElement("div",null,Boolean(a&&a.count>0&&2===l)?c.a.createElement(i.a,{isShrink:Boolean(!0),tabs:e.map(e=>({id:e,label:this.getTabTitle(e),content:this.renderTab})),selected:d,onChange:this.handleTabChange}):c.a.createElement(s.a,{gutter:"lg"},c.a.createElement(n.a,null,c.a.createElement(D,{primaryAction:p,title:u("overview.empty_state_title"),subTitle:u("overview.empty_state_desc")})))))}}));t.a=T},462:function(e,t,a){"use strict";var r=a(448),n=a(606),s=a(0),o=a.n(s),i=a(33),l=a(26),c=a(35),u=a(39),d=a(24),p=a(43),m=a(641),b=a(642),h=a(643),g=a(451),v=a(644),f=a(646),y=a(132);const E=f.a.create({reportSummary:{height:"100%"},subtitle:{fontSize:y.q.value,color:y.j.var,marginBottom:"0"}}),O=Object(i.c)()(({title:e,subTitle:t,detailsLink:a,children:r,status:n,t:s})=>o.a.createElement(v.a,{className:Object(f.b)(E.reportSummary)},o.a.createElement(m.a,null,o.a.createElement(g.b,{size:"lg"},e),Boolean(t)&&o.a.createElement("p",{className:Object(f.b)(E.subtitle)},t)),o.a.createElement(h.a,null,1===n?`${s("loading")}...`:r),Boolean(a)&&o.a.createElement(b.a,null,a))),j=f.a.create({reportSummaryDetails:{marginBottom:y.H.value,display:"flex",alignItems:"flex-end"},value:{color:y.i.var,marginRight:y.I.value,fontSize:y.m.value},text:{paddingBottom:14,lineHeight:y.u.value,fontSize:y.q.value}}),D=({label:e,formatValue:t,formatOptions:a,report:r})=>{let n="----";return r&&(n=r.total?t(r.total.value,r.total.units,a):0),o.a.createElement("div",{className:Object(f.b)(j.reportSummaryDetails)},o.a.createElement("div",{className:Object(f.b)(j.value)},n),o.a.createElement("div",{className:Object(f.b)(j.text)},o.a.createElement("div",null,e)))};var w=a(625);const T=f.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:y.H.value}},test:{":not(foo) svg":{overflow:"visible"}}}),S=({label:e,value:t,totalValue:a,formatValue:r,units:n,formatOptions:s})=>{const i=Number((a?t/a*100:0).toFixed(2)),l=`${r(t,n,s)} (${i}%)`;return o.a.createElement("li",{className:Object(f.b)(T.reportSummaryItem)},o.a.createElement(w.b,{label:l,value:i,title:e,size:w.a.sm}))};S.defaultProps={formatValue:e=>e};var k=a(217);class x extends o.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,r=Object(k.a)({report:e,idKey:t,labelKey:a}),n=r.findIndex(e=>"Other"===e.id);return-1!==n?[...r.slice(0,n),...r.slice(n+1),r[n]]:r}render(){const{report:e,children:t}=this.props;if(!e)return null;const a=this.getItems();return o.a.createElement("ul",null,t({items:a}))}}var _=a(396);const R=e=>o.a.createElement("div",{style:{marginBottom:16}},o.a.createElement(_.a,Object.assign({height:75},e)));var C=a(185),K=a(394),L=a(277),B=a(262),I=a.n(B),N=a(261),q=a.n(N),U=a(399),z=a.n(U),M=a(260),V=a.n(M),$=a(10),W=a(156);const P=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}};const F=Object(u.a)((e,{widgetId:t})=>{const a=c.c.selectWidget(e,t),r=c.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,current:$.c.selectReport(e,a.reportType,r.current),previous:$.c.selectReport(e,a.reportType,r.previous),tabs:$.c.selectReport(e,a.reportType,r.tabs),status:$.c.selectReportFetchStatus(e,a.reportType,r.current)})}),A={fetchReports:c.a.fetchWidgetReports,updateTab:c.a.changeWidgetTab},Q=Object(i.c)()(Object(l.b)(F,A)(class extends o.a.Component{constructor(){super(...arguments),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:P(e)||""})}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:P(e)||""})}),this.buildDetailsLink=(()=>{const{currentQuery:e}=this.props,t=Object(p.b)(e).group_by;return`/aws?${Object(p.a)({group_by:t,order_by:{total:"desc"}})}`}),this.renderTab=(e=>{const{tabs:t,topItems:a}=this.props,r=e.id;return o.a.createElement(x,{idKey:P(r),report:t},({items:e})=>e.map(e=>o.a.createElement(S,{key:e.id,formatOptions:a.formatOptions,formatValue:W.b,label:e.label.toString(),totalValue:t.total.value,units:e.units,value:e.total})))}),this.handleTabChange=(e=>{this.props.updateTab(this.props.id,e)})}componentDidMount(){const{fetchReports:e,widgetId:t}=this.props;e(t)}render(){const{t:e,titleKey:t,trend:a,details:r,current:n,previous:s,availableTabs:i,currentTab:l,reportType:c,status:u}=this.props,d=new Date,p=z()(d),m=I()(d,"Do"),b=I()(V()(d),"Do"),h=e(t,{endDate:m,month:p,startDate:b}),g=e("aws_dashboard.widget_subtitle",{endDate:m,month:p,startDate:b,count:q()(d)}),v=e(r.labelKey,{context:r.labelKeyContext}),f="cost"===c&&o.a.createElement(K.a,{to:this.buildDetailsLink()},this.getDetailsLinkTitle(l)),y=e(a.titleKey),E=Object(C.d)(n,a.type),j=Object(C.d)(s,a.type);return o.a.createElement(O,{title:h,subTitle:g,detailsLink:f,status:u},o.a.createElement(D,{report:n,formatValue:W.b,label:v,formatOptions:r.formatOptions}),o.a.createElement(R,{title:y,currentData:E,formatDatumValue:W.b,formatDatumOptions:a.formatOptions,previousData:j}),o.a.createElement(L.a,{tabs:i.map(e=>({id:e,label:this.getTabTitle(e),content:this.renderTab})),selected:l,onChange:this.handleTabChange}))}})),H=Object(u.a)(e=>({widgets:c.c.selectCurrentWidgets(e)})),G=Object(i.c)()(Object(l.b)(H,{openProvidersModal:d.a.openProvidersModal})(({t:e,openProvidersModal:t,widgets:a})=>o.a.createElement("div",null,o.a.createElement(r.a,{gutter:"md"},a.map(e=>o.a.createElement(n.a,{xl:4,lg:6,key:e},o.a.createElement(Q,{widgetId:e})))))));t.a=G},466:function(e,t,a){"use strict";var r=a(448),n=a(606),s=a(0),o=a.n(s),i=a(33),l=a(26),c=a(39),u=a(34),d=a(24),p=a(42),m=a(185),b=a(394),h=a(641),g=a(642),v=a(643),f=a(451),y=a(644),E=a(646),O=a(132);const j=E.a.create({reportSummary:{height:"100%"},subtitle:{fontSize:O.q.value,color:O.j.var,marginBottom:"0"}}),D=Object(i.c)()(({title:e,subTitle:t,detailsLink:a,children:r,status:n,t:s})=>o.a.createElement(y.a,{className:Object(E.b)(j.reportSummary)},o.a.createElement(h.a,null,o.a.createElement(f.b,{size:"lg"},e),Boolean(t)&&o.a.createElement("p",{className:Object(E.b)(j.subtitle)},t)),o.a.createElement(v.a,null,1===n?`${s("loading")}...`:r),Boolean(a)&&o.a.createElement(g.a,null,a))),w=E.a.create({reportSummaryDetails:{display:"flex",justifyContent:"space-between",marginBottom:O.H.value},value:{display:"flex",color:O.i.var,fontSize:O.m.value,marginRight:O.I.value},text:{display:"flex",alignItems:"flex-end",marginLeft:O.I.value,paddingBottom:14,lineHeight:O.u.value,fontSize:O.q.value}}),T=({label:e,formatValue:t,formatOptions:a,report:r,reportType:n="charge",requestLabel:s})=>{let i="----",l="----";if(r&&r.total)if("charge"===n){const e=r.total.units?r.total.units:"USD";i=t(r.total.charge,e,a)}else{const e=r.total.units?r.total.units:"GB";i=t(r.total.usage,e,a),l=t(r.total.request,e,a)}return o.a.createElement("div",{className:Object(E.b)(w.reportSummaryDetails)},o.a.createElement("div",{className:Object(E.b)(w.value)},i,o.a.createElement("div",{className:Object(E.b)(w.text)},o.a.createElement("div",null,e))),Boolean("charge"!==n)&&o.a.createElement("div",{className:Object(E.b)(w.value)},l,o.a.createElement("div",{className:Object(E.b)(w.text)},s)))};var S=a(625);const k=E.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:O.H.value}},test:{":not(foo) svg":{overflow:"visible"}}}),x=({label:e,value:t,totalValue:a,formatValue:r,units:n,formatOptions:s})=>{const i=Number((a?t/a*100:0).toFixed(2)),l=`${r(t,n,s)} (${i}%)`;return o.a.createElement("li",{className:Object(E.b)(k.reportSummaryItem)},o.a.createElement(S.b,{label:l,value:i,title:e,size:S.a.sm}))};x.defaultProps={formatValue:e=>e};var _=a(216);class R extends o.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,r=Object(_.a)({report:e,idKey:t,labelKey:a}),n=r.findIndex(e=>"Other"===e.id);return-1!==n?[...r.slice(0,n),...r.slice(n+1),r[n]]:r}render(){const{report:e,children:t}=this.props;if(!e)return null;const a=this.getItems();return o.a.createElement("ul",null,t({items:a}))}}var C=a(396);const K=e=>o.a.createElement("div",{style:{marginBottom:16}},o.a.createElement(C.a,Object.assign({height:75},e)));var L=a(628),B=a(13),I=a(627),N=a(626),q=a(631);const U={currentColorScale:[O.L.value,O.B.value],currentRequestData:{data:{fill:"none",stroke:O.N.value}},currentUsageData:{data:{fill:"none",stroke:O.B.value}},previousColorScale:[O.O.value,O.N.value],previousRequestData:{data:{fill:"none",stroke:O.O.value}},previousUsageData:{data:{fill:"none",stroke:O.L.value}}},z=E.a.create({reportSummaryTrend:{":not(foo) svg":{overflow:"visible"}}});class M extends o.a.Component{constructor(){super(...arguments),this.containerRef=o.a.createRef(),this.state={width:0},this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props;return Object(m.c)(e,Object(m.b)(t),a,"date")}),this.handleResize=(()=>{this.setState({width:this.containerRef.current.clientWidth})})}shouldComponentUpdate(e){return!!(e.currentUsageData&&e.previousUsageData&&e.currentRequestData&&e.previousRequestData)}componentDidMount(){setTimeout(()=>{this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)})}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const{currentRequestData:e,currentRequestLabel:t,currentUsageData:a,currentUsageLabel:r,height:n,previousRequestData:s,previousRequestLabel:i,previousUsageData:l,previousUsageLabel:c,title:u}=this.props,d=[],p=[];l&&l.length&&d.push({name:c}),s&&s.length&&p.push({name:i}),a&&a.length&&d.push({name:r}),e&&e.length&&p.push({name:t});const m=o.a.createElement(q.a,{labels:this.getTooltipLabel});return o.a.createElement("div",{className:Object(E.b)(z.reportSummaryTrend),ref:this.containerRef},o.a.createElement("div",null,o.a.createElement(N.a,{containerComponent:m,height:n,width:this.state.width},Boolean(a&&a.length)&&o.a.createElement(L.a,{style:U.currentUsageData,data:a}),Boolean(e&&e.length)&&o.a.createElement(L.a,{style:U.currentRequestData,data:e}),Boolean(l&&l.length)&&o.a.createElement(L.a,{style:U.previousUsageData,data:l}),Boolean(s&&s.length)&&o.a.createElement(L.a,{style:U.previousRequestData,data:s}))),o.a.createElement(I.a,{title:u,theme:B.a.dark.blue,colorScale:U.currentColorScale,data:d,gutter:55,height:25,width:this.state.width}),o.a.createElement(I.a,{title:u,theme:B.a.dark.blue,colorScale:U.previousColorScale,data:p,height:25,width:this.state.width,style:{data:{strokeDasharray:"5,5"}}}))}}const V=e=>o.a.createElement("div",{style:{marginBottom:16}},o.a.createElement(M,Object.assign({height:75},e)));var $=a(277),W=a(262),P=a.n(W),F=a(261),A=a.n(F),Q=a(399),H=a.n(Q),G=a(260),Y=a.n(G),J=a(9),X=a(156);const Z=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}};const ee=Object(c.a)((e,{widgetId:t})=>{const a=u.c.selectWidget(e,t),r=u.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,current:J.c.selectReport(e,a.reportType,r.current),previous:J.c.selectReport(e,a.reportType,r.previous),tabs:J.c.selectReport(e,a.reportType,r.tabs),status:J.c.selectReportFetchStatus(e,a.reportType,r.current)})}),te={fetchReports:u.a.fetchWidgetReports,updateTab:u.a.changeWidgetTab},ae=Object(i.c)()(Object(l.b)(ee,te)(class extends o.a.Component{constructor(){super(...arguments),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:Z(e)||""})}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:Z(e)||""})}),this.buildDetailsLink=(()=>{const{currentQuery:e}=this.props,t=Object(p.b)(e).group_by;return`/ocp?${Object(p.a)({group_by:t,order_by:{charge:"desc"}})}`}),this.renderTab=(e=>{const{reportType:t,tabs:a,topItems:r}=this.props,n=e.id;return o.a.createElement(R,{idKey:Z(n),report:a},({items:e})=>e.map(e=>o.a.createElement(x,{key:e.id,formatOptions:r.formatOptions,formatValue:X.b,label:e.label.toString(),totalValue:"charge"===t?a.total.charge:a.total.usage,units:e.units,value:"charge"===t?e.charge:e.usage})))}),this.handleTabChange=(e=>{this.props.updateTab(this.props.id,e)})}componentDidMount(){const{fetchReports:e,widgetId:t}=this.props;e(t)}render(){const{t:e,titleKey:t,trend:a,details:r,current:n,previous:s,availableTabs:i,currentTab:l,reportType:c,status:u}=this.props,d=new Date,p=H()(d),h=P()(d,"Do"),g=P()(Y()(d),"Do"),v=e(t,{endDate:h,month:p,startDate:g}),f=e("ocp_dashboard.widget_subtitle",{endDate:h,month:p,startDate:g,count:A()(d)}),y=e(r.labelKey),E=e(r.requestLabelKey),O="charge"===c&&o.a.createElement(b.a,{to:this.buildDetailsLink()},this.getDetailsLinkTitle(l)),j="charge"===c?"charge":"usage",w=Object(m.e)(n,a.type,"date",j),S=Object(m.e)(s,a.type,"date",j),k="charge"!==c?Object(m.e)(n,a.type,"date","request"):void 0,x="charge"!==c?Object(m.e)(s,a.type,"date","request"):void 0,_=e(a.currentRequestLabelKey,{date:Object(m.a)(k)}),R=e(a.currentUsageLabelKey,{date:Object(m.a)(w)}),C=e(a.previousRequestLabelKey,{date:Object(m.a)(x)}),L=e(a.previousUsageLabel,{date:Object(m.a)(S)});return o.a.createElement(D,{title:v,subTitle:f,detailsLink:O,status:u},o.a.createElement(T,{report:n,reportType:c,formatValue:X.b,label:y,formatOptions:r.formatOptions,requestLabel:E}),Boolean("charge"===c)?o.a.createElement(K,{title:e(a.titleKey),currentData:w,formatDatumValue:X.b,formatDatumOptions:a.formatOptions,previousData:S}):o.a.createElement(V,{currentRequestData:k,currentRequestLabel:_,currentUsageData:w,currentUsageLabel:R,formatDatumValue:X.b,formatDatumOptions:a.formatOptions,previousRequestData:x,previousRequestLabel:C,previousUsageData:S,previousUsageLabel:L}),o.a.createElement($.a,{tabs:i.map(e=>({id:e,label:this.getTabTitle(e),content:this.renderTab})),selected:l,onChange:this.handleTabChange}))}})),re=Object(c.a)(e=>({widgets:u.c.selectCurrentWidgets(e)})),ne=Object(i.c)()(Object(l.b)(re,{openProvidersModal:d.a.openProvidersModal})(({t:e,openProvidersModal:t,widgets:a})=>o.a.createElement("div",null,o.a.createElement(r.a,{gutter:"md"},a.map(e=>o.a.createElement(n.a,{xl:4,lg:6,key:e},o.a.createElement(ae,{widgetId:e})))))));t.a=ne},468:function(e,t,a){"use strict";(function(e){var r=a(41),n=a(466);t.a=Object(r.hot)(e)(n.a)}).call(this,a(40)(e))},469:function(e,t,a){"use strict";(function(e){var r=a(41),n=a(462);t.a=Object(r.hot)(e)(n.a)}).call(this,a(40)(e))},633:function(e,t,a){"use strict";a.r(t),function(e){var r=a(41),n=a(457);t.default=Object(r.hot)(e)(n.a)}.call(this,a(40)(e))}}]);
//# sourceMappingURL=538b952ca535d0b9a9b7.bundle.js.map