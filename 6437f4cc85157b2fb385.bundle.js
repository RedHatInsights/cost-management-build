(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1146:function(e,t,a){},1174:function(e,t,a){"use strict";a.r(t);a(1146);var s=a(417),r=a(418),n=a(263),o=a(457),i=a(347),c=a(228),l=a(54),u=a(690),h=a(754),d=a(425),p=a(426),g=a(1),m=a.n(g);const f=({DashboardWidget:e,selectWidgets:t,widgets:a})=>m.a.createElement("div",null,m.a.createElement(d.a,{hasGutter:!0},a.map(a=>t[a].details.showHorizontal?m.a.createElement(p.a,{sm:12,key:a},m.a.createElement(e,{widgetId:a})):m.a.createElement(p.a,{lg:12,xl:6,xl2:4,key:a},m.a.createElement(e,{widgetId:a})))));var b=a(715),v=a(165),y=a(239),_=a(338),D=a(168),C=a(735),O=a(758),j=a(745),T=a.n(j),S=a(737),E=a.n(S),w=a(818),R=a.n(w),I=a(768),k=a.n(I),F=a(751),A=a(1001),N=a(734),L=a(220),x=a(399),P=a(385);class W extends m.a.Component{constructor(){super(...arguments),this.defaultState={isChartComparisonOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e,t:t}=this.props;return e.map(e=>m.a.createElement(L.a,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label)))},this.getCurrentLabel=()=>{const{currentItem:e,options:t,t:a}=this.props;let s="";for(const r of t)if(e===r.value){s=a(r.label);break}return s},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isChartComparisonOpen:!this.state.isChartComparisonOpen})},this.handleToggle=e=>{this.setState({isChartComparisonOpen:e})}}render(){const{isChartComparisonOpen:e}=this.state,t=this.getDropDownItems();return m.a.createElement(x.a,{onSelect:this.handleSelect,toggle:m.a.createElement(P.a,{onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:e,dropdownItems:t})}}const z=Object(b.a)()(W);var H=a(681),U=a.n(H),M=a(654),V=a.n(M),K=a(675),Q=a.n(K);const q={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},G={comparison:{marginBottom:V.a.value},tabs:{marginTop:U.a.value},tabItems:{marginTop:Q.a.value}};class B extends m.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0,currentComparison:"cumulative",forecastAuthorized:!1},this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:a}=this.props,s=a(e);return`${t.viewAllPath}?${Object(D.a)({group_by:{[s]:"*"},order_by:{cost:"desc"}})}`},this.getChart=(e,t,a=!1)=>{const{chartType:s,trend:r}=this.props;return"dailyTrend"===s?this.getDailyTrendChart(e,t,a,r.showSupplementaryLabel):"dailyCost"===s?this.getDailyCostChart(e,t,a):"trend"===s?this.getTrendChart(e,t,a,r.showSupplementaryLabel):"usage"===s?this.getUsageChart(t,a):null},this.getChartComparison=()=>{const{t:e,trend:t}=this.props,{currentComparison:a}=this.state,s=this.getUnits(),r=e(t.titleKey,{units:e("units."+s)}),n=[{label:e(t.dailyTitleKey,{units:e("units."+s)}),value:"daily"},{label:r,value:"cumulative"}];return m.a.createElement(z,{currentItem:a||n[0].value,onItemClicked:this.handleComparisonClick,options:n})},this.getDailyCostChart=(e,t,a=!1)=>{const{currentReport:s,previousReport:r,trend:n}=this.props,{currentComparison:o,forecastAuthorized:i}=this.state,c=n.computedReportItem,l=n.computedReportItemValue,u="daily"===o,h=u?1:n.type,d=Object(C.h)(s,h,"date","infrastructure",l),p=Object(C.h)(r,h,"date","infrastructure",l),g=Object(C.h)(s,h,"date",c,l),f=Object(C.h)(r,h,"date",c,l),b=this.getForecastData(s,n.computedForecastItem),v=this.getForecastData(s,n.computedForecastInfrastructureItem),y=u?O.d:O.c;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:G.comparison},this.getChartComparison()),m.a.createElement(y,{adjustContainerHeight:a,containerHeight:e,currentCostData:g,currentInfrastructureCostData:d,forecastConeData:b.forecastConeData,forecastData:b.forecastData,forecastInfrastructureConeData:v.forecastConeData,forecastInfrastructureData:v.forecastData,formatDatumValue:N.b,formatDatumOptions:n.formatOptions,height:t,previousCostData:f,previousInfrastructureCostData:p,showForecast:void 0!==n.computedForecastItem&&i}))},this.getDailyTrendChart=(e,t,a=!1,s=!1)=>{const{currentReport:r,details:n,previousReport:o,trend:i}=this.props,{currentComparison:c,forecastAuthorized:l}=this.state,u=this.getUnits(),h=i.computedReportItem,d=i.computedReportItemValue,p="daily"===c,g=p?1:i.type,f=Object(C.h)(r,g,"date",h,d),b=Object(C.h)(o,g,"date",h,d),{forecastData:v,forecastConeData:y}=this.getForecastData(r,i.computedForecastItem),_=p?O.e:O.i;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:G.comparison},this.getChartComparison()),m.a.createElement(_,{adjustContainerHeight:a,containerHeight:e,currentData:f,forecastData:v,forecastConeData:y,formatDatumValue:N.b,formatDatumOptions:i.formatOptions,height:t,previousData:b,showForecast:void 0!==i.computedForecastItem&&l,showSupplementaryLabel:s,showUsageLegendLabel:n.showUsageLegendLabel,units:u}))},this.getForecastData=(e,t="cost")=>{const{forecast:a,trend:s}=this.props,{currentComparison:r}=this.state,n="daily"===r?1:s.type;let o,i;if(t){const s=Object(F.cloneDeep)(a);if(s&&(s.data=[]),a&&e&&e.data){const r=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.value:0,o=e.data.filter(e=>e.values.length),i=o[o.length-1]?o[o.length-1].date:void 0;if(a&&a.data){const e=new Date(i),t=e.getMonth()+1;for(const r of a.data){const a=new Date(r.date),n=a.getMonth()+1;a>e&&t===n&&s.data.push(r)}}0===n&&s.data.unshift({date:i,values:[{date:i,cost:{confidence_max:{value:0},confidence_min:{value:0},total:{value:r,units:"USD"}},infrastructure:{confidence_max:{value:0},confidence_min:{value:0},total:{value:r,units:"USD"}},supplementary:{confidence_max:{value:0},confidence_min:{value:0},total:{value:r,units:"USD"}}}]})}o=Object(C.f)(s,n,t),i=Object(C.g)(s,n,t)}return{forecastData:o,forecastConeData:i}},this.getTrendChart=(e,t,a=!1,s=!1)=>{const{currentReport:r,details:n,previousReport:o,t:i,trend:c}=this.props,{forecastAuthorized:l}=this.state,u=this.getUnits(),h=i(c.titleKey,{units:i("units."+u)}),d=c.computedReportItem,p=c.computedReportItemValue,g=Object(C.h)(r,c.type,"date",d,p),f=Object(C.h)(o,c.type,"date",d,p),{forecastData:b,forecastConeData:v}=this.getForecastData(r,c.computedForecastItem);return m.a.createElement(O.i,{adjustContainerHeight:a,containerHeight:e,currentData:g,forecastData:b,forecastConeData:v,formatDatumValue:N.b,formatDatumOptions:c.formatOptions,height:t,previousData:f,showForecast:void 0!==c.computedForecastItem&&l,showSupplementaryLabel:s,showUsageLegendLabel:n.showUsageLegendLabel,title:h,units:u})},this.getUsageChart=(e,t=!1)=>{const{currentReport:a,previousReport:s,t:r,trend:n}=this.props,o=this.getUnits(),i=r(n.titleKey,{units:r("units."+o)}),c=Object(C.h)(a,n.type,"date","request"),l=Object(C.h)(s,n.type,"date","request"),u=Object(C.h)(a,n.type,"date","usage"),h=Object(C.h)(s,n.type,"date","usage");return m.a.createElement(O.j,{adjustContainerHeight:t,containerHeight:q.containerUsageHeight,currentRequestData:c,currentUsageData:u,formatDatumValue:N.b,formatDatumOptions:n.formatOptions,height:e,previousRequestData:l,previousUsageData:h,title:i})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:a,reportType:s,trend:r}=this.props,n=r.computedReportItem||"cost",o=r.computedReportItemValue||"total",i=this.getUnits();return m.a.createElement(O.f,{chartType:e,computedReportItem:n,computedReportItemValue:o,costLabel:this.getDetailsLabel(a.costKey,i),formatOptions:a.formatOptions,formatValue:N.b,report:t,reportType:s,requestLabel:this.getDetailsLabel(a.requestKey,i),showTooltip:a.showTooltip,showUnits:a.showUnits,showUsageFirst:a.showUsageFirst,units:a.units,usageFormatOptions:a.usageFormatOptions,usageLabel:this.getDetailsLabel(a.usageKey,i)})},this.getDetailsLabel=(e,t)=>{const{t:a}=this.props;return e?a(e,{units:a("units."+t)}):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?m.a.createElement(A.a,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,t:a}=this.props;return a("group_by.all",{groupBy:t(e)||""})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=q.containerAltHeight,chartAltHeight:t=q.chartAltHeight,currentReportFetchStatus:a,details:s}=this.props;return m.a.createElement(O.b,{detailsLink:this.getDetailsLink(),status:a,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,s.adjustContainerHeight))},this.getSubTitle=()=>{const{t:e}=this.props,t=new Date,a=R()(t),s=T()(t,"D"),r=T()(k()(t),"D");return e("aws_dashboard.widget_subtitle",{count:E()(t),endDate:s,month:a,startDate:r})},this.getTab=(e,t)=>{const{getIdKeyForTab:a,tabsReport:n,tabsReportFetchStatus:o}=this.props,i=a(e);return m.a.createElement(s.a,{eventKey:t,key:a(e)+"-tab",title:m.a.createElement(r.a,null,this.getTabTitle(e))},m.a.createElement("div",{style:G.tabItems},m.a.createElement(O.h,{idKey:i,key:i+"-items",report:n,status:o},({items:t})=>t.map(t=>this.getTabItem(e,t)))))},this.getTabItem=(e,t)=>{const{availableTabs:a,details:s,getIdKeyForTab:r,tabsReport:n,topItems:o,trend:i}=this.props,{activeTabKey:c}=this.state,l=r(e),u=r(a[c]),h=i.computedReportItem||"cost",d=i.computedReportItemValue||"total";let p;const g=n&&n.meta&&n.meta.total;return"usage"===h?g&&n.meta.total.usage&&(p=n.meta.total.usage.value):g&&n.meta.total[h]&&n.meta.total[h][d]&&(p=n.meta.total[h][d].value),u===l?m.a.createElement(O.g,{key:t.id+"-item",formatOptions:o.formatOptions,formatValue:N.b,label:t.label?t.label.toString():"",totalValue:p,units:s.units?s.units:this.getUnits(),value:t[h][d].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return m.a.createElement(o.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))},this.getTabTitle=e=>{const{getIdKeyForTab:t,t:a}=this.props;return a("group_by.top",{groupBy:t(e)||""})},this.getTitle=()=>{const{t:e,titleKey:t}=this.props,a=new Date,s=R()(a);return e(t,{endDate:T()(a,"Do"),month:s,startDate:T()(k()(a),"Do")})},this.getUnits=()=>{const{currentReport:e,details:t,trend:a}=this.props,s=a.computedReportItem||"cost",r=a.computedReportItemValue||"total";if(t.units)return t.units;let n;const o=e&&e.meta&&e.meta.total;if("usage"===s){n=o&&e.meta.total.usage?Object(N.c)(e.meta.total.usage.units):""}else{n=o&&e.meta.total[s]&&e.meta.total[s][r]?Object(N.c)(e.meta.total[s][r].units):""}return n},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:a}=this.props;return m.a.createElement(O.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(q.containerTrendHeight,q.chartHeight,a.adjustContainerHeight),Boolean(e)&&m.a.createElement("div",{style:G.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleInsightsNavClick=()=>{const{details:e}=this.props;e.appNavId&&insights.chrome.appNavClick({id:e.appNavId,secondaryNav:!0})},this.handleTabClick=(e,t)=>{const{availableTabs:a,id:s,updateTab:r}=this.props;r(s,a[t]),this.setState({activeTabKey:t})}}componentDidMount(){const{availableTabs:e,fetchForecasts:t,fetchReports:a,id:s,trend:r,updateTab:n,widgetId:o}=this.props;e&&n(s,e[0]),a&&a(o),void 0!==r.computedForecastItem&&(async()=>{const e=window.insights;if(e&&e.chrome&&e.chrome.auth&&e.chrome.auth.getUser){const t=(await e.chrome.auth.getUser()).identity.user.username;return"cost-demo"===t||"insights-qa"===t}return!1})().then(e=>{e&&t&&t(o),this.setState({forecastAuthorized:e})})}render(){const{details:e}=this.props;return e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}var Y=a(64),$=a(23);const X=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},J=Object(y.a)((e,{widgetId:t})=>{const a=_.c.selectWidget(e,t),s=_.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:X,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),Z={fetchForecasts:_.a.fetchWidgetForecasts,fetchReports:_.a.fetchWidgetReports,updateTab:_.a.changeWidgetTab},ee=Object(b.a)()(Object(v.connect)(J,Z)(B)),te=Object(y.a)((e,t)=>({DashboardWidget:ee,selectWidgets:_.c.selectWidgets(e),widgets:_.c.selectCurrentWidgets(e)}));var ae=Object(b.a)()(Object(v.connect)(te,{})(f)),se=a(339);const re=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},ne=Object(y.a)((e,{widgetId:t})=>{const a=se.c.selectWidget(e,t),s=se.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:re,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),forecastFetchStatus:Y.c.selectForecastFetchStatus(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),oe={fetchForecasts:se.a.fetchWidgetForecasts,fetchReports:se.a.fetchWidgetReports,updateTab:se.a.changeWidgetTab},ie=Object(b.a)()(Object(v.connect)(ne,oe)(B)),ce=Object(y.a)((e,t)=>({DashboardWidget:ie,selectWidgets:se.c.selectWidgets(e),widgets:se.c.selectCurrentWidgets(e)}));var le=Object(b.a)()(Object(v.connect)(ce,{})(f)),ue=a(340);const he=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},de=Object(y.a)((e,{widgetId:t})=>{const a=ue.c.selectWidget(e,t),s=ue.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:he,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),pe={fetchForecasts:ue.a.fetchWidgetForecasts,fetchReports:ue.a.fetchWidgetReports,updateTab:ue.a.changeWidgetTab},ge=Object(b.a)()(Object(v.connect)(de,pe)(B)),me=Object(y.a)((e,t)=>({DashboardWidget:ge,selectWidgets:ue.c.selectWidgets(e),widgets:ue.c.selectCurrentWidgets(e)}));var fe=Object(b.a)()(Object(v.connect)(me,{})(f)),be=a(341);const ve=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},ye=Object(y.a)((e,{widgetId:t})=>{const a=be.c.selectWidget(e,t),s=be.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:ve,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),_e={fetchForecasts:be.a.fetchWidgetForecasts,fetchReports:be.a.fetchWidgetReports,updateTab:be.a.changeWidgetTab},De=Object(b.a)()(Object(v.connect)(ye,_e)(B)),Ce=Object(y.a)((e,t)=>({DashboardWidget:De,selectWidgets:be.c.selectWidgets(e),widgets:be.c.selectCurrentWidgets(e)}));var Oe=Object(b.a)()(Object(v.connect)(Ce,{})(f)),je=a(342);const Te=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},Se=Object(y.a)((e,{widgetId:t})=>{const a=je.c.selectWidget(e,t),s=je.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Te,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),Ee={fetchReports:je.a.fetchWidgetReports,updateTab:je.a.changeWidgetTab},we=Object(b.a)()(Object(v.connect)(Se,Ee)(B)),Re=Object(y.a)((e,t)=>({DashboardWidget:we,selectWidgets:je.c.selectWidgets(e),widgets:je.c.selectCurrentWidgets(e)}));var Ie=Object(b.a)()(Object(v.connect)(Re,{})(f)),ke=a(229);const Fe=e=>{switch(e){case"accounts":return"account";case"regions":return"region";case"services":return"service"}},Ae=Object(y.a)((e,{widgetId:t})=>{const a=ke.c.selectWidget(e,t),s=ke.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Fe,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),Ne={fetchForecasts:ke.a.fetchWidgetForecasts,fetchReports:ke.a.fetchWidgetReports,updateTab:ke.a.changeWidgetTab},Le=Object(b.a)()(Object(v.connect)(Ae,Ne)(B)),xe=Object(y.a)((e,t)=>({DashboardWidget:Le,selectWidgets:ke.c.selectWidgets(e),widgets:ke.c.selectCurrentWidgets(e)}));var Pe=Object(b.a)()(Object(v.connect)(xe,{})(f)),We=a(343);const ze=250,He=250,Ue=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Me=Object(y.a)((e,{widgetId:t})=>{const a=We.c.selectWidget(e,t),s=We.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Ue,chartAltHeight:ze,containerAltHeight:He,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),Ve={fetchForecasts:We.a.fetchWidgetForecasts,fetchReports:We.a.fetchWidgetReports,updateTab:We.a.changeWidgetTab},Ke=Object(b.a)()(Object(v.connect)(Me,Ve)(B)),Qe=Object(y.a)((e,t)=>({DashboardWidget:Ke,selectWidgets:We.c.selectWidgets(e),widgets:We.c.selectCurrentWidgets(e)}));var qe=Object(b.a)()(Object(v.connect)(Qe,{})(f)),Ge=a(344);const Be=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Ye=Object(y.a)((e,{widgetId:t})=>{const a=Ge.c.selectWidget(e,t),s=Ge.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Be,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),forecast:Y.c.selectForecast(e,a.forecastPathsType,a.forecastType,s.forecast),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),$e={fetchForecasts:Ge.a.fetchWidgetForecasts,fetchReports:Ge.a.fetchWidgetReports,updateTab:Ge.a.changeWidgetTab},Xe=Object(b.a)()(Object(v.connect)(Ye,$e)(B)),Je=Object(y.a)((e,t)=>({DashboardWidget:Xe,selectWidgets:Ge.c.selectWidgets(e),widgets:Ge.c.selectCurrentWidgets(e)}));var Ze=Object(b.a)()(Object(v.connect)(Je,{})(f)),et=a(345);const tt=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},at=Object(y.a)((e,{widgetId:t})=>{const a=et.c.selectWidget(e,t),s=et.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:tt,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.current),currentReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.current),previousReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.previous),tabsReport:$.c.selectReport(e,a.reportPathsType,a.reportType,s.tabs),tabsReportFetchStatus:$.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,s.tabs)})}),st={fetchReports:et.a.fetchWidgetReports,updateTab:et.a.changeWidgetTab},rt=Object(b.a)()(Object(v.connect)(at,st)(B)),nt=Object(y.a)((e,t)=>({DashboardWidget:rt,selectWidgets:et.c.selectWidgets(e),widgets:et.c.selectCurrentWidgets(e)}));var ot=Object(b.a)()(Object(v.connect)(nt,{})(f)),it=a(766),ct=a(786),lt=a(324),ut=a(298),ht=a(683),dt=a.n(ht),pt=a(653),gt=a.n(pt);const mt={infoIcon:{fontSize:dt.a.value},infoTitle:{fontWeight:"bold"},perspective:{marginTop:gt.a.value},tabs:{marginTop:gt.a.value}},ft={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:V.a.var}};class bt extends m.a.Component{constructor(){super(...arguments),this.defaultState={isPerspectiveOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e,t:t}=this.props;return e.map(e=>m.a.createElement(L.a,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label)))},this.getCurrentLabel=()=>{const{currentItem:e,options:t,t:a}=this.props;let s="";for(const r of t)if(e===r.value){s=a(r.label);break}return s},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isPerspectiveOpen:!this.state.isPerspectiveOpen})},this.handleToggle=e=>{this.setState({isPerspectiveOpen:e})}}render(){const{t:e}=this.props,{isPerspectiveOpen:t}=this.state,a=this.getDropDownItems();return m.a.createElement("div",{style:ft.perspectiveSelector},m.a.createElement("label",{style:ft.perspectiveLabel},e("overview.perspective.label")),m.a.createElement(x.a,{onSelect:this.handleSelect,toggle:m.a.createElement(P.a,{onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:t,dropdownItems:a}))}}const vt=Object(b.a)()(bt),yt=e=>{switch(e){case"infrastructure":return"infrastructure";case"ocp":return"ocp"}},_t=[{label:"overview.perspective.all",value:"all"},{label:"overview.perspective.supplementary",value:"supplementary"}],Dt=[{label:"overview.perspective.all_cloud",value:"all_cloud"}],Ct=[{label:"overview.perspective.aws",value:"aws"}],Ot=[{label:"overview.perspective.aws_cloud",value:"aws_cloud"}],jt=[{label:"overview.perspective.azure",value:"azure"}],Tt=[{label:"overview.perspective.azure_cloud",value:"azure_cloud"}],St=[{label:"overview.perspective.gcp",value:"gcp"}],Et=[{label:"overview.perspective.ocp_usage",value:"ocp_usage"}];class wt extends m.a.Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,isAwsAccessAllowed:!1,isAzureAccessAllowed:!1,isGcpAccessAllowed:!1,isOcpAccessAllowed:!1},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const e=[],t=this.isAwsAvailable(),a=this.isAzureAvailable(),s=this.isGcpAvailable(),r=this.isOcpAvailable(),n=this.isOcpCloudAvailable();return r&&e.push({contentRef:m.a.createRef(),tab:"ocp"}),(t||a||s||n)&&e.push({contentRef:m.a.createRef(),tab:"infrastructure"}),e},this.getCurrentTab=()=>{const{activeTabKey:e}=this.state,t=this.isAwsAvailable(),a=this.isAzureAvailable(),s=this.isGcpAvailable(),r=this.isOcpAvailable(),n=this.isOcpCloudAvailable();return r&&!(t||a||s||n)?"ocp":!r&&(t||a||s||n)?"infrastructure":0===e?"ocp":"infrastructure"},this.getDefaultInfrastructurePerspective=()=>{const e=this.isAwsAvailable(),t=this.isAzureAvailable(),a=this.isGcpAvailable();return this.isOcpAvailable()?"all_cloud":e?"aws":t?"azure":a?"gcp":void 0},this.getDefaultOcpPerspective=()=>{if(this.isOcpAvailable())return"all"},this.getPerspective=()=>{const{currentInfrastructurePerspective:e,currentOcpPerspective:t}=this.state,a=this.isAwsAvailable(),s=this.isAzureAvailable(),r=this.isGcpAvailable(),n=this.isOcpAvailable();if(!(a||s||r||n))return null;const o=[];"infrastructure"===this.getCurrentTab()?(n&&o.push(...Dt),a&&o.push(...Ct),n&&a&&o.push(...Ot),r&&o.push(...St),s&&o.push(...jt),n&&s&&o.push(...Tt),n&&o.push(...Et)):o.push(..._t);const i="infrastructure"===this.getCurrentTab()?e:t;return m.a.createElement(vt,{currentItem:i||o[0].value,onItemClicked:this.handlePerspectiveClick,options:o})},this.getTab=(e,t,a)=>m.a.createElement(s.a,{eventKey:a,key:yt(e)+"-tab",tabContentId:"tab-"+a,tabContentRef:t,title:m.a.createElement(r.a,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map((e,t)=>m.a.createElement(n.a,{eventKey:t,key:yt(e.tab)+"-tabContent",id:"tab-"+t,ref:e.contentRef},this.getTabItem(e.tab,t))),this.getTabItem=(e,t)=>{const{activeTabKey:a,currentInfrastructurePerspective:s,currentOcpPerspective:r}=this.state,n=m.a.createElement(m.a.Fragment,null);if(a!==t)return n;const o=yt(e);return"infrastructure"===o?"all_cloud"===s?m.a.createElement(Pe,null):"aws"===s?m.a.createElement(le,null):"aws_cloud"===s?m.a.createElement(ae,null):"gcp"===s?m.a.createElement(Ie,null):"azure"===s?m.a.createElement(Oe,null):"azure_cloud"===s?m.a.createElement(fe,null):"ocp_usage"===s?m.a.createElement(ot,null):m.a.createElement(Pe,null):"ocp"===o?"all"===r?m.a.createElement(qe,null):"supplementary"===r?m.a.createElement(Ze,null):m.a.createElement(qe,null):n},this.getTabs=e=>{const{activeTabKey:t}=this.state;return m.a.createElement(o.a,{activeKey:t,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e.tab,e.contentRef,t)))},this.getTabTitle=e=>{const{t:t}=this.props;return"infrastructure"===e?t("overview.infrastructure"):"ocp"===e?t("overview.ocp"):void 0},this.handlePerspectiveClick=e=>{const t=this.getCurrentTab();this.setState(Object.assign(Object.assign({},"infrastructure"===t&&{currentInfrastructurePerspective:e}),"ocp"===t&&{currentOcpPerspective:e}))},this.handleTabClick=(e,t)=>{const{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t})},this.isAwsAvailable=()=>{const{awsProviders:e}=this.props,{isAwsAccessAllowed:t}=this.state;return t&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isAzureAvailable=()=>{const{azureProviders:e}=this.props,{isAzureAccessAllowed:t}=this.state;return t&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isGcpAvailable=()=>{const{gcpProviders:e}=this.props,{isGcpAccessAllowed:t}=this.state;return t&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isOcpAvailable=()=>{const{ocpProviders:e}=this.props,{isOcpAccessAllowed:t}=this.state;return t&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isOcpCloudAvailable=()=>this.isAwsAvailable()&&this.isOcpAvailable()}componentDidMount(){(async()=>{const e=await Object(ut.c)(),t=await Object(ut.f)();return{isAwsAccessAllowed:e&&(t||await Object(ut.a)()),isAzureAccessAllowed:e&&(t||await Object(ut.b)()),isGcpAccessAllowed:e&&(t||await Object(ut.d)()),isOcpAccessAllowed:e&&(t||await Object(ut.e)())}})().then(({isAwsAccessAllowed:e,isAzureAccessAllowed:t,isGcpAccessAllowed:a,isOcpAccessAllowed:s})=>{this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective(),isAwsAccessAllowed:e,isAzureAccessAllowed:t,isGcpAccessAllowed:a,isOcpAccessAllowed:s})})}componentDidUpdate(e){const{awsProviders:t,azureProviders:a,gcpProviders:s,ocpProviders:r}=this.props;e.awsProviders===t&&e.azureProviders===a&&e.gcpProviders===s&&e.ocpProviders===r||this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}render(){const{awsProvidersFetchStatus:e,azureProvidersFetchStatus:t,gcpProvidersFetchStatus:a,ocpProvidersFetchStatus:s,t:r}=this.props,n=this.getAvailableTabs(),o=1===e||1===t||1===a||1===s,h=!this.isAwsAvailable()&&2===e,d=!this.isAzureAvailable()&&2===t,p=!this.isGcpAvailable()&&2===a,g=!this.isOcpAvailable()&&2===s,f=h&&d&&p&&g,b=r("navigation.overview");return f?m.a.createElement(ct.a,{title:b}):o?m.a.createElement(it.a,{title:b}):m.a.createElement(m.a.Fragment,null,m.a.createElement("section",{className:"pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light headerOverride}"},m.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},m.a.createElement(i.a,{headingLevel:"h2",size:"2xl"},r("overview.title"),m.a.createElement("span",{style:mt.infoIcon},m.a.createElement(c.a,{"aria-label":r("ocp_details.supplementary_aria_label"),enableFlip:!0,bodyContent:m.a.createElement(m.a.Fragment,null,m.a.createElement("p",{style:mt.infoTitle},r("overview.ocp_cloud")),m.a.createElement("p",null,r("overview.ocp_cloud_desc")),m.a.createElement("br",null),m.a.createElement("p",{style:mt.infoTitle},r("overview.ocp")),m.a.createElement("p",null,r("overview.ocp_desc")),m.a.createElement("br",null),m.a.createElement("p",{style:mt.infoTitle},r("overview.gcp")),m.a.createElement("p",null,r("overview.gcp_desc")),m.a.createElement("br",null),m.a.createElement("p",{style:mt.infoTitle},r("overview.aws")),m.a.createElement("p",null,r("overview.aws_desc")),m.a.createElement("br",null),m.a.createElement("p",{style:mt.infoTitle},r("overview.azure")),m.a.createElement("p",null,r("overview.azure_desc")))},m.a.createElement(l.a,{variant:l.c.plain},m.a.createElement(u.OutlinedQuestionCircleIcon,null)))))),m.a.createElement("div",{style:mt.tabs},this.getTabs(n)),m.a.createElement("div",{style:mt.perspective},this.getPerspective())),m.a.createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},this.getTabContent(n)))}}const Rt=Object(y.a)((e,t)=>{const a=Object(h.a)(lt.a),s=lt.g.selectProviders(e,"aws",a),r=lt.g.selectProvidersFetchStatus(e,"aws",a),n=Object(h.a)(lt.b),o=lt.g.selectProviders(e,"azure",n),i=lt.g.selectProvidersFetchStatus(e,"azure",n),c=Object(h.a)(lt.c),l=lt.g.selectProviders(e,"gcp",c),u=lt.g.selectProvidersFetchStatus(e,"gcp",c),d=Object(h.a)(lt.d);return{awsProviders:s,awsProvidersFetchStatus:r,awsProvidersQueryString:a,azureProviders:o,azureProvidersFetchStatus:i,azureProvidersQueryString:n,gcpProviders:l,gcpProvidersFetchStatus:u,gcpProvidersQueryString:c,ocpProviders:lt.g.selectProviders(e,"ocp",d),ocpProvidersFetchStatus:lt.g.selectProvidersFetchStatus(e,"ocp",d),ocpProvidersQueryString:d}});var It=Object(b.a)()(Object(v.connect)(Rt)(wt));t.default=It},734:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));const s=e=>{const t=e?e.toLowerCase():"";switch(t){case"usd":case"gb":case"gb-hours":case"gb-mo":case"core-hours":case"hrs":case"tag-mo":case"vm-hours":return t;default:return""}},r=(e,t,a={})=>{const r=s(t),l=e||0;switch(r){case"usd":return o(l,r,a);case"gb":case"gb-hours":case"gb-mo":case"tag-mo":case"vm-hours":return i(l,r,a);case"core-hours":case"hrs":return c(l,r,a);default:return n(l,r,a)}},n=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a}),o=(e,t,{fractionDigits:a=2}={})=>{let s=e;return e||(s=0),s.toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:a,maximumFractionDigits:a})},i=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a}),c=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a})},735:function(e,t,a){"use strict";a.d(t,"f",(function(){return y})),a.d(t,"g",(function(){return _})),a.d(t,"h",(function(){return D})),a.d(t,"b",(function(){return S})),a.d(t,"c",(function(){return E})),a.d(t,"d",(function(){return w})),a.d(t,"a",(function(){return R})),a.d(t,"e",(function(){return I}));var s=a(830),r=a.n(s),n=a(745),o=a.n(n),i=a(737),c=a.n(i),l=a(831),u=a.n(l),h=a(768),d=a.n(h),p=a(131),g=a(755);function m({forecast:e,sortDirection:t=0,sortKey:a="date"}){return Object(g.a)(function({forecast:e}){if(!e)return[];const t=new Map,a=e=>{e&&e.values&&e.values.forEach(e=>{const a=e.date,s=t.get(a);s?t.set(a,Object.assign(Object.assign({},s),{date:a,cost:f(e,"cost",s),infrastructure:f(e,"infrastructure",s),supplementary:f(e,"supplementary",s)})):t.set(a,{date:a,cost:f(e,"cost"),infrastructure:f(e,"infrastructure"),supplementary:f(e,"supplementary")})});for(const t in e)if(e[t]instanceof Array)return e[t].forEach(a)};e&&e.data&&e.data.forEach(a);return Array.from(t.values())}({forecast:e,sortDirection:t,sortKey:a}),{key:a,direction:t})}function f(e,t,a){return{confidence_max:{value:a?a[t].confidence_max.value:0+e[t]&&e[t].confidence_max?e[t].confidence_max.value:0,units:e[t]&&e[t].confidence_max?e[t].confidence_max.units:"USD"},confidence_min:{value:a?a[t].confidence_min.value:0+e[t]&&e[t].confidence_min?e[t].confidence_min.value:0,units:e[t]&&e[t].confidence_min?e[t].confidence_min.units:"USD"},pvalues:{value:e[t]&&e[t].pvalues?Number(e[t].pvalues.value):0,units:e[t]&&e[t].pvalues?e[t].pvalues.units:null},rsquared:{value:e[t]&&e[t].rsquared?Number(e[t].rsquared.value):0,units:e[t]&&e[t].rsquared?e[t].rsquared.units:null},total:{value:a?a[t].total.value:0+e[t]&&e[t].total?e[t].total.value:0,units:e[t]&&e[t].total?e[t].total.units:"USD"}}}var b=a(742),v=a(734);function y(e,t=1,a="cost",s="total"){if(!e)return[];const r=m({forecast:e,sortKey:"date",sortDirection:1});let n;return n=1===t||2===t?r.map(e=>C(e[a][s].value,e)):r.reduce((e,t)=>{const r=e.length?e[e.length-1].y:0;return[...e,C(r+t[a][s].value,t)]},[]),T(n,t)}function _(e,t=1,a="cost",s="total"){if(!e)return[];const r=m({forecast:e,sortKey:"date",sortDirection:1});let n;return n=1===t||2===t?r.map(e=>O(e[a].confidence_max.value,e[a].confidence_min.value,e)):r.reduce((e,t)=>{const r=e.length?e[e.length-1].y:t[a][s].value,n=e.length?e[e.length-1].y0:t[a][s].value;return[...e,O(r+t[a].confidence_max.value,n+t[a].confidence_min.value,t)]},[]),T(n,t)}function D(e,t=1,a="date",s="cost",r="total"){if(!e)return[];const n={idKey:a,report:e,sortKey:"id",sortDirection:1},o=Object(b.a)(n);let i;return i=1===t||2===t?o.map(e=>j(e[s][r]?e[s][r].value:e[s].value,e,a,s,r)):o.reduce((e,t)=>{const n=e.length?e[e.length-1].y:0,o=t[s][r]?t[s][r].value:t[s].value;return[...e,j(n+o,t,a,s,r)]},[]),"date"===a?T(i,t):i}function C(e,t,a="cost",s="total"){const r=c()(t.date),n=F(e)?parseFloat(e.toFixed(2)):k(e)?e:0;return{x:r,y:null===e?null:n,key:t.date,units:t[a]&&t[a][s]?t[a][s].units:void 0}}function O(e,t,a,s="cost",r="total"){const n=c()(a.date),o=F(e)?parseFloat(e.toFixed(2)):k(e)?e:0,i=F(t)?parseFloat(t.toFixed(2)):k(t)?t:0;return{x:n,y:null===e?null:o,y0:null===t?null:i,key:a.date,units:a[s]&&a[s][r]?a[s][r].units:void 0}}function j(e,t,a="date",s="cost",r="total"){const n="date"===a?c()(t.id):t.label,o=F(e)?parseFloat(e.toFixed(2)):k(e)?e:0;return{x:n,y:null===e?null:o,key:t.id,units:t[s]?t[s][r]?t[s][r].units:t[s].units:void 0}}function T(e,t=1){const a=[];if(!e||0===e.length)return a;const s=new Date(e[0].key+"T00:00:00"),n=new Date(e[e.length-1].key+"T00:00:00");let i=d()(s);for(let e=i.getDate();e<s.getDate();e++){i.setDate(e);const t=o()(i,"YYYY-MM-DD");a.push(j(null,{id:t},"date",null))}a.push(...e),i=new Date(n);for(let e=i.getDate()+1;e<=r()(n).getDate();e++){i.setDate(e);const t=o()(i,"YYYY-MM-DD");a.push(j(null,{id:t},"date",null))}return function(e,t=1){const a=[];if(!e||0===e.length)return a;const s=new Date(e[0].key+"T00:00:00"),n=new Date(e[e.length-1].key+"T00:00:00"),i=d()(s);let l;for(let s=i.getDate();s<=r()(n).getDate();s++){i.setDate(s);const r=o()(i,"YYYY-MM-DD"),n=e.find(e=>e.key===r);n?a.push(n):l&&a.push(Object.assign(Object.assign({},l),{key:r,x:c()(r)})),n&&(l=1===t?{key:r,x:c()(r),y:null}:n)}return a}(a,t)}function S(e,t=!0,a=!1,s=0){const[n,o]=function(e,t=0){if(!e||!e.length){const e=new Date;t&&e.setMonth(e.getMonth()-t);return[d()(e),e]}return[new Date(e[0].key+"T00:00:00"),new Date(e[e.length-1].key+"T00:00:00")]}(e,s);if(t&&n.setDate&&n.setDate(1),a&&n.setDate){const e=r()(n).getDate();o.setDate(e)}return[n,o]}function E(e){let t=0,a=0;return e&&e.length&&e.forEach(e=>{const s=void 0!==e.y0?Math.max(e.y,e.y0):e.y,r=void 0!==e.y0?Math.min(e.y,e.y0):e.y;s>t&&(t=s),(0===a||r<a)&&null!==r&&(a=r)}),{max:t,min:a}}function w(e){return function(t,a=null,s={}){const r=Object(v.c)(a);switch(r){case"core-hours":case"hrs":case"gb":case"gb-hours":case"gb-mo":case"vm-hours":return p.a.t("unit_tooltips."+r,{value:""+e(t,a,s)});default:return""+e(t,a,s)}}}function R(e,t="chart.cost_legend_label",a=!1,s=!1,r=0){const[n,i]=S(e,a,s,r);return p.a.t(t,{count:c()(i),endDate:o()(i,"D"),month:Number(o()(n,"M"))-1,startDate:o()(n,"D"),year:u()(i)})}function I(e,t="chart.usage_legend_label",a=!1,s=!1,r=0){return R(e,t,a,s,r)}function k(e){return Number(e)===e&&e%1==0}function F(e){return Number(e)===e&&e%1!=0}},738:function(e,t,a){},740:function(e,t,a){"use strict";var s=a(130),r=a(21);const n={padding:8};var o={area:Object.assign({},n),axis:Object.assign({},n),bar:Object.assign({},n),boxplot:Object.assign({},n),candlestick:Object.assign({},n),chart:Object.assign({},n),errorbar:Object.assign({},n),group:Object.assign({},n),legend:{},line:Object.assign({},n),pie:Object.assign({},n),scatter:Object.assign({},n),stack:Object.assign({},n),tooltip:{},voronoi:Object.assign({},n)};const i=(()=>Object(s.k)(r.q.default,r.r.default,o))();t.a=i},742:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var s=a(755),r=a(31);function n({idKey:e,report:t,sortDirection:a=0,sortKey:r="date"}){return Object(s.a)(c({idKey:e,report:t,sortDirection:a,sortKey:r}),{key:r,direction:a})}function o(e,t,a){return{markup:{value:a?a[t].markup.value:0+e[t]&&e[t].markup?e[t].markup.value:0,units:e[t]&&e[t].markup?e[t].markup.units:"USD"},raw:{value:a?a[t].raw.value:0+e[t]&&e[t].raw?e[t].raw.value:0,units:e[t]&&e[t].raw?e[t].raw.units:"USD"},total:{value:a?a[t].total.value:0+e[t]&&e[t].total?Number(e[t].total.value):0,units:e[t]&&e[t].total?e[t].total.units:null},usage:{value:a?a[t].usage.value:0+e[t]&&e[t].usage?Number(e[t].usage.value):0,units:e[t]&&e[t].usage?e[t].usage.units:null}}}function i(e,t){return{capacity:{value:t?t.capacity.value:0+e.capacity?e.capacity.value:0,units:e.capacity?e.capacity.units:"Core-Hours"},limit:{value:t?t.limit.value:0+e.limit?e.limit.value:0,units:e.limit?e.limit.units:"Core-Hours"},request:{value:t?t.request.value:0+e.request?e.request.value:0,units:e.request?e.request.units:"Core-Hours"},usage:{value:t?t.usage.value:0+e.usage?e.usage.value:0,units:e.usage?e.usage.units:"Core-Hours"}}}function c({report:e,idKey:t}){if(!e)return[];const a=new Map,s=n=>{if(n&&n.values){const s=n.type;n.values.forEach(n=>{const c="date"!==t&&"cluster"!==t&&n.cluster?"-"+n.cluster:"";let l="org_entities"===t?n.org_unit_id:n[t];void 0===l&&(l=n.id||n.date);const u=`${l}${c}`,h=n.clusters&&n.clusters.length>0?n.clusters[0]:void 0,d=h||n.cluster,p=n.clusters?n.clusters:[],g=n.date,m=n.delta_percent?n.delta_percent:0,f=n.delta_value?n.delta_value:0,b=n.source_uuid?n.source_uuid:[];let v;const y=function({idKey:e,report:t,value:a}){let s=String(e);if(t.meta&&t.meta.group_by){const n=t.meta.group_by;for(const t of Object.keys(n))if(t.indexOf(r.i)){const t=r.i+e;a.hasOwnProperty(t)&&(s=t)}}return s}({report:e,idKey:t,value:n});v="org_entities"===y&&n.alias?n.alias:"account"===y&&n.account_alias?n.account_alias:"cluster"===y&&h?h:n[y]instanceof Object?n[y].value:n[y],void 0===v&&(v=n.alias?n.alias:n.id);const _=a.get(u);_?a.set(u,Object.assign(Object.assign(Object.assign({},_),i(n,_)),{cluster:d,clusters:p,date:g,delta_percent:m,delta_value:f,cost:o(n,"cost",_),id:l,infrastructure:o(n,"infrastructure",_),label:v,source_uuid:b,supplementary:o(n,"supplementary",_),type:s})):a.set(u,Object.assign(Object.assign({},i(n)),{cluster:d,clusters:p,cost:o(n,"cost"),date:g,delta_percent:m,delta_value:f,id:l,infrastructure:o(n,"infrastructure"),label:v,source_uuid:b,supplementary:o(n,"supplementary"),type:s}))})}for(const e in n)if(n[e]instanceof Array)return n[e].forEach(s)};return e&&e.data&&e.data.forEach(s),Array.from(a.values())}},752:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(401),r=a(282),n=a(347),o=a(402),i=a(1),c=a.n(i),l=a(715);const u=Object(l.a)()(({t:e})=>{const t=e("loading_state.sources_title"),a=e("loading_state.sources_desc");return c.a.createElement(s.a,{variant:s.b.large,className:"pf-m-redhat-font"},c.a.createElement(r.a,{size:"lg"}),c.a.createElement(n.a,{headingLevel:"h5",size:"lg"},t),c.a.createElement(o.a,null,a))})},754:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(241);function r(e){return Object(s.stringify)(e,{encode:!1,indices:!1})}},755:function(e,t,a){"use strict";function s(e,t){if("string"==typeof e)return e;return e[t.key]}function r(e,t){const{direction:a=0}=t||{};return[...e].sort((e,r)=>{const n=s(0===a?e:r,t),o=s(0===a?r:e,t);return n>o?-1:n<o?1:0})}a.d(t,"a",(function(){return r}))},756:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(776);var s=a(682),r=a(1),n=a.n(r);const o=()=>n.a.createElement("span",{className:"emptyValueContainer"},n.a.createElement(s.MinusIcon,null))},758:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m})),a.d(t,"f",(function(){return y})),a.d(t,"g",(function(){return C})),a.d(t,"h",(function(){return T})),a.d(t,"c",(function(){return se})),a.d(t,"d",(function(){return ue})),a.d(t,"e",(function(){return pe})),a.d(t,"i",(function(){return fe})),a.d(t,"j",(function(){return _e}));a(773);var s=a(178),r=a(391),n=a(347),o=a(389),i=a(390),c=a(741),l=a(1),u=a.n(l),h=a(715);const d=Object(h.a)()(({children:e,detailsLink:t,title:a,subTitle:l,status:h})=>u.a.createElement(s.a,{className:"reportSummary"},u.a.createElement(r.a,null,u.a.createElement(n.a,{headingLevel:"h2",size:"lg"},a),Boolean(l)&&u.a.createElement("p",{className:"subtitle"},l)),u.a.createElement(o.a,null,1===h?u.a.createElement(u.a.Fragment,null,u.a.createElement(c.Skeleton,{size:"xs"}),u.a.createElement(c.Skeleton,{className:"chartSkeleton",size:"md"}),u.a.createElement(c.Skeleton,{size:"sm"}),u.a.createElement(c.Skeleton,{className:"legendSkeleton",size:"xs"})):e),Boolean(t)&&u.a.createElement(i.a,null,t)));a(774);var p=a(425),g=a(426);const m=Object(h.a)()(({children:e,detailsLink:t,status:a,subTitle:l,tabs:h,title:d})=>u.a.createElement(s.a,{className:"reportSummary"},u.a.createElement(p.a,{hasGutter:!0},u.a.createElement(g.a,{xl:8},u.a.createElement("div",{className:"cost"},u.a.createElement(r.a,null,u.a.createElement(n.a,{headingLevel:"h2",size:"lg"},d),Boolean(l)&&u.a.createElement("p",{className:"subtitle"},l)),u.a.createElement(o.a,null,1===a?u.a.createElement(u.a.Fragment,null,u.a.createElement(c.Skeleton,{size:"xs"}),u.a.createElement(c.Skeleton,{className:"chartSkeleton",size:"md"}),u.a.createElement(c.Skeleton,{size:"sm"}),u.a.createElement(c.Skeleton,{className:"legendSkeleton",size:"xs"})):e))),u.a.createElement(g.a,{xl:4},u.a.createElement("div",{className:"tops"},1!==a&&u.a.createElement(u.a.Fragment,null,Boolean(h)&&u.a.createElement(o.a,null,h),Boolean(t)&&u.a.createElement(i.a,null,t)))))));a(775);var f=a(86),b=a(756),v=a(734);const y=Object(h.a)()(({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:s,formatValue:r,formatOptions:n,report:o,requestFormatOptions:i,requestLabel:c,reportType:l,showTooltip:h=!1,showUnits:d=!1,showUsageFirst:p=!1,t:g,units:m,usageFormatOptions:y,usageLabel:_})=>{let D=u.a.createElement(b.a,null),C=u.a.createElement(b.a,null),O=u.a.createElement(b.a,null),j=u.a.createElement(b.a,null),T=u.a.createElement(b.a,null);const S=o&&o.meta&&o.meta.total,E=S&&o.meta.total.cost&&o.meta.total.cost.total,w=S&&o.meta.total.count,R=S&&o.meta.total.supplementary&&o.meta.total.supplementary.total&&o.meta.total.supplementary.total.value,I=S&&o.meta.total.infrastructure&&o.meta.total.infrastructure[a]&&o.meta.total.infrastructure[a].value,k=S&&o.meta.total.request,F=S&&o.meta.total.usage;S&&(D=r(E?o.meta.total.cost.total.value:0,E?o.meta.total.cost.total.units:"USD",n),C=r(R?o.meta.total.supplementary.total.value:0,R?o.meta.total.supplementary.total.units:"USD",n),O=r(I?o.meta.total.infrastructure[a].value:0,I?o.meta.total.infrastructure[a].units:"USD",n),j=r(k?o.meta.total.request.value:0,k?o.meta.total.request.units:"",i?y:n),T=F&&o.meta.total.usage.value>=0?r(F?o.meta.total.usage.value:0,F?o.meta.total.usage.units:"",y||n):r(F?o.meta.total.usage:0,w?o.meta.total.count.units:"",y||n));const A=(e=!1)=>{let a=D;"infrastructure"===t?a=O:"supplementary"===t&&(a=C);const r=e?"Alt":"";return u.a.createElement("div",{className:"valueContainer"},h?u.a.createElement(f.a,{content:g("dashboard.total_cost_tooltip",{infrastructureCost:O,supplementaryCost:C}),enableFlip:!0},u.a.createElement("div",{className:"value"+r},a)):u.a.createElement("div",{className:"value"+r},a),u.a.createElement("div",{className:"text"},u.a.createElement("div",null,s)))},N=()=>{if(!_)return null;const e=k?o.meta.total.request.units:"",t=Object(v.c)(e),a=g("units."+t);return u.a.createElement("div",{className:"valueContainer"},u.a.createElement("span",{className:"value"},j),Boolean(d&&(m||k&&o.meta.total.request.value>=0))&&u.a.createElement("span",{className:"units"},a),u.a.createElement("div",{className:"text"},u.a.createElement("div",null,c)))},L=()=>{if(!_)return null;const e=F?o.meta.total.usage.units:"",t=Object(v.c)(m||e),a=g("units."+t);return u.a.createElement("div",{className:"valueContainer"},u.a.createElement("span",{className:"value"},T),Boolean(d&&(m||F&&o.meta.total.usage.value>=0))&&u.a.createElement("span",{className:"units"},a),u.a.createElement("div",{className:"text"},u.a.createElement("div",null,_)))};return"dailyCost"===e||"dailyTrend"===e||"cost"===e?u.a.createElement(u.a.Fragment,null,A("cost"===l)):"trend"===e?p?u.a.createElement(u.a.Fragment,null,L(),A("cost"===l)):u.a.createElement(u.a.Fragment,null,A("cost"===l),L()):"usage"===e?p?u.a.createElement(u.a.Fragment,null,L(),N()):u.a.createElement(u.a.Fragment,null,N(),L()):null});a(777);var _=a(414);const D=({label:e,formatOptions:t,formatValue:a,t:s,totalValue:r,units:n,value:o})=>{const i=Object(v.c)(n),c="usd"!==i?s("units."+i):void 0,l=Number((r?o/r*100:0).toFixed(2)),h=s("percent_of_total",{percent:l,units:c,value:a(o,n,t)});return u.a.createElement("li",{className:"reportSummaryItem"},u.a.createElement(_.a,{label:h,value:l,title:e,size:_.b.sm}))};D.defaultProps={formatValue:e=>e};const C=Object(h.a)()(D);a(778);var O=a(742);class j extends u.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=Object(O.a)({report:t,idKey:e}),s=a.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==s?[...a.slice(0,s),...a.slice(s+1),a[s]]:a}render(){const{children:e,status:t}=this.props;if(1===t)return u.a.createElement(u.a.Fragment,null,u.a.createElement(c.Skeleton,{size:"md"}),u.a.createElement(c.Skeleton,{size:"md",className:"skeleton"}),u.a.createElement(c.Skeleton,{size:"md",className:"skeleton"}),u.a.createElement(c.Skeleton,{size:"md",className:"skeleton"}));{const t=this.getItems();return u.a.createElement("ul",null,e({items:t}))}}}const T=Object(h.a)()(j);a(779),a(738);var S=a(718),E=a(719),w=a(320),R=a(721),I=a(732),k=a(722),F=a(723),A=a(740),N=a(735),L=a(737),x=a.n(L),P=a(131),W=a(661),z=a.n(W),H=a(665),U=a(664),M=a(663),V=a(662),K=a(666),Q=a(659),q=a.n(Q),G=a(658),B=a.n(G),Y=a(657),$=a.n(Y),X=a(656),J=a.n(X),Z=a(660),ee=a.n(Z);const te={currentColorScale:[X.chart_color_green_400.value,Y.chart_color_green_300.value,G.chart_color_green_200.value,Q.chart_color_green_100.value,Z.chart_color_green_500.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[V.chart_color_blue_400.value,M.chart_color_blue_300.value,U.chart_color_blue_200.value,H.chart_color_blue_100.value,K.chart_color_blue_500.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:Q.chart_color_green_100.value,strokeWidth:0},forecastConeDataColorScale:[Q.chart_color_green_100.value],forecastData:{fill:"none"},forecastDataColorScale:[G.chart_color_green_200.value],forecastInfrastructureConeData:{fill:H.chart_color_blue_100.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[H.chart_color_blue_100.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[U.chart_color_blue_200.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[W.chart_color_black_200.value,W.chart_color_black_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ae extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:i,showForecast:c}=this.props,l="chart.cost_legend_label",u=[{childName:"previousCost",data:i,legendItem:{name:Object(N.a)(i,l,!0,!0,1),symbol:{fill:te.previousColorScale[0],type:"minus"},tooltip:Object(N.a)(i,"chart.cost_legend_tooltip",!1,!1,1)},style:{data:Object.assign(Object.assign({},te.previousCostData),{stroke:te.previousColorScale[0]})}},{childName:"currentCost",data:t,legendItem:{name:Object(N.a)(t,l,!0,!1),symbol:{fill:te.currentColorScale[0],type:"minus"},tooltip:Object(N.a)(t,"chart.cost_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},te.currentCostData),{stroke:te.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:o,legendItem:{name:Object(N.a)(o,"chart.cost_infrastructure_legend_label",!0,!0,1),symbol:{fill:te.previousColorScale[1],type:"dash"},tooltip:Object(N.a)(o,"chart.cost_infrastructure_legend_tooltip",!1,!1,1)},style:{data:Object.assign(Object.assign({},te.previousInfrastructureCostData),{stroke:te.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:Object(N.a)(e,"chart.cost_infrastructure_legend_label",!0,!1),symbol:{fill:te.currentInfrastructureColorScale[1],type:"dash"},tooltip:Object(N.a)(e,"chart.cost_infrastructure_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},te.currentInfrastructureCostData),{stroke:te.currentInfrastructureColorScale[1]})}}];c&&(u.push({childName:"forecast",data:s,legendItem:{name:Object(N.a)(s,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:te.forecastDataColorScale[0],type:"minus"},tooltip:Object(N.a)(s,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},te.forecastData),{stroke:te.forecastDataColorScale[0]})}}),u.push({childName:"forecastInfrastructure",data:n,legendItem:{name:Object(N.a)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:te.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:Object(N.a)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},te.forecastInfrastructureData),{stroke:te.forecastInfrastructureDataColorScale[0]})}}),u.push({childName:"forecastCone",data:a,legendItem:{name:Object(N.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:te.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(N.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},te.forecastConeData),{stroke:te.forecastConeDataColorScale[0]})}}),u.push({childName:"forecastInfrastructureCone",data:r,legendItem:{name:Object(N.a)(r,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:te.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:Object(N.a)(r,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},te.forecastInfrastructureConeData),{stroke:te.forecastInfrastructureConeDataColorScale[0]})}}));const h=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:h,series:u})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u.a.createElement(S.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const e=Object(E.a)("voronoi","cursor");return u.a.createElement(e,{cursorDimension:"x",labels:this.getTooltipLabel,mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>u.a.createElement(w.a,{data:this.getLegendData(),height:25,gutter:20,name:"legend",responsive:!1}),this.getTooltipLabel=({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(N.d)(t),r=void 0!==e.y&&null!==e.y?s(e.y,e.units,a):void 0,n=void 0!==e.y0&&null!==e.y0?s(e.y0,e.units,a):void 0;return void 0!==r&&void 0!==n?P.a.t("chart.cost_forecast_cone_tooltip",{value0:n,value1:r}):void 0!==r?r:P.a.t("chart.no_data")},this.handleLegendClick=e=>{const{hiddenSeries:t,series:a}=this.state,s=a[e.index].childName;if(-1!==s.indexOf("forecast")){let e;for(let t=0;t<a.length;t++)if(a[t].childName===s+"Cone"){e=t;break}void 0===e||t.delete(e)||t.add(e)}t.delete(e.index)||t.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})},this.isDataAvailable=()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length!==(e?e.length:0)},this.isSeriesHidden=e=>{const{hiddenSeries:t}=this.state;return t.has(e)},this.getChartNames=()=>{const{series:e}=this.state,t=[];return e&&e.map(e=>{t.push(e.childName)}),t},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&(s?r>650&&r<1130?n+=25:r>450&&r<650?n+=50:r<=450&&(n+=75):r>450&&r<725?n+=25:r<=450&&(n+=50)),n},this.getEvents=()=>Object(R.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick}),this.getLegendData=(e=!1)=>{const{hiddenSeries:t,series:a}=this.state;if(a){const s=a.map((a,s)=>Object.assign(Object.assign(Object.assign({childName:a.childName},a.legendItem),e&&{name:a.legendItem.tooltip}),Object(R.b)(t.has(s))));return e?s:s.filter(e=>-1===e.childName.indexOf("Cone"))}}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getDomain(){const{series:e}=this.state,t={x:[1,31]};let a=0,s=0;e&&e.forEach((e,t)=>{if(!this.isSeriesHidden(t)&&e.data&&0!==e.data.length){const{max:t,min:r}=Object(N.c)(e.data);a=Math.max(a,t),s=0===s?r:Math.min(s,r)}});const r=.1*a,n=a>0?Math.ceil(a+r):0,o=s>0?Math.max(0,Math.floor(s-r)):0,i=o>0?o:0;return n>0&&(t.y=[i,n]),t}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,n=e?x()(Object(N.b)(e,!0,!0)[1]):0,o=t?x()(Object(N.b)(t,!0,!0)[1]):0,i=a?x()(Object(N.b)(a,!0,!0)[1]):0,c=s?x()(Object(N.b)(s,!0,!0)[1]):0,l=r?x()(Object(N.b)(r,!0,!0)[1]):0;return n>0||o>0||c>0||l>0?Math.max(n,o,i,c,l):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,series:r,width:o}=this.state,i=this.getDomain(),c=this.getEndDate(),l=Math.floor(c/2),h=1+Math.floor(l/2),d=1+l,p=c-Math.floor(l/2),g=s?u.a.cloneElement(s,{disable:!this.isDataAvailable(),labelComponent:u.a.createElement(I.a,{legendData:this.getLegendData(!0),title:e=>P.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:o}},u.a.createElement(k.a,{containerComponent:g,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:t,theme:A.a,width:o},r&&r.map((e,t)=>this.getChart(e,t)),u.a.createElement(F.a,{style:te.xAxis,tickValues:[1,h,d,p,c]}),u.a.createElement(F.a,{dependentAxis:!0,style:te.yAxis})))))}}const se=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(ae,Object.assign({},e)));a(780);var re=a(724),ne=a(725),oe=a(726),ie=a(674);const ce={currentColorScale:[X.chart_color_green_400.value,Y.chart_color_green_300.value,G.chart_color_green_200.value,Q.chart_color_green_100.value,Z.chart_color_green_500.value],currentInfrastructureColorScale:[V.chart_color_blue_400.value,M.chart_color_blue_300.value,U.chart_color_blue_200.value,H.chart_color_blue_100.value,K.chart_color_blue_500.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[ie.chart_color_orange_300.value],forecastDataColorScale:[G.chart_color_green_200.value],forecastInfrastructureConeDataColorScale:[ie.chart_color_orange_300.value],forecastInfrastructureDataColorScale:[U.chart_color_blue_200.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[W.chart_color_black_200.value,W.chart_color_black_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class le extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:i,showForecast:c}=this.props,l="chart.cost_legend_label",u=[{childName:"previousCost",data:i,legendItem:{name:Object(N.a)(i,l,!0,!0,1),symbol:{fill:ce.previousColorScale[0],type:"minus"},tooltip:Object(N.a)(i,"chart.cost_legend_tooltip",!1,!1,1)},isLine:!0,style:{data:{stroke:ce.previousColorScale[0]}}},{childName:"currentCost",data:t,legendItem:{name:Object(N.a)(t,l,!0,!1),symbol:{fill:ce.currentColorScale[0],type:"minus"},tooltip:Object(N.a)(t,"chart.cost_legend_tooltip",!1,!1)},isBar:!0,style:{data:{fill:ce.currentColorScale[0]}}},{childName:"previousInfrastructureCost",data:o,legendItem:{name:Object(N.a)(o,"chart.cost_infrastructure_legend_label",!0,!0,1),symbol:{fill:ce.previousColorScale[1],type:"dash"},tooltip:Object(N.a)(o,"chart.cost_infrastructure_legend_tooltip",!1,!1,1)},isLine:!0,style:{data:{stroke:ce.previousColorScale[1]}}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:Object(N.a)(e,"chart.cost_infrastructure_legend_label",!0,!1),symbol:{fill:ce.currentInfrastructureColorScale[1],type:"dash"},tooltip:Object(N.a)(e,"chart.cost_infrastructure_legend_tooltip",!1,!1)},isBar:!0,style:{data:{fill:ce.currentInfrastructureColorScale[1]}}}];c&&(u.push({childName:"forecast",data:s,legendItem:{name:Object(N.a)(s,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:ce.forecastDataColorScale[0],type:"minus"},tooltip:Object(N.a)(s,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:ce.forecastDataColorScale[0]}}}),u.push({childName:"forecastInfrastructure",data:n,legendItem:{name:Object(N.a)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:ce.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:Object(N.a)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:ce.forecastInfrastructureDataColorScale[0]}}}),u.push({childName:"forecastCone",data:a,legendItem:{name:Object(N.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:ce.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(N.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:ce.forecastConeDataColorScale[0]}}}),u.push({childName:"forecastInfrastructureCone",data:r,legendItem:{name:Object(N.a)(r,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:ce.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:Object(N.a)(r,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:ce.forecastInfrastructureConeDataColorScale[0]}}}));const h=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:h,series:u})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return u.a.createElement(re.a,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return u.a.createElement(ne.a,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return u.a.createElement(re.a,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return u.a.createElement(re.a,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const e=Object(E.a)("voronoi","cursor");return u.a.createElement(e,{cursorDimension:"x",labels:this.getTooltipLabel,mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>u.a.createElement(w.a,{data:this.getLegendData(),height:25,gutter:20,name:"legend",responsive:!1}),this.getTooltipLabel=({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(N.d)(t),r=void 0!==e.y&&null!==e.y?s(e.y,e.units,a):void 0,n=void 0!==e.y0&&null!==e.y0?s(e.y0,e.units,a):void 0;return void 0!==r&&void 0!==n?P.a.t("chart.cost_forecast_cone_tooltip",{value0:n,value1:r}):void 0!==r?r:P.a.t("chart.no_data")},this.handleLegendClick=e=>{const{hiddenSeries:t,series:a}=this.state,s=a[e.index].childName;if(-1!==s.indexOf("forecast")){let e;for(let t=0;t<a.length;t++)if(a[t].childName===s+"Cone"){e=t;break}void 0===e||t.delete(e)||t.add(e)}t.delete(e.index)||t.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})},this.isDataAvailable=()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length!==(e?e.length:0)},this.isSeriesHidden=e=>{const{hiddenSeries:t}=this.state;return t.has(e)},this.getChartNames=()=>{const{series:e}=this.state,t=[];return e&&e.map(e=>{t.push(e.childName)}),t},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&(s?r>650&&r<1130?n+=25:r>450&&r<650?n+=50:r<=450&&(n+=75):r>450&&r<725?n+=25:r<=450&&(n+=50)),n},this.getEvents=()=>Object(R.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick}),this.getLegendData=(e=!1)=>{const{hiddenSeries:t,series:a}=this.state;if(a){const s=a.map((a,s)=>Object.assign(Object.assign(Object.assign({childName:a.childName},a.legendItem),e&&{name:a.legendItem.tooltip}),Object(R.b)(t.has(s))));return e?s:s.filter(e=>-1===e.childName.indexOf("Cone"))}}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getDomain(){const{series:e}=this.state,t={x:[1,31]};let a=0,s=0;e&&e.forEach((e,t)=>{if(!this.isSeriesHidden(t)&&e.data&&0!==e.data.length){const{max:t,min:r}=Object(N.c)(e.data);a=Math.max(a,t),s=0===s?r:Math.min(s,r)}});const r=.1*a,n=a>0?Math.ceil(a+r):0,o=s>0?Math.max(0,Math.floor(s-r)):0,i=o>0?o:0;return n>0&&(t.y=[i,n]),t}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,n=e?x()(Object(N.b)(e,!0,!0)[1]):0,o=t?x()(Object(N.b)(t,!0,!0)[1]):0,i=a?x()(Object(N.b)(a,!0,!0)[1]):0,c=s?x()(Object(N.b)(s,!0,!0)[1]):0,l=r?x()(Object(N.b)(r,!0,!0)[1]):0;return n>0||o>0||c>0||l>0?Math.max(n,o,i,c,l):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,series:r,width:o}=this.state,i=this.getDomain(),c=this.getEndDate(),l=Math.floor(c/2),h=1+Math.floor(l/2),d=1+l,p=c-Math.floor(l/2),g=s?u.a.cloneElement(s,{disable:!this.isDataAvailable(),labelComponent:u.a.createElement(I.a,{legendData:this.getLegendData(!0),title:e=>P.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:o}},u.a.createElement(k.a,{containerComponent:g,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:t,theme:A.a,width:o},r&&r.length>0&&u.a.createElement(oe.a,{offset:5.5},r.map((e,t)=>this.getChart(e,t))),r&&r.length>0&&u.a.createElement(oe.a,{offset:5.5},r.map((e,t)=>this.getForecastBarChart(e,t))),r&&r.length>0&&u.a.createElement(oe.a,{offset:5.5},r.map((e,t)=>this.getForecastLineChart(e,t))),u.a.createElement(F.a,{style:ce.xAxis,tickValues:[1,h,d,p,c]}),u.a.createElement(F.a,{dependentAxis:!0,style:ce.yAxis})))))}}const ue=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(le,Object.assign({},e)));a(781);const he={currentColorScale:[X.chart_color_green_400.value,Y.chart_color_green_300.value,G.chart_color_green_200.value,Q.chart_color_green_100.value,Z.chart_color_green_500.value],forecastConeDataColorScale:[ie.chart_color_orange_300.value],forecastDataColorScale:[G.chart_color_green_200.value],itemsPerRow:4,previousColorScale:[W.chart_color_black_200.value,W.chart_color_black_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class de extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,i=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",c=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",l=[{childName:"previousCost",data:s,legendItem:{name:Object(N.a)(s,i,!0,!0,1),symbol:{fill:he.previousColorScale[0],type:"minus"},tooltip:Object(N.a)(s,c,!1,!1,1)},isBar:!0,style:{data:{fill:he.previousColorScale[0]}}},{childName:"currentCost",data:e,legendItem:{name:Object(N.a)(e,i,!0,!1),symbol:{fill:he.currentColorScale[0],type:"minus"},tooltip:Object(N.a)(e,c,!1,!1)},isBar:!0,style:{data:{fill:he.currentColorScale[0]}}}];r&&(l.push({childName:"forecast",data:t,legendItem:{name:Object(N.a)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:he.forecastDataColorScale[0],type:"minus"},tooltip:Object(N.a)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:he.forecastDataColorScale[0]}}}),l.push({childName:"forecastCone",data:a,legendItem:{name:Object(N.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:he.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(N.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:he.forecastConeDataColorScale[0]}}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:l})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return u.a.createElement(re.a,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return u.a.createElement(ne.a,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return u.a.createElement(re.a,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return u.a.createElement(re.a,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const e=Object(E.a)("voronoi","cursor");return u.a.createElement(e,{cursorDimension:"x",labels:this.getTooltipLabel,mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state;return u.a.createElement(w.a,{data:this.getLegendData(),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:t>150?"horizontal":"vertical"})},this.getTooltipLabel=({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(N.d)(t),r=void 0!==e.y&&null!==e.y?s(e.y,e.units,a):void 0,n=void 0!==e.y0&&null!==e.y0?s(e.y0,e.units,a):void 0;return void 0!==r&&void 0!==n?P.a.t("chart.cost_forecast_cone_tooltip",{value0:n,value1:r}):void 0!==r?r:P.a.t("chart.no_data")},this.handleLegendClick=e=>{const{hiddenSeries:t,series:a}=this.state,s=a[e.index].childName;if(-1!==s.indexOf("forecast")){let e;for(let t=0;t<a.length;t++)if(a[t].childName===s+"Cone"){e=t;break}void 0===e||t.delete(e)||t.add(e)}t.delete(e.index)||t.add(e.index),this.setState({hiddenSeries:new Set(t)})},this.isDataAvailable=()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length!==(e?e.length:0)},this.isSeriesHidden=e=>{const{hiddenSeries:t}=this.state;return t.has(e)},this.getChartNames=()=>{const{series:e}=this.state,t=[];return e&&e.map(e=>{t.push(e.childName)}),t},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&s&&r<700&&(n+=25),n},this.getEvents=()=>Object(R.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick}),this.getLegendData=(e=!1)=>{const{hiddenSeries:t,series:a}=this.state;if(a){const s=a.map((a,s)=>Object.assign(Object.assign(Object.assign({childName:a.childName},a.legendItem),e&&{name:a.legendItem.tooltip}),Object(R.b)(t.has(s))));return e?s:s.filter(e=>-1===e.childName.indexOf("Cone"))}}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getDomain(){const{series:e}=this.state,t={x:[1,31]};let a=0,s=0;e&&e.forEach((e,t)=>{if(!this.isSeriesHidden(t)&&e.data&&0!==e.data.length){const{max:t,min:r}=Object(N.c)(e.data);a=Math.max(a,t),s=0===s?r:Math.min(s,r)}});const r=.1*a,n=a>0?Math.ceil(a+r):0,o=s>0?Math.max(0,Math.floor(s-r)):0,i=o>0?o:0;return n>0&&(t.y=[i,n]),t}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?x()(Object(N.b)(a,!0,!0)[1]):0,r=e?x()(Object(N.b)(e,!0,!0)[1]):0,n=t?x()(Object(N.b)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,n,s):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,series:r,width:o}=this.state,i=this.getDomain(),c=this.getEndDate(),l=Math.floor(c/2),h=1+Math.floor(l/2),d=1+l,p=c-Math.floor(l/2),g=s?u.a.cloneElement(s,{disable:!this.isDataAvailable(),labelComponent:u.a.createElement(I.a,{legendData:this.getLegendData(!0),title:e=>P.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:o}},u.a.createElement(k.a,{containerComponent:g,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:t,theme:A.a,width:o},r&&r.length>0&&u.a.createElement(oe.a,{offset:11},r.map((e,t)=>this.getChart(e,t))),r&&r.length>0&&u.a.createElement(oe.a,{offset:11},u.a.createElement(re.a,{data:[{y:null}],name:"forcast_spacer"}),r.map((e,t)=>this.getForecastBarChart(e,t))),r&&r.length>0&&u.a.createElement(oe.a,{offset:11},u.a.createElement(re.a,{data:[{y:null}],name:"forcast_cone_spacer"}),r.map((e,t)=>this.getForecastLineChart(e,t))),u.a.createElement(F.a,{style:he.xAxis,tickValues:[1,h,d,p,c]}),u.a.createElement(F.a,{dependentAxis:!0,style:he.yAxis})))))}}const pe=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(de,Object.assign({},e)));a(782);const ge={currentColorScale:[J.a.value,$.a.value,B.a.value,q.a.value,ee.a.value],currentMonthData:{fill:"none"},forecastConeData:{fill:q.a.value,strokeWidth:0},forecastConeDataColorScale:[q.a.value],forecastData:{fill:"none"},forecastDataColorScale:[B.a.value],itemsPerRow:4,previousColorScale:[z.a.value,z.a.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class me extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,i=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",c=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",l=[{childName:"previousCost",data:s,legendItem:{name:Object(N.a)(s,i,!0,!0,1),symbol:{fill:ge.previousColorScale[0],type:"minus"},tooltip:Object(N.a)(s,c,!1,!1,1)},style:{data:Object.assign(Object.assign({},ge.previousMonthData),{stroke:ge.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:Object(N.a)(e,i,!0,!1),symbol:{fill:ge.currentColorScale[0],type:"minus"},tooltip:Object(N.a)(e,c,!1,!1)},style:{data:Object.assign(Object.assign({},ge.currentMonthData),{stroke:ge.currentColorScale[0]})}}];r&&(l.push({childName:"forecast",data:t,legendItem:{name:Object(N.a)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:ge.forecastDataColorScale[0],type:"minus"},tooltip:Object(N.a)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ge.forecastData),{stroke:ge.forecastDataColorScale[0]})}}),l.push({childName:"forecastCone",data:a,legendItem:{name:Object(N.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:ge.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(N.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ge.forecastConeData),{stroke:ge.forecastConeDataColorScale[0]})}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:l})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u.a.createElement(S.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const e=Object(E.a)("voronoi","cursor");return u.a.createElement(e,{cursorDimension:"x",labels:this.getTooltipLabel,mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state;return u.a.createElement(w.a,{data:this.getLegendData(),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:t>150?"horizontal":"vertical"})},this.getTooltipLabel=({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(N.d)(t),r=void 0!==e.y&&null!==e.y?s(e.y,e.units,a):void 0,n=void 0!==e.y0&&null!==e.y0?s(e.y0,e.units,a):void 0;return void 0!==r&&void 0!==n?P.a.t("chart.cost_forecast_cone_tooltip",{value0:n,value1:r}):void 0!==r?r:P.a.t("chart.no_data")},this.handleLegendClick=e=>{const{hiddenSeries:t,series:a}=this.state,s=a[e.index].childName;if(-1!==s.indexOf("forecast")){let e;for(let t=0;t<a.length;t++)if(a[t].childName===s+"Cone"){e=t;break}void 0===e||t.delete(e)||t.add(e)}t.delete(e.index)||t.add(e.index),this.setState({hiddenSeries:new Set(t)})},this.isDataAvailable=()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length!==(e?e.length:0)},this.isSeriesHidden=e=>{const{hiddenSeries:t}=this.state;return t.has(e)},this.getChartNames=()=>{const{series:e}=this.state,t=[];return e&&e.map(e=>{t.push(e.childName)}),t},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&s&&r<700&&(n+=25),n},this.getEvents=()=>Object(R.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick}),this.getLegendData=(e=!1)=>{const{hiddenSeries:t,series:a}=this.state;if(a){const s=a.map((a,s)=>Object.assign(Object.assign(Object.assign({childName:a.childName},a.legendItem),e&&{name:a.legendItem.tooltip}),Object(R.b)(t.has(s))));return e?s:s.filter(e=>-1===e.childName.indexOf("Cone"))}}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getDomain(){const{series:e}=this.state,t={x:[1,31]};let a=0,s=0;e&&e.forEach((e,t)=>{if(!this.isSeriesHidden(t)&&e.data&&0!==e.data.length){const{max:t,min:r}=Object(N.c)(e.data);a=Math.max(a,t),s=0===s?r:Math.min(s,r)}});const r=.1*a,n=a>0?Math.ceil(a+r):0,o=s>0?Math.max(0,Math.floor(s-r)):0,i=o>0?o:0;return n>0&&(t.y=[i,n]),t}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?x()(Object(N.b)(a,!0,!0)[1]):0,r=e?x()(Object(N.b)(e,!0,!0)[1]):0,n=t?x()(Object(N.b)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,n,s):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,series:r,width:o}=this.state,i=this.getDomain(),c=this.getEndDate(),l=Math.floor(c/2),h=s?u.a.cloneElement(s,{disable:!this.isDataAvailable(),labelComponent:u.a.createElement(I.a,{legendData:this.getLegendData(!0),title:e=>P.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:o}},u.a.createElement(k.a,{containerComponent:h,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:t,theme:A.a,width:o},r&&r.map((e,t)=>this.getChart(e,t)),u.a.createElement(F.a,{style:ge.xAxis,tickValues:[1,l,c]}),u.a.createElement(F.a,{dependentAxis:!0,style:ge.yAxis})))))}}const fe=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(me,Object.assign({},e)));a(783);var be=a(653);const ve={chartContainer:{marginTop:a.n(be).a.value},currentRequestData:{data:{fill:"none",stroke:$.a.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:J.a.value}},itemsPerRow:2,legendColorScale:[z.a.value,J.a.value,z.a.value,$.a.value],previousRequestData:{data:{fill:"none",stroke:z.a.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:z.a.value}},currentColorScale:[J.a.value,$.a.value,B.a.value,q.a.value,ee.a.value],previousColorScale:[z.a.value,z.a.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ye extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=[{childName:"previousUsage",data:s,legendItem:{name:Object(N.e)(s,"chart.usage_legend_label",!0,!0,1),symbol:{fill:ve.legendColorScale[0],type:"minus"},tooltip:Object(N.e)(s,"chart.usage_legend_tooltip",!1,!1,1)},style:ve.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:Object(N.e)(t,"chart.usage_legend_label",!0,!1),symbol:{fill:ve.legendColorScale[1],type:"minus"},tooltip:Object(N.e)(t,"chart.usage_legend_tooltip",!1,!1)},style:ve.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:Object(N.e)(a,"chart.requests_legend_label",!0,!0,1),symbol:{fill:ve.legendColorScale[2],type:"dash"},tooltip:Object(N.e)(a,"chart.requests_legend_tooltip",!1,!1,1)},style:ve.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:Object(N.e)(e,"chart.requests_legend_label",!0,!1),symbol:{fill:ve.legendColorScale[3],type:"dash"},tooltip:Object(N.e)(e,"chart.requests_legend_tooltip",!1,!1)},style:ve.currentRequestData}],n=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:n,series:r})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u.a.createElement(S.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const e=Object(E.a)("voronoi","cursor");return u.a.createElement(e,{cursorDimension:"x",labels:this.getTooltipLabel,mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state,a=e||(t>300?ve.itemsPerRow:1);return u.a.createElement(w.a,{data:this.getLegendData(),height:25,gutter:20,itemsPerRow:a,name:"legend"})},this.getTooltipLabel=({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,s=Object(N.d)(t);return void 0!==e.y&&null!==e.y?s(e.y,e.units,a):P.a.t("chart.no_data")},this.handleLegendClick=e=>{this.state.hiddenSeries.delete(e.index)||this.state.hiddenSeries.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})},this.isDataAvailable=()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length!==(e?e.length:0)},this.isSeriesHidden=e=>{const{hiddenSeries:t}=this.state;return t.has(e)},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:s}=this.state;let r=a;return e&&s<480&&(r+=20),r},this.getChartNames=()=>{const{series:e}=this.state,t=[];return e&&e.map(e=>{t.push(e.childName)}),t},this.getEvents=()=>Object(R.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick}),this.getLegendData=(e=!1)=>{const{hiddenSeries:t,series:a}=this.state;if(a){return a.map((a,s)=>Object.assign(Object.assign(Object.assign({childName:a.childName},a.legendItem),e&&{name:a.legendItem.tooltip}),Object(R.b)(t.has(s))))}}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getDomain(){const{series:e}=this.state,t={x:[1,31]};let a=0,s=0;e&&e.forEach((e,t)=>{if(!this.isSeriesHidden(t)&&e.data&&0!==e.data.length){const{max:t,min:r}=Object(N.c)(e.data);a=Math.max(a,t),s=0===s?r:Math.min(s,r)}});const r=.1*a,n=a>0?Math.ceil(a+r):0,o=s>0?Math.max(0,Math.floor(s-r)):0,i=o>0?o:0;return n>0&&(t.y=[i,n]),t}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=e?x()(Object(N.b)(e,!0,!0)[1]):0,n=t?x()(Object(N.b)(t,!0,!0)[1]):0,o=a?x()(Object(N.b)(a,!0,!0)[1]):0,i=s?x()(Object(N.b)(s,!0,!0)[1]):0;return r>0||n>0||o>0||i>0?Math.max(r,n,o,i):31}render(){const{height:e,padding:t={bottom:75,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,series:r,width:o}=this.state,i=this.getDomain(),c=this.getEndDate(),l=Math.floor(c/2),h=s?u.a.cloneElement(s,{disable:!this.isDataAvailable(),labelComponent:u.a.createElement(I.a,{legendData:this.getLegendData(!0),title:e=>P.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:o}},u.a.createElement(k.a,{containerComponent:h,domain:i,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:t,theme:A.a,width:o},r&&r.map((e,t)=>this.getChart(e,t)),u.a.createElement(F.a,{style:ve.xAxis,tickValues:[1,l,c]}),u.a.createElement(F.a,{dependentAxis:!0,style:ve.yAxis})))))}}const _e=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(ye,Object.assign({},e)))},763:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=()=>{const e=window.location.pathname.split("/");e.shift();let t="";return"beta"===e[0]&&(t="/beta"),t}},766:function(e,t,a){"use strict";var s=a(370),r=a(747),n=a(752),o=a(1),i=a.n(o),c=a(483);var l=Object(c.a)(({title:e})=>i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(r.PageHeader,null,i.a.createElement(r.PageHeaderTitle,{title:e})),i.a.createElement(s.Main,null,i.a.createElement(n.a,null))));t.a=l},773:function(e,t,a){},774:function(e,t,a){},775:function(e,t,a){},776:function(e,t,a){},777:function(e,t,a){},778:function(e,t,a){},779:function(e,t,a){},780:function(e,t,a){},781:function(e,t,a){},782:function(e,t,a){},783:function(e,t,a){},784:function(e,t,a){},785:function(e,t,a){e.exports=a.p+"8a2acb5e9233030023f599e0f04ebd7f.svg"},786:function(e,t,a){"use strict";var s=a(370),r=a(747),n=a(1),o=a.n(n),i=a(483),c=a(401),l=a(403),u=a(347),h=a(402),d=a(54),p=a(684),g=a(678),m=(a(784),a(715));const f=a(785);var b=Object(m.a)()(({className:e,t:t})=>o.a.createElement("img",{className:"cost-icon "+e,src:f,alt:t("cost_management"),"aria-hidden":"true"})),v=a(763),y=a(653),_=a.n(y),D=a(669);const C={iconSpacer:{marginLeft:a.n(D).a.value},viewSources:{marginTop:_.a.value}};class O extends o.a.Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{t:a}=this.props;return o.a.createElement("a",{href:a(t),rel:"noreferrer",target:"_blank"},a(e),o.a.createElement("span",{style:C.iconSpacer},o.a.createElement(p.ExternalLinkAltIcon,null)))},this.getRouteToSources=()=>Object(v.a)()+"/settings/sources"}render(){const{providerType:e,t:t}=this.props;let a,s,r,n="no_providers_state.overview_desc",i="no_providers_state.overview_title";switch(e){case"aws":n="no_providers_state.aws_desc",i="no_providers_state.aws_title";break;case"azure":n="no_providers_state.azure_desc",i="no_providers_state.azure_title";break;case"gcp":n="no_providers_state.gcp_desc",i="no_providers_state.gcp_title";break;case"ocp":n="no_providers_state.ocp_desc",a="docs.add_ocp_sources",r="no_providers_state.ocp_add_sources",i="no_providers_state.ocp_title";break;default:s=b}return o.a.createElement(c.a,{variant:c.b.large,className:"pf-m-redhat-font"},o.a.createElement(l.a,{icon:s||g.PlusCircleIcon}),o.a.createElement(u.a,{headingLevel:"h5",size:"lg"},t(i)),o.a.createElement(h.a,null,t(n)),a&&r?o.a.createElement("div",{style:C.viewSources},this.getDocLink(r,a)):o.a.createElement(d.a,{variant:"primary",component:"a",href:this.getRouteToSources()},t("no_providers_state.get_started")))}}const j=Object(i.a)(Object(m.a)()(O));var T=Object(i.a)(({providerType:e,title:t})=>o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(r.PageHeader,null,o.a.createElement(r.PageHeaderTitle,{title:t})),o.a.createElement(s.Main,null,o.a.createElement(j,{providerType:e}))));t.a=T}}]);
//# sourceMappingURL=6437f4cc85157b2fb385.bundle.js.map