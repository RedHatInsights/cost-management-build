(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2196],{5118:()=>{},86208:(e,t,a)=>{"use strict";a.d(t,{H:()=>r});var s=a(43702);function r(e){return(0,s.stringify)(e,{encode:!1,indices:!1})}},40125:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(55255),r=a(61352);const n={padding:8},o={area:Object.assign({},n),axis:Object.assign({},n),bar:Object.assign({},n),boxplot:Object.assign({},n),candlestick:Object.assign({},n),chart:Object.assign({},n),errorbar:Object.assign({},n),group:Object.assign({},n),legend:{},line:Object.assign({},n),pie:Object.assign({},n),scatter:Object.assign({},n),stack:Object.assign({},n),tooltip:{},voronoi:Object.assign({},n)},i=(0,s.jp)(r.nz.default,r.py.default,o)},60232:(e,t,a)=>{"use strict";a.d(t,{uL:()=>b,Y_:()=>D,Dd:()=>y,MN:()=>C,pZ:()=>_,Fs:()=>E,Q7:()=>k,GN:()=>S,nB:()=>d,Qw:()=>h,zJ:()=>m});var s=a(36234),r=a(30136),n=a.n(r),o=a(60114);function i({forecast:e,sortDirection:t=0,sortKey:a="date"}){return(0,o.D)(function({forecast:e}){if(!e)return[];const t=new Map,a=e=>{e&&e.values&&e.values.forEach((e=>{const a=e.date,s=t.get(a);s?t.set(a,Object.assign(Object.assign({},s),{date:a,cost:l(e,"cost",s),infrastructure:l(e,"infrastructure",s),supplementary:l(e,"supplementary",s)})):t.set(a,{date:a,cost:l(e,"cost"),infrastructure:l(e,"infrastructure"),supplementary:l(e,"supplementary")})}));for(const t in e)if(e[t]instanceof Array)return e[t].forEach(a)};return e&&e.data&&e.data.forEach(a),Array.from(t.values())}({forecast:e,sortDirection:t,sortKey:a}),{key:a,direction:t})}function l(e,t,a){return{confidence_max:{value:a?a[t].confidence_max.value:0+e[t]&&e[t].confidence_max?e[t].confidence_max.value:0,units:e[t]&&e[t].confidence_max?e[t].confidence_max.units:"USD"},confidence_min:{value:a?a[t].confidence_min.value:0+e[t]&&e[t].confidence_min?e[t].confidence_min.value:0,units:e[t]&&e[t].confidence_min?e[t].confidence_min.units:"USD"},pvalues:{value:e[t]&&e[t].pvalues?Number(e[t].pvalues.value):0,units:e[t]&&e[t].pvalues?e[t].pvalues.units:null},rsquared:{value:e[t]&&e[t].rsquared?Number(e[t].rsquared.value):0,units:e[t]&&e[t].rsquared?e[t].rsquared.units:null},total:{value:a?a[t].total.value:0+e[t]&&e[t].total?e[t].total.value:0,units:e[t]&&e[t].total?e[t].total.units:"USD"}}}var c=a(31447),u=a(901);function d(e,t=1,a="cost",s="total"){if(!e)return[];const r=i({forecast:e,sortKey:"date",sortDirection:1});let n;return n=1===t||2===t?r.map((e=>p(e[a][s].value,e))):r.reduce(((e,t)=>{const r=e.length?e[e.length-1].y:0;return[...e,p(r+t[a][s].value,t)]}),[]),v(n,t)}function h(e,t=1,a="cost",s="total"){if(!e)return[];const r=i({forecast:e,sortKey:"date",sortDirection:1});let n;return n=1===t||2===t?r.map((e=>g(e[a].confidence_max.value,e[a].confidence_min.value,e))):r.reduce(((e,t)=>{const r=e.length?e[e.length-1].y:t[a][s].value,n=e.length?e[e.length-1].y0:t[a][s].value;return[...e,g(r+t[a].confidence_max.value,n+t[a].confidence_min.value,t)]}),[]),v(n,t)}function m(e,t=1,a="date",s="cost",r="total"){if(!e)return[];const n={idKey:a,report:e,sortKey:"id",sortDirection:1},o=(0,c.R)(n);let i;return i=1===t||2===t?o.map((e=>f(e[s][r]?e[s][r].value:e[s].value,e,a,s,r))):o.reduce(((e,t)=>{const n=e.length?e[e.length-1].y:0,o=t[s][r]?t[s][r].value:t[s].value;return[...e,f(n+o,t,a,s,r)]}),[]),"date"===a?v(i,t):i}function p(e,t,a="cost",r="total"){const n=(0,s.getDate)(new Date(t.date+"T00:00:00")),o=k(e)?parseFloat(e.toFixed(2)):S(e)?e:0;return{x:n,y:null===e?null:o,key:t.date,units:t[a]&&t[a][r]?t[a][r].units:void 0}}function g(e,t,a,r="cost",n="total"){const o=(0,s.getDate)(new Date(a.date+"T00:00:00")),i=k(e)?parseFloat(e.toFixed(2)):S(e)?e:0,l=k(t)?parseFloat(t.toFixed(2)):S(t)?t:0;return{x:o,y:null===e?null:i,y0:null===t?null:l,key:a.date,units:a[r]&&a[r][n]?a[r][n].units:void 0}}function f(e,t,a="date",r="cost",n="total"){const o="date"===a?(0,s.getDate)(new Date(t.id+"T00:00:00")):t.label,i=k(e)?parseFloat(e.toFixed(2)):S(e)?e:0;return{x:o,y:null===e?null:i,key:t.id,name:t.label?t.label:t.id,units:t[r]?t[r][n]?t[r][n].units:t[r].units:void 0}}function v(e,t=1){const a=[];if(!e||0===e.length)return a;const r=new Date(e[0].key+"T00:00:00"),n=new Date(e[e.length-1].key+"T00:00:00");let o=(0,s.startOfMonth)(r);for(let e=o.getDate();e<r.getDate();e++){o.setDate(e);const t=(0,s.format)(o,"yyyy-MM-dd");a.push(f(null,{id:t},"date",null))}a.push(...e),o=new Date(n);for(let e=o.getDate()+1;e<=(0,s.endOfMonth)(n).getDate();e++){o.setDate(e);const t=(0,s.format)(o,"yyyy-MM-dd");a.push(f(null,{id:t},"date",null))}return function(e,t=1){const a=[];if(!e||0===e.length)return a;const r=new Date(e[0].key+"T00:00:00"),n=new Date(e[e.length-1].key+"T00:00:00"),o=(0,s.startOfMonth)(r);let i;for(let r=o.getDate();r<=(0,s.endOfMonth)(n).getDate();r++){o.setDate(r);const n=(0,s.format)(o,"yyyy-MM-dd"),l=e.find((e=>e.key===n));l?a.push(l):i&&a.push(Object.assign(Object.assign({},i),{key:n,x:(0,s.getDate)(new Date(n+"T00:00:00"))})),l&&(i=1===t?{key:n,x:(0,s.getDate)(new Date(n+"T00:00:00")),y:null}:l)}return a}(a,t)}function D(e,t=!0,a=!1,r=0){const[n,o]=function(e,t=0){if(!e||!e.length){const e=new Date;return t&&e.setMonth(e.getMonth()-t),[(0,s.startOfMonth)(e),e]}let a=0;for(let t=a;t<e.length;t++)if(e[t].y&&null!==e[t].y){a=t;break}let r=e.length-1;for(let t=r;t>=0;t--)if(e[t].y&&null!==e[t].y){r=t;break}return[new Date(e[a].key+"T00:00:00"),new Date(e[r].key+"T00:00:00")]}(e,r);if(t&&n.setDate&&n.setDate(1),a&&n.setDate){const e=(0,s.endOfMonth)(n).getDate();o.setDate(e)}return[n,o]}function C(e){let t=0;return e&&e.length&&e.forEach((e=>{e.y>t&&(t=e.y)})),t}function y(e){let t=-1,a=-1;return e&&e.length&&e.forEach((e=>{const s=void 0!==e.y0?Math.max(e.y,e.y0):e.y,r=void 0!==e.y0?Math.min(e.y,e.y0):e.y;s>t&&(t=s),(-1===a||r<a)&&null!==r&&(a=r)})),{max:t,min:a}}function _(e){return function(t,a=null,s={}){const r=(0,u.dM)(a);switch(r){case"core-hours":case"hour":case"hrs":case"gb":case"gb-hours":case"gb-mo":case"gibibyte month":case"vm-hours":return n().t(`unit_tooltips.${r}`,{value:`${e(t,a,s)}`});default:return`${e(t,a,s)}`}}}function b(e,t="chart.cost_legend_label",a=!1,r=!1,o=0){if(!e||!e.length)return n().t(`${t}_no_data`);const[i,l]=D(e,a,r,o);return n().t(t,{count:(0,s.getDate)(l),endDate:(0,s.format)(l,"d"),month:Number((0,s.format)(i,"M"))-1,startDate:(0,s.format)(i,"d"),year:(0,s.getYear)(l)})}function E(e,t="chart.usage_legend_label",a=!1,s=!1,r=0){return b(e,t,a,s,r)}function S(e){return Number(e)===e&&e%1==0&&e>=0}function k(e){return Number(e)===e&&e%1!=0&&e>=0}},63802:(e,t,a)=>{"use strict";a.d(t,{bC:()=>i,ge:()=>l,oX:()=>c,zj:()=>u,pP:()=>d,nV:()=>h,TW:()=>m,E0:()=>p,Yt:()=>g});var s=a(84154),r=a(30136),n=a.n(r),o=a(60232);const i=e=>{const t=[];return e&&e.map((e=>{t.push(e.childName)})),t},l=(e,t)=>{const a={x:[1,31]};let s=-1,r=-1;e&&e.forEach(((e,a)=>{if(!g(t,a)&&e.data&&0!==e.data.length){const{max:t,min:a}=(0,o.Dd)(e.data);s=Math.max(s,t),r=-1===r?a:Math.min(r,a)}}));const n=.1*s,i=s>0?Math.ceil(s+n):0,l=r>0?Math.max(0,Math.floor(r-n)):0,c=l>0?l:0;return i>0&&(a.y=[c,i]),a},c=(e,t,a=!1)=>{if(!e)return;const r=e.map(((e,r)=>Object.assign(Object.assign(Object.assign({childName:e.childName},e.legendItem),a&&{name:e.legendItem.tooltip}),(0,s.X)(t.has(r)))));return a?r:r.filter((e=>-1===e.childName.indexOf("Cone")))},u=(e,t,a)=>{const s=(0,o.pZ)(t),r=void 0!==e.y&&null!==e.y?s(e.y,e.units,a):void 0,i=void 0!==e.y0&&null!==e.y0?s(e.y0,e.units,a):void 0;return void 0!==r&&void 0!==i?n().t("chart.cost_forecast_cone_tooltip",{value0:i,value1:r}):void 0!==r?r:n().t("chart.no_data")},d=(e,t)=>{const a=e,{ResizeObserver:s}=window;let r,n;if(a&&s){const e=new s((e=>{window.requestAnimationFrame((()=>{Array.isArray(e)&&e.length&&t()}))}));e.observe(a),n=()=>e.unobserve(a)}else t(),window.addEventListener("resize",t),n=()=>window.removeEventListener("resize",t),r=insights.chrome.on("NAVIGATION_TOGGLE",setTimeout(t,500));return()=>{n&&n(),r&&r()}},h=(e,t,a)=>{const s=new Set(t);s.delete(a)||s.add(a);const r=e[a].childName;if(-1!==r.indexOf("forecast")){let t;for(let a=0;a<e.length;a++)if(e[a].childName===`${r}Cone`){t=a;break}void 0===a||s.delete(t)||s.add(t)}return s},m=(e,t)=>{const a=[];return e&&e.forEach(((e,s)=>{(g(t,s)||e.data&&0===e.data.length)&&a.push(s)})),a.length!==(e?e.length:0)},p=(e,t,a)=>{if(a&&a.length)for(let s,r=t.keys();!(s=r.next()).done;){let t,r;for(const e of a)if(e.childName){t=e.childName;break}for(const t of e[s.value].data)if(t.childName){r=t.childName;break}if(r&&t&&r===t)return!0}return!1},g=(e,t)=>e.has(t)},35956:(e,t,a)=>{"use strict";a.d(t,{iu:()=>m,j0:()=>f,me:()=>ee,V3:()=>ie,Y0:()=>ue,rN:()=>y,EH:()=>E,mZ:()=>w,Nd:()=>me,I0:()=>fe});var s=a(32203),r=a(70),n=a(60485),o=a(62394),i=a(15209),l=a(49734),c=a(97522),u=a.n(c),d=a(57827),h=a(57279);const m=(0,d.withTranslation)()((({children:e,detailsLink:t,title:a,subTitle:c,status:d})=>u().createElement(s.Z,{className:"reportSummary"},u().createElement(r.l,null,u().createElement(n.D,{headingLevel:"h2",size:"lg"},a),Boolean(c)&&u().createElement("p",{className:"subtitle"},c)),u().createElement(o.e,null,1===d?u().createElement(u().Fragment,null,u().createElement(i.O,{width:"16%"}),u().createElement(i.O,{className:"chartSkeleton",width:h.N.md}),u().createElement(i.O,{width:"33%"}),u().createElement(i.O,{className:"legendSkeleton",width:h.N.xs})):e),Boolean(t)&&u().createElement(l.e,null,t))));var p=a(50693),g=a(16475);const f=(0,d.withTranslation)()((({children:e,detailsLink:t,status:a,subTitle:c,tabs:d,title:m})=>u().createElement(s.Z,{className:"reportSummary"},u().createElement(p.r,{hasGutter:!0},u().createElement(g.P,{xl:8},u().createElement("div",{className:"cost"},u().createElement(r.l,null,u().createElement(n.D,{headingLevel:"h2",size:"lg"},m),Boolean(c)&&u().createElement("p",{className:"subtitle"},c)),u().createElement(o.e,null,1===a?u().createElement(u().Fragment,null,u().createElement(i.O,{width:"16%"}),u().createElement(i.O,{className:"chartSkeleton",width:h.N.md}),u().createElement(i.O,{width:"33%"}),u().createElement(i.O,{className:"legendSkeleton",width:h.N.xs})):e))),u().createElement(g.P,{xl:4},u().createElement("div",{className:"tops"},1!==a&&u().createElement(u().Fragment,null,Boolean(d)&&u().createElement(o.e,null,d),Boolean(t)&&u().createElement(l.e,null,t))))))));var v=a(35224),D=a(99163),C=a(901);const y=(0,d.withTranslation)()((({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:s,formatValue:r,formatOptions:n,report:o,requestFormatOptions:i,requestLabel:l,reportType:c,showTooltip:d=!1,showUnits:h=!1,showUsageFirst:m=!1,t:p,units:g,usageFormatOptions:f,usageLabel:y})=>{let _=u().createElement(D.L,null),b=u().createElement(D.L,null),E=u().createElement(D.L,null),S=u().createElement(D.L,null),k=u().createElement(D.L,null);const w=o&&o.meta&&o.meta.total,N=w&&o.meta.total.cost&&o.meta.total.cost.total,L=w&&o.meta.total.count,x=w&&o.meta.total.supplementary&&o.meta.total.supplementary.total&&o.meta.total.supplementary.total.value,I=w&&o.meta.total.infrastructure&&o.meta.total.infrastructure[a]&&o.meta.total.infrastructure[a].value,O=w&&o.meta.total.request,j=w&&o.meta.total.usage;w&&(_=r(N?o.meta.total.cost.total.value:0,N?o.meta.total.cost.total.units:"USD",n),b=r(x?o.meta.total.supplementary.total.value:0,x?o.meta.total.supplementary.total.units:"USD",n),E=r(I?o.meta.total.infrastructure[a].value:0,I?o.meta.total.infrastructure[a].units:"USD",n),S=r(O?o.meta.total.request.value:0,O?o.meta.total.request.units:"",i?f:n),k=j&&o.meta.total.usage.value>=0?r(j?o.meta.total.usage.value:0,j?o.meta.total.usage.units:"",f||n):r(j?o.meta.total.usage:0,L?o.meta.total.count.units:"",f||n));const R=(e=!1)=>{let a=_;"infrastructure"===t?a=E:"supplementary"===t&&(a=b);const r=e?"Alt":"";return u().createElement("div",{className:"valueContainer"},d?u().createElement(v.u,{content:p("dashboard.total_cost_tooltip",{infrastructureCost:E,supplementaryCost:b}),enableFlip:!0},u().createElement("div",{className:`value${r}`},a)):u().createElement("div",{className:`value${r}`},a),u().createElement("div",{className:"text"},u().createElement("div",null,s)))},F=()=>{if(!y)return null;const e=O?o.meta.total.request.units:"",t=(0,C.dM)(e),a=p(`units.${t}`);return u().createElement("div",{className:"valueContainer"},u().createElement("span",{className:"value"},S),Boolean(h&&(g||O&&o.meta.total.request.value>=0))&&u().createElement("span",{className:"units"},a),u().createElement("div",{className:"text"},u().createElement("div",null,l)))},M=()=>{if(!y)return null;const e=j?o.meta.total.usage.units:"",t=(0,C.dM)(g||e),a=p(`units.${t}`);return u().createElement("div",{className:"valueContainer"},u().createElement("span",{className:"value"},k),Boolean(h&&(g||j&&o.meta.total.usage.value>=0))&&u().createElement("span",{className:"units"},a),u().createElement("div",{className:"text"},u().createElement("div",null,y)))};return"dailyCost"===e||"dailyTrend"===e||"cost"===e?u().createElement(u().Fragment,null,R("cost"===c)):"trend"===e?m?u().createElement(u().Fragment,null,M(),R("cost"===c)):u().createElement(u().Fragment,null,R("cost"===c),M()):"usage"===e?m?u().createElement(u().Fragment,null,M(),F()):u().createElement(u().Fragment,null,F(),M()):null}));var _=a(57539);const b=({label:e,formatOptions:t,formatValue:a,t:s,totalValue:r,units:n,value:o})=>{const i=(0,C.dM)(n),l="usd"!==i?s(`units.${i}`):void 0,c=Number((r?o/r*100:0).toFixed(2)),d=s("percent_of_total",{percent:c,units:l,value:a(o,n,t)});return u().createElement("li",{className:"reportSummaryItem"},u().createElement(_.E,{label:d,value:c,title:e,size:_.L.sm}))};b.defaultProps={formatValue:e=>e};const E=(0,d.withTranslation)()(b);var S=a(31447);class k extends u().Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=(0,S.R)({report:t,idKey:e}),s=a.findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}));return-1!==s?[...a.slice(0,s),...a.slice(s+1),a[s]]:a}render(){const{children:e,status:t}=this.props;if(1===t)return u().createElement(u().Fragment,null,u().createElement(i.O,{width:h.N.md}),u().createElement(i.O,{className:"skeleton",width:h.N.md}),u().createElement(i.O,{className:"skeleton",width:h.N.md}),u().createElement(i.O,{className:"skeleton",width:h.N.md}));{const t=this.getItems();return u().createElement("ul",null,e({items:t}))}}}const w=(0,d.withTranslation)()(k);a(5118);var N=a(79941),L=a(29296),x=a(80469),I=a(84154),O=a(48629),j=a(52109),R=a(2370),F=a(40125),M=a(60232),P=a(63802),Z=a(36234),A=a(30136),T=a.n(A),V=a(63211),z=a(21535),U=a(27765),q=a(19960),H=a(84076),B=a(18131),Y=a(24656),W=a(84615),X=a(70698),$=a(72021),K=a(80965),G=a(41534);const Q={currentColorScale:[K.CH.value,$.R0.value,X.t6.value,W.S7.value,G.iM.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[B.cQ.value,H.iY.value,q.OS.value,U.O6.value,Y.DD.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:W.S7.value,strokeWidth:0},forecastConeDataColorScale:[W.S7.value],forecastData:{fill:"none"},forecastDataColorScale:[X.t6.value],forecastInfrastructureConeData:{fill:U.O6.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[U.O6.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[q.OS.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[z.tN.value,z.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class J extends u().Component{constructor(){super(...arguments),this.containerRef=u().createRef(),this.observer=V.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:i,showForecast:l}=this.props,c="chart.cost_legend_label",u="chart.cost_infrastructure_legend_label",d="chart.cost_infrastructure_legend_tooltip",h="chart.cost_legend_tooltip",m=[{childName:"previousCost",data:i,legendItem:{name:(0,M.uL)(i,c,!0,!0,1),symbol:{fill:Q.previousColorScale[0],type:"minus"},tooltip:(0,M.uL)(i,h,!1,!1,1)},style:{data:Object.assign(Object.assign({},Q.previousCostData),{stroke:Q.previousColorScale[0]})}},{childName:"currentCost",data:t,legendItem:{name:(0,M.uL)(t,c,!0,!1),symbol:{fill:Q.currentColorScale[0],type:"minus"},tooltip:(0,M.uL)(t,h,!1,!1)},style:{data:Object.assign(Object.assign({},Q.currentCostData),{stroke:Q.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:o,legendItem:{name:(0,M.uL)(o,u,!0,!0,1),symbol:{fill:Q.previousColorScale[1],type:"dash"},tooltip:(0,M.uL)(o,d,!1,!1,1)},style:{data:Object.assign(Object.assign({},Q.previousInfrastructureCostData),{stroke:Q.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:(0,M.uL)(e,u,!0,!1),symbol:{fill:Q.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,M.uL)(e,d,!1,!1)},style:{data:Object.assign(Object.assign({},Q.currentInfrastructureCostData),{stroke:Q.currentInfrastructureColorScale[1]})}}];l&&(m.push({childName:"forecast",data:s,legendItem:{name:(0,M.uL)(s,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:Q.forecastDataColorScale[0],type:"minus"},tooltip:(0,M.uL)(s,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Q.forecastData),{stroke:Q.forecastDataColorScale[0]})}}),m.push({childName:"forecastInfrastructure",data:n,legendItem:{name:(0,M.uL)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:Q.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,M.uL)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Q.forecastInfrastructureData),{stroke:Q.forecastInfrastructureDataColorScale[0]})}}),m.push({childName:"forecastCone",data:a,legendItem:{name:(0,M.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:Q.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,M.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Q.forecastConeData),{stroke:Q.forecastConeDataColorScale[0]})}}),m.push({childName:"forecastInfrastructureCone",data:r,legendItem:{name:(0,M.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:Q.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:(0,M.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Q.forecastInfrastructureConeData),{stroke:Q.forecastInfrastructureConeDataColorScale[0]})}}));const p=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:p,series:m})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&(s?r>675&&r<1175?n+=25:r>450&&r<675?n+=50:r<=450&&(n+=75):r>450&&r<725?n+=25:r<=450&&(n+=50)),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u().createElement(N.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return u().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return u().createElement(x.Qk,{data:(0,P.oX)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,I.u)({chartNames:(0,P.bC)(t),isHidden:t=>(0,P.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,n=e?(0,Z.getDate)((0,M.Y_)(e,!0,!0)[1]):0,o=t?(0,Z.getDate)((0,M.Y_)(t,!0,!0)[1]):0,i=a?(0,Z.getDate)((0,M.Y_)(a,!0,!0)[1]):0,l=s?(0,Z.getDate)((0,M.Y_)(s,!0,!0)[1]):0,c=r?(0,Z.getDate)((0,M.Y_)(r,!0,!0)[1]):0;return n>0||o>0||l>0||c>0?Math.max(n,o,i,l,c):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,hiddenSeries:r,series:o,width:i}=this.state,l=(0,P.ge)(o,r),c=this.getEndDate(),d=Math.floor(c/2),h=1+Math.floor(d/2),m=1+d,p=c-Math.floor(d/2),g=s?u().cloneElement(s,{disable:!(0,P.TW)(o,r),labelComponent:u().createElement(O.M,{legendData:(0,P.oX)(o,r,!0),title:e=>T().t("chart.day_of_month_title",{day:e.x})})}):void 0;return u().createElement(u().Fragment,null,a&&u().createElement(n.D,{headingLevel:"h3",size:"md"},a),u().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u().createElement("div",{style:{height:e,width:i}},u().createElement(j.k,{containerComponent:g,domain:l,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(o,r),legendPosition:"bottom-left",padding:t,theme:F.Z,width:i},o&&o.map(((e,t)=>this.getChart(e,t))),u().createElement(R.C,{style:Q.xAxis,tickValues:[1,h,m,p,c]}),u().createElement(R.C,{dependentAxis:!0,style:Q.yAxis})))))}}const ee=e=>u().createElement("div",{className:"chart"},u().createElement(J,Object.assign({},e)));var te=a(39727),ae=a(63209),se=a(75949),re=a(82874);const ne={currentColorScale:[K.CH.value,$.R0.value,X.t6.value,W.S7.value,G.iM.value],currentInfrastructureColorScale:[B.cQ.value,H.iY.value,q.OS.value,U.O6.value,Y.DD.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[re.g9.value],forecastDataColorScale:[X.t6.value],forecastInfrastructureConeDataColorScale:[re.g9.value],forecastInfrastructureDataColorScale:[q.OS.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[z.tN.value,z.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class oe extends u().Component{constructor(){super(...arguments),this.containerRef=u().createRef(),this.observer=V.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:i,showForecast:l}=this.props,c="chart.cost_legend_label",u="chart.cost_infrastructure_legend_label",d="chart.cost_infrastructure_legend_tooltip",h="chart.cost_legend_tooltip",m=[{childName:"previousCost",data:this.initDatumChildName(i,"previousCost"),legendItem:{name:(0,M.uL)(i,c,!0,!0,1),symbol:{fill:ne.previousColorScale[0],type:"minus"},tooltip:(0,M.uL)(i,h,!1,!1,1)},isLine:!0,style:{data:{stroke:ne.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(t,"currentCost"),legendItem:{name:(0,M.uL)(t,c,!0,!1),symbol:{fill:ne.currentColorScale[0],type:"minus"},tooltip:(0,M.uL)(t,h,!1,!1)},isBar:!0,style:{data:{fill:ne.currentColorScale[0]}}},{childName:"previousInfrastructureCost",data:this.initDatumChildName(o,"previousInfrastructureCost"),legendItem:{name:(0,M.uL)(o,u,!0,!0,1),symbol:{fill:ne.previousColorScale[1],type:"dash"},tooltip:(0,M.uL)(o,d,!1,!1,1)},isLine:!0,style:{data:{stroke:ne.previousColorScale[1]}}},{childName:"currentInfrastructureCost",data:this.initDatumChildName(e,"currentInfrastructureCost"),legendItem:{name:(0,M.uL)(e,u,!0,!1),symbol:{fill:ne.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,M.uL)(e,d,!1,!1)},isBar:!0,style:{data:{fill:ne.currentInfrastructureColorScale[1]}}}];l&&(m.push({childName:"forecast",data:this.initDatumChildName(s,"forecast"),legendItem:{name:(0,M.uL)(s,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:ne.forecastDataColorScale[0],type:"minus"},tooltip:(0,M.uL)(s,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:ne.forecastDataColorScale[0]}}}),m.push({childName:"forecastInfrastructure",data:this.initDatumChildName(n,"forecastInfrastructure"),legendItem:{name:(0,M.uL)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:ne.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,M.uL)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:ne.forecastInfrastructureDataColorScale[0]}}}),m.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,M.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:ne.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,M.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:ne.forecastConeDataColorScale[0]}}}),m.push({childName:"forecastInfrastructureCone",data:this.initDatumChildName(r,"forecastInfrastructureCone"),legendItem:{name:(0,M.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:ne.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:(0,M.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:ne.forecastInfrastructureConeDataColorScale[0]}}}));const p=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:p,series:m})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&(s?r>675&&r<1175?n+=25:r>450&&r<675?n+=50:r<=450&&(n+=75):r>450&&r<725?n+=25:r<=450&&(n+=50)),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return u().createElement(te.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return u().createElement(ae.m,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return u().createElement(te.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return u().createElement(te.B,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return u().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return u().createElement(x.Qk,{data:(0,P.oX)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,n=e?(0,Z.getDate)((0,M.Y_)(e,!0,!0)[1]):0,o=t?(0,Z.getDate)((0,M.Y_)(t,!0,!0)[1]):0,i=a?(0,Z.getDate)((0,M.Y_)(a,!0,!0)[1]):0,l=s?(0,Z.getDate)((0,M.Y_)(s,!0,!0)[1]):0,c=r?(0,Z.getDate)((0,M.Y_)(r,!0,!0)[1]):0;return n>0||o>0||l>0||c>0?Math.max(n,o,i,l,c):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,I.u)({chartNames:(0,P.bC)(t),isDataHidden:a=>(0,P.E0)(t,e,a),isHidden:t=>(0,P.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,hiddenSeries:r,series:o,width:i}=this.state,l=(0,P.ge)(o,r),c=this.getEndDate(),d=Math.floor(c/2),h=1+Math.floor(d/2),m=1+d,p=c-Math.floor(d/2),g=s?u().cloneElement(s,{disable:!(0,P.TW)(o,r),labelComponent:u().createElement(O.M,{legendData:(0,P.oX)(o,r,!0),title:e=>T().t("chart.day_of_month_title",{day:e.x})})}):void 0;return u().createElement(u().Fragment,null,a&&u().createElement(n.D,{headingLevel:"h3",size:"md"},a),u().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u().createElement("div",{style:{height:e,width:i}},u().createElement(j.k,{containerComponent:g,domain:l,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(o,r),legendPosition:"bottom-left",padding:t,theme:F.Z,width:i},o&&o.length>0&&u().createElement(se.G,{offset:5.5},o.map(((e,t)=>this.getChart(e,t)))),o&&o.length>0&&u().createElement(se.G,{offset:5.5},o.map(((e,t)=>this.getForecastBarChart(e,t)))),o&&o.length>0&&u().createElement(se.G,{offset:5.5},o.map(((e,t)=>this.getForecastLineChart(e,t)))),u().createElement(R.C,{style:ne.xAxis,tickValues:[1,h,m,p,c]}),u().createElement(R.C,{dependentAxis:!0,style:ne.yAxis})))))}}const ie=e=>u().createElement("div",{className:"chart"},u().createElement(oe,Object.assign({},e))),le={currentColorScale:[K.CH.value,$.R0.value,X.t6.value,W.S7.value,G.iM.value],forecastConeDataColorScale:[re.g9.value],forecastDataColorScale:[X.t6.value],itemsPerRow:4,previousColorScale:[z.tN.value,z.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ce extends u().Component{constructor(){super(...arguments),this.containerRef=u().createRef(),this.observer=V.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,i=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",l=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",c=[{childName:"previousCost",data:this.initDatumChildName(s,"previousCost"),legendItem:{name:(0,M.uL)(s,i,!0,!0,1),symbol:{fill:le.previousColorScale[0],type:"minus"},tooltip:(0,M.uL)(s,l,!1,!1,1)},isBar:!0,style:{data:{fill:le.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:(0,M.uL)(e,i,!0,!1),symbol:{fill:le.currentColorScale[0],type:"minus"},tooltip:(0,M.uL)(e,l,!1,!1)},isBar:!0,style:{data:{fill:le.currentColorScale[0]}}}];r&&(c.push({childName:"forecast",data:this.initDatumChildName(t,"forecast"),legendItem:{name:(0,M.uL)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:le.forecastDataColorScale[0],type:"minus"},tooltip:(0,M.uL)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:le.forecastDataColorScale[0]}}}),c.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,M.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:le.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,M.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:le.forecastConeDataColorScale[0]}}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:c})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&s&&r<700&&(n+=25),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return u().createElement(te.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return u().createElement(ae.m,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return u().createElement(te.B,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return u().createElement(te.B,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return u().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state;return u().createElement(x.Qk,{data:(0,P.oX)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?(0,Z.getDate)((0,M.Y_)(a,!0,!0)[1]):0,r=e?(0,Z.getDate)((0,M.Y_)(e,!0,!0)[1]):0,n=t?(0,Z.getDate)((0,M.Y_)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,n,s):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,I.u)({chartNames:(0,P.bC)(t),isDataHidden:a=>(0,P.E0)(t,e,a),isHidden:t=>(0,P.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,hiddenSeries:r,series:o,width:i}=this.state,l=(0,P.ge)(o,r),c=this.getEndDate(),d=Math.floor(c/2),h=1+Math.floor(d/2),m=1+d,p=c-Math.floor(d/2),g=s?u().cloneElement(s,{disable:!(0,P.TW)(o,r),labelComponent:u().createElement(O.M,{legendData:(0,P.oX)(o,r,!0),title:e=>T().t("chart.day_of_month_title",{day:e.x})})}):void 0;return u().createElement(u().Fragment,null,a&&u().createElement(n.D,{headingLevel:"h3",size:"md"},a),u().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u().createElement("div",{style:{height:e,width:i}},u().createElement(j.k,{containerComponent:g,domain:l,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(o,r),legendPosition:"bottom-left",padding:t,theme:F.Z,width:i},o&&o.length>0&&u().createElement(se.G,{offset:11},o.map(((e,t)=>this.getChart(e,t)))),o&&o.length>0&&u().createElement(se.G,{offset:11},u().createElement(te.B,{data:[{y:null}],name:"forcast_spacer"}),o.map(((e,t)=>this.getForecastBarChart(e,t)))),o&&o.length>0&&u().createElement(se.G,{offset:11},u().createElement(te.B,{data:[{y:null}],name:"forcast_cone_spacer"}),o.map(((e,t)=>this.getForecastLineChart(e,t)))),u().createElement(R.C,{style:le.xAxis,tickValues:[1,h,m,p,c]}),u().createElement(R.C,{dependentAxis:!0,style:le.yAxis})))))}}const ue=e=>u().createElement("div",{className:"chart"},u().createElement(ce,Object.assign({},e))),de={currentColorScale:[K.ZP.value,$.ZP.value,X.ZP.value,W.ZP.value,G.ZP.value],currentMonthData:{fill:"none"},forecastConeData:{fill:W.ZP.value,strokeWidth:0},forecastConeDataColorScale:[W.ZP.value],forecastData:{fill:"none"},forecastDataColorScale:[X.ZP.value],itemsPerRow:4,previousColorScale:[z.ZP.value,z.ZP.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class he extends u().Component{constructor(){super(...arguments),this.containerRef=u().createRef(),this.observer=V.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,i=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",l=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",c=[{childName:"previousCost",data:s,legendItem:{name:(0,M.uL)(s,i,!0,!0,1),symbol:{fill:de.previousColorScale[0],type:"minus"},tooltip:(0,M.uL)(s,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},de.previousMonthData),{stroke:de.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,M.uL)(e,i,!0,!1),symbol:{fill:de.currentColorScale[0],type:"minus"},tooltip:(0,M.uL)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},de.currentMonthData),{stroke:de.currentColorScale[0]})}}];r&&(c.push({childName:"forecast",data:t,legendItem:{name:(0,M.uL)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:de.forecastDataColorScale[0],type:"minus"},tooltip:(0,M.uL)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},de.forecastData),{stroke:de.forecastDataColorScale[0]})}}),c.push({childName:"forecastCone",data:a,legendItem:{name:(0,M.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:de.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,M.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},de.forecastConeData),{stroke:de.forecastConeDataColorScale[0]})}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:c})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&s&&r<700&&(n+=25),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u().createElement(N.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return u().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state;return u().createElement(x.Qk,{data:(0,P.oX)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?(0,Z.getDate)((0,M.Y_)(a,!0,!0)[1]):0,r=e?(0,Z.getDate)((0,M.Y_)(e,!0,!0)[1]):0,n=t?(0,Z.getDate)((0,M.Y_)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,n,s):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,I.u)({chartNames:(0,P.bC)(t),isHidden:t=>(0,P.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,hiddenSeries:r,series:o,width:i}=this.state,l=(0,P.ge)(o,r),c=this.getEndDate(),d=Math.floor(c/2);let h;h=T()&&T().t?e=>T().t("chart.day_of_month_title",{day:e.x}):e=>`Day ${e.x}`;const m=s?u().cloneElement(s,{disable:!(0,P.TW)(o,r),labelComponent:u().createElement(O.M,{legendData:(0,P.oX)(o,r,!0),title:h})}):void 0;return u().createElement(u().Fragment,null,u().createElement(n.D,{headingLevel:"h3",size:"md"},a),u().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u().createElement("div",{style:{height:e,width:i}},u().createElement(j.k,{containerComponent:m,domain:l,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,P.oX)(o,r),legendPosition:"bottom-left",padding:t,theme:F.Z,width:i},o&&o.map(((e,t)=>this.getChart(e,t))),u().createElement(R.C,{style:de.xAxis,tickValues:[1,d,c]}),u().createElement(R.C,{dependentAxis:!0,style:de.yAxis})))))}}const me=e=>u().createElement("div",{className:"chart"},u().createElement(he,Object.assign({},e))),pe={chartContainer:{marginTop:a(98499).ZP.value},currentRequestData:{data:{fill:"none",stroke:$.ZP.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:K.ZP.value}},itemsPerRow:2,legendColorScale:[z.ZP.value,K.ZP.value,z.ZP.value,$.ZP.value],previousRequestData:{data:{fill:"none",stroke:z.ZP.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:z.ZP.value}},currentColorScale:[K.ZP.value,$.ZP.value,X.ZP.value,W.ZP.value,G.ZP.value],previousColorScale:[z.ZP.value,z.ZP.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ge extends u().Component{constructor(){super(...arguments),this.containerRef=u().createRef(),this.observer=V.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r="chart.usage_legend_label",n="chart.usage_legend_tooltip",o="chart.requests_legend_label",i="chart.requests_legend_tooltip",l=[{childName:"previousUsage",data:s,legendItem:{name:(0,M.Fs)(s,r,!0,!0,1),symbol:{fill:pe.legendColorScale[0],type:"minus"},tooltip:(0,M.Fs)(s,n,!1,!1,1)},style:pe.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:(0,M.Fs)(t,r,!0,!1),symbol:{fill:pe.legendColorScale[1],type:"minus"},tooltip:(0,M.Fs)(t,n,!1,!1)},style:pe.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:(0,M.Fs)(a,o,!0,!0,1),symbol:{fill:pe.legendColorScale[2],type:"dash"},tooltip:(0,M.Fs)(a,i,!1,!1,1)},style:pe.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:(0,M.Fs)(e,o,!0,!1),symbol:{fill:pe.legendColorScale[3],type:"dash"},tooltip:(0,M.Fs)(e,i,!1,!1)},style:pe.currentRequestData}],c=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:c,series:l})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:s}=this.state;let r=a;return e&&s<480&&(r+=20),r},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u().createElement(N.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return u().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,P.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state,r=e||(s>300?pe.itemsPerRow:1);return u().createElement(x.Qk,{data:(0,P.oX)(a,t),height:25,gutter:20,itemsPerRow:r,name:"legend"})},this.handleLegendClick=e=>{const t=(0,P.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,P.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=e?(0,Z.getDate)((0,M.Y_)(e,!0,!0)[1]):0,n=t?(0,Z.getDate)((0,M.Y_)(t,!0,!0)[1]):0,o=a?(0,Z.getDate)((0,M.Y_)(a,!0,!0)[1]):0,i=s?(0,Z.getDate)((0,M.Y_)(s,!0,!0)[1]):0;return r>0||n>0||o>0||i>0?Math.max(r,n,o,i):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,I.u)({chartNames:(0,P.bC)(t),isHidden:t=>(0,P.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:75,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:s,hiddenSeries:r,series:o,width:i}=this.state,l=(0,P.ge)(o,r),c=this.getEndDate(),d=Math.floor(c/2),h=s?u().cloneElement(s,{disable:!(0,P.TW)(o,r),labelComponent:u().createElement(O.M,{legendData:(0,P.oX)(o,r,!0),title:e=>T().t("chart.day_of_month_title",{day:e.x})})}):void 0;return u().createElement(u().Fragment,null,u().createElement(n.D,{headingLevel:"h3",size:"md"},a),u().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u().createElement("div",{style:{height:e,width:i}},u().createElement(j.k,{containerComponent:h,domain:l,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,P.oX)(o,r),legendPosition:"bottom-left",padding:t,theme:F.Z,width:i},o&&o.map(((e,t)=>this.getChart(e,t))),u().createElement(R.C,{style:pe.xAxis,tickValues:[1,d,c]}),u().createElement(R.C,{dependentAxis:!0,style:pe.yAxis})))))}}const fe=e=>u().createElement("div",{className:"chart"},u().createElement(ge,Object.assign({},e)))},99163:(e,t,a)=>{"use strict";a.d(t,{L:()=>o});var s=a(13325),r=a(97522),n=a.n(r);const o=()=>n().createElement("span",{className:"emptyValueContainer"},n().createElement(s.V_,null))},73466:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(16177),r=a(48716),n=a(39173),o=a(52413),i=a(97522),l=a.n(i);const c=(0,a(55399).withRouter)((({title:e})=>l().createElement(l().Fragment,null,e&&l().createElement(r.Z,null,l().createElement(n.Z,{title:e})),l().createElement(s.Z,null,l().createElement(o.G,null)))))},64146:(e,t,a)=>{"use strict";a.d(t,{Z:()=>D});var s=a(16177),r=a(48716),n=a(39173),o=a(97522),i=a.n(o),l=a(55399),c=a(9947),u=a(38424),d=a(60485),h=a(75106),m=a(47173),p=a(59867),g=a(57827);class f extends i().Component{render(){const{showReload:e=!0,t}=this.props;return i().createElement(c.u,{variant:c.I.large,className:"pf-m-redhat-font"},i().createElement(u.k,{icon:p.Yw}),i().createElement(d.D,{headingLevel:"h5",size:"lg"},t("no_data_state.title")),i().createElement(h.B,null,t("no_data_state.desc")),e&&i().createElement(m.zx,{variant:"primary",onClick:()=>window.location.reload()},t("no_data_state.refresh")))}}const v=(0,l.withRouter)((0,g.withTranslation)()(f)),D=(0,l.withRouter)((({showReload:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(r.Z,null,i().createElement(n.Z,{title:t})),i().createElement(s.Z,null,i().createElement(v,{showReload:e})))))},13883:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var s=a(16177),r=a(48716),n=a(39173),o=a(97522),i=a.n(o),l=a(55399),c=a(9947),u=a(38424),d=a(60485),h=a(75106),m=a(47173),p=a(50470),g=a(20777),f=a(57827);const v=a(55572),D=(0,f.withTranslation)()((({className:e,t})=>i().createElement("img",{className:`cost-icon ${e}`,src:v,alt:t("cost_management"),"aria-hidden":"true"})));var C=a(17386),y=a(98499);const _={iconSpacer:{marginLeft:a(73861).ZP.value},viewSources:{marginTop:y.ZP.value}};class b extends i().Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{t:a}=this.props;return i().createElement("a",{href:a(t),rel:"noreferrer",target:"_blank"},a(e),i().createElement("span",{style:_.iconSpacer},i().createElement(p.LA,null)))},this.getRouteToSources=()=>`${(0,C.I)()}/settings/sources`}render(){const{providerType:e,t}=this.props;let a,s,r,n="no_providers_state.overview_desc",o="no_providers_state.overview_title";switch(e){case"aws":n="no_providers_state.aws_desc",o="no_providers_state.aws_title";break;case"azure":n="no_providers_state.azure_desc",o="no_providers_state.azure_title";break;case"gcp":n="no_providers_state.gcp_desc",o="no_providers_state.gcp_title";break;case"ibm":n="no_providers_state.ibm_desc",o="no_providers_state.ibm_title";break;case"ocp":n="no_providers_state.ocp_desc",a="docs.add_ocp_sources",r="no_providers_state.ocp_add_sources",o="no_providers_state.ocp_title";break;default:s=D}return i().createElement(c.u,{variant:c.I.large,className:"pf-m-redhat-font"},i().createElement(u.k,{icon:s||g.wl}),i().createElement(d.D,{headingLevel:"h5",size:"lg"},t(o)),i().createElement(h.B,null,t(n)),a&&r?i().createElement("div",{style:_.viewSources},this.getDocLink(r,a)):i().createElement(m.zx,{variant:"primary",component:"a",href:this.getRouteToSources()},t("no_providers_state.get_started")))}}const E=(0,l.withRouter)((0,f.withTranslation)()(b)),S=(0,l.withRouter)((({providerType:e,title:t})=>i().createElement(i().Fragment,null,t&&i().createElement(r.Z,null,i().createElement(n.Z,{title:t})),i().createElement(s.Z,null,i().createElement(E,{providerType:e})))))},94329:(e,t,a)=>{"use strict";a.d(t,{g8:()=>s,Mg:()=>r,rL:()=>n});const s=e=>{let t=!1;if(e&&e.data)for(const a of e.data)if(a.current_month_data){t=!0;break}return t},r=e=>{let t=!1;if(e&&e.data)for(const a of e.data)if(a.has_data){t=!0;break}return t},n=e=>{let t=!1;if(e&&e.data)for(const a of e.data)if(a.previous_month_data){t=!0;break}return t}},31447:(e,t,a)=>{"use strict";a.d(t,{R:()=>i,c:()=>u});var s=a(30136),r=a.n(s),n=a(60114),o=a(45997);function i({daily:e,idKey:t,report:a,sortDirection:s=0,sortKey:r="date"}){return(0,n.D)(u({daily:e,idKey:t,report:a,sortDirection:s,sortKey:r}),{key:r,direction:s})}function l(e,t,a){return{markup:{value:(a&&a[t]&&a[t].markup?a[t].markup.value:0)+(e[t]&&e[t].markup?e[t].markup.value:0),units:e&&e[t]&&e[t].markup?e[t].markup.units:"USD"},raw:{value:(a&&a[t]&&a[t].raw?a[t].raw.value:0)+(e[t]&&e[t].raw?e[t].raw.value:0),units:e&&e[t]&&e[t].raw?e[t].raw.units:"USD"},total:{value:(a&&a[t]&&a[t].total?a[t].total.value:0)+(e[t]&&e[t].total?Number(e[t].total.value):0),units:e&&e[t]&&e[t].total?e[t].total.units:null},usage:{value:(a&&a[t]&&a[t].usage?a[t].usage.value:0)+(e[t]&&e[t].usage?Number(e[t].usage.value):0),units:e&&e[t]&&e[t].usage?e[t].usage.units:null}}}function c(e,t){return{capacity:{value:(t&&t.capacity?t.capacity.value:0)+(e.capacity?e.capacity.value:0),units:e&&e.capacity?e.capacity.units:"Core-Hours"},limit:{value:(t&&t.limit?t.limit.value:0)+(e.limit?e.limit.value:0),units:e&&e.limit?e.limit.units:"Core-Hours"},request:{value:(t&&t.request?t.request.value:0)+(e.request?e.request.value:0),units:e&&e.request?e.request.units:"Core-Hours"},usage:{value:(t&&t.usage?t.usage.value:0)+(e.usage?e.usage.value:0),units:e&&e.usage?e.usage.units:"Core-Hours"}}}function u({daily:e=!1,report:t,idKey:a}){if(!t)return[];const s=new Map,n=i=>{const u=i.type;i&&i.values&&i.values.forEach((n=>{let i=n.id?n.id:n[a];i||(i=n.date);const d=`${i}${"date"!==a&&"cluster"!==a&&n.cluster?`-${n.cluster}`:""}`,h=n.clusters&&n.clusters.length>0?n.clusters[0]:void 0,m=h||n.cluster,p=n.clusters?n.clusters:[],g=n.date,f=n.delta_percent?n.delta_percent:0,v=n.delta_value?n.delta_value:0,D=n.source_uuid?n.source_uuid:[];let C;if(t.meta&&t.meta.others&&("Other"===i||"Others"===i))C=r().t("chart.others",{count:t.meta.others});else{const e=function({idKey:e,report:t,value:a}){let s=String(e);if(t.meta&&t.meta.group_by){const r=t.meta.group_by;for(const t of Object.keys(r))if(t.indexOf(o.P)){const t=o.P+e;a.hasOwnProperty(t)&&(s=t)}}return s}({report:t,idKey:a,value:n});C="org_entities"===e&&n.alias?n.alias:"account"===e&&n.account_alias?n.account_alias:"cluster"===e&&h?h:n[e]instanceof Object?n[e].value:n[e],void 0!==C&&0!==C.trim().length||(C=n.alias&&n.alias.trim().length>0?n.alias:n[a])}if(e){const e=Object.assign(Object.assign({},c(n)),{cluster:m,clusters:p,cost:l(n,"cost"),date:g,delta_percent:f,delta_value:v,id:i,infrastructure:l(n,"infrastructure"),label:C,source_uuid:D,supplementary:l(n,"supplementary"),type:u}),t=s.get(d);if(t)t.set(g,e);else{const t=new Map;t.set(g,e),s.set(d,t)}}else{const e=s.get(d);e?s.set(d,Object.assign(Object.assign(Object.assign({},e),c(n,e)),{cluster:m,clusters:p,date:g,delta_percent:f,delta_value:v,cost:l(n,"cost",e),id:i,infrastructure:l(n,"infrastructure",e),label:C,source_uuid:D,supplementary:l(n,"supplementary",e),type:u})):s.set(d,Object.assign(Object.assign({},c(n)),{cluster:m,clusters:p,cost:l(n,"cost"),date:g,delta_percent:f,delta_value:v,id:i,infrastructure:l(n,"infrastructure"),label:C,source_uuid:D,supplementary:l(n,"supplementary"),type:u}))}}));for(const e in i)if(i[e]instanceof Array)return i[e].forEach(n)};return t&&t.data&&t.data.forEach(n),Array.from(s.values())}},63211:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s=()=>{}},17386:(e,t,a)=>{"use strict";a.d(t,{I:()=>s});const s=()=>{const e=window.location.pathname.split("/");e.shift();let t="";return"beta"===e[0]&&(t="/beta"),t}},57279:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});const s={xs:"16%",sm:"33%",md:"66%",lg:"100%"}},60114:(e,t,a)=>{"use strict";function s(e,t){return"string"==typeof e?e:e[t.key]}function r(e,t){const{direction:a=0}=t||{};return[...e].sort(((e,r)=>{const n=s(0===a?e:r,t),o=s(0===a?r:e,t);return n>o?-1:n<o?1:0}))}a.d(t,{D:()=>r})},55572:(e,t,a)=>{"use strict";e.exports=a.p+"6c64594e3aaa32a18532.svg"}}]);
//# sourceMappingURL=c433e3d20c30d3f7d58e.bundle.js.map