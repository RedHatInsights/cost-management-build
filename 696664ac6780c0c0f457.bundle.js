(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1145:function(e,t,a){},1173:function(e,t,a){"use strict";a.r(t);a(1145);var r=a(428),s=a(429),n=a(272),o=a(461),c=a(356),i=a(235),l=a(44),u=a(691),h=a(757),d=a(833),p=a(436),m=a(437),g=a(1),f=a.n(g);const b=({DashboardWidget:e,selectWidgets:t,widgets:a})=>f.a.createElement("div",null,f.a.createElement(p.a,{hasGutter:!0},a.map(a=>t[a].details.showHorizontal?f.a.createElement(m.a,{sm:12,key:a},f.a.createElement(e,{widgetId:a})):f.a.createElement(m.a,{lg:12,xl:6,xl2:4,key:a},f.a.createElement(e,{widgetId:a})))));var v=a(720),y=a(171),_=a(248),C=a(347),D=a(172),O=a(742),j=a(773),E=a(755),T=a.n(E),S=a(744),w=a.n(S),R=a(813),I=a.n(R),k=a(784),F=a.n(k),N=a(761),P=a(1011),L=a(741),x=a(228),A=a(408),W=a(394);class z extends f.a.Component{constructor(){super(...arguments),this.defaultState={isChartComparisonOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e,t:t}=this.props;return e.map(e=>f.a.createElement(x.a,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label)))},this.getCurrentLabel=()=>{const{currentItem:e,options:t,t:a}=this.props;let r="";for(const s of t)if(e===s.value){r=a(s.label);break}return r},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isChartComparisonOpen:!this.state.isChartComparisonOpen})},this.handleToggle=e=>{this.setState({isChartComparisonOpen:e})}}render(){const{isChartComparisonOpen:e}=this.state,t=this.getDropDownItems();return f.a.createElement(A.a,{onSelect:this.handleSelect,toggle:f.a.createElement(W.a,{onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:e,dropdownItems:t})}}const U=Object(v.a)()(z);var H=a(681),M=a.n(H),V=a(653),K=a.n(V),Q=a(675),q=a.n(Q);const B={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},G={comparison:{marginBottom:K.a.value},tabs:{marginTop:M.a.value},tabItems:{marginTop:q.a.value}};class Y extends f.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0,currentComparison:"cumulative"},this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:a}=this.props,r=a(e);return`${t.viewAllPath}?${Object(D.a)({group_by:{[r]:"*"},order_by:{cost:"desc"}})}`},this.getChart=(e,t,a=!1)=>{const{chartType:r,trend:s}=this.props;return"dailyTrend"===r?this.getDailyTrendChart(e,t,a,s.showSupplementaryLabel):"dailyCost"===r?this.getDailyCostChart(e,t,a):"trend"===r?this.getTrendChart(e,t,a,s.showSupplementaryLabel):"usage"===r?this.getUsageChart(t,a):null},this.getChartComparison=()=>{const{t:e,trend:t}=this.props,{currentComparison:a}=this.state,r=this.getUnits(),s=e(t.titleKey,{units:e("units."+r)}),n=[{label:e(t.dailyTitleKey,{units:e("units."+r)}),value:"daily"},{label:s,value:"cumulative"}];return f.a.createElement(U,{currentItem:a||n[0].value,onItemClicked:this.handleComparisonClick,options:n})},this.getDailyCostChart=(e,t,a=!1)=>{const{currentReport:r,previousReport:s,trend:n}=this.props,{currentComparison:o}=this.state,c=n.computedReportItem,i=n.computedReportItemValue,l="daily"===o,u=l?1:n.type,h=Object(O.j)(r,u,"date","infrastructure",i),d=Object(O.j)(s,u,"date","infrastructure",i),p=Object(O.j)(r,u,"date",c,i),m=Object(O.j)(s,u,"date",c,i),g=this.getForecastData(r,n.computedForecastItem),b=this.getForecastData(r,n.computedForecastInfrastructureItem),v=l?j.d:j.c;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:G.comparison},this.getChartComparison()),f.a.createElement(v,{adjustContainerHeight:a,containerHeight:e,currentCostData:p,currentInfrastructureCostData:h,forecastConeData:g.forecastConeData,forecastData:g.forecastData,forecastInfrastructureConeData:b.forecastConeData,forecastInfrastructureData:b.forecastData,formatDatumValue:L.b,formatDatumOptions:n.formatOptions,height:t,previousCostData:m,previousInfrastructureCostData:d,showForecast:void 0!==n.computedForecastItem}))},this.getDailyTrendChart=(e,t,a=!1,r=!1)=>{const{currentReport:s,details:n,previousReport:o,trend:c}=this.props,{currentComparison:i}=this.state,l=this.getUnits(),u=c.computedReportItem,h=c.computedReportItemValue,d="daily"===i,p=d?1:c.type,m=Object(O.j)(s,p,"date",u,h),g=Object(O.j)(o,p,"date",u,h),{forecastData:b,forecastConeData:v}=this.getForecastData(s,c.computedForecastItem),y=d?j.e:j.i;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{style:G.comparison},this.getChartComparison()),f.a.createElement(y,{adjustContainerHeight:a,containerHeight:e,currentData:m,forecastData:b,forecastConeData:v,formatDatumValue:L.b,formatDatumOptions:c.formatOptions,height:t,previousData:g,showForecast:void 0!==c.computedForecastItem,showSupplementaryLabel:r,showUsageLegendLabel:n.showUsageLegendLabel,units:l}))},this.getForecastData=(e,t="cost")=>{const{forecast:a,trend:r}=this.props,{currentComparison:s}=this.state,n="daily"===s?1:r.type;let o,c;if(t){const r=Object(N.cloneDeep)(a);if(r&&(r.data=[]),a&&e&&e.data){const s=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.value:0,o=e.data.filter(e=>e.values.length),c=o[o.length-1]?o[o.length-1].date:void 0;if(a&&a.data){const e=new Date(c),t=e.getMonth()+1;for(const s of a.data){const a=new Date(s.date),n=a.getMonth()+1;a>e&&t===n&&r.data.push(s)}}0===n&&r.data.unshift({date:c,values:[{date:c,cost:{confidence_max:{value:0},confidence_min:{value:0},total:{value:s,units:"USD"}},infrastructure:{confidence_max:{value:0},confidence_min:{value:0},total:{value:s,units:"USD"}},supplementary:{confidence_max:{value:0},confidence_min:{value:0},total:{value:s,units:"USD"}}}]})}o=Object(O.h)(r,n,t),c=Object(O.i)(r,n,t)}return{forecastData:o,forecastConeData:c}},this.getTrendChart=(e,t,a=!1,r=!1)=>{const{currentReport:s,details:n,previousReport:o,t:c,trend:i}=this.props,l=this.getUnits(),u=c(i.titleKey,{units:c("units."+l)}),h=i.computedReportItem,d=i.computedReportItemValue,p=Object(O.j)(s,i.type,"date",h,d),m=Object(O.j)(o,i.type,"date",h,d),{forecastData:g,forecastConeData:b}=this.getForecastData(s,i.computedForecastItem);return f.a.createElement(j.i,{adjustContainerHeight:a,containerHeight:e,currentData:p,forecastData:g,forecastConeData:b,formatDatumValue:L.b,formatDatumOptions:i.formatOptions,height:t,previousData:m,showForecast:void 0!==i.computedForecastItem,showSupplementaryLabel:r,showUsageLegendLabel:n.showUsageLegendLabel,title:u,units:l})},this.getUsageChart=(e,t=!1)=>{const{currentReport:a,previousReport:r,t:s,trend:n}=this.props,o=this.getUnits(),c=s(n.titleKey,{units:s("units."+o)}),i=Object(O.j)(a,n.type,"date","request"),l=Object(O.j)(r,n.type,"date","request"),u=Object(O.j)(a,n.type,"date","usage"),h=Object(O.j)(r,n.type,"date","usage");return f.a.createElement(j.j,{adjustContainerHeight:t,containerHeight:B.containerUsageHeight,currentRequestData:i,currentUsageData:u,formatDatumValue:L.b,formatDatumOptions:n.formatOptions,height:e,previousRequestData:l,previousUsageData:h,title:c})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:a,reportType:r,trend:s}=this.props,n=s.computedReportItem||"cost",o=s.computedReportItemValue||"total",c=this.getUnits();return f.a.createElement(j.f,{chartType:e,computedReportItem:n,computedReportItemValue:o,costLabel:this.getDetailsLabel(a.costKey,c),formatOptions:a.formatOptions,formatValue:L.b,report:t,reportType:r,requestLabel:this.getDetailsLabel(a.requestKey,c),showTooltip:a.showTooltip,showUnits:a.showUnits,showUsageFirst:a.showUsageFirst,units:a.units,usageFormatOptions:a.usageFormatOptions,usageLabel:this.getDetailsLabel(a.usageKey,c)})},this.getDetailsLabel=(e,t)=>{const{t:a}=this.props;return e?a(e,{units:a("units."+t)}):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?f.a.createElement(P.a,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,t:a}=this.props;return a("group_by.all",{groupBy:t(e)||""})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=B.containerAltHeight,chartAltHeight:t=B.chartAltHeight,currentReportFetchStatus:a,details:r}=this.props;return f.a.createElement(j.b,{detailsLink:this.getDetailsLink(),status:a,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,r.adjustContainerHeight))},this.getSubTitle=()=>{const{t:e}=this.props,t=new Date,a=I()(t),r=T()(t,"D"),s=T()(F()(t),"D");return e("dashboard.widget_subtitle",{count:w()(t),endDate:r,month:a,startDate:s})},this.getTab=(e,t)=>{const{getIdKeyForTab:a,tabsReport:n,tabsReportFetchStatus:o}=this.props,c=a(e);return f.a.createElement(r.a,{eventKey:t,key:a(e)+"-tab",title:f.a.createElement(s.a,null,this.getTabTitle(e))},f.a.createElement("div",{style:G.tabItems},f.a.createElement(j.h,{idKey:c,key:c+"-items",report:n,status:o},({items:t})=>t.map(t=>this.getTabItem(e,t)))))},this.getTabItem=(e,t)=>{const{availableTabs:a,details:r,getIdKeyForTab:s,tabsReport:n,topItems:o,trend:c}=this.props,{activeTabKey:i}=this.state,l=s(e),u=s(a[i]),h=c.computedReportItem||"cost",d=c.computedReportItemValue||"total";let p;const m=n&&n.meta&&n.meta.total;return"usage"===h?m&&n.meta.total.usage&&(p=n.meta.total.usage.value):m&&n.meta.total[h]&&n.meta.total[h][d]&&(p=n.meta.total[h][d].value),u===l?f.a.createElement(j.g,{key:t.id+"-item",formatOptions:o.formatOptions,formatValue:L.b,label:t.label?t.label.toString():"",totalValue:p,units:r.units?r.units:this.getUnits(),value:t[h][d].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return f.a.createElement(o.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))},this.getTabTitle=e=>{const{getIdKeyForTab:t,t:a}=this.props;return a("group_by.top",{groupBy:t(e)||""})},this.getTitle=()=>{const{t:e,titleKey:t}=this.props,a=new Date,r=I()(a);return e(t,{endDate:T()(a,"Do"),month:r,startDate:T()(F()(a),"Do")})},this.getUnits=()=>{const{currentReport:e,details:t,trend:a}=this.props,r=a.computedReportItem||"cost",s=a.computedReportItemValue||"total";if(t.units)return t.units;let n;const o=e&&e.meta&&e.meta.total;if("usage"===r){n=o&&e.meta.total.usage?Object(L.c)(e.meta.total.usage.units):""}else{n=o&&e.meta.total[r]&&e.meta.total[r][s]?Object(L.c)(e.meta.total[r][s].units):""}return n},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:a}=this.props;return f.a.createElement(j.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(B.containerTrendHeight,B.chartHeight,a.adjustContainerHeight),Boolean(e)&&f.a.createElement("div",{style:G.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleInsightsNavClick=()=>{const{details:e}=this.props;e.appNavId&&insights.chrome.appNavClick({id:e.appNavId,secondaryNav:!0})},this.handleTabClick=(e,t)=>{const{availableTabs:a,id:r,updateTab:s}=this.props;s(r,a[t]),this.setState({activeTabKey:t})}}componentDidMount(){const{availableTabs:e,fetchForecasts:t,fetchReports:a,id:r,trend:s,updateTab:n,widgetId:o}=this.props;e&&n(r,e[0]),a&&a(o),void 0!==s.computedForecastItem&&t(o)}render(){const{details:e}=this.props;return e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}var $=a(56),X=a(26);const J=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},Z=Object(_.a)((e,{widgetId:t})=>{const a=C.c.selectWidget(e,t),r=C.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:J,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),ee={fetchForecasts:C.a.fetchWidgetForecasts,fetchReports:C.a.fetchWidgetReports,updateTab:C.a.changeWidgetTab},te=Object(v.a)()(Object(y.connect)(Z,ee)(Y)),ae=Object(_.a)((e,t)=>({DashboardWidget:te,selectWidgets:C.c.selectWidgets(e),widgets:C.c.selectCurrentWidgets(e)}));var re=Object(v.a)()(Object(y.connect)(ae,{})(b)),se=a(348);const ne=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},oe=Object(_.a)((e,{widgetId:t})=>{const a=se.c.selectWidget(e,t),r=se.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:ne,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),ce={fetchForecasts:se.a.fetchWidgetForecasts,fetchReports:se.a.fetchWidgetReports,updateTab:se.a.changeWidgetTab},ie=Object(v.a)()(Object(y.connect)(oe,ce)(Y)),le=Object(_.a)((e,t)=>({DashboardWidget:ie,selectWidgets:se.c.selectWidgets(e),widgets:se.c.selectCurrentWidgets(e)}));var ue=Object(v.a)()(Object(y.connect)(le,{})(b)),he=a(349);const de=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},pe=Object(_.a)((e,{widgetId:t})=>{const a=he.c.selectWidget(e,t),r=he.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:de,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),me={fetchForecasts:he.a.fetchWidgetForecasts,fetchReports:he.a.fetchWidgetReports,updateTab:he.a.changeWidgetTab},ge=Object(v.a)()(Object(y.connect)(pe,me)(Y)),fe=Object(_.a)((e,t)=>({DashboardWidget:ge,selectWidgets:he.c.selectWidgets(e),widgets:he.c.selectCurrentWidgets(e)}));var be=Object(v.a)()(Object(y.connect)(fe,{})(b)),ve=a(350);const ye=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},_e=Object(_.a)((e,{widgetId:t})=>{const a=ve.c.selectWidget(e,t),r=ve.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:ye,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),Ce={fetchForecasts:ve.a.fetchWidgetForecasts,fetchReports:ve.a.fetchWidgetReports,updateTab:ve.a.changeWidgetTab},De=Object(v.a)()(Object(y.connect)(_e,Ce)(Y)),Oe=Object(_.a)((e,t)=>({DashboardWidget:De,selectWidgets:ve.c.selectWidgets(e),widgets:ve.c.selectCurrentWidgets(e)}));var je=Object(v.a)()(Object(y.connect)(Oe,{})(b)),Ee=a(351);const Te=e=>{switch(e){case"services":return"service";case"projects":return"project";case"regions":return"region";case"instance_type":return"instance_type"}},Se=Object(_.a)((e,{widgetId:t})=>{const a=Ee.c.selectWidget(e,t),r=Ee.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Te,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),we={fetchForecasts:Ee.a.fetchWidgetForecasts,fetchReports:Ee.a.fetchWidgetReports,updateTab:Ee.a.changeWidgetTab},Re=Object(v.a)()(Object(y.connect)(Se,we)(Y)),Ie=Object(_.a)((e,t)=>({DashboardWidget:Re,selectWidgets:Ee.c.selectWidgets(e),widgets:Ee.c.selectCurrentWidgets(e)}));var ke=Object(v.a)()(Object(y.connect)(Ie,{})(b)),Fe=a(236);const Ne=e=>{switch(e){case"accounts":return"account";case"regions":return"region";case"services":return"service"}},Pe=Object(_.a)((e,{widgetId:t})=>{const a=Fe.c.selectWidget(e,t),r=Fe.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Ne,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),Le={fetchForecasts:Fe.a.fetchWidgetForecasts,fetchReports:Fe.a.fetchWidgetReports,updateTab:Fe.a.changeWidgetTab},xe=Object(v.a)()(Object(y.connect)(Pe,Le)(Y)),Ae=Object(_.a)((e,t)=>({DashboardWidget:xe,selectWidgets:Fe.c.selectWidgets(e),widgets:Fe.c.selectCurrentWidgets(e)}));var We=Object(v.a)()(Object(y.connect)(Ae,{})(b)),ze=a(352);const Ue=250,He=250,Me=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Ve=Object(_.a)((e,{widgetId:t})=>{const a=ze.c.selectWidget(e,t),r=ze.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Me,chartAltHeight:Ue,containerAltHeight:He,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),Ke={fetchForecasts:ze.a.fetchWidgetForecasts,fetchReports:ze.a.fetchWidgetReports,updateTab:ze.a.changeWidgetTab},Qe=Object(v.a)()(Object(y.connect)(Ve,Ke)(Y)),qe=Object(_.a)((e,t)=>({DashboardWidget:Qe,selectWidgets:ze.c.selectWidgets(e),widgets:ze.c.selectCurrentWidgets(e)}));var Be=Object(v.a)()(Object(y.connect)(qe,{})(b)),Ge=a(353);const Ye=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},$e=Object(_.a)((e,{widgetId:t})=>{const a=Ge.c.selectWidget(e,t),r=Ge.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:Ye,currentQuery:r.current,forecastQuery:r.forecast,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),forecast:$.c.selectForecast(e,a.forecastPathsType,a.forecastType,r.forecast),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),Xe={fetchForecasts:Ge.a.fetchWidgetForecasts,fetchReports:Ge.a.fetchWidgetReports,updateTab:Ge.a.changeWidgetTab},Je=Object(v.a)()(Object(y.connect)($e,Xe)(Y)),Ze=Object(_.a)((e,t)=>({DashboardWidget:Je,selectWidgets:Ge.c.selectWidgets(e),widgets:Ge.c.selectCurrentWidgets(e)}));var et=Object(v.a)()(Object(y.connect)(Ze,{})(b)),tt=a(354);const at=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},rt=Object(_.a)((e,{widgetId:t})=>{const a=tt.c.selectWidget(e,t),r=tt.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},a),{getIdKeyForTab:at,currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,currentReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.current),currentReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.current),previousReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.previous),tabsReport:X.c.selectReport(e,a.reportPathsType,a.reportType,r.tabs),tabsReportFetchStatus:X.c.selectReportFetchStatus(e,a.reportPathsType,a.reportType,r.tabs)})}),st={fetchReports:tt.a.fetchWidgetReports,updateTab:tt.a.changeWidgetTab},nt=Object(v.a)()(Object(y.connect)(rt,st)(Y)),ot=Object(_.a)((e,t)=>({DashboardWidget:nt,selectWidgets:tt.c.selectWidgets(e),widgets:tt.c.selectCurrentWidgets(e)}));var ct=Object(v.a)()(Object(y.connect)(ot,{})(b)),it=a(760),lt=a(769),ut=a(334),ht=a(340),dt=a(805),pt=a(685),mt=a.n(pt),gt=a(652),ft=a.n(gt);const bt={infoIcon:{fontSize:mt.a.value},infoTitle:{fontWeight:"bold"},perspective:{marginTop:ft.a.value},tabs:{marginTop:ft.a.value}};var vt=a(907);const yt=e=>{switch(e){case"infrastructure":return"infrastructure";case"ocp":return"ocp"}},_t=[{label:"overview.perspective.all",value:"all"},{label:"overview.perspective.supplementary",value:"supplementary"}],Ct=[{label:"overview.perspective.all_cloud",value:"all_cloud"}],Dt=[{label:"overview.perspective.aws",value:"aws"}],Ot=[{label:"overview.perspective.aws_cloud",value:"aws_cloud"}],jt=[{label:"overview.perspective.azure",value:"azure"}],Et=[{label:"overview.perspective.azure_cloud",value:"azure_cloud"}],Tt=[{label:"overview.perspective.gcp",value:"gcp"}],St=[{label:"overview.perspective.ocp_usage",value:"ocp_usage"}];class wt extends f.a.Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const e=[],t=this.isAwsAvailable(),a=this.isAzureAvailable(),r=this.isGcpAvailable(),s=this.isOcpAvailable(),n=this.isOcpCloudAvailable();return s&&e.push({contentRef:f.a.createRef(),tab:"ocp"}),(t||a||r||n)&&e.push({contentRef:f.a.createRef(),tab:"infrastructure"}),e},this.getCurrentTab=()=>{const{activeTabKey:e}=this.state,t=this.isAwsAvailable(),a=this.isAzureAvailable(),r=this.isGcpAvailable(),s=this.isOcpAvailable(),n=this.isOcpCloudAvailable();return s&&!(t||a||r||n)?"ocp":!s&&(t||a||r||n)?"infrastructure":0===e?"ocp":"infrastructure"},this.getDefaultInfrastructurePerspective=()=>{const e=this.isAwsAvailable(),t=this.isAzureAvailable(),a=this.isGcpAvailable();return this.isOcpAvailable()?"all_cloud":e?"aws":t?"azure":a?"gcp":void 0},this.getDefaultOcpPerspective=()=>{if(this.isOcpAvailable())return"all"},this.getPerspective=()=>{const{currentInfrastructurePerspective:e,currentOcpPerspective:t}=this.state,a=this.isAwsAvailable(),r=this.isAzureAvailable(),s=this.isGcpAvailable(),n=this.isOcpAvailable();if(!(a||r||s||n))return null;const o=[];"infrastructure"===this.getCurrentTab()?(n&&o.push(...Ct),a&&o.push(...Dt),n&&a&&o.push(...Ot),s&&o.push(...Tt),r&&o.push(...jt),n&&r&&o.push(...Et),n&&o.push(...St)):o.push(..._t);const c="infrastructure"===this.getCurrentTab()?e:t;return f.a.createElement(vt.a,{currentItem:c||o[0].value,onItemClicked:this.handlePerspectiveClick,options:o})},this.getTab=(e,t,a)=>f.a.createElement(r.a,{eventKey:a,key:yt(e)+"-tab",tabContentId:"tab-"+a,tabContentRef:t,title:f.a.createElement(s.a,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map((e,t)=>f.a.createElement(n.a,{eventKey:t,key:yt(e.tab)+"-tabContent",id:"tab-"+t,ref:e.contentRef},this.getTabItem(e.tab,t))),this.hasCurrentMonthData=e=>{let t=!1;if(e&&e.data)for(const a of e.data)if(a.current_month_data){t=!0;break}return t},this.getTabItem=(e,t)=>{const{awsProviders:a,azureProviders:r,gcpProviders:s,ocpProviders:n}=this.props,{activeTabKey:o,currentInfrastructurePerspective:c,currentOcpPerspective:i}=this.state,l=f.a.createElement(f.a.Fragment,null),u=f.a.createElement(dt.a,{showReload:!1});if(o!==t)return l;const h=yt(e);return"infrastructure"===h?"all_cloud"===c?this.hasCurrentMonthData(n)?f.a.createElement(We,null):u:"aws"===c?this.hasCurrentMonthData(a)?f.a.createElement(ue,null):u:"aws_cloud"===c?this.hasCurrentMonthData(a)?f.a.createElement(re,null):u:"gcp"===c?this.hasCurrentMonthData(s)?f.a.createElement(ke,null):u:"azure"===c?this.hasCurrentMonthData(r)?f.a.createElement(je,null):u:"azure_cloud"===c?this.hasCurrentMonthData(r)?f.a.createElement(be,null):u:"ocp_usage"===c?this.hasCurrentMonthData(n)?f.a.createElement(ct,null):u:this.hasCurrentMonthData(n)?f.a.createElement(We,null):u:"ocp"===h?"all"===i?this.hasCurrentMonthData(n)?f.a.createElement(Be,null):u:"supplementary"===i?this.hasCurrentMonthData(n)?f.a.createElement(et,null):u:this.hasCurrentMonthData(n)?f.a.createElement(Be,null):u:l},this.getTabs=e=>{const{activeTabKey:t}=this.state;return f.a.createElement(o.a,{activeKey:t,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e.tab,e.contentRef,t)))},this.getTabTitle=e=>{const{t:t}=this.props;return"infrastructure"===e?t("overview.infrastructure"):"ocp"===e?t("overview.ocp"):void 0},this.handlePerspectiveClick=e=>{const t=this.getCurrentTab();this.setState(Object.assign(Object.assign({},"infrastructure"===t&&{currentInfrastructurePerspective:e}),"ocp"===t&&{currentOcpPerspective:e}))},this.handleTabClick=(e,t)=>{const{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t})},this.isAwsAvailable=()=>{const{awsProviders:e,userAccess:t}=this.props,a=t.data.find(e=>"aws"===e.type);return a&&a.access&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isAzureAvailable=()=>{const{azureProviders:e,userAccess:t}=this.props,a=t.data.find(e=>"azure"===e.type);return a&&a.access&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isGcpAvailable=()=>{const{gcpProviders:e,userAccess:t}=this.props,a=t.data.find(e=>"gcp"===e.type);return a&&a.access&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isOcpAvailable=()=>{const{ocpProviders:e,userAccess:t}=this.props,a=t.data.find(e=>"ocp"===e.type);return a&&a.access&&void 0!==e&&void 0!==e.meta&&e.meta.count>0},this.isOcpCloudAvailable=()=>this.isAwsAvailable()&&this.isOcpAvailable()}componentDidMount(){this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}componentDidUpdate(e){const{awsProviders:t,azureProviders:a,gcpProviders:r,ocpProviders:s,userAccess:n}=this.props;e.userAccess===n&&e.awsProviders===t&&e.azureProviders===a&&e.gcpProviders===r&&e.ocpProviders===s||this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}render(){const{awsProvidersFetchStatus:e,azureProvidersFetchStatus:t,gcpProvidersFetchStatus:a,ocpProvidersFetchStatus:r,userAccessFetchStatus:s,t:n}=this.props,o=this.getAvailableTabs(),h=1===e||1===t||1===a||1===r||1===s,d=!this.isAwsAvailable()&&2===e,p=!this.isAzureAvailable()&&2===t,m=!this.isGcpAvailable()&&2===a,g=!this.isOcpAvailable()&&2===r,b=d&&p&&m&&g,v=n("navigation.overview");return b?f.a.createElement(lt.a,{title:v}):h?f.a.createElement(it.a,{title:v}):f.a.createElement(f.a.Fragment,null,f.a.createElement("section",{className:"pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light headerOverride}"},f.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},f.a.createElement(c.a,{headingLevel:"h2",size:"2xl"},n("overview.title"),f.a.createElement("span",{style:bt.infoIcon},f.a.createElement(i.a,{"aria-label":n("ocp_details.supplementary_aria_label"),enableFlip:!0,bodyContent:f.a.createElement(f.a.Fragment,null,f.a.createElement("p",{style:bt.infoTitle},n("overview.ocp_cloud")),f.a.createElement("p",null,n("overview.ocp_cloud_desc")),f.a.createElement("br",null),f.a.createElement("p",{style:bt.infoTitle},n("overview.ocp")),f.a.createElement("p",null,n("overview.ocp_desc")),f.a.createElement("br",null),f.a.createElement("p",{style:bt.infoTitle},n("overview.gcp")),f.a.createElement("p",null,n("overview.gcp_desc")),f.a.createElement("br",null),f.a.createElement("p",{style:bt.infoTitle},n("overview.aws")),f.a.createElement("p",null,n("overview.aws_desc")),f.a.createElement("br",null),f.a.createElement("p",{style:bt.infoTitle},n("overview.azure")),f.a.createElement("p",null,n("overview.azure_desc")))},f.a.createElement(l.a,{variant:l.c.plain},f.a.createElement(u.OutlinedQuestionCircleIcon,null)))))),f.a.createElement("div",{style:bt.tabs},this.getTabs(o)),f.a.createElement("div",{style:bt.perspective},this.getPerspective())),f.a.createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},this.getTabContent(o)))}}const Rt=Object(_.a)((e,t)=>{const a=Object(h.a)(ut.a),r=ut.g.selectProviders(e,"aws",a),s=ut.g.selectProvidersFetchStatus(e,"aws",a),n=Object(h.a)(ut.b),o=ut.g.selectProviders(e,"azure",n),c=ut.g.selectProvidersFetchStatus(e,"azure",n),i=Object(h.a)(ut.c),l=ut.g.selectProviders(e,"gcp",i),u=ut.g.selectProvidersFetchStatus(e,"gcp",i),p=Object(h.a)(ut.d),m=ut.g.selectProviders(e,"ocp",p),g=ut.g.selectProvidersFetchStatus(e,"ocp",p),f=Object(d.a)(ht.a);return{awsProviders:r,awsProvidersFetchStatus:s,awsProvidersQueryString:a,azureProviders:o,azureProvidersFetchStatus:c,azureProvidersQueryString:n,gcpProviders:l,gcpProvidersFetchStatus:u,gcpProvidersQueryString:i,ocpProviders:m,ocpProvidersFetchStatus:g,ocpProvidersQueryString:p,userAccess:ht.d.selectUserAccess(e,"",f),userAccessError:ht.d.selectUserAccessError(e,"",f),userAccessFetchStatus:ht.d.selectUserAccessFetchStatus(e,"",f),userAccessQueryString:f}});var It=Object(v.a)()(Object(y.connect)(Rt)(wt));t.default=It},741:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return o}));const r=e=>{const t=e?e.toLowerCase():"";switch(t){case"usd":case"gb":case"gb-hours":case"gb-mo":case"core-hours":case"hrs":case"tag-mo":case"vm-hours":return t;default:return""}},s=(e,t,a={})=>{const s=r(t),l=e||0;switch(s){case"usd":return o(l,s,a);case"gb":case"gb-hours":case"gb-mo":case"tag-mo":case"vm-hours":return c(l,s,a);case"core-hours":case"hrs":return i(l,s,a);default:return n(l,s,a)}},n=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a}),o=(e,t,{fractionDigits:a=2}={})=>{let r=e;return e||(r=0),r.toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:a,maximumFractionDigits:a})},c=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a}),i=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a})},742:function(e,t,a){"use strict";a.d(t,"h",(function(){return y})),a.d(t,"i",(function(){return _})),a.d(t,"j",(function(){return C})),a.d(t,"b",(function(){return T})),a.d(t,"c",(function(){return S})),a.d(t,"d",(function(){return w})),a.d(t,"a",(function(){return R})),a.d(t,"e",(function(){return I})),a.d(t,"g",(function(){return k})),a.d(t,"f",(function(){return F}));var r=a(845),s=a.n(r),n=a(755),o=a.n(n),c=a(744),i=a.n(c),l=a(846),u=a.n(l),h=a(784),d=a.n(h),p=a(135),m=a(766);function g({forecast:e,sortDirection:t=0,sortKey:a="date"}){return Object(m.a)(function({forecast:e}){if(!e)return[];const t=new Map,a=e=>{e&&e.values&&e.values.forEach(e=>{const a=e.date,r=t.get(a);r?t.set(a,Object.assign(Object.assign({},r),{date:a,cost:f(e,"cost",r),infrastructure:f(e,"infrastructure",r),supplementary:f(e,"supplementary",r)})):t.set(a,{date:a,cost:f(e,"cost"),infrastructure:f(e,"infrastructure"),supplementary:f(e,"supplementary")})});for(const t in e)if(e[t]instanceof Array)return e[t].forEach(a)};e&&e.data&&e.data.forEach(a);return Array.from(t.values())}({forecast:e,sortDirection:t,sortKey:a}),{key:a,direction:t})}function f(e,t,a){return{confidence_max:{value:a?a[t].confidence_max.value:0+e[t]&&e[t].confidence_max?e[t].confidence_max.value:0,units:e[t]&&e[t].confidence_max?e[t].confidence_max.units:"USD"},confidence_min:{value:a?a[t].confidence_min.value:0+e[t]&&e[t].confidence_min?e[t].confidence_min.value:0,units:e[t]&&e[t].confidence_min?e[t].confidence_min.units:"USD"},pvalues:{value:e[t]&&e[t].pvalues?Number(e[t].pvalues.value):0,units:e[t]&&e[t].pvalues?e[t].pvalues.units:null},rsquared:{value:e[t]&&e[t].rsquared?Number(e[t].rsquared.value):0,units:e[t]&&e[t].rsquared?e[t].rsquared.units:null},total:{value:a?a[t].total.value:0+e[t]&&e[t].total?e[t].total.value:0,units:e[t]&&e[t].total?e[t].total.units:"USD"}}}var b=a(750),v=a(741);function y(e,t=1,a="cost",r="total"){if(!e)return[];const s=g({forecast:e,sortKey:"date",sortDirection:1});let n;return n=1===t||2===t?s.map(e=>D(e[a][r].value,e)):s.reduce((e,t)=>{const s=e.length?e[e.length-1].y:0;return[...e,D(s+t[a][r].value,t)]},[]),E(n,t)}function _(e,t=1,a="cost",r="total"){if(!e)return[];const s=g({forecast:e,sortKey:"date",sortDirection:1});let n;return n=1===t||2===t?s.map(e=>O(e[a].confidence_max.value,e[a].confidence_min.value,e)):s.reduce((e,t)=>{const s=e.length?e[e.length-1].y:t[a][r].value,n=e.length?e[e.length-1].y0:t[a][r].value;return[...e,O(s+t[a].confidence_max.value,n+t[a].confidence_min.value,t)]},[]),E(n,t)}function C(e,t=1,a="date",r="cost",s="total"){if(!e)return[];const n={idKey:a,report:e,sortKey:"id",sortDirection:1},o=Object(b.a)(n);let c;return c=1===t||2===t?o.map(e=>j(e[r][s]?e[r][s].value:e[r].value,e,a,r,s)):o.reduce((e,t)=>{const n=e.length?e[e.length-1].y:0,o=t[r][s]?t[r][s].value:t[r].value;return[...e,j(n+o,t,a,r,s)]},[]),"date"===a?E(c,t):c}function D(e,t,a="cost",r="total"){const s=i()(t.date),n=F(e)?parseFloat(e.toFixed(2)):k(e)?e:0;return{x:s,y:null===e?null:n,key:t.date,units:t[a]&&t[a][r]?t[a][r].units:void 0}}function O(e,t,a,r="cost",s="total"){const n=i()(a.date),o=F(e)?parseFloat(e.toFixed(2)):k(e)?e:0,c=F(t)?parseFloat(t.toFixed(2)):k(t)?t:0;return{x:n,y:null===e?null:o,y0:null===t?null:c,key:a.date,units:a[r]&&a[r][s]?a[r][s].units:void 0}}function j(e,t,a="date",r="cost",s="total"){const n="date"===a?i()(t.id):t.label,o=F(e)?parseFloat(e.toFixed(2)):k(e)?e:0;return{x:n,y:null===e?null:o,key:t.id,units:t[r]?t[r][s]?t[r][s].units:t[r].units:void 0}}function E(e,t=1){const a=[];if(!e||0===e.length)return a;const r=new Date(e[0].key+"T00:00:00"),n=new Date(e[e.length-1].key+"T00:00:00");let c=d()(r);for(let e=c.getDate();e<r.getDate();e++){c.setDate(e);const t=o()(c,"YYYY-MM-DD");a.push(j(null,{id:t},"date",null))}a.push(...e),c=new Date(n);for(let e=c.getDate()+1;e<=s()(n).getDate();e++){c.setDate(e);const t=o()(c,"YYYY-MM-DD");a.push(j(null,{id:t},"date",null))}return function(e,t=1){const a=[];if(!e||0===e.length)return a;const r=new Date(e[0].key+"T00:00:00"),n=new Date(e[e.length-1].key+"T00:00:00"),c=d()(r);let l;for(let r=c.getDate();r<=s()(n).getDate();r++){c.setDate(r);const s=o()(c,"YYYY-MM-DD"),n=e.find(e=>e.key===s);n?a.push(n):l&&a.push(Object.assign(Object.assign({},l),{key:s,x:i()(s)})),n&&(l=1===t?{key:s,x:i()(s),y:null}:n)}return a}(a,t)}function T(e,t=!0,a=!1,r=0){const[n,o]=function(e,t=0){if(!e||!e.length){const e=new Date;t&&e.setMonth(e.getMonth()-t);return[d()(e),e]}let a=0;for(let t=a;t<e.length;t++)if(e[t].y&&null!==e[t].y){a=t;break}let r=e.length-1;for(let t=r;t>=0;t--)if(e[t].y&&null!==e[t].y){r=t;break}return[new Date(e[a].key+"T00:00:00"),new Date(e[r].key+"T00:00:00")]}(e,r);if(t&&n.setDate&&n.setDate(1),a&&n.setDate){const e=s()(n).getDate();o.setDate(e)}return[n,o]}function S(e){let t=-1,a=-1;return e&&e.length&&e.forEach(e=>{const r=void 0!==e.y0?Math.max(e.y,e.y0):e.y,s=void 0!==e.y0?Math.min(e.y,e.y0):e.y;r>t&&(t=r),(-1===a||s<a)&&null!==s&&(a=s)}),{max:t,min:a}}function w(e){return function(t,a=null,r={}){const s=Object(v.c)(a);switch(s){case"core-hours":case"hrs":case"gb":case"gb-hours":case"gb-mo":case"vm-hours":return p.a.t("unit_tooltips."+s,{value:""+e(t,a,r)});default:return""+e(t,a,r)}}}function R(e,t="chart.cost_legend_label",a=!1,r=!1,s=0){if(!e||!e.length)return p.a.t(t+"_no_data");const[n,c]=T(e,a,r,s);return p.a.t(t,{count:i()(c),endDate:o()(c,"D"),month:Number(o()(n,"M"))-1,startDate:o()(n,"D"),year:u()(c)})}function I(e,t="chart.usage_legend_label",a=!1,r=!1,s=0){return R(e,t,a,r,s)}function k(e){return Number(e)===e&&e%1==0}function F(e){return Number(e)===e&&e%1!=0}},745:function(e,t,a){},746:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return h})),a.d(t,"g",(function(){return d})),a.d(t,"h",(function(){return p}));var r=a(724),s=a(135),n=a(742);const o=e=>{const t=[];return e&&e.map(e=>{t.push(e.childName)}),t},c=(e,t)=>{const a={x:[1,31]};let r=-1,s=-1;e&&e.forEach((e,a)=>{if(!p(t,a)&&e.data&&0!==e.data.length){const{max:t,min:a}=Object(n.c)(e.data);r=Math.max(r,t),s=-1===s?a:Math.min(s,a)}});const o=.1*r,c=r>0?Math.ceil(r+o):0,i=s>0?Math.max(0,Math.floor(s-o)):0,l=i>0?i:0;return c>0&&(a.y=[l,c]),a},i=(e,t,a=!1)=>{if(!e)return;const s=e.map((e,s)=>Object.assign(Object.assign(Object.assign({childName:e.childName},e.legendItem),a&&{name:e.legendItem.tooltip}),Object(r.b)(t.has(s))));return a?s:s.filter(e=>-1===e.childName.indexOf("Cone"))},l=(e,t,a)=>{const r=Object(n.d)(t),o=void 0!==e.y&&null!==e.y?r(e.y,e.units,a):void 0,c=void 0!==e.y0&&null!==e.y0?r(e.y0,e.units,a):void 0;return void 0!==o&&void 0!==c?s.a.t("chart.cost_forecast_cone_tooltip",{value0:c,value1:o}):void 0!==o?o:s.a.t("chart.no_data")},u=(e,t,a)=>{const r=new Set(t);r.delete(a)||r.add(a);const s=e[a].childName;if(-1!==s.indexOf("forecast")){let t;for(let a=0;a<e.length;a++)if(e[a].childName===s+"Cone"){t=a;break}void 0===a||r.delete(t)||r.add(t)}return r},h=(e,t)=>{const a=[];return e&&e.forEach((e,r)=>{(p(t,r)||e.data&&0===e.data.length)&&a.push(r)}),a.length!==(e?e.length:0)},d=(e,t,a)=>{if(a&&a.length)for(let r,s=t.keys();!(r=s.next()).done;){let t,s;for(const e of a)if(e.childName){t=e.childName;break}for(const t of e[r.value].data)if(t.childName){s=t.childName;break}if(s&&t&&s===t)return!0}return!1},p=(e,t)=>e.has(t)},747:function(e,t,a){"use strict";var r=a(134),s=a(23);const n={padding:8};var o={area:Object.assign({},n),axis:Object.assign({},n),bar:Object.assign({},n),boxplot:Object.assign({},n),candlestick:Object.assign({},n),chart:Object.assign({},n),errorbar:Object.assign({},n),group:Object.assign({},n),legend:{},line:Object.assign({},n),pie:Object.assign({},n),scatter:Object.assign({},n),stack:Object.assign({},n),tooltip:{},voronoi:Object.assign({},n)};const c=(()=>Object(r.k)(s.q.default,s.r.default,o))();t.a=c},750:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var r=a(766),s=a(33);function n({daily:e,idKey:t,report:a,sortDirection:s=0,sortKey:n="date"}){return Object(r.a)(i({daily:e,idKey:t,report:a,sortDirection:s,sortKey:n}),{key:n,direction:s})}function o(e,t,a){return{markup:{value:(a?a[t].markup.value:0)+e[t]&&e[t].markup?e[t].markup.value:0,units:e[t]&&e[t].markup?e[t].markup.units:"USD"},raw:{value:(a?a[t].raw.value:0)+e[t]&&e[t].raw?e[t].raw.value:0,units:e[t]&&e[t].raw?e[t].raw.units:"USD"},total:{value:(a?a[t].total.value:0)+e[t]&&e[t].total?Number(e[t].total.value):0,units:e[t]&&e[t].total?e[t].total.units:null},usage:{value:(a?a[t].usage.value:0)+e[t]&&e[t].usage?Number(e[t].usage.value):0,units:e[t]&&e[t].usage?e[t].usage.units:null}}}function c(e,t){return{capacity:{value:(t?t.capacity.value:0)+e.capacity?e.capacity.value:0,units:e.capacity?e.capacity.units:"Core-Hours"},limit:{value:(t?t.limit.value:0)+e.limit?e.limit.value:0,units:e.limit?e.limit.units:"Core-Hours"},request:{value:(t?t.request.value:0)+e.request?e.request.value:0,units:e.request?e.request.units:"Core-Hours"},usage:{value:(t?t.usage.value:0)+e.usage?e.usage.value:0,units:e.usage?e.usage.units:"Core-Hours"}}}function i({daily:e=!1,report:t,idKey:a}){if(!t)return[];const r=new Map,n=i=>{if(i&&i.values){const n=i.type;i.values.forEach(i=>{const l="date"!==a&&"cluster"!==a&&i.cluster?"-"+i.cluster:"";let u="org_entities"===a?i.org_unit_id:i[a];void 0===u&&(u=i.date);const h=`${u}${l}`,d=i.clusters&&i.clusters.length>0?i.clusters[0]:void 0,p=d||i.cluster,m=i.clusters?i.clusters:[],g=i.date,f=i.delta_percent?i.delta_percent:0,b=i.delta_value?i.delta_value:0,v=i.source_uuid?i.source_uuid:[];let y;const _=function({idKey:e,report:t,value:a}){let r=String(e);if(t.meta&&t.meta.group_by){const n=t.meta.group_by;for(const t of Object.keys(n))if(t.indexOf(s.i)){const t=s.i+e;a.hasOwnProperty(t)&&(r=t)}}return r}({report:t,idKey:a,value:i});if(y="org_entities"===_&&i.alias?i.alias:"account"===_&&i.account_alias?i.account_alias:"cluster"===_&&d?d:i[_]instanceof Object?i[_].value:i[_],void 0===y&&(y=i.alias?i.alias:i[a]),e){const e=Object.assign(Object.assign({},c(i)),{cluster:p,clusters:m,cost:o(i,"cost"),date:g,delta_percent:f,delta_value:b,id:u,infrastructure:o(i,"infrastructure"),label:y,source_uuid:v,supplementary:o(i,"supplementary"),type:n}),t=r.get(h);if(t)t.set(g,e);else{const t=new Map;t.set(g,e),r.set(h,t)}}else{const e=r.get(h);e?r.set(h,Object.assign(Object.assign(Object.assign({},e),c(i,e)),{cluster:p,clusters:m,date:g,delta_percent:f,delta_value:b,cost:o(i,"cost",e),id:u,infrastructure:o(i,"infrastructure",e),label:y,source_uuid:v,supplementary:o(i,"supplementary",e),type:n})):r.set(h,Object.assign(Object.assign({},c(i)),{cluster:p,clusters:m,cost:o(i,"cost"),date:g,delta_percent:f,delta_value:b,id:u,infrastructure:o(i,"infrastructure"),label:y,source_uuid:v,supplementary:o(i,"supplementary"),type:n}))}})}for(const e in i)if(i[e]instanceof Array)return i[e].forEach(n)};return t&&t.data&&t.data.forEach(n),Array.from(r.values())}},757:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(250);function s(e){return Object(r.stringify)(e,{encode:!1,indices:!1})}},759:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(410),s=a(291),n=a(356),o=a(411),c=a(1),i=a.n(c),l=a(720);const u=Object(l.a)()(({t:e})=>{const t=e("loading_state.sources_title"),a=e("loading_state.sources_desc");return i.a.createElement(r.a,{variant:r.b.large,className:"pf-m-redhat-font"},i.a.createElement(s.a,{size:"lg"}),i.a.createElement(n.a,{headingLevel:"h5",size:"lg"},t),i.a.createElement(o.a,null,a))})},760:function(e,t,a){"use strict";var r=a(380),s=a(752),n=a(759),o=a(1),c=a.n(o),i=a(487);var l=Object(i.a)(({title:e})=>c.a.createElement(c.a.Fragment,null,e&&c.a.createElement(s.PageHeader,null,c.a.createElement(s.PageHeaderTitle,{title:e})),c.a.createElement(r.Main,null,c.a.createElement(n.a,null))));t.a=l},766:function(e,t,a){"use strict";function r(e,t){if("string"==typeof e)return e;return e[t.key]}function s(e,t){const{direction:a=0}=t||{};return[...e].sort((e,s)=>{const n=r(0===a?e:s,t),o=r(0===a?s:e,t);return n>o?-1:n<o?1:0})}a.d(t,"a",(function(){return s}))},768:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(796);var r=a(684),s=a(1),n=a.n(s);const o=()=>n.a.createElement("span",{className:"emptyValueContainer"},n.a.createElement(r.MinusIcon,null))},769:function(e,t,a){"use strict";var r=a(380),s=a(752),n=a(1),o=a.n(n),c=a(487),i=a(410),l=a(412),u=a(356),h=a(411),d=a(44),p=a(683),m=a(678),g=(a(788),a(720));const f=a(789);var b=Object(g.a)()(({className:e,t:t})=>o.a.createElement("img",{className:"cost-icon "+e,src:f,alt:t("cost_management"),"aria-hidden":"true"})),v=a(781),y=a(652),_=a.n(y),C=a(669);const D={iconSpacer:{marginLeft:a.n(C).a.value},viewSources:{marginTop:_.a.value}};class O extends o.a.Component{constructor(){super(...arguments),this.getDocLink=(e,t)=>{const{t:a}=this.props;return o.a.createElement("a",{href:a(t),rel:"noreferrer",target:"_blank"},a(e),o.a.createElement("span",{style:D.iconSpacer},o.a.createElement(p.ExternalLinkAltIcon,null)))},this.getRouteToSources=()=>Object(v.a)()+"/settings/sources"}render(){const{providerType:e,t:t}=this.props;let a,r,s,n="no_providers_state.overview_desc",c="no_providers_state.overview_title";switch(e){case"aws":n="no_providers_state.aws_desc",c="no_providers_state.aws_title";break;case"azure":n="no_providers_state.azure_desc",c="no_providers_state.azure_title";break;case"gcp":n="no_providers_state.gcp_desc",c="no_providers_state.gcp_title";break;case"ocp":n="no_providers_state.ocp_desc",a="docs.add_ocp_sources",s="no_providers_state.ocp_add_sources",c="no_providers_state.ocp_title";break;default:r=b}return o.a.createElement(i.a,{variant:i.b.large,className:"pf-m-redhat-font"},o.a.createElement(l.a,{icon:r||m.PlusCircleIcon}),o.a.createElement(u.a,{headingLevel:"h5",size:"lg"},t(c)),o.a.createElement(h.a,null,t(n)),a&&s?o.a.createElement("div",{style:D.viewSources},this.getDocLink(s,a)):o.a.createElement(d.a,{variant:"primary",component:"a",href:this.getRouteToSources()},t("no_providers_state.get_started")))}}const j=Object(c.a)(Object(g.a)()(O));var E=Object(c.a)(({providerType:e,title:t})=>o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(s.PageHeader,null,o.a.createElement(s.PageHeaderTitle,{title:t})),o.a.createElement(r.Main,null,o.a.createElement(j,{providerType:e}))));t.a=E},773:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return g})),a.d(t,"f",(function(){return y})),a.d(t,"g",(function(){return D})),a.d(t,"h",(function(){return E})),a.d(t,"c",(function(){return se})),a.d(t,"d",(function(){return he})),a.d(t,"e",(function(){return me})),a.d(t,"i",(function(){return be})),a.d(t,"j",(function(){return Ce}));a(793);var r=a(185),s=a(400),n=a(356),o=a(398),c=a(399),i=a(748),l=a(1),u=a.n(l),h=a(720);const d=Object(h.a)()(({children:e,detailsLink:t,title:a,subTitle:l,status:h})=>u.a.createElement(r.a,{className:"reportSummary"},u.a.createElement(s.a,null,u.a.createElement(n.a,{headingLevel:"h2",size:"lg"},a),Boolean(l)&&u.a.createElement("p",{className:"subtitle"},l)),u.a.createElement(o.a,null,1===h?u.a.createElement(u.a.Fragment,null,u.a.createElement(i.Skeleton,{size:"xs"}),u.a.createElement(i.Skeleton,{className:"chartSkeleton",size:"md"}),u.a.createElement(i.Skeleton,{size:"sm"}),u.a.createElement(i.Skeleton,{className:"legendSkeleton",size:"xs"})):e),Boolean(t)&&u.a.createElement(c.a,null,t)));a(794);var p=a(436),m=a(437);const g=Object(h.a)()(({children:e,detailsLink:t,status:a,subTitle:l,tabs:h,title:d})=>u.a.createElement(r.a,{className:"reportSummary"},u.a.createElement(p.a,{hasGutter:!0},u.a.createElement(m.a,{xl:8},u.a.createElement("div",{className:"cost"},u.a.createElement(s.a,null,u.a.createElement(n.a,{headingLevel:"h2",size:"lg"},d),Boolean(l)&&u.a.createElement("p",{className:"subtitle"},l)),u.a.createElement(o.a,null,1===a?u.a.createElement(u.a.Fragment,null,u.a.createElement(i.Skeleton,{size:"xs"}),u.a.createElement(i.Skeleton,{className:"chartSkeleton",size:"md"}),u.a.createElement(i.Skeleton,{size:"sm"}),u.a.createElement(i.Skeleton,{className:"legendSkeleton",size:"xs"})):e))),u.a.createElement(m.a,{xl:4},u.a.createElement("div",{className:"tops"},1!==a&&u.a.createElement(u.a.Fragment,null,Boolean(h)&&u.a.createElement(o.a,null,h),Boolean(t)&&u.a.createElement(c.a,null,t)))))));a(795);var f=a(89),b=a(768),v=a(741);const y=Object(h.a)()(({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:r,formatValue:s,formatOptions:n,report:o,requestFormatOptions:c,requestLabel:i,reportType:l,showTooltip:h=!1,showUnits:d=!1,showUsageFirst:p=!1,t:m,units:g,usageFormatOptions:y,usageLabel:_})=>{let C=u.a.createElement(b.a,null),D=u.a.createElement(b.a,null),O=u.a.createElement(b.a,null),j=u.a.createElement(b.a,null),E=u.a.createElement(b.a,null);const T=o&&o.meta&&o.meta.total,S=T&&o.meta.total.cost&&o.meta.total.cost.total,w=T&&o.meta.total.count,R=T&&o.meta.total.supplementary&&o.meta.total.supplementary.total&&o.meta.total.supplementary.total.value,I=T&&o.meta.total.infrastructure&&o.meta.total.infrastructure[a]&&o.meta.total.infrastructure[a].value,k=T&&o.meta.total.request,F=T&&o.meta.total.usage;T&&(C=s(S?o.meta.total.cost.total.value:0,S?o.meta.total.cost.total.units:"USD",n),D=s(R?o.meta.total.supplementary.total.value:0,R?o.meta.total.supplementary.total.units:"USD",n),O=s(I?o.meta.total.infrastructure[a].value:0,I?o.meta.total.infrastructure[a].units:"USD",n),j=s(k?o.meta.total.request.value:0,k?o.meta.total.request.units:"",c?y:n),E=F&&o.meta.total.usage.value>=0?s(F?o.meta.total.usage.value:0,F?o.meta.total.usage.units:"",y||n):s(F?o.meta.total.usage:0,w?o.meta.total.count.units:"",y||n));const N=(e=!1)=>{let a=C;"infrastructure"===t?a=O:"supplementary"===t&&(a=D);const s=e?"Alt":"";return u.a.createElement("div",{className:"valueContainer"},h?u.a.createElement(f.a,{content:m("dashboard.total_cost_tooltip",{infrastructureCost:O,supplementaryCost:D}),enableFlip:!0},u.a.createElement("div",{className:"value"+s},a)):u.a.createElement("div",{className:"value"+s},a),u.a.createElement("div",{className:"text"},u.a.createElement("div",null,r)))},P=()=>{if(!_)return null;const e=k?o.meta.total.request.units:"",t=Object(v.c)(e),a=m("units."+t);return u.a.createElement("div",{className:"valueContainer"},u.a.createElement("span",{className:"value"},j),Boolean(d&&(g||k&&o.meta.total.request.value>=0))&&u.a.createElement("span",{className:"units"},a),u.a.createElement("div",{className:"text"},u.a.createElement("div",null,i)))},L=()=>{if(!_)return null;const e=F?o.meta.total.usage.units:"",t=Object(v.c)(g||e),a=m("units."+t);return u.a.createElement("div",{className:"valueContainer"},u.a.createElement("span",{className:"value"},E),Boolean(d&&(g||F&&o.meta.total.usage.value>=0))&&u.a.createElement("span",{className:"units"},a),u.a.createElement("div",{className:"text"},u.a.createElement("div",null,_)))};return"dailyCost"===e||"dailyTrend"===e||"cost"===e?u.a.createElement(u.a.Fragment,null,N("cost"===l)):"trend"===e?p?u.a.createElement(u.a.Fragment,null,L(),N("cost"===l)):u.a.createElement(u.a.Fragment,null,N("cost"===l),L()):"usage"===e?p?u.a.createElement(u.a.Fragment,null,L(),P()):u.a.createElement(u.a.Fragment,null,P(),L()):null});a(797);var _=a(424);const C=({label:e,formatOptions:t,formatValue:a,t:r,totalValue:s,units:n,value:o})=>{const c=Object(v.c)(n),i="usd"!==c?r("units."+c):void 0,l=Number((s?o/s*100:0).toFixed(2)),h=r("percent_of_total",{percent:l,units:i,value:a(o,n,t)});return u.a.createElement("li",{className:"reportSummaryItem"},u.a.createElement(_.a,{label:h,value:l,title:e,size:_.b.sm}))};C.defaultProps={formatValue:e=>e};const D=Object(h.a)()(C);a(798);var O=a(750);class j extends u.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=Object(O.a)({report:t,idKey:e}),r=a.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==r?[...a.slice(0,r),...a.slice(r+1),a[r]]:a}render(){const{children:e,status:t}=this.props;if(1===t)return u.a.createElement(u.a.Fragment,null,u.a.createElement(i.Skeleton,{size:"md"}),u.a.createElement(i.Skeleton,{size:"md",className:"skeleton"}),u.a.createElement(i.Skeleton,{size:"md",className:"skeleton"}),u.a.createElement(i.Skeleton,{size:"md",className:"skeleton"}));{const t=this.getItems();return u.a.createElement("ul",null,e({items:t}))}}}const E=Object(h.a)()(j);a(799),a(745);var T=a(725),S=a(726),w=a(328),R=a(724),I=a(740),k=a(728),F=a(729),N=a(747),P=a(742),L=a(746),x=a(744),A=a.n(x),W=a(135),z=a(660),U=a.n(z),H=a(666),M=a(665),V=a(662),K=a(664),Q=a(667),q=a(658),B=a.n(q),G=a(657),Y=a.n(G),$=a(655),X=a.n($),J=a(656),Z=a.n(J),ee=a(659),te=a.n(ee);const ae={currentColorScale:[J.chart_color_green_400.value,$.chart_color_green_300.value,G.chart_color_green_200.value,q.chart_color_green_100.value,ee.chart_color_green_500.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[K.chart_color_blue_400.value,V.chart_color_blue_300.value,M.chart_color_blue_200.value,H.chart_color_blue_100.value,Q.chart_color_blue_500.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:q.chart_color_green_100.value,strokeWidth:0},forecastConeDataColorScale:[q.chart_color_green_100.value],forecastData:{fill:"none"},forecastDataColorScale:[G.chart_color_green_200.value],forecastInfrastructureConeData:{fill:H.chart_color_blue_100.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[H.chart_color_blue_100.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[M.chart_color_blue_200.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[z.chart_color_black_200.value,z.chart_color_black_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class re extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:r,forecastInfrastructureConeData:s,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:c,showForecast:i}=this.props,l="chart.cost_legend_label",u=[{childName:"previousCost",data:c,legendItem:{name:Object(P.a)(c,l,!0,!0,1),symbol:{fill:ae.previousColorScale[0],type:"minus"},tooltip:Object(P.a)(c,"chart.cost_legend_tooltip",!1,!1,1)},style:{data:Object.assign(Object.assign({},ae.previousCostData),{stroke:ae.previousColorScale[0]})}},{childName:"currentCost",data:t,legendItem:{name:Object(P.a)(t,l,!0,!1),symbol:{fill:ae.currentColorScale[0],type:"minus"},tooltip:Object(P.a)(t,"chart.cost_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ae.currentCostData),{stroke:ae.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:o,legendItem:{name:Object(P.a)(o,"chart.cost_infrastructure_legend_label",!0,!0,1),symbol:{fill:ae.previousColorScale[1],type:"dash"},tooltip:Object(P.a)(o,"chart.cost_infrastructure_legend_tooltip",!1,!1,1)},style:{data:Object.assign(Object.assign({},ae.previousInfrastructureCostData),{stroke:ae.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:Object(P.a)(e,"chart.cost_infrastructure_legend_label",!0,!1),symbol:{fill:ae.currentInfrastructureColorScale[1],type:"dash"},tooltip:Object(P.a)(e,"chart.cost_infrastructure_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ae.currentInfrastructureCostData),{stroke:ae.currentInfrastructureColorScale[1]})}}];i&&(u.push({childName:"forecast",data:r,legendItem:{name:Object(P.a)(r,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:ae.forecastDataColorScale[0],type:"minus"},tooltip:Object(P.a)(r,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ae.forecastData),{stroke:ae.forecastDataColorScale[0]})}}),u.push({childName:"forecastInfrastructure",data:n,legendItem:{name:Object(P.a)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:ae.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:Object(P.a)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ae.forecastInfrastructureData),{stroke:ae.forecastInfrastructureDataColorScale[0]})}}),u.push({childName:"forecastCone",data:a,legendItem:{name:Object(P.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:ae.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(P.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ae.forecastConeData),{stroke:ae.forecastConeDataColorScale[0]})}}),u.push({childName:"forecastInfrastructureCone",data:s,legendItem:{name:Object(P.a)(s,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:ae.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:Object(P.a)(s,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ae.forecastInfrastructureConeData),{stroke:ae.forecastInfrastructureConeDataColorScale[0]})}}));const h=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:h,series:u})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u.a.createElement(T.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=Object(S.a)("voronoi","cursor");return u.a.createElement(a,{cursorDimension:"x",labels:({datum:a})=>Object(L.d)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return u.a.createElement(w.a,{data:Object(L.c)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=Object(L.e)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r}=this.props,{width:s}=this.state;let n=a;return e&&(r?s>675&&s<1175?n+=25:s>450&&s<675?n+=50:s<=450&&(n+=75):s>450&&s<725?n+=25:s<=450&&(n+=50)),n}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getEvents(){const{hiddenSeries:e,series:t}=this.state;return Object(R.a)({chartNames:Object(L.a)(t),isHidden:t=>Object(L.h)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:r,previousCostData:s}=this.props,n=e?A()(Object(P.b)(e,!0,!0)[1]):0,o=t?A()(Object(P.b)(t,!0,!0)[1]):0,c=a?A()(Object(P.b)(a,!0,!0)[1]):0,i=r?A()(Object(P.b)(r,!0,!0)[1]):0,l=s?A()(Object(P.b)(s,!0,!0)[1]):0;return n>0||o>0||i>0||l>0?Math.max(n,o,c,i,l):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:s,series:o,width:c}=this.state,i=Object(L.b)(o,s),l=this.getEndDate(),h=Math.floor(l/2),d=1+Math.floor(h/2),p=1+h,m=l-Math.floor(h/2),g=r?u.a.cloneElement(r,{disable:!Object(L.f)(o,s),labelComponent:u.a.createElement(I.a,{legendData:Object(L.c)(o,s,!0),title:e=>W.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:c}},u.a.createElement(k.a,{containerComponent:g,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:Object(L.c)(o,s),legendPosition:"bottom-left",padding:t,theme:N.a,width:c},o&&o.map((e,t)=>this.getChart(e,t)),u.a.createElement(F.a,{style:ae.xAxis,tickValues:[1,d,p,m,l]}),u.a.createElement(F.a,{dependentAxis:!0,style:ae.yAxis})))))}}const se=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(re,Object.assign({},e)));a(800);var ne=a(730),oe=a(731),ce=a(732),ie=a(674);const le={currentColorScale:[J.chart_color_green_400.value,$.chart_color_green_300.value,G.chart_color_green_200.value,q.chart_color_green_100.value,ee.chart_color_green_500.value],currentInfrastructureColorScale:[K.chart_color_blue_400.value,V.chart_color_blue_300.value,M.chart_color_blue_200.value,H.chart_color_blue_100.value,Q.chart_color_blue_500.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[ie.chart_color_orange_300.value],forecastDataColorScale:[G.chart_color_green_200.value],forecastInfrastructureConeDataColorScale:[ie.chart_color_orange_300.value],forecastInfrastructureDataColorScale:[M.chart_color_blue_200.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[z.chart_color_black_200.value,z.chart_color_black_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ue extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:r,forecastInfrastructureConeData:s,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:c,showForecast:i}=this.props,l="chart.cost_legend_label",u=[{childName:"previousCost",data:this.initDatumChildName(c,"previousCost"),legendItem:{name:Object(P.a)(c,l,!0,!0,1),symbol:{fill:le.previousColorScale[0],type:"minus"},tooltip:Object(P.a)(c,"chart.cost_legend_tooltip",!1,!1,1)},isLine:!0,style:{data:{stroke:le.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(t,"currentCost"),legendItem:{name:Object(P.a)(t,l,!0,!1),symbol:{fill:le.currentColorScale[0],type:"minus"},tooltip:Object(P.a)(t,"chart.cost_legend_tooltip",!1,!1)},isBar:!0,style:{data:{fill:le.currentColorScale[0]}}},{childName:"previousInfrastructureCost",data:this.initDatumChildName(o,"previousInfrastructureCost"),legendItem:{name:Object(P.a)(o,"chart.cost_infrastructure_legend_label",!0,!0,1),symbol:{fill:le.previousColorScale[1],type:"dash"},tooltip:Object(P.a)(o,"chart.cost_infrastructure_legend_tooltip",!1,!1,1)},isLine:!0,style:{data:{stroke:le.previousColorScale[1]}}},{childName:"currentInfrastructureCost",data:this.initDatumChildName(e,"currentInfrastructureCost"),legendItem:{name:Object(P.a)(e,"chart.cost_infrastructure_legend_label",!0,!1),symbol:{fill:le.currentInfrastructureColorScale[1],type:"dash"},tooltip:Object(P.a)(e,"chart.cost_infrastructure_legend_tooltip",!1,!1)},isBar:!0,style:{data:{fill:le.currentInfrastructureColorScale[1]}}}];i&&(u.push({childName:"forecast",data:this.initDatumChildName(r,"forecast"),legendItem:{name:Object(P.a)(r,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:le.forecastDataColorScale[0],type:"minus"},tooltip:Object(P.a)(r,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:le.forecastDataColorScale[0]}}}),u.push({childName:"forecastInfrastructure",data:this.initDatumChildName(n,"forecastInfrastructure"),legendItem:{name:Object(P.a)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:le.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:Object(P.a)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:le.forecastInfrastructureDataColorScale[0]}}}),u.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:Object(P.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:le.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(P.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:le.forecastConeDataColorScale[0]}}}),u.push({childName:"forecastInfrastructureCone",data:this.initDatumChildName(s,"forecastInfrastructureCone"),legendItem:{name:Object(P.a)(s,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:le.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:Object(P.a)(s,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:le.forecastInfrastructureConeDataColorScale[0]}}}));const h=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:h,series:u})},this.initDatumChildName=(e,t)=>(e.map(e=>e.childName=t),e),this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!a.has(t)&&!e.isForecast){if(e.isBar)return u.a.createElement(ne.a,{alignment:"middle",data:e.data,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return u.a.createElement(oe.a,{data:e.data,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;return!a.has(t)&&e.isForecast&&e.isBar?u.a.createElement(ne.a,{alignment:"middle",data:e.data,key:e.childName,name:e.childName,style:e.style}):null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;return!a.has(t)&&e.isForecast&&e.isLine?u.a.createElement(ne.a,{alignment:"middle",barWidth:1,data:e.data,key:e.childName,name:e.childName,style:e.style}):null},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=Object(S.a)("voronoi","cursor");return u.a.createElement(a,{cursorDimension:"x",labels:({datum:a})=>Object(L.d)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return u.a.createElement(w.a,{data:Object(L.c)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=Object(L.e)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r}=this.props,{width:s}=this.state;let n=a;return e&&(r?s>675&&s<1175?n+=25:s>450&&s<675?n+=50:s<=450&&(n+=75):s>450&&s<725?n+=25:s<=450&&(n+=50)),n}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:r,previousCostData:s}=this.props,n=e?A()(Object(P.b)(e,!0,!0)[1]):0,o=t?A()(Object(P.b)(t,!0,!0)[1]):0,c=a?A()(Object(P.b)(a,!0,!0)[1]):0,i=r?A()(Object(P.b)(r,!0,!0)[1]):0,l=s?A()(Object(P.b)(s,!0,!0)[1]):0;return n>0||o>0||i>0||l>0?Math.max(n,o,c,i,l):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return Object(R.a)({chartNames:Object(L.a)(t),isDataHidden:a=>Object(L.g)(t,e,a),isHidden:t=>Object(L.h)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:s,series:o,width:c}=this.state,i=Object(L.b)(o,s),l=this.getEndDate(),h=Math.floor(l/2),d=1+Math.floor(h/2),p=1+h,m=l-Math.floor(h/2),g=r?u.a.cloneElement(r,{disable:!Object(L.f)(o,s),labelComponent:u.a.createElement(I.a,{legendData:Object(L.c)(o,s,!0),title:e=>W.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:c}},u.a.createElement(k.a,{containerComponent:g,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:Object(L.c)(o,s),legendPosition:"bottom-left",padding:t,theme:N.a,width:c},o&&o.length>0&&u.a.createElement(ce.a,{offset:5.5},o.map((e,t)=>this.getChart(e,t))),o&&o.length>0&&u.a.createElement(ce.a,{offset:5.5},o.map((e,t)=>this.getForecastBarChart(e,t))),o&&o.length>0&&u.a.createElement(ce.a,{offset:5.5},o.map((e,t)=>this.getForecastLineChart(e,t))),u.a.createElement(F.a,{style:le.xAxis,tickValues:[1,d,p,m,l]}),u.a.createElement(F.a,{dependentAxis:!0,style:le.yAxis})))))}}const he=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(ue,Object.assign({},e)));a(801);const de={currentColorScale:[J.chart_color_green_400.value,$.chart_color_green_300.value,G.chart_color_green_200.value,q.chart_color_green_100.value,ee.chart_color_green_500.value],forecastConeDataColorScale:[ie.chart_color_orange_300.value],forecastDataColorScale:[G.chart_color_green_200.value],itemsPerRow:4,previousColorScale:[z.chart_color_black_200.value,z.chart_color_black_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class pe extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:r,showForecast:s,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,c=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",i=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",l=[{childName:"previousCost",data:this.initDatumChildName(r,"previousCost"),legendItem:{name:Object(P.a)(r,c,!0,!0,1),symbol:{fill:de.previousColorScale[0],type:"minus"},tooltip:Object(P.a)(r,i,!1,!1,1)},isBar:!0,style:{data:{fill:de.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:Object(P.a)(e,c,!0,!1),symbol:{fill:de.currentColorScale[0],type:"minus"},tooltip:Object(P.a)(e,i,!1,!1)},isBar:!0,style:{data:{fill:de.currentColorScale[0]}}}];s&&(l.push({childName:"forecast",data:this.initDatumChildName(t,"forecast"),legendItem:{name:Object(P.a)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:de.forecastDataColorScale[0],type:"minus"},tooltip:Object(P.a)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:de.forecastDataColorScale[0]}}}),l.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:Object(P.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:de.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(P.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:de.forecastConeDataColorScale[0]}}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:l})},this.initDatumChildName=(e,t)=>(e.map(e=>e.childName=t),e),this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const r=a.has(t)?[{y:null}]:e.data;if(e.isBar)return u.a.createElement(ne.a,{alignment:"middle",data:r,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return u.a.createElement(oe.a,{data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const r=a.has(t)?[{y:null}]:e.data;return u.a.createElement(ne.a,{alignment:"middle",data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const r=a.has(t)?[{y:null}]:e.data;return u.a.createElement(ne.a,{alignment:"middle",barWidth:1,data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=Object(S.a)("voronoi","cursor");return u.a.createElement(a,{cursorDimension:"x",labels:({datum:a})=>Object(L.d)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:r}=this.state;return u.a.createElement(w.a,{data:Object(L.c)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:r>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=Object(L.e)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r}=this.props,{width:s}=this.state;let n=a;return e&&r&&s<700&&(n+=25),n}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,r=a?A()(Object(P.b)(a,!0,!0)[1]):0,s=e?A()(Object(P.b)(e,!0,!0)[1]):0,n=t?A()(Object(P.b)(t,!0,!0)[1]):0;return s>0||r>0?Math.max(s,n,r):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return Object(R.a)({chartNames:Object(L.a)(t),isDataHidden:a=>Object(L.g)(t,e,a),isHidden:t=>Object(L.h)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:s,series:o,width:c}=this.state,i=Object(L.b)(o,s),l=this.getEndDate(),h=Math.floor(l/2),d=1+Math.floor(h/2),p=1+h,m=l-Math.floor(h/2),g=r?u.a.cloneElement(r,{disable:!Object(L.f)(o,s),labelComponent:u.a.createElement(I.a,{legendData:Object(L.c)(o,s,!0),title:e=>W.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:c}},u.a.createElement(k.a,{containerComponent:g,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:Object(L.c)(o,s),legendPosition:"bottom-left",padding:t,theme:N.a,width:c},o&&o.length>0&&u.a.createElement(ce.a,{offset:11},o.map((e,t)=>this.getChart(e,t))),o&&o.length>0&&u.a.createElement(ce.a,{offset:11},u.a.createElement(ne.a,{data:[{y:null}],name:"forcast_spacer"}),o.map((e,t)=>this.getForecastBarChart(e,t))),o&&o.length>0&&u.a.createElement(ce.a,{offset:11},u.a.createElement(ne.a,{data:[{y:null}],name:"forcast_cone_spacer"}),o.map((e,t)=>this.getForecastLineChart(e,t))),u.a.createElement(F.a,{style:de.xAxis,tickValues:[1,d,p,m,l]}),u.a.createElement(F.a,{dependentAxis:!0,style:de.yAxis})))))}}const me=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(pe,Object.assign({},e)));a(802);const ge={currentColorScale:[Z.a.value,X.a.value,Y.a.value,B.a.value,te.a.value],currentMonthData:{fill:"none"},forecastConeData:{fill:B.a.value,strokeWidth:0},forecastConeDataColorScale:[B.a.value],forecastData:{fill:"none"},forecastDataColorScale:[Y.a.value],itemsPerRow:4,previousColorScale:[U.a.value,U.a.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class fe extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:r,showForecast:s,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,c=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",i=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",l=[{childName:"previousCost",data:r,legendItem:{name:Object(P.a)(r,c,!0,!0,1),symbol:{fill:ge.previousColorScale[0],type:"minus"},tooltip:Object(P.a)(r,i,!1,!1,1)},style:{data:Object.assign(Object.assign({},ge.previousMonthData),{stroke:ge.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:Object(P.a)(e,c,!0,!1),symbol:{fill:ge.currentColorScale[0],type:"minus"},tooltip:Object(P.a)(e,i,!1,!1)},style:{data:Object.assign(Object.assign({},ge.currentMonthData),{stroke:ge.currentColorScale[0]})}}];s&&(l.push({childName:"forecast",data:t,legendItem:{name:Object(P.a)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:ge.forecastDataColorScale[0],type:"minus"},tooltip:Object(P.a)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ge.forecastData),{stroke:ge.forecastDataColorScale[0]})}}),l.push({childName:"forecastCone",data:a,legendItem:{name:Object(P.a)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:ge.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:Object(P.a)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},ge.forecastConeData),{stroke:ge.forecastConeDataColorScale[0]})}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:l})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u.a.createElement(T.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=Object(S.a)("voronoi","cursor");return u.a.createElement(a,{cursorDimension:"x",labels:({datum:a})=>Object(L.d)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:r}=this.state;return u.a.createElement(w.a,{data:Object(L.c)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:r>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=Object(L.e)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r}=this.props,{width:s}=this.state;let n=a;return e&&r&&s<700&&(n+=25),n}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,r=a?A()(Object(P.b)(a,!0,!0)[1]):0,s=e?A()(Object(P.b)(e,!0,!0)[1]):0,n=t?A()(Object(P.b)(t,!0,!0)[1]):0;return s>0||r>0?Math.max(s,n,r):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return Object(R.a)({chartNames:Object(L.a)(t),isHidden:t=>Object(L.h)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:s,series:o,width:c}=this.state,i=Object(L.b)(o,s),l=this.getEndDate(),h=Math.floor(l/2),d=r?u.a.cloneElement(r,{disable:!Object(L.f)(o,s),labelComponent:u.a.createElement(I.a,{legendData:Object(L.c)(o,s,!0),title:e=>W.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:c}},u.a.createElement(k.a,{containerComponent:d,domain:i,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:Object(L.c)(o,s),legendPosition:"bottom-left",padding:t,theme:N.a,width:c},o&&o.map((e,t)=>this.getChart(e,t)),u.a.createElement(F.a,{style:ge.xAxis,tickValues:[1,h,l]}),u.a.createElement(F.a,{dependentAxis:!0,style:ge.yAxis})))))}}const be=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(fe,Object.assign({},e)));a(803);var ve=a(652);const ye={chartContainer:{marginTop:a.n(ve).a.value},currentRequestData:{data:{fill:"none",stroke:X.a.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:Z.a.value}},itemsPerRow:2,legendColorScale:[U.a.value,Z.a.value,U.a.value,X.a.value],previousRequestData:{data:{fill:"none",stroke:U.a.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:U.a.value}},currentColorScale:[Z.a.value,X.a.value,Y.a.value,B.a.value,te.a.value],previousColorScale:[U.a.value,U.a.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class _e extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:r}=this.props,s=[{childName:"previousUsage",data:r,legendItem:{name:Object(P.e)(r,"chart.usage_legend_label",!0,!0,1),symbol:{fill:ye.legendColorScale[0],type:"minus"},tooltip:Object(P.e)(r,"chart.usage_legend_tooltip",!1,!1,1)},style:ye.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:Object(P.e)(t,"chart.usage_legend_label",!0,!1),symbol:{fill:ye.legendColorScale[1],type:"minus"},tooltip:Object(P.e)(t,"chart.usage_legend_tooltip",!1,!1)},style:ye.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:Object(P.e)(a,"chart.requests_legend_label",!0,!0,1),symbol:{fill:ye.legendColorScale[2],type:"dash"},tooltip:Object(P.e)(a,"chart.requests_legend_tooltip",!1,!1,1)},style:ye.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:Object(P.e)(e,"chart.requests_legend_label",!0,!1),symbol:{fill:ye.legendColorScale[3],type:"dash"},tooltip:Object(P.e)(e,"chart.requests_legend_tooltip",!1,!1)},style:ye.currentRequestData}],n=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:n,series:s})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return u.a.createElement(T.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=Object(S.a)("voronoi","cursor");return u.a.createElement(a,{cursorDimension:"x",labels:({datum:a})=>Object(L.d)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:r}=this.state,s=e||(r>300?ye.itemsPerRow:1);return u.a.createElement(w.a,{data:Object(L.c)(a,t),height:25,gutter:20,itemsPerRow:s,name:"legend"})},this.handleLegendClick=e=>{const t=Object(L.e)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:r}=this.state;let s=a;return e&&r<480&&(s+=20),s}}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)}),this.initDatum()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.navToggle&&this.navToggle()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:r}=this.props,s=e?A()(Object(P.b)(e,!0,!0)[1]):0,n=t?A()(Object(P.b)(t,!0,!0)[1]):0,o=a?A()(Object(P.b)(a,!0,!0)[1]):0,c=r?A()(Object(P.b)(r,!0,!0)[1]):0;return s>0||n>0||o>0||c>0?Math.max(s,n,o,c):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return Object(R.a)({chartNames:Object(L.a)(t),isHidden:t=>Object(L.h)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:75,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:s,series:o,width:c}=this.state,i=Object(L.b)(o,s),l=this.getEndDate(),h=Math.floor(l/2),d=r?u.a.cloneElement(r,{disable:!Object(L.f)(o,s),labelComponent:u.a.createElement(I.a,{legendData:Object(L.c)(o,s,!0),title:e=>W.a.t("chart.day_of_month_title",{day:e.x})})}):void 0;return u.a.createElement(u.a.Fragment,null,u.a.createElement(n.a,{headingLevel:"h3",size:"md"},a),u.a.createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},u.a.createElement("div",{style:{height:e,width:c}},u.a.createElement(k.a,{containerComponent:d,domain:i,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:Object(L.c)(o,s),legendPosition:"bottom-left",padding:t,theme:N.a,width:c},o&&o.map((e,t)=>this.getChart(e,t)),u.a.createElement(F.a,{style:ye.xAxis,tickValues:[1,h,l]}),u.a.createElement(F.a,{dependentAxis:!0,style:ye.yAxis})))))}}const Ce=e=>u.a.createElement("div",{className:"chart"},u.a.createElement(_e,Object.assign({},e)))},781:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=()=>{const e=window.location.pathname.split("/");e.shift();let t="";return"beta"===e[0]&&(t="/beta"),t}},788:function(e,t,a){},789:function(e,t,a){e.exports=a.p+"8a2acb5e9233030023f599e0f04ebd7f.svg"},793:function(e,t,a){},794:function(e,t,a){},795:function(e,t,a){},796:function(e,t,a){},797:function(e,t,a){},798:function(e,t,a){},799:function(e,t,a){},800:function(e,t,a){},801:function(e,t,a){},802:function(e,t,a){},803:function(e,t,a){},805:function(e,t,a){"use strict";var r=a(380),s=a(752),n=a(1),o=a.n(n),c=a(487),i=a(410),l=a(412),u=a(356),h=a(411),d=a(44),p=a(680),m=a(720);class g extends o.a.Component{render(){const{showReload:e=!0,t:t}=this.props;return o.a.createElement(i.a,{variant:i.b.large,className:"pf-m-redhat-font"},o.a.createElement(l.a,{icon:p.FileInvoiceDollarIcon}),o.a.createElement(u.a,{headingLevel:"h5",size:"lg"},t("no_data_state.title")),o.a.createElement(h.a,null,t("no_data_state.desc")),e&&o.a.createElement(d.a,{variant:"primary",onClick:()=>window.location.reload()},t("no_data_state.refresh")))}}const f=Object(c.a)(Object(m.a)()(g));t.a=Object(c.a)(({showReload:e,title:t})=>o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(s.PageHeader,null,o.a.createElement(s.PageHeaderTitle,{title:t})),o.a.createElement(r.Main,null,o.a.createElement(f,{showReload:e}))))},833:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(250);function s(e){return Object(r.stringify)(e,{encode:!1,indices:!1})}},907:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a(228),s=a(408),n=a(394),o=a(1),c=a.n(o),i=a(720),l=a(653);const u={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:a.n(l).a.var}};class h extends c.a.Component{constructor(){super(...arguments),this.defaultState={isPerspectiveOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e,t:t}=this.props;return e.map(e=>c.a.createElement(r.a,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label)))},this.getCurrentLabel=()=>{const{currentItem:e,options:t,t:a}=this.props;let r="";for(const s of t)if(e===s.value){r=a(s.label);break}return r},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isPerspectiveOpen:!this.state.isPerspectiveOpen})},this.handleToggle=e=>{this.setState({isPerspectiveOpen:e})}}render(){const{isDisabled:e,t:t}=this.props,{isPerspectiveOpen:a}=this.state,r=this.getDropDownItems();return c.a.createElement("div",{style:u.perspectiveSelector},c.a.createElement("label",{style:u.perspectiveLabel},t("overview.perspective.label")),c.a.createElement(s.a,{onSelect:this.handleSelect,toggle:c.a.createElement(n.a,{isDisabled:e,onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:a,dropdownItems:r}))}}const d=Object(i.a)()(h)}}]);
//# sourceMappingURL=696664ac6780c0c0f457.bundle.js.map