(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2305],{6517:(e,t,a)=>{"use strict";a.d(t,{n:()=>_}),a(5118);var s=a(88970),r=a(48927),n=a(40125),o=a(60232),i=a(63802),l=a(36234),c=a(30136),h=a.n(c),u=a(97522),d=a.n(u),m=a(63211),g=a(21535),p=a(84615),f=a(70698),C=a(72021),v=a(21768),D=a(41534);const b={currentColorScale:[v.ZP.value,C.ZP.value,f.ZP.value,p.ZP.value,D.ZP.value],currentMonthData:{fill:"none"},forecastConeData:{fill:p.ZP.value,strokeWidth:0},forecastConeDataColorScale:[p.ZP.value],forecastData:{fill:"none"},forecastDataColorScale:[f.ZP.value],itemsPerRow:4,previousColorScale:[g.ZP.value,g.ZP.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class _ extends d().Component{constructor(){super(...arguments),this.containerRef=d().createRef(),this.resizeObserver=m.Z,this.navToggle=m.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showSupplementaryLabel:n=!1,showUsageLegendLabel:i=!1}=this.props,l=i?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",c=i?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",h=[{childName:"previousCost",data:s,legendItem:{name:(0,o.uL)(s,l,!0,!0,1),symbol:{fill:b.previousColorScale[0],type:"minus"},tooltip:(0,o.uL)(s,c,!1,!1,1)},style:{data:Object.assign(Object.assign({},b.previousMonthData),{stroke:b.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,o.uL)(e,l,!0,!1),symbol:{fill:b.currentColorScale[0],type:"minus"},tooltip:(0,o.uL)(e,c,!1,!1)},style:{data:Object.assign(Object.assign({},b.currentMonthData),{stroke:b.currentColorScale[0]})}}];r&&(h.push({childName:"forecast",data:t,legendItem:{name:(0,o.uL)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:b.forecastDataColorScale[0],type:"minus"},tooltip:(0,o.uL)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},b.forecastData),{stroke:b.forecastDataColorScale[0]})}}),h.push({childName:"forecastCone",data:a,legendItem:{name:(0,o.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:b.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,o.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},b.forecastConeData),{stroke:b.forecastConeDataColorScale[0]})}}));const u=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:u,series:h})},this.initResizeObserve=()=>{const e=this.containerRef.current,{ResizeObserver:t}=window;if(e&&t){const a=new t(this.handleResize);a.observe(e),this.resizeObserver=()=>a.unobserve(e)}else this.handleResize(),window.addEventListener("resize",this.handleResize),this.resizeObserver=()=>window.removeEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&s&&r<700&&(n+=25),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return d().createElement(s.ChartArea,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,s.createContainer)("voronoi","cursor");return d().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,i.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:r}=this.state;return d().createElement(s.ChartLegend,{data:(0,i.oX)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:r>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,i.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.initResizeObserve()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.resizeObserver&&this.resizeObserver(),this.navToggle&&this.navToggle()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?(0,l.getDate)((0,o.Y_)(a,!0,!0)[1]):0,r=e?(0,l.getDate)((0,o.Y_)(e,!0,!0)[1]):0,n=t?(0,l.getDate)((0,o.Y_)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,n,s):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,s.getInteractiveLegendEvents)({chartNames:(0,i.bC)(t),isHidden:t=>(0,i.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:o,hiddenSeries:l,series:c,width:u}=this.state,m=(0,i.ge)(c,l),g=this.getEndDate(),p=Math.floor(g/2),f=o?d().cloneElement(o,{disable:!(0,i.TW)(c,l),labelComponent:d().createElement(s.ChartLegendTooltip,{legendData:(0,i.oX)(c,l,!0),title:e=>h().t("chart.day_of_month_title",{day:e.x})})}):void 0;return d().createElement(d().Fragment,null,d().createElement(r.Title,{headingLevel:"h3",size:"md"},a),d().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},d().createElement("div",{style:{height:e,width:u}},d().createElement(s.Chart,{containerComponent:f,domain:m,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,i.oX)(c,l),legendPosition:"bottom-left",padding:t,theme:n.Z,width:u},c&&c.map(((e,t)=>this.getChart(e,t))),d().createElement(s.ChartAxis,{style:b.xAxis,tickValues:[1,p,g]}),d().createElement(s.ChartAxis,{dependentAxis:!0,style:b.yAxis})))))}}},71878:(e,t,a)=>{"use strict";a.d(t,{iu:()=>l,j0:()=>c,me:()=>P,V3:()=>H,Y0:()=>G,rN:()=>d,EH:()=>g,mZ:()=>C,Nd:()=>q,I0:()=>K});var s=a(48927),r=a(56455),n=a(97522),o=a.n(n),i=a(79878);const l=(0,i.withTranslation)()((({children:e,detailsLink:t,title:a,subTitle:n,status:i})=>o().createElement(s.Card,{className:"reportSummary"},o().createElement(s.CardTitle,null,o().createElement(s.Title,{headingLevel:"h2",size:"lg"},a),Boolean(n)&&o().createElement("p",{className:"subtitle"},n)),o().createElement(s.CardBody,null,1===i?o().createElement(o().Fragment,null,o().createElement(r.Z,{size:"xs"}),o().createElement(r.Z,{className:"chartSkeleton",size:"md"}),o().createElement(r.Z,{size:"sm"}),o().createElement(r.Z,{className:"legendSkeleton",size:"xs"})):e),Boolean(t)&&o().createElement(s.CardFooter,null,t)))),c=(0,i.withTranslation)()((({children:e,detailsLink:t,status:a,subTitle:n,tabs:i,title:l})=>o().createElement(s.Card,{className:"reportSummary"},o().createElement(s.Grid,{hasGutter:!0},o().createElement(s.GridItem,{xl:8},o().createElement("div",{className:"cost"},o().createElement(s.CardTitle,null,o().createElement(s.Title,{headingLevel:"h2",size:"lg"},l),Boolean(n)&&o().createElement("p",{className:"subtitle"},n)),o().createElement(s.CardBody,null,1===a?o().createElement(o().Fragment,null,o().createElement(r.Z,{size:"xs"}),o().createElement(r.Z,{className:"chartSkeleton",size:"md"}),o().createElement(r.Z,{size:"sm"}),o().createElement(r.Z,{className:"legendSkeleton",size:"xs"})):e))),o().createElement(s.GridItem,{xl:4},o().createElement("div",{className:"tops"},1!==a&&o().createElement(o().Fragment,null,Boolean(i)&&o().createElement(s.CardBody,null,i),Boolean(t)&&o().createElement(s.CardFooter,null,t))))))));var h=a(99163),u=a(901);const d=(0,i.withTranslation)()((({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:r,formatValue:n,formatOptions:i,report:l,requestFormatOptions:c,requestLabel:d,reportType:m,showTooltip:g=!1,showUnits:p=!1,showUsageFirst:f=!1,t:C,units:v,usageFormatOptions:D,usageLabel:b})=>{let _=o().createElement(h.L,null),y=o().createElement(h.L,null),E=o().createElement(h.L,null),S=o().createElement(h.L,null),L=o().createElement(h.L,null);const N=l&&l.meta&&l.meta.total,I=N&&l.meta.total.cost&&l.meta.total.cost.total,w=N&&l.meta.total.count,z=N&&l.meta.total.supplementary&&l.meta.total.supplementary.total&&l.meta.total.supplementary.total.value,k=N&&l.meta.total.infrastructure&&l.meta.total.infrastructure[a]&&l.meta.total.infrastructure[a].value,O=N&&l.meta.total.request,R=N&&l.meta.total.usage;N&&(_=n(I?l.meta.total.cost.total.value:0,I?l.meta.total.cost.total.units:"USD",i),y=n(z?l.meta.total.supplementary.total.value:0,z?l.meta.total.supplementary.total.units:"USD",i),E=n(k?l.meta.total.infrastructure[a].value:0,k?l.meta.total.infrastructure[a].units:"USD",i),S=n(O?l.meta.total.request.value:0,O?l.meta.total.request.units:"",c?D:i),L=R&&l.meta.total.usage.value>=0?n(R?l.meta.total.usage.value:0,R?l.meta.total.usage.units:"",D||i):n(R?l.meta.total.usage:0,w?l.meta.total.count.units:"",D||i));const x=(e=!1)=>{let a=_;"infrastructure"===t?a=E:"supplementary"===t&&(a=y);const n=e?"Alt":"";return o().createElement("div",{className:"valueContainer"},g?o().createElement(s.Tooltip,{content:C("dashboard.total_cost_tooltip",{infrastructureCost:E,supplementaryCost:y}),enableFlip:!0},o().createElement("div",{className:`value${n}`},a)):o().createElement("div",{className:`value${n}`},a),o().createElement("div",{className:"text"},o().createElement("div",null,r)))},T=()=>{if(!b)return null;const e=O?l.meta.total.request.units:"",t=(0,u.dM)(e),a=C(`units.${t}`);return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},S),Boolean(p&&(v||O&&l.meta.total.request.value>=0))&&o().createElement("span",{className:"units"},a),o().createElement("div",{className:"text"},o().createElement("div",null,d)))},A=()=>{if(!b)return null;const e=R?l.meta.total.usage.units:"",t=(0,u.dM)(v||e),a=C(`units.${t}`);return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},L),Boolean(p&&(v||R&&l.meta.total.usage.value>=0))&&o().createElement("span",{className:"units"},a),o().createElement("div",{className:"text"},o().createElement("div",null,b)))};return"dailyCost"===e||"dailyTrend"===e||"cost"===e?o().createElement(o().Fragment,null,x("cost"===m)):"trend"===e?f?o().createElement(o().Fragment,null,A(),x("cost"===m)):o().createElement(o().Fragment,null,x("cost"===m),A()):"usage"===e?f?o().createElement(o().Fragment,null,A(),T()):o().createElement(o().Fragment,null,T(),A()):null})),m=({label:e,formatOptions:t,formatValue:a,t:r,totalValue:n,units:i,value:l})=>{const c=(0,u.dM)(i),h="usd"!==c?r(`units.${c}`):void 0,d=Number((n?l/n*100:0).toFixed(2)),m=r("percent_of_total",{percent:d,units:h,value:a(l,i,t)});return o().createElement("li",{className:"reportSummaryItem"},o().createElement(s.Progress,{label:m,value:d,title:e,size:s.ProgressSize.sm}))};m.defaultProps={formatValue:e=>e};const g=(0,i.withTranslation)()(m);var p=a(31447);class f extends o().Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=(0,p.R)({report:t,idKey:e}),s=a.findIndex((e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")}));return-1!==s?[...a.slice(0,s),...a.slice(s+1),a[s]]:a}render(){const{children:e,status:t}=this.props;if(1===t)return o().createElement(o().Fragment,null,o().createElement(r.Z,{size:"md"}),o().createElement(r.Z,{size:"md",className:"skeleton"}),o().createElement(r.Z,{size:"md",className:"skeleton"}),o().createElement(r.Z,{size:"md",className:"skeleton"}));{const t=this.getItems();return o().createElement("ul",null,e({items:t}))}}}const C=(0,i.withTranslation)()(f);a(5118);var v=a(88970),D=a(40125),b=a(60232),_=a(63802),y=a(36234),E=a(30136),S=a.n(E),L=a(63211),N=a(21535),I=a(27765),w=a(19960),z=a(84076),k=a(18131),O=a(24656),R=a(84615),x=a(70698),T=a(72021),A=a(21768),F=a(41534);const Z={currentColorScale:[A.CH.value,T.R0.value,x.t6.value,R.S7.value,F.iM.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[k.cQ.value,z.iY.value,w.OS.value,I.O6.value,O.DD.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:R.S7.value,strokeWidth:0},forecastConeDataColorScale:[R.S7.value],forecastData:{fill:"none"},forecastDataColorScale:[x.t6.value],forecastInfrastructureConeData:{fill:I.O6.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[I.O6.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[w.OS.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[N.tN.value,N.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class j extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.resizeObserver=L.Z,this.navToggle=L.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:i,showForecast:l}=this.props,c="chart.cost_legend_label",h="chart.cost_infrastructure_legend_label",u="chart.cost_infrastructure_legend_tooltip",d="chart.cost_legend_tooltip",m=[{childName:"previousCost",data:i,legendItem:{name:(0,b.uL)(i,c,!0,!0,1),symbol:{fill:Z.previousColorScale[0],type:"minus"},tooltip:(0,b.uL)(i,d,!1,!1,1)},style:{data:Object.assign(Object.assign({},Z.previousCostData),{stroke:Z.previousColorScale[0]})}},{childName:"currentCost",data:t,legendItem:{name:(0,b.uL)(t,c,!0,!1),symbol:{fill:Z.currentColorScale[0],type:"minus"},tooltip:(0,b.uL)(t,d,!1,!1)},style:{data:Object.assign(Object.assign({},Z.currentCostData),{stroke:Z.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:o,legendItem:{name:(0,b.uL)(o,h,!0,!0,1),symbol:{fill:Z.previousColorScale[1],type:"dash"},tooltip:(0,b.uL)(o,u,!1,!1,1)},style:{data:Object.assign(Object.assign({},Z.previousInfrastructureCostData),{stroke:Z.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:(0,b.uL)(e,h,!0,!1),symbol:{fill:Z.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,b.uL)(e,u,!1,!1)},style:{data:Object.assign(Object.assign({},Z.currentInfrastructureCostData),{stroke:Z.currentInfrastructureColorScale[1]})}}];l&&(m.push({childName:"forecast",data:s,legendItem:{name:(0,b.uL)(s,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:Z.forecastDataColorScale[0],type:"minus"},tooltip:(0,b.uL)(s,"chart.cost_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Z.forecastData),{stroke:Z.forecastDataColorScale[0]})}}),m.push({childName:"forecastInfrastructure",data:n,legendItem:{name:(0,b.uL)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:Z.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,b.uL)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Z.forecastInfrastructureData),{stroke:Z.forecastInfrastructureDataColorScale[0]})}}),m.push({childName:"forecastCone",data:a,legendItem:{name:(0,b.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:Z.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,b.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Z.forecastConeData),{stroke:Z.forecastConeDataColorScale[0]})}}),m.push({childName:"forecastInfrastructureCone",data:r,legendItem:{name:(0,b.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:Z.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:(0,b.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},style:{data:Object.assign(Object.assign({},Z.forecastInfrastructureConeData),{stroke:Z.forecastInfrastructureConeDataColorScale[0]})}}));const g=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:g,series:m})},this.initResizeObserve=()=>{const e=this.containerRef.current,{ResizeObserver:t}=window;if(e&&t){const a=new t(this.handleResize);a.observe(e),this.resizeObserver=()=>a.unobserve(e)}else this.handleResize(),window.addEventListener("resize",this.handleResize),this.resizeObserver=()=>window.removeEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&(s?r>675&&r<1175?n+=25:r>450&&r<675?n+=50:r<=450&&(n+=75):r>450&&r<725?n+=25:r<=450&&(n+=50)),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(v.ChartArea,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,v.createContainer)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,_.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return o().createElement(v.ChartLegend,{data:(0,_.oX)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=(0,_.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.initResizeObserve()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.resizeObserver&&this.resizeObserver(),this.navToggle&&this.navToggle()}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,v.getInteractiveLegendEvents)({chartNames:(0,_.bC)(t),isHidden:t=>(0,_.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,n=e?(0,y.getDate)((0,b.Y_)(e,!0,!0)[1]):0,o=t?(0,y.getDate)((0,b.Y_)(t,!0,!0)[1]):0,i=a?(0,y.getDate)((0,b.Y_)(a,!0,!0)[1]):0,l=s?(0,y.getDate)((0,b.Y_)(s,!0,!0)[1]):0,c=r?(0,y.getDate)((0,b.Y_)(r,!0,!0)[1]):0;return n>0||o>0||l>0||c>0?Math.max(n,o,i,l,c):31}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:n,series:i,width:l}=this.state,c=(0,_.ge)(i,n),h=this.getEndDate(),u=Math.floor(h/2),d=1+Math.floor(u/2),m=1+u,g=h-Math.floor(u/2),p=r?o().cloneElement(r,{disable:!(0,_.TW)(i,n),labelComponent:o().createElement(v.ChartLegendTooltip,{legendData:(0,_.oX)(i,n,!0),title:e=>S().t("chart.day_of_month_title",{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,a&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},a),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:l}},o().createElement(v.Chart,{containerComponent:p,domain:c,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,_.oX)(i,n),legendPosition:"bottom-left",padding:t,theme:D.Z,width:l},i&&i.map(((e,t)=>this.getChart(e,t))),o().createElement(v.ChartAxis,{style:Z.xAxis,tickValues:[1,d,m,g,h]}),o().createElement(v.ChartAxis,{dependentAxis:!0,style:Z.yAxis})))))}}const P=e=>o().createElement("div",{className:"chart"},o().createElement(j,Object.assign({},e)));var V=a(82874);const U={currentColorScale:[A.CH.value,T.R0.value,x.t6.value,R.S7.value,F.iM.value],currentInfrastructureColorScale:[k.cQ.value,z.iY.value,w.OS.value,I.O6.value,O.DD.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[V.g9.value],forecastDataColorScale:[x.t6.value],forecastInfrastructureConeDataColorScale:[V.g9.value],forecastInfrastructureDataColorScale:[w.OS.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[N.tN.value,N.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class B extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.resizeObserver=L.Z,this.navToggle=L.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:s,forecastInfrastructureConeData:r,forecastInfrastructureData:n,previousInfrastructureCostData:o,previousCostData:i,showForecast:l}=this.props,c="chart.cost_legend_label",h="chart.cost_infrastructure_legend_label",u="chart.cost_infrastructure_legend_tooltip",d="chart.cost_legend_tooltip",m=[{childName:"previousCost",data:this.initDatumChildName(i,"previousCost"),legendItem:{name:(0,b.uL)(i,c,!0,!0,1),symbol:{fill:U.previousColorScale[0],type:"minus"},tooltip:(0,b.uL)(i,d,!1,!1,1)},isLine:!0,style:{data:{stroke:U.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(t,"currentCost"),legendItem:{name:(0,b.uL)(t,c,!0,!1),symbol:{fill:U.currentColorScale[0],type:"minus"},tooltip:(0,b.uL)(t,d,!1,!1)},isBar:!0,style:{data:{fill:U.currentColorScale[0]}}},{childName:"previousInfrastructureCost",data:this.initDatumChildName(o,"previousInfrastructureCost"),legendItem:{name:(0,b.uL)(o,h,!0,!0,1),symbol:{fill:U.previousColorScale[1],type:"dash"},tooltip:(0,b.uL)(o,u,!1,!1,1)},isLine:!0,style:{data:{stroke:U.previousColorScale[1]}}},{childName:"currentInfrastructureCost",data:this.initDatumChildName(e,"currentInfrastructureCost"),legendItem:{name:(0,b.uL)(e,h,!0,!1),symbol:{fill:U.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,b.uL)(e,u,!1,!1)},isBar:!0,style:{data:{fill:U.currentInfrastructureColorScale[1]}}}];l&&(m.push({childName:"forecast",data:this.initDatumChildName(s,"forecast"),legendItem:{name:(0,b.uL)(s,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:U.forecastDataColorScale[0],type:"minus"},tooltip:(0,b.uL)(s,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:U.forecastDataColorScale[0]}}}),m.push({childName:"forecastInfrastructure",data:this.initDatumChildName(n,"forecastInfrastructure"),legendItem:{name:(0,b.uL)(n,"chart.cost_infrastructure_forecast_legend_label",!1,!1),symbol:{fill:U.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,b.uL)(n,"chart.cost_infrastructure_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:U.forecastInfrastructureDataColorScale[0]}}}),m.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,b.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:U.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,b.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:U.forecastConeDataColorScale[0]}}}),m.push({childName:"forecastInfrastructureCone",data:this.initDatumChildName(r,"forecastInfrastructureCone"),legendItem:{name:(0,b.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_label",!1,!1),symbol:{fill:U.forecastInfrastructureConeDataColorScale[0],type:"triangleUp"},tooltip:(0,b.uL)(r,"chart.cost_infrastructure_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:U.forecastInfrastructureConeDataColorScale[0]}}}));const g=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:g,series:m})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.initResizeObserve=()=>{const e=this.containerRef.current,{ResizeObserver:t}=window;if(e&&t){const a=new t(this.handleResize);a.observe(e),this.resizeObserver=()=>a.unobserve(e)}else this.handleResize(),window.addEventListener("resize",this.handleResize),this.resizeObserver=()=>window.removeEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&(s?r>675&&r<1175?n+=25:r>450&&r<675?n+=50:r<=450&&(n+=75):r>450&&r<725?n+=25:r<=450&&(n+=50)),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!a.has(t)&&!e.isForecast){if(e.isBar)return o().createElement(v.ChartBar,{alignment:"middle",data:e.data,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement(v.ChartLine,{data:e.data,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;return!a.has(t)&&e.isForecast&&e.isBar?o().createElement(v.ChartBar,{alignment:"middle",data:e.data,key:e.childName,name:e.childName,style:e.style}):null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;return!a.has(t)&&e.isForecast&&e.isLine?o().createElement(v.ChartBar,{alignment:"middle",barWidth:1,data:e.data,key:e.childName,name:e.childName,style:e.style}):null},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,v.createContainer)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,_.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{hiddenSeries:e,series:t}=this.state;return o().createElement(v.ChartLegend,{data:(0,_.oX)(t,e),height:25,gutter:20,name:"legend",responsive:!1})},this.handleLegendClick=e=>{const t=(0,_.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.initResizeObserve()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.resizeObserver&&this.resizeObserver(),this.navToggle&&this.navToggle()}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:s,previousCostData:r}=this.props,n=e?(0,y.getDate)((0,b.Y_)(e,!0,!0)[1]):0,o=t?(0,y.getDate)((0,b.Y_)(t,!0,!0)[1]):0,i=a?(0,y.getDate)((0,b.Y_)(a,!0,!0)[1]):0,l=s?(0,y.getDate)((0,b.Y_)(s,!0,!0)[1]):0,c=r?(0,y.getDate)((0,b.Y_)(r,!0,!0)[1]):0;return n>0||o>0||l>0||c>0?Math.max(n,o,i,l,c):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,v.getInteractiveLegendEvents)({chartNames:(0,_.bC)(t),isDataHidden:a=>(0,_.E0)(t,e,a),isHidden:t=>(0,_.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:n,series:i,width:l}=this.state,c=(0,_.ge)(i,n),h=this.getEndDate(),u=Math.floor(h/2),d=1+Math.floor(u/2),m=1+u,g=h-Math.floor(u/2),p=r?o().cloneElement(r,{disable:!(0,_.TW)(i,n),labelComponent:o().createElement(v.ChartLegendTooltip,{legendData:(0,_.oX)(i,n,!0),title:e=>S().t("chart.day_of_month_title",{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,a&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},a),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:l}},o().createElement(v.Chart,{containerComponent:p,domain:c,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,_.oX)(i,n),legendPosition:"bottom-left",padding:t,theme:D.Z,width:l},i&&i.length>0&&o().createElement(v.ChartGroup,{offset:5.5},i.map(((e,t)=>this.getChart(e,t)))),i&&i.length>0&&o().createElement(v.ChartGroup,{offset:5.5},i.map(((e,t)=>this.getForecastBarChart(e,t)))),i&&i.length>0&&o().createElement(v.ChartGroup,{offset:5.5},i.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(v.ChartAxis,{style:U.xAxis,tickValues:[1,d,m,g,h]}),o().createElement(v.ChartAxis,{dependentAxis:!0,style:U.yAxis})))))}}const H=e=>o().createElement("div",{className:"chart"},o().createElement(B,Object.assign({},e))),M={currentColorScale:[A.CH.value,T.R0.value,x.t6.value,R.S7.value,F.iM.value],forecastConeDataColorScale:[V.g9.value],forecastDataColorScale:[x.t6.value],itemsPerRow:4,previousColorScale:[N.tN.value,N.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class Y extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.resizeObserver=L.Z,this.navToggle=L.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:s,showForecast:r,showSupplementaryLabel:n=!1,showUsageLegendLabel:o=!1}=this.props,i=o?"chart.usage_legend_label":n?"chart.cost_supplementary_legend_label":"chart.cost_legend_label",l=o?"chart.usage_legend_tooltip":n?"chart.cost_supplementary_legend_tooltip":"chart.cost_legend_tooltip",c=[{childName:"previousCost",data:this.initDatumChildName(s,"previousCost"),legendItem:{name:(0,b.uL)(s,i,!0,!0,1),symbol:{fill:M.previousColorScale[0],type:"minus"},tooltip:(0,b.uL)(s,l,!1,!1,1)},isBar:!0,style:{data:{fill:M.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:(0,b.uL)(e,i,!0,!1),symbol:{fill:M.currentColorScale[0],type:"minus"},tooltip:(0,b.uL)(e,l,!1,!1)},isBar:!0,style:{data:{fill:M.currentColorScale[0]}}}];r&&(c.push({childName:"forecast",data:this.initDatumChildName(t,"forecast"),legendItem:{name:(0,b.uL)(t,"chart.cost_forecast_legend_label",!1,!1),symbol:{fill:M.forecastDataColorScale[0],type:"minus"},tooltip:(0,b.uL)(t,"chart.cost_forecast_legend_tooltip",!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:M.forecastDataColorScale[0]}}}),c.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,b.uL)(a,"chart.cost_forecast_cone_legend_label",!1,!1),symbol:{fill:M.forecastConeDataColorScale[0],type:"triangleUp"},tooltip:(0,b.uL)(a,"chart.cost_forecast_cone_legend_tooltip",!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:M.forecastConeDataColorScale[0]}}}));const h=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:h,series:c})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.initResizeObserve=()=>{const e=this.containerRef.current,{ResizeObserver:t}=window;if(e&&t){const a=new t(this.handleResize);a.observe(e),this.resizeObserver=()=>a.unobserve(e)}else this.handleResize(),window.addEventListener("resize",this.handleResize),this.resizeObserver=()=>window.removeEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:s}=this.props,{width:r}=this.state;let n=a;return e&&s&&r<700&&(n+=25),n},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const s=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(v.ChartBar,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement(v.ChartLine,{data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(v.ChartBar,{alignment:"middle",data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const s=a.has(t)?[{y:null}]:e.data;return o().createElement(v.ChartBar,{alignment:"middle",barWidth:1,data:s,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,v.createContainer)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,_.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state;return o().createElement(v.ChartLegend,{data:(0,_.oX)(a,t),gutter:20,height:25,itemsPerRow:e,name:"legend",orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,_.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.initResizeObserve()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.resizeObserver&&this.resizeObserver(),this.navToggle&&this.navToggle()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,s=a?(0,y.getDate)((0,b.Y_)(a,!0,!0)[1]):0,r=e?(0,y.getDate)((0,b.Y_)(e,!0,!0)[1]):0,n=t?(0,y.getDate)((0,b.Y_)(t,!0,!0)[1]):0;return r>0||s>0?Math.max(r,n,s):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,v.getInteractiveLegendEvents)({chartNames:(0,_.bC)(t),isDataHidden:a=>(0,_.E0)(t,e,a),isHidden:t=>(0,_.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:50,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:n,series:i,width:l}=this.state,c=(0,_.ge)(i,n),h=this.getEndDate(),u=Math.floor(h/2),d=1+Math.floor(u/2),m=1+u,g=h-Math.floor(u/2),p=r?o().cloneElement(r,{disable:!(0,_.TW)(i,n),labelComponent:o().createElement(v.ChartLegendTooltip,{legendData:(0,_.oX)(i,n,!0),title:e=>S().t("chart.day_of_month_title",{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,a&&o().createElement(s.Title,{headingLevel:"h3",size:"md"},a),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:l}},o().createElement(v.Chart,{containerComponent:p,domain:c,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,_.oX)(i,n),legendPosition:"bottom-left",padding:t,theme:D.Z,width:l},i&&i.length>0&&o().createElement(v.ChartGroup,{offset:11},i.map(((e,t)=>this.getChart(e,t)))),i&&i.length>0&&o().createElement(v.ChartGroup,{offset:11},o().createElement(v.ChartBar,{data:[{y:null}],name:"forcast_spacer"}),i.map(((e,t)=>this.getForecastBarChart(e,t)))),i&&i.length>0&&o().createElement(v.ChartGroup,{offset:11},o().createElement(v.ChartBar,{data:[{y:null}],name:"forcast_cone_spacer"}),i.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(v.ChartAxis,{style:M.xAxis,tickValues:[1,d,m,g,h]}),o().createElement(v.ChartAxis,{dependentAxis:!0,style:M.yAxis})))))}}const G=e=>o().createElement("div",{className:"chart"},o().createElement(Y,Object.assign({},e)));var W=a(5089);const q=e=>o().createElement("div",{className:"chart"},o().createElement(W.n,Object.assign({},e))),X={chartContainer:{marginTop:a(98499).ZP.value},currentRequestData:{data:{fill:"none",stroke:T.ZP.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:A.ZP.value}},itemsPerRow:2,legendColorScale:[N.ZP.value,A.ZP.value,N.ZP.value,T.ZP.value],previousRequestData:{data:{fill:"none",stroke:N.ZP.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:N.ZP.value}},currentColorScale:[A.ZP.value,T.ZP.value,x.ZP.value,R.ZP.value,F.ZP.value],previousColorScale:[N.ZP.value,N.ZP.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class $ extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.resizeObserver=L.Z,this.navToggle=L.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r="chart.usage_legend_label",n="chart.usage_legend_tooltip",o="chart.requests_legend_label",i="chart.requests_legend_tooltip",l=[{childName:"previousUsage",data:s,legendItem:{name:(0,b.Fs)(s,r,!0,!0,1),symbol:{fill:X.legendColorScale[0],type:"minus"},tooltip:(0,b.Fs)(s,n,!1,!1,1)},style:X.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:(0,b.Fs)(t,r,!0,!1),symbol:{fill:X.legendColorScale[1],type:"minus"},tooltip:(0,b.Fs)(t,n,!1,!1)},style:X.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:(0,b.Fs)(a,o,!0,!0,1),symbol:{fill:X.legendColorScale[2],type:"dash"},tooltip:(0,b.Fs)(a,i,!1,!1,1)},style:X.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:(0,b.Fs)(e,o,!0,!1),symbol:{fill:X.legendColorScale[3],type:"dash"},tooltip:(0,b.Fs)(e,i,!1,!1)},style:X.currentRequestData}],c=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:c,series:l})},this.initResizeObserve=()=>{const e=this.containerRef.current,{ResizeObserver:t}=window;if(e&&t){const a=new t(this.handleResize);a.observe(e),this.resizeObserver=()=>a.unobserve(e)}else this.handleResize(),window.addEventListener("resize",this.handleResize),this.resizeObserver=()=>window.removeEventListener("resize",this.handleResize),this.navToggle=insights.chrome.on("NAVIGATION_TOGGLE",this.handleNavToggle)},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:s}=this.state;let r=a;return e&&s<480&&(r+=20),r},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(v.ChartArea,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatDatumValue:e,formatDatumOptions:t}=this.props,a=(0,v.createContainer)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,_.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e}=this.props,{hiddenSeries:t,series:a,width:s}=this.state,r=e||(s>300?X.itemsPerRow:1);return o().createElement(v.ChartLegend,{data:(0,_.oX)(a,t),height:25,gutter:20,itemsPerRow:r,name:"legend"})},this.handleLegendClick=e=>{const t=(0,_.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleNavToggle=()=>{setTimeout(this.handleResize,500)},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.initResizeObserve()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.resizeObserver&&this.resizeObserver(),this.navToggle&&this.navToggle()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:s}=this.props,r=e?(0,y.getDate)((0,b.Y_)(e,!0,!0)[1]):0,n=t?(0,y.getDate)((0,b.Y_)(t,!0,!0)[1]):0,o=a?(0,y.getDate)((0,b.Y_)(a,!0,!0)[1]):0,i=s?(0,y.getDate)((0,b.Y_)(s,!0,!0)[1]):0;return r>0||n>0||o>0||i>0?Math.max(r,n,o,i):31}getEvents(){const{hiddenSeries:e,series:t}=this.state;return(0,v.getInteractiveLegendEvents)({chartNames:(0,_.bC)(t),isHidden:t=>(0,_.Yt)(e,t),legendName:"legend",onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,padding:t={bottom:75,left:8,right:8,top:8},title:a}=this.props,{cursorVoronoiContainer:r,hiddenSeries:n,series:i,width:l}=this.state,c=(0,_.ge)(i,n),h=this.getEndDate(),u=Math.floor(h/2),d=r?o().cloneElement(r,{disable:!(0,_.TW)(i,n),labelComponent:o().createElement(v.ChartLegendTooltip,{legendData:(0,_.oX)(i,n,!0),title:e=>S().t("chart.day_of_month_title",{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,o().createElement(s.Title,{headingLevel:"h3",size:"md"},a),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:l}},o().createElement(v.Chart,{containerComponent:d,domain:c,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,_.oX)(i,n),legendPosition:"bottom-left",padding:t,theme:D.Z,width:l},i&&i.map(((e,t)=>this.getChart(e,t))),o().createElement(v.ChartAxis,{style:X.xAxis,tickValues:[1,u,h]}),o().createElement(v.ChartAxis,{dependentAxis:!0,style:X.yAxis})))))}}const K=e=>o().createElement("div",{className:"chart"},o().createElement($,Object.assign({},e)))},99163:(e,t,a)=>{"use strict";a.d(t,{L:()=>o});var s=a(13325),r=a(97522),n=a.n(r);const o=()=>n().createElement("span",{className:"emptyValueContainer"},n().createElement(s.V_,null))}}]);
//# sourceMappingURL=0848fe2bccdd94327f3e.bundle.js.map