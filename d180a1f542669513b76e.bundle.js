(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{194:function(e,t,a){"use strict";a.d(t,"c",function(){return r}),a.d(t,"b",function(){return n}),a.d(t,"a",function(){return i});const r=e=>e?e.split("-")[0].toLowerCase():"",n=(e,t,a={})=>{const n=r(t),c=e||0;switch(n){case"usd":return i(c,n,a);case"gb":return o(c,n,a);default:return s(c,n,a)}},s=(e,t,{fractionDigits:a}={})=>e.toFixed(a),i=(e,t,{fractionDigits:a=2}={})=>{let r=e;return e||(r=0),r.toLocaleString("en",{style:"currency",currency:"USD",minimumFractionDigits:a,maximumFractionDigits:a})},o=(e,t,{fractionDigits:a=2}={})=>e.toFixed(a)},196:function(e,t,a){"use strict";a.d(t,"d",function(){return b}),a.d(t,"e",function(){return g}),a.d(t,"a",function(){return f}),a.d(t,"b",function(){return y}),a.d(t,"c",function(){return E});var r=a(348),n=a.n(r),s=a(275),i=a.n(s),o=a(274),c=a.n(o),l=a(273),u=a.n(l),d=a(39),p=a(194),m=a(221),h=a(215);function b(e,t=1,a="date"){if(!e)return[];const r={report:e,idKey:a,sortKey:"id",sortDirection:1},n=Object(m.a)(r);return 1===t?n.map(e=>v(e.total,e,a)):2===t?n.map(e=>v(e.total,e,a)):n.reduce((e,t)=>{const r=e.length?e[e.length-1].y:0;return[...e,v(r+t.total,t,a)]},[])}function g(e,t=1,a="date",r="charge"){if(!e)return[];const n={report:e,idKey:a,sortKey:"id",sortDirection:1},s=Object(h.a)(n);return 1===t?s.map(e=>v(e[r],e,a)):2===t?s.map(e=>v(e[r],e,a)):s.reduce((e,t)=>{const n=e.length?e[e.length-1].y:0;return[...e,v(n+t[r],t,a)]},[])}function v(e,t,a="date"){var r;return{x:"date"===a?c()(t.id):t.label,y:(r=e,Number(r)===r&&r%1!=0?parseFloat(e.toFixed(2)):function(e){return Number(e)===e&&e%1==0}(e)?e:0),key:t.id,name:t.id,units:t.units}}function f(e,t=!0,a=!1){const[r,s]=function(e){if(!e||!e.length){const e=new Date;return[u()(e),e]}return[new Date(e[0].key+"T00:00:00"),new Date(e[e.length-1].key+"T00:00:00")]}(e);if(t&&r.setDate&&r.setDate(1),a&&r.setDate){const e=n()(r).getDate();s.setDate(e)}const o=i()(r,"MMM"),l=c()(r),d=c()(s);return`${o} ${c()(r)}${l!==d?` - ${d}`:""}`}function y(e){return function(t,a=null,r={}){const n=Object(p.c)(a);switch(n){case"hrs":case"gb":return d.a.t(`units.${n}`,{value:`${e(t,a,r)}`});default:return`${e(t,a,r)}`}}}function E(e,t,a,r="date"){if(!e.key)return"";if("date"===r){return`${i()(e.key,"MMM D YYYY")}: ${t(e.y,e.units,a)}`}return e.key.toString()}},215:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return i});var r=a(216);function n({report:e,idKey:t,labelKey:a=t,sortKey:n="charge",sortDirection:i=0}){return Object(r.a)(s({report:e,idKey:t,labelKey:a,sortDirection:i,sortKey:n}),{key:n,direction:i})}function s({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const r={},n=e=>{e.values&&e.values.forEach(e=>{const n=e.capacity,s=e.charge,i=e[t];let o=e[a];"cluster"===a&&e.cluster_alias&&(o=e.cluster_alias);const c=e.limit,l=e.request,u=e.usage;r[i]?r[i]=Object.assign({},r[i],{capacity:r[i].capacity+n,charge:r[i].charge+s,limit:r[i].limit+c,request:r[i].request+l,usage:r[i].usage+u}):r[i]={app:e.app,capacity:n,charge:s,deltaPercent:e.delta_percent,deltaValue:e.delta_value,id:i,label:o,limit:c,request:l,units:e.units||u?"GB":"USD",usage:u}});for(const t in e)if(e[t]instanceof Array)return e[t].forEach(n)};return e&&e.data&&e.data.forEach(n),Object.values(r)}function i(e={}){return e.project?"project":e.cluster?"cluster":e.node?"node":"date"}},216:function(e,t,a){"use strict";function r(e,t){if("string"==typeof e)return e;return e[t.key]}function n(e,t){const{direction:a=0}=t||{};return[...e].sort((e,n)=>{const s=r(0===a?e:n,t),i=r(0===a?n:e,t);return s>i?-1:s<i?1:0})}a.d(t,"a",function(){return n})},220:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return n});const r=e=>({"data-testid":e}),n={details:{historical_data_btn:"historical-data-btn",tag_btn:"tag-btn"},export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},221:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"b",function(){return o});var r=a(216);const n=["services","accounts","instance_types","regions"];function s({report:e,idKey:t,labelKey:a=t,sortKey:n="total",sortDirection:s=0}){return Object(r.a)(i({report:e,idKey:t,labelKey:a,sortDirection:s,sortKey:n}),{key:n,direction:s})}function i({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const r={},s=e=>{e.values&&e.values.forEach(e=>{const n=e.total,s=e[t];let i=e[a];"account"===a&&e.account_alias&&(i=e.account_alias),r[s]?r[s]=Object.assign({},r[s],{total:r[s].total+n}):r[s]={deltaPercent:e.delta_percent,deltaValue:e.delta_value,id:s,total:n,label:i,units:e.units}}),n.forEach(t=>{if(e[t])return e[t].forEach(s)})};return e&&e.data&&e.data.forEach(s),Object.values(r)}function o(e={}){return e.account?"account":e.instance_type?"instance_type":e.region?"region":e.service?"service":"date"}},315:function(e,t,a){"use strict";var r=a(9),n=a(82),s=a(86),i=a(84),o=a(656),c=a(196),l=a(0),u=a.n(l),d=a(644),p=a(73),m=a(176);const h={axis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},colorScale:[m.V.value,m.L.value],previousMonth:{data:{fill:m.W.value,stroke:m.V.value}},currentMonth:{data:{fill:m.L.value,stroke:m.M.value}}},b=o.a.create({reportSummaryTrend:{":not(foo) svg":{overflow:"visible"}}});class g extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={width:0},this.initDatum=(()=>{const{currentData:e,previousData:t}=this.props,a=[];t&&t.length&&a.push({name:Object(c.a)(t,!0,!0)}),e&&e.length&&a.push({name:Object(c.a)(e)});const r={charts:[{data:t,show:!0,style:h.previousMonth},{data:e,show:!0,style:h.currentMonth}],legend:{colorScale:h.colorScale,data:a,onClick:this.handleCostLegendClick}};this.setState({datum:{cost:r}})}),this.handleCostLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.cost.charts.length&&(a.cost.charts[e.index].show=!a.cost.charts[e.index].show,this.setState({datum:a}))}),this.handleResize=(()=>{this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>e.data&&e.data.length&&e.show?u.a.createElement(i.a,{data:e.data,key:`trend-chart-${t}`,style:e.style}):null),this.getLegend=((e,t)=>{const{title:a}=this.props;return e&&e.data&&e.data.length?u.a.createElement(d.a,{colorScale:e.colorScale,data:e.data,events:[{target:"data",eventHandlers:{onClick:()=>[{target:"data",mutation:t=>(e.onClick(t),null)}]}}],height:50,theme:r.a.light.blue,title:a,width:t}):null}),this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props;return Object(c.c)(e,Object(c.b)(t),a,"date")})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const{height:e}=this.props,{datum:t,width:a}=this.state,r=u.a.createElement(s.a,{labels:this.getTooltipLabel});return u.a.createElement("div",{className:Object(o.b)(b.reportSummaryTrend),ref:this.containerRef},u.a.createElement("div",null,u.a.createElement(n.a,{containerComponent:r,height:e,width:a},Boolean(t&&t.cost)&&t.cost.charts.map((e,t)=>this.getChart(e,t)),u.a.createElement(p.a,{style:h.axis}),u.a.createElement(p.a,{dependentAxis:!0,style:h.axis}))),this.getLegend(t&&t.cost?t.cost.legend:{},a))}}a.d(t,"a",function(){return g})},330:function(e,t,a){"use strict";var r=a(0),n=a.n(r);const s=({data:e})=>{const t="function"==typeof e.content?e.content(e):e.content;return n.a.createElement("div",{role:"tabpanel"},t)};var i=a(656),o=a(176);const c=i.a.create({tabItem:{position:"relative",flexGrow:1,textAlign:"center",fontSize:o.r.value,padding:o.S.value,cursor:"pointer",marginBottom:o.R.value,marginTop:o.R.value},tabItemShrink:{flexGrow:"0",flexShrink:"2",marginRight:"20px"},selected:{backgroundImage:`linear-gradient(to top, ${o.L.value} 2px, transparent 2px)`}});class l extends n.a.Component{constructor(){super(...arguments),this.handleClick=(()=>{const{onSelect:e,data:t}=this.props;e(t.id)})}render(){const{data:e,isSelected:t,isShrink:a}=this.props;return n.a.createElement("div",{role:"tab",onClick:this.handleClick,"aria-selected":t,tabIndex:t?0:-1,className:Object(i.b)(c.tabItem,t&&c.selected,a&&c.tabItemShrink)},e.label)}}const u=i.a.create({tabNavigation:{display:"flex",alignItems:"flex-end",marginBottom:o.R.value}});class d extends n.a.Component{constructor(){super(...arguments),this.handleKeyDown=(e=>{if(!["ArrowRight","ArrowLeft"].includes(e.key))return;const{selected:t,tabs:a,onChange:r}=this.props,n="ArrowRight"===e.key?1:-1,s=a.findIndex(e=>e.id===t.id)+n;s<0||s>a.length-1||r(a[s].id)})}render(){const{isShrink:e,tabs:t,selected:a,onChange:r}=this.props;return n.a.createElement("div",{role:"tablist",className:Object(i.b)(u.tabNavigation),onKeyDown:this.handleKeyDown},t.map(t=>n.a.createElement(l,{isShrink:e,onSelect:r,key:t.id,data:t,isSelected:t.id===a.id})))}}const p=({isShrink:e,selected:t,tabs:a,onChange:r})=>{if(0===a.length)return n.a.createElement("div",null,"No data was found");const i=a.find(e=>e.id===t);return n.a.createElement("div",null,n.a.createElement(d,{isShrink:e,tabs:a,selected:i||a[0],onChange:r}),n.a.createElement(s,{data:i||a[0]}))};a.d(t,"a",function(){return p})},331:function(e,t,a){"use strict";var r=a(94),n=a(95),s=a(96),i=a(641),o=a(97),c=a(656),l=a(0),u=a.n(l),d=a(29),p=a(176);const m=c.a.create({reportSummary:{height:"100%"},subtitle:{fontSize:p.t.value,color:p.l.var,marginBottom:"0"}}),h=Object(d.c)()(({title:e,subTitle:t,detailsLink:a,children:l,status:d,t:p})=>u.a.createElement(o.a,{className:Object(c.b)(m.reportSummary)},u.a.createElement(r.a,null,u.a.createElement(i.b,{size:"lg"},e),Boolean(t)&&u.a.createElement("p",{className:Object(c.b)(m.subtitle)},t)),u.a.createElement(s.a,null,1===d?`${p("loading")}...`:l),Boolean(a)&&u.a.createElement(n.a,null,a))),b=c.a.create({reportSummaryDetails:{display:"flex",justifyContent:"space-between",marginBottom:p.R.value},value:{display:"flex",color:p.k.var,fontSize:p.p.value,marginRight:p.S.value},text:{display:"flex",alignItems:"flex-end",marginLeft:p.S.value,paddingBottom:14,lineHeight:p.x.value,fontSize:p.t.value}}),g=({label:e,formatValue:t,formatOptions:a,report:r,reportType:n="charge",requestLabel:s})=>{let i="----",o="----";if(r&&r.total)if("charge"===n){const e=r.total.units?r.total.units:"USD";i=t(r.total.charge,e,a)}else{const e=r.total.units?r.total.units:"GB";i=t(r.total.usage,e,a),o=t(r.total.request,e,a)}return u.a.createElement("div",{className:Object(c.b)(b.reportSummaryDetails)},u.a.createElement("div",{className:Object(c.b)(b.value)},i,u.a.createElement("div",{className:Object(c.b)(b.text)},u.a.createElement("div",null,e))),Boolean("charge"!==n)&&u.a.createElement("div",{className:Object(c.b)(b.value)},o,u.a.createElement("div",{className:Object(c.b)(b.text)},s)))};var v=a(80);const f=c.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:p.R.value}},test:{":not(foo) svg":{overflow:"visible"}}}),y=({label:e,value:t,totalValue:a,formatValue:r,units:n,formatOptions:s})=>{const i=Number((a?t/a*100:0).toFixed(2)),o=`${r(t,n,s)} (${i}%)`;return u.a.createElement("li",{className:Object(c.b)(f.reportSummaryItem)},u.a.createElement(v.b,{label:o,value:i,title:e,size:v.a.sm}))};y.defaultProps={formatValue:e=>e};var E=a(215);class D extends u.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,r=Object(E.a)({report:e,idKey:t,labelKey:a}),n=r.findIndex(e=>"Other"===e.id);return-1!==n?[...r.slice(0,n),...r.slice(n+1),r[n]]:r}render(){const{report:e,children:t}=this.props;if(!e)return null;const a=this.getItems();return u.a.createElement("ul",null,t({items:a}))}}var O=a(315);const j=e=>u.a.createElement("div",{style:{marginBottom:16}},u.a.createElement(O.a,Object.assign({height:75},e)));var w=a(86),k=a(9),T=a(84),S=a(82),x=a(196),R=a(73),C=a(644);const L={axis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},currentRequestData:{data:{fill:"none",stroke:p.X.value}},currentUsageData:{data:{fill:"none",stroke:p.L.value}},previousRequestData:{data:{fill:"none",stroke:p.Y.value}},previousUsageData:{data:{fill:"none",stroke:p.V.value}},requestColorScale:[p.Y.value,p.X.value],usageColorScale:[p.V.value,p.L.value]},_=c.a.create({reportSummaryTrend:{":not(foo) svg":{overflow:"visible"}}});class K extends u.a.Component{constructor(){super(...arguments),this.containerRef=u.a.createRef(),this.state={width:0},this.initDatum=(()=>{const{currentRequestData:e,currentRequestLabel:t,currentUsageData:a,currentUsageLabel:r,previousRequestData:n,previousRequestLabel:s,previousUsageData:i,previousUsageLabel:o}=this.props,c=[];s&&c.push({name:s}),t&&c.push({name:t});const l={charts:[{data:n,show:!0,style:L.previousRequestData},{data:e,show:!0,style:L.currentRequestData}],legend:{colorScale:L.requestColorScale,data:c,onClick:this.handleRequestLegendClick}},u=[];o&&u.push({name:o}),r&&u.push({name:r});const d={charts:[{data:i,show:!0,style:L.previousUsageData},{data:a,show:!0,style:L.currentUsageData}],legend:{colorScale:L.usageColorScale,data:u,gutter:55,onClick:this.handleUsageLegendClick}};this.setState({datum:{request:l,usage:d}})}),this.handleRequestLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.request.charts.length&&(a.request.charts[e.index].show=!a.request.charts[e.index].show,this.setState({datum:a}))}),this.handleResize=(()=>{this.setState({width:this.containerRef.current.clientWidth})}),this.handleUsageLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.usage.charts.length&&(a.usage.charts[e.index].show=!a.usage.charts[e.index].show,this.setState({datum:a}))}),this.getChart=((e,t)=>e.data&&e.data.length&&e.show?u.a.createElement(T.a,{data:e.data,key:`usage-chart-${t}`,style:e.style}):null),this.getLegend=((e,t,a=20)=>{const{title:r}=this.props;return e&&e.data&&e.data.length?u.a.createElement(C.a,{colorScale:e.colorScale,data:e.data,events:[{target:"data",eventHandlers:{onClick:()=>[{target:"data",mutation:t=>(e.onClick(t),null)}]}}],gutter:a,height:25,theme:k.a.light.blue,title:r,width:t}):null}),this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props;return Object(x.c)(e,Object(x.b)(t),a,"date")})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){const{height:e}=this.props,{datum:t,width:a}=this.state,r=u.a.createElement(w.a,{labels:this.getTooltipLabel});return u.a.createElement("div",{className:Object(c.b)(_.reportSummaryTrend),ref:this.containerRef},u.a.createElement("div",null,u.a.createElement(S.a,{containerComponent:r,height:e,width:a},Boolean(t&&t.request)&&t.request.charts.map((e,t)=>this.getChart(e,t)),Boolean(t&&t.usage)&&t.usage.charts.map((e,t)=>this.getChart(e,t)),u.a.createElement(R.a,{style:L.axis}),u.a.createElement(R.a,{dependentAxis:!0,style:L.axis}))),this.getLegend(t&&t.usage?t.usage.legend:{},a,55),this.getLegend(t&&t.request?t.request.legend:{},a))}}const q=e=>u.a.createElement("div",{style:{marginBottom:16}},u.a.createElement(K,Object.assign({height:75},e)));a.d(t,"a",function(){return h}),a.d(t,"b",function(){return g}),a.d(t,"c",function(){return y}),a.d(t,"d",function(){return D}),a.d(t,"e",function(){return j}),a.d(t,"f",function(){return q})},458:function(e,t,a){"use strict";var r=a(640),n=a(0),s=a.n(n),i=a(660);const o=r.c,c=e=>s.a.createElement(o,Object.assign({component:i.a,variant:"link"},e));a.d(t,"a",function(){return c})},494:function(e,t,a){"use strict";var r=a(69),n=a(93),s=a(0),i=a.n(s),o=a(29),c=a(26),l=a(32),u=a(30),d=a(23),p=a(34),m=a(196),h=a(458),b=a(331),g=a(330),v=a(275),f=a.n(v),y=a(274),E=a.n(y),D=a(459),O=a.n(D),j=a(273),w=a.n(j),k=a(17),T=a(194);const S=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}};const x=Object(l.a)((e,{widgetId:t})=>{const a=u.c.selectWidget(e,t),r=u.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,current:k.c.selectReport(e,a.reportType,r.current),previous:k.c.selectReport(e,a.reportType,r.previous),tabs:k.c.selectReport(e,a.reportType,r.tabs),status:k.c.selectReportFetchStatus(e,a.reportType,r.current)})}),R={fetchReports:u.a.fetchWidgetReports,updateTab:u.a.changeWidgetTab},C=Object(o.c)()(Object(c.b)(x,R)(class extends i.a.Component{constructor(){super(...arguments),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:S(e)||""})}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:S(e)||""})}),this.buildDetailsLink=(()=>{const{currentQuery:e}=this.props,t=Object(p.b)(e).group_by;return`/ocp?${Object(p.a)({group_by:t,order_by:{charge:"desc"}})}`}),this.renderTab=(e=>{const{reportType:t,tabs:a,topItems:r}=this.props,n=e.id;return i.a.createElement(b.d,{idKey:S(n),report:a},({items:e})=>e.map(e=>i.a.createElement(b.c,{key:e.id,formatOptions:r.formatOptions,formatValue:T.b,label:e.label.toString(),totalValue:"charge"===t?a.total.charge:a.total.usage,units:e.units,value:"charge"===t?e.charge:e.usage})))}),this.handleTabChange=(e=>{this.props.updateTab(this.props.id,e)})}componentDidMount(){const{fetchReports:e,widgetId:t}=this.props;e(t)}render(){const{t:e,titleKey:t,trend:a,details:r,current:n,previous:s,availableTabs:o,currentTab:c,reportType:l,status:u}=this.props,d=new Date,p=O()(d),v=f()(d,"Do"),y=f()(w()(d),"Do"),D=e(t,{endDate:v,month:p,startDate:y}),j=e("ocp_dashboard.widget_subtitle",{endDate:v,month:p,startDate:y,count:E()(d)}),k=e(r.labelKey),S=e(r.requestLabelKey),x="charge"===l&&i.a.createElement(h.a,{to:this.buildDetailsLink()},this.getDetailsLinkTitle(c)),R="charge"===l?"charge":"usage",C=Object(m.e)(n,a.type,"date",R),L=Object(m.e)(s,a.type,"date",R),_="charge"!==l?Object(m.e)(n,a.type,"date","request"):void 0,K="charge"!==l?Object(m.e)(s,a.type,"date","request"):void 0,q=e(a.currentRequestLabelKey,{date:Object(m.a)(_)}),B=e(a.currentUsageLabelKey,{date:Object(m.a)(C)}),N=e(a.previousRequestLabelKey,{date:Object(m.a)(K,!0,!0)}),I=e(a.previousUsageLabel,{date:Object(m.a)(L,!0,!0)});return i.a.createElement(b.a,{title:D,subTitle:j,detailsLink:x,status:u},i.a.createElement(b.b,{report:n,reportType:l,formatValue:T.b,label:k,formatOptions:r.formatOptions,requestLabel:S}),Boolean("charge"===l)?i.a.createElement(b.e,{title:e(a.titleKey),currentData:C,formatDatumValue:T.b,formatDatumOptions:a.formatOptions,previousData:L}):i.a.createElement(b.f,{currentRequestData:_,currentRequestLabel:q,currentUsageData:C,currentUsageLabel:B,formatDatumValue:T.b,formatDatumOptions:a.formatOptions,previousRequestData:K,previousRequestLabel:N,previousUsageData:L,previousUsageLabel:I}),i.a.createElement(g.a,{tabs:o.map(e=>({id:e,label:this.getTabTitle(e),content:this.renderTab})),selected:c,onChange:this.handleTabChange}))}})),L=Object(l.a)(e=>({widgets:u.c.selectCurrentWidgets(e)})),_=Object(o.c)()(Object(c.b)(L,{openProvidersModal:d.a.openProvidersModal})(({t:e,openProvidersModal:t,widgets:a})=>i.a.createElement("div",null,i.a.createElement(r.a,{gutter:"md"},a.map(e=>i.a.createElement(n.a,{xl:4,lg:6,key:e},i.a.createElement(C,{widgetId:e})))))));t.a=_},496:function(e,t,a){"use strict";var r=a(640),n=a(93),s=a(69),i=a(641),o=a(330),c=a(0),l=a.n(c),u=a(29),d=a(26),p=a(32),m=a(19),h=a(23),b=a(220),g=a(502),v=a(501),f=a(97),y=a(659),E=a(656),D=a(176);const O=E.a.create({card:{display:"flex",alignItems:"center",justifyContent:"center",height:"75vh",marginTop:"30px"},cardBody:{textAlign:"center"},primaryAction:{marginTop:"60px"},subtitle:{color:D.l.var,marginTop:"30px"},title:{marginTop:"30px"}}),j=({primaryAction:e,subTitle:t,title:a})=>l.a.createElement("div",null,l.a.createElement(f.a,{className:Object(E.b)(O.card)},l.a.createElement("div",{className:Object(E.b)(O.cardBody)},l.a.createElement(s.a,{gutter:"lg"},l.a.createElement(n.a,{md:1,lg:2}),l.a.createElement(n.a,{md:10,lg:8},l.a.createElement(y.a,{size:"xl"}),l.a.createElement(i.b,{className:Object(E.b)(O.title),size:"lg"},a),Boolean(t)&&l.a.createElement("p",{className:Object(E.b)(O.subtitle)},t),Boolean(e)&&l.a.createElement("div",{className:Object(E.b)(O.primaryAction)},e)),l.a.createElement(n.a,{md:1,lg:2})))));const w=Object(p.a)(e=>{const t=[],a=m.c.selectProviders(e);if(a&&a.results){let e=!1,r=!1;for(const t of a.results)"AWS"===t.type?e=!0:"OCP"===t.type&&(r=!0);e&&t.push("aws"),r&&t.push("ocp")}return{availableTabs:t,providers:a,providersFetchStatus:m.c.selectProvidersFetchStatus(e)}}),k=Object(u.c)()(Object(d.b)(w,{openProvidersModal:h.a.openProvidersModal})(class extends l.a.Component{constructor(){super(...arguments),this.state={currentTab:"aws"},this.getTabTitle=(e=>{const{t:t}=this.props;return"aws"===e?t("overview.aws"):"ocp"===e?t("overview.ocp"):void 0}),this.renderTab=(e=>"aws"===e.id?l.a.createElement(g.a,null):l.a.createElement(v.a,null)),this.handleTabChange=(e=>{this.setState({currentTab:e})})}render(){const{availableTabs:e,openProvidersModal:t,providers:a,providersFetchStatus:c,t:u}=this.props,{currentTab:d}=this.state,p=l.a.createElement(r.c,Object.assign({},Object(b.a)(b.b.providers.add_btn),{onClick:t,type:r.a.submit,variant:r.b.secondary}),u("providers.add_source"));return l.a.createElement("div",{className:"pf-l-page__main-section pf-u-pb-xl pf-u-px-xl"},l.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},l.a.createElement(i.b,{size:i.a.lg},u("overview.title")),p),l.a.createElement("div",null,Boolean(a&&a.count>0&&2===c)?l.a.createElement(o.a,{isShrink:Boolean(!0),tabs:e.map(e=>({id:e,label:this.getTabTitle(e),content:this.renderTab})),selected:d,onChange:this.handleTabChange}):l.a.createElement(s.a,{gutter:"lg"},l.a.createElement(n.a,null,l.a.createElement(j,{primaryAction:p,title:u("overview.empty_state_title"),subTitle:u("overview.empty_state_desc")})))))}}));t.a=k},498:function(e,t,a){"use strict";var r=a(69),n=a(93),s=a(0),i=a.n(s),o=a(29),c=a(26),l=a(31),u=a(32),d=a(23),p=a(36),m=a(94),h=a(95),b=a(96),g=a(641),v=a(97),f=a(656),y=a(176);const E=f.a.create({reportSummary:{height:"100%"},subtitle:{fontSize:y.t.value,color:y.l.var,marginBottom:"0"}}),D=Object(o.c)()(({title:e,subTitle:t,detailsLink:a,children:r,status:n,t:s})=>i.a.createElement(v.a,{className:Object(f.b)(E.reportSummary)},i.a.createElement(m.a,null,i.a.createElement(g.b,{size:"lg"},e),Boolean(t)&&i.a.createElement("p",{className:Object(f.b)(E.subtitle)},t)),i.a.createElement(b.a,null,1===n?`${s("loading")}...`:r),Boolean(a)&&i.a.createElement(h.a,null,a))),O=f.a.create({reportSummaryDetails:{marginBottom:y.R.value,display:"flex",alignItems:"flex-end"},value:{color:y.k.var,marginRight:y.S.value,fontSize:y.p.value},text:{paddingBottom:14,lineHeight:y.x.value,fontSize:y.t.value}}),j=({label:e,formatValue:t,formatOptions:a,report:r})=>{let n="----";return r&&(n=r.total?t(r.total.value,r.total.units,a):0),i.a.createElement("div",{className:Object(f.b)(O.reportSummaryDetails)},i.a.createElement("div",{className:Object(f.b)(O.value)},n),i.a.createElement("div",{className:Object(f.b)(O.text)},i.a.createElement("div",null,e)))};var w=a(80);const k=f.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:y.R.value}},test:{":not(foo) svg":{overflow:"visible"}}}),T=({label:e,value:t,totalValue:a,formatValue:r,units:n,formatOptions:s})=>{const o=Number((a?t/a*100:0).toFixed(2)),c=`${r(t,n,s)} (${o}%)`;return i.a.createElement("li",{className:Object(f.b)(k.reportSummaryItem)},i.a.createElement(w.b,{label:c,value:o,title:e,size:w.a.sm}))};T.defaultProps={formatValue:e=>e};var S=a(221);class x extends i.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,r=Object(S.a)({report:e,idKey:t,labelKey:a}),n=r.findIndex(e=>"Other"===e.id);return-1!==n?[...r.slice(0,n),...r.slice(n+1),r[n]]:r}render(){const{report:e,children:t}=this.props;if(!e)return null;const a=this.getItems();return i.a.createElement("ul",null,t({items:a}))}}var R=a(315);const C=e=>i.a.createElement("div",{style:{marginBottom:16}},i.a.createElement(R.a,Object.assign({height:75},e)));var L=a(196),_=a(458),K=a(330),q=a(275),B=a.n(q),N=a(274),I=a.n(N),U=a(459),z=a.n(U),V=a(273),M=a.n(V),$=a(18),W=a(194);const P=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}};const A=Object(u.a)((e,{widgetId:t})=>{const a=l.c.selectWidget(e,t),r=l.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:r.current,previousQuery:r.previous,tabsQuery:r.tabs,current:$.c.selectReport(e,a.reportType,r.current),previous:$.c.selectReport(e,a.reportType,r.previous),tabs:$.c.selectReport(e,a.reportType,r.tabs),status:$.c.selectReportFetchStatus(e,a.reportType,r.current)})}),F={fetchReports:l.a.fetchWidgetReports,updateTab:l.a.changeWidgetTab},Q=Object(o.c)()(Object(c.b)(A,F)(class extends i.a.Component{constructor(){super(...arguments),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:P(e)||""})}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:P(e)||""})}),this.buildDetailsLink=(()=>{const{currentQuery:e}=this.props,t=Object(p.b)(e).group_by;return`/aws?${Object(p.a)({group_by:t,order_by:{total:"desc"}})}`}),this.renderTab=(e=>{const{tabs:t,topItems:a}=this.props,r=e.id;return i.a.createElement(x,{idKey:P(r),report:t},({items:e})=>e.map(e=>i.a.createElement(T,{key:e.id,formatOptions:a.formatOptions,formatValue:W.b,label:e.label.toString(),totalValue:t.total.value,units:e.units,value:e.total})))}),this.handleTabChange=(e=>{this.props.updateTab(this.props.id,e)})}componentDidMount(){const{fetchReports:e,widgetId:t}=this.props;e(t)}render(){const{t:e,titleKey:t,trend:a,details:r,current:n,previous:s,availableTabs:o,currentTab:c,reportType:l,status:u}=this.props,d=new Date,p=z()(d),m=B()(d,"Do"),h=B()(M()(d),"Do"),b=e(t,{endDate:m,month:p,startDate:h}),g=e("aws_dashboard.widget_subtitle",{endDate:m,month:p,startDate:h,count:I()(d)}),v=e(r.labelKey,{context:r.labelKeyContext}),f="cost"===l&&i.a.createElement(_.a,{to:this.buildDetailsLink()},this.getDetailsLinkTitle(c)),y=e(a.titleKey),E=Object(L.d)(n,a.type),O=Object(L.d)(s,a.type);return i.a.createElement(D,{title:b,subTitle:g,detailsLink:f,status:u},i.a.createElement(j,{report:n,formatValue:W.b,label:v,formatOptions:r.formatOptions}),i.a.createElement(C,{title:y,currentData:E,formatDatumValue:W.b,formatDatumOptions:a.formatOptions,previousData:O}),i.a.createElement(K.a,{tabs:o.map(e=>({id:e,label:this.getTabTitle(e),content:this.renderTab})),selected:c,onChange:this.handleTabChange}))}})),Y=Object(u.a)(e=>({widgets:l.c.selectCurrentWidgets(e)})),G=Object(o.c)()(Object(c.b)(Y,{openProvidersModal:d.a.openProvidersModal})(({t:e,openProvidersModal:t,widgets:a})=>i.a.createElement("div",null,i.a.createElement(r.a,{gutter:"md"},a.map(e=>i.a.createElement(n.a,{xl:4,lg:6,key:e},i.a.createElement(Q,{widgetId:e})))))));t.a=G},501:function(e,t,a){"use strict";(function(e){var r=a(35),n=a(494);t.a=Object(r.hot)(e)(n.a)}).call(this,a(33)(e))},502:function(e,t,a){"use strict";(function(e){var r=a(35),n=a(498);t.a=Object(r.hot)(e)(n.a)}).call(this,a(33)(e))},648:function(e,t,a){"use strict";a.r(t),function(e){var r=a(35),n=a(496);t.default=Object(r.hot)(e)(n.a)}.call(this,a(33)(e))}}]);
//# sourceMappingURL=d180a1f542669513b76e.bundle.js.map