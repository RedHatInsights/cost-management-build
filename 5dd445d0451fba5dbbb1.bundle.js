(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[2340],{66785:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(43702);function a(e){return(0,s.stringify)(e,{encode:!1,indices:!1})}},52413:(e,t,r)=>{"use strict";r.d(t,{G:()=>p});var s=r(9947),a=r(2372),i=r(60485),c=r(75106),o=r(97522),n=r.n(o);const p=(0,r(57827).withTranslation)()((({t:e})=>{const t=e("loading_state.sources_title"),r=e("loading_state.sources_desc");return n().createElement(s.u,{variant:s.I.large,className:"pf-m-redhat-font"},n().createElement(a.$,{size:"lg"}),n().createElement(i.D,{headingLevel:"h5",size:"lg"},t),n().createElement(c.B,null,r))}))},96924:(e,t,r)=>{"use strict";r.d(t,{X:()=>u});var s=r(84457),a=r(56787),i=r(75728),c=r(97522),o=r.n(c),n=r(57827);const p={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:r(32412).ZP.var}};class l extends o().Component{constructor(){super(...arguments),this.defaultState={isPerspectiveOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e,t}=this.props;return e.map((e=>o().createElement(s.h,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label))))},this.getCurrentLabel=()=>{const{currentItem:e,options:t,t:r}=this.props;let s="";for(const a of t)if(e===a.value){s=r(a.label);break}return s},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isPerspectiveOpen:!this.state.isPerspectiveOpen})},this.handleToggle=e=>{this.setState({isPerspectiveOpen:e})}}render(){const{isDisabled:e,t}=this.props,{isPerspectiveOpen:r}=this.state,s=this.getDropDownItems();return o().createElement("div",{style:p.perspectiveSelector},o().createElement("label",{style:p.perspectiveLabel},t("overview.perspective.label")),o().createElement(a.L,{onSelect:this.handleSelect,toggle:o().createElement(i.Z,{isDisabled:e,onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:r,dropdownItems:s}))}}const u=(0,n.withTranslation)()(l)},93509:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Dt});var s=r(48099),a=r(29873),i=r(79770),c=r(90832),o=r(60485),n=r(37377),p=r(47173),l=r(55795),u=r(86208),h=r(66785),d=r(73466),g=r(64146),m=r(13883),v=r(96924),b=r(50693),y=r(16475),T=r(97522),f=r.n(T);const w=({DashboardWidget:e,selectWidgets:t,widgets:r})=>f().createElement("div",null,f().createElement(b.r,{hasGutter:!0},r.map((r=>t[r].details.showHorizontal?f().createElement(y.P,{sm:12,key:r},f().createElement(e,{widgetId:r})):f().createElement(y.P,{lg:12,xl:6,xl2:4,key:r},f().createElement(e,{widgetId:r}))))));var P=r(57827),R=r(86588),F=r(94377),D=r(37062),S=r(95078),C=r(60232),I=r(35956),E=r(36234),A=r(17230),_=r(55399),O=r(901),V=r(84457),W=r(56787),j=r(75728);class Z extends f().Component{constructor(){super(...arguments),this.defaultState={isChartComparisonOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=()=>{const{options:e,t}=this.props;return e.map((e=>f().createElement(V.h,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label))))},this.getCurrentLabel=()=>{const{currentItem:e,options:t,t:r}=this.props;let s="";for(const a of t)if(e===a.value){s=r(a.label);break}return s},this.handleClick=e=>{const{onItemClicked:t}=this.props;t&&t(e)},this.handleSelect=()=>{this.setState({isChartComparisonOpen:!this.state.isChartComparisonOpen})},this.handleToggle=e=>{this.setState({isChartComparisonOpen:e})}}render(){const{isChartComparisonOpen:e}=this.state,t=this.getDropDownItems();return f().createElement(W.L,{onSelect:this.handleSelect,toggle:f().createElement(j.Z,{onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:e,dropdownItems:t})}}const L=(0,P.withTranslation)()(Z);var Q=r(91707),k=r(32412),z=r(57640);const K={chartAltHeight:250,chartHeight:180,containerAltHeight:250,containerTrendHeight:180,containerUsageHeight:180},U={comparison:{marginBottom:k.ZP.value},tabs:{marginTop:Q.ZP.value},tabItems:{marginTop:z.ZP.value}};class H extends f().Component{constructor(){super(...arguments),this.state={activeTabKey:0,currentComparison:"cumulative"},this.buildDetailsLink=e=>{const{details:t,getIdKeyForTab:r}=this.props,s=r(e);return`${t.viewAllPath}?${(0,S.pm)({group_by:{[s]:"*"},order_by:{cost:"desc"}})}`},this.getChart=(e,t,r=!1)=>{const{chartType:s,trend:a}=this.props;return"dailyTrend"===s?this.getDailyTrendChart(e,t,r,a.showSupplementaryLabel):"dailyCost"===s?this.getDailyCostChart(e,t,r):"trend"===s?this.getTrendChart(e,t,r,a.showSupplementaryLabel):"usage"===s?this.getUsageChart(t,r):null},this.getChartComparison=()=>{const{t:e,trend:t}=this.props,{currentComparison:r}=this.state,s=this.getUnits(),a=e(t.titleKey,{units:e(`units.${s}`)}),i=[{label:e(t.dailyTitleKey,{units:e(`units.${s}`)}),value:"daily"},{label:a,value:"cumulative"}];return f().createElement(L,{currentItem:r||i[0].value,onItemClicked:this.handleComparisonClick,options:i})},this.getDailyCostChart=(e,t,r=!1)=>{const{currentReport:s,previousReport:a,trend:i}=this.props,{currentComparison:c}=this.state,o=i.computedReportItem,n=i.computedReportItemValue,p="daily"===c,l=p?1:i.type,u=(0,C.zJ)(s,l,"date","infrastructure",n),h=(0,C.zJ)(a,l,"date","infrastructure",n),d=(0,C.zJ)(s,l,"date",o,n),g=(0,C.zJ)(a,l,"date",o,n),m=this.getForecastData(s,i.computedForecastItem),v=this.getForecastData(s,i.computedForecastInfrastructureItem),b=p?I.V3:I.me;return f().createElement(f().Fragment,null,f().createElement("div",{style:U.comparison},this.getChartComparison()),f().createElement(b,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,currentInfrastructureCostData:u,forecastConeData:m.forecastConeData,forecastData:m.forecastData,forecastInfrastructureConeData:v.forecastConeData,forecastInfrastructureData:v.forecastData,formatDatumValue:O.Bw,formatDatumOptions:i.formatOptions,height:t,previousCostData:g,previousInfrastructureCostData:h,showForecast:void 0!==i.computedForecastItem}))},this.getDailyTrendChart=(e,t,r=!1,s=!1)=>{const{currentReport:a,details:i,previousReport:c,trend:o}=this.props,{currentComparison:n}=this.state,p=this.getUnits(),l=o.computedReportItem,u=o.computedReportItemValue,h="daily"===n,d=h?1:o.type,g=(0,C.zJ)(a,d,"date",l,u),m=(0,C.zJ)(c,d,"date",l,u),{forecastData:v,forecastConeData:b}=this.getForecastData(a,o.computedForecastItem),y=h?I.Y0:I.Nd;return f().createElement(f().Fragment,null,f().createElement("div",{style:U.comparison},this.getChartComparison()),f().createElement(y,{adjustContainerHeight:r,containerHeight:e,currentData:g,forecastData:v,forecastConeData:b,formatDatumValue:O.Bw,formatDatumOptions:o.formatOptions,height:t,previousData:m,showForecast:void 0!==o.computedForecastItem,showSupplementaryLabel:s,showUsageLegendLabel:i.showUsageLegendLabel,units:p}))},this.getForecastData=(e,t="cost")=>{const{forecast:r,trend:s}=this.props,{currentComparison:a}=this.state,i="daily"===a?1:s.type;let c,o;if(t){const s=(0,A.cloneDeep)(r);if(s&&(s.data=[]),r&&e&&e.data){const a=e.meta&&e.meta.total&&e.meta.total[t]?e.meta.total[t].total.value:0,c=e.data.filter((e=>e.values.length)),o=c[c.length-1]?c[c.length-1].date:void 0;if(r&&r.data){const e=new Date(o),t=e.getMonth()+1;for(const a of r.data){const r=new Date(a.date),i=r.getMonth()+1;r>e&&t===i&&s.data.push(a)}}0===i&&s.data.unshift({date:o,values:[{date:o,cost:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:"USD"}},infrastructure:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:"USD"}},supplementary:{confidence_max:{value:0},confidence_min:{value:0},total:{value:a,units:"USD"}}}]})}c=(0,C.nB)(s,i,t),o=(0,C.Qw)(s,i,t)}return{forecastData:c,forecastConeData:o}},this.getTrendChart=(e,t,r=!1,s=!1)=>{const{currentReport:a,details:i,previousReport:c,t:o,trend:n}=this.props,p=this.getUnits(),l=o(n.titleKey,{units:o(`units.${p}`)}),u=n.computedReportItem,h=n.computedReportItemValue,d=(0,C.zJ)(a,n.type,"date",u,h),g=(0,C.zJ)(c,n.type,"date",u,h),{forecastData:m,forecastConeData:v}=this.getForecastData(a,n.computedForecastItem);return f().createElement(I.Nd,{adjustContainerHeight:r,containerHeight:e,currentData:d,forecastData:m,forecastConeData:v,formatDatumValue:O.Bw,formatDatumOptions:n.formatOptions,height:t,previousData:g,showForecast:void 0!==n.computedForecastItem,showSupplementaryLabel:s,showUsageLegendLabel:i.showUsageLegendLabel,title:l,units:p})},this.getUsageChart=(e,t=!1)=>{const{currentReport:r,previousReport:s,t:a,trend:i}=this.props,c=this.getUnits(),o=a(i.titleKey,{units:a(`units.${c}`)}),n=(0,C.zJ)(r,i.type,"date","request"),p=(0,C.zJ)(s,i.type,"date","request"),l=(0,C.zJ)(r,i.type,"date","usage"),u=(0,C.zJ)(s,i.type,"date","usage");return f().createElement(I.I0,{adjustContainerHeight:t,containerHeight:K.containerUsageHeight,currentRequestData:n,currentUsageData:l,formatDatumValue:O.Bw,formatDatumOptions:i.formatOptions,height:e,previousRequestData:p,previousUsageData:u,title:o})},this.getDetails=()=>{const{chartType:e,currentReport:t,details:r,reportType:s,trend:a}=this.props,i=a.computedReportItem||"cost",c=a.computedReportItemValue||"total",o=this.getUnits();return f().createElement(I.rN,{chartType:e,computedReportItem:i,computedReportItemValue:c,costLabel:this.getDetailsLabel(r.costKey,o),formatOptions:r.formatOptions,formatValue:O.Bw,report:t,reportType:s,requestLabel:this.getDetailsLabel(r.requestKey,o),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:r.units,usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey,o)})},this.getDetailsLabel=(e,t)=>{const{t:r}=this.props;return e?r(e,{units:r(`units.${t}`)}):void 0},this.getDetailsLink=()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?f().createElement(_.Link,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e)):null},this.getDetailsLinkTitle=e=>{const{getIdKeyForTab:t,t:r}=this.props;return r("group_by.all",{groupBy:t(e)||""})},this.getHorizontalLayout=()=>{const{containerAltHeight:e=K.containerAltHeight,chartAltHeight:t=K.chartAltHeight,currentReportFetchStatus:r,details:s}=this.props;return f().createElement(I.j0,{detailsLink:this.getDetailsLink(),status:r,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,s.adjustContainerHeight))},this.getSubTitle=()=>{const{t:e}=this.props,t=new Date,r=(0,E.getMonth)(t),s=(0,E.format)(t,"d"),a=(0,E.format)((0,E.startOfMonth)(t),"d");return e("dashboard.widget_subtitle",{count:(0,E.getDate)(t),endDate:s,month:r,startDate:a})},this.getTab=(e,t)=>{const{getIdKeyForTab:r,tabsReport:i,tabsReportFetchStatus:c}=this.props,o=r(e);return f().createElement(s.O,{eventKey:t,key:`${r(e)}-tab`,title:f().createElement(a.T,null,this.getTabTitle(e))},f().createElement("div",{style:U.tabItems},f().createElement(I.mZ,{idKey:o,key:`${o}-items`,report:i,status:c},(({items:t})=>t.map((t=>this.getTabItem(e,t)))))))},this.getTabItem=(e,t)=>{const{availableTabs:r,details:s,getIdKeyForTab:a,tabsReport:i,topItems:c,trend:o}=this.props,{activeTabKey:n}=this.state,p=a(e),l=a(r[n]),u=o.computedReportItem||"cost",h=o.computedReportItemValue||"total";let d;const g=i&&i.meta&&i.meta.total;return"usage"===u?g&&i.meta.total.usage&&(d=i.meta.total.usage.value):g&&i.meta.total[u]&&i.meta.total[u][h]&&(d=i.meta.total[u][h].value),l===p?f().createElement(I.EH,{key:`${t.id}-item`,formatOptions:c.formatOptions,formatValue:O.Bw,label:t.label?t.label.toString():"",totalValue:d,units:s.units?s.units:this.getUnits(),value:t[u][h].value}):null},this.getTabs=()=>{const{availableTabs:e}=this.props;return f().createElement(c.m,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e,t))))},this.getTabTitle=e=>{const{getIdKeyForTab:t,t:r}=this.props;return r("group_by.top",{groupBy:t(e)||""})},this.getTitle=()=>{const{t:e,titleKey:t}=this.props,r=new Date,s=(0,E.getMonth)(r);return e(t,{endDate:(0,E.format)(r,"Do"),month:s,startDate:(0,E.format)((0,E.startOfMonth)(r),"Do")})},this.getUnits=()=>{const{currentReport:e,details:t,trend:r}=this.props,s=r.computedReportItem||"cost",a=r.computedReportItemValue||"total";if(t.units)return t.units;let i;const c=e&&e.meta&&e.meta.total;return i="usage"===s?c&&e.meta.total.usage?(0,O.dM)(e.meta.total.usage.units):"":c&&e.meta.total[s]&&e.meta.total[s][a]?(0,O.dM)(e.meta.total[s][a].units):"",i},this.getVerticalLayout=()=>{const{availableTabs:e,currentReportFetchStatus:t,details:r}=this.props;return f().createElement(I.iu,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(K.containerTrendHeight,K.chartHeight,r.adjustContainerHeight),Boolean(e)&&f().createElement("div",{style:U.tabs},this.getTabs()))},this.handleComparisonClick=e=>{this.setState({currentComparison:e})},this.handleInsightsNavClick=()=>{const{details:e}=this.props;e.appNavId&&insights.chrome.appNavClick({id:e.appNavId,secondaryNav:!0})},this.handleTabClick=(e,t)=>{const{availableTabs:r,id:s,updateTab:a}=this.props;a(s,r[t]),this.setState({activeTabKey:t})}}componentDidMount(){const{availableTabs:e,fetchForecasts:t,fetchReports:r,id:s,trend:a,updateTab:i,widgetId:c}=this.props;e&&i(s,e[0]),r&&r(c),void 0!==a.computedForecastItem&&t(c)}render(){const{details:e}=this.props;return e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}var X=r(26335),x=r(90203);const $=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},J=(0,F.X1)(((e,{widgetId:t})=>{const r=D.jh.selectWidget(e,t),s=D.jh.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:$,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),B={fetchForecasts:D.k4.v4,fetchReports:D.k4.a4,updateTab:D.k4.as},N=(0,P.withTranslation)()((0,R.connect)(J,B)(H)),q=(0,F.X1)(((e,t)=>({DashboardWidget:N,selectWidgets:D.jh.selectWidgets(e),widgets:D.jh.selectCurrentWidgets(e)}))),M=(0,P.withTranslation)()((0,R.connect)(q,{})(w));var G=r(67119);const Y=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},ee=(0,F.X1)(((e,{widgetId:t})=>{const r=G.Cv.selectWidget(e,t),s=G.Cv.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Y,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),te={fetchForecasts:G.Kf.v4,fetchReports:G.Kf.a4,updateTab:G.Kf.as},re=(0,P.withTranslation)()((0,R.connect)(ee,te)(H)),se=(0,F.X1)(((e,t)=>({DashboardWidget:re,selectWidgets:G.Cv.selectWidgets(e),widgets:G.Cv.selectCurrentWidgets(e)}))),ae=(0,P.withTranslation)()((0,R.connect)(se,{})(w));var ie=r(49016);const ce=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},oe=(0,F.X1)(((e,{widgetId:t})=>{const r=ie.$I.selectWidget(e,t),s=ie.$I.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:ce,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),ne={fetchForecasts:ie._S.v4,fetchReports:ie._S.a4,updateTab:ie._S.as},pe=(0,P.withTranslation)()((0,R.connect)(oe,ne)(H)),le=(0,F.X1)(((e,t)=>({DashboardWidget:pe,selectWidgets:ie.$I.selectWidgets(e),widgets:ie.$I.selectCurrentWidgets(e)}))),ue=(0,P.withTranslation)()((0,R.connect)(le,{})(w));var he=r(31554);const de=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},ge=(0,F.X1)(((e,{widgetId:t})=>{const r=he.rj.selectWidget(e,t),s=he.rj.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:de,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),me={fetchForecasts:he.oc.v4,fetchReports:he.oc.a4,updateTab:he.oc.as},ve=(0,P.withTranslation)()((0,R.connect)(ge,me)(H)),be=(0,F.X1)(((e,t)=>({DashboardWidget:ve,selectWidgets:he.rj.selectWidgets(e),widgets:he.rj.selectCurrentWidgets(e)}))),ye=(0,P.withTranslation)()((0,R.connect)(be,{})(w));var Te=r(79522);const fe=e=>{switch(e){case"services":return"service";case"projects":return"project";case"regions":return"region";case"instance_type":return"instance_type"}},we=(0,F.X1)(((e,{widgetId:t})=>{const r=Te.oS.selectWidget(e,t),s=Te.oS.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:fe,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Pe={fetchForecasts:Te.n5.v4,fetchReports:Te.n5.a4,updateTab:Te.n5.as},Re=(0,P.withTranslation)()((0,R.connect)(we,Pe)(H)),Fe=(0,F.X1)(((e,t)=>({DashboardWidget:Re,selectWidgets:Te.oS.selectWidgets(e),widgets:Te.oS.selectCurrentWidgets(e)}))),De=(0,P.withTranslation)()((0,R.connect)(Fe,{})(w));var Se=r(75836);const Ce=e=>{switch(e){case"services":return"service";case"projects":return"project";case"regions":return"region";case"instance_type":return"instance_type"}},Ie=(0,F.X1)(((e,{widgetId:t})=>{const r=Se.Pi.selectWidget(e,t),s=Se.Pi.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Ce,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Ee={fetchForecasts:Se.lj.v4,fetchReports:Se.lj.a4,updateTab:Se.lj.as},Ae=(0,P.withTranslation)()((0,R.connect)(Ie,Ee)(H)),_e=(0,F.X1)(((e,t)=>({DashboardWidget:Ae,selectWidgets:Se.Pi.selectWidgets(e),widgets:Se.Pi.selectCurrentWidgets(e)}))),Oe=(0,P.withTranslation)()((0,R.connect)(_e,{})(w));var Ve=r(83123);const We=e=>{switch(e){case"accounts":return"account";case"regions":return"region";case"services":return"service"}},je=(0,F.X1)(((e,{widgetId:t})=>{const r=Ve.qN.selectWidget(e,t),s=Ve.qN.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:We,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),Ze={fetchForecasts:Ve.BV.v4,fetchReports:Ve.BV.a4,updateTab:Ve.BV.as},Le=(0,P.withTranslation)()((0,R.connect)(je,Ze)(H)),Qe=(0,F.X1)(((e,t)=>({DashboardWidget:Le,selectWidgets:Ve.qN.selectWidgets(e),widgets:Ve.qN.selectCurrentWidgets(e)}))),ke=(0,P.withTranslation)()((0,R.connect)(Qe,{})(w));var ze=r(17563);const Ke=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Ue=(0,F.X1)(((e,{widgetId:t})=>{const r=ze.nH.selectWidget(e,t),s=ze.nH.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Ke,chartAltHeight:250,containerAltHeight:250,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),He={fetchForecasts:ze.U6.v4,fetchReports:ze.U6.a4,updateTab:ze.U6.as},Xe=(0,P.withTranslation)()((0,R.connect)(Ue,He)(H)),xe=(0,F.X1)(((e,t)=>({DashboardWidget:Xe,selectWidgets:ze.nH.selectWidgets(e),widgets:ze.nH.selectCurrentWidgets(e)}))),$e=(0,P.withTranslation)()((0,R.connect)(xe,{})(w));var Je=r(77e3);const Be=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Ne=(0,F.X1)(((e,{widgetId:t})=>{const r=Je.xX.selectWidget(e,t),s=Je.xX.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Be,currentQuery:s.current,forecastQuery:s.forecast,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),forecast:X.mj.selectForecast(e,r.forecastPathsType,r.forecastType,s.forecast),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),qe={fetchForecasts:Je.T3.v4,fetchReports:Je.T3.a4,updateTab:Je.T3.as},Me=(0,P.withTranslation)()((0,R.connect)(Ne,qe)(H)),Ge=(0,F.X1)(((e,t)=>({DashboardWidget:Me,selectWidgets:Je.xX.selectWidgets(e),widgets:Je.xX.selectCurrentWidgets(e)}))),Ye=(0,P.withTranslation)()((0,R.connect)(Ge,{})(w));var et=r(2891);const tt=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},rt=(0,F.X1)(((e,{widgetId:t})=>{const r=et.b2.selectWidget(e,t),s=et.b2.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:tt,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:x.ZV.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:x.ZV.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})})),st={fetchReports:et.K5.a4,updateTab:et.K5.as},at=(0,P.withTranslation)()((0,R.connect)(rt,st)(H)),it=(0,F.X1)(((e,t)=>({DashboardWidget:at,selectWidgets:et.b2.selectWidgets(e),widgets:et.b2.selectCurrentWidgets(e)}))),ct=(0,P.withTranslation)()((0,R.connect)(it,{})(w));var ot=r(94329),nt=r(45235),pt=r(1723),lt=r(45785),ut=r(17918),ht=r(98499);const dt={infoIcon:{fontSize:ut.ZP.value},infoTitle:{fontWeight:"bold"},perspective:{marginTop:ht.ZP.value},tabs:{marginTop:ht.ZP.value}},gt=e=>{switch(e){case"infrastructure":return"infrastructure";case"ocp":return"ocp"}},mt=[{label:"overview.perspective.all",value:"all"},{label:"overview.perspective.supplementary",value:"supplementary"}],vt=[{label:"overview.perspective.aws",value:"aws"}],bt=[{label:"overview.perspective.aws_cloud",value:"aws_cloud"}],yt=[{label:"overview.perspective.azure",value:"azure"}],Tt=[{label:"overview.perspective.azure_cloud",value:"azure_cloud"}],ft=[{label:"overview.perspective.gcp",value:"gcp"}],wt=[{label:"overview.perspective.ibm",value:"ibm"}],Pt=[{label:"overview.perspective.ocp_usage",value:"ocp_usage"}];class Rt extends f().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>{const e=[];return this.isOcpAvailable()&&e.push({contentRef:f().createRef(),tab:"ocp"}),(this.isAwsAvailable()||this.isAzureAvailable()||this.isGcpAvailable()||this.isIbmAvailable()||this.isOcpCloudAvailable())&&e.push({contentRef:f().createRef(),tab:"infrastructure"}),e},this.getCurrentTab=()=>{const{activeTabKey:e}=this.state,t=this.isAwsAvailable(),r=this.isAzureAvailable(),s=this.isGcpAvailable(),a=this.isIbmAvailable(),i=this.isOcpAvailable(),c=this.isOcpCloudAvailable();return i&&!(t||r||s||a||c)?"ocp":!i&&(t||r||s||a||c)?"infrastructure":0===e?"ocp":"infrastructure"},this.getDefaultInfrastructurePerspective=()=>this.isAwsAvailable()?"aws":this.isAzureAvailable()?"azure":this.isGcpAvailable()?"gcp":this.isIbmAvailable()?"ibm":void 0,this.getDefaultOcpPerspective=()=>{const{ocpProviders:e,ocpProvidersFetchStatus:t,userAccess:r}=this.props;if((0,lt.mn)(r,e,t))return"all"},this.getPerspective=()=>{const{currentInfrastructurePerspective:e,currentOcpPerspective:t}=this.state,r=this.isAwsAvailable(),s=this.isAzureAvailable(),a=this.isGcpAvailable(),i=this.isIbmAvailable(),c=this.isOcpAvailable();if(!(r||s||a||i||c))return null;const o=[];"infrastructure"===this.getCurrentTab()?(r&&o.push(...vt),c&&r&&o.push(...bt),a&&o.push(...ft),i&&o.push(...wt),s&&o.push(...yt),c&&s&&o.push(...Tt),c&&o.push(...Pt)):o.push(...mt);const n="infrastructure"===this.getCurrentTab()?e:t;return f().createElement(v.X,{currentItem:n||o[0].value,onItemClicked:this.handlePerspectiveClick,options:o})},this.getTab=(e,t,r)=>f().createElement(s.O,{eventKey:r,key:`${gt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:f().createElement(a.T,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>f().createElement(i.I,{eventKey:t,key:`${gt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{awsProviders:r,azureProviders:s,gcpProviders:a,ibmProviders:i,ocpProviders:c}=this.props,{activeTabKey:o,currentInfrastructurePerspective:n,currentOcpPerspective:p}=this.state,l=f().createElement(f().Fragment,null),u=f().createElement(g.Z,{showReload:!1});if(o!==t)return l;const h=gt(e);if("infrastructure"===h)return"ocp_cloud"===n?(0,ot.g8)(c)||(0,ot.rL)(c)?f().createElement(ke,null):u:"aws"===n?(0,ot.g8)(r)||(0,ot.rL)(r)?f().createElement(ae,null):u:"aws_cloud"===n?(0,ot.g8)(r)||(0,ot.rL)(r)?f().createElement(M,null):u:"gcp"===n?(0,ot.g8)(a)||(0,ot.rL)(a)?f().createElement(De,null):u:"ibm"===n?(0,ot.g8)(i)||(0,ot.rL)(i)?f().createElement(Oe,null):u:"azure"===n?(0,ot.g8)(s)||(0,ot.rL)(s)?f().createElement(ye,null):u:"azure_cloud"===n?(0,ot.g8)(s)||(0,ot.rL)(s)?f().createElement(ue,null):u:"ocp_usage"===n?(0,ot.g8)(c)||(0,ot.rL)(c)?f().createElement(ct,null):u:(0,ot.g8)(c)||(0,ot.rL)(c)?f().createElement(ke,null):u;if("ocp"===h){const e=(0,ot.g8)(c)||(0,ot.rL)(c);return"all"===p?e?f().createElement($e,null):u:"supplementary"===p?e?f().createElement(Ye,null):u:e?f().createElement($e,null):u}return l},this.getTabs=e=>{const{activeTabKey:t}=this.state;return f().createElement(c.m,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{t}=this.props;return"infrastructure"===e?t("overview.infrastructure"):"ocp"===e?t("overview.ocp"):void 0},this.handlePerspectiveClick=e=>{const t=this.getCurrentTab();this.setState(Object.assign(Object.assign({},"infrastructure"===t&&{currentInfrastructurePerspective:e}),"ocp"===t&&{currentOcpPerspective:e}))},this.handleTabClick=(e,t)=>{const{activeTabKey:r}=this.state;r!==t&&this.setState({activeTabKey:t})},this.isAwsAvailable=()=>{const{awsProviders:e,awsProvidersFetchStatus:t,userAccess:r}=this.props;return(0,lt.n9)(r,e,t)},this.isAzureAvailable=()=>{const{azureProviders:e,azureProvidersFetchStatus:t,userAccess:r}=this.props;return(0,lt.hn)(r,e,t)},this.isGcpAvailable=()=>{const{gcpProviders:e,gcpProvidersFetchStatus:t,userAccess:r}=this.props;return(0,lt.FE)(r,e,t)},this.isIbmAvailable=()=>{const{ibmProviders:e,ibmProvidersFetchStatus:t,ibmUserAccess:r}=this.props;return(0,lt.Es)(r,e,t)},this.isOcpAvailable=()=>{const{ocpProviders:e,ocpProvidersFetchStatus:t,userAccess:r}=this.props;return(0,lt.mn)(r,e,t)},this.isOcpCloudAvailable=()=>this.isAwsAvailable()&&this.isOcpAvailable()}componentDidMount(){this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}componentDidUpdate(e){const{awsProviders:t,azureProviders:r,gcpProviders:s,ibmProviders:a,ocpProviders:i,userAccess:c}=this.props;e.userAccess===c&&e.awsProviders===t&&e.azureProviders===r&&e.gcpProviders===s&&e.ibmProviders===a&&e.ocpProviders===i||this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}render(){const{awsProvidersFetchStatus:e,azureProvidersFetchStatus:t,gcpProvidersFetchStatus:r,ibmProvidersFetchStatus:s,ocpProvidersFetchStatus:a,userAccessFetchStatus:i,t:c}=this.props,u=this.getAvailableTabs(),h=1===e||1===t||1===r||1===s||1===a||1===i,g=!this.isAwsAvailable()&&2===e,v=!this.isAzureAvailable()&&2===t,b=!this.isGcpAvailable()&&2===r,y=!this.isIbmAvailable()&&2===s,T=!this.isOcpAvailable()&&2===a,w=g&&v&&b&&y&&T,P=c("cost_management_overview");return w?f().createElement(m.Z,{title:P}):h?f().createElement(d.Z,{title:P}):f().createElement(f().Fragment,null,f().createElement("section",{className:"pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light headerOverride}"},f().createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},f().createElement(o.D,{headingLevel:"h2",size:"2xl"},c("cost_management_overview"),f().createElement("span",{style:dt.infoIcon},f().createElement(n.J,{"aria-label":c("ocp_details.supplementary_aria_label"),enableFlip:!0,bodyContent:f().createElement(f().Fragment,null,f().createElement("p",{style:dt.infoTitle},c("overview.ocp_cloud")),f().createElement("p",null,c("overview.ocp_cloud_desc")),f().createElement("br",null),f().createElement("p",{style:dt.infoTitle},c("overview.ocp")),f().createElement("p",null,c("overview.ocp_desc")),f().createElement("br",null),f().createElement("p",{style:dt.infoTitle},c("overview.gcp")),f().createElement("p",null,c("overview.gcp_desc")),f().createElement("br",null),f().createElement("p",{style:dt.infoTitle},c("overview.ibm")),f().createElement("p",null,c("overview.ibm_desc")),f().createElement("br",null),f().createElement("p",{style:dt.infoTitle},c("overview.aws")),f().createElement("p",null,c("overview.aws_desc")),f().createElement("br",null),f().createElement("p",{style:dt.infoTitle},c("overview.azure")),f().createElement("p",null,c("overview.azure_desc")))},f().createElement(p.zx,{variant:p.Wu.plain},f().createElement(l.iC,null)))))),f().createElement("div",{style:dt.tabs},this.getTabs(u)),f().createElement("div",{style:dt.perspective},this.getPerspective())),f().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},this.getTabContent(u)))}}const Ft=(0,F.X1)(((e,t)=>{const r=(0,u.H)(nt.JL),s=nt.aX.selectProviders(e,"aws",r),a=nt.aX.selectProvidersFetchStatus(e,"aws",r),i=(0,u.H)(nt.u5),c=nt.aX.selectProviders(e,"azure",i),o=nt.aX.selectProvidersFetchStatus(e,"azure",i),n=(0,u.H)(nt.U6),p=nt.aX.selectProviders(e,"gcp",n),l=nt.aX.selectProvidersFetchStatus(e,"gcp",n),d=(0,u.H)(nt.t8),g=nt.aX.selectProviders(e,"ibm",d),m=nt.aX.selectProvidersFetchStatus(e,"ibm",d),v=(0,u.H)(nt.Vp),b=nt.aX.selectProviders(e,"ocp",v),y=nt.aX.selectProvidersFetchStatus(e,"ocp",v),T=(0,h.T)(pt.BD),f=pt.JO.selectUserAccess(e,"",T),w=pt.JO.selectUserAccessError(e,"",T),P=pt.JO.selectUserAccessFetchStatus(e,"",T),R=(0,h.T)(pt.HC);return{awsProviders:s,awsProvidersFetchStatus:a,awsProvidersQueryString:r,azureProviders:c,azureProvidersFetchStatus:o,azureProvidersQueryString:i,gcpProviders:p,gcpProvidersFetchStatus:l,gcpProvidersQueryString:n,ibmProviders:g,ibmProvidersFetchStatus:m,ibmProvidersQueryString:d,ibmUserAccess:pt.JO.selectUserAccess(e,"ibm",R),ibmUserAccessError:pt.JO.selectUserAccessError(e,"ibm",R),ibmUserAccessFetchStatus:pt.JO.selectUserAccessFetchStatus(e,"ibm",R),ibmUserAccessQueryString:R,ocpProviders:b,ocpProvidersFetchStatus:y,ocpProvidersQueryString:v,userAccess:f,userAccessError:w,userAccessFetchStatus:P,userAccessQueryString:T}})),Dt=(0,P.withTranslation)()((0,R.connect)(Ft)(Rt))},901:(e,t,r)=>{"use strict";r.d(t,{dM:()=>i,Bw:()=>c,xG:()=>n,$l:()=>p});var s=r(30136),a=r.n(s);const i=e=>{const t=e?e.toLowerCase():"";switch(t){case"usd":case"gb":case"gb-hours":case"gb-mo":case"gibibyte month":case"core-hours":case"hour":case"hrs":case"tag-mo":case"vm-hours":return t;default:return""}},c=(e,t,r={})=>{const s=i(t),a=e||0;switch(s){case"usd":return n(a,s,r);case"gb":case"gb-hours":case"gb-mo":case"gibibyte month":case"tag-mo":case"vm-hours":return l(a,s,r);case"core-hours":case"hour":case"hrs":return u(a,s,r);default:return o(a,s,r)}},o=(e,t,{fractionDigits:r=0}={})=>e.toLocaleString("en",{minimumFractionDigits:r,maximumFractionDigits:r}),n=(e,t,{fractionDigits:r=2}={})=>{let s=e;return e||(s=0),s.toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:r,maximumFractionDigits:r})},p=(e,t,{fractionDigits:r=2}={})=>{let s=e;e||(s=0);const i=[{val:1e15,symbol:"currency_abbreviations.quadrillion"},{val:1e12,symbol:"currency_abbreviations.trillion"},{val:1e9,symbol:"currency_abbreviations.billion"},{val:1e6,symbol:"currency_abbreviations.million"},{val:1e3,symbol:"currency_abbreviations.thousand"}];let c;if(null!=i&&(c=i.find((e=>s>=e.val))),null!=c){const{val:e,symbol:i}=c,o=(s/e).toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:0,maximumFractionDigits:r}).match(/([\D]*)([\d.,]+)([\D]*)/);return`${o[1]}${o[2]}${a().t(i)}${o[3]}`}return s.toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:0,maximumFractionDigits:r})},l=(e,t,{fractionDigits:r=0}={})=>e.toLocaleString("en",{minimumFractionDigits:r,maximumFractionDigits:r}),u=(e,t,{fractionDigits:r=0}={})=>e.toLocaleString("en",{minimumFractionDigits:r,maximumFractionDigits:r})},45785:(e,t,r)=>{"use strict";r.d(t,{KT:()=>i,n9:()=>c,FW:()=>o,hn:()=>n,ot:()=>p,Sv:()=>l,FE:()=>u,tt:()=>h,Es:()=>d,Rt:()=>g,mn:()=>m});const s=(e,t)=>{let r=!1;if(e&&Array.isArray(e.data)){const s=e.data.find((e=>e.type===t));r=s&&s.access}else r=e&&!0===e.data;return r},a=(e,t)=>{let r=!1;return 2===t&&(r=void 0!==e&&void 0!==e.meta&&e.meta.count>0),r},i=e=>s(e,"aws"),c=(e,t,r)=>i(e)&&a(t,r),o=e=>s(e,"azure"),n=(e,t,r)=>o(e)&&a(t,r),p=e=>s(e,"cost_model"),l=e=>s(e,"gcp"),u=(e,t,r)=>s(e,"gcp")&&a(t,r),h=e=>l(e),d=(e,t,r)=>h(e)&&a(t,r),g=e=>s(e,"ocp"),m=(e,t,r)=>g(e)&&a(t,r)}}]);
//# sourceMappingURL=5dd445d0451fba5dbbb1.bundle.js.map