(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{664:function(e,a,t){"use strict";t.r(a),function(e){var n=t(301),r=t(855);a.default=Object(n.hot)(e)(r.a)}.call(this,t(300)(e))},675:function(e,a,t){"use strict";t.d(a,"a",function(){return n}),t.d(a,"b",function(){return r});const n=e=>({"data-testid":e}),r={details:{historical_data_btn:"historical-data-btn",tag_lnk:"tag-lnk",show_more_btn:"show-more-btn",view_all_btn:"view-all-btn"},export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},onboarding:{btn_cancel:"btn-cancel",btn_back:"btn-back",btn_continue:"btn-continue",btn_close:"btn-close",type_selector:"type-selector",type_opt_aws:"type-option-aws",type_opt_ocp:"type-option-ocp",type_opt_non:"type-option-non",name_input:"name-input",check_box_1:"check-box-1",check_box_2:"check-box-2",s3_input:"s3-input",clusterid_input:"clusterid-input",arn_input:"arn-input"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input",view_all_link:"view-all-lnk"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},855:function(e,a,t){"use strict";var n=t(254),r=t(129),l=t(111),i=t(255),c=t(131),o=t(365),s=t(404),u=t(227),d=t(405),b=t(66),m=t(2),_=t.n(m);var g=({title:e,value:a})=>_.a.createElement("div",{style:{paddingBottom:"12px"}},_.a.createElement(d.a,{size:b.a.md},e),_.a.createElement(d.a,{size:b.a.lg},a));var p=class extends _.a.Component{constructor(e){super(e)}parseError(){const{t:e,apiStatus:a,apiErrors:t}=this.props;if(1===a)return null;if(null===t)return null;let n=e("onboarding.final.default_error");return t.response&&t.response.data?(n=t.response.data.Error)||void 0===t.response.data.errors||(n=t.response.data.errors.map(e=>e.detail).join(", ")):t.message&&(n=t.message),n}render(){const{t:e,name:a,type:t,clusterId:n,arn:r,azureAuth:l,azureCreds:i}=this.props,c=this.parseError();return _.a.createElement(_.a.Fragment,null,null!==c&&_.a.createElement("div",{style:{paddingBottom:"30px"}},_.a.createElement(u.a,{variant:"danger",title:`${c}. ${e("onboarding.final.please_revise")}`})),_.a.createElement(d.a,{size:b.a.xl},e("onboarding.final.title")),_.a.createElement("p",null,e("onboarding.final.desc")),_.a.createElement("br",null),_.a.createElement(g,{value:a,title:e("onboarding.final.name")}),_.a.createElement(g,{value:e(`onboarding.final.type.${t}`),title:e("onboarding.final.type.title")}),"AWS"===t&&_.a.createElement(g,{value:r,title:e("onboarding.final.arn")}),"OCP"===t&&_.a.createElement(g,{value:n,title:e("onboarding.final.cluster")}),"AZURE"===t&&Object.keys(i).map(a=>_.a.createElement(g,{value:i[a].value,title:e(`onboarding.final.${a}`)})),"AZURE"===t&&Object.keys(l).map(a=>_.a.createElement(g,{value:l[a].value,title:e(`onboarding.final.${a}`)})))}},E=(t(857),Object(r.connect)(Object(l.a)(e=>({name:i.c.selectOnboardingName(e),type:i.c.selectOnboardingType(e),clusterId:i.c.selectOnboardingClusterID(e),arn:i.c.selectOnboardingArn(e),s3BucketName:i.c.selectOnboardingS3BucketName(e),azureCreds:i.c.selectAzureCreds(e),azureAuth:i.c.selectAzureAuth(e),apiErrors:i.c.selectApiErrors(e),apiStatus:i.c.selectApiStatus(e)})),{})(Object(n.d)()(p)));const h=e=>""!==e,v=e=>new RegExp("^.").test(e),k=e=>new RegExp("^.").test(e),f=e=>new RegExp("^[A-Za-z0-9]+[A-Za-z0-9_-]*$").test(e),y=e=>{return!(e.length<"arn:aws:".length)&&(e.length==="arn:aws:".length?"arn:aws:"===e:0===e.indexOf("arn:aws:"))};var O=t(385),x=t(369),C=t(368),j=t(675);var w=({t:e,isValid:a,value:t,onChange:n})=>_.a.createElement(x.a,{onSubmit:e=>(e.preventDefault(),!1)},_.a.createElement(C.a,{isValid:a,fieldId:"s3_bucket_name",label:e("onboarding.aws_configure.s3_bucket_name_label"),helperText:e("onboarding.aws_configure.s3_bucket_name_helper_text"),helperTextInvalid:e("onboarding.aws_configure.s3_bucket_name_helper_text_invalid")},_.a.createElement(O.a,Object.assign({},Object(j.a)(j.b.onboarding.s3_input),{isValid:a,id:"s3_bucket_name",value:t,onChange:n})))),I=t(366),z=t(367);var A=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.aws_configure.instructions_title")),_.a.createElement("div",null,e("onboarding.aws_configure.intro")),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,e("onboarding.aws_configure.s3_bucket_account")),_.a.createElement(I.a,null,e("onboarding.aws_configure.cost_report"),_.a.createElement(z.a,null,_.a.createElement(I.a,null,e("onboarding.aws_configure.report_name")),_.a.createElement(I.a,null,e("onboarding.aws_configure.time_unit")),_.a.createElement(I.a,null,e("onboarding.aws_configure.include")),_.a.createElement(I.a,null,e("onboarding.aws_configure.support")),_.a.createElement(I.a,null,e("onboarding.aws_configure.prefix")))),_.a.createElement(I.a,null,e("onboarding.aws_configure.enter_s3_bucket"))));var S=({t:e,s3BucketName:a,updateS3BucketName:t,s3BucketNameValid:n})=>{return _.a.createElement(_.a.Fragment,null,_.a.createElement(A,{t:e}),_.a.createElement("br",null),_.a.createElement("br",null),_.a.createElement(w,{t:e,onChange:(e,a)=>{t(a.currentTarget.value,f)},isValid:n,value:a}))},V=Object(r.connect)(Object(l.a)(e=>({s3BucketName:i.c.selectOnboardingS3BucketName(e),s3BucketNameValid:i.c.selectOnboardingValidation(e).s3BucketNameValid})),{updateS3BucketName:i.a.updateS3BucketName})(Object(n.d)()(S));var T=Object(r.connect)(Object(l.a)(e=>{const a=i.c.selectAzureCreds(e);return{clientId:a.clientId,tenantId:a.tenantId,clientSecret:a.clientSecret,subscriptionId:a.subscriptionId}}),{updateCreds:i.a.updateCreds})(Object(n.d)()(({t:e,updateCreds:a,tenantId:t,clientId:n,clientSecret:r,subscriptionId:l})=>_.a.createElement(x.a,{onSubmit:e=>(e.preventDefault(),!1)},_.a.createElement(C.a,{isValid:n.valid,fieldId:"client-id",label:e("onboarding.azure_creds.client_id"),helperText:e("onboarding.azure_creds.client_id_helper_text"),helperTextInvalid:e("onboarding.azure_creds.client_id_helper_text_invalid")},_.a.createElement(O.a,{isValid:n.valid,id:"client-id",value:n.value,onChange:e=>a({name:"clientId",value:e},e=>e.trim().length>0)})),_.a.createElement(C.a,{isValid:r.valid,fieldId:"client-secret",label:e("onboarding.azure_creds.client_secret"),helperText:e("onboarding.azure_creds.client_secret_helper_text"),helperTextInvalid:e("onboarding.azure_creds.client_secret_helper_text_invalid")},_.a.createElement(O.a,{isValid:r.valid,id:"client-secret",value:r.value,onChange:e=>a({name:"clientSecret",value:e},e=>e.trim().length>0)})),_.a.createElement(C.a,{isValid:t.valid,fieldId:"tenant-id",label:e("onboarding.azure_creds.tenant_id"),helperText:e("onboarding.azure_creds.tenant_id_helper_text"),helperTextInvalid:e("onboarding.azure_creds.tenant_id_helper_text_invalid")},_.a.createElement(O.a,{isValid:t.valid,id:"tenant-id",value:t.value,onChange:e=>a({name:"tenantId",value:e},e=>e.trim().length>0)})),_.a.createElement(C.a,{isValid:l.valid,fieldId:"subscription-id",label:e("onboarding.azure_creds.subscription_id"),helperText:e("onboarding.azure_creds.subscription_id_helper_text"),helperTextInvalid:e("onboarding.azure_creds.subscription_id_helper_text_invalid")},_.a.createElement(O.a,{isValid:l.valid,id:"subscription-id",value:l.value,onChange:e=>a({name:"subscriptionId",value:e},e=>e.trim().length>0)})))));var N=Object(r.connect)(Object(l.a)(e=>{const a=i.c.selectAzureAuth(e);return{resourceGroup:a.resourceGroup,storageAccount:a.storageAccount}}),{updateDataSource:i.a.updateDataSource})(Object(n.d)()(({t:e,updateDataSource:a,resourceGroup:t,storageAccount:n})=>_.a.createElement(x.a,{onSubmit:e=>(e.preventDefault(),!1)},_.a.createElement(C.a,{isValid:t.valid,fieldId:"resource-group",label:e("onboarding.azure_auth.resource_group"),helperText:e("onboarding.azure_auth.resource_group_helper_text"),helperTextInvalid:e("onboarding.azure_auth.resource_group_helper_text_invalid")},_.a.createElement(O.a,{isValid:t.valid,id:"resource-group",value:t.value,onChange:e=>a({name:"resourceGroup",value:e},e=>e.trim().length>0)})),_.a.createElement(C.a,{isValid:n.valid,fieldId:"storage-account",label:e("onboarding.azure_auth.storage_account"),helperText:e("onboarding.azure_auth.storage_account_helper_text"),helperTextInvalid:e("onboarding.azure_auth.storage_account_helper_text_invalid")},_.a.createElement(O.a,{isValid:n.valid,id:"storage-account",value:n.value,onChange:e=>a({name:"storageAccount",value:e},e=>e.trim().length>0)}))))),D=t(233),B=t(170),L=(t(12),t(196));var R=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.configure.instructions_title")),_.a.createElement("div",null,e("onboarding.configure.instructions_text")),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,e("onboarding.configure.edit_crontab"),_.a.createElement(B.a,{position:"right","aria-label":e("onboarding.configure.explain_more_about_cron"),bodyContent:_.a.createElement("div",null,e("onboarding.configure.cron_user_reqs"),_.a.createElement(z.a,null,_.a.createElement(I.a,null,_.a.createElement(n.b,{i18nKey:"onboarding.configure.cron_user_req_1",metering_operator:_.a.createElement("i",null,"metering-operator")})),_.a.createElement(I.a,null,e("onboarding.configure.cron_user_req_2"))),_.a.createElement(n.b,{i18nKey:"onboarding.configure.cron_user_more",sub_text:_.a.createElement("i",null,"ocpcollector"),path:_.a.createElement("b",null,"/etc/sudoers")}),_.a.createElement("br",null),_.a.createElement("b",null,"ocpcollector ALL=(ALL) NOPASSWD: ALL"))},_.a.createElement(s.a,{variant:"plain"},_.a.createElement(L.b,null))),_.a.createElement(D.a,{textAriaLabel:e("onboarding.configure.crontab_command")},"crontab -u <username> -e")),_.a.createElement(I.a,null,e("onboarding.configure.create_entry"),_.a.createElement(D.a,{textAriaLabel:e("onboarding.configure.entry_description")},"*/45 * * * * /path/to/ocp_usage.sh --collect --e OCP_CLUSTER_ID=<YOUR_OCP_IDENTIFIER>")),_.a.createElement(I.a,null," ",e("onboarding.configure.click_next")," "))),K=Object(n.d)()(R);var P=Object(r.connect)(Object(l.a)(e=>({isOpen:i.c.selectOnboardingConfirm(e)})),{onCancel:i.a.hideConfirm,onConfirm:i.a.cancelOnboarding})(Object(n.d)()(({isOpen:e,onCancel:a,onConfirm:t,t:n})=>_.a.createElement(o.a,{isSmall:!0,title:n("onboarding.confirm.title"),onClose:a,isOpen:e,actions:[_.a.createElement(s.a,{key:"cancel",variant:"secondary",onClick:a},n("onboarding.confirm.cancel")),_.a.createElement(s.a,{key:"confirm",variant:"danger",onClick:t},n("onboarding.confirm.close"))]},n("onboarding.confirm.message"))));var F=({t:e,isValid:a,value:t,onChange:n})=>_.a.createElement(x.a,{onSubmit:e=>(e.preventDefault(),!1)},_.a.createElement(C.a,{isValid:a,fieldId:"arn",label:e("onboarding.enable_account_access.arn_label"),helperText:e("onboarding.enable_account_access.arn_helper_text"),helperTextInvalid:e("onboarding.enable_account_access.arn_helper_text_invalid")},_.a.createElement(O.a,Object.assign({},Object(j.a)(j.b.onboarding.arn_input),{isValid:a,id:"arn",value:t,onChange:n}))));var G=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.enable_account_access.instructions_title")),_.a.createElement("div",null,e("onboarding.enable_account_access.intro")),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,e("onboarding.enable_account_access.select_role")),_.a.createElement(I.a,null,e("onboarding.enable_account_access.copy_arn"))));var M=({t:e,arn:a,updateArn:t,arnValid:n})=>{return _.a.createElement(_.a.Fragment,null,_.a.createElement(G,{t:e}),_.a.createElement("br",null),_.a.createElement("br",null),_.a.createElement(F,{t:e,onChange:(e,a)=>{t(a.currentTarget.value,y)},isValid:n,value:a}))},U=Object(r.connect)(Object(l.a)(e=>({arn:i.c.selectOnboardingArn(e),arnValid:i.c.selectOnboardingValidation(e).arnValid})),{updateArn:i.a.updateArn})(Object(n.d)()(M));var W=({t:e,s3BucketName:a})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.iam_policy.instructions_title")),_.a.createElement("div",null,e("onboarding.iam_policy.intro")),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,_.a.createElement(n.b,{iampolicy:_.a.createElement("a",{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/console.html",target:"_blank"},e("onboarding.iam_policy.link_text")),i18nKey:"onboarding.iam_policy.sign_in"})),_.a.createElement(I.a,null,e("onboarding.iam_policy.new_policy"),_.a.createElement("br",null),_.a.createElement(D.a,{textAriaLabel:e("onboarding.iam_policy.json_content"),variant:D.b.expansion},`{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Sid": "VisualEditor0",\n            "Effect": "Allow",\n            "Action": [\n                "s3:Get*",\n                "s3:List*"\n            ],\n            "Resource": [\n              "arn:aws:s3:::${a}",\n              "arn:aws:s3:::${a}/*"\n            ]\n        },\n        {\n            "Sid": "VisualEditor1",\n            "Effect": "Allow",\n            "Action": [\n                "s3:ListAllMyBuckets",\n                "iam:ListAccountAliases",\n                "s3:HeadBucket",\n                "cur:DescribeReportDefinitions",\n                "organizations:List*",\n                "organizations:Describe*"\n            ],\n            "Resource": "*"\n        }\n    ]\n}`)),_.a.createElement(I.a,null,e("onboarding.iam_policy.complete_process"))),_.a.createElement("br",null),_.a.createElement("br",null),_.a.createElement("div",null,_.a.createElement("b",null,e("onboarding.iam_policy.donot_close_browser")),e("onboarding.iam_policy.note"))),Z=Object(r.connect)(Object(l.a)(e=>({s3BucketName:i.c.selectOnboardingS3BucketName(e)})),{})(Object(n.d)()(W));var $=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.iam_role.instructions_title")),_.a.createElement("div",null,e("onboarding.iam_role.intro")),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,e("onboarding.iam_role.create_new_role")),_.a.createElement(I.a,null,e("onboarding.iam_role.paste_account_id"),_.a.createElement("br",null),_.a.createElement(D.a,{textAriaLabel:e("onboarding.iam_role.paste_account_id_aria")},"589173575009")),_.a.createElement(I.a,null,e("onboarding.iam_role.attach_permissions")),_.a.createElement(I.a,null,e("onboarding.iam_role.complete_process")))),q=Object(n.d)()($);var H=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.obtain_login.instructions_title")),_.a.createElement("div",null,e("onboarding.obtain_login.intro"),_.a.createElement(B.a,{"aria-label":e("onboarding.obtain_login.popover_aria_label"),position:"top",bodyContent:_.a.createElement(n.b,{i18nKey:"onboarding.obtain_login.popover_content",metering_operator:_.a.createElement("i",null,"reporting-operator"),learn_more:_.a.createElement("a",{href:""},e("onboarding.obtain_login.learn_more"))})},_.a.createElement(s.a,{variant:"plain"},_.a.createElement(L.b,null)))),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,e("onboarding.obtain_login.obtain_token")),_.a.createElement(I.a,null,e("onboarding.obtain_login.run_command"),_.a.createElement("br",null),_.a.createElement(D.a,{textAriaLabel:e("onboarding.obtain_login.run_command_aria_label")},"oc serviceaccounts get-token reporting-operator > ocp_usage_token")),_.a.createElement(I.a,null,e("onboarding.obtain_login.security")))),J=Object(n.d)()(H),Y=t(1132),Q=t(395);var X=({children:e,onChange:a,title:t,isChecked:n=!1,ariaLabel:r=null,id:l=null})=>_.a.createElement("div",null,_.a.createElement(Q.a,{isChecked:n,onChange:a,label:t,id:l,"aria-label":r}),_.a.createElement("span",{style:{margin:"10px 0 10px 20px"}},e)),ee=t(3);const ae=Y.a.create({listWrapper:{paddingLeft:ee.fe.value,marginBottom:ee.fe.value,marginTop:`-${ee.fe.value}`},listTitle:{marginBottom:ee.fe.value}});var te=Object(n.d)()(({t:e,checkedItems:a,updateCheckItem:t})=>_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:Object(Y.b)(ae.listTitle)},e("onboarding.source_kind.checklist_title")),_.a.createElement(X,Object.assign({},Object(j.a)(j.b.onboarding.check_box_1),{isChecked:a.install_openshift,title:e("onboarding.source_kind.checkbox_1"),onChange:t,id:"install_openshift",ariaLabel:e("onboarding.source_kind.checkbox_1_aria_label")}),_.a.createElement("div",{className:Object(Y.b)(ae.listWrapper)},_.a.createElement(z.a,null,_.a.createElement(I.a,null,_.a.createElement("a",{target:"_blank",href:"https://docs.openshift.com/container-platform/3.11/getting_started/install_openshift.html"},e("onboarding.source_kind.checkbox_1_1"))),_.a.createElement(I.a,null,_.a.createElement("a",{target:"_blank",href:"https://access.redhat.com/documentation/en-us/openshift_container_platform/3.11/html/configuring_clusters/installing-operator-framework"},e("onboarding.source_kind.checkbox_1_2")))))),_.a.createElement(X,Object.assign({},Object(j.a)(j.b.onboarding.check_box_2),{isChecked:a.install_others,title:e("onboarding.source_kind.checkbox_2"),onChange:t,id:"install_others",ariaLabel:e("onboarding.source_kind.checkbox_2_aria_label")}),_.a.createElement("div",{className:Object(Y.b)(ae.listWrapper)},_.a.createElement(z.a,null,_.a.createElement(I.a,null,_.a.createElement("a",{target:"_blank",href:"https://access.redhat.com/products/red-hat-insights#getstarted"},e("onboarding.source_kind.checkbox_2_1"))),_.a.createElement(I.a,null,_.a.createElement(n.b,{i18nKey:"onboarding.source_kind.checkbox_2_2",ansible:_.a.createElement("a",{target:"_blank",href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html#basics-what-will-be-installed"},e("onboarding.source_kind.ansible")),epel:_.a.createElement("a",{target:"_blank",href:"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html#basics-what-will-be-installed"},e("onboarding.source_kind.epel"))})),_.a.createElement(I.a,null,_.a.createElement("a",{target:"_blank",href:"https://docs.openshift.com/container-platform/3.11/cli_reference/get_started_cli.html"},e("onboarding.source_kind.checkbox_2_3")))))))),ne=t(383),re=t(382);var le=({t:e,name:a,updateName:t,nameValid:n,type:r,updateType:l,typeValid:i})=>_.a.createElement(x.a,{onSubmit:e=>(e.preventDefault(),!1)},_.a.createElement(C.a,{isValid:n,helperTextInvalid:e("onboarding.name_helper_invalid_text"),helperText:e("onboarding.name_helper_text"),fieldId:"source_name",label:e("onboarding.name_label")},_.a.createElement(O.a,Object.assign({},Object(j.a)(j.b.onboarding.name_input),{isValid:n,id:"source_name",value:a,onChange:t}))),_.a.createElement(C.a,{isValid:i,fieldId:"source_type",label:e("onboarding.type_label")},_.a.createElement(ne.a,Object.assign({},Object(j.a)(j.b.onboarding.type_selector),{isValid:i,value:r,id:"source_type",onChange:l}),_.a.createElement(re.a,Object.assign({},Object(j.a)(j.b.onboarding.type_opt_non),{label:e("onboarding.select_type_label"),value:""})),_.a.createElement(re.a,Object.assign({},Object(j.a)(j.b.onboarding.type_opt_aws),{label:e("onboarding.type_options.aws"),value:"AWS"})),_.a.createElement(re.a,Object.assign({},Object(j.a)(j.b.onboarding.type_opt_aws),{label:e("onboarding.type_options.azure"),value:"AZURE"})),_.a.createElement(re.a,Object.assign({},Object(j.a)(j.b.onboarding.type_opt_ocp),{label:e("onboarding.type_options.ocp"),value:"OCP"})))));var ie=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:"xl"},e("onboarding.source_kind.instructions_title")),_.a.createElement("div",null,e("onboarding.source_kind.instructions_text")),_.a.createElement("br",null));var ce=({t:e,name:a,updateName:t,nameValid:n,type:r,updateType:l,typeValid:i,checked:c,updateCheck:o})=>{return _.a.createElement(_.a.Fragment,null,_.a.createElement(ie,{t:e}),_.a.createElement(le,{updateName:(e,a)=>{t(a.currentTarget.value,v)},updateType:(e,a)=>{l(e,h)},name:a,nameValid:n,type:r,typeValid:i,t:e}),_.a.createElement("br",null),Boolean("OCP"===r)&&_.a.createElement(te,{checkedItems:c,updateCheckItem:(e,a)=>{o({item:a.currentTarget.id,value:e})}}))},oe=Object(r.connect)(Object(l.a)(e=>Object.assign({name:i.c.selectOnboardingName(e),type:i.c.selectOnboardingType(e),checked:i.c.selectOnboardingSourceKindChecked(e)},i.c.selectOnboardingValidation(e))),{updateName:i.a.updateName,updateType:i.a.updateType,updateCheck:i.a.updateSourceKindCheckList,checkAll:i.a.checkSourceKindCheckList})(Object(n.d)()(ce));var se=({t:e,isValid:a,value:t,onChange:r})=>_.a.createElement(x.a,{onSubmit:e=>(e.preventDefault(),!1)},_.a.createElement(C.a,{isValid:a,fieldId:"cluster_id",label:e("onboarding.usage_collector.cluster_id_label")},_.a.createElement(B.a,{"aria-label":e("onboarding.usage_collector.popover_clusterid_aria_label"),position:"bottom",bodyContent:_.a.createElement(n.b,{i18nKey:"onboarding.usage_collector.popover_clusterid_content",path:_.a.createElement("b",null,"~/.config/ocp_usage/config.json")})},_.a.createElement(s.a,{variant:"plain"},_.a.createElement(L.b,null))),_.a.createElement(O.a,Object.assign({},Object(j.a)(j.b.onboarding.clusterid_input),{isValid:a,id:"cluster_id",value:t,onChange:r}))));var ue=({t:e})=>_.a.createElement(_.a.Fragment,null,_.a.createElement(d.a,{size:b.a.xl},e("onboarding.usage_collector.instructions_title")),_.a.createElement("div",null,e("onboarding.usage_collector.instructions_text")),_.a.createElement("br",null),_.a.createElement(z.a,null,_.a.createElement(I.a,null,_.a.createElement(n.b,{i18nKey:"onboarding.usage_collector.download_and_install",usage_collector:_.a.createElement("a",{href:"https://github.com/project-koku/korekuta/archive/master.zip",target:"_blank"},e("onboarding.usage_collector.ocp_usage_collector"))})),_.a.createElement(I.a,null,_.a.createElement(n.b,{i18nKey:"onboarding.usage_collector.navigate",korekuta_master:_.a.createElement("b",null,"korekuta-master"),ocp_usage_sh:_.a.createElement("i",null,"ocp_usage.sh")})),_.a.createElement(I.a,null,_.a.createElement(n.b,{i18nKey:"onboarding.usage_collector.run",ocp_usage_sh:_.a.createElement("i",null,"ocp_usage.sh")}),_.a.createElement("br",null),_.a.createElement(n.b,{i18nKey:"onboarding.usage_collector.example_text","reporting-operator":_.a.createElement("i",null,"reporting-operator")}),_.a.createElement("br",null),_.a.createElement("br",null),'# ./ocp_usage.sh --setup -e OCP_API="https://api.openshift-prod.mycompany.com" -e OCP_METERING_NAMESPACE="metering" -e OCP_TOKEN_PATH="/path/to/ocp_usage_token" -e METERING_API="https://metering.metering.api.ocp.comâ€',_.a.createElement(B.a,{"aria-label":e("onboarding.usage_collector.popover_cmd_aria_label"),position:"right",bodyContent:e("onboarding.usage_collector.popover_cmd_content")},_.a.createElement(s.a,{variant:"plain"},_.a.createElement(L.b,null)))),_.a.createElement(I.a,null,e("onboarding.usage_collector.configuration_complete"))));var de=({t:e,clusterId:a,updateClusterId:t,clusterIdValid:n})=>{return _.a.createElement(_.a.Fragment,null,_.a.createElement(ue,{t:e}),_.a.createElement("br",null),_.a.createElement("br",null),_.a.createElement(se,{t:e,onChange:(e,a)=>{t(a.currentTarget.value,k)},isValid:n,value:a}))},be=Object(r.connect)(Object(l.a)(e=>({clusterId:i.c.selectOnboardingClusterID(e),clusterIdValid:i.c.selectOnboardingValidation(e).clusterIdValid})),{updateClusterId:i.a.updateClusterID})(Object(n.d)()(de)),me=t(1),_e=t.n(me);class ge extends _.a.Component{constructor(e){super(e),this.state={current:this.props.initialStep}}render(){return this.props.children({index:this.state.current,setIndex:e=>{this.setState(()=>({current:e}))}})}}ge.propTypes={children:_e.a.func.isRequired,initialStep:_e.a.number},ge.defaultProps={initialStep:0};var pe=ge;a.a=Object(r.connect)(Object(l.a)(e=>({isModalOpen:i.c.selectOnboardingModal(e),isInvalid:i.c.selectOnboardingIsInvalid(e),dirtyMap:i.c.selectOnboardingDirty(e),sourceKindChecked:i.c.selectOnboardingSourceKindChecked(e),type:i.c.selectOnboardingType(e),name:i.c.selectOnboardingName(e),bucket:i.c.selectOnboardingS3BucketName(e),clusterId:i.c.selectOnboardingClusterID(e),arn:i.c.selectOnboardingArn(e),azureCreds:i.c.selectAzureCreds(e),azureAuth:i.c.selectAzureAuth(e),status:i.c.selectApiStatus(e),errors:i.c.selectApiErrors(e)})),{cancelOnboarding:i.a.displayConfirm,updateSources:c.a.fetchSources,addSource:i.a.addSource})(Object(n.d)()(({t:e,cancelOnboarding:a,updateSources:t,isModalOpen:n,isInvalid:r,dirtyMap:l,sourceKindChecked:i,status:c,type:u,bucket:d,name:b,arn:m,clusterId:g,addSource:p,azureCreds:h,azureAuth:v})=>{const k=(e=>{switch(e){case"AZURE":return[_.a.createElement(oe,{key:"source_kind"}),_.a.createElement(T,{key:"azure_creds"}),_.a.createElement(N,{key:"azure_auth"}),_.a.createElement(E,{key:"aws_final"})];case"AWS":return[_.a.createElement(oe,{key:"source_kind"}),_.a.createElement(V,{key:"aws_configure"}),_.a.createElement(Z,{key:"aws_iam_policy"}),_.a.createElement(q,{key:"aws_iam_role"}),_.a.createElement(U,{key:"enable_account_access"}),_.a.createElement(E,{key:"aws_final"})];case"OCP":return[_.a.createElement(oe,{key:"source_kind"}),_.a.createElement(J,{key:"obtain_login"}),_.a.createElement(be,{key:"usage_collector"}),_.a.createElement(K,{key:"configure"}),_.a.createElement(E,{key:"final"})];default:return[_.a.createElement(oe,{key:"source_kind"})]}})(u),f=((e,a)=>t=>{switch(t){case"AZURE":return[e.name&&e.type,e.clientId&&e.tenantId&&e.clientSecret&&e.subscriptionId,e.resourceGroup&&e.storageAccount,!0];case"AWS":return[e.name&&e.type,e.s3BucketName,!0,!0,e.arn,!0];case"OCP":return[e.name&&e.type&&Object.keys(a).every(e=>a[e]),!0,e.clusterId,!0,!0];default:return[]}})(l,i)(u);return _.a.createElement(pe,null,({index:t,setIndex:l})=>{""===u&&0!==t&&l(0);const i=[(""===u||t<k.length)&&_.a.createElement(s.a,Object.assign({},Object(j.a)(j.b.onboarding.btn_cancel),{key:"wizard_cancel",variant:"secondary",id:"wizard_cancel_button",isDisabled:1===c,onClick:()=>{a()}}),e("onboarding.wizard.cancel")),t>0&&_.a.createElement(s.a,Object.assign({},Object(j.a)(j.b.onboarding.btn_back),{key:"wizard_back",variant:"secondary",id:"wizard_back_button",isDisabled:1===c,onClick:()=>l(t-1)}),e("onboarding.wizard.back")),""===u&&_.a.createElement(s.a,{isDisabled:!0,key:"wizard_init_continue",variant:"primary",id:"wizard_init_button"},e("onboarding.wizard.next")),""!==u&&t<k.length-1&&_.a.createElement(s.a,Object.assign({},Object(j.a)(j.b.onboarding.btn_continue),{isDisabled:!f[t]||r,key:"wizard_continue",variant:"primary",id:"wizard_continue_button",onClick:()=>{l(t+1)}}),e("onboarding.wizard.next")),""!==u&&t===k.length-1&&_.a.createElement(s.a,Object.assign({},Object(j.a)(j.b.onboarding.btn_continue),{isDisabled:1===c,key:"wizard_finish",variant:"primary",id:"wizard_finish_button",onClick:()=>{const e="OCP"===u?g:"AWS"===u?m:null;let a=null;"AWS"===u&&(a={billing_source:{bucket:d}}),"AZURE"===u&&(a={billing_source:{data_source:{resource_group:v.resourceGroup.value,storage_account:v.storageAccount.value}}});const t="AZURE"===u?{client_id:h.clientId.value,tenant_id:h.tenantId.value,client_secret:h.clientSecret.value,subscription_id:h.subscriptionId.value}:null;p(Object.assign({type:u,name:b,authentication:{provider_resource_name:e,credentials:t}},a))}}),e("onboarding.wizard.add_source"))];return _.a.createElement(_.a.Fragment,null,_.a.createElement(P,null),_.a.createElement(o.a,{style:{height:"700px",width:"800px"},isLarge:!0,title:e("onboarding.wizard.title"),isOpen:n,actions:i,onClose:()=>{a()}},k[t]))})}))},857:function(e,a,t){}}]);
//# sourceMappingURL=8443aae55bfd7d38b361.bundle.js.map