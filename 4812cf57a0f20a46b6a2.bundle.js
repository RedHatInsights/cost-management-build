(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{277:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});const n=e=>{return e?e.toLowerCase():""},s=(e,t,a={})=>{const s=n(t),c=e||0;switch(s){case"usd":return i(c,s,a);case"gb":case"gb-hours":case"gb-mo":return o(c,s,a);case"core-hours":case"hrs":return l(c,s,a);default:return r(c,s,a)}},r=(e,t,{fractionDigits:a}={})=>e.toFixed(a),i=(e,t,{fractionDigits:a=2}={})=>{let n=e;return e||(n=0),n.toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:a,maximumFractionDigits:a})},o=(e,t,{fractionDigits:a=2}={})=>e.toFixed(a),l=(e,t,{fractionDigits:a}={})=>e.toFixed(a)},297:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});const n=e=>({"data-testid":e}),s={details:{historical_data_btn:"historical-data-btn",tag_lnk:"tag-lnk",show_more_btn:"show-more-btn",view_all_btn:"view-all-btn"},export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},onboarding:{btn_cancel:"btn-cancel",btn_back:"btn-back",btn_continue:"btn-continue",btn_close:"btn-close",type_selector:"type-selector",type_opt_aws:"type-option-aws",type_opt_ocp:"type-option-ocp",type_opt_non:"type-option-non",name_input:"name-input",check_box_1:"check-box-1",check_box_2:"check-box-2",s3_input:"s3-input",clusterid_input:"clusterid-input",arn_input:"arn-input"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input",view_all_link:"view-all-lnk"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},300:function(e,t,a){"use strict";a.d(t,"g",function(){return f}),a.d(t,"i",function(){return y}),a.d(t,"h",function(){return E}),a.d(t,"a",function(){return D}),a.d(t,"b",function(){return k}),a.d(t,"d",function(){return j}),a.d(t,"c",function(){return S}),a.d(t,"e",function(){return T}),a.d(t,"f",function(){return C});var n=a(529),s=a.n(n),r=a(382),i=a.n(r),o=a(305),l=a.n(o),c=a(465),u=a.n(c),m=a(464),d=a.n(m),p=a(56),b=a(277),h=a(390),g=a(388),v=a(387);function f(e,t=1,a="date",n="cost"){if(!e)return[];const s={report:e,idKey:a,sortKey:"id",sortDirection:1},r=Object(h.a)(s);return 1===t?r.map(e=>O(e[n],e,a)):2===t?r.map(e=>O(e[n],e,a)):r.reduce((e,t)=>{const s=e.length?e[e.length-1].y:0;return[...e,O(s+t[n],t,a)]},[])}function y(e,t=1,a="date",n="cost"){if(!e)return[];const s={report:e,idKey:a,sortKey:"id",sortDirection:1},r=Object(v.a)(s);return 1===t?r.map(e=>O(e[n],e,a)):2===t?r.map(e=>O(e[n],e,a)):r.reduce((e,t)=>{const s=e.length?e[e.length-1].y:0;return[...e,O(s+t[n],t,a)]},[])}function E(e,t=1,a="date",n="infrastructureCost"){if(!e)return[];const s={report:e,idKey:a,sortKey:"id",sortDirection:1},r=Object(g.a)(s);return 1===t?r.map(e=>O(e[n],e,a)):2===t?r.map(e=>O(e[n],e,a)):r.reduce((e,t)=>{const s=e.length?e[e.length-1].y:0;return[...e,O(s+t[n],t,a)]},[])}function O(e,t,a="date"){var n;return{x:"date"===a?l()(t.id):t.label,y:(n=e,Number(n)===n&&n%1!=0?parseFloat(e.toFixed(2)):function(e){return Number(e)===e&&e%1==0}(e)?e:0),key:t.id,name:t.id,units:t.units}}function D(e,t=!0,a=!1,n=0){const[r,i]=function(e,t=0){if(!e||!e.length){const e=new Date;return t&&e.setMonth(e.getMonth()-t),[d()(e),e]}return[new Date(e[0].key+"T00:00:00"),new Date(e[e.length-1].key+"T00:00:00")]}(e,n);if(t&&r.setDate&&r.setDate(1),a&&r.setDate){const e=s()(r).getDate();i.setDate(e)}return[r,i]}function k(e,t=!1,a=!1,n=0){const[s,r]=D(e,t,a,n);return p.a.t("chart.date_range",{count:l()(r),endDate:i()(r,"DD"),month:Number(i()(s,"M"))-1,startDate:i()(s,"DD"),year:u()(r)})}function j(e,t="chart.month_legend_label",a=0){const[n,s]=D(e,!0,!1,a);return[p.a.t(t,{month:Number(i()(n,"M"))-1}),p.a.t(t,{month:Number(i()(s,"M"))-1})]}function S(e){let t=0;return e&&e.length&&e.forEach(e=>{e.y>t&&(t=e.y)}),t}function T(e){return function(t,a=null,n={}){const s=Object(b.c)(a);switch(s){case"core-hours":case"hrs":case"gb":case"gb-hours":case"gb-mo":return p.a.t(`unit_tooltips.${s}`,{value:`${e(t,a,n)}`});default:return`${e(t,a,n)}`}}}function C(e,t,a,n="date"){if(!e.key)return"";if("date"===n){return`${i()(e.key,"DD MMM YYYY")} ${t(e.y,e.units,a)}`}return e.key.toString()}},334:function(e,t,a){"use strict";var n=a(4),s=a(516);const r={padding:8};var i={area:Object.assign({},r),axis:Object.assign({},r),bar:Object.assign({},r),boxplot:Object.assign({},r),candlestick:Object.assign({},r),chart:Object.assign({},r),errorbar:Object.assign({},r),group:Object.assign({},r),legend:{},line:Object.assign({},r),pie:Object.assign({},r),scatter:Object.assign({},r),stack:Object.assign({},r),tooltip:{},voronoi:Object.assign({},r)};const o=(()=>Object(n.a)(s.g.default,s.h.default,i))();t.a=o},340:function(e,t,a){"use strict";function n(e,t){if("string"==typeof e)return e;return e[t.key]}function s(e,t){const{direction:a=0}=t||{};return[...e].sort((e,s)=>{const r=n(0===a?e:s,t),i=n(0===a?s:e,t);return r>i?-1:r<i?1:0})}a.d(t,"a",function(){return s})},350:function(e,t,a){"use strict";var n=a(809),s=a(891),r=a(1),i=a.n(r),o=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&(a[n[s]]=e[n[s]])}return a};const l=e=>{var{content:t}=e,a=o(e,["content"]);return i.a.createElement(s.b,{content:t(a.datum),enableFlip:!0},i.a.createElement(n.a,Object.assign({},a)))};a.d(t,"a",function(){return l})},387:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i});var n=a(340);function s({report:e,idKey:t,labelKey:a=t,sortKey:s="cost",sortDirection:i=0}){return Object(n.a)(r({report:e,idKey:t,labelKey:a,sortDirection:i,sortKey:s}),{key:s,direction:i})}function r({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const n=new Map,s=e=>{e.values&&e.values.forEach(e=>{const s=e.capacity?e.capacity.value:0,r=e.cluster_alias?e.cluster_alias:e.cluster,i=e.cost?e.cost.value:0,o=e.derived_cost?e.derived_cost.value:0,l=e.infrastructure_cost?e.infrastructure_cost.value:0,c="date"!==t&&"cluster"!==t&&e.cluster?`-${e.cluster}`:"",u=`${e[t]}${c}`;let m;m="cluster"===a&&e.cluster_alias?e.cluster_alias:e[a]instanceof Object?e[a].value:e[a];const d=e.limit?e.limit.value:0,p=e.request?e.request.value:0,b=e.usage?e.usage.value:0,h=e.usage?e.usage.units:e.cost.units;n.get(u)?n.set(u,Object.assign({},n.get(u),{capacity:n.get(u).capacity+s,cost:n.get(u).cost+i,derivedCost:n.get(u).derivedCost+o,infrastructureCost:n.get(u).infrastructureCost+l,limit:n.get(u).limit+d,request:n.get(u).request+p,usage:n.get(u).usage+b})):n.set(u,{capacity:s,cluster:r,cost:i,deltaPercent:e.delta_percent,deltaValue:e.delta_value,derivedCost:o,id:u,infrastructureCost:l,label:m,limit:d,request:p,units:h,usage:b})});for(const t in e)if(e[t]instanceof Array)return e[t].forEach(s)};return e&&e.data&&e.data.forEach(s),Array.from(n.values())}function i(e={}){return e.project?"project":e.cluster?"cluster":e.node?"node":"date"}},388:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i});var n=a(340);function s({report:e,idKey:t,labelKey:a=t,sortKey:s="cost",sortDirection:i=0}){return Object(n.a)(r({report:e,idKey:t,labelKey:a,sortDirection:i,sortKey:s}),{key:s,direction:i})}function r({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const n=new Map,s=e=>{e.values&&e.values.forEach(e=>{const s=e.capacity?e.capacity.value:0,r=e.cluster_alias?e.cluster_alias:e.cluster,i=e.cost?e.cost.value:0,o=e.derived_cost?e.derived_cost.value:0,l=e.infrastructure_cost?e.infrastructure_cost.value:0,c="date"!==t&&"cluster"!==t&&e.cluster?`-${e.cluster}`:"",u=`${e[t]}${c}`;let m;m="cluster"===a&&e.cluster_alias?e.cluster_alias:e[a]instanceof Object?e[a].value:e[a],"account"===a&&e.account_alias&&(m=e.account_alias);const d=e.limit?e.limit.value:0,p=e.request?e.request.value:0,b=e.usage?e.usage.value:0,h=e.usage?e.usage.units:e.cost.units;n.get(u)?n.set(u,Object.assign({},n.get(u),{capacity:n.get(u).capacity+s,cost:n.get(u).cost+i,derivedCost:n.get(u).derivedCost+o,infrastructureCost:n.get(u).infrastructureCost+l,limit:n.get(u).limit+d,request:n.get(u).request+p,usage:n.get(u).usage+b})):n.set(u,{capacity:s,cluster:r,cost:i,deltaPercent:e.delta_percent,deltaValue:e.delta_value,derivedCost:o,id:u,infrastructureCost:l,label:m,limit:d,request:p,units:h,usage:b})});for(const t in e)if(e[t]instanceof Array)return e[t].forEach(s)};return e&&e.data&&e.data.forEach(s),Array.from(n.values())}function i(e={}){return e.project?"project":e.cluster?"cluster":e.node?"node":"date"}},390:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i});var n=a(340);function s({report:e,idKey:t,labelKey:a=t,sortKey:s="cost",sortDirection:i=0}){return Object(n.a)(r({report:e,idKey:t,labelKey:a,sortDirection:i,sortKey:s}),{key:s,direction:i})}function r({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const n=new Map,s=e=>{e.values&&e.values.forEach(e=>{const s=e.usage?e.usage.value:e.cost.value,r=e.derived_cost?e.derived_cost.value:0,i=e.infrastructure_cost?e.infrastructure_cost.value:0,o=e[t];let l;l=e[a]instanceof Object?e[a].value:e[a],"account"===a&&e.account_alias&&(l=e.account_alias),n.get(o)?n.set(o,Object.assign({},n.get(o),{cost:n.get(o).cost+s,derivedCost:n.get(o).derivedCost+r,infrastructureCost:n.get(o).infrastructureCost+i})):n.set(o,{cost:s,deltaPercent:e.delta_percent,deltaValue:e.delta_value,derivedCost:r,id:o,infrastructureCost:i,label:l,units:e.usage?e.usage.units:e.cost.units})});for(const t in e)if(e[t]instanceof Array)return e[t].forEach(s)};return e&&e.data&&e.data.forEach(s),Array.from(n.values())}function i(e={}){return e.account?"account":e.instance_type?"instance_type":e.region?"region":e.service?"service":"date"}},463:function(e,t,a){"use strict";var n=a(834),s=a(904),r=a(1),i=a.n(r),o=a(256);const l=s.a.create({container:{fontSize:o.p.value}});a.d(t,"a",function(){return c});const c=()=>i.a.createElement("span",{className:Object(s.b)(l.container)},i.a.createElement(n.a,null))},471:function(e,t,a){"use strict";var n=a(898),s=a(823),r=a(822),i=a(824),o=a(837),l=a(832),c=a(904),u=a(1),m=a.n(u),d=a(81);const p=c.a.create({container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"}});a.d(t,"a",function(){return b});const b=Object(d.d)()(({error:e,icon:t=l.a,t:a})=>{let u=a("error_state.unexpected_title"),d=a("error_state.unexpected_desc");return e&&e.response&&401===e.response.status&&(t=o.a,u=a("error_state.unauthorized_title"),d=a("error_state.unauthorized_desc")),m.a.createElement("div",{className:Object(c.b)(p.container)},m.a.createElement(i.a,null,m.a.createElement(r.a,{icon:t}),m.a.createElement(n.a,{size:"lg"},u),m.a.createElement(s.a,null,d)))})},474:function(e,t,a){"use strict";var n=a(898),s=a(823),r=a(822),i=a(824),o=a(836),l=a(904),c=a(1),u=a.n(c),m=a(81);const d=l.a.create({container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"}});a.d(t,"a",function(){return p});const p=Object(m.d)()(({icon:e=o.a,t:t})=>{const a=t("loading_state.sources_title"),c=t("loading_state.sources_desc");return u.a.createElement("div",{className:Object(l.b)(d.container)},u.a.createElement(i.a,null,u.a.createElement(r.a,{icon:e}),u.a.createElement(n.a,{size:"lg"},a),u.a.createElement(s.a,null,c)))})},514:function(e,t,a){"use strict";var n=a(823),s=a(898),r=a(822),i=a(824),o=a(835),l=a(904),c=a(1),u=a.n(c),m=a(81),d=a(68),p=a(840),b=a(43),h=a(83),g=a(297),v=a(256);const f=l.a.create({container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"},viewSources:{marginTop:v.C.value}});a.d(t,"a",function(){return E});const y=Object(b.a)((e,{})=>({})),E=Object(m.d)()(Object(d.b)(y,{openProvidersModal:h.a.openModal})(class extends u.a.Component{constructor(){super(...arguments),this.getViewSources=(()=>{const{t:e}=this.props;return u.a.createElement(p.a,Object.assign({to:"/sources"},Object(g.a)(g.b.providers.view_all_link)),e("providers.view_sources"))})}render(){const{t:e}=this.props;return u.a.createElement("div",{className:Object(l.b)(f.container)},u.a.createElement(i.a,null,u.a.createElement(r.a,{icon:o.a}),u.a.createElement(s.a,{size:"lg"},e("providers.empty_state_title")),u.a.createElement(n.a,null,e("providers.empty_state_desc")),u.a.createElement("div",{className:Object(l.b)(f.viewSources)},this.getViewSources())))}}))},651:function(e,t,a){"use strict";var n=a(810),s=a(804),r=a(801),i=a(805),o=a(803),l=a(904),c=a(350),u=a(334),m=a(300),d=a(305),p=a.n(d),b=a(56),h=a(1),g=a.n(h),v=a(256);const f={currentRequestData:{data:{fill:"none",stroke:"#88D080",strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:"#A2DA9C"}},legend:{labels:{fontFamily:v.l.value,fontSize:14},minWidth:175},previousRequestData:{data:{fill:"none",stroke:v.z.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:v.z.value}},currentColorScale:["#A2DA9C","#88D080","#6EC664","#519149","#3C6C37"],previousColorScale:[v.z.value,v.y.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"}}},y=l.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"},marginTop:v.C.value},legend:{display:"inline-block",fontSize:v.o.value,minHeight:"60px",minWidth:"175px",width:"50%"},legendTitle:{fontSize:v.o.value,marginBottom:v.E.value,marginTop:v.C.value}});class E extends g.a.Component{constructor(){super(...arguments),this.containerRef=g.a.createRef(),this.state={width:0},this.initDatum=(()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:n,title:s}=this.props,r=[];if(n){const[e]=Object(m.d)(n,"chart.usage_legend_label",1);r.push({name:e,symbol:{type:"minus"},tooltip:Object(m.b)(n,!0,!0,1)})}if(a){const[e]=Object(m.d)(a,"chart.requests_legend_label",1);r.push({name:e,symbol:{type:"dash"},tooltip:Object(m.b)(a,!0,!0,1)})}const i={charts:[{data:n,name:"previousUsage",show:!0,style:f.previousUsageData},{data:a,name:"previousRequest",show:!0,style:f.previousRequestData}],legend:{colorScale:f.previousColorScale,data:r,onClick:this.handlePreviousLegendClick,title:s}},o=[];if(t){const[e]=Object(m.d)(t,"chart.usage_legend_label");o.push({name:e,symbol:{type:"minus"},tooltip:Object(m.b)(t,!0,!1)})}if(e){const[t]=Object(m.d)(e,"chart.requests_legend_label");o.push({name:t,symbol:{type:"dash"},tooltip:Object(m.b)(e,!0,!1)})}const l={charts:[{data:t,name:"currentUsage",show:!0,style:f.currentUsageData},{data:e,name:"currentRequest",show:!0,style:f.currentRequestData}],legend:{colorScale:f.currentColorScale,data:o,gutter:55,onClick:this.handleCurrentLegendClick,title:s}};this.setState({datum:{previous:i,current:l}})}),this.handleCurrentLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.current.charts.length&&(a.current.charts[e.index].show=!a.current.charts[e.index].show,this.setState({datum:a}))}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.handlePreviousLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.previous.charts.length&&(a.previous.charts[e.index].show=!a.previous.charts[e.index].show,this.setState({datum:a}))}),this.getChart=((e,t)=>e.data&&e.data.length&&e.show?g.a.createElement(r.a,{data:e.data,name:e.name,key:`usage-chart-${t}`,style:e.style}):null),this.getLegend=((e,t)=>{if(e&&e.data&&e.data.length){const t={onClick:()=>[{target:"data",mutation:t=>(e.onClick(t),null)}]};return g.a.createElement(s.a,{colorScale:e.colorScale,data:e.data,events:[{target:"data",eventHandlers:t},{target:"labels",eventHandlers:t}],height:25,itemsPerRow:1,labelComponent:g.a.createElement(c.a,{content:this.getLegendTooltip}),responsive:!1,style:f.legend})}return null}),this.getLegendTooltip=(e=>e.tooltip?e.tooltip:""),this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,n=Object(m.f)(e,Object(m.e)(t),a,"date");return"currentRequest"===e.childName||"previousRequest"===e.childName?b.a.t("chart.requests_tooltip",{value:n}):"currentUsage"===e.childName||"previousUsage"===e.childName?b.a.t("chart.usage_tooltip",{value:n}):n})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:n}=this.props,s={x:[1,31]},r=e?Object(m.c)(e):0,i=t?Object(m.c)(t):0,o=a?Object(m.c)(a):0,l=n?Object(m.c)(n):0,c=Math.max(r,i,o,l),u=c>0?Math.ceil(c+.1*c):0;return u>0&&(s.y=[0,u]),s}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:n}=this.props,s=e?p()(Object(m.a)(e,!0,!0)[1]):0,r=t?p()(Object(m.a)(t,!0,!0)[1]):0,i=a?p()(Object(m.a)(a,!0,!0)[1]):0,o=n?p()(Object(m.a)(n,!0,!0)[1]):0;return s>0||r>0||i>0||o>0?Math.max(s,r,i,o):31}isCurrentLegendVisible(){const{datum:e}=this.state;let t=!1;return e&&e.current.legend&&e.current.legend.data&&e.current.legend.data.forEach(e=>{e.name&&""!==e.name.trim()&&(t=!0)}),t}isPreviousLegendVisible(){const{datum:e}=this.state;let t=!1;return e&&e.previous.legend&&e.previous.legend.data&&e.previous.legend.data.forEach(e=>{e.name&&""!==e.name.trim()&&(t=!0)}),t}render(){const{height:e}=this.props,{datum:t,width:a}=this.state,s=g.a.createElement(i.a,{labels:this.getTooltipLabel,voronoiDimension:"x"}),r=f.legend.minWidth>a/2?f.legend.minWidth:a/2,c=this.getDomain(),m=this.getEndDate(),d=Math.floor(m/2);return g.a.createElement("div",{className:Object(l.b)(y.chartContainer),ref:this.containerRef},g.a.createElement(o.a,{containerComponent:s,domain:c,height:e,theme:u.a,width:a},Boolean(t&&t.previous)&&t.previous.charts.map((e,t)=>this.getChart(e,t)),Boolean(t&&t.current)&&t.current.charts.map((e,t)=>this.getChart(e,t)),g.a.createElement(n.a,{style:f.xAxis,tickValues:[1,d,m]}),g.a.createElement(n.a,{dependentAxis:!0,style:f.yAxis})),Boolean(this.isPreviousLegendVisible())&&g.a.createElement("div",{className:Object(l.b)(y.legendTitle)},t.previous.legend.title),Boolean(this.isCurrentLegendVisible()&&!this.isPreviousLegendVisible())&&g.a.createElement("div",{className:Object(l.b)(y.legendTitle)},t.current.legend.title),Boolean(this.isPreviousLegendVisible())&&g.a.createElement("div",{className:Object(l.b)(y.legend)},this.getLegend(t.previous.legend,r)),Boolean(this.isCurrentLegendVisible())&&g.a.createElement("div",{className:Object(l.b)(y.legend)},this.getLegend(t.current.legend,r)))}}a.d(t,"a",function(){return E})},652:function(e,t,a){"use strict";var n=a(810),s=a(801),r=a(805),i=a(803),o=a(804),l=a(904),c=a(350),u=a(334),m=a(300),d=a(305),p=a.n(d),b=a(1),h=a.n(b),g=a(256);const v={colorScale:[g.z.value,"#A2DA9C","#88D080","#6EC664","#519149","#3C6C37"],legend:{labels:{fontFamily:g.l.value,fontSize:14},minWidth:175},previousMonth:{data:{fill:"none",stroke:g.z.value}},currentMonth:{data:{fill:"none",stroke:"#A2DA9C"}},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"}}},f=l.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"}},legend:{display:"inline-block",fontSize:g.o.value,marginTop:g.C.value,minWidth:"175px"},legendTitle:{marginBottom:g.E.value}});class y extends h.a.Component{constructor(){super(...arguments),this.containerRef=h.a.createRef(),this.state={width:0},this.initDatum=(()=>{const{currentData:e,previousData:t,title:a}=this.props,n=[];if(t){const[e]=Object(m.d)(t,"chart.month_legend_label",1);n.push({name:e,symbol:{type:"minus"},tooltip:Object(m.b)(t,!0,!0,1)})}if(e){const[t]=Object(m.d)(e,"chart.month_legend_label");n.push({name:t,symbol:{type:"minus"},tooltip:Object(m.b)(e,!0,!1)})}const s={charts:[{data:t,name:"previous",show:!0,style:v.previousMonth},{data:e,name:"current",show:!0,style:v.currentMonth}],legend:{colorScale:v.colorScale,data:n,onClick:this.handleCostLegendClick,title:a}};this.setState({datum:{cost:s}})}),this.handleCostLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.cost.charts.length&&(a.cost.charts[e.index].show=!a.cost.charts[e.index].show,this.setState({datum:a}))}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>e.data&&e.data.length&&e.show?h.a.createElement(s.a,{data:e.data,name:e.name,key:`trend-chart-${e.name}-${t}`,style:e.style}):null),this.getLegend=((e,t)=>{if(e&&e.data&&e.data.length){const a={onClick:()=>[{target:"data",mutation:t=>(e.onClick(t),null)}]};return h.a.createElement(o.a,{colorScale:e.colorScale,data:e.data,events:[{target:"data",eventHandlers:a},{target:"labels",eventHandlers:a}],gutter:20,height:25,labelComponent:h.a.createElement(c.a,{content:this.getLegendTooltip}),orientation:t>150?"horizontal":"vertical",responsive:!1,style:v.legend,width:t})}return null}),this.getLegendTooltip=(e=>e.tooltip?e.tooltip:""),this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props;return Object(m.f)(e,Object(m.e)(t),a,"date")})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentData:e,previousData:t}=this.props,a={x:[1,31]},n=e?Object(m.c)(e):0,s=t?Object(m.c)(t):0,r=Math.max(n,s),i=r>0?Math.ceil(r+.1*r):0;return i>0&&(a.y=[0,i]),a}getEndDate(){const{currentData:e,previousData:t}=this.props,a=t?p()(Object(m.a)(t,!0,!0)[1]):0,n=e?p()(Object(m.a)(e,!0,!0)[1]):0;return n>0||a>0?Math.max(n,a):31}isLegendVisible(){const{datum:e}=this.state;let t=!1;return e&&e.cost.legend&&e.cost.legend.data&&e.cost.legend.data.forEach(e=>{e.name&&""!==e.name.trim()&&(t=!0)}),t}render(){const{height:e}=this.props,{datum:t,width:a}=this.state,s=h.a.createElement(r.a,{labels:this.getTooltipLabel,voronoiDimension:"x"}),o=v.legend.minWidth>a/2?v.legend.minWidth:a/2,c=this.getDomain(),m=this.getEndDate(),d=Math.floor(m/2);return h.a.createElement("div",{className:Object(l.b)(f.chartContainer),ref:this.containerRef},h.a.createElement(i.a,{containerComponent:s,domain:c,height:e,theme:u.a,width:a},Boolean(t&&t.cost)&&t.cost.charts.map((e,t)=>this.getChart(e,t)),h.a.createElement(n.a,{style:v.xAxis,tickValues:[1,d,m]}),h.a.createElement(n.a,{dependentAxis:!0,style:v.yAxis})),Boolean(this.isLegendVisible())&&h.a.createElement("div",{className:Object(l.b)(f.legend)},Boolean(t.cost.legend.title)&&h.a.createElement("div",{className:Object(l.b)(f.legendTitle)},t.cost.legend.title),this.getLegend(t.cost.legend,o)))}}a.d(t,"a",function(){return y})},787:function(e,t,a){"use strict";var n=a(827),s=a(829),r=a(826),i=a(898),o=a(891),l=a(828),c=a(904),u=a(290),m=a(1),d=a.n(m),p=a(81),b=a(256);const h=c.a.create({chartSkeleton:{height:"125px",marginBottom:b.D.value,marginTop:b.D.value},legendSkeleton:{marginTop:b.D.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:b.q.value,color:b.h.var,marginBottom:"0"}}),g=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:m,subTitleTooltip:p=m,status:b,t:g})=>d.a.createElement(s.a,{className:Object(c.b)(h.reportSummary)},d.a.createElement(r.a,null,d.a.createElement(i.a,{size:"lg"},a),Boolean(m)&&d.a.createElement(o.b,{content:p,enableFlip:!0},d.a.createElement("p",{className:Object(c.b)(h.subtitle)},m))),d.a.createElement(l.a,null,1===b?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs}),d.a.createElement(u.Skeleton,{className:Object(c.b)(h.chartSkeleton),size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.sm}),d.a.createElement(u.Skeleton,{className:Object(c.b)(h.legendSkeleton),size:u.SkeletonSize.xs})):e),Boolean(t)&&d.a.createElement(n.a,null,t)));var v=a(818),f=a(819);const y=c.a.create({chartSkeleton:{height:"175px",marginBottom:b.D.value,marginTop:b.D.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"440px",marginRight:b.D.value},legendSkeleton:{marginTop:b.D.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:b.q.value,color:b.h.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:b.C.value}}),E=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:m,subTitleTooltip:p=m,t:b,tabs:h,title:g})=>d.a.createElement(s.a,{className:Object(c.b)(y.reportSummary)},d.a.createElement(f.a,{gutter:"md"},d.a.createElement(v.a,{lg:5,xl:6},d.a.createElement("div",{className:Object(c.b)(y.cost)},d.a.createElement(r.a,null,d.a.createElement(i.a,{size:"lg"},g),Boolean(m)&&d.a.createElement(o.b,{content:p,enableFlip:!0},d.a.createElement("p",{className:Object(c.b)(y.subtitle)},m))),d.a.createElement(l.a,null,1===a?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs}),d.a.createElement(u.Skeleton,{className:Object(c.b)(y.chartSkeleton),size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.sm}),d.a.createElement(u.Skeleton,{className:Object(c.b)(y.legendSkeleton),size:u.SkeletonSize.xs})):e))),d.a.createElement(v.a,{lg:7,xl:6},d.a.createElement("div",{className:Object(c.b)(y.container)},d.a.createElement("div",{className:Object(c.b)(y.tops)},1!==a&&d.a.createElement(d.a.Fragment,null,Boolean(h)&&d.a.createElement(l.a,null,h),Boolean(t)&&d.a.createElement(n.a,null,t))))))));var O=a(463),D=a(277);const k=c.a.create({reportSummaryDetails:{marginBottom:b.D.value,display:"flex",alignItems:"flex-end"},text:{paddingBottom:14,lineHeight:b.t.value,fontSize:b.q.value},value:{color:b.g.var,marginRight:b.E.value,fontSize:b.m.value},valueContainer:{display:"inline-block",marginBottom:b.D.value,width:"50%"}}),j=Object(p.d)()(({costLabel:e,formatValue:t,formatOptions:a,report:n,reportType:s="cost",showUnits:r=!1,t:i,usageLabel:o})=>{let l=d.a.createElement(O.a,null),u=d.a.createElement(O.a,null);if(n&&n.meta&&n.meta.total&&(l=t(n.meta.total.cost?n.meta.total.cost.value:0,n.meta.total.cost?n.meta.total.cost.units:"USD",a),u=t(n.meta.total.usage?n.meta.total.usage.value:0,n.meta.total.usage?n.meta.total.usage.units:"",a)),"cost"===s)return d.a.createElement("div",{className:Object(c.b)(k.reportSummaryDetails)},d.a.createElement("div",{className:Object(c.b)(k.value)},l));{const t=n&&n.meta&&n.meta.total&&n.meta.total.usage?n.meta.total.usage.units:"",a=i(`units.${Object(D.c)(t)}`);return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:Object(c.b)(k.valueContainer)},d.a.createElement("div",{className:Object(c.b)(k.value)},l),d.a.createElement("div",{className:Object(c.b)(k.text)},d.a.createElement("div",null,e))),Boolean(o)&&d.a.createElement("div",{className:Object(c.b)(k.valueContainer)},d.a.createElement("div",{className:Object(c.b)(k.value)},u,Boolean(r&&u>=0)&&d.a.createElement("span",{className:Object(c.b)(k.text)},a)),d.a.createElement("div",{className:Object(c.b)(k.text)},d.a.createElement("div",null,o))))}});var S=a(802);const T=c.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:b.D.value}},test:{":not(foo) svg":{overflow:"visible"}}}),C=({label:e,formatOptions:t,formatValue:a,t:n,totalValue:s,units:r,value:i})=>{const o=Object(D.c)(r),l="usd"!==o?n(`units.${o}`):void 0,u=Number((s?i/s*100:0).toFixed(2)),m=n("percent_of_total",{percent:u,units:l,value:a(i,r,t)});return d.a.createElement("li",{className:Object(c.b)(T.reportSummaryItem)},d.a.createElement(S.b,{label:m,value:u,title:e,size:S.a.sm}))};C.defaultProps={formatValue:e=>e};const _=Object(p.d)()(C);var w=a(390);const x=c.a.create({skeleton:{marginTop:b.D.value}});const z=Object(p.d)()(class extends d.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,n=Object(w.a)({report:e,idKey:t,labelKey:a}),s=n.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==s?[...n.slice(0,s),...n.slice(s+1),n[s]]:n}render(){const{report:e,children:t}=this.props;if(e){const e=this.getItems();return d.a.createElement("ul",null,t({items:e}))}return d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}))}});var N=a(652);const L=c.a.create({chart:{marginBottom:b.E.value}}),R=e=>d.a.createElement("div",{className:Object(c.b)(L.chart)},d.a.createElement(N.a,Object.assign({},e)));a.d(t,"a",function(){return g}),a.d(t,"b",function(){return E}),a.d(t,"c",function(){return j}),a.d(t,"d",function(){return _}),a.d(t,"e",function(){return z}),a.d(t,"f",function(){return R})},788:function(e,t,a){"use strict";var n=a(827),s=a(829),r=a(826),i=a(898),o=a(891),l=a(828),c=a(904),u=a(290),m=a(1),d=a.n(m),p=a(81),b=a(256);const h=c.a.create({chartSkeleton:{height:"125px",marginBottom:b.D.value,marginTop:b.D.value},legendSkeleton:{marginTop:b.D.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:b.q.value,color:b.h.var,marginBottom:"0"}}),g=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:m,subTitleTooltip:p=m,status:b,t:g})=>d.a.createElement(s.a,{className:Object(c.b)(h.reportSummary)},d.a.createElement(r.a,null,d.a.createElement(i.a,{size:"lg"},a),Boolean(m)&&d.a.createElement(o.b,{content:p,enableFlip:!0},d.a.createElement("p",{className:Object(c.b)(h.subtitle)},m))),d.a.createElement(l.a,null,1===b?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs}),d.a.createElement(u.Skeleton,{className:Object(c.b)(h.chartSkeleton),size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.sm}),d.a.createElement(u.Skeleton,{className:Object(c.b)(h.legendSkeleton),size:u.SkeletonSize.xs})):e),Boolean(t)&&d.a.createElement(n.a,null,t)));var v=a(818),f=a(819);const y=c.a.create({chartSkeleton:{height:"175px",marginBottom:b.D.value,marginTop:b.D.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"440px",marginRight:b.D.value},legendSkeleton:{marginTop:b.D.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:b.q.value,color:b.h.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:b.C.value}}),E=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:m,subTitleTooltip:p=m,t:b,tabs:h,title:g})=>d.a.createElement(s.a,{className:Object(c.b)(y.reportSummary)},d.a.createElement(f.a,{gutter:"md"},d.a.createElement(v.a,{lg:5,xl:6},d.a.createElement("div",{className:Object(c.b)(y.cost)},d.a.createElement(r.a,null,d.a.createElement(i.a,{size:"lg"},g),Boolean(m)&&d.a.createElement(o.b,{content:p,enableFlip:!0},d.a.createElement("p",{className:Object(c.b)(y.subtitle)},m))),d.a.createElement(l.a,null,1===a?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs}),d.a.createElement(u.Skeleton,{className:Object(c.b)(y.chartSkeleton),size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.sm}),d.a.createElement(u.Skeleton,{className:Object(c.b)(y.legendSkeleton),size:u.SkeletonSize.xs})):e))),d.a.createElement(v.a,{lg:7,xl:6},d.a.createElement("div",{className:Object(c.b)(y.container)},d.a.createElement("div",{className:Object(c.b)(y.tops)},1!==a&&d.a.createElement(d.a.Fragment,null,Boolean(h)&&d.a.createElement(l.a,null,h),Boolean(t)&&d.a.createElement(n.a,null,t))))))));var O=a(463),D=a(277);const k=c.a.create({text:{display:"flex",alignItems:"flex-end",marginLeft:b.E.value,paddingBottom:14,lineHeight:b.t.value,fontSize:b.q.value},titleContainer:{display:"inline-block",marginBottom:b.D.value,minWidth:"175px",width:"50%"},usageText:{marginRight:b.E.value},usageValue:{marginRight:b.E.value},value:{display:"flex",color:b.g.var,fontSize:b.m.value},valueContainer:{display:"inline-block",marginBottom:b.D.value,width:"50%"}}),j=Object(p.d)()(({costLabel:e,formatValue:t,formatOptions:a,report:n,reportType:s="cost",requestLabel:r,showUnits:i=!1,t:o,usageLabel:l})=>{let u=d.a.createElement(O.a,null),m=d.a.createElement(O.a,null),p=d.a.createElement(O.a,null);const b="database"===s||"instance_type"===s||"network"===s||"storage"===s;if(n&&n.meta&&n.meta.total&&(u=t(n.meta.total.cost?n.meta.total.cost.value:0,n.meta.total.cost?n.meta.total.cost.units:"USD",a),b?p=t(n.meta.total.usage?n.meta.total.usage.value:0,n.meta.total.usage?n.meta.total.usage.units:"",a):(p=t(n.meta.total.usage?n.meta.total.usage.value:0,n.meta.total.usage?n.meta.total.usage.units:"",a),m=t(n.meta.total.request?n.meta.total.request.value:0,n.meta.total.request?n.meta.total.request.units:"",a))),"cost"===s)return d.a.createElement("div",{className:Object(c.b)(k.titleContainer)},d.a.createElement("div",{className:Object(c.b)(k.value)},u));if(b){const t=n&&n.meta&&n.meta.total&&n.meta.total.usage?n.meta.total.usage.units:"",a=o(`units.${Object(D.c)(t)}`);return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:Object(c.b)(k.valueContainer)},d.a.createElement("div",{className:Object(c.b)(k.value)},u),d.a.createElement("div",{className:Object(c.b)(k.text)},d.a.createElement("div",null,e))),Boolean(l)&&d.a.createElement("div",{className:Object(c.b)(k.valueContainer)},d.a.createElement("div",{className:Object(c.b)(k.value)},p,Boolean(i&&p>=0)&&d.a.createElement("span",{className:Object(c.b)(k.text)},a)),d.a.createElement("div",{className:Object(c.b)(k.text)},d.a.createElement("div",null,l))))}return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:Object(c.b)(k.titleContainer)},d.a.createElement("div",{className:Object(c.b)(k.value,k.usageValue)},p,d.a.createElement("div",{className:Object(c.b)(k.text)},d.a.createElement("div",null,l)))),d.a.createElement("div",{className:Object(c.b)(k.titleContainer)},d.a.createElement("div",{className:Object(c.b)(k.value)},m,d.a.createElement("div",{className:Object(c.b)(k.text)},r))))});var S=a(802);const T=c.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:b.D.value}},test:{":not(foo) svg":{overflow:"visible"}}}),C=({label:e,formatOptions:t,formatValue:a,t:n,totalValue:s,units:r,value:i})=>{const o=Object(D.c)(r),l="usd"!==o?n(`units.${o}`):void 0,u=Number((s?i/s*100:0).toFixed(2)),m=n("percent_of_total",{percent:u,units:l,value:a(i,r,t)});return d.a.createElement("li",{className:Object(c.b)(T.reportSummaryItem)},d.a.createElement(S.b,{label:m,value:u,title:e,size:S.a.sm}))};C.defaultProps={formatValue:e=>e};const _=Object(p.d)()(C);var w=a(388);const x=c.a.create({skeleton:{marginTop:b.D.value}});const z=Object(p.d)()(class extends d.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,n=Object(w.a)({report:e,idKey:t,labelKey:a}),s=n.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==s?[...n.slice(0,s),...n.slice(s+1),n[s]]:n}render(){const{report:e,children:t}=this.props;if(e){const e=this.getItems();return d.a.createElement("ul",null,t({items:e}))}return d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}))}});var N=a(652);const L=c.a.create({chart:{marginBottom:b.E.value}}),R=e=>d.a.createElement("div",{className:Object(c.b)(L.chart)},d.a.createElement(N.a,Object.assign({},e)));var B=a(651);const K=e=>d.a.createElement("div",{className:Object(c.b)(L.chart)},d.a.createElement(B.a,Object.assign({},e)));a.d(t,"a",function(){return g}),a.d(t,"b",function(){return E}),a.d(t,"c",function(){return j}),a.d(t,"d",function(){return _}),a.d(t,"e",function(){return z}),a.d(t,"f",function(){return R}),a.d(t,"g",function(){return K})},789:function(e,t,a){"use strict";var n=a(827),s=a(829),r=a(826),i=a(898),o=a(891),l=a(828),c=a(904),u=a(290),m=a(1),d=a.n(m),p=a(81),b=a(256);const h=c.a.create({chartSkeleton:{height:"125px",marginBottom:b.D.value,marginTop:b.D.value},legendSkeleton:{marginTop:b.D.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:b.q.value,color:b.h.var,marginBottom:"0"}}),g=Object(p.d)()(({children:e,detailsLink:t,title:a,subTitle:m,subTitleTooltip:p=m,status:b,t:g})=>d.a.createElement(s.a,{className:Object(c.b)(h.reportSummary)},d.a.createElement(r.a,null,d.a.createElement(i.a,{size:"lg"},a),Boolean(m)&&d.a.createElement(o.b,{content:p,enableFlip:!0},d.a.createElement("p",{className:Object(c.b)(h.subtitle)},m))),d.a.createElement(l.a,null,1===b?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs}),d.a.createElement(u.Skeleton,{className:Object(c.b)(h.chartSkeleton),size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.sm}),d.a.createElement(u.Skeleton,{className:Object(c.b)(h.legendSkeleton),size:u.SkeletonSize.xs})):e),Boolean(t)&&d.a.createElement(n.a,null,t)));var v=a(818),f=a(819);const y=c.a.create({chartSkeleton:{height:"175px",marginBottom:b.D.value,marginTop:b.D.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"440px",marginRight:b.D.value},legendSkeleton:{marginTop:b.D.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:b.q.value,color:b.h.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:b.C.value}}),E=Object(p.d)()(({children:e,detailsLink:t,status:a,subTitle:m,subTitleTooltip:p=m,t:b,tabs:h,title:g})=>d.a.createElement(s.a,{className:Object(c.b)(y.reportSummary)},d.a.createElement(f.a,{gutter:"md"},d.a.createElement(v.a,{lg:5,xl:6},d.a.createElement("div",{className:Object(c.b)(y.cost)},d.a.createElement(r.a,null,d.a.createElement(i.a,{size:"lg"},g),Boolean(m)&&d.a.createElement(o.b,{content:p,enableFlip:!0},d.a.createElement("p",{className:Object(c.b)(y.subtitle)},m))),d.a.createElement(l.a,null,1===a?d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(y.chartSkeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.sm}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.xs,className:Object(c.b)(y.legendSkeleton)})):e))),d.a.createElement(v.a,{lg:7,xl:6},d.a.createElement("div",{className:Object(c.b)(y.container)},d.a.createElement("div",{className:Object(c.b)(y.tops)},1!==a&&d.a.createElement(d.a.Fragment,null,Boolean(h)&&d.a.createElement(l.a,null,h),Boolean(t)&&d.a.createElement(n.a,null,t))))))));var O=a(463);const D=c.a.create({text:{display:"flex",alignItems:"flex-end",marginLeft:b.E.value,paddingBottom:14,lineHeight:b.t.value,fontSize:b.q.value},titleContainer:{display:"inline-block",marginBottom:b.D.value,minWidth:"175px",width:"50%"},usageText:{marginRight:b.E.value},usageValue:{marginRight:b.E.value},value:{display:"flex",color:b.g.var,fontSize:b.m.value}}),k=Object(p.d)()(({formatValue:e,formatOptions:t,report:a,reportType:n="cost",requestLabel:s,usageLabel:r,t:i})=>{let l=d.a.createElement(O.a,null),u=d.a.createElement(O.a,null),m=d.a.createElement(O.a,null),p=d.a.createElement(O.a,null),b=d.a.createElement(O.a,null);return a&&a.meta&&a.meta.total&&(l=e(a.meta.total.cost?a.meta.total.cost.value:0,a.meta.total.cost?a.meta.total.cost.units:"USD",t),m=e(a.meta.total.derived_cost?a.meta.total.derived_cost.value:0,a.meta.total.derived_cost?a.meta.total.derived_cost.units:"USD",t),p=e(a.meta.total.infrastructure_cost?a.meta.total.infrastructure_cost.value:0,a.meta.total.infrastructure_cost?a.meta.total.infrastructure_cost.units:"USD",t),"cost"!==n&&(u=e(a.meta.total.usage?a.meta.total.usage.value:0,a.meta.total.usage?a.meta.total.usage.units:"",t),b=e(a.meta.total.request?a.meta.total.request.value:0,a.meta.total.request?a.meta.total.request.units:"",t))),d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:Object(c.b)(D.titleContainer)},d.a.createElement("div",{className:Object(c.b)(D.value,D.usageValue)},Boolean("cost"===n)?d.a.createElement(o.b,{content:i("ocp_dashboard.total_cost_tooltip",{derivedCost:m,infrastructureCost:p}),enableFlip:!0},d.a.createElement("div",null,l)):d.a.createElement("div",null,u),d.a.createElement("div",{className:Object(c.b)(D.text)},d.a.createElement("div",null,r)))),d.a.createElement("div",{className:Object(c.b)(D.titleContainer)},Boolean("cost"!==n)&&d.a.createElement("div",{className:Object(c.b)(D.value)},b,d.a.createElement("div",{className:Object(c.b)(D.text)},s))))});var j=a(802),S=a(277);const T=c.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:b.D.value}},test:{":not(foo) svg":{overflow:"visible"}}}),C=({formatOptions:e,formatValue:t,label:a,t:n,totalValue:s,units:r,value:i})=>{const o=Object(S.c)(r),l="usd"!==o?n(`units.${o}`):void 0,u=Number((s?i/s*100:0).toFixed(2)),m=n("percent_of_total",{percent:u,units:l,value:t(i,r,e)});return d.a.createElement("li",{className:Object(c.b)(T.reportSummaryItem)},d.a.createElement(j.b,{label:m,value:u,title:a,size:j.a.sm}))};C.defaultProps={formatValue:e=>e};const _=Object(p.d)()(C);var w=a(387);const x=c.a.create({skeleton:{marginTop:b.D.value}});const z=Object(p.d)()(class extends d.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,n=Object(w.a)({report:e,idKey:t,labelKey:a}),s=n.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==s?[...n.slice(0,s),...n.slice(s+1),n[s]]:n}render(){const{report:e,children:t}=this.props;if(e){const e=this.getItems();return d.a.createElement("ul",null,t({items:e}))}return d.a.createElement(d.a.Fragment,null,d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}),d.a.createElement(u.Skeleton,{size:u.SkeletonSize.md,className:Object(c.b)(x.skeleton)}))}});var N=a(810),L=a(804),R=a(801),B=a(805),K=a(803),I=a(350),F=a(334),V=a(300),q=a(305),P=a.n(q),U=a(56);const W={currentCostData:{data:{fill:"none",stroke:"#A2DA9C"}},currentInfrastructureCostData:{data:{fill:"none",stroke:"#88D080",strokeDasharray:"3,3"}},legend:{labels:{fontFamily:b.l.value,fontSize:14},minWidth:200},previousCostData:{data:{fill:"none",stroke:b.z.value}},previousInfrastructureCostData:{data:{fill:"none",stroke:b.z.value,strokeDasharray:"3,3"}},currentColorScale:["#A2DA9C","#88D080","#6EC664","#519149","#3C6C37"],previousColorScale:[b.z.value,b.y.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"}}},$=c.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"},marginTop:b.C.value},legendTitle:{fontSize:b.o.value,marginBottom:b.E.value,marginTop:b.C.value},legend:{display:"inline-block",fontSize:b.o.value,minHeight:"60px",minWidth:"200px",width:"50%"}});class A extends d.a.Component{constructor(){super(...arguments),this.containerRef=d.a.createRef(),this.state={width:0},this.initDatum=(()=>{const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:n,title:s}=this.props,r=[];if(n){const[e]=Object(V.d)(n,"chart.cost_legend_label",1);r.push({name:e,symbol:{type:"minus"},tooltip:Object(V.b)(n,!0,!0,1)})}if(a){const[e]=Object(V.d)(a,"chart.cost_infrastructure_legend_label",1);r.push({name:e,symbol:{type:"dash"},tooltip:Object(V.b)(a,!0,!0,1)})}const i={charts:[{data:n,name:"previousCost",show:!0,style:W.previousCostData},{data:a,name:"previousInfrastructureCost",show:!0,style:W.previousInfrastructureCostData}],legend:{colorScale:W.previousColorScale,data:r,onClick:this.handlePreviousLegendClick,title:s}},o=[];if(t){const[e]=Object(V.d)(t,"chart.cost_legend_label");o.push({name:e,symbol:{type:"minus"},tooltip:Object(V.b)(t,!0,!1)})}if(e){const[t]=Object(V.d)(e,"chart.cost_infrastructure_legend_label");o.push({name:t,symbol:{type:"dash"},tooltip:Object(V.b)(e,!0,!1)})}const l={charts:[{data:t,name:"currentCost",show:!0,style:W.currentCostData},{data:e,name:"currentInfrastructureCost",show:!0,style:W.currentInfrastructureCostData}],legend:{colorScale:W.currentColorScale,data:o,gutter:55,onClick:this.handleCurrentLegendClick,title:s}};this.setState({datum:{previous:i,current:l}})}),this.handleCurrentLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.current.charts.length&&(a.current.charts[e.index].show=!a.current.charts[e.index].show,this.setState({datum:a}))}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.handlePreviousLegendClick=(e=>{const{datum:t}=this.state,a=Object.assign({},t);e.index>=0&&a.previous.charts.length&&(a.previous.charts[e.index].show=!a.previous.charts[e.index].show,this.setState({datum:a}))}),this.getChart=((e,t)=>e.data&&e.data.length&&e.show?d.a.createElement(R.a,{data:e.data,name:e.name,key:`usage-chart-${e.name}-${t}`,style:e.style}):null),this.getLegend=((e,t)=>{if(e&&e.data&&e.data.length){const t={onClick:()=>[{target:"data",mutation:t=>(e.onClick(t),null)}]};return d.a.createElement(L.a,{colorScale:e.colorScale,data:e.data,events:[{target:"data",eventHandlers:t},{target:"labels",eventHandlers:t}],height:25,itemsPerRow:1,labelComponent:d.a.createElement(I.a,{content:this.getLegendTooltip}),responsive:!1,style:W.legend})}return null}),this.getLegendTooltip=(e=>e.tooltip?e.tooltip:""),this.getTooltipLabel=(e=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,n=Object(V.f)(e,Object(V.e)(t),a,"date");return"currentCost"===e.childName||"previousCost"===e.childName?U.a.t("chart.cost_tooltip",{value:n}):"currentInfrastructureCost"===e.childName||"previousInfrastructureCost"===e.childName?U.a.t("chart.cost_infrastructure_tooltip",{value:n}):n})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:n}=this.props,s={x:[1,31]},r=e?Object(V.c)(e):0,i=t?Object(V.c)(t):0,o=a?Object(V.c)(a):0,l=n?Object(V.c)(n):0,c=Math.max(r,i,o,l),u=c>0?Math.ceil(c+.1*c):0;return u>0&&(s.y=[0,u]),s}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:n}=this.props,s=e?P()(Object(V.a)(e,!0,!0)[1]):0,r=t?P()(Object(V.a)(t,!0,!0)[1]):0,i=a?P()(Object(V.a)(a,!0,!0)[1]):0,o=n?P()(Object(V.a)(n,!0,!0)[1]):0;return s>0||r>0||i>0||o>0?Math.max(s,r,i,o):31}isCurrentLegendVisible(){const{datum:e}=this.state;let t=!1;return e&&e.current.legend&&e.current.legend.data&&e.current.legend.data.forEach(e=>{e.name&&""!==e.name.trim()&&(t=!0)}),t}isPreviousLegendVisible(){const{datum:e}=this.state;let t=!1;return e&&e.previous.legend&&e.previous.legend.data&&e.previous.legend.data.forEach(e=>{e.name&&""!==e.name.trim()&&(t=!0)}),t}render(){const{height:e}=this.props,{datum:t,width:a}=this.state,n=d.a.createElement(B.a,{labels:this.getTooltipLabel,voronoiDimension:"x"}),s=W.legend.minWidth>a/2?W.legend.minWidth:a/2,r=this.getDomain(),i=this.getEndDate(),o=Math.floor(i/2);return d.a.createElement("div",{className:Object(c.b)($.chartContainer),ref:this.containerRef},d.a.createElement(K.a,{containerComponent:n,domain:r,height:e,theme:F.a,width:a},Boolean(t&&t.previous)&&t.previous.charts.map((e,t)=>this.getChart(e,t)),Boolean(t&&t.current)&&t.current.charts.map((e,t)=>this.getChart(e,t)),d.a.createElement(N.a,{style:W.xAxis,tickValues:[1,o,i]}),d.a.createElement(N.a,{dependentAxis:!0,style:W.yAxis})),Boolean(this.isPreviousLegendVisible())&&d.a.createElement("div",{className:Object(c.b)($.legendTitle)},t.previous.legend.title),Boolean(this.isCurrentLegendVisible()&&!this.isPreviousLegendVisible())&&d.a.createElement("div",{className:Object(c.b)($.legendTitle)},t.current.legend.title),Boolean(this.isPreviousLegendVisible())&&d.a.createElement("div",{className:Object(c.b)($.legend)},this.getLegend(t.previous.legend,s)),Boolean(this.isCurrentLegendVisible())&&d.a.createElement("div",{className:Object(c.b)($.legend)},this.getLegend(t.current.legend,s)))}}const M=c.a.create({chart:{marginBottom:b.E.value}}),H=e=>d.a.createElement("div",{className:Object(c.b)(M.chart)},d.a.createElement(A,Object.assign({},e)));var Q=a(651);const G=e=>d.a.createElement("div",{className:Object(c.b)(M.chart)},d.a.createElement(Q.a,Object.assign({},e)));a.d(t,"a",function(){return g}),a.d(t,"b",function(){return E}),a.d(t,"c",function(){return k}),a.d(t,"d",function(){return _}),a.d(t,"e",function(){return z}),a.d(t,"f",function(){return H}),a.d(t,"g",function(){return G})},865:function(e,t,a){"use strict";var n=a(898),s=a(847),r=a(11),i=a(842),o=a(774),l=a(776),c=a(890),u=a(860),m=a(904),d=a(86),p=a(471),b=a(474),h=a(514),g=a(818),v=a(819),f=a(1),y=a.n(f),E=a(81),O=a(68),D=a(88),k=a(43),j=a(84),S=a(300),T=a(787),C=a(382),_=a.n(C),w=a(305),x=a.n(w),z=a(808),N=a.n(z),L=a(465),R=a.n(L),B=a(464),K=a.n(B),I=a(840),F=a(39),V=a(277),q=a(256);const P=m.a.create({tabs:{marginTop:q.F.value},tabItems:{marginTop:q.F.value}}),U=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}};const W=Object(k.a)((e,{widgetId:t})=>{const a=D.c.selectWidget(e,t),n=D.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:n.current,previousQuery:n.previous,tabsQuery:n.tabs,currentReport:F.c.selectReport(e,a.reportType,n.current),currentReportFetchStatus:F.c.selectReportFetchStatus(e,a.reportType,n.current),previousReport:F.c.selectReport(e,a.reportType,n.previous),tabsReport:F.c.selectReport(e,a.reportType,n.tabs)})}),$={fetchReports:D.a.fetchWidgetReports,updateTab:D.a.changeWidgetTab},A=Object(E.d)()(Object(O.b)(W,$)(class extends y.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=U(e);return`/aws?${Object(j.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=(e=>{const{currentReport:t,previousReport:a,t:n,trend:s}=this.props,r=Object(S.g)(t,s.type),i=Object(S.g)(a,s.type),o=this.getUnits();return y.a.createElement(T.f,{currentData:r,formatDatumValue:V.b,formatDatumOptions:s.formatOptions,height:e,previousData:i,title:n(s.titleKey,{units:n(`units.${o}`)})})}),this.getDetails=(()=>{const{currentReport:e,details:t,reportType:a}=this.props,n=this.getUnits();return y.a.createElement(T.c,{costLabel:this.getDetailsLabel(t.costKey,n),formatOptions:t.formatOptions,formatValue:V.b,report:e,reportType:a,showUnits:t.showUnits,usageLabel:this.getDetailsLabel(t.usageKey,n)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&y.a.createElement(I.a,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:U(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return y.a.createElement(T.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),subTitleTooltip:this.getSubTitleTooltip(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(180))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date;return e("aws_dashboard.widget_subtitle",{month:N()(t)})}),this.getSubTitleTooltip=(()=>{const{t:e}=this.props,t=new Date,a=N()(t),n=_()(t,"DD"),s=_()(K()(t),"DD"),r=R()(t);return e("aws_dashboard.widget_subtitle_tooltip",{count:x()(t),endDate:n,month:a,startDate:s,year:r})}),this.getTab=((e,t)=>{const{tabsReport:a}=this.props,n=U(e);return y.a.createElement(l.a,{eventKey:t,key:`${U(e)}-tab`,title:this.getTabTitle(e)},y.a.createElement("div",{className:Object(m.b)(P.tabItems)},y.a.createElement(T.e,{idKey:n,key:`${n}-items`,report:a},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,reportType:n,tabsReport:s,topItems:r}=this.props,{activeTabKey:i}=this.state,o=U(e),l=U(a[i]),c="cost"===n||"database"===n||"network"===n;return l===o?y.a.createElement(T.d,{key:`${t.id}-item`,formatOptions:r.formatOptions,formatValue:V.b,label:t.label?t.label.toString():"",totalValue:c?s.meta.total.cost.value:s.meta.total.usage.value,units:t.units,value:t.cost}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return y.a.createElement(i.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:U(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,n=N()(a);return e(t,{endDate:_()(a,"Do"),month:n,startDate:_()(K()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,reportType:t}=this.props;let a="";return e&&e.meta&&e.meta.total&&(a="cost"===t||"database"===t||"network"===t?e.meta.total.cost?Object(V.c)(e.meta.total.cost.units):"":e.meta.total.usage?Object(V.c)(e.meta.total.usage.units):""),a}),this.getVerticalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return y.a.createElement(T.a,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),subTitleTooltip:this.getSubTitleTooltip(),title:this.getTitle()},this.getDetails(),this.getChart(75),y.a.createElement("div",{className:Object(m.b)(P.tabs)},this.getTabs()))}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"aws",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:n,updateTab:s}=this.props;s(n,a[t]),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,updateTab:n,widgetId:s}=this.props;n(a,e[0]),t(s)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),M=Object(k.a)(e=>({selectWidgets:D.c.selectWidgets(e),widgets:D.c.selectCurrentWidgets(e)}));var H=Object(E.d)()(Object(O.b)(M,{})(({selectWidgets:e,t:t,widgets:a})=>y.a.createElement("div",null,y.a.createElement(v.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?y.a.createElement(g.a,{sm:12,key:t},y.a.createElement(A,{widgetId:t})):y.a.createElement(g.a,{xl:4,lg:6,key:t},y.a.createElement(A,{widgetId:t}))}))))),Q=a(89),G=a(85),Y=a(789),J=a(38);const X=m.a.create({tabs:{marginTop:q.F.value},tabItems:{marginTop:q.F.value}}),Z=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}};const ee=Object(k.a)((e,{widgetId:t})=>{const a=Q.c.selectWidget(e,t),n=Q.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:n.current,previousQuery:n.previous,tabsQuery:n.tabs,currentReport:J.c.selectReport(e,a.reportType,n.current),currentReportFetchStatus:J.c.selectReportFetchStatus(e,a.reportType,n.current),previousReport:J.c.selectReport(e,a.reportType,n.previous),tabsReport:J.c.selectReport(e,a.reportType,n.tabs)})}),te={fetchReports:Q.a.fetchWidgetReports,updateTab:Q.a.changeWidgetTab},ae=Object(E.d)()(Object(O.b)(ee,te)(class extends y.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=Z(e);return`/ocp?${Object(G.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=(e=>{const{currentReport:t,previousReport:a,reportType:n,t:s,trend:r}=this.props,i="cost"===n?"cost":"usage",o=Object(S.i)(t,r.type,"date",i),l=Object(S.i)(a,r.type,"date",i),c="cost"!==n?Object(S.i)(t,r.type,"date","request"):void 0,u="cost"!==n?Object(S.i)(a,r.type,"date","request"):void 0,m="cost"===n?Object(S.i)(t,r.type,"date","infrastructureCost"):void 0,d="cost"===n?Object(S.i)(a,r.type,"date","infrastructureCost"):void 0,p=this.getUnits(),b=s(r.titleKey,{units:s(`units.${p}`)});return y.a.createElement(y.a.Fragment,null,Boolean("cost"===n)?y.a.createElement(Y.f,{currentCostData:o,currentInfrastructureCostData:m,formatDatumValue:V.b,formatDatumOptions:r.formatOptions,height:e,previousCostData:l,previousInfrastructureCostData:d,title:b}):y.a.createElement(Y.g,{currentRequestData:c,currentUsageData:o,formatDatumValue:V.b,formatDatumOptions:r.formatOptions,height:e,previousRequestData:u,previousUsageData:l,title:b}))}),this.getDetails=(()=>{const{currentReport:e,details:t,reportType:a}=this.props,n=this.getUnits();return y.a.createElement(Y.c,{formatOptions:t.formatOptions,formatValue:V.b,report:e,reportType:a,requestLabel:this.getDetailsLabel(t.requestKey,n),usageLabel:this.getDetailsLabel(t.usageKey,n)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&y.a.createElement(I.a,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:Z(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return y.a.createElement(Y.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),subTitleTooltip:this.getSubTitleTooltip(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(180))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date;return e("ocp_dashboard.widget_subtitle",{month:N()(t)})}),this.getSubTitleTooltip=(()=>{const{t:e}=this.props,t=new Date,a=N()(t),n=_()(t,"DD"),s=_()(K()(t),"DD"),r=R()(t);return e("ocp_dashboard.widget_subtitle_tooltip",{count:x()(t),endDate:n,month:a,startDate:s,year:r})}),this.getTab=((e,t)=>{const{tabsReport:a}=this.props,n=Z(e);return y.a.createElement(l.a,{eventKey:t,key:`${Z(e)}-tab`,title:this.getTabTitle(e)},y.a.createElement("div",{className:Object(m.b)(X.tabItems)},y.a.createElement(Y.e,{idKey:n,key:`${n}-items`,report:a},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,reportType:n,tabsReport:s,topItems:r}=this.props,{activeTabKey:i}=this.state,o=Z(e);return Z(a[i])===o?y.a.createElement(Y.d,{key:`${t.id}-item`,formatOptions:r.formatOptions,formatValue:V.b,label:t.label?t.label.toString():"",totalValue:"cost"===n?s.meta.total.cost.value:s.meta.total.usage.value,units:t.units,value:"cost"===n?t.cost:t.usage}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return y.a.createElement(i.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:Z(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,n=N()(a);return e(t,{endDate:_()(a,"Do"),month:n,startDate:_()(K()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,reportType:t}=this.props;let a="";return e&&e.meta&&e.meta.total&&(a="cost"===t?e.meta.total.cost?Object(V.c)(e.meta.total.cost.units):"":e.meta.total.usage?Object(V.c)(e.meta.total.usage.units):""),a}),this.getVerticalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return y.a.createElement(Y.a,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),subTitleTooltip:this.getSubTitleTooltip(),title:this.getTitle()},this.getDetails(),this.getChart(75),y.a.createElement("div",{className:Object(m.b)(X.tabs)},this.getTabs()))}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"ocp",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:n}=this.props,s=a[t];this.props.updateTab(n,s),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,widgetId:n}=this.props;this.props.updateTab(a,e[0]),t(n)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),ne=Object(k.a)(e=>({selectWidgets:Q.c.selectWidgets(e),widgets:Q.c.selectCurrentWidgets(e)}));var se=Object(E.d)()(Object(O.b)(ne,{})(({selectWidgets:e,t:t,widgets:a})=>y.a.createElement("div",null,y.a.createElement(v.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?y.a.createElement(g.a,{sm:12,key:t},y.a.createElement(ae,{widgetId:t})):y.a.createElement(g.a,{xl:4,lg:6,key:t},y.a.createElement(ae,{widgetId:t}))}))))),re=a(60),ie=a(82),oe=a(788),le=a(40);const ce=m.a.create({tabItems:{marginTop:q.F.value}}),ue=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}};const me=Object(k.a)((e,{widgetId:t})=>{const a=re.c.selectWidget(e,t),n=re.c.selectWidgetQueries(e,t);return Object.assign({},a,{currentQuery:n.current,previousQuery:n.previous,tabsQuery:n.tabs,currentReport:le.c.selectReport(e,a.reportType,n.current),currentReportFetchStatus:le.c.selectReportFetchStatus(e,a.reportType,n.current),previousReport:le.c.selectReport(e,a.reportType,n.previous),tabsReport:le.c.selectReport(e,a.reportType,n.tabs)})}),de={fetchReports:re.a.fetchWidgetReports,updateTab:re.a.changeWidgetTab},pe=Object(E.d)()(Object(O.b)(me,de)(class extends y.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const t=ue(e);return`/ocp-on-aws?${Object(ie.a)({group_by:{[t]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=(e=>{const{currentReport:t,previousReport:a,reportType:n,t:s,trend:r}=this.props,i="cost"===n||"database"===n||"network"===n?"infrastructureCost":"usage",o=Object(S.h)(t,r.type,"date",i),l=Object(S.h)(a,r.type,"date",i),c="cost"!==n?Object(S.h)(t,r.type,"date","request"):void 0,u="cost"!==n?Object(S.h)(a,r.type,"date","request"):void 0,m=this.getUnits();return y.a.createElement(y.a.Fragment,null,Boolean("cost"===n||"database"===n||"instance_type"===n||"network"===n||"storage"===n)?y.a.createElement(oe.f,{currentData:o,formatDatumValue:V.b,formatDatumOptions:r.formatOptions,height:e,previousData:l,title:s(r.titleKey,{units:s(`units.${m}`)})}):y.a.createElement(oe.g,{currentRequestData:c,currentUsageData:o,formatDatumValue:V.b,formatDatumOptions:r.formatOptions,height:e,previousRequestData:u,previousUsageData:l,title:s(r.titleKey,{units:s(`units.${m}`)})}))}),this.getDetails=(()=>{const{currentReport:e,details:t,reportType:a}=this.props,n=this.getUnits();return y.a.createElement(oe.c,{costLabel:this.getDetailsLabel(t.costKey,n),formatOptions:t.formatOptions,formatValue:V.b,report:e,reportType:a,requestLabel:this.getDetailsLabel(t.requestKey,n),showUnits:t.showUnits,usageLabel:this.getDetailsLabel(t.usageKey,n)})}),this.getDetailsLabel=((e,t)=>{const{t:a}=this.props;return e?a(e,{units:a(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,isDetailsLink:t}=this.props;return t&&y.a.createElement(I.a,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e))}),this.getDetailsLinkTitle=(e=>{const{t:t}=this.props;return t("group_by.all",{groupBy:ue(e)||""})}),this.getHorizontalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return y.a.createElement(oe.b,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),subTitleTooltip:this.getSubTitleTooltip(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(180))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date;return e("ocp_on_aws_dashboard.widget_subtitle",{month:N()(t)})}),this.getSubTitleTooltip=(()=>{const{t:e}=this.props,t=new Date,a=N()(t),n=_()(t,"DD"),s=_()(K()(t),"DD"),r=R()(t);return e("ocp_on_aws_dashboard.widget_subtitle_tooltip",{count:x()(t),endDate:n,month:a,startDate:s,year:r})}),this.getTab=((e,t)=>{const{tabsReport:a}=this.props,n=ue(e);return y.a.createElement(l.a,{eventKey:t,key:`${ue(e)}-tab`,title:this.getTabTitle(e)},y.a.createElement("div",{className:Object(m.b)(ce.tabItems)},y.a.createElement(oe.e,{idKey:n,key:`${n}-items`,report:a},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:a,reportType:n,tabsReport:s,topItems:r}=this.props,{activeTabKey:i}=this.state,o=ue(e),l=ue(a[i]),c="cost"===n||"database"===n||"network"===n;return l===o?y.a.createElement(oe.d,{key:`${t.id}-item`,formatOptions:r.formatOptions,formatValue:V.b,label:t.label?t.label.toString():"",totalValue:c?s.meta.total.infrastructure_cost.value:s.meta.total.usage.value,units:t.units,value:c?t.infrastructureCost:t.usage}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return e?y.a.createElement(i.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t))):null}),this.getTabTitle=(e=>{const{t:t}=this.props;return t("group_by.top",{groupBy:ue(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,a=new Date,n=N()(a);return e(t,{endDate:_()(a,"Do"),month:n,startDate:_()(K()(a),"Do")})}),this.getUnits=(()=>{const{currentReport:e,reportType:t}=this.props;let a="";return e&&e.meta&&e.meta.total&&(a="cost"===t||"database"===t||"network"===t?e.meta.total.infrastructure_cost?Object(V.c)(e.meta.total.infrastructure_cost.units):"":e.meta.total.usage?Object(V.c)(e.meta.total.usage.units):""),a}),this.getVerticalLayout=(()=>{const{currentReportFetchStatus:e}=this.props;return y.a.createElement(oe.a,{detailsLink:this.getDetailsLink(),status:e,subTitle:this.getSubTitle(),subTitleTooltip:this.getSubTitleTooltip(),title:this.getTitle()},this.getDetails(),this.getChart(75),this.getTabs())}),this.handleInsightsNavClick=(()=>{insights.chrome.appNavClick({id:"ocp-on-aws",secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:a,id:n,updateTab:s}=this.props;s(n,a[t]),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:a,updateTab:n,widgetId:s}=this.props;e&&n(a,e[0]),t(s)}render(){const{isHorizontal:e=!1}=this.props;return Boolean(e)?this.getHorizontalLayout():this.getVerticalLayout()}})),be=Object(k.a)(e=>({selectWidgets:re.c.selectWidgets(e),widgets:re.c.selectCurrentWidgets(e)}));var he=Object(E.d)()(Object(O.b)(be,{})(({selectWidgets:e,t:t,widgets:a})=>y.a.createElement("div",null,y.a.createElement(v.a,{gutter:"md"},a.map(t=>{const a=e[t];return Boolean(a.isHorizontal)?y.a.createElement(g.a,{sm:12,key:t},y.a.createElement(pe,{widgetId:t})):y.a.createElement(g.a,{xl:4,lg:6,key:t},y.a.createElement(pe,{widgetId:t}))}))))),ge=a(83),ve=a(23),fe=a(297),ye=a(310);const Ee=m.a.create({info:{marginLeft:q.E.value,verticalAlign:"middle"},infoIcon:{fontSize:q.o.value},infoTitle:{fontWeight:"bold"},tabs:{marginTop:q.C.value}}),Oe=ye["a"]`
  &.pf-c-page__main-section {
    --pf-c-page__main-section--PaddingBottom: 0;
  }
`,De=e=>{switch(e){case"aws":return"aws";case"ocp":return"ocp";case"ocpOnAws":return"ocpOnAws"}};const ke=Object(k.a)(e=>{const t=Object(d.a)(ve.a),a=ve.e.selectProviders(e,"aws",t),n=ve.e.selectProvidersError(e,"aws",t),s=ve.e.selectProvidersFetchStatus(e,"aws",t),r=Object(d.a)(ve.b);return{awsProviders:a,awsProvidersError:n,awsProvidersFetchStatus:s,awsProvidersQueryString:t,ocpProviders:ve.e.selectProviders(e,"ocp",r),ocpProvidersError:ve.e.selectProvidersError(e,"ocp",r),ocpProvidersFetchStatus:ve.e.selectProvidersFetchStatus(e,"ocp",r),ocpProvidersQueryString:r}}),je=Object(E.d)()(Object(O.b)(ke,{openProvidersModal:ge.a.openModal})(class extends y.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0,showPopover:!1},this.getAddSourceButton=(()=>{const{t:e}=this.props;return y.a.createElement(I.a,{to:"/sources"},y.a.createElement(c.a,Object.assign({},Object(fe.a)(fe.b.providers.add_btn),{type:c.b.submit,variant:c.c.secondary}),e("providers.add_source")))}),this.getAvailableTabs=(()=>{const{awsProviders:e,ocpProviders:t}=this.props,a=[];return e&&e.meta&&e.meta.count&&t&&t.meta&&t.meta.count&&a.push({contentRef:y.a.createRef(),tab:"ocpOnAws"}),t&&t.meta&&t.meta.count&&a.push({contentRef:y.a.createRef(),tab:"ocp"}),e&&e.meta&&e.meta.count&&a.push({contentRef:y.a.createRef(),tab:"aws"}),a}),this.getTab=((e,t,a)=>y.a.createElement(l.a,{eventKey:a,key:`${De(e)}-tab`,tabContentId:`tab-${a}`,tabContentRef:t,title:this.getTabTitle(e)})),this.getTabContent=(e=>e.map((e,t)=>y.a.createElement(o.a,{eventKey:t,key:`${De(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=((e,t)=>{const{activeTabKey:a}=this.state,n=De(e);return"ocpOnAws"===n?a===t?y.a.createElement(he,null):null:"ocp"===n?a===t?y.a.createElement(se,null):null:"aws"===n&&a===t?y.a.createElement(H,null):null}),this.getTabs=(e=>{const{activeTabKey:t}=this.state;return y.a.createElement(i.a,{activeKey:t,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e.tab,e.contentRef,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return"aws"===e?t("overview.aws"):"ocp"===e?t("overview.ocp"):"ocpOnAws"===e?t("overview.ocp_on_aws"):void 0}),this.handlePopoverClick=(()=>{this.setState({show:!this.state.showPopover})}),this.handleTabClick=((e,t)=>{this.setState({activeTabKey:t})})}render(){const{awsProviders:e,awsProvidersError:t,awsProvidersFetchStatus:a,ocpProviders:i,ocpProvidersError:o,ocpProvidersFetchStatus:l,t:c}=this.props,d=this.getAvailableTabs(),g=t||o,v=1===a||1===l,f=void 0!==e&&void 0!==e.meta&&0===e.meta.count&&2===a,E=void 0!==i&&void 0!==i.meta&&0===i.meta.count&&2===l,O=f&&E,D=!(g||O||v);return y.a.createElement(y.a.Fragment,null,y.a.createElement("section",{className:`pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light ${D?Oe:""}`},y.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},y.a.createElement(n.a,{size:r.a["2xl"]},c("overview.title"),Boolean(D)&&y.a.createElement("span",{className:Object(m.b)(Ee.infoIcon)},y.a.createElement(s.a,{"aria-label":"t('ocp_details.derived_aria_label')",enableFlip:!0,bodyContent:y.a.createElement(y.a.Fragment,null,y.a.createElement("p",{className:Object(m.b)(Ee.infoTitle)},c("overview.ocp_on_aws")),y.a.createElement("p",null,c("overview.ocp_on_aws_desc")),y.a.createElement("p",{className:Object(m.b)(Ee.infoTitle)},c("overview.ocp")),y.a.createElement("p",null,c("overview.ocp_desc")),y.a.createElement("p",{className:Object(m.b)(Ee.infoTitle)},c("overview.aws")),y.a.createElement("p",null,c("overview.aws_desc")))},y.a.createElement(u.a,{className:Object(m.b)(Ee.info),onClick:this.handlePopoverClick})))),this.getAddSourceButton()),Boolean(D)&&y.a.createElement("div",{className:Object(m.b)(Ee.tabs)},this.getTabs(d))),y.a.createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},Boolean(g)?y.a.createElement(p.a,{error:g}):Boolean(O)?y.a.createElement(h.a,null):Boolean(v)?y.a.createElement(b.a,null):this.getTabContent(d)))}}));t.a=je},894:function(e,t,a){"use strict";a.r(t),function(e){var n=a(102),s=a(865);t.default=Object(n.hot)(e)(s.a)}.call(this,a(101)(e))}}]);
//# sourceMappingURL=4812cf57a0f20a46b6a2.bundle.js.map