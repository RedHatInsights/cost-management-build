(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{953:function(e,t,r){"use strict";r.r(t);var s=r(1005),a=r(939),c=r(768),o=r(1034),i=r(923),n=r(908),p=r(986),l=r(137),u=r(580),h=r(584),d=r(614),b=r(998),g=r(997),v=r(1),y=r.n(v);const m=({DashboardWidget:e,selectWidgets:t,widgets:r})=>y.a.createElement("div",null,y.a.createElement(b.a,{gutter:"md"},r.map(r=>{const s=t[r];return Boolean(s.details.showHorizontal)?y.a.createElement(g.a,{sm:12,key:r},y.a.createElement(e,{widgetId:r})):y.a.createElement(g.a,{lg:12,xl:6,xl2:4,key:r},y.a.createElement(e,{widgetId:r}))})));var T=r(165),f=r(121),R=r(136),O=r(174),w=r(108),P=r(570),j=r(594),_=r(582),E=r.n(_),S=r(573),C=r.n(S),I=r(640),F=r.n(I),W=r(609),D=r.n(W),A=r(0),k=r.n(A),K=r(64),Q=r.n(K),z=r(208),L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e};function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var U=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},x=function(e){function t(){var r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=Array(a),o=0;o<a;o++)c[o]=arguments[o];return r=s=H(this,e.call.apply(e,[this].concat(c))),s.handleClick=function(e){if(s.props.onClick&&s.props.onClick(e),!e.defaultPrevented&&0===e.button&&!s.props.target&&!U(e)){e.preventDefault();var t=s.context.router.history,r=s.props,a=r.replace,c=r.to;a?t.replace(c):t.push(c)}},H(s,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),r=e.innerRef,s=function(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}(e,["replace","to","innerRef"]);Q()(this.context.router,"You should not use <Link> outside a <Router>"),Q()(void 0!==t,'You must specify the "to" property');var a=this.context.router.history,c="string"==typeof t?Object(z.b)(t,null,null,a.location):t,o=a.createHref(c);return y.a.createElement("a",L({},s,{onClick:this.handleClick,href:o,ref:r}))},t}(y.a.Component);x.propTypes={onClick:k.a.func,target:k.a.string,replace:k.a.bool,to:k.a.oneOfType([k.a.string,k.a.object]).isRequired,innerRef:k.a.oneOfType([k.a.string,k.a.func])},x.defaultProps={replace:!1},x.contextTypes={router:k.a.shape({history:k.a.shape({push:k.a.func.isRequired,replace:k.a.func.isRequired,createHref:k.a.func.isRequired}).isRequired}).isRequired};var V=x,$=r(567),q=r(135);const B={chartAltHeight:180,chartHeight:80,containerAltHeight:200,containerTrendHeight:150,containerUsageHeight:180},N={tabs:{marginTop:q.global_spacer_2xl.value},tabItems:{marginTop:q.global_spacer_xl.value}};class J extends y.a.Component{constructor(){super(...arguments),this.state={activeTabKey:0},this.buildDetailsLink=(e=>{const{details:t,getIdKeyForTab:r}=this.props,s=r(e);return`${t.viewAllPath}?${Object(w.a)({group_by:{[s]:"*"},order_by:{cost:"desc"}})}`}),this.getChart=((e,t,r=!1)=>{const{chartType:s}=this.props;return"cost"===s?this.getCostChart(e,t,r):"supplementary"===s?this.getTrendChart(e,t,r,!0):"trend"===s?this.getTrendChart(e,t,r):"usage"===s?this.getUsageChart(t):null}),this.getCostChart=((e,t,r=!1)=>{const{currentReport:s,previousReport:a,t:c,trend:o}=this.props,i=this.getUnits(),n=c(o.titleKey,{units:c(`units.${i}`)}),p=o.computedReportItem||"cost",l=o.computedReportItemValue||"total",u=Object(P.g)(s,o.type,"date","infrastructure",l),h=Object(P.g)(a,o.type,"date","infrastructure",l),d=Object(P.g)(s,o.type,"date",p,l),b=Object(P.g)(a,o.type,"date",p,l);return y.a.createElement(j.c,{adjustContainerHeight:r,containerHeight:e,currentCostData:d,currentInfrastructureCostData:u,formatDatumValue:$.b,formatDatumOptions:o.formatOptions,height:t,previousCostData:b,previousInfrastructureCostData:h,title:n})}),this.getTrendChart=((e,t,r=!1,s=!1)=>{const{currentReport:a,details:c,previousReport:o,t:i,trend:n}=this.props,p=this.getUnits(),l=i(n.titleKey,{units:i(`units.${p}`)}),u=n.computedReportItem||"cost",h=n.computedReportItemValue||"total",d=Object(P.g)(a,n.type,"date",u,h),b=Object(P.g)(o,n.type,"date",u,h);return y.a.createElement(j.g,{adjustContainerHeight:r,containerHeight:e,currentData:d,formatDatumValue:$.b,formatDatumOptions:n.formatOptions,height:t,previousData:b,showSupplementaryLabel:s,showUsageLegendLabel:c.showUsageLegendLabel,title:l,units:p})}),this.getUsageChart=(e=>{const{currentReport:t,previousReport:r,t:s,trend:a}=this.props,c=this.getUnits(),o=s(a.titleKey,{units:s(`units.${c}`)}),i=Object(P.g)(t,a.type,"date","request"),n=Object(P.g)(r,a.type,"date","request"),p=Object(P.g)(t,a.type,"date","usage"),l=Object(P.g)(r,a.type,"date","usage");return y.a.createElement(j.h,{containerHeight:B.containerUsageHeight,currentRequestData:i,currentUsageData:p,formatDatumValue:$.b,formatDatumOptions:a.formatOptions,height:e,previousRequestData:n,previousUsageData:l,title:o})}),this.getDetails=(()=>{const{chartType:e,currentReport:t,details:r,trend:s}=this.props,a=s.computedReportItem||"cost",c=s.computedReportItemValue||"total",o=this.getUnits();return y.a.createElement(j.d,{chartType:e,computedReportItem:a,computedReportItemValue:c,costLabel:this.getDetailsLabel(r.costKey,o),formatOptions:r.formatOptions,formatValue:$.b,report:t,requestLabel:this.getDetailsLabel(r.requestKey,o),showTooltip:r.showTooltip,showUnits:r.showUnits,showUsageFirst:r.showUsageFirst,units:r.units,usageFormatOptions:r.usageFormatOptions,usageLabel:this.getDetailsLabel(r.usageKey,o)})}),this.getDetailsLabel=((e,t)=>{const{t:r}=this.props;return e?r(e,{units:r(`units.${t}`)}):void 0}),this.getDetailsLink=(()=>{const{currentTab:e,details:t}=this.props;return t.viewAllPath?y.a.createElement(V,{to:this.buildDetailsLink(e),onClick:this.handleInsightsNavClick},this.getDetailsLinkTitle(e)):null}),this.getDetailsLinkTitle=(e=>{const{getIdKeyForTab:t,t:r}=this.props;return r("group_by.all",{groupBy:t(e)||""})}),this.getHorizontalLayout=(()=>{const{containerAltHeight:e=B.containerAltHeight,chartAltHeight:t=B.chartAltHeight,currentReportFetchStatus:r}=this.props;return y.a.createElement(j.b,{detailsLink:this.getDetailsLink(),status:r,subTitle:this.getSubTitle(),tabs:this.getTabs(),title:this.getTitle()},this.getDetails(),this.getChart(e,t,!0))}),this.getSubTitle=(()=>{const{t:e}=this.props,t=new Date,r=F()(t),s=E()(t,"D"),a=E()(D()(t),"D");return e("aws_dashboard.widget_subtitle",{count:C()(t),endDate:s,month:r,startDate:a})}),this.getTab=((e,t)=>{const{getIdKeyForTab:r,tabsReport:a,tabsReportFetchStatus:c,trend:o}=this.props,i=r(e),n=o.computedReportItemValue||"total";return y.a.createElement(s.a,{eventKey:t,key:`${r(e)}-tab`,title:this.getTabTitle(e)},y.a.createElement("div",{style:N.tabItems},y.a.createElement(j.f,{computedReportItemValue:n,idKey:i,key:`${i}-items`,report:a,status:c},({items:t})=>t.map(t=>this.getTabItem(e,t)))))}),this.getTabItem=((e,t)=>{const{availableTabs:r,details:s,getIdKeyForTab:a,tabsReport:c,topItems:o,trend:i}=this.props,{activeTabKey:n}=this.state,p=a(e),l=a(r[n]),u=i.computedReportItem||"cost",h=i.computedReportItemValue||"total";let d;const b=c&&c.meta&&c.meta.total;return"usage"===u?b&&c.meta.total.usage&&(d=c.meta.total.usage.value):b&&c.meta.total[u]&&c.meta.total[u][h]&&(d=c.meta.total[u][h].value),l===p?y.a.createElement(j.e,{key:`${t.id}-item`,formatOptions:o.formatOptions,formatValue:$.b,label:t.label?t.label.toString():"",totalValue:d,units:s.units?s.units:this.getUnits(),value:t[u]}):null}),this.getTabs=(()=>{const{availableTabs:e}=this.props;return y.a.createElement(i.a,{isFilled:!0,activeKey:this.state.activeTabKey,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e,t)))}),this.getTabTitle=(e=>{const{getIdKeyForTab:t,t:r}=this.props;return r("group_by.top",{groupBy:t(e)||""})}),this.getTitle=(()=>{const{t:e,titleKey:t}=this.props,r=new Date,s=F()(r);return e(t,{endDate:E()(r,"Do"),month:s,startDate:E()(D()(r),"Do")})}),this.getUnits=(()=>{const{currentReport:e,details:t,trend:r}=this.props,s=r.computedReportItem||"cost",a=r.computedReportItemValue||"total";if(t.units)return t.units;let c;const o=e&&e.meta&&e.meta.total;if("usage"===s){c=o&&e.meta.total.usage?Object($.c)(e.meta.total.usage.units):""}else{c=o&&e.meta.total[s]&&e.meta.total[s][a]?Object($.c)(e.meta.total[s][a].units):""}return c}),this.getVerticalLayout=(()=>{const{availableTabs:e,currentReportFetchStatus:t}=this.props;return y.a.createElement(j.a,{detailsLink:this.getDetailsLink(),status:t,subTitle:this.getSubTitle(),title:this.getTitle()},this.getDetails(),this.getChart(B.containerTrendHeight,B.chartHeight),Boolean(e)&&y.a.createElement("div",{style:N.tabs},this.getTabs()))}),this.handleInsightsNavClick=(()=>{const{details:e}=this.props;e.appNavId&&insights.chrome.appNavClick({id:e.appNavId,secondaryNav:!0})}),this.handleTabClick=((e,t)=>{const{availableTabs:r,id:s,updateTab:a}=this.props;a(s,r[t]),this.setState({activeTabKey:t})})}componentDidMount(){const{availableTabs:e,fetchReports:t,id:r,updateTab:s,widgetId:a}=this.props;e&&s(r,e[0]),t(a)}render(){const{details:e}=this.props;return e.showHorizontal?this.getHorizontalLayout():this.getVerticalLayout()}}var M=r(9);const Y=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},G=Object(R.a)((e,{widgetId:t})=>{const r=O.c.selectWidget(e,t),s=O.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Y,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),X={fetchReports:O.a.fetchWidgetReports,updateTab:O.a.changeWidgetTab},Z=Object(T.d)()(Object(f.connect)(G,X)(J)),ee=Object(R.a)(e=>({DashboardWidget:Z,selectWidgets:O.c.selectWidgets(e),widgets:O.c.selectCurrentWidgets(e)}));var te=Object(T.d)()(Object(f.connect)(ee,{})(m)),re=r(173);const se=e=>{switch(e){case"services":return"service";case"accounts":return"account";case"regions":return"region";case"instance_type":return"instance_type"}},ae=Object(R.a)((e,{widgetId:t})=>{const r=re.c.selectWidget(e,t),s=re.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:se,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),ce={fetchReports:re.a.fetchWidgetReports,updateTab:re.a.changeWidgetTab},oe=Object(T.d)()(Object(f.connect)(ae,ce)(J)),ie=Object(R.a)(e=>({DashboardWidget:oe,selectWidgets:re.c.selectWidgets(e),widgets:re.c.selectCurrentWidgets(e)}));var ne=Object(T.d)()(Object(f.connect)(ie,{})(m)),pe=r(176);const le=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},ue=Object(R.a)((e,{widgetId:t})=>{const r=pe.c.selectWidget(e,t),s=pe.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:le,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),he={fetchReports:pe.a.fetchWidgetReports,updateTab:pe.a.changeWidgetTab},de=Object(T.d)()(Object(f.connect)(ue,he)(J)),be=Object(R.a)(e=>({DashboardWidget:de,selectWidgets:pe.c.selectWidgets(e),widgets:pe.c.selectCurrentWidgets(e)}));var ge=Object(T.d)()(Object(f.connect)(be,{})(m)),ve=r(178);const ye=e=>{switch(e){case"service_names":return"service_name";case"subscription_guids":return"subscription_guid";case"resource_locations":return"resource_location";case"instance_type":return"instance_type"}},me=Object(R.a)((e,{widgetId:t})=>{const r=ve.c.selectWidget(e,t),s=ve.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:ye,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),Te={fetchReports:ve.a.fetchWidgetReports,updateTab:ve.a.changeWidgetTab},fe=Object(T.d)()(Object(f.connect)(me,Te)(J)),Re=Object(R.a)(e=>({DashboardWidget:fe,selectWidgets:ve.c.selectWidgets(e),widgets:ve.c.selectCurrentWidgets(e)}));var Oe=Object(T.d)()(Object(f.connect)(Re,{})(m)),we=r(126);const Pe=e=>{switch(e){case"accounts":return"account";case"regions":return"region";case"services":return"service"}},je=Object(R.a)((e,{widgetId:t})=>{const r=we.c.selectWidget(e,t),s=we.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Pe,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),_e={fetchReports:we.a.fetchWidgetReports,updateTab:we.a.changeWidgetTab},Ee=Object(T.d)()(Object(f.connect)(je,_e)(J)),Se=Object(R.a)(e=>({DashboardWidget:Ee,selectWidgets:we.c.selectWidgets(e),widgets:we.c.selectCurrentWidgets(e)}));var Ce=Object(T.d)()(Object(f.connect)(Se,{})(m)),Ie=r(172);const Fe=180,We=275,De=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Ae=Object(R.a)((e,{widgetId:t})=>{const r=Ie.c.selectWidget(e,t),s=Ie.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:De,chartAltHeight:Fe,containerAltHeight:We,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),ke={fetchReports:Ie.a.fetchWidgetReports,updateTab:Ie.a.changeWidgetTab},Ke=Object(T.d)()(Object(f.connect)(Ae,ke)(J)),Qe=Object(R.a)(e=>({DashboardWidget:Ke,selectWidgets:Ie.c.selectWidgets(e),widgets:Ie.c.selectCurrentWidgets(e)}));var ze=Object(T.d)()(Object(f.connect)(Qe,{})(m)),Le=r(177);const He=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Ue=Object(R.a)((e,{widgetId:t})=>{const r=Le.c.selectWidget(e,t),s=Le.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:He,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),xe={fetchReports:Le.a.fetchWidgetReports,updateTab:Le.a.changeWidgetTab},Ve=Object(T.d)()(Object(f.connect)(Ue,xe)(J)),$e=Object(R.a)(e=>({DashboardWidget:Ve,selectWidgets:Le.c.selectWidgets(e),widgets:Le.c.selectCurrentWidgets(e)}));var qe=Object(T.d)()(Object(f.connect)($e,{})(m)),Be=r(175);const Ne=e=>{switch(e){case"clusters":return"cluster";case"nodes":return"node";case"projects":return"project"}},Je=Object(R.a)((e,{widgetId:t})=>{const r=Be.c.selectWidget(e,t),s=Be.c.selectWidgetQueries(e,t);return Object.assign(Object.assign({},r),{getIdKeyForTab:Ne,currentQuery:s.current,previousQuery:s.previous,tabsQuery:s.tabs,currentReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.current),currentReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.current),previousReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.previous),tabsReport:M.c.selectReport(e,r.reportPathsType,r.reportType,s.tabs),tabsReportFetchStatus:M.c.selectReportFetchStatus(e,r.reportPathsType,r.reportType,s.tabs)})}),Me={fetchReports:Be.a.fetchWidgetReports,updateTab:Be.a.changeWidgetTab},Ye=Object(T.d)()(Object(f.connect)(Je,Me)(J)),Ge=Object(R.a)(e=>({DashboardWidget:Ye,selectWidgets:Be.c.selectWidgets(e),widgets:Be.c.selectCurrentWidgets(e)}));var Xe=Object(T.d)()(Object(f.connect)(Ge,{})(m)),Ze=r(24),et=r(569);const tt={info:{marginLeft:q.global_spacer_sm.value,verticalAlign:"middle"},infoIcon:{fontSize:q.global_FontSize_md.value},infoTitle:{fontWeight:"bold"},perspective:{marginBottom:q.global_spacer_lg.value,marginTop:q.global_spacer_lg.value},tabs:{marginTop:q.global_spacer_lg.value}},rt=et["a"]`
  &.pf-c-page__main-section {
    --pf-c-page__main-section--PaddingBottom: 0;
  }
`;var st=r(1032),at=r(1030),ct=r(915);const ot={perspectiveSelector:{display:"flex",alignItems:"center"},perspectiveLabel:{marginBottom:0,marginRight:q.global_spacer_md.var}};const it=Object(T.d)()(class extends y.a.Component{constructor(){super(...arguments),this.defaultState={isPerspectiveOpen:!1},this.state=Object.assign({},this.defaultState),this.getDropDownItems=(()=>{const{options:e,t:t}=this.props;return e.map(e=>y.a.createElement(ct.a,{component:"button",key:e.value,onClick:()=>this.handleClick(e.value)},t(e.label)))}),this.getCurrentLabel=(()=>{const{currentItem:e,options:t,t:r}=this.props;let s="";for(const a of t)if(e===a.value){s=r(a.label);break}return s}),this.handleClick=(e=>{const{onItemClicked:t}=this.props;t&&t(e)}),this.handleSelect=(e=>{this.setState({isPerspectiveOpen:!this.state.isPerspectiveOpen})}),this.handleToggle=(e=>{this.setState({isPerspectiveOpen:e})})}render(){const{t:e}=this.props,{isPerspectiveOpen:t}=this.state,r=this.getDropDownItems();return y.a.createElement("div",{style:ot.perspectiveSelector},y.a.createElement("label",{style:ot.perspectiveLabel},e("overview.perspective.label")),y.a.createElement(st.a,{onSelect:this.handleSelect,toggle:y.a.createElement(at.a,{onToggle:this.handleToggle},this.getCurrentLabel()),isOpen:t,dropdownItems:r}))}}),nt=e=>{switch(e){case"infrastructure":return"infrastructure";case"ocp":return"ocp"}},pt=[{label:"overview.perspective.all",value:"all"},{label:"overview.perspective.supplementary",value:"supplementary"}],lt=[{label:"overview.perspective.all_cloud",value:"all_cloud"}],ut=[{label:"overview.perspective.aws",value:"aws"},{label:"overview.perspective.aws_cloud",value:"aws_cloud"}],ht=[{label:"overview.perspective.azure",value:"azure"},{label:"overview.perspective.azure_cloud",value:"azure_cloud"}],dt=[{label:"overview.perspective.ocp_usage",value:"ocp_usage"}];const bt=Object(R.a)(e=>{const t=Object(l.a)(Ze.a),r=Ze.f.selectProviders(e,"aws",t),s=Ze.f.selectProvidersError(e,"aws",t),a=Ze.f.selectProvidersFetchStatus(e,"aws",t),c=Object(l.a)(Ze.b),o=Ze.f.selectProviders(e,"azure",c),i=Ze.f.selectProvidersError(e,"azure",c),n=Ze.f.selectProvidersFetchStatus(e,"azure",c),p=Object(l.a)(Ze.c);return{awsProviders:r,awsProvidersError:s,awsProvidersFetchStatus:a,awsProvidersQueryString:t,azureProviders:o,azureProvidersError:i,azureProvidersFetchStatus:n,azureProvidersQueryString:c,ocpProviders:Ze.f.selectProviders(e,"ocp",p),ocpProvidersError:Ze.f.selectProvidersError(e,"ocp",p),ocpProvidersFetchStatus:Ze.f.selectProvidersFetchStatus(e,"ocp",p),ocpProvidersQueryString:p}});var gt=Object(T.d)()(Object(f.connect)(bt)(class extends y.a.Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0,showPopover:!1},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=(()=>{const e=[],t=this.isAwsAvailable(),r=this.isAzureAvailable(),s=this.isOcpAvailable(),a=this.isOcpCloudAvailable();return s&&e.push({contentRef:y.a.createRef(),tab:"ocp"}),(t||r||a)&&e.push({contentRef:y.a.createRef(),tab:"infrastructure"}),e}),this.getCurrentTab=(()=>{const{activeTabKey:e}=this.state,t=this.isAwsAvailable(),r=this.isAzureAvailable(),s=this.isOcpAvailable(),a=this.isOcpCloudAvailable();return s&&!(t||r||a)?"ocp":!s&&(t||r||a)?"infrastructure":0===e?"ocp":"infrastructure"}),this.getDefaultInfrastructurePerspective=(()=>{const e=this.isAwsAvailable(),t=this.isAzureAvailable();return this.isOcpAvailable()?"all_cloud":e?"aws":t?"azure":void 0}),this.getDefaultOcpPerspective=(()=>{if(this.isOcpAvailable())return"all"}),this.getPerspective=(()=>{const{currentInfrastructurePerspective:e,currentOcpPerspective:t}=this.state,r=this.isAwsAvailable(),s=this.isAzureAvailable(),a=this.isOcpAvailable();if(!(r||s||a))return null;const c=[];"infrastructure"===this.getCurrentTab()?(a&&c.push(...lt),r&&c.push(...ut),s&&c.push(...ht),a&&c.push(...dt)):c.push(...pt);const o="infrastructure"===this.getCurrentTab()?e:t;return y.a.createElement(it,{currentItem:o||c[0].value,onItemClicked:this.handlePerspectiveClick,options:c})}),this.getTab=((e,t,r)=>y.a.createElement(s.a,{eventKey:r,key:`${nt(e)}-tab`,tabContentId:`tab-${r}`,tabContentRef:t,title:this.getTabTitle(e)})),this.getTabContent=(e=>e.map((e,t)=>y.a.createElement(n.a,{eventKey:t,key:`${nt(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=((e,t)=>{const{activeTabKey:r,currentInfrastructurePerspective:s,currentOcpPerspective:a}=this.state,c=y.a.createElement(y.a.Fragment,null);if(r!==t)return c;const o=nt(e);return"infrastructure"===o?"all_cloud"===s?y.a.createElement(Ce,null):"aws"===s?y.a.createElement(ne,null):"aws_cloud"===s?y.a.createElement(te,null):"azure"===s?y.a.createElement(Oe,null):"azure_cloud"===s?y.a.createElement(ge,null):"ocp_usage"===s?y.a.createElement(Xe,null):y.a.createElement(Ce,null):"ocp"===o?"all"===a?y.a.createElement(ze,null):"supplementary"===a?y.a.createElement(qe,null):y.a.createElement(ze,null):c}),this.getTabs=(e=>{const{activeTabKey:t}=this.state;return y.a.createElement(i.a,{activeKey:t,onSelect:this.handleTabClick},e.map((e,t)=>this.getTab(e.tab,e.contentRef,t)))}),this.getTabTitle=(e=>{const{t:t}=this.props;return"infrastructure"===e?t("overview.infrastructure"):"ocp"===e?t("overview.ocp"):void 0}),this.handlePerspectiveClick=(e=>{const t=this.getCurrentTab();this.setState(Object.assign(Object.assign({},"infrastructure"===t&&{currentInfrastructurePerspective:e}),"ocp"===t&&{currentOcpPerspective:e}))}),this.handlePopoverClick=(()=>{this.setState({show:!this.state.showPopover})}),this.handleTabClick=((e,t)=>{const{activeTabKey:r}=this.state;r!==t&&this.setState({activeTabKey:t})}),this.isAwsAvailable=(()=>{const{awsProviders:e}=this.props;return void 0!==e&&void 0!==e.meta&&e.meta.count>0}),this.isAzureAvailable=(()=>{const{azureProviders:e}=this.props;return void 0!==e&&void 0!==e.meta&&e.meta.count>0}),this.isOcpAvailable=(()=>{const{ocpProviders:e}=this.props;return void 0!==e&&void 0!==e.meta&&e.meta.count>0}),this.isOcpCloudAvailable=(()=>this.isAwsAvailable()&&this.isOcpAvailable())}componentDidMount(){this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}componentDidUpdate(e,t){const{awsProviders:r,azureProviders:s,ocpProviders:a}=this.props;e.awsProviders===r&&e.azureProviders===s&&e.ocpProviders===a||this.setState({currentInfrastructurePerspective:this.getDefaultInfrastructurePerspective(),currentOcpPerspective:this.getDefaultOcpPerspective()})}render(){const{awsProvidersError:e,awsProvidersFetchStatus:t,azureProvidersError:r,azureProvidersFetchStatus:s,ocpProvidersError:i,ocpProvidersFetchStatus:n,t:l}=this.props,b=this.getAvailableTabs(),g=e||r||i,v=1===t||1===s||1===n,m=!this.isAwsAvailable()&&2===t,T=!this.isAzureAvailable()&&2===s,f=!this.isOcpAvailable()&&2===n,R=m&&T&&f,O=!(g||R||v);return y.a.createElement(y.a.Fragment,null,y.a.createElement("section",{className:`pf-l-page-header pf-c-page-header pf-l-page__main-section pf-c-page__main-section pf-m-light ${O?rt:""}`},y.a.createElement("header",{className:"pf-u-display-flex pf-u-justify-content-space-between pf-u-align-items-center"},y.a.createElement(o.a,{size:c.a["2xl"]},l("overview.title"),Boolean(O)&&y.a.createElement("span",{style:tt.infoIcon},y.a.createElement(a.a,{"aria-label":"t('ocp_details.supplementary_aria_label')",enableFlip:!0,bodyContent:y.a.createElement(y.a.Fragment,null,y.a.createElement("p",{style:tt.infoTitle},l("overview.ocp_cloud")),y.a.createElement("p",null,l("overview.ocp_cloud_desc")),y.a.createElement("br",null),y.a.createElement("p",{style:tt.infoTitle},l("overview.ocp")),y.a.createElement("p",null,l("overview.ocp_desc")),y.a.createElement("br",null),y.a.createElement("p",{style:tt.infoTitle},l("overview.aws")),y.a.createElement("p",null,l("overview.aws_desc")),y.a.createElement("br",null),y.a.createElement("p",{style:tt.infoTitle},l("overview.azure")),y.a.createElement("p",null,l("overview.azure_desc")))},y.a.createElement(p.a,{style:tt.info,onClick:this.handlePopoverClick}))))),Boolean(O)&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{style:tt.tabs},this.getTabs(b)),y.a.createElement("div",{style:tt.perspective},this.getPerspective()))),y.a.createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section","page-type":"cost-management-overview"},Boolean(g)?y.a.createElement(u.a,{error:g}):Boolean(R)?y.a.createElement(d.a,null):Boolean(v)?y.a.createElement(h.a,null):this.getTabContent(b)))}}));t.default=gt}}]);
//# sourceMappingURL=f1bbcde64308978f25d5.bundle.js.map