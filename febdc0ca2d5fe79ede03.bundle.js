(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{156:function(e,a,t){"use strict";t.r(a),function(e){var n=t(51),l=t(526);a.default=Object(n.hot)(e)(l.a)}.call(this,t(50)(e))},526:function(e,a,t){"use strict";var n=t(37),l=t(28),r=t(45),c=t(38),i=t(685),o=t(672),d=t(1),s=t.n(d),u=t(528),m=t(675),b=t(700),p=t(713),g=t(716);var h=(e,a)=>{const t=e.currentTarget.parentElement,n=document.createElement("input");n.value=a,t.appendChild(n),n.select(),document.execCommand("copy"),t.removeChild(n)};const k=({text:e,isCopied:a,"aria-label":t,onCopy:n})=>s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(b.a,{onChange:()=>null,isReadOnly:!0,value:e,"aria-label":t}),s.a.createElement(o.c,{onClick:n,variant:"primary",style:{position:"absolute",right:"1px"}},a?s.a.createElement(p.a,null):s.a.createElement(g.a,null)));class E extends s.a.Component{constructor(e){super(e),this.state={wasClicked:!1}}render(){return s.a.createElement(k,{text:this.props.text,isCopied:this.state.wasClicked,"aria-label":this.props["aria-label"],onCopy:e=>{h(e,this.props.text),this.setState({wasClicked:!0},()=>{const e=setTimeout(()=>{this.setState({wasClicked:!1},()=>{clearTimeout(e)})},2e3)})}})}}var _=({t:e})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(m.b,{size:"xl"},e("onboarding.configure.instructions_title")),s.a.createElement("div",null,e("onboarding.configure.instructions_text")),s.a.createElement("br",null),s.a.createElement(m.b,{size:"md"},e("onboarding.configure.edit_contrab_title")),s.a.createElement("div",null,e("onboarding.configure.edit_contrab")),s.a.createElement(E,{text:"# contrab -u <username> -e","aria-label":"command line to edit contrab"}),s.a.createElement("br",null),s.a.createElement(m.b,{size:"md"},e("onboarding.configure.create_entry_title")),s.a.createElement("div",null,e("onboarding.configure.create_entry")),s.a.createElement(E,{text:"*/45 * * * * /path/to/ocp_usage.sh --collect","aria-label":"entry to run OCP Usage collector every 45 minutes"}),s.a.createElement("br",null),s.a.createElement(m.b,{size:"md"},e("onboarding.configure.note_title")),s.a.createElement("div",null,e("onboarding.configure.note")),s.a.createElement(E,{text:"ocpcollector ALL=(ALL) NOPASSWD: ALL","aria-label":"set sudo authority to interact with Red Hat Insights Client"}),s.a.createElement("br",null)),y=Object(n.d)()(_),C=t(696),v=t(669),O=t(717),x=t(712),I=t(714);var f=class extends s.a.Component{constructor(e){super(e)}componentDidMount(){this.props.addSource({type:this.props.type,name:this.props.name,authentication:{provider_resource_name:this.props.clusterId}})}renderIcon(){const e="7em",a={display:"block",verticalAlign:`${-.125*Number.parseFloat(e)}em`,margin:"auto"};return 1===this.props.apiStatus?s.a.createElement(x.a,{style:a,width:e,height:e}):this.props.apiErrors?s.a.createElement(I.a,{color:"red",style:a,width:e,height:e}):s.a.createElement(O.a,{color:"green",style:a,width:e,height:e})}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.b,{size:"xl"},this.props.t("onboarding.final.title")),s.a.createElement("br",null),s.a.createElement(v.a,{gutter:"lg"},s.a.createElement(C.a,{span:2}),s.a.createElement(C.a,{span:8},this.renderIcon()),s.a.createElement(C.a,{span:2})))}},w=Object(l.b)(Object(r.a)(e=>({name:c.c.selectOnboardingName(e),type:c.c.selectOnboardingType(e),clusterId:c.c.selectOnboardingClusterID(e),apiErrors:c.c.selectApiErrors(e),apiStatus:c.c.selectApiStatus(e)})),{addSource:c.a.addSource})(Object(n.d)()(f)),A=t(670),L=t(701);var S=({t:e})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(m.b,{size:"xl"},e("onboarding.obtain_login.instructions_title")),s.a.createElement("div",null,e("onboarding.obtain_login.intro")),s.a.createElement("br",null),s.a.createElement(A.a,null,s.a.createElement(L.a,null,e("onboarding.obtain_login.obtain_token")),s.a.createElement(L.a,null,e("onboarding.obtain_login.run_command"),s.a.createElement("br",null),s.a.createElement(E,{text:"# oc serviceaccounts get-token metering-operator > ocp_usage_token","aria-label":"command line to obtain the token"})),s.a.createElement(L.a,null,e("onboarding.obtain_login.security")))),j=Object(n.d)()(S);const V=e=>""!==e,z=e=>new RegExp("^.").test(e),P=e=>new RegExp("^.").test(e);var T=t(703);const K=[{id:"check-ocp-version",label:s.a.createElement(n.b,{i18nKey:"onboarding.source_kind.checkbox_1"}),ariaLabel:"OCP version 3.11 or newer"},{id:"check-operator-metering",label:s.a.createElement(n.b,{i18nKey:"onboarding.source_kind.checkbox_2",operator:s.a.createElement("a",{target:"_blank",href:"https://github.com/operator-framework/operator-metering/blob/master/Documentation/install-metering.md"},"Operator Metering")}),ariaLabel:"Install operator metering"},{id:"check-insights-client",label:s.a.createElement(n.b,{i18nKey:"onboarding.source_kind.checkbox_3",insights:s.a.createElement("a",{target:"_blank",href:"https://access.redhat.com/products/red-hat-insights/#getstarted"},"Red Hat Insights Client")}),ariaLabel:"Setup Red Hat Insights Client"},{id:"check-ansible-epel",label:s.a.createElement(n.b,{i18nKey:"onboarding.source_kind.checkbox_4",ansible:s.a.createElement("a",{target:"_blank",href:"https://docs.ansible.com/ansible/2.7/installation_guide/intro_installation.html"},"Ansible"),epel:s.a.createElement("a",{target:"_blank",href:"https://fedoraproject.org/wiki/EPEL#Quickstart"},"EPEL repository")}),ariaLabel:"Install Ansible and EPEL"},{id:"check-oc",label:s.a.createElement(n.b,{i18nKey:"onboarding.source_kind.checkbox_5",oc:s.a.createElement("a",{target:"_blank",href:"https://docs.openshift.com/container-platform/3.3/cli_reference/get_started_cli.html#cli-linux"},"OCP command-line (oc)")}),ariaLabel:"Install OCP command line"}],M=({t:e,checkedItems:a,updateCheckItem:t,checkAll:n})=>s.a.createElement(s.a.Fragment,null,e("onboarding.source_kind.checklist_title"),K.map(e=>s.a.createElement(T.a,{key:`checkbox-key-${e.id}`,isChecked:a[e.id]||!1,onChange:t,label:e.label,"aria-label":e.ariaLabel,id:e.id})),s.a.createElement(T.a,{key:"checkbox-all-sourcekind",onChange:n,isChecked:Object.keys(a).every(e=>a[e]),label:e("onboarding.source_kind.checkbox_6"),"aria-label":e("onboarding.source_kind.check them all"),id:"check-them-all"}));M.defaultProps={updateCheckItem:()=>null,checkAll:()=>null};var N=M,F=t(697),D=t(677),R=t(702),H=t(698);var W=({t:e,name:a,updateName:t,nameValid:n,type:l,updateType:r,typeValid:c})=>s.a.createElement(R.a,null,s.a.createElement(D.a,{isValid:c,fieldId:"source_type",label:e("onboarding.type_label")},s.a.createElement(H.a,{isValid:c,value:l,id:"source_type",onChange:r},s.a.createElement(F.a,{label:e("onboarding.select_type_label"),value:""}),s.a.createElement(F.a,{isDisabled:!0,label:"Amazon Web Services (AWS)",value:"AWS"}),s.a.createElement(F.a,{label:"Red Hat OpenShift (RH OCP)",value:"OCP"}))),s.a.createElement(D.a,{isValid:n,helperTextInvalid:e("onboarding.name_helper_invalid_text"),helperText:e("onboarding.name_helper_text"),fieldId:"source_name",label:e("onboarding.name_label")},s.a.createElement(b.a,{isValid:n,id:"source_name",value:a,onChange:t})));var B=({t:e})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(m.b,{size:"xl"},e("onboarding.source_kind.instructions_title")),s.a.createElement("div",null,e("onboarding.source_kind.instructions_text")),s.a.createElement("br",null));var J=({t:e,name:a,updateName:t,nameValid:n,type:l,updateType:r,typeValid:c,checked:i,updateCheck:o,checkAll:d})=>{return s.a.createElement(s.a.Fragment,null,s.a.createElement(B,{t:e}),s.a.createElement(W,{updateName:(e,a)=>{t(a.currentTarget.value,z)},updateType:e=>{r(e,V)},name:a,nameValid:n,type:l,typeValid:c,t:e}),s.a.createElement("br",null),Boolean(""!==l)&&s.a.createElement(N,{t:e,checkedItems:i,updateCheckItem:(e,a)=>{o({item:a.currentTarget.id,value:e})},checkAll:()=>{d()}}))},U=Object(l.b)(Object(r.a)(e=>Object.assign({name:c.c.selectOnboardingName(e),type:c.c.selectOnboardingType(e),checked:c.c.selectOnboardingSourceKindChecked(e)},c.c.selectOnboardingValidation(e))),{updateName:c.a.updateName,updateType:c.a.updateType,updateCheck:c.a.updateSourceKindCheckList,checkAll:c.a.checkSourceKindCheckList})(Object(n.d)()(J));var $=({t:e,isValid:a,value:t,onChange:n})=>s.a.createElement(R.a,null,s.a.createElement(D.a,{isValid:a,fieldId:"cluster_id",label:e("onboarding.korekuta.cluster_id_label")},s.a.createElement(b.a,{isValid:a,id:"cluster_id",value:t,onChange:n})));var G=({t:e})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(m.b,{size:"xl"},e("onboarding.korekuta.instructions_title")),s.a.createElement("div",null,e("onboarding.korekuta.instructions_text")),s.a.createElement("br",null),e("onboarding.korekuta.checklist_title"),s.a.createElement(A.a,null,s.a.createElement(L.a,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(n.b,{i18nKey:"onboarding.korekuta.download_and_install",korekuta:s.a.createElement("a",{href:"https://koku.readthedocs.io/en/latest/providers.html#download-and-configure-ocp-usage-collector-korekuta",target:"_blank"},"OCP Usage Collector")}),s.a.createElement("br",null),e("onboarding.korekuta.checklist_title"),s.a.createElement("br",null),s.a.createElement(A.a,null,s.a.createElement(L.a,null,e("onboarding.korekuta.checkbox_1")),s.a.createElement(L.a,null,e("onboarding.korekuta.checkbox_2")),s.a.createElement(L.a,null,e("onboarding.korekuta.checkbox_3")),s.a.createElement(L.a,null,e("onboarding.korekuta.checkbox_4"))),s.a.createElement("div",null,e("onboarding.korekuta.for_example")),s.a.createElement("br",null),s.a.createElement("div",null,'# ./ocp_usage.sh --setup -e OCP_API="https://api.openshift-prod.mycompany.com" -e OCP_METERING_NAMESPACE="metering" -e OCP_TOKEN_PATH="/path/to/ocp_usage_token"'))),s.a.createElement(L.a,null,e("onboarding.korekuta.post_installation"))));var Q=({t:e,clusterId:a,updateClusterId:t,clusterIdValid:n})=>{return s.a.createElement(s.a.Fragment,null,s.a.createElement(G,{t:e}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement($,{t:e,onChange:(e,a)=>{t(a.currentTarget.value,P)},isValid:n,value:a}))},q=Object(l.b)(Object(r.a)(e=>({checked:c.c.selectOnboardingKorekutaChecked(e),clusterId:c.c.selectOnboardingClusterID(e),clusterIdValid:c.c.selectOnboardingValidation(e).clusterIdValid})),{updateCheck:c.a.updateKorekutaCheckList,checkAll:c.a.checkKorekutaCheckList,updateClusterId:c.a.updateClusterID})(Object(n.d)()(Q));const X=[s.a.createElement(U,{key:"source_kind"}),s.a.createElement(j,{key:"obtain_login"}),s.a.createElement(q,{key:"usage_collector"}),s.a.createElement(y,{key:"configure"}),s.a.createElement(w,{key:"final"})];a.a=Object(l.b)(Object(r.a)(e=>({isModalOpen:c.c.selectOnboardingModal(e),isInvalid:c.c.selectOnboardingIsInvalid(e),dirtyMap:c.c.selectOnboardingDirty(e),sourceKindChecked:c.c.selectOnboardingSourceKindChecked(e)})),{closeModal:c.a.closeModal,cancelOnboarding:c.a.cancelOnboarding})(Object(n.d)()(({t:e,closeModal:a,cancelOnboarding:t,isModalOpen:n,isInvalid:l,dirtyMap:r,sourceKindChecked:c})=>s.a.createElement(u.a,null,({index:d,setIndex:u})=>{const m=[r.name&&r.type&&Object.keys(c).every(e=>c[e]),!0,r.clusterId,!0,!0],b=[d<X.length-1&&s.a.createElement(o.c,{key:"wizard_cancel",variant:"secondary",id:"wizard_cancel_button",onClick:()=>{u(0),t()}},"Cancel"),d>0&&d<X.length-1&&s.a.createElement(o.c,{key:"wizard_back",variant:"secondary",id:"wizard_cancel_button",onClick:()=>u(d-1)},"Back"),d<X.length-1&&s.a.createElement(o.c,{isDisabled:!m[d]||l,key:"wizard_continue",variant:"primary",id:"wizard_continue_button",onClick:()=>{u(d+1)}},"Continue"),d+1===X.length&&s.a.createElement(o.c,{key:"wizard_close",variant:"primary",id:"wizard_close_button",onClick:()=>{u(0),t()}},"Close")];return s.a.createElement(i.a,{style:{height:"700px",width:"800px"},isLarge:!0,title:e("onboarding.wizard.title"),isOpen:n,actions:b,onClose:a},X[d])})))}}]);
//# sourceMappingURL=febdc0ca2d5fe79ede03.bundle.js.map