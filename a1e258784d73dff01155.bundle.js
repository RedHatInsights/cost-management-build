"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[9839],{21679:(e,t,a)=>{a.d(t,{L:()=>n});var r=a(80965),s=a(92950),o=a.n(s);const n=()=>o().createElement("span",{className:"emptyValueContainer"},o().createElement(r.V_,null))},2866:(e,t,a)=>{a.d(t,{iu:()=>l,j0:()=>c,me:()=>_,V3:()=>J,Y0:()=>re,rN:()=>m,EH:()=>g,mZ:()=>D,Nd:()=>ie,I0:()=>he});var r=a(65834),s=a(92950),o=a.n(s),n=a(74806),i=a(57279);const l=(0,n.ZP)((({children:e,detailsLink:t,title:a,subTitle:s,status:n})=>o().createElement(r.Card,{className:"reportSummary"},o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},a),Boolean(s)&&o().createElement("p",{className:"subtitle"},s)),o().createElement(r.CardBody,null,1===n?o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{width:"16%"}),o().createElement(r.Skeleton,{className:"chartSkeleton",width:i.N.md}),o().createElement(r.Skeleton,{width:"33%"}),o().createElement(r.Skeleton,{className:"legendSkeleton",width:i.N.xs})):e),Boolean(t)&&o().createElement(r.CardFooter,null,t)))),c=(0,n.ZP)((({children:e,detailsLink:t,status:a,subTitle:s,tabs:n,title:l})=>o().createElement(r.Card,{className:"reportSummary"},o().createElement(r.Grid,{hasGutter:!0},o().createElement(r.GridItem,{xl:8},o().createElement("div",{className:"cost"},o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},l),Boolean(s)&&o().createElement("p",{className:"subtitle"},s)),o().createElement(r.CardBody,null,1===a?o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{width:"16%"}),o().createElement(r.Skeleton,{className:"chartSkeleton",width:i.N.md}),o().createElement(r.Skeleton,{width:"33%"}),o().createElement(r.Skeleton,{className:"legendSkeleton",width:i.N.xs})):e))),o().createElement(r.GridItem,{xl:4},o().createElement("div",{className:"tops"},1!==a&&o().createElement(o().Fragment,null,Boolean(n)&&o().createElement(r.CardBody,null,n),Boolean(t)&&o().createElement(r.CardFooter,null,t))))))));var u=a(93952),h=a(21679),d=a(99291);const m=(0,n.ZP)((({chartType:e,computedReportItem:t="cost",computedReportItemValue:a="total",costLabel:s,formatOptions:n,intl:i,report:l,requestFormatOptions:c,requestLabel:m,reportType:p,showTooltip:g=!1,showUnits:f=!1,showUsageFirst:C=!1,units:D,usageFormatOptions:v,usageLabel:L})=>{let b=o().createElement(h.L,null),y=o().createElement(h.L,null),S=o().createElement(h.L,null),E=o().createElement(h.L,null),N=o().createElement(h.L,null);const Z=l&&l.meta&&l.meta.total,I=Z&&l.meta.total.cost&&l.meta.total.cost.total,k=Z&&l.meta.total.count,w=Z&&l.meta.total.supplementary&&l.meta.total.supplementary.total&&l.meta.total.supplementary.total.value,O=Z&&l.meta.total.infrastructure&&l.meta.total.infrastructure[a]&&l.meta.total.infrastructure[a].value,x=Z&&l.meta.total.request,F=Z&&l.meta.total.usage;Z&&(b=(0,d.xG)(I?l.meta.total.cost.total.value:0,I?l.meta.total.cost.total.units:"USD",n),y=(0,d.xG)(w?l.meta.total.supplementary.total.value:0,w?l.meta.total.supplementary.total.units:"USD",n),S=(0,d.xG)(O?l.meta.total.infrastructure[a].value:0,O?l.meta.total.infrastructure[a].units:"USD",n),E=(0,d.bM)(x?l.meta.total.request.value:0,x?l.meta.total.request.units:void 0,c),N=F&&l.meta.total.usage.value>=0?(0,d.bM)(F?l.meta.total.usage.value:0,F?l.meta.total.usage.units:void 0,v):(0,d.bM)(F?l.meta.total.usage:0,k?l.meta.total.count.units:void 0,v));const P=(e=!1)=>{let a=b;"infrastructure"===t?a=S:"supplementary"===t&&(a=y);const n=e?"Alt":"";return o().createElement("div",{className:"valueContainer"},g?o().createElement(r.Tooltip,{content:i.formatMessage(u.Z.dashboardTotalCostTooltip,{infrastructureCost:S,supplementaryCost:y}),enableFlip:!0},o().createElement("div",{className:`value${n}`},a)):o().createElement("div",{className:`value${n}`},a),o().createElement("div",{className:"text"},o().createElement("div",null,s)))},j=()=>{if(!L)return null;const e=x?l.meta.total.request.units:void 0,t=i.formatMessage(u.Z.units,{units:(0,d.ZV)(e)});return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},E),Boolean(f&&(D||x&&l.meta.total.request.value>=0))&&o().createElement("span",{className:"units"},t),o().createElement("div",{className:"text"},o().createElement("div",null,m)))},R=()=>{if(!L)return null;const e=F?l.meta.total.usage.units:void 0,t=(0,d.ZV)(D||e),a=i.formatMessage(u.Z.units,{units:t});return o().createElement("div",{className:"valueContainer"},o().createElement("span",{className:"value"},N),Boolean(f&&(D||F&&l.meta.total.usage.value>=0))&&o().createElement("span",{className:"units"},a),o().createElement("div",{className:"text"},o().createElement("div",null,L)))};return"dailyCost"===e||"dailyTrend"===e||"cost"===e?o().createElement(o().Fragment,null,P("cost"===p)):"trend"===e?C?o().createElement(o().Fragment,null,R(),P("cost"===p)):o().createElement(o().Fragment,null,P("cost"===p),R()):"usage"===e?C?o().createElement(o().Fragment,null,R(),j()):o().createElement(o().Fragment,null,j(),R()):null}));var p=a(32004);const g=(0,n.ZP)((({intl:e=p.N,label:t,totalValue:a,units:s,value:n,formatOptions:i})=>{const l=e.formatMessage(u.Z.units,{units:(0,d.ZV)(s)}),c=a?n/a*100:0,h=(0,d.rl)(c),m=e.formatMessage(u.Z.percentTotalCost,{percent:h,units:l,value:(0,d.xG)(n,s,i)});return o().createElement("li",{className:"reportSummaryItem"},o().createElement(r.Progress,{label:m,value:Number(h),title:t,size:r.ProgressSize.sm}))}));var f=a(31447);class C extends o().Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{idKey:e,report:t}=this.props,a=(0,f.R)({report:t,idKey:e}),r=a.findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}));return-1!==r?[...a.slice(0,r),...a.slice(r+1),a[r]]:a}render(){const{children:e,status:t}=this.props;if(1===t)return o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{width:i.N.md}),o().createElement(r.Skeleton,{className:"skeleton",width:i.N.md}),o().createElement(r.Skeleton,{className:"skeleton",width:i.N.md}),o().createElement(r.Skeleton,{className:"skeleton",width:i.N.md}));{const t=this.getItems();return o().createElement("ul",null,e({items:t}))}}}const D=(0,n.ZP)(C);a(35524);var v=a(21094),L=a(47280),b=a(80469),y=a(84154),S=a(48629),E=a(52109),N=a(2370),Z=a(55855),I=a(77039),k=a(35402),w=a(29516),O=a(63211),x=a(21535),F=a(27765),P=a(28734),j=a(84076),R=a(18131),T=a(24656),M=a(84615),A=a(70698),U=a(72021),V=a(21768),z=a(41534);const B={currentColorScale:[V.CH.value,U.R0.value,A.t6.value,M.S7.value,z.iM.value],currentCostData:{fill:"none"},currentInfrastructureColorScale:[R.cQ.value,j.iY.value,P.OS.value,F.O6.value,T.DD.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},forecastConeData:{fill:M.S7.value,strokeWidth:0},forecastConeDataColorScale:[M.S7.value],forecastData:{fill:"none"},forecastDataColorScale:[A.t6.value],forecastInfrastructureConeData:{fill:F.O6.value,strokeWidth:0},forecastInfrastructureConeDataColorScale:[F.O6.value],forecastInfrastructureData:{fill:"none"},forecastInfrastructureDataColorScale:[P.OS.value],previousCostData:{fill:"none"},previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousColorScale:[x.tN.value,x.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class H extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=O.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:r,forecastInfrastructureConeData:s,forecastInfrastructureData:o,previousInfrastructureCostData:n,previousCostData:i,showForecast:l}=this.props,c=u.Z.chartCostLegendLabel,h=u.Z.chartCostInfrastructureLegendLabel,d=u.Z.chartCostInfrastructureLegendTooltip,m=u.Z.chartCostLegendTooltip,p=[{childName:"previousCost",data:i,legendItem:{name:(0,k.uL)(i,c,!0,!0,1,u.Z.chartCostLegendNoDataLabel),symbol:{fill:B.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(i,m,!1,!1,1)},style:{data:Object.assign(Object.assign({},B.previousCostData),{stroke:B.previousColorScale[0]})}},{childName:"currentCost",data:t,legendItem:{name:(0,k.uL)(t,c,!0,!1,0,u.Z.chartCostLegendNoDataLabel),symbol:{fill:B.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,m,!1,!1)},style:{data:Object.assign(Object.assign({},B.currentCostData),{stroke:B.currentColorScale[0]})}},{childName:"previousInfrastructureCost",data:n,legendItem:{name:(0,k.uL)(n,h,!0,!0,1,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:B.previousColorScale[1],type:"dash"},tooltip:(0,k.uL)(n,d,!1,!1,1)},style:{data:Object.assign(Object.assign({},B.previousInfrastructureCostData),{stroke:B.previousColorScale[1]})}},{childName:"currentInfrastructureCost",data:e,legendItem:{name:(0,k.uL)(e,h,!0,!1,0,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:B.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,k.uL)(e,d,!1,!1)},style:{data:Object.assign(Object.assign({},B.currentInfrastructureCostData),{stroke:B.currentInfrastructureColorScale[1]})}}];l&&(p.push({childName:"forecast",data:r,legendItem:{name:(0,k.uL)(r,u.Z.chartCostForecastLegendLabel,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:B.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(r,u.Z.chartCostForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastData),{stroke:B.forecastDataColorScale[0]})}}),p.push({childName:"forecastInfrastructure",data:o,legendItem:{name:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastLegendNoDataLabel),symbol:{fill:B.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastInfrastructureData),{stroke:B.forecastInfrastructureDataColorScale[0]})}}),p.push({childName:"forecastCone",data:a,legendItem:{name:(0,k.uL)(a,u.Z.chartCostInfrastructureForecastConeLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastConeLegendNoDataLabel),symbol:{fill:B.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(a,u.Z.chartCostInfrastructureForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastConeData),{stroke:B.forecastConeDataColorScale[0]})}}),p.push({childName:"forecastInfrastructureCone",data:s,legendItem:{name:(0,k.uL)(s,u.Z.chartCostInfrastructureForecastConeLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastConeLegendNoDataLabel),symbol:{fill:B.forecastInfrastructureConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(s,u.Z.chartCostInfrastructureForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},B.forecastInfrastructureConeData),{stroke:B.forecastInfrastructureConeDataColorScale[0]})}}));const g=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:g,series:p})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r}=this.props,{width:s}=this.state;let o=a;return e&&(r?s>675&&s<1175?o+=25:s>450&&s<675?o+=50:s<=450&&(o+=75):s>450&&s<725?o+=25:s<=450&&(o+=50)),o},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(v.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(a,t),height:25,gutter:20,name:`${e}-legend`,responsive:!1})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,y.u)({chartNames:(0,w.bC)(a),isHidden:e=>(0,w.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:r,previousCostData:s}=this.props,o=e?(0,Z.Z)((0,k.Y_)(e,!0,!0)[1]):0,n=t?(0,Z.Z)((0,k.Y_)(t,!0,!0)[1]):0,i=a?(0,Z.Z)((0,k.Y_)(a,!0,!0)[1]):0,l=r?(0,Z.Z)((0,k.Y_)(r,!0,!0)[1]):0,c=s?(0,Z.Z)((0,k.Y_)(s,!0,!0)[1]):0;return o>0||n>0||l>0||c>0?Math.max(o,n,i,l,c):31}render(){const{height:e,intl:t,name:a,padding:s={bottom:50,left:8,right:8,top:8},title:n}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,w.ge)(c,l),m=this.getEndDate(),p=Math.floor(m/2),g=1+Math.floor(p/2),f=1+p,C=m-Math.floor(p/2),D=i?o().cloneElement(i,{disable:!(0,w.TW)(c,l),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(c,l,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,n&&o().createElement(r.Title,{headingLevel:"h3",size:"md"},n),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h}},o().createElement(E.k,{containerComponent:D,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(c,l),legendPosition:"bottom-left",name:a,padding:s,theme:I.Z,width:h},c&&c.map(((e,t)=>this.getChart(e,t))),o().createElement(N.C,{style:B.xAxis,tickValues:[1,g,f,C,m]}),o().createElement(N.C,{dependentAxis:!0,style:B.yAxis})))))}}const Y=(0,n.ZP)(H);const _=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(Y,Object.assign({name:t},a)))};var q=a(39727),W=a(74174),X=a(26383),G=a(82874);const $={currentColorScale:[V.CH.value,U.R0.value,A.t6.value,M.S7.value,z.iM.value],currentInfrastructureColorScale:[R.cQ.value,j.iY.value,P.OS.value,F.O6.value,T.DD.value],currentInfrastructureCostData:{strokeDasharray:"3,3"},forecastConeDataColorScale:[G.g9.value],forecastDataColorScale:[A.t6.value],forecastInfrastructureConeDataColorScale:[G.g9.value],forecastInfrastructureDataColorScale:[P.OS.value],previousInfrastructureCostData:{strokeDasharray:"3,3"},previousColorScale:[x.tN.value,x.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class Q extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=O.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentInfrastructureCostData:e,currentCostData:t,forecastConeData:a,forecastData:r,forecastInfrastructureConeData:s,forecastInfrastructureData:o,previousInfrastructureCostData:n,previousCostData:i,showForecast:l}=this.props,c=u.Z.chartCostLegendLabel,h=u.Z.chartCostInfrastructureLegendLabel,d=u.Z.chartCostInfrastructureLegendTooltip,m=u.Z.chartCostLegendTooltip,p=[{childName:"previousCost",data:this.initDatumChildName(i,"previousCost"),legendItem:{name:(0,k.uL)(i,c,!0,!0,1,u.Z.chartCostLegendNoDataLabel),symbol:{fill:$.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(i,m,!1,!1,1)},isLine:!0,style:{data:{stroke:$.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(t,"currentCost"),legendItem:{name:(0,k.uL)(t,c,!0,!1,0,u.Z.chartCostLegendNoDataLabel),symbol:{fill:$.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,m,!1,!1)},isBar:!0,style:{data:{fill:$.currentColorScale[0]}}},{childName:"previousInfrastructureCost",data:this.initDatumChildName(n,"previousInfrastructureCost"),legendItem:{name:(0,k.uL)(n,h,!0,!0,1,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:$.previousColorScale[1],type:"dash"},tooltip:(0,k.uL)(n,d,!1,!1,1)},isLine:!0,style:{data:{stroke:$.previousColorScale[1]}}},{childName:"currentInfrastructureCost",data:this.initDatumChildName(e,"currentInfrastructureCost"),legendItem:{name:(0,k.uL)(e,h,!0,!1,0,u.Z.chartCostInfrastructureLegendNoDataLabel),symbol:{fill:$.currentInfrastructureColorScale[1],type:"dash"},tooltip:(0,k.uL)(e,d,!1,!1,0)},isBar:!0,style:{data:{fill:$.currentInfrastructureColorScale[1]}}}];l&&(p.push({childName:"forecast",data:this.initDatumChildName(r,"forecast"),legendItem:{name:(0,k.uL)(r,u.Z.chartCostForecastLegendLabel,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:$.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(r,u.Z.chartCostForecastLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:$.forecastDataColorScale[0]}}}),p.push({childName:"forecastInfrastructure",data:this.initDatumChildName(o,"forecastInfrastructure"),legendItem:{name:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastLegendNoDataLabel),symbol:{fill:$.forecastInfrastructureDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(o,u.Z.chartCostInfrastructureForecastLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:$.forecastInfrastructureDataColorScale[0]}}}),p.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,k.uL)(a,u.Z.chartCostForecastConeLegendLabel,!1,!1,0,u.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:$.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(a,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:$.forecastConeDataColorScale[0]}}}),p.push({childName:"forecastInfrastructureCone",data:this.initDatumChildName(s,"forecastInfrastructureCone"),legendItem:{name:(0,k.uL)(s,u.Z.chartCostInfrastructureForecastConeLegendLabel,!1,!1,0,u.Z.chartCostInfrastructureForecastConeLegendNoDataLabel),symbol:{fill:$.forecastInfrastructureConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(s,u.Z.chartCostInfrastructureForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:$.forecastInfrastructureConeDataColorScale[0]}}}));const g=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:g,series:p})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r}=this.props,{width:s}=this.state;let o=a;return e&&(r?s>675&&s<1175?o+=25:s>450&&s<675?o+=50:s<=450&&(o+=75):s>450&&s<725?o+=25:s<=450&&(o+=50)),o},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const r=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(q.B,{alignment:"middle",data:r,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement(W.m,{data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const r=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const r=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",barWidth:1,data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(a,t),height:25,gutter:20,name:`${e}-legend`,responsive:!1})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.forecastConeData===this.props.forecastConeData&&e.forecastData===this.props.forecastData&&e.forecastInfrastructureConeData===this.props.forecastInfrastructureConeData&&e.forecastInfrastructureData===this.props.forecastInfrastructureData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,forecastData:a,previousInfrastructureCostData:r,previousCostData:s}=this.props,o=e?(0,Z.Z)((0,k.Y_)(e,!0,!0)[1]):0,n=t?(0,Z.Z)((0,k.Y_)(t,!0,!0)[1]):0,i=a?(0,Z.Z)((0,k.Y_)(a,!0,!0)[1]):0,l=r?(0,Z.Z)((0,k.Y_)(r,!0,!0)[1]):0,c=s?(0,Z.Z)((0,k.Y_)(s,!0,!0)[1]):0;return o>0||n>0||l>0||c>0?Math.max(o,n,i,l,c):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,y.u)({chartNames:(0,w.bC)(a),isDataHidden:e=>(0,w.E0)(a,t,e),isHidden:e=>(0,w.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:s={bottom:50,left:8,right:8,top:8},title:n}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,w.ge)(c,l),m=this.getEndDate(),p=Math.floor(m/2),g=1+Math.floor(p/2),f=1+p,C=m-Math.floor(p/2),D=i?o().cloneElement(i,{disable:!(0,w.TW)(c,l),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(c,l,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,n&&o().createElement(r.Title,{headingLevel:"h3",size:"md"},n),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h}},o().createElement(E.k,{containerComponent:D,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(c,l),legendPosition:"bottom-left",name:a,padding:s,theme:I.Z,width:h},c&&c.length>0&&o().createElement(X.G,{offset:5.5},c.map(((e,t)=>this.getChart(e,t)))),c&&c.length>0&&o().createElement(X.G,{offset:5.5},c.map(((e,t)=>this.getForecastBarChart(e,t)))),c&&c.length>0&&o().createElement(X.G,{offset:5.5},c.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(N.C,{style:$.xAxis,tickValues:[1,g,f,C,m]}),o().createElement(N.C,{dependentAxis:!0,style:$.yAxis})))))}}const K=(0,n.ZP)(Q);const J=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(K,Object.assign({name:t},a)))},ee={currentColorScale:[V.CH.value,U.R0.value,A.t6.value,M.S7.value,z.iM.value],forecastConeDataColorScale:[G.g9.value],forecastDataColorScale:[A.t6.value],itemsPerRow:4,previousColorScale:[x.tN.value,x.tN.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class te extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=O.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:r,showForecast:s,showInfrastructureLabel:o=!1,showSupplementaryLabel:n=!1,showUsageLegendLabel:i=!1}=this.props,l=i?u.Z.chartUsageLegendLabel:n?u.Z.chartCostSupplementaryLegendLabel:o?u.Z.chartCostInfrastructureLegendLabel:u.Z.chartCostLegendLabel,c=i?u.Z.chartUsageLegendTooltip:n?u.Z.chartCostSupplementaryLegendTooltip:o?u.Z.chartCostInfrastructureLegendTooltip:u.Z.chartCostLegendTooltip,h=i?u.Z.chartUsageLegendNoDataLabel:n?u.Z.chartCostSupplementaryLegendNoDataLabel:o?u.Z.chartCostInfrastructureLegendNoDataLabel:u.Z.chartCostLegendNoDataLabel,d=[{childName:"previousCost",data:this.initDatumChildName(r,"previousCost"),legendItem:{name:(0,k.uL)(r,l,!0,!0,1,h),symbol:{fill:ee.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(r,c,!1,!1,1)},isBar:!0,style:{data:{fill:ee.previousColorScale[0]}}},{childName:"currentCost",data:this.initDatumChildName(e,"currentCost"),legendItem:{name:(0,k.uL)(e,l,!0,!1,0,h),symbol:{fill:ee.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(e,c,!1,!1)},isBar:!0,style:{data:{fill:ee.currentColorScale[0]}}}];s&&(d.push({childName:"forecast",data:this.initDatumChildName(t,"forecast"),legendItem:{name:(0,k.uL)(t,u.Z.chartCostForecastLegendTooltip,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:ee.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},isBar:!0,isForecast:!0,style:{data:{fill:ee.forecastDataColorScale[0]}}}),d.push({childName:"forecastCone",data:this.initDatumChildName(a,"forecastCone"),legendItem:{name:(0,k.uL)(a,u.Z.chartCostForecastConeLegendLabel,!1,!1,0,u.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:ee.forecastConeDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(a,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},isForecast:!0,isLine:!0,style:{data:{fill:ee.forecastConeDataColorScale[0]}}}));const m=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:m,series:d})},this.initDatumChildName=(e,t)=>(e.map((e=>e.childName=t)),e),this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r,showInfrastructureLabel:s,showSupplementaryLabel:o}=this.props,{width:n}=this.state;let i=a;return e&&r&&n<(o||s?850:700)&&(i+=25),i},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(!e.isForecast){const r=a.has(t)?[{y:null}]:e.data;if(e.isBar)return o().createElement(q.B,{alignment:"middle",data:r,key:e.childName,name:e.childName,style:e.style});if(e.isLine)return o().createElement(W.m,{data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastBarChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isBar){const r=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getForecastLineChart=(e,t)=>{const{hiddenSeries:a}=this.state;if(e.isForecast&&e.isLine){const r=a.has(t)?[{y:null}]:e.data;return o().createElement(q.B,{alignment:"middle",barWidth:1,data:r,key:e.childName,name:e.childName,style:e.style})}return null},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e,name:t=""}=this.props,{hiddenSeries:a,series:r,width:s}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(r,a),gutter:20,height:25,itemsPerRow:e,name:`${t}-legend`,orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,previousData:a}=this.props,r=a?(0,Z.Z)((0,k.Y_)(a,!0,!0)[1]):0,s=e?(0,Z.Z)((0,k.Y_)(e,!0,!0)[1]):0,o=t?(0,Z.Z)((0,k.Y_)(t,!0,!0)[1]):0;return s>0||r>0?Math.max(s,o,r):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,y.u)({chartNames:(0,w.bC)(a),isDataHidden:e=>(0,w.E0)(a,t,e),isHidden:e=>(0,w.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:s={bottom:50,left:8,right:8,top:8},title:n}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,w.ge)(c,l),m=this.getEndDate(),p=Math.floor(m/2),g=1+Math.floor(p/2),f=1+p,C=m-Math.floor(p/2),D=i?o().cloneElement(i,{disable:!(0,w.TW)(c,l),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(c,l,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,n&&o().createElement(r.Title,{headingLevel:"h3",size:"md"},n),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h}},o().createElement(E.k,{containerComponent:D,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(c,l),legendPosition:"bottom-left",name:a,padding:s,theme:I.Z,width:h},c&&c.length>0&&o().createElement(X.G,{offset:11},c.map(((e,t)=>this.getChart(e,t)))),c&&c.length>0&&o().createElement(X.G,{offset:11},o().createElement(q.B,{data:[{y:null}],name:"forcast_spacer"}),c.map(((e,t)=>this.getForecastBarChart(e,t)))),c&&c.length>0&&o().createElement(X.G,{offset:11},o().createElement(q.B,{data:[{y:null}],name:"forcast_cone_spacer"}),c.map(((e,t)=>this.getForecastLineChart(e,t)))),o().createElement(N.C,{style:ee.xAxis,tickValues:[1,g,f,C,m]}),o().createElement(N.C,{dependentAxis:!0,style:ee.yAxis})))))}}const ae=(0,n.ZP)(te);const re=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(ae,Object.assign({name:t},a)))},se={currentColorScale:[V.ZP.value,U.ZP.value,A.ZP.value,M.ZP.value,z.ZP.value],currentMonthData:{fill:"none"},forecastConeData:{fill:M.ZP.value,strokeWidth:0},forecastConeDataColorScale:[M.ZP.value],forecastData:{fill:"none"},forecastDataColorScale:[A.ZP.value],itemsPerRow:4,previousColorScale:[x.ZP.value,x.ZP.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class oe extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=O.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,forecastData:t,forecastConeData:a,previousData:r,showForecast:s,showInfrastructureLabel:o=!1,showSupplementaryLabel:n=!1,showUsageLegendLabel:i=!1}=this.props,l=i?u.Z.chartUsageLegendLabel:n?u.Z.chartCostSupplementaryLegendLabel:o?u.Z.chartCostInfrastructureLegendLabel:u.Z.chartCostLegendLabel,c=i?u.Z.chartUsageLegendTooltip:n?u.Z.chartCostSupplementaryLegendTooltip:o?u.Z.chartCostInfrastructureLegendTooltip:u.Z.chartCostLegendTooltip,h=i?u.Z.chartUsageLegendNoDataLabel:n?u.Z.chartCostSupplementaryLegendNoDataLabel:o?u.Z.chartCostInfrastructureLegendNoDataLabel:u.Z.chartCostLegendNoDataLabel,d=[{childName:"previousCost",data:r,legendItem:{name:(0,k.uL)(r,l,!0,!0,1,h),symbol:{fill:se.previousColorScale[0],type:"minus"},tooltip:(0,k.uL)(r,c,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousMonthData),{stroke:se.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,k.uL)(e,l,!0,!1,0,h),symbol:{fill:se.currentColorScale[0],type:"minus"},tooltip:(0,k.uL)(e,c,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentMonthData),{stroke:se.currentColorScale[0]})}}];s&&(d.push({childName:"forecast",data:t,legendItem:{name:(0,k.uL)(t,u.Z.chartCostForecastLegendLabel,!1,!1,0,u.Z.chartCostForecastLegendNoDataLabel),symbol:{fill:se.forecastDataColorScale[0],type:"minus"},tooltip:(0,k.uL)(t,u.Z.chartCostForecastLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},se.forecastData),{stroke:se.forecastDataColorScale[0]})}}),d.push({childName:"forecastCone",data:a,legendItem:{name:(0,k.uL)(a,u.Z.chartCostForecastConeLegendLabel,!1,!1,0,u.Z.chartCostForecastConeLegendNoDataLabel),symbol:{fill:se.forecastConeDataColorScale[0],type:"triangleLeft"},tooltip:(0,k.uL)(a,u.Z.chartCostForecastConeLegendTooltip,!1,!1)},style:{data:Object.assign(Object.assign({},se.forecastConeData),{stroke:se.forecastConeDataColorScale[0]})}}));const m=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:m,series:d})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t,showForecast:r,showInfrastructureLabel:s,showSupplementaryLabel:o}=this.props,{width:n}=this.state;let i=a;return e&&r&&n<(o||s?900:700)&&(i+=25),i},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(v.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:50,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e="",legendItemsPerRow:t}=this.props,{hiddenSeries:a,series:r,width:s}=this.state;return o().createElement(b.Qk,{data:(0,w.oX)(r,a),gutter:20,height:25,itemsPerRow:t,name:`${e}-legend`,orientation:s>150?"horizontal":"vertical"})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.forecastData===this.props.forecastData&&e.forecastConeData===this.props.forecastConeData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,forecastData:t,forecastConeData:a,previousData:r}=this.props,s=r?(0,Z.Z)((0,k.Y_)(r,!0,!0)[1]):0,o=e?(0,Z.Z)((0,k.Y_)(e,!0,!0)[1]):0,n=t?(0,Z.Z)((0,k.Y_)(t,!0,!0)[1]):0,i=a?(0,Z.Z)((0,k.Y_)(a,!0,!0)[1]):0;return o>0||s>0?Math.max(o,n,i,s):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,y.u)({chartNames:(0,w.bC)(a),isHidden:e=>(0,w.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:s={bottom:50,left:8,right:8,top:8},title:n}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,w.ge)(c,l),m=this.getEndDate(),p=Math.floor(m/2),g=i?o().cloneElement(i,{disable:!(0,w.TW)(c,l),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(c,l,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,(null==n?void 0:n.length)&&o().createElement(r.Title,{headingLevel:"h3",size:"md"},n),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h},"data-testid":"trend-chart-wrapper"},o().createElement(E.k,{containerComponent:g,domain:d,events:this.getEvents(),height:e,legendAllowWrap:!0,legendComponent:this.getLegend(),legendData:(0,w.oX)(c,l),legendPosition:"bottom-left",name:a,padding:s,theme:I.Z,title:n||"Trend Chart",width:h},c&&c.map(((e,t)=>this.getChart(e,t))),o().createElement(N.C,{style:se.xAxis,tickValues:[1,p,m]}),o().createElement(N.C,{dependentAxis:!0,style:se.yAxis})))))}}const ne=(0,n.ZP)(oe);const ie=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(ne,Object.assign({name:t},a)))},le={chartContainer:{marginTop:a(98499).ZP.value},currentRequestData:{data:{fill:"none",stroke:U.ZP.value,strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:V.ZP.value}},itemsPerRow:2,legendColorScale:[x.ZP.value,V.ZP.value,x.ZP.value,U.ZP.value],previousRequestData:{data:{fill:"none",stroke:x.ZP.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:x.ZP.value}},currentColorScale:[V.ZP.value,U.ZP.value,A.ZP.value,M.ZP.value,z.ZP.value],previousColorScale:[x.ZP.value,x.ZP.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}};class ce extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=O.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:r}=this.props,s=u.Z.chartUsageLegendLabel,o=u.Z.chartUsageLegendTooltip,n=u.Z.chartRequestsLegendLabel,i=u.Z.chartRequestsLegendTooltip,l=[{childName:"previousUsage",data:r,legendItem:{name:(0,k.Fs)(r,s,!0,!0,1,u.Z.chartUsageLegendNoDataLabel),symbol:{fill:le.legendColorScale[0],type:"minus"},tooltip:(0,k.Fs)(r,o,!1,!1,1)},style:le.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:(0,k.Fs)(t,s,!0,!1,0,u.Z.chartUsageLegendNoDataLabel),symbol:{fill:le.legendColorScale[1],type:"minus"},tooltip:(0,k.Fs)(t,o,!1,!1)},style:le.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:(0,k.Fs)(a,n,!0,!0,1,u.Z.chartRequestsLegendNoDataLabel),symbol:{fill:le.legendColorScale[2],type:"dash"},tooltip:(0,k.Fs)(a,i,!1,!1,1)},style:le.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:(0,k.Fs)(e,n,!0,!1,0,u.Z.chartRequestsLegendNoDataLabel),symbol:{fill:le.legendColorScale[3],type:"dash"},tooltip:(0,k.Fs)(e,i,!1,!1)},style:le.currentRequestData}],c=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:c,series:l})},this.getAdjustedContainerHeight=()=>{const{adjustContainerHeight:e,height:t,containerHeight:a=t}=this.props,{width:r}=this.state;let s=a;return e&&r<480&&(s+=20),s},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(v.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,L.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,w.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:75,left:8,right:8,top:8}})},this.getLegend=()=>{const{name:e="",legendItemsPerRow:t}=this.props,{hiddenSeries:a,series:r,width:s}=this.state,n=t||(s>300?le.itemsPerRow:1);return o().createElement(b.Qk,{data:(0,w.oX)(r,a),height:25,gutter:20,itemsPerRow:n,name:`${e}-legend`})},this.handleLegendClick=e=>{const t=(0,w.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,w.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:r}=this.props,s=e?(0,Z.Z)((0,k.Y_)(e,!0,!0)[1]):0,o=t?(0,Z.Z)((0,k.Y_)(t,!0,!0)[1]):0,n=a?(0,Z.Z)((0,k.Y_)(a,!0,!0)[1]):0,i=r?(0,Z.Z)((0,k.Y_)(r,!0,!0)[1]):0;return s>0||o>0||n>0||i>0?Math.max(s,o,n,i):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,y.u)({chartNames:(0,w.bC)(a),isHidden:e=>(0,w.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,intl:t,name:a,padding:s={bottom:75,left:8,right:8,top:8},title:n}=this.props,{cursorVoronoiContainer:i,hiddenSeries:l,series:c,width:h}=this.state,d=(0,w.ge)(c,l),m=this.getEndDate(),p=Math.floor(m/2),g=i?o().cloneElement(i,{disable:!(0,w.TW)(c,l),labelComponent:o().createElement(S.M,{legendData:(0,w.oX)(c,l,!0),title:e=>t.formatMessage(u.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement(o().Fragment,null,(null==n?void 0:n.length)&&o().createElement(r.Title,{headingLevel:"h3",size:"md"},n),o().createElement("div",{className:"chartOverride",ref:this.containerRef,style:{height:this.getAdjustedContainerHeight()}},o().createElement("div",{style:{height:e,width:h},"data-testid":"usage-chart-wrapper"},o().createElement(E.k,{containerComponent:g,domain:d,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,w.oX)(c,l),legendPosition:"bottom-left",name:a,padding:s,theme:I.Z,title:n||"Usage Chart",width:h},c&&c.map(((e,t)=>this.getChart(e,t))),o().createElement(N.C,{style:le.xAxis,tickValues:[1,p,m]}),o().createElement(N.C,{dependentAxis:!0,style:le.yAxis})))))}}const ue=(0,n.ZP)(ce);const he=e=>{var{chartName:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["chartName"]);return o().createElement("div",{className:"chart"},o().createElement(ue,Object.assign({name:t},a)))}}}]);
//# sourceMappingURL=a1e258784d73dff01155.bundle.js.map