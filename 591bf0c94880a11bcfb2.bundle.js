(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{609:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});const n=e=>{const t=e?e.toLowerCase():"";switch(t){case"usd":case"gb":case"gb-hours":case"gb-mo":case"core-hours":case"hrs":case"tag-mo":case"vm-hours":return t;default:return""}},s=(e,t,a={})=>{const s=n(t),c=e||0;switch(s){case"usd":return i(c,s,a);case"gb":case"gb-hours":case"gb-mo":case"tag-mo":case"vm-hours":return o(c,s,a);case"core-hours":case"hrs":return l(c,s,a);default:return r(c,s,a)}},r=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a}),i=(e,t,{fractionDigits:a=2}={})=>{let n=e;return e||(n=0),n.toLocaleString("en",{style:"currency",currency:t||"USD",minimumFractionDigits:a,maximumFractionDigits:a})},o=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a}),l=(e,t,{fractionDigits:a=0}={})=>e.toLocaleString("en",{minimumFractionDigits:a,maximumFractionDigits:a})},611:function(e,t,a){"use strict";a.d(t,"g",function(){return p}),a.d(t,"b",function(){return v}),a.d(t,"c",function(){return f}),a.d(t,"d",function(){return D}),a.d(t,"e",function(){return y}),a.d(t,"a",function(){return S}),a.d(t,"f",function(){return E});var n=a(691),s=a.n(n),r=a(630),i=a.n(r),o=a(612),l=a.n(o),c=a(690),u=a.n(c),d=a(642),m=a.n(d),h=a(218),g=a(616),b=a(609);function p(e,t=1,a="date",n="cost"){if(!e)return[];const s={report:e,idKey:a,sortKey:"id",sortDirection:1},r=Object(g.a)(s);return 1===t?r.map(e=>_(e[n],e,a)):2===t?r.map(e=>_(e[n],e,a)):r.reduce((e,t)=>{const s=e.length?e[e.length-1].y:0;return[...e,_(s+t[n],t,a)]},[])}function _(e,t,a="date"){return{x:"date"===a?l()(t.id):t.label,y:function(e){return Number(e)===e&&e%1!=0}(e)?parseFloat(e.toFixed(2)):function(e){return Number(e)===e&&e%1==0}(e)?e:0,key:t.id,name:t.id,units:t.units}}function v(e,t=!0,a=!1,n=0){const[r,i]=function(e,t=0){if(!e||!e.length){const e=new Date;return t&&e.setMonth(e.getMonth()-t),[m()(e),e]}return[new Date(e[0].key+"T00:00:00"),new Date(e[e.length-1].key+"T00:00:00")]}(e,n);if(t&&r.setDate&&r.setDate(1),a&&r.setDate){const e=s()(r).getDate();i.setDate(e)}return[r,i]}function f(e){let t=0;return e&&e.length&&e.forEach(e=>{e.y>t&&(t=e.y)}),t}function D(e){return function(t,a=null,n={}){const s=Object(b.c)(a);switch(s){case"core-hours":case"hrs":case"gb":case"gb-hours":case"gb-mo":case"vm-hours":return h.a.t(`unit_tooltips.${s}`,{value:`${e(t,a,n)}`});default:return`${e(t,a,n)}`}}}function y(e,t,a,n="date",s){if(!e.key)return"";if("date"===n){return`${i()(e.key,"DD MMM YYYY")} ${t(e.y,s||e.units,a)}`}return e.key.toString()}function S(e,t="chart.cost_legend_label",a=!1,n=!1,s=0){const[r,o]=v(e,a,n,s);return h.a.t(t,{count:l()(o),endDate:i()(o,"D"),month:Number(i()(r,"M"))-1,startDate:i()(r,"D"),year:u()(o)})}function E(e,t="chart.usage_legend_label",a=!1,n=!1,s=0){return S(e,t,a,n,s)}},613:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});const n=e=>({"data-testid":e}),s={details:{cluster_lnk:"cluster-lnk",historical_data_btn:"historical-data-btn",show_more_btn:"show-more-btn",tag_lnk:"tag-lnk",view_all_btn:"view-all-btn"},export:{cancel_btn:"cancel-btn",submit_btn:"submit-btn"},login:{alert:"alert",form:"login-form",username_input:"username-input",password_input:"password-input",submit:"submit"},masthead:{masthead:"masthead",username:"username",sidebarToggle:"sidebar-toggle",logout:"logout"},onboarding:{btn_cancel:"btn-cancel",btn_back:"btn-back",btn_continue:"btn-continue",btn_close:"btn-close",type_selector:"type-selector",type_opt_aws:"type-option-aws",type_opt_ocp:"type-option-ocp",type_opt_non:"type-option-non",name_input:"name-input",check_box_1:"check-box-1",check_box_2:"check-box-2",s3_input:"s3-input",clusterid_input:"clusterid-input",arn_input:"arn-input"},providers:{add_btn:"add-btn",bucket_input:"bucket-input",cancel_btn:"cancel-btn",empty_state_add_btn:"empty_state_add-btn",name_input:"provider-name-input",resource_name_input:"provider-resource-name-input",cluster_id_input:"provider-cluster-id-input",submit_btn:"submit-btn",type_input:"provider-type-input",view_all_link:"view-all-lnk"},sidebar:{nav:"vertical-nav",link:"vertical-nav-link",backdrop:"sidebar-backdrop"}}},616:function(e,t,a){"use strict";var n=a(637),s=a(26);function r({report:e,idKey:t,labelKey:a=t,sortDirection:s=0,sortKey:r="cost"}){return Object(n.a)(i({report:e,idKey:t,labelKey:a,sortDirection:s,sortKey:r}),{key:r,direction:s})}function i({report:e,idKey:t,labelKey:a=t}){if(!e)return[];const n=new Map,r=i=>{i.values&&i.values.forEach(r=>{const i=r.clusters&&r.clusters.length>0?r.clusters[0]:void 0,o=i||r.cluster,l=r.capacity?r.capacity.value:0,c=r.cost?r.cost.value:0,u=r.derived_cost?r.derived_cost.value:0,d=r.infrastructure_cost?r.infrastructure_cost.value:0,m=r.markup_cost?r.markup_cost.value:0,h="date"!==t&&"cluster"!==t&&r.cluster?`-${r.cluster}`:"",g=`${r[t]}${h}`;let b;const p=function({report:e,labelKey:t,value:a}){let n=String(t);if(e.meta&&e.meta.group_by){const r=e.meta.group_by;for(const e of Object.keys(r))if(e.indexOf(s.d)){const e=s.d+t;a.hasOwnProperty(e)&&(n=e)}}return n}({report:e,labelKey:a,value:r});b="cluster"===p&&i?i:r[p]instanceof Object?r[p].value:r[p],"account"===p&&r.account_alias&&(b=r.account_alias);const _=r.limit?r.limit.value:0,v=r.request?r.request.value:0,f=r.usage?r.usage.value:0,D=r.usage?r.usage.units:r.cost?r.cost.units:"USD";n.get(g)?n.set(g,Object.assign({},n.get(g),{capacity:n.get(g).capacity+l,cost:n.get(g).cost+c,derivedCost:n.get(g).derivedCost+u,infrastructureCost:n.get(g).infrastructureCost+d,limit:n.get(g).limit+_,markupCost:n.get(g).markupCost+m,request:n.get(g).request+v,usage:n.get(g).usage+f})):n.set(g,{capacity:l,cluster:o,clusters:r.clusters,cost:c,deltaPercent:r.delta_percent,deltaValue:r.delta_value,derivedCost:u,id:g,infrastructureCost:d,label:b,limit:_,markupCost:m,request:v,units:D,usage:f})});for(const e in i)if(i[e]instanceof Array)return i[e].forEach(r)};return e&&e.data&&e.data.forEach(r),Array.from(n.values())}a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i})},620:function(e,t,a){"use strict";var n=a(942),s=a(253);const r={padding:8};var i={area:Object.assign({},r),axis:Object.assign({},r),bar:Object.assign({},r),boxplot:Object.assign({},r),candlestick:Object.assign({},r),chart:Object.assign({},r),errorbar:Object.assign({},r),group:Object.assign({},r),legend:{},line:Object.assign({},r),pie:Object.assign({},r),scatter:Object.assign({},r),stack:Object.assign({},r),tooltip:{},voronoi:Object.assign({},r)};const o=(()=>Object(n.k)(s.q.default,s.r.default,i))();t.a=o},622:function(e,t,a){"use strict";var n=a(1034),s=a(1004),r=a(1001),i=a(1005),o=a(1052),l=a(220),c=a(1),u=a.n(c),d=a(182);const m=l.a.create({container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"}});a.d(t,"a",function(){return h});const h=Object(d.d)()(({icon:e=o.a,t:t})=>{const a=t("loading_state.sources_title"),c=t("loading_state.sources_desc");return u.a.createElement("div",{className:Object(l.b)(m.container)},u.a.createElement(i.a,null,u.a.createElement(r.a,{size:"lg"}),u.a.createElement(n.a,{size:"lg"},a),u.a.createElement(s.a,null,c)))})},625:function(e,t,a){"use strict";var n=a(1034),s=a(1004),r=a(1003),i=a(1005),o=a(1044),l=a(1035),c=a(220),u=a(1),d=a.n(u),m=a(182);const h=c.a.create({container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"}});a.d(t,"a",function(){return g});const g=Object(m.d)()(({error:e,icon:t=l.a,t:a})=>{let u=a("error_state.unexpected_title"),m=a("error_state.unexpected_desc");return e&&e.response&&(401===e.response.status||403===e.response.status)&&(t=o.a,u=a("error_state.unauthorized_title"),m=a("error_state.unauthorized_desc")),d.a.createElement("div",{className:Object(c.b)(h.container)},d.a.createElement(i.a,null,d.a.createElement(r.a,{icon:t}),d.a.createElement(n.a,{size:"lg"},u),d.a.createElement(s.a,null,m)))})},627:function(e,t,a){"use strict";var n=a(1043),s=a(220),r=a(1),i=a.n(r),o=a(151);const l=s.a.create({container:{fontSize:o.global_FontSize_sm.value}});a.d(t,"a",function(){return c});const c=()=>i.a.createElement("span",{className:Object(s.b)(l.container)},i.a.createElement(n.a,null))},628:function(e,t,a){"use strict";var n=a(1024),s=a(1023),r=a(1026),i=a(1034),o=a(1022),l=a(220),c=a(615),u=a(1),d=a.n(u),m=a(182),h=a(151);const g=l.a.create({chartSkeleton:{height:"125px",marginBottom:h.global_spacer_md.value,marginTop:h.global_spacer_md.value},legendSkeleton:{marginTop:h.global_spacer_md.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.global_FontSize_xs.value,color:h.global_Color_200.var,marginBottom:"0"}}),b=Object(m.d)()(({children:e,detailsLink:t,title:a,subTitle:u,status:m,t:h})=>d.a.createElement(r.a,{className:Object(l.b)(g.reportSummary)},d.a.createElement(o.a,null,d.a.createElement(i.a,{size:"lg"},a),Boolean(u)&&d.a.createElement("p",{className:Object(l.b)(g.subtitle)},u)),d.a.createElement(n.a,null,1===m?d.a.createElement(d.a.Fragment,null,d.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),d.a.createElement(c.Skeleton,{className:Object(l.b)(g.chartSkeleton),size:c.SkeletonSize.md}),d.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),d.a.createElement(c.Skeleton,{className:Object(l.b)(g.legendSkeleton),size:c.SkeletonSize.xs})):e),Boolean(t)&&d.a.createElement(s.a,null,t)));var p=a(985),_=a(986);const v=l.a.create({chartSkeleton:{height:"175px",marginBottom:h.global_spacer_md.value,marginTop:h.global_spacer_md.value},container:{display:"flex"},cost:{flexGrow:1,minHeight:"470px",marginRight:h.global_spacer_md.value},legendSkeleton:{marginTop:h.global_spacer_md.value},reportSummary:{height:"100%"},subtitle:{display:"inline-block",fontSize:h.global_FontSize_xs.value,color:h.global_Color_200.var,marginBottom:"0"},tops:{flexGrow:1,marginTop:h.global_spacer_lg.value}}),f=Object(m.d)()(({children:e,detailsLink:t,status:a,subTitle:u,t:m,tabs:h,title:g})=>d.a.createElement(r.a,{className:Object(l.b)(v.reportSummary)},d.a.createElement(_.a,{gutter:"md"},d.a.createElement(p.a,{lg:5,xl:6},d.a.createElement("div",{className:Object(l.b)(v.cost)},d.a.createElement(o.a,null,d.a.createElement(i.a,{size:"lg"},g),Boolean(u)&&d.a.createElement("p",{className:Object(l.b)(v.subtitle)},u)),d.a.createElement(n.a,null,1===a?d.a.createElement(d.a.Fragment,null,d.a.createElement(c.Skeleton,{size:c.SkeletonSize.xs}),d.a.createElement(c.Skeleton,{className:Object(l.b)(v.chartSkeleton),size:c.SkeletonSize.md}),d.a.createElement(c.Skeleton,{size:c.SkeletonSize.sm}),d.a.createElement(c.Skeleton,{className:Object(l.b)(v.legendSkeleton),size:c.SkeletonSize.xs})):e))),d.a.createElement(p.a,{lg:7,xl:6},d.a.createElement("div",{className:Object(l.b)(v.container)},d.a.createElement("div",{className:Object(l.b)(v.tops)},1!==a&&d.a.createElement(d.a.Fragment,null,Boolean(h)&&d.a.createElement(n.a,null,h),Boolean(t)&&d.a.createElement(s.a,null,t))))))));var D=a(902),y=a(627),S=a(609);const E=l.a.create({reportSummaryDetails:{marginBottom:h.global_spacer_md.value,display:"flex",alignItems:"flex-end"},text:{paddingBottom:14,lineHeight:h.global_LineHeight_sm.value,fontSize:h.global_FontSize_xs.value},value:{color:h.global_Color_100.var,marginRight:h.global_spacer_sm.value,fontSize:h.global_FontSize_4xl.value},valueContainer:{display:"inline-block",marginBottom:h.global_spacer_md.value,width:"50%",wordWrap:"break-word"}}),k=Object(m.d)()(({chartType:e,costLabel:t,formatValue:a,formatOptions:n,perspective:s,report:r,requestFormatOptions:i,requestLabel:o,showUnits:c=!1,showUsageFirst:u=!1,t:m,units:h,usageFormatOptions:g,usageLabel:b})=>{let p=d.a.createElement(y.a,null),_=d.a.createElement(y.a,null),v=d.a.createElement(y.a,null),f=d.a.createElement(y.a,null),k=d.a.createElement(y.a,null),O=d.a.createElement(y.a,null);const j=r&&r.meta&&r.meta.total,C=j&&r.meta.total.cost,x=j&&r.meta.total.count,w=j&&r.meta.total.derived_cost,N=j&&r.meta.total.infrastructure_cost,z=j&&r.meta.total.markup_cost,L=j&&r.meta.total.request,R=j&&r.meta.total.usage;j&&(p=a(C?r.meta.total.cost.value:0,C?r.meta.total.cost.units:"USD",n),_=a(w?r.meta.total.derived_cost.value:0,w?r.meta.total.derived_cost.units:"USD",n),v=a(N?r.meta.total.infrastructure_cost.value:0,N?r.meta.total.infrastructure_cost.units:"USD",n),f=a(z?r.meta.total.markup_cost.value:0,z?r.meta.total.markup_cost.units:"USD",n),k=a(L?r.meta.total.request.value:0,L?r.meta.total.request.units:"",i?g:n),O=R&&r.meta.total.usage.value>=0?a(R?r.meta.total.usage.value:0,R?r.meta.total.usage.units:"",g||n):a(R?r.meta.total.usage:0,x?r.meta.total.count.units:"",g||n));const I=()=>d.a.createElement("div",{className:Object(l.b)(E.valueContainer)},Boolean("ocp"===s||"ocp_cloud"===s)?d.a.createElement(D.a,{content:m(`${s}_dashboard.total_cost_tooltip`,"ocp"===s?{infrastructureCost:v,derivedCost:_}:{infrastructureCost:v,markupCost:f}),enableFlip:!0},d.a.createElement("div",{className:Object(l.b)(E.value)},p)):d.a.createElement("div",{className:Object(l.b)(E.value)},p),d.a.createElement("div",{className:Object(l.b)(E.text)},d.a.createElement("div",null,t))),F=()=>{if(!b)return null;const e=L?r.meta.total.request.units:"",t=Object(S.c)(e),a=m(`units.${t}`);return d.a.createElement("div",{className:Object(l.b)(E.valueContainer)},d.a.createElement("div",{className:Object(l.b)(E.value)},k,Boolean(c&&L&&r.meta.total.request.value>=0)&&d.a.createElement("span",{className:Object(l.b)(E.text)},a)),d.a.createElement("div",{className:Object(l.b)(E.text)},d.a.createElement("div",null,o)))},q=()=>{if(!b)return null;const e=R?r.meta.total.usage.units:"",t=Object(S.c)(h||e),a=m(`units.${t}`);return d.a.createElement("div",{className:Object(l.b)(E.valueContainer)},d.a.createElement("div",{className:Object(l.b)(E.value)},O,Boolean(c&&R&&r.meta.total.usage.value>=0)&&d.a.createElement("span",{className:Object(l.b)(E.text)},a)),d.a.createElement("div",{className:Object(l.b)(E.text)},d.a.createElement("div",null,b)))};return"cost"===e?d.a.createElement(d.a.Fragment,null,I()):"trend"===e?u?d.a.createElement(d.a.Fragment,null,q(),I()):d.a.createElement(d.a.Fragment,null,I(),q()):"usage"===e?u?d.a.createElement(d.a.Fragment,null,q(),F()):d.a.createElement(d.a.Fragment,null,F(),q()):null});var O=a(922);const j=l.a.create({reportSummaryItem:{":not(:last-child)":{marginBottom:h.global_spacer_md.value}},test:{":not(foo) svg":{overflow:"visible"}}}),C=({label:e,formatOptions:t,formatValue:a,t:n,totalValue:s,units:r,value:i})=>{const o=Object(S.c)(r),c="usd"!==o?n(`units.${o}`):void 0,u=Number((s?i/s*100:0).toFixed(2)),m=n("percent_of_total",{percent:u,units:c,value:a(i,r,t)});return d.a.createElement("li",{className:Object(l.b)(j.reportSummaryItem)},d.a.createElement(O.a,{label:m,value:u,title:e,size:O.b.sm}))};C.defaultProps={formatValue:e=>e};const x=Object(m.d)()(C);var w=a(616);const N=l.a.create({skeleton:{marginTop:h.global_spacer_md.value}});const z=Object(m.d)()(class extends d.a.Component{shouldComponentUpdate(e){return e.report!==this.props.report}getItems(){const{report:e,idKey:t,labelKey:a}=this.props,n=Object(w.a)({report:e,idKey:t,labelKey:a}),s=n.findIndex(e=>{const t=e.id;if(t&&null!==t)return t.toString().includes("Other")});return-1!==s?[...n.slice(0,s),...n.slice(s+1),n[s]]:n}render(){const{children:e,status:t}=this.props;if(1===t)return d.a.createElement(d.a.Fragment,null,d.a.createElement(c.Skeleton,{size:c.SkeletonSize.md}),d.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(l.b)(N.skeleton)}),d.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(l.b)(N.skeleton)}),d.a.createElement(c.Skeleton,{size:c.SkeletonSize.md,className:Object(l.b)(N.skeleton)}));{const t=this.getItems();return d.a.createElement("ul",null,e({items:t}))}}});var L=a(960),R=a(953),I=a(976),F=a(950),q=a(927),U=a(955),A=a(620),T=a(611),M=a(612),H=a.n(M),B=a(218);const K={currentCostData:{data:{fill:"none",stroke:"#A2DA9C"}},currentInfrastructureCostData:{data:{fill:"none",stroke:"#88D080",strokeDasharray:"3,3"}},itemsPerRow:2,legend:{labels:{fontFamily:h.global_FontFamily_sans_serif.value,fontSize:14},minWidth:200},legendColorScale:[h.global_disabled_color_200.value,h.chart_color_green_100.value,h.global_disabled_color_200.value,h.chart_color_green_200.value],previousCostData:{data:{fill:"none",stroke:h.global_disabled_color_200.value}},previousInfrastructureCostData:{data:{fill:"none",stroke:h.global_disabled_color_200.value,strokeDasharray:"3,3"}},currentColorScale:[h.chart_color_green_100.value,h.chart_color_green_200.value,h.chart_color_green_300.value,h.chart_color_green_400.value,h.chart_color_green_500.value],previousColorScale:[h.global_disabled_color_200.value,h.global_disabled_color_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},V=l.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"}}});class P extends d.a.Component{constructor(){super(...arguments),this.containerRef=d.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=(()=>{const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:n}=this.props,s="chart.cost_legend_label";this.setState({series:[{childName:"previousCost",data:n,legendItem:{name:Object(T.a)(n,s,!0,!0,1),symbol:{type:"minus"}},style:K.previousCostData},{childName:"currentCost",data:t,legendItem:{name:Object(T.a)(t,s,!0,!1),symbol:{type:"minus"}},style:K.currentCostData},{childName:"previousInfrastructureCost",data:a,legendItem:{name:Object(T.a)(a,"chart.cost_infrastructure_legend_label",!0,!0,1),symbol:{type:"dash"}},style:K.previousInfrastructureCostData},{childName:"currentInfrastructureCost",data:e,legendItem:{name:Object(T.a)(e,"chart.cost_infrastructure_legend_label",!0,!1),symbol:{type:"dash"}},style:K.currentInfrastructureCostData}]})}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>{const{hiddenSeries:a}=this.state;return d.a.createElement(U.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})}),this.getLegend=(()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state,a=e||(t>400?K.itemsPerRow:1);return d.a.createElement(q.a,{colorScale:K.legendColorScale,data:this.getLegendData(),height:25,gutter:10,itemsPerRow:a,name:"legend",responsive:!1,style:K.legend})}),this.getTooltipLabel=(({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,n=Object(T.e)(e,Object(T.d)(t),a,"date");return"currentCost"===e.childName||"previousCost"===e.childName?B.a.t("chart.cost_tooltip",{value:n}):"currentInfrastructureCost"===e.childName||"previousInfrastructureCost"===e.childName?B.a.t("chart.cost_infrastructure_tooltip",{value:n}):n}),this.handleLegendClick=(e=>{this.state.hiddenSeries.delete(e.index)||this.state.hiddenSeries.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})}),this.isDataAvailable=(()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length===(e?e.length:0)}),this.isSeriesHidden=(e=>{const{hiddenSeries:t}=this.state;return t.has(e)}),this.getChartNames=(()=>{const{series:e}=this.state,t=[];return e&&e.map((e,a)=>{t.push(e.childName)}),t}),this.getEvents=(()=>{return Object(L.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick})}),this.getLegendData=(()=>{const{hiddenSeries:e,series:t}=this.state;if(t){return t.map((t,a)=>Object.assign({},t.legendItem,Object(L.b)(e.has(a))))}})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.currentCostData===this.props.currentCostData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData&&e.previousCostData===this.props.previousCostData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:n}=this.props,s={x:[1,31]},r=e?Object(T.c)(e):0,i=t?Object(T.c)(t):0,o=a?Object(T.c)(a):0,l=n?Object(T.c)(n):0,c=Math.max(r,i,o,l),u=c>0?Math.ceil(c+.1*c):0;return u>0&&(s.y=[0,u]),s}getEndDate(){const{currentInfrastructureCostData:e,currentCostData:t,previousInfrastructureCostData:a,previousCostData:n}=this.props,s=e?H()(Object(T.b)(e,!0,!0)[1]):0,r=t?H()(Object(T.b)(t,!0,!0)[1]):0,i=a?H()(Object(T.b)(a,!0,!0)[1]):0,o=n?H()(Object(T.b)(n,!0,!0)[1]):0;return s>0||r>0||i>0||o>0?Math.max(s,r,i,o):31}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,padding:n,title:s}=this.props,{series:r,width:i}=this.state,o=this.isDataAvailable(),c=d.a.createElement(F.a,{allowTooltip:!o,constrainToVisibleArea:!0,labels:o?void 0:this.getTooltipLabel,voronoiDimension:"x"}),u=this.getDomain(),m=this.getEndDate(),h=Math.floor(m/2),g=e?i>400?a:a+75:a;return d.a.createElement("div",{className:Object(l.b)(V.chartContainer),ref:this.containerRef,style:{height:g}},d.a.createElement("div",null,s),d.a.createElement(I.a,{containerComponent:c,domain:u,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:n,theme:A.a,width:i},r&&r.map((e,t)=>this.getChart(e,t)),d.a.createElement(R.a,{style:K.xAxis,tickValues:[1,h,m]}),d.a.createElement(R.a,{dependentAxis:!0,style:K.yAxis})))}}const W=l.a.create({chart:{marginBottom:h.global_spacer_sm.value}}),$=e=>d.a.createElement("div",{className:Object(l.b)(W.chart)},d.a.createElement(P,Object.assign({},e))),Y={legend:{labels:{fontFamily:h.global_FontFamily_sans_serif.value,fontSize:14},minWidth:175},legendColorScale:[h.global_disabled_color_200.value,h.chart_color_green_100.value,h.chart_color_green_200.value,h.chart_color_green_300.value,h.chart_color_green_400.value,h.chart_color_green_500.value],previousMonth:{data:{fill:"none",stroke:h.global_disabled_color_200.value}},currentMonth:{data:{fill:"none",stroke:"#A2DA9C"}},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},X=l.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"}}});class G extends d.a.Component{constructor(){super(...arguments),this.containerRef=d.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=(()=>{const{currentData:e,previousData:t,showUsageLegendLabel:a=!1}=this.props,n=a?"chart.usage_legend_label":"chart.cost_legend_label";this.setState({series:[{childName:"previousCost",data:t,legendItem:{name:Object(T.a)(t,n,!0,!0,1),symbol:{type:"minus"}},style:Y.previousMonth},{childName:"currentCost",data:e,legendItem:{name:Object(T.a)(e,n,!0,!1),symbol:{type:"minus"}},style:Y.currentMonth}]})}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>{const{hiddenSeries:a}=this.state;return d.a.createElement(U.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})}),this.getLegend=(()=>{const{width:e}=this.state;return d.a.createElement(q.a,{colorScale:Y.legendColorScale,data:this.getLegendData(),gutter:10,height:25,name:"legend",orientation:e>150?"horizontal":"vertical",style:Y.legend})}),this.getTooltipLabel=(({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a,units:n}=this.props;return Object(T.e)(e,Object(T.d)(t),a,"date",n)}),this.handleLegendClick=(e=>{this.state.hiddenSeries.delete(e.index)||this.state.hiddenSeries.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})}),this.isDataAvailable=(()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length===(e?e.length:0)}),this.isSeriesHidden=(e=>{const{hiddenSeries:t}=this.state;return t.has(e)}),this.getChartNames=(()=>{const{series:e}=this.state,t=[];return e&&e.map((e,a)=>{t.push(e.childName)}),t}),this.getEvents=(()=>{return Object(L.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick})}),this.getLegendData=(()=>{const{hiddenSeries:e,series:t}=this.state;if(t){return t.map((t,a)=>Object.assign({},t.legendItem,Object(L.b)(e.has(a))))}})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentData===this.props.currentData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentData:e,previousData:t}=this.props,a={x:[1,31]},n=e?Object(T.c)(e):0,s=t?Object(T.c)(t):0,r=Math.max(n,s),i=r>0?Math.ceil(r+.1*r):0;return i>0&&(a.y=[0,i]),a}getEndDate(){const{currentData:e,previousData:t}=this.props,a=t?H()(Object(T.b)(t,!0,!0)[1]):0,n=e?H()(Object(T.b)(e,!0,!0)[1]):0;return n>0||a>0?Math.max(n,a):31}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,padding:n,title:s}=this.props,{series:r,width:i}=this.state,o=this.isDataAvailable(),c=d.a.createElement(F.a,{allowTooltip:!o,constrainToVisibleArea:!0,labels:o?void 0:this.getTooltipLabel,voronoiDimension:"x"}),u=this.getDomain(),m=this.getEndDate(),h=Math.floor(m/2),g=e?i>400?a:a+75:a;return d.a.createElement("div",{className:Object(l.b)(X.chartContainer),ref:this.containerRef,style:{height:g}},d.a.createElement("div",null,s),d.a.createElement(I.a,{containerComponent:c,domain:u,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:n,theme:A.a,width:i},r&&r.map((e,t)=>this.getChart(e,t)),d.a.createElement(R.a,{style:Y.xAxis,tickValues:[1,h,m]}),d.a.createElement(R.a,{dependentAxis:!0,style:Y.yAxis})))}}const J=e=>d.a.createElement("div",{className:Object(l.b)(W.chart)},d.a.createElement(G,Object.assign({},e))),Q={currentRequestData:{data:{fill:"none",stroke:"#88D080",strokeDasharray:"3,3"}},currentUsageData:{data:{fill:"none",stroke:"#A2DA9C"}},itemsPerRow:2,legend:{labels:{fontFamily:h.global_FontFamily_sans_serif.value,fontSize:14},minWidth:380},legendColorScale:[h.global_disabled_color_200.value,h.chart_color_green_100.value,h.global_disabled_color_200.value,h.chart_color_green_200.value],previousRequestData:{data:{fill:"none",stroke:h.global_disabled_color_200.value,strokeDasharray:"3,3"}},previousUsageData:{data:{fill:"none",stroke:h.global_disabled_color_200.value}},currentColorScale:[h.chart_color_green_100.value,h.chart_color_green_200.value,h.chart_color_green_300.value,h.chart_color_green_400.value,h.chart_color_green_500.value],previousColorScale:[h.global_disabled_color_200.value,h.global_disabled_color_200.value],yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},Z=l.a.create({chartContainer:{":not(foo) svg":{overflow:"visible"},marginTop:h.global_spacer_lg.value}});class ee extends d.a.Component{constructor(){super(...arguments),this.containerRef=d.a.createRef(),this.state={hiddenSeries:new Set,width:0},this.initDatum=(()=>{const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:n}=this.props;this.setState({series:[{childName:"previousUsage",data:n,legendItem:{name:Object(T.f)(n,"chart.usage_legend_label",!0,!0,1),symbol:{type:"minus"}},style:Q.previousUsageData},{childName:"currentUsage",data:t,legendItem:{name:Object(T.f)(t,"chart.usage_legend_label",!0,!1),symbol:{type:"minus"}},style:Q.currentUsageData},{childName:"previousRequest",data:a,legendItem:{name:Object(T.f)(a,"chart.requests_legend_label",!0,!0,1),symbol:{type:"dash"}},style:Q.previousRequestData},{childName:"currentRequest",data:e,legendItem:{name:Object(T.f)(e,"chart.requests_legend_label",!0,!1),symbol:{type:"dash"}},style:Q.currentRequestData}]})}),this.handleResize=(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth})}),this.getChart=((e,t)=>{const{hiddenSeries:a}=this.state;return d.a.createElement(U.a,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})}),this.getLegend=(()=>{const{legendItemsPerRow:e}=this.props,{width:t}=this.state,a=e||(t>300?Q.itemsPerRow:1);return d.a.createElement(q.a,{colorScale:Q.legendColorScale,data:this.getLegendData(),height:25,gutter:10,itemsPerRow:a,name:"legend",style:Q.legend})}),this.getTooltipLabel=(({datum:e})=>{const{formatDatumValue:t,formatDatumOptions:a}=this.props,n=Object(T.e)(e,Object(T.d)(t),a,"date");return"currentRequest"===e.childName||"previousRequest"===e.childName?B.a.t("chart.requests_tooltip",{value:n}):"currentUsage"===e.childName||"previousUsage"===e.childName?B.a.t("chart.usage_tooltip",{value:n}):n}),this.handleLegendClick=(e=>{this.state.hiddenSeries.delete(e.index)||this.state.hiddenSeries.add(e.index),this.setState({hiddenSeries:new Set(this.state.hiddenSeries)})}),this.isDataAvailable=(()=>{const{series:e}=this.state,t=[];return e&&e.forEach((e,a)=>{(this.isSeriesHidden(a)||e.data&&0===e.data.length)&&t.push(a)}),t.length===(e?e.length:0)}),this.isSeriesHidden=(e=>{const{hiddenSeries:t}=this.state;return t.has(e)}),this.getChartNames=(()=>{const{series:e}=this.state,t=[];return e&&e.map((e,a)=>{t.push(e.childName)}),t}),this.getEvents=(()=>{return Object(L.a)({chartNames:this.getChartNames(),isHidden:this.isSeriesHidden,legendName:"legend",onLegendClick:this.handleLegendClick})}),this.getLegendData=(()=>{const{hiddenSeries:e,series:t}=this.state;if(t){return t.map((t,a)=>Object.assign({},t.legendItem,Object(L.b)(e.has(a))))}})}componentDidMount(){setTimeout(()=>{this.containerRef.current&&this.setState({width:this.containerRef.current.clientWidth}),window.addEventListener("resize",this.handleResize)}),this.initDatum()}componentDidUpdate(e){e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}getDomain(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:n}=this.props,s={x:[1,31]},r=e?Object(T.c)(e):0,i=t?Object(T.c)(t):0,o=a?Object(T.c)(a):0,l=n?Object(T.c)(n):0,c=Math.max(r,i,o,l),u=c>0?Math.ceil(c+.1*c):0;return u>0&&(s.y=[0,u]),s}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:n}=this.props,s=e?H()(Object(T.b)(e,!0,!0)[1]):0,r=t?H()(Object(T.b)(t,!0,!0)[1]):0,i=a?H()(Object(T.b)(a,!0,!0)[1]):0,o=n?H()(Object(T.b)(n,!0,!0)[1]):0;return s>0||r>0||i>0||o>0?Math.max(s,r,i,o):31}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,padding:n,title:s}=this.props,{series:r,width:i}=this.state,o=this.isDataAvailable(),c=d.a.createElement(F.a,{allowTooltip:!o,constrainToVisibleArea:!0,labels:o?void 0:this.getTooltipLabel,voronoiDimension:"x"}),u=this.getDomain(),m=this.getEndDate(),h=Math.floor(m/2),g=e?i>400?a:a+75:a;return d.a.createElement("div",{className:Object(l.b)(Z.chartContainer),ref:this.containerRef,style:{height:g}},d.a.createElement("div",null,s),d.a.createElement(I.a,{containerComponent:c,domain:u,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:this.getLegendData(),legendPosition:"bottom-left",padding:n,theme:A.a,width:i},r&&r.map((e,t)=>this.getChart(e,t)),d.a.createElement(R.a,{style:Q.xAxis,tickValues:[1,h,m]}),d.a.createElement(R.a,{dependentAxis:!0,style:Q.yAxis})))}}const te=e=>d.a.createElement("div",{className:Object(l.b)(W.chart)},d.a.createElement(ee,Object.assign({},e)));a.d(t,"a",function(){return b}),a.d(t,"b",function(){return f}),a.d(t,"d",function(){return k}),a.d(t,"e",function(){return x}),a.d(t,"f",function(){return z}),a.d(t,"c",function(){return $}),a.d(t,"g",function(){return J}),a.d(t,"h",function(){return te})},637:function(e,t,a){"use strict";function n(e,t){if("string"==typeof e)return e;return e[t.key]}function s(e,t){const{direction:a=0}=t||{};return[...e].sort((e,s)=>{const r=n(0===a?e:s,t),i=n(0===a?s:e,t);return r>i?-1:r<i?1:0})}a.d(t,"a",function(){return s})},643:function(e,t,a){"use strict";var n=a(1034),s=a(1004),r=a(1005),i=a(1003),o=a(1050),l=a(220),c=a(1),u=a.n(c),d=a(182),m=a(134),h=a(613),g=a(151);const b=l.a.create({container:{display:"flex",justifyContent:"center",height:"100vh",marginTop:"150px"},viewSources:{marginTop:g.global_spacer_lg.value}});a.d(t,"a",function(){return p});const p=Object(d.d)()(Object(m.connect)()(class extends u.a.Component{constructor(){super(...arguments),this.getViewSources=(()=>{const{t:e}=this.props,t=window.location.pathname.split("/");t.shift();let a="";return"beta"===t[0]&&(a="/beta"),u.a.createElement("a",Object.assign({href:`${a}/settings/sources`},Object(h.a)(h.b.providers.view_all_link)),e("providers.view_sources"))})}render(){const{t:e}=this.props;return u.a.createElement("div",{className:Object(l.b)(b.container)},u.a.createElement(r.a,null,u.a.createElement(i.a,{icon:o.a}),u.a.createElement(n.a,{size:"lg"},e("providers.empty_state_title")),u.a.createElement(s.a,null,e("providers.empty_state_desc")),u.a.createElement("div",{className:Object(l.b)(b.viewSources)},this.getViewSources())))}}))}}]);
//# sourceMappingURL=591bf0c94880a11bcfb2.bundle.js.map