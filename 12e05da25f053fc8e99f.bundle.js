"use strict";(self.webpackChunkkoku_ui=self.webpackChunkkoku_ui||[]).push([[953],{8748:(e,t,a)=>{a.d(t,{e:()=>f});var r=a(65834),s=a(45997),n=a(93952),o=a(92950),i=a.n(o),l=a(74806),c=a(65048),u=a(16550),p=a(44149),h=a(94377),m=a(87932);class d extends i().Component{constructor(e,t){super(e,t),this.defaultState={isDropdownOpen:!1,isExportModalOpen:!1},this.state=Object.assign({},this.defaultState),this.getExportModal=()=>{const{groupBy:e,item:t,query:a,reportPathsType:r}=this.props,{isExportModalOpen:s}=this.state;return i().createElement(p.X,{count:1,groupBy:e,isOpen:s,items:[t],onClose:this.handleExportModalClose,query:a,reportPathsType:r})},this.handleExportModalClose=e=>{this.setState({isExportModalOpen:e})},this.handleExportModalOpen=()=>{this.setState({isExportModalOpen:!0})},this.handleOnSelect=()=>{const{isDropdownOpen:e}=this.state;this.setState({isDropdownOpen:!e})},this.handleOnToggle=e=>{this.setState({isDropdownOpen:e})},this.handleExportModalClose=this.handleExportModalClose.bind(this),this.handleExportModalOpen=this.handleExportModalOpen.bind(this),this.handleOnToggle=this.handleOnToggle.bind(this),this.handleOnSelect=this.handleOnSelect.bind(this)}render(){const{groupBy:e,isDisabled:t,showPriceListOption:a,intl:o,redirectToCostModel:l,history:c,item:{source_uuid:u}}=this.props,p=[i().createElement(r.DropdownItem,{component:"button",isDisabled:t,key:"export-action",onClick:this.handleExportModalOpen},o.formatMessage(n.Z.detailsActionsExport))];return a&&p.unshift(i().createElement(r.DropdownItem,{component:"button",key:"price-list-action",isDisabled:t||e.includes(s.P)||0===u.length,onClick:()=>l(u[0],c)},o.formatMessage(n.Z.detailsActionsPriceList))),i().createElement(i().Fragment,null,i().createElement(r.Dropdown,{onSelect:this.handleOnSelect,toggle:i().createElement(r.KebabToggle,{onToggle:this.handleOnToggle}),isOpen:this.state.isDropdownOpen,isPlain:!0,position:"right",dropdownItems:p}),this.getExportModal())}}const g=(0,h.X1)(((e,t)=>({}))),y={redirectToCostModel:m.F0.redirectToCostModelFromSourceUuid},v=(0,c.connect)(g,y)(d),f=(0,l.ZP)((0,u.EN)(v))},99278:(e,t,a)=>{a.d(t,{Z:()=>re});var r=a(65834),s=a(45997),n=a(93952),o=a(92950),i=a.n(o),l=a(74806),c=a(96464),u=a(27681),p=a(19569),h=a(20963),m=a(94676),d=a(98499);const g={content:{paddingBottom:d.ZP.value,paddingLeft:d.ZP.value,paddingRight:d.ZP.value,paddingTop:d.ZP.value}};var y=a(71973),v=a(65048),f=a(73727),b=a(34310),C=a(29886),T=a(55785),S=a(84072),E=a(94377),D=a(7917),O=a(76821),Z=a(23992),L=a(11331),R=a(48196);const k={dataListHeading:{fontWeight:Z.ZP.value},groupByHeading:{marginBottom:d.ZP.value},tagLink:{marginLeft:R.ZP.value},tagsContainer:{marginRight:L.ZP.value,marginTop:R.ZP.value}};class P extends i().Component{constructor(){super(...arguments),this.getDataListItems=()=>{const{tagReport:e}=this.props,t=[];if(e)for(const a of e.data)for(const e of a.values){const s=`${a.key}:${e}`;t.push(i().createElement(r.DataListItem,{"aria-labelledby":s,key:`${s}-item`},i().createElement(r.DataListItemRow,null,i().createElement(r.DataListItemCells,{dataListCells:[i().createElement(r.DataListCell,{key:`${s}-cell1`},i().createElement("span",{id:s},a.key)),i().createElement(r.DataListCell,{key:`${s}-cell2`},e)]}))))}return t}}render(){const{groupBy:e,groupByValue:t,intl:a}=this.props,s=this.getDataListItems();return i().createElement(i().Fragment,null,i().createElement("div",null,i().createElement("span",{style:k.dataListHeading},a.formatMessage(n.Z.groupByValues,{value:e,count:1}))),i().createElement("div",{style:k.groupByHeading},i().createElement("span",null,t)),i().createElement(r.DataList,{"aria-label":a.formatMessage(n.Z.tagNames),isCompact:!0},i().createElement(r.DataListItem,{"aria-labelledby":"heading1"},i().createElement(r.DataListItemRow,null,i().createElement(r.DataListItemCells,{dataListCells:[i().createElement(r.DataListCell,{key:"primary content"},i().createElement("span",{id:"heading1",style:k.dataListHeading},a.formatMessage(n.Z.tagHeadingKey))),i().createElement(r.DataListCell,{key:"secondary content"},i().createElement("span",{id:"heading2",style:k.dataListHeading},a.formatMessage(n.Z.tagHeadingValue)))]}))),s.map((e=>e))))}}const x=(0,l.ZP)((0,v.connect)()(P)),M="tag";class w extends i().Component{constructor(e){super(e),this.getTagValueCount=()=>{const{tagReport:e}=this.props;let t=0;if(e)for(const a of e.data)a.values&&(t+=a.values.length);return t},this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}componentDidMount(){const{fetchTag:e,queryString:t,tagReportPathsType:a}=this.props;e(a,M,t)}componentDidUpdate(e){const{fetchTag:t,queryString:a,tagReportPathsType:r}=this.props;e.queryString!==a&&t(r,M,a)}shouldComponentUpdate(e){const{groupByValue:t,isOpen:a}=this.props;return e.groupByValue!==t||e.isOpen!==a}render(){const{groupBy:e,isOpen:t,query:a,tagReport:s,intl:o}=this.props,l=a&&a.filter&&a.filter.account?a.filter.account:this.props.groupByValue;return i().createElement(r.Modal,{isOpen:t,onClose:this.handleClose,title:o.formatMessage(n.Z.tagHeadingTitle,{value:this.getTagValueCount()}),width:"50%"},i().createElement(x,{groupBy:e,groupByValue:l,tagReport:s}))}}const _=(0,E.X1)(((e,{tagReportPathsType:t})=>{const a=(0,s.mB)(location.search),r=(0,S.OA)(a),n=r?s.dV:(0,S.VL)(a),o=r||(0,S.pe)(a),i=a&&a.filter_by?a.filter_by:{};for(const e of Object.keys(i))-1!==e.indexOf(s.P)&&(i[e]=void 0);const l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},i),a&&a.filter&&a.filter.account&&{[`${s.Sq}account`]:a.filter.account}),n&&-1===n.indexOf(s.P)&&{[n]:o})},c=(0,s.pm)(l);return{groupBy:n,groupByValue:o,query:a,queryString:c,tagReport:D.ux.selectTag(e,t,M,c),tagReportFetchStatus:D.ux.selectTagFetchStatus(e,t,M,c)}})),B={fetchTag:D.xr.Xt},j=(0,l.ZP)((0,v.connect)(_,B)(w)),V="tag";class U extends i().Component{constructor(e){super(e),this.defaultState={isOpen:!1},this.state=Object.assign({},this.defaultState),this.handleClose=e=>{this.setState({isOpen:e})},this.handleOpen=e=>(this.setState({isOpen:!0}),e.preventDefault(),!1),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this)}componentDidMount(){const{fetchTag:e,queryString:t,tagReportPathsType:a}=this.props;e(a,V,t)}componentDidUpdate(e){const{fetchTag:t,queryString:a,tagReportPathsType:r}=this.props;e.queryString!==a&&t(r,V,a)}render(){const{id:e,tagReport:t,tagReportPathsType:a}=this.props,{isOpen:r}=this.state;let s=0;if(t)for(const e of t.data)e.values&&(s+=e.values.length);return i().createElement("div",{style:k.tagsContainer,id:e},Boolean(s>0)&&i().createElement(i().Fragment,null,i().createElement(T.lO,null),i().createElement("a",Object.assign({},(0,O.g_)(O._q.details.tag_lnk),{href:"#/",onClick:this.handleOpen,style:k.tagLink}),s)),i().createElement(j,{isOpen:r,onClose:this.handleClose,tagReportPathsType:a}))}}const q=(0,E.X1)(((e,{tagReportPathsType:t})=>{const a=(0,s.mB)(location.search),r=(0,S.OA)(a),n=r?s.dV:(0,S.VL)(a),o=r||(0,S.pe)(a),i=a&&a.filter_by?a.filter_by:{};for(const e of Object.keys(i))-1!==e.indexOf(s.P)&&(i[e]=void 0);const l={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign({},i),a&&a.filter&&a.filter.account&&{[`${s.Sq}account`]:a.filter.account}),n&&-1===n.indexOf(s.P)&&{[n]:o})},c=(0,s.pm)(l);return{groupBy:n,groupByValue:o,query:a,queryString:c,tagReport:D.ux.selectTag(e,t,V,c),tagReportFetchStatus:D.ux.selectTagFetchStatus(e,t,V,c)}})),N={fetchTag:D.xr.Xt},F=(0,l.ZP)((0,v.connect)(q,N)(U));var z=a(21084),A=a(33307),I=a(99291),G=a(72892),Q=a(12289),W=a(40794),$=a(32412),H=a(57640),X=a(73861);const J={cost:{marginTop:H.ZP.var},costLabel:{marginTop:X.ZP.var},costValue:{marginTop:0,marginBottom:0,textAlign:"right"},costLabelDate:{textAlign:"right"},costType:{marginTop:$.ZP.var},header:{backgroundColor:G.ZP.var,paddingLeft:d.ZP.var,paddingRight:d.ZP.var,paddingTop:d.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentRight:{display:"flex"},infoDescription:{color:Q.ZP.value,fontSize:W.ZP.value},tabs:{display:"flex"},tag:{marginLeft:d.ZP.var},title:{paddingBottom:d.ZP.var,paddingTop:X.ZP.var}};class K extends i().Component{constructor(){super(...arguments),this.buildDetailsLink=()=>{const{detailsURL:e,groupBy:t,query:a}=this.props;let r=t,n="*";a[s.dV]&&(r=s.dV,n=a[s.dV]);const o=Object.assign(Object.assign({},JSON.parse(JSON.stringify(a))),{group_by:{[r]:n}});return o.filter&&(o.filter.account=void 0,o[s.eG]=void 0,o[s.dV]=void 0,o[s.yG]=void 0),`${e}?${(0,s.IV)(o)}`},this.getTotalCost=()=>{const{report:e}=this.props,t=e&&e.meta&&e.meta.total&&e.meta.total.cost&&e.meta.total.cost.total;return(0,I.xG)(t?e.meta.total.cost.total.value:0,t?e.meta.total.cost.total.units:"USD")}}render(){const{costType:e,currency:t,description:a,groupBy:o,intl:l,isCurrencyFeatureEnabled:c,onCostTypeSelected:u,onCurrencySelected:p,query:h,showCostType:m=!1,tabs:d,tagReportPathsType:g,title:v}=this.props,T=h&&h.filter?h.filter.account:void 0,E=(0,S.OA)(h),D=(0,S.qV)(h),O=T||"account"===o||"project"===o||"gcp_project"===o||"subscription_guid"===o,Z=T?"account":D?"tag":E?s.dV:o;return i().createElement("header",{style:J.header},i().createElement("div",{style:J.headerContent},i().createElement("nav",{"aria-label":l.formatMessage(n.Z.breakdownBackToDetailsAriaLabel),className:"breadcrumbOverride"},i().createElement("ol",{className:"pf-c-breadcrumb__list"},i().createElement("li",{className:"pf-c-breadcrumb__item"},i().createElement("span",{className:"pf-c-breadcrumb__item-divider"},i().createElement(y.fP,null)),i().createElement(f.rU,{to:this.buildDetailsLink()},l.formatMessage(n.Z.breakdownBackToDetails,{value:l.formatMessage(n.Z.breakdownBackToTitles,{value:g}),groupBy:Z}))))),i().createElement("div",{style:J.headerContentRight},c&&i().createElement(b.F,{currency:t,onSelect:p}))),i().createElement("div",{style:J.headerContent},i().createElement("div",{style:J.title},i().createElement(r.Title,{headingLevel:"h1",size:r.TitleSizes["2xl"]},l.formatMessage(n.Z.breakdownTitle,{value:v}),a&&i().createElement("div",{style:J.infoDescription},a)),m&&i().createElement("div",{style:J.costType},i().createElement(C.T,{onSelect:u,costType:e}))),i().createElement("div",{style:J.cost},i().createElement("div",{style:J.costLabel},i().createElement(r.Title,{headingLevel:"h2",style:J.costValue,size:r.TitleSizes["4xl"]},i().createElement("span",null,this.getTotalCost()))),i().createElement("div",{style:J.costLabelDate},(0,A.Y)(l.formatMessage(n.Z.groupByValuesTitleCase,{value:Z,count:2}),n.Z.breakdownTotalCostDate,0)))),i().createElement("div",null,i().createElement("div",{style:J.tabs},d,i().createElement("div",{style:J.tag},Boolean(O)&&i().createElement(F,{id:"tags",tagReportPathsType:g})))))}}const Y=(0,E.X1)((e=>({isCurrencyFeatureEnabled:z.iJ.selectIsCurrencyFeatureEnabled(e)}))),ee=(0,l.ZP)((0,v.connect)(Y,{})(K)),te=e=>{switch(e){case"cost-overview":return"cost-overview";case"historical-data":return"historical-data"}};class ae extends i().Component{constructor(){super(...arguments),this.defaultState={activeTabKey:0},this.state=Object.assign({},this.defaultState),this.getAvailableTabs=()=>[{contentRef:i().createRef(),tab:"cost-overview"},{contentRef:i().createRef(),tab:"historical-data"}],this.getRouteForQuery=e=>{const{history:t}=this.props;return`${t.location.pathname}?${(0,s.IV)(e)}`},this.getTab=(e,t,a)=>i().createElement(r.Tab,{eventKey:a,key:`${te(e)}-tab`,tabContentId:`tab-${a}`,tabContentRef:t,title:i().createElement(r.TabTitleText,null,this.getTabTitle(e))}),this.getTabContent=e=>e.map(((e,t)=>i().createElement(r.TabContent,{eventKey:t,key:`${te(e.tab)}-tabContent`,id:`tab-${t}`,ref:e.contentRef},this.getTabItem(e.tab,t)))),this.getTabItem=(e,t)=>{const{costOverviewComponent:a,historicalDataComponent:r}=this.props,{activeTabKey:s}=this.state,n=i().createElement(i().Fragment,null);if(s!==t)return n;const o=te(e);return"cost-overview"===o?a:"historical-data"===o?r:n},this.getTabs=e=>{const{activeTabKey:t}=this.state;return i().createElement(r.Tabs,{activeKey:t,onSelect:this.handleTabClick},e.map(((e,t)=>this.getTab(e.tab,e.contentRef,t))))},this.getTabTitle=e=>{const{intl:t}=this.props;return"cost-overview"===e?t.formatMessage(n.Z.breakdownCostOverviewTitle):"historical-data"===e?t.formatMessage(n.Z.breakdownHistoricalDataTitle):void 0},this.handleCostTypeSelected=e=>{const{history:t,query:a}=this.props,r=Object.assign(Object.assign({},JSON.parse(JSON.stringify(a))),{cost_type:e});t.replace(this.getRouteForQuery(r))},this.handleCurrencySelected=e=>{const{history:t,query:a}=this.props,r=Object.assign(Object.assign({},JSON.parse(JSON.stringify(a))),{currency:e});t.replace(this.getRouteForQuery(r))},this.handleTabClick=(e,t)=>{const{activeTabKey:a}=this.state;a!==t&&this.setState({activeTabKey:t})},this.updateReport=()=>{const{location:e,fetchReport:t,queryString:a,reportPathsType:r,reportType:s}=this.props;e.search&&t(r,s,a)}}componentDidMount(){this.updateReport()}componentDidUpdate(e){const{location:t,report:a,reportError:r,queryString:s}=this.props,n=e.queryString!==s,o=!a&&!r,i=!t.search;(n||o||i)&&this.updateReport()}render(){const{costType:e,currency:t,description:a,detailsURL:r,emptyStateTitle:s,groupBy:n,providers:o,providersFetchStatus:l,providerType:d,query:y,report:v,reportError:f,reportFetchStatus:b,showCostType:C,tagReportPathsType:T,title:S}=this.props,E=this.getAvailableTabs();if(f)return i().createElement(h.W,{title:s});if(1===l&&1===b)return i().createElement(c.g,{title:s});if(2===l&&2===b){if(o&&o.meta&&0===o.meta.count&&2===l)return i().createElement(p.L,{providerType:d,title:s});if(!(0,m.g8)(o))return i().createElement(u.J,{title:S})}return i().createElement(i().Fragment,null,i().createElement(ee,{costType:e,currency:t,description:a,detailsURL:r,groupBy:n,onCostTypeSelected:this.handleCostTypeSelected,onCurrencySelected:this.handleCurrencySelected,query:y,report:v,showCostType:C,tabs:this.getTabs(E),tagReportPathsType:T,title:S}),i().createElement("div",{style:g.content},this.getTabContent(E)))}}const re=(0,l.ZP)(ae)},59575:(e,t,a)=>{a.d(t,{X:()=>ue});var r=a(65834),s=a(91290),n=a(45997),o=a(93952),i=a(92950),l=a.n(i),c=a(74806),u=a(76821),p=a(31447),h=a(11331),m=a(48196);const d={clustersContainer:{marginRight:h.ZP.value,marginTop:m.ZP.value}};class g extends l().Component{render(){const{item:e}=this.props;return e.clusters?e.clusters.map(((e,t)=>l().createElement("div",{key:`cluster-${t}`},e))):null}}const y=(0,c.ZP)(g),v={modal:{height:"700px",width:"600px"},subTitle:{marginTop:a(91707).ZP.value,textAlign:"right"}};class f extends l().Component{constructor(e){super(e),this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}shouldComponentUpdate(e){const{isOpen:t,item:a}=this.props;return e.item!==a||e.isOpen!==t}render(){const{groupBy:e,isOpen:t,item:a,intl:s}=this.props;return l().createElement(r.Modal,{className:"modalOverride",style:v.modal,isOpen:t,onClose:this.handleClose,title:s.formatMessage(o.Z.detailsClustersModalTitle,{groupBy:e,name:a.label}),width:"50%"},l().createElement(y,{item:a}))}}const b=(0,c.ZP)(f);class C extends l().Component{constructor(e){super(e),this.defaultState={isOpen:!1,showAll:!1},this.state=Object.assign({},this.defaultState),this.handleClose=e=>{this.setState({isOpen:e})},this.handleOpen=e=>(this.setState({isOpen:!0}),e.preventDefault(),!1),this.handleClose=this.handleClose.bind(this),this.handleOpen=this.handleOpen.bind(this)}render(){const{groupBy:e,report:t,intl:a}=this.props,{isOpen:r,showAll:s}=this.state;let n=0;const i=[],c=[],h=(0,p.R)({report:t,idKey:e}),m=h&&h.length?h[0]:void 0;if(!m)return null;for(const e of m.clusters){const t=`${i.length>0?", ":""}${e}`;s?i.push(t):n<=50&&(n+t.length>50?i.push(t.slice(0,50-n).trim().concat("...")):i.push(t)),n+=t.length,c.push(e)}return l().createElement("div",{style:d.clustersContainer},Boolean(i)&&i.map(((e,t)=>l().createElement("span",{key:t},e))),Boolean(i.length<c.length)&&l().createElement("a",Object.assign({},(0,u.g_)(u._q.details.cluster_lnk),{href:"#/",onClick:this.handleOpen}),a.formatMessage(o.Z.detailsMoreClusters,{value:c.length-i.length})),l().createElement(b,{groupBy:e,isOpen:r,item:m,onClose:this.handleClose}))}}const T=(0,c.ZP)(C);var S=a(10310),E=a(80469),D=a(34502),O=a(63722),Z=a(99291),L=a(57279),R=a(23992),k=a(32412);const P={chartHeight:150,chartWidth:400,subTitle:{fontWeight:R.ZP.value}},x={chartSkeleton:{height:"125px",marginBottom:k.ZP.value,marginTop:h.ZP.value}};class M extends l().Component{constructor(){super(...arguments),this.getLegendLabel=()=>e=>{var{values:t}=e,a=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}(e,["values"]);return l().createElement(S.Df,Object.assign({},a,{style:[{fontWeight:P.subTitle.fontWeight},{}],text:[t[a.index],a.text]}))},this.getSkeleton=()=>l().createElement(l().Fragment,null,l().createElement(r.Skeleton,{style:x.chartSkeleton,width:L.N.md}))}render(){const{name:e,report:t,reportFetchStatus:a,intl:r}=this.props,s=t&&t.meta&&t.meta.total&&t.meta.total.cost,n=s&&t.meta.total.cost.markup,i=s&&t.meta.total.cost.raw,c=s&&t.meta.total.cost.usage,u=n?t.meta.total.cost.markup.units:"USD",p=i?t.meta.total.cost.raw.units:"USD",h=c?t.meta.total.cost.usage.units:"USD",m=n?t.meta.total.cost.markup.value:0,d=i?t.meta.total.cost.raw.value:0,g=c?t.meta.total.cost.usage.value:0,y=(0,Z.xG)(n?t.meta.total.cost.markup.value:0,u),v=(0,Z.xG)(i?t.meta.total.cost.raw.value:0,p),f=(0,Z.xG)(c?t.meta.total.cost.usage.value:0,h),b=r.formatMessage(o.Z.markupTitle),C=r.formatMessage(o.Z.rawCostTitle),T=r.formatMessage(o.Z.usageCostTitle),S=this.getLegendLabel(),L=l().createElement(E.Qk,{gutter:25,itemsPerRow:2,labelComponent:l().createElement(S,{dy:10,lineHeight:1.5,values:[v,y,f]}),rowGutter:20});return l().createElement("div",{style:{height:P.chartHeight,width:P.chartWidth}},1===a?this.getSkeleton():l().createElement(D.Td,{ariaDesc:r.formatMessage(o.Z.breakdownCostChartAriaDesc),ariaTitle:r.formatMessage(o.Z.breakdownCostBreakdownTitle),constrainToVisibleArea:!0,data:[{x:C,y:d,units:p},{x:b,y:m,units:u},{x:T,y:g,units:h}],height:P.chartHeight,labels:({datum:e})=>r.formatMessage(o.Z.breakdownCostChartTooltip,{name:e.x,value:(0,Z.xG)(e.y,e.units)}),legendComponent:L,legendData:[{name:C},{name:b},{name:T}],legendOrientation:"vertical",legendPosition:"right",name:e,padding:{bottom:20,left:0,right:275,top:20},themeColor:O.nz.green,width:P.chartWidth}))}}const w=(0,c.ZP)(M);var _=a(65048),B=a(2866),j=a(84072),V=a(94377),U=a(42581);const q={mainContent:{marginTop:a(57640).ZP.value},subTitle:{textAlign:"right"}},N="cost";class F extends l().Component{constructor(e){super(e)}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:a}=this.props;e(a,N,t)}componentDidUpdate(e){const{fetchReport:t,queryString:a,reportPathsType:r}=this.props;e.queryString!==a&&t(r,N,a)}render(){const{intl:e,report:t,reportGroupBy:a,reportFetchStatus:s}=this.props,n=t&&t.meta&&t.meta.total,i=(0,Z.xG)(n?t.meta.total.cost.total.value:0,n?t.meta.total.cost.total.units:"USD");return l().createElement(l().Fragment,null,l().createElement("div",{style:q.subTitle},l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.xl},e.formatMessage(o.Z.detailsCostValue,{value:i}))),l().createElement("div",{style:q.mainContent},l().createElement(B.mZ,{idKey:a,report:t,status:s},(({items:e})=>e.map((e=>l().createElement(B.EH,{key:e.id,formatOptions:{},label:e.label?e.label.toString():"",totalValue:t.meta.total.cost.total.value,units:t.meta.total.cost.total.units,value:e.cost.total.value})))))))}}const z=(0,V.X1)(((e,{costType:t,currency:a,reportGroupBy:r,reportPathsType:s})=>{const o=(0,n.mB)(location.search),i=(0,j.OA)(o),l=i?n.dV:(0,j.VL)(o),c=i||(0,j.pe)(o),u={filter:{resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},o&&o.filter_by&&o.filter_by),o&&o.filter&&o.filter.account&&{[`${n.Sq}account`]:o.filter.account}),l&&{[l]:void 0}),l&&{[l]:c}),group_by:Object.assign({},r&&{[r]:"*"}),cost_type:t,currency:a},p=(0,n.pm)(u);return{queryString:p,report:U.ZV.selectReport(e,s,N,p),reportFetchStatus:U.ZV.selectReportFetchStatus(e,s,N,p)}})),A={fetchReport:U.nx.fetchReport},I=(0,c.ZP)((0,_.connect)(z,A)(F));class G extends l().Component{constructor(e){super(e),this.handleClose=()=>{this.props.onClose(!1)},this.handleClose=this.handleClose.bind(this)}shouldComponentUpdate(e){const{groupByValue:t,isOpen:a}=this.props;return e.groupByValue!==t||e.isOpen!==a}render(){const{costType:e,currency:t,groupByValue:a,intl:s,isOpen:n,reportGroupBy:i,reportPathsType:c}=this.props;return l().createElement(r.Modal,{className:"modalOverride",isOpen:n,onClose:this.handleClose,title:s.formatMessage(o.Z.detailsSummaryModalTitle,{groupBy:i,name:a}),variant:"large"},l().createElement(I,{costType:e,currency:t,reportGroupBy:i,reportPathsType:c}))}}const Q=(0,c.ZP)(G),W={card:{},skeleton:{marginTop:k.ZP.value},viewAllContainer:{marginLeft:"-15px"}};class $ extends l().Component{constructor(){super(...arguments),this.state={isBulletChartModalOpen:!1},this.getItems=()=>{const{report:e,reportGroupBy:t}=this.props;return(0,p.R)({report:e,idKey:t})},this.getSummary=()=>{const{report:e,reportGroupBy:t,reportFetchStatus:a}=this.props;return l().createElement(B.mZ,{idKey:t,report:e,status:a},(({items:t})=>t.map((t=>l().createElement(B.EH,{formatOptions:{},key:`${t.id}-item`,label:t.label?t.label.toString():void 0,totalValue:e.meta.total.cost.total.value,units:e.meta.total.cost.total.units,value:t.cost.total.value})))))},this.getViewAll=()=>{const{costType:e,currency:t,groupBy:a,query:s,reportGroupBy:n,reportPathsType:i,intl:c}=this.props,{isBulletChartModalOpen:p}=this.state;if(-1!==this.getItems().findIndex((e=>{const t=e.id;if(t&&null!==t)return"Other"===t||"Others"===t}))){const h=s&&s.filter&&s.filter.account?s.filter.account:this.props.groupByValue;return l().createElement("div",{style:W.viewAllContainer},l().createElement(r.Button,Object.assign({},(0,u.g_)(u._q.details.view_all_btn),{onClick:this.handleBulletChartModalOpen,type:r.ButtonType.button,variant:r.ButtonVariant.link}),c.formatMessage(o.Z.detailsViewAll,{value:n})),l().createElement(Q,{costType:e,currency:t,groupBy:a,groupByValue:h,isOpen:p,onClose:this.handleBulletChartModalClose,query:s,reportGroupBy:n,reportPathsType:i}))}return null},this.handleBulletChartModalClose=e=>{this.setState({isBulletChartModalOpen:e})},this.handleBulletChartModalOpen=e=>{this.setState({isBulletChartModalOpen:!0}),e.preventDefault()}}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:a,reportType:r}=this.props;e(a,r,t)}componentDidUpdate(e){const{costType:t,currency:a,fetchReport:r,queryString:s,reportPathsType:n,reportType:o}=this.props;e.queryString===s&&e.costType===t&&e.currency===a||r(n,o,s)}render(){const{reportGroupBy:e,reportFetchStatus:t,intl:a}=this.props;return l().createElement(r.Card,{style:W.card},l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},a.formatMessage(o.Z.breakdownSummaryTitle,{value:e}))),l().createElement(r.CardBody,null,1===t?l().createElement(l().Fragment,null,l().createElement(r.Skeleton,{width:L.N.md}),l().createElement(r.Skeleton,{style:W.skeleton,width:L.N.md}),l().createElement(r.Skeleton,{style:W.skeleton,width:L.N.md}),l().createElement(r.Skeleton,{style:W.skeleton,width:L.N.md})):this.getSummary()),l().createElement(r.CardFooter,null,this.getViewAll()))}}const H=(0,V.X1)(((e,{costType:t,currency:a,reportGroupBy:r,reportPathsType:s,reportType:o})=>{const i=(0,n.mB)(location.search),l=(0,j.OA)(i),c=l?n.dV:(0,j.VL)(i),u=l||(0,j.pe)(i),p={filter:{limit:3,resolution:"monthly",time_scope_units:"month",time_scope_value:-1},filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},i&&i.filter_by&&i.filter_by),i&&i.filter&&i.filter.account&&{[`${n.Sq}account`]:i.filter.account}),c&&{[c]:void 0}),c&&{[c]:u}),group_by:Object.assign({},r&&{[r]:"*"}),cost_type:t,currency:a},h=(0,n.pm)(p);return{groupBy:c,groupByValue:u,query:i,queryString:h,report:U.ZV.selectReport(e,s,o,h),reportFetchStatus:U.ZV.selectReportFetchStatus(e,s,o,h),reportPathsType:s,reportType:o}})),X={fetchReport:U.nx.fetchReport},J=(0,c.ZP)((0,_.connect)(H,X)($));a(56804);var K=a(762),Y=a(90392),ee=a(29516),te=a(63211);const ae={chartSkeleton:{marginBottom:k.ZP.value},capacity:{fontWeight:R.ZP.value},legendSkeleton:{marginTop:k.ZP.value}};class re extends l().Component{constructor(){super(...arguments),this.containerRef=l().createRef(),this.observer=te.Z,this.state={width:0},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})},this.getChart=()=>{const{groupBy:e,name:t,reportFetchStatus:a,report:r}=this.props,{width:s}=this.state,n=this.getChartDatum();return r&&0!==n.usage.length?l().createElement("div",{className:"chartOverride"},1===a?this.getSkeleton():l().createElement(l().Fragment,null,Boolean("cluster"===e)&&this.getFreeSpace(),l().createElement(K.n,{comparativeErrorMeasureData:n.limit.value?[{tooltip:n.limit.tooltip,y:n.limit.value}]:[],comparativeErrorMeasureLegendData:n.limit.value?[{name:n.limit.legend}]:[],height:this.getChartHeight(),labels:({datum:e})=>`${e.tooltip}`,legendPosition:"bottom-left",legendItemsPerRow:this.getItemsPerRow(),maxDomain:this.isDatumEmpty(n)?100:void 0,minDomain:0,name:t,padding:{bottom:75,left:10,right:50,top:0},primarySegmentedMeasureData:n.usage.length?n.usage.map((e=>({tooltip:e.tooltip,y:e.value}))):[],primarySegmentedMeasureLegendData:n.usage.length?n.usage.map((e=>({name:e.legend}))):[],qualitativeRangeData:n.ranges.length?[{tooltip:n.ranges[0].tooltip,y:n.ranges[0].value}]:[],qualitativeRangeLegendData:n.ranges.length?[{name:n.ranges[0].legend}]:[],width:s}))):null},this.getChartHeight=()=>{const{groupBy:e}=this.props,{width:t}=this.state;return"cluster"===e?t>950?115:t>450?150:210:t>700?115:t>450?150:180},this.getItemsPerRow=()=>{const{width:e}=this.state;return e>950?4:e>700?3:e>450?2:1},this.getSkeleton=()=>l().createElement(l().Fragment,null,l().createElement(r.Skeleton,{style:ae.chartSkeleton,width:L.N.md}),l().createElement(r.Skeleton,{style:ae.legendSkeleton,width:L.N.xs})),this.isDatumEmpty=e=>{let t=!1;for(const a of e.ranges)if(a.value){t=!0;break}let a=!1;for(const t of e.usage)if(t.value){a=!0;break}return!(e.limit.value||t||a)}}componentDidMount(){const{fetchReport:e,queryString:t,reportPathsType:a,reportType:r}=this.props;e(a,r,t),this.observer=(0,ee.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){const{fetchReport:t,queryString:a,reportPathsType:r,reportType:s}=this.props;e.queryString!==this.props.queryString&&t(r,s,a)}componentWillUnmount(){this.observer&&this.observer()}getChartDatum(){const{groupBy:e,report:t,intl:a,reportType:r}=this.props,s={limit:{},ranges:[],usage:[]},n=t&&t.meta&&t.meta.total,i=n&&t.meta.total.limit&&null!==t.meta.total.limit,l=Math.trunc(i?t.meta.total.limit.value:0),c=a.formatMessage(o.Z.units,{units:(0,Z.ZV)(i?t.meta.total.limit.units:void 0)});if(s.limit={legend:a.formatMessage(o.Z.detailsUsageLimit,{value:l,units:c}),tooltip:a.formatMessage(o.Z.detailsUsageLimit,{value:l,units:c}),value:Math.trunc(l)},"cluster"===e||"volume"===r){const e=n&&t.meta.total.capacity&&null!==t.meta.total.capacity,r=Math.trunc(e?t.meta.total.capacity.value:0),i=a.formatMessage(o.Z.units,{units:(0,Z.ZV)(e?t.meta.total.capacity.units:void 0)});s.ranges=[{legend:a.formatMessage(o.Z.detailsUsageCapacity,{value:r,units:i}),tooltip:a.formatMessage(o.Z.detailsUsageCapacity,{value:r,units:i}),value:Math.trunc(r)}]}const u=n&&t.meta.total.request&&null!==t.meta.total.request,p=n&&t.meta.total.usage&&null!==t.meta.total.usage,h=Math.trunc(u?t.meta.total.request.value:0),m=a.formatMessage(o.Z.units,{units:(0,Z.ZV)(u?t.meta.total.request.units:void 0)}),d=Math.trunc(p?t.meta.total.usage.value:0),g=a.formatMessage(o.Z.units,{units:(0,Z.ZV)(p?t.meta.total.usage.units:void 0)});return s.usage=[{legend:a.formatMessage(o.Z.detailsUsageUsage,{value:d,units:g}),tooltip:a.formatMessage(o.Z.detailsUsageUsage,{value:d,units:g}),value:Math.trunc(d)},{legend:a.formatMessage(o.Z.detailsUsageRequests,{value:h,units:m}),tooltip:a.formatMessage(o.Z.detailsUsageRequests,{value:h,units:m}),value:Math.trunc(h)}],s}getFreeSpace(){const{report:e,intl:t}=this.props,a=e&&e.meta&&e.meta.total,s=a&&e.meta.total.capacity&&null!==e.meta.total.capacity,n=a&&e.meta.total.request&&null!==e.meta.total.request,i=a&&e.meta.total.usage&&null!==e.meta.total.usage,c=Math.trunc(s?e.meta.total.capacity.value:0),u=Math.trunc(n?e.meta.total.request.value:0),p=t.formatMessage(o.Z.units,{units:(0,Z.ZV)(n?e.meta.total.request.units:void 0)}),h=Math.trunc(i?e.meta.total.usage.value:0),m=t.formatMessage(o.Z.units,{units:(0,Z.ZV)(i?e.meta.total.usage.units:void 0)}),d=c-u,g=c-h;let y=u>0?u/c*100:0;y>100&&(y=100-y);let v=c>h?h/c*100:0;return v>100&&(v=100-v),l().createElement(r.Grid,{hasGutter:!0},l().createElement(r.GridItem,{md:12,lg:6},l().createElement("div",null,t.formatMessage(o.Z.detailsUnusedUsageLabel)),l().createElement("div",{style:ae.capacity},(0,Z.bM)(g,m)),l().createElement("div",null,t.formatMessage(o.Z.detailsUnusedUnits,{percentage:(0,Z.rl)(v,{minimumFractionDigits:0,maximumFractionDigits:0}),units:m}))),l().createElement(r.GridItem,{md:12,lg:6},l().createElement("div",null,t.formatMessage(o.Z.detailsUnusedRequestsLabel)),l().createElement("div",{style:ae.capacity},(0,Z.bM)(d,p)),l().createElement("div",null,t.formatMessage(o.Z.detailsUnusedUnits,{percentage:(0,Z.rl)(y,{minimumFractionDigits:0,maximumFractionDigits:0}),units:p}))))}render(){return l().createElement("div",{className:"chartOverride",ref:this.containerRef},this.getChart())}}const se=(0,V.X1)(((e,{reportPathsType:t,reportType:a})=>{const r=(0,Y.mB)(location.search),s=(0,j.VL)(r),o=(0,j.pe)(r),i={filter:{time_scope_units:"month",time_scope_value:-1,resolution:"monthly"},filter_by:Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),s&&{[s]:void 0}),group_by:Object.assign({},s&&{[s]:o})},l=(0,n.pm)(i);return{groupBy:s,report:U.ZV.selectReport(e,t,a,l),reportFetchStatus:U.ZV.selectReportFetchStatus(e,t,a,l),queryString:l}})),ne={fetchReport:U.nx.fetchReport},oe=(0,c.ZP)((0,_.connect)(se,ne)(re));var ie=a(88297);const le="placeholder";class ce extends l().Component{constructor(){super(...arguments),this.getClusterChart=e=>{const{groupBy:t,report:a,intl:s}=this.props;let i=!1;for(const a of e.cluster.showWidgetOnGroupBy)if(a===t||a===n.P&&-1!==t.indexOf(n.P)){i=!0;break}return i?l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},s.formatMessage(o.Z.clusters))),l().createElement(r.CardBody,null,l().createElement(T,{groupBy:e.cluster.reportGroupBy,report:a}))):null},this.getCostChart=e=>{const{report:t,intl:a}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},a.formatMessage(o.Z.breakdownCostBreakdownTitle),l().createElement(r.Popover,{"aria-label":a.formatMessage(o.Z.breakdownCostBreakdownAriaLabel),enableFlip:!0,bodyContent:l().createElement(l().Fragment,null,l().createElement("p",{style:ie.W.infoTitle},a.formatMessage(o.Z.rawCostTitle)),l().createElement("p",null,a.formatMessage(o.Z.rawCostDescription)),l().createElement("br",null),l().createElement("p",{style:ie.W.infoTitle},a.formatMessage(o.Z.usageCostTitle)),l().createElement("p",null,a.formatMessage(o.Z.usageCostDescription)),l().createElement("br",null),l().createElement("p",{style:ie.W.infoTitle},a.formatMessage(o.Z.markupTitle)),l().createElement("p",null,a.formatMessage(o.Z.markupDescription)),l().createElement("br",null),l().createElement("a",{href:a.formatMessage(o.Z.docsCostModelTerminology),rel:"noreferrer",target:"_blank"},a.formatMessage(o.Z.learnMore)))},l().createElement(r.Button,{variant:r.ButtonVariant.plain},l().createElement(s.iC,{style:ie.W.info}))))),l().createElement(r.CardBody,null,l().createElement(w,{name:e.chartName,report:t})))},this.getCpuUsageChart=e=>{const{intl:t}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(o.Z.cpuTitle))),l().createElement(r.CardBody,null,l().createElement(oe,{name:e.chartName,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getMemoryUsageChart=e=>{const{intl:t}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(o.Z.memoryTitle))),l().createElement(r.CardBody,null,l().createElement(oe,{name:e.chartName,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getSummaryCard=e=>{const{costType:t,currency:a,groupBy:r,query:s}=this.props;let o=!1;for(const t of e.reportSummary.showWidgetOnGroupBy)if(t===r||s&&s.group_by&&s.group_by[n.dV]||t===n.P&&r&&-1!==r.indexOf(n.P)){o=!0;break}return o?l().createElement(J,{costType:t,currency:a,reportGroupBy:e.reportSummary.reportGroupBy,reportPathsType:e.reportPathsType,reportType:e.reportType}):e.reportSummary.usePlaceholder?le:null},this.getVolumeUsageChart=e=>{const{intl:t}=this.props;return l().createElement(r.Card,null,l().createElement(r.CardTitle,null,l().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(o.Z.volumeTitle))),l().createElement(r.CardBody,null,l().createElement(oe,{name:e.chartName,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getWidgetsColumns=()=>{const{selectWidgets:e,widgets:t}=this.props,a=[];t.map((t=>{const r=e[t],s=this.renderWidget(r);null!==s&&a.push(s)}));const r=Math.floor(a.length/2)+a.length%2,s=[],n=[];for(let e=0;e<r;e++)a[e]!==le&&s.push(a[e]),e+r<a.length&&a[e+r]!==le&&n.push(a[e+r]);return{leftColumnWidgets:s,rightColumnWidgets:n}}}renderWidget(e){switch(e.type){case"cluster":return this.getClusterChart(e);case"cost":return this.getCostChart(e);case"cpuUsage":return this.getCpuUsageChart(e);case"memoryUsage":return this.getMemoryUsageChart(e);case"summary":return this.getSummaryCard(e);case"volumeUsage":return this.getVolumeUsageChart(e);default:return null}}render(){const{leftColumnWidgets:e,rightColumnWidgets:t}=this.getWidgetsColumns();return l().createElement(r.Grid,{hasGutter:!0},l().createElement(r.GridItem,{lg:12,xl:6},l().createElement(r.Grid,{hasGutter:!0},e.map(((e,t)=>l().createElement(r.GridItem,{key:`widget-${t}`},e))))),l().createElement(r.GridItem,{lg:12,xl:6},l().createElement(r.Grid,{hasGutter:!0},t.map(((e,t)=>l().createElement(r.GridItem,{key:`widget-${t}`},e))))))}}const ue=(0,c.ZP)(ce)},81370:(e,t,a)=>{a.d(t,{f:()=>me});var r=a(65834),s=a(93952),n=a(92950),o=a.n(n),i=a(74806),l=a(45997),c=a(65048),u=a(11001),p=(a(56804),a(21094)),h=a(47280),m=a(80469),d=a(84154),g=a(48629),y=a(52109),v=a(2370),f=a(55855),b=a(77039),C=a(29516),T=a(63211),S=a(27765),E=a(28734),D=a(84076),O=a(18131),Z=a(24656),L=a(84615),R=a(70698),k=a(72021),P=a(21768),x=a(41534),M=a(98499),w=a(48196);const _={currentCapacityData:{fill:"none"},currentColorScale:[P.CH.value,k.R0.value,R.t6.value,L.S7.value,x.iM.value],currentInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},currentCostData:{fill:"none"},itemsPerRow:0,previousCapacityData:{fill:"none"},previousColorScale:[S.O6.value,E.OS.value,D.iY.value,O.cQ.value,Z.DD.value],previousInfrastructureCostData:{fill:"none",strokeDasharray:"3,3"},previousCostData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},B={chart:{marginTop:w.S1.value},title:{marginLeft:"-"+M.Js.value}};class j extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=T.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentCostData:e,previousCostData:t}=this.props,a=s.Z.chartCostLegendLabel,r=s.Z.chartCostLegendTooltip,n=[{childName:"previousCost",data:t,legendItem:{name:(0,u.uL)(t,a,!0,!0,1,s.Z.chartCostLegendNoDataLabel),symbol:{fill:_.previousColorScale[0],type:"minus"},tooltip:(0,u.uL)(t,r,!1,!1,1)},style:{data:Object.assign(Object.assign({},_.previousCostData),{stroke:_.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,u.uL)(e,a,!0,!1,0,s.Z.chartCostLegendNoDataLabel),symbol:{fill:_.currentColorScale[0],type:"minus"},tooltip:(0,u.uL)(e,r,!1,!1)},style:{data:Object.assign(Object.assign({},_.currentCostData),{stroke:_.currentColorScale[0]})}}],o=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:o,series:n})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(p.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,h.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,C.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:120,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e,name:t=""}=this.props,{hiddenSeries:a,series:r,width:s}=this.state,n=e||(s>700?_.itemsPerRow:2);return o().createElement(m.Qk,{data:(0,C.oX)(r,a),height:25,gutter:20,itemsPerRow:n,name:`${t}-legend`})},this.handleLegendClick=e=>{const t=(0,C.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,C.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentCostData===this.props.currentCostData&&e.currentInfrastructureCostData===this.props.currentInfrastructureCostData&&e.previousCostData===this.props.previousCostData&&e.previousInfrastructureCostData===this.props.previousInfrastructureCostData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentInfrastructureCostData:e,previousInfrastructureCostData:t}=this.props,a=e?(0,f.Z)((0,u.Y_)(e,!0,!0)[1]):0,r=t?(0,f.Z)((0,u.Y_)(t,!0,!0)[1]):0;return a>0||r>0?Math.max(a,r):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,d.u)({chartNames:(0,C.bC)(a),isHidden:e=>(0,C.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,intl:n,name:i,padding:l={bottom:120,left:8,right:8,top:8},title:c,xAxisLabel:u,yAxisLabel:p}=this.props,{cursorVoronoiContainer:h,hiddenSeries:m,series:d,width:f}=this.state,T=(0,C.ge)(d,m),S=this.getEndDate(),E=Math.floor(S/2),D=e&&f>700?a-25:a,O=h?o().cloneElement(h,{disable:!(0,C.TW)(d,m),labelComponent:o().createElement(g.M,{legendData:(0,C.oX)(d,m,!0),title:e=>n.formatMessage(s.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement("div",{className:"chartOverride",ref:this.containerRef},o().createElement(r.Title,{headingLevel:"h2",style:B.title,size:r.TitleSizes.xl},c),o().createElement("div",{style:Object.assign(Object.assign({},B.chart),{height:D})},o().createElement("div",{style:{height:t,width:f},"data-testid":"historical-chart-wrapper"},o().createElement(y.k,{containerComponent:O,domain:T,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:(0,C.oX)(d,m),legendPosition:"bottom",name:i,padding:l,theme:b.Z,width:f},d&&d.map(((e,t)=>this.getChart(e,t))),o().createElement(v.C,{label:u,style:_.xAxis,tickValues:[1,E,S]}),o().createElement(v.C,{dependentAxis:!0,label:p,style:_.yAxis})))))}}const V=(0,i.ZP)(j);var U=a(84072),q=a(94377),N=a(42581),F=a(99291),z=a(57279),A=a(11331),I=a(32412);const G={chartContainer:{marginLeft:M.ZP.value},chartSkeleton:{height:"125px",marginBottom:I.ZP.value,marginTop:A.ZP.value},costChart:{marginBottom:w.ZP.value,marginTop:w.ZP.value},legendSkeleton:{marginTop:I.ZP.value},trendChart:{marginBottom:w.ZP.value,marginTop:w.ZP.value},usageChart:{marginTop:w.ZP.value}};class Q extends o().Component{constructor(){super(...arguments),this.getSkeleton=()=>o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{style:G.chartSkeleton,width:z.N.md}),o().createElement(r.Skeleton,{style:G.legendSkeleton,width:z.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:a,reportPathsType:r,reportType:s}=this.props;e(r,s,t),e(r,s,a)}componentDidUpdate(e){const{fetchReport:t,costType:a,currency:r,currentQueryString:s,previousQueryString:n,reportPathsType:o,reportType:i}=this.props;e.currentQueryString===s&&e.costType===a&&e.currency===r||t(o,i,s),e.previousQueryString===n&&e.costType===a&&e.currency===r||t(o,i,n)}render(){const{chartName:e,currentReport:t,currentReportFetchStatus:a,previousReport:r,previousReportFetchStatus:n,intl:i}=this.props,l=(0,u.zJ)(t,0,"date","cost"),c=(0,u.zJ)(t,0,"date","infrastructure"),p=(0,u.zJ)(r,0,"date","cost"),h=(0,u.zJ)(r,0,"date","infrastructure"),m=t&&t.meta&&t.meta.total&&t.meta.total.cost?t.meta.total.cost.total.units:"USD",d=i.formatMessage(s.Z.currencyUnits,{units:m});return o().createElement("div",{style:G.chartContainer},o().createElement("div",{style:G.costChart},1===a&&1===n?this.getSkeleton():o().createElement(V,{adjustContainerHeight:!0,containerHeight:275,currentCostData:l,currentInfrastructureCostData:c,formatOptions:{},formatter:F.bM,height:300,name:e,previousCostData:p,previousInfrastructureCostData:h,xAxisLabel:i.formatMessage(s.Z.historicalChartDayOfMonthLabel),yAxisLabel:i.formatMessage(s.Z.historicalChartCostLabel,{units:d})})))}}const W=(0,q.X1)(((e,{costType:t,currency:a,reportPathsType:r,reportType:s})=>{const n=(0,l.mB)(location.search),o=(0,U.VL)(n),i=(0,U.pe)(n),c={filter_by:Object.assign(Object.assign({},n&&n.filter_by&&n.filter_by),o&&{[o]:void 0}),group_by:Object.assign({},o&&{[o]:i}),cost_type:t,currency:a},u=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),p=(0,l.pm)(u),h=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),m=(0,l.pm)(h);return{currentQuery:u,currentQueryString:p,currentReport:N.ZV.selectReport(e,r,s,p),currentReportFetchStatus:N.ZV.selectReportFetchStatus(e,r,s,p),previousQuery:h,previousQueryString:m,previousReport:N.ZV.selectReport(e,r,s,m),previousReportFetchStatus:N.ZV.selectReportFetchStatus(e,r,s,m)}})),$={fetchReport:N.nx.fetchReport},H=(0,i.ZP)((0,c.connect)(W,$)(Q)),X={currentColorScale:[P.CH.value,k.R0.value,R.t6.value,L.S7.value,x.iM.value],currentMonthData:{fill:"none"},itemsPerRow:0,previousColorScale:[S.O6.value,E.OS.value,D.iY.value,O.cQ.value,Z.DD.value],previousMonthData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},J={chart:{marginTop:w.S1.value},title:{marginLeft:"-"+M.Js.value}};class K extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=T.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentData:e,previousData:t,showUsageLegendLabel:a=!1}=this.props,r=a?s.Z.chartUsageLegendLabel:s.Z.chartCostLegendLabel,n=a?s.Z.chartUsageLegendTooltip:s.Z.chartCostLegendTooltip,o=[{childName:"previousCost",data:t,legendItem:{name:(0,u.uL)(t,r,!0,!0,1,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:X.previousColorScale[0],type:"minus"},tooltip:(0,u.uL)(t,n,!1,!1,1)},style:{data:Object.assign(Object.assign({},X.previousMonthData),{stroke:X.previousColorScale[0]})}},{childName:"currentCost",data:e,legendItem:{name:(0,u.uL)(e,r,!0,!1,0,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:X.currentColorScale[1],type:"minus"},tooltip:(0,u.uL)(e,n,!1,!1)},style:{data:Object.assign(Object.assign({},X.currentMonthData),{stroke:X.currentColorScale[1]})}}],i=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:i,series:o})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(p.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,h.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,C.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:120,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e,name:t=""}=this.props,{hiddenSeries:a,series:r}=this.state;return o().createElement(m.Qk,{data:(0,C.oX)(r,a),height:25,gutter:20,itemsPerRow:e,name:`${t}-legend`})},this.handleLegendClick=e=>{const t=(0,C.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,C.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentData===this.props.currentData&&e.previousData===this.props.previousData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentData:e,previousData:t}=this.props,a=t?(0,f.Z)((0,u.Y_)(t,!0,!0)[1]):0,r=e?(0,f.Z)((0,u.Y_)(e,!0,!0)[1]):0;return r>0||a>0?Math.max(r,a):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,d.u)({chartNames:(0,C.bC)(a),isHidden:e=>(0,C.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{height:e,containerHeight:t=e,intl:a,name:n,padding:i={bottom:120,left:8,right:8,top:8},title:l,xAxisLabel:c,yAxisLabel:u}=this.props,{cursorVoronoiContainer:p,hiddenSeries:h,series:m,width:d}=this.state,f=(0,C.ge)(m,h),T=this.getEndDate(),S=Math.floor(T/2),E=p?o().cloneElement(p,{disable:!(0,C.TW)(m,h),labelComponent:o().createElement(g.M,{legendData:(0,C.oX)(m,h,!0),title:e=>a.formatMessage(s.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement("div",{className:"chartOverride",ref:this.containerRef},o().createElement(r.Title,{headingLevel:"h2",style:J.title,size:r.TitleSizes.xl},l),o().createElement("div",{style:Object.assign(Object.assign({},J.chart),{height:t})},o().createElement("div",{style:{height:e,width:d},"data-testid":"historical-chart-wrapper"},o().createElement(y.k,{containerComponent:E,domain:f,events:this.getEvents(),height:e,legendComponent:this.getLegend(),legendData:(0,C.oX)(m,h),legendPosition:"bottom",name:n,padding:i,theme:b.Z,width:d},m&&m.map(((e,t)=>this.getChart(e,t))),o().createElement(v.C,{label:c,style:X.xAxis,tickValues:[1,S,T]}),o().createElement(v.C,{dependentAxis:!0,label:u,style:X.yAxis})))))}}const Y=(0,i.ZP)(K);class ee extends o().Component{constructor(){super(...arguments),this.getSkeleton=()=>o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{style:G.chartSkeleton,width:z.N.md}),o().createElement(r.Skeleton,{style:G.legendSkeleton,width:z.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:a,reportPathsType:r,reportType:s}=this.props;e(r,s,t),e(r,s,a)}componentDidUpdate(e){const{fetchReport:t,costType:a,currency:r,currentQueryString:s,previousQueryString:n,reportPathsType:o,reportType:i}=this.props;e.currentQueryString===s&&e.costType===a&&e.currency===r||t(o,i,s),e.previousQueryString===n&&e.costType===a&&e.currency===r||t(o,i,n)}render(){const{chartName:e,currentReport:t,currentReportFetchStatus:a,previousReport:r,previousReportFetchStatus:n,reportType:i,intl:l}=this.props,c="cost"===i,p=(0,u.zJ)(t,c?0:1,"date",c?"cost":"usage"),h=(0,u.zJ)(r,c?0:1,"date",c?"cost":"usage"),m=t&&t.meta&&t.meta.total&&t.meta.total.cost?t.meta.total.cost.total.units:"USD",d=t&&t.meta&&t.meta.total&&t.meta.total.usage?t.meta.total.usage.units:void 0;let g;if(c){const e=l.formatMessage(s.Z.currencyUnits,{units:m});g=l.formatMessage(s.Z.historicalChartCostLabel,{units:e})}else if(d&&Number.isNaN(Number(t.meta.total.usage.units)))g=l.formatMessage(s.Z.units,{units:(0,F.ZV)(d)});else{const e=l.formatMessage(s.Z.historicalChartUsageLabel,{value:i});g=l.formatMessage(s.Z.units,{units:(0,F.ZV)(e)})}return o().createElement("div",{style:G.chartContainer},o().createElement("div",{style:G.trendChart},1===a&&1===n?this.getSkeleton():o().createElement(Y,{containerHeight:250,currentData:p,formatOptions:{},formatter:F.bM,height:300,name:e,previousData:h,units:c?m:d,xAxisLabel:l.formatMessage(s.Z.historicalChartDayOfMonthLabel),yAxisLabel:g})))}}const te=(0,q.X1)(((e,{costType:t,currency:a,reportPathsType:r,reportType:s})=>{const n=(0,l.mB)(location.search),o=(0,U.OA)(n),i=o?l.dV:(0,U.VL)(n),c=o||(0,U.pe)(n),u={filter_by:Object.assign(Object.assign(Object.assign({},n&&n.filter_by&&n.filter_by),n&&n.filter&&n.filter.account&&{[`${l.Sq}account`]:n.filter.account}),i&&{[i]:void 0}),group_by:Object.assign({},i&&{[i]:c}),cost_type:t,currency:a},p=Object.assign(Object.assign({},u),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),h=(0,l.pm)(p),m=Object.assign(Object.assign({},u),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),d=(0,l.pm)(m);return{currentQuery:p,currentQueryString:h,currentReport:N.ZV.selectReport(e,r,s,h),currentReportFetchStatus:N.ZV.selectReportFetchStatus(e,r,s,h),previousQuery:m,previousQueryString:d,previousReport:N.ZV.selectReport(e,r,s,d),previousReportFetchStatus:N.ZV.selectReportFetchStatus(e,r,s,d)}})),ae={fetchReport:N.nx.fetchReport},re=(0,i.ZP)((0,c.connect)(te,ae)(ee)),se={currentCapacityData:{fill:"none"},currentColorScale:[P.CH.value,k.R0.value,R.t6.value,L.S7.value,x.iM.value],currentLimitData:{fill:"none"},currentRequestData:{fill:"none",strokeDasharray:"3,3"},currentUsageData:{fill:"none"},itemsPerRow:0,previousCapacityData:{fill:"none"},previousColorScale:[S.O6.value,E.OS.value,D.iY.value,O.cQ.value,Z.DD.value],previousLimitData:{fill:"none"},previousRequestData:{fill:"none",strokeDasharray:"3,3"},previousUsageData:{fill:"none"},yAxis:{axisLabel:{padding:15},grid:{stroke:"none"},ticks:{stroke:"none"},tickLabels:{fontSize:0}},xAxis:{axisLabel:{padding:40},grid:{stroke:"none"},ticks:{stroke:"none"}}},ne={chart:{marginTop:w.S1.value},title:{marginLeft:"-"+M.Js.value}};class oe extends o().Component{constructor(){super(...arguments),this.containerRef=o().createRef(),this.observer=T.Z,this.state={hiddenSeries:new Set,width:0},this.initDatum=()=>{const{currentLimitData:e,currentRequestData:t,currentUsageData:a,previousLimitData:r,previousRequestData:n,previousUsageData:o}=this.props,i=s.Z.chartLimitLegendLabel,l=s.Z.chartLimitLegendTooltip,c=s.Z.chartRequestsLegendLabel,p=s.Z.chartRequestsLegendTooltip,h=s.Z.chartUsageLegendLabel,m=s.Z.chartUsageLegendTooltip,d=[{childName:"previousUsage",data:o,legendItem:{name:(0,u.Fs)(o,h,!0,!0,1,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:se.previousColorScale[0],type:"minus"},tooltip:(0,u.Fs)(o,m,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousUsageData),{stroke:se.previousColorScale[0]})}},{childName:"currentUsage",data:a,legendItem:{name:(0,u.Fs)(a,h,!0,!1,0,s.Z.chartUsageLegendNoDataLabel),symbol:{fill:se.currentColorScale[0],type:"minus"},tooltip:(0,u.Fs)(a,m,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentUsageData),{stroke:se.currentColorScale[0]})}},{childName:"previousRequest",data:n,legendItem:{name:(0,u.Fs)(n,c,!0,!0,1,s.Z.chartRequestsLegendNoDataLabel),symbol:{fill:se.previousColorScale[1],type:"dash"},tooltip:(0,u.Fs)(n,p,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousRequestData),{stroke:se.previousColorScale[1]})}},{childName:"currentRequest",data:t,legendItem:{name:(0,u.Fs)(t,c,!0,!1,0,s.Z.chartRequestsLegendNoDataLabel),symbol:{fill:se.currentColorScale[1],type:"dash"},tooltip:(0,u.Fs)(t,p,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentRequestData),{stroke:se.currentColorScale[1]})}},{childName:"previousLimit",data:r,legendItem:{name:(0,u.Fs)(r,i,!0,!0,1,s.Z.chartLimitLegendNoDataLabel),symbol:{fill:se.previousColorScale[2],type:"minus"},tooltip:(0,u.Fs)(r,l,!1,!1,1)},style:{data:Object.assign(Object.assign({},se.previousLimitData),{stroke:se.previousColorScale[2]})}},{childName:"currentLimit",data:e,legendItem:{name:(0,u.Fs)(e,i,!0,!1,0,s.Z.chartLimitLegendNoDataLabel),symbol:{fill:se.currentColorScale[2],type:"minus"},tooltip:(0,u.Fs)(e,l,!1,!1)},style:{data:Object.assign(Object.assign({},se.currentLimitData),{stroke:se.currentColorScale[2]})}}],g=this.getCursorVoronoiContainer();this.setState({cursorVoronoiContainer:g,series:d})},this.getChart=(e,t)=>{const{hiddenSeries:a}=this.state;return o().createElement(p.A,{data:a.has(t)?[{y:null}]:e.data,interpolation:"monotoneX",key:e.childName,name:e.childName,style:e.style})},this.getCursorVoronoiContainer=()=>{const{formatter:e,formatOptions:t}=this.props,a=(0,h.f)("voronoi","cursor");return o().createElement(a,{cursorDimension:"x",labels:({datum:a})=>(0,C.zj)(a,e,t),mouseFollowTooltips:!0,voronoiDimension:"x",voronoiPadding:{bottom:130,left:8,right:8,top:8}})},this.getLegend=()=>{const{legendItemsPerRow:e,name:t=""}=this.props,{hiddenSeries:a,series:r,width:s}=this.state,n=e||(s>900?se.itemsPerRow:2);return o().createElement(m.Qk,{data:(0,C.oX)(r,a),height:25,gutter:20,itemsPerRow:n,name:`${t}-legend`})},this.handleLegendClick=e=>{const t=(0,C.nV)(this.state.series,this.state.hiddenSeries,e);this.setState({hiddenSeries:t})},this.handleResize=()=>{const{width:e}=this.state,{clientWidth:t=0}=this.containerRef.current||{};t!==e&&this.setState({width:t})}}componentDidMount(){this.initDatum(),this.observer=(0,C.pP)(this.containerRef.current,this.handleResize)}componentDidUpdate(e){e.currentLimitData===this.props.currentLimitData&&e.currentRequestData===this.props.currentRequestData&&e.currentUsageData===this.props.currentUsageData&&e.previousLimitData===this.props.previousLimitData&&e.previousRequestData===this.props.previousRequestData&&e.previousUsageData===this.props.previousUsageData||this.initDatum()}componentWillUnmount(){this.observer&&this.observer()}getEndDate(){const{currentRequestData:e,currentUsageData:t,previousRequestData:a,previousUsageData:r}=this.props,s=e?(0,f.Z)((0,u.Y_)(e,!0,!0)[1]):0,n=t?(0,f.Z)((0,u.Y_)(t,!0,!0)[1]):0,o=a?(0,f.Z)((0,u.Y_)(a,!0,!0)[1]):0,i=r?(0,f.Z)((0,u.Y_)(r,!0,!0)[1]):0;return s>0||n>0||o>0||i>0?Math.max(s,n,o,i):31}getEvents(){const{name:e=""}=this.props,{hiddenSeries:t,series:a}=this.state;return(0,d.u)({chartNames:(0,C.bC)(a),isHidden:e=>(0,C.Yt)(t,e),legendName:`${e}-legend`,onLegendClick:e=>this.handleLegendClick(e.index)})}render(){const{adjustContainerHeight:e,height:t,containerHeight:a=t,intl:n,name:i,padding:l={bottom:130,left:8,right:8,top:8},title:c,xAxisLabel:u,yAxisLabel:p}=this.props,{cursorVoronoiContainer:h,hiddenSeries:m,series:d,width:f}=this.state,T=(0,C.ge)(d,m),S=this.getEndDate(),E=Math.floor(S/2),D=e&&f>900?a-50:a,O=h?o().cloneElement(h,{disable:!(0,C.TW)(d,m),labelComponent:o().createElement(g.M,{legendData:(0,C.oX)(d,m,!0),title:e=>n.formatMessage(s.Z.chartDayOfTheMonth,{day:e.x})})}):void 0;return o().createElement("div",{className:"chartOverride",ref:this.containerRef},o().createElement(r.Title,{headingLevel:"h2",style:ne.title,size:r.TitleSizes.xl},c),o().createElement("div",{style:Object.assign(Object.assign({},ne.chart),{height:D})},o().createElement("div",{style:{height:t,width:f},"data-testid":"historical-chart-wrapper"},o().createElement(y.k,{containerComponent:O,domain:T,events:this.getEvents(),height:t,legendComponent:this.getLegend(),legendData:(0,C.oX)(d,m),legendPosition:"bottom",name:i,padding:l,theme:b.Z,width:f},d&&d.map(((e,t)=>this.getChart(e,t))),o().createElement(v.C,{label:u,style:se.xAxis,tickValues:[1,E,S]}),o().createElement(v.C,{dependentAxis:!0,label:p,style:se.yAxis})))))}}const ie=(0,i.ZP)(oe);class le extends o().Component{constructor(){super(...arguments),this.getSkeleton=()=>o().createElement(o().Fragment,null,o().createElement(r.Skeleton,{style:G.chartSkeleton,width:z.N.md}),o().createElement(r.Skeleton,{style:G.legendSkeleton,width:z.N.xs}))}componentDidMount(){const{fetchReport:e,currentQueryString:t,previousQueryString:a,reportPathsType:r,reportType:s}=this.props;e(r,s,t),e(r,s,a)}componentDidUpdate(e){const{fetchReport:t,currentQueryString:a,previousQueryString:r,reportPathsType:s,reportType:n}=this.props;e.currentQueryString!==a&&t(s,n,a),e.previousQueryString!==r&&t(s,n,r)}render(){const{chartName:e,currentReport:t,currentReportFetchStatus:a,previousReport:r,previousReportFetchStatus:n,intl:i}=this.props,l=(0,u.zJ)(t,1,"date","limit"),c=(0,u.zJ)(t,1,"date","request"),p=(0,u.zJ)(t,1,"date","usage"),h=(0,u.zJ)(r,1,"date","limit"),m=(0,u.zJ)(r,1,"date","request"),d=(0,u.zJ)(r,1,"date","usage"),g=t&&t.meta&&t.meta.total&&t.meta.total.usage?t.meta.total.usage.units:"";return o().createElement("div",{style:G.chartContainer},o().createElement("div",{style:G.usageChart},1===a&&1===n?this.getSkeleton():o().createElement(ie,{adjustContainerHeight:!0,containerHeight:300,currentLimitData:l,currentRequestData:c,currentUsageData:p,formatter:F.bM,formatOptions:{},height:300,name:e,previousLimitData:h,previousRequestData:m,previousUsageData:d,xAxisLabel:i.formatMessage(s.Z.historicalChartDayOfMonthLabel),yAxisLabel:i.formatMessage(s.Z.units,{units:(0,F.ZV)(g)})})))}}const ce=(0,q.X1)(((e,{reportPathsType:t,reportType:a})=>{const r=(0,l.mB)(location.search),s=(0,U.OA)(r),n=(0,U.VL)(r),o=(0,U.pe)(r),i="instance_type"===a||"storage"===a,c={filter_by:Object.assign(Object.assign(Object.assign(Object.assign({},r&&r.filter_by&&r.filter_by),r&&r.filter&&r.filter.account&&{[`${l.Sq}account`]:r.filter.account}),n&&{[n]:void 0}),s&&i&&{[l.dV]:s}),group_by:Object.assign(Object.assign({},s&&!i&&{[l.dV]:s}),n&&!s&&{[n]:o})},u=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-1}}),p=(0,l.pm)(u),h=Object.assign(Object.assign({},c),{filter:{resolution:"daily",time_scope_units:"month",time_scope_value:-2}}),m=(0,l.pm)(h);return{currentQuery:u,currentQueryString:p,currentReport:N.ZV.selectReport(e,t,a,p),currentReportFetchStatus:N.ZV.selectReportFetchStatus(e,t,a,p),previousQuery:h,previousQueryString:m,previousReport:N.ZV.selectReport(e,t,a,m),previousReportFetchStatus:N.ZV.selectReportFetchStatus(e,t,a,m)}})),ue={fetchReport:N.nx.fetchReport},pe=(0,i.ZP)((0,c.connect)(ce,ue)(le));class he extends o().Component{constructor(){super(...arguments),this.getTitleKey=(e,t)=>"azure"===e?"instance_type"===t?"virtual_machine":t:"instance_type"===t?"instance_type":t,this.getCostChart=e=>{const{costType:t,currency:a,intl:n}=this.props;return o().createElement(r.Card,null,o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},n.formatMessage(s.Z.historicalChartTitle,{value:this.getTitleKey(e.reportPathsType,e.reportType)}))),o().createElement(r.CardBody,null,o().createElement(H,{chartName:e.chartName,costType:t,currency:a,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getTrendChart=e=>{const{costType:t,currency:a,intl:n}=this.props;return o().createElement(r.Card,null,o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},n.formatMessage(s.Z.historicalChartTitle,{value:this.getTitleKey(e.reportPathsType,e.reportType)}))),o().createElement(r.CardBody,null,o().createElement(re,{chartName:e.chartName,costType:t,currency:a,reportPathsType:e.reportPathsType,reportType:e.reportType})))},this.getUsageChart=e=>{const{intl:t}=this.props;return o().createElement(r.Card,null,o().createElement(r.CardTitle,null,o().createElement(r.Title,{headingLevel:"h2",size:r.TitleSizes.lg},t.formatMessage(s.Z.historicalChartTitle,{value:this.getTitleKey(e.reportPathsType,e.reportType)}))),o().createElement(r.CardBody,null,o().createElement(pe,{chartName:e.chartName,reportPathsType:e.reportPathsType,reportType:e.reportType})))}}renderWidget(e){switch(e.type){case"cost":return this.getCostChart(e);case"trend":return this.getTrendChart(e);case"usage":return this.getUsageChart(e);default:return null}}render(){const{selectWidgets:e,widgets:t}=this.props;return o().createElement(r.Grid,{hasGutter:!0},t.map((t=>{const a=e[t];return o().createElement(r.GridItem,{key:`widget-${t}`},this.renderWidget(a))})))}}const me=(0,i.ZP)(he)},88297:(e,t,a)=>{a.d(t,{W:()=>c});var r=a(49382),s=a(33605),n=a(17918),o=a(54881),i=a(98499),l=a(48196);const c={costValue:{marginTop:i.ZP.var,marginBottom:0},costLabelUnit:{fontSize:o.ZP.value,color:s.ZP.var},dateTitle:{textAlign:"end"},header:{backgroundColor:r.ZP.var,padding:i.ZP.var},headerContent:{display:"flex",justifyContent:"space-between"},headerContentLeft:{display:"flex",minHeight:"90px"},headerContentRight:{display:"flex"},info:{verticalAlign:"middle"},infoIcon:{fontSize:n.ZP.value},infoTitle:{fontWeight:"bold"},title:{paddingBottom:l.ZP.var}}},20635:(e,t,a)=>{a.d(t,{T:()=>s,Z:()=>n});var r=a(45997);const s=({basePath:e,label:t,description:a,groupBy:s,query:n})=>{const o=Object.assign(Object.assign(Object.assign({},n),a&&a!==t&&{[r.eG]:a}),{group_by:{[s]:t}});return`${e}?${(0,r.IV)(o)}`},n=({basePath:e,description:t,groupBy:a,groupByOrg:s,id:n,orgUnitId:o,query:i,title:l,type:c})=>{const u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},JSON.parse(JSON.stringify(i))),t&&t!==l&&{[r.eG]:t}),l&&{[r.yG]:l}),s&&o&&{[r.dV]:o}),{group_by:{[a]:n}});return u.filter||(u.filter={}),"account"===c?(u.filter.account=n,u.group_by={[r.dV]:s}):"organizational_unit"===c&&(u.group_by={[r.dV]:n}),`${e}?${(0,r.IV)(u)}`}}}]);
//# sourceMappingURL=12e05da25f053fc8e99f.bundle.js.map